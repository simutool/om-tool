{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/app/core/utils/emitter.ts","webpack:///./public/app/core/components/Picker/IndicatorsContainer.tsx","webpack:///./public/app/core/components/Picker/NoOptionsMessage.tsx","webpack:///./public/app/core/components/Picker/ResetStyles.tsx","webpack:///./public/app/core/utils/rangeutil.ts","webpack:///./public/app/core/app_events.ts","webpack:///./public/app/core/components/Tooltip/Tooltip.tsx","webpack:///./public/app/core/components/Tooltip/withTooltip.tsx","webpack:///./public/app/features/api-keys/state/actions.ts","webpack:///./public/app/core/utils/kbn.ts","webpack:///./public/app/plugins/datasource/prometheus/mode-prometheus.js","webpack:///./public/app/plugins/datasource/prometheus/snippets/prometheus.js","webpack:///./public/vendor/flot/jquery.flot.pie.js","webpack:///./public/app sync extensions\\/index.ts","webpack:///./public/app/core/services/backend_srv.ts","webpack:///./public/app/core/directives/dash_class.ts","webpack:///./public/app/core/directives/dropdown_typeahead.ts","webpack:///./public/app/core/directives/metric_segment.ts","webpack:///./public/app/core/directives/misc.ts","webpack:///./public/app/core/directives/ng_model_on_blur.ts","webpack:///./public/app/core/directives/tags.ts","webpack:///./public/app/core/directives/value_select_dropdown.ts","webpack:///./public/app/core/directives/rebuild_on_change.ts","webpack:///./public/app/core/directives/give_focus.ts","webpack:///./public/app/core/directives/diff-view.ts","webpack:///./public/app/core/jquery_extended.ts","webpack:///./public/app/core/components/json_explorer/helpers.ts","webpack:///./public/app/core/components/json_explorer/json_explorer.ts","webpack:///./public/app/core/components/jsontree/jsontree.ts","webpack:///./public/app/core/components/code_editor/code_editor.ts","webpack:///./public/app/core/components/colorpicker/ColorPalette.tsx","webpack:///./public/app/core/components/colorpicker/SpectrumPicker.tsx","webpack:///./public/app/core/components/colorpicker/ColorPickerPopover.tsx","webpack:///./public/app/core/utils/react2angular.ts","webpack:///./public/app/core/components/colorpicker/ColorPicker.tsx","webpack:///./public/app/core/components/colorpicker/spectrum_picker.ts","webpack:///./public/app/core/components/colorpicker/SeriesColorPicker.tsx","webpack:///./public/app/core/services/impression_srv.ts","webpack:///./public/app/core/services/search_srv.ts","webpack:///./public/app/core/services/ng_react.ts","webpack:///./public/app/core/components/search/search.ts","webpack:///./public/app/core/components/info_popover.ts","webpack:///./public/app/core/directives/array_join.ts","webpack:///./public/app/core/components/navbar/navbar.ts","webpack:///./public/app/core/live/live_srv.ts","webpack:///./public/app/core/components/layout_selector/layout_selector.ts","webpack:///./public/app/core/components/switch.ts","webpack:///./public/app/core/components/dashboard_selector.ts","webpack:///./public/app/core/components/query_part/query_part_editor.ts","webpack:///./public/app/core/components/sql_part/sql_part_editor.ts","webpack:///./public/app/core/components/form_dropdown/form_dropdown.ts","webpack:///./public/app/core/controllers/inspect_ctrl.ts","webpack:///./public/app/core/controllers/json_editor_ctrl.ts","webpack:///./public/app/core/controllers/login_ctrl.ts","webpack:///./public/app/core/controllers/invited_ctrl.ts","webpack:///./public/app/core/controllers/signup_ctrl.ts","webpack:///./public/app/core/controllers/reset_password_ctrl.ts","webpack:///./public/app/core/controllers/error_ctrl.ts","webpack:///./public/app/core/controllers/all.ts","webpack:///./public/app/core/services/alert_srv.ts","webpack:///./public/app/core/services/util_srv.ts","webpack:///./public/app/core/services/analytics.ts","webpack:///./public/app/core/services/timer.ts","webpack:///./public/app/core/services/popover_srv.ts","webpack:///./public/app/core/services/segment_srv.ts","webpack:///./public/app/core/services/dynamic_directive_srv.ts","webpack:///./public/app/core/reducers/navModel.ts","webpack:///./public/app/core/reducers/location.ts","webpack:///./public/app/core/reducers/index.ts","webpack:///./public/app/core/components/query_part/query_part.ts","webpack:///./public/app/features/alerting/state/alertDef.ts","webpack:///./public/app/features/alerting/state/reducers.ts","webpack:///./public/app/features/teams/state/reducers.ts","webpack:///./public/app/features/api-keys/state/reducers.ts","webpack:///./public/app/core/utils/acl.ts","webpack:///./public/app/features/folders/state/reducers.ts","webpack:///./public/app/features/dashboard/state/reducers.ts","webpack:///./public/app/features/plugins/state/reducers.ts","webpack:///./public/app/features/datasources/state/reducers.ts","webpack:///./public/app/features/users/state/reducers.ts","webpack:///./public/app/store/configureStore.ts","webpack:///./public/app/core/utils/location_util.ts","webpack:///./public/app/core/services/bridge_srv.ts","webpack:///./public/app/core/services/all.ts","webpack:///./public/app/core/filters/filters.ts","webpack:///./public/app/core/services/keybindingSrv.ts","webpack:///./public/app/core/utils/model_utils.ts","webpack:///./public/app/core/components/help/help.ts","webpack:///./public/app/core/nav_model_srv.ts","webpack:///./public/app/core/components/scroll/scroll.ts","webpack:///./public/app/core/components/scroll/page_scroll.ts","webpack:///./public/app/core/components/org_switcher.ts","webpack:///./public/app/core/components/gf_page.ts","webpack:///./public/app/core/profiler.ts","webpack:///./public/app/core/components/search/SearchResult.tsx","webpack:///./public/app/core/components/PasswordStrength.tsx","webpack:///./public/app/core/components/TagFilter/TagOption.tsx","webpack:///./public/app/core/components/TagFilter/TagFilter.tsx","webpack:///./public/app/core/components/sidemenu/DropDownChild.tsx","webpack:///./public/app/core/components/sidemenu/SideMenuDropDown.tsx","webpack:///./public/app/core/components/sidemenu/TopSectionItem.tsx","webpack:///./public/app/core/components/sidemenu/TopSection.tsx","webpack:///./public/app/core/components/sidemenu/SignIn.tsx","webpack:///./public/app/core/components/sidemenu/BottomNavLinks.tsx","webpack:///./public/app/core/components/sidemenu/BottomSection.tsx","webpack:///./public/app/core/angular_wrappers.ts","webpack:///./public/app/core/components/sidemenu/SideMenu.tsx","webpack:///./public/app/core/components/search/search_results.ts","webpack:///./public/app/core/components/manage_dashboards/manage_dashboards.ts","webpack:///./public/app/core/core.ts","webpack:///./public/app/routes/dashboard_loaders.ts","webpack:///./public/app/routes/ReactContainer.tsx","webpack:///./public/app/routes/registry.ts","webpack:///./public/app/routes/routes.ts","webpack:///./public/app/features/dashboard/time_srv.ts","webpack:///./public/app/features/panel/panel_ctrl.ts","webpack:///./public/app/features/panel/metrics_tab.ts","webpack:///./public/app/features/panel/metrics_panel_ctrl.ts","webpack:///./public/app/features/panel/query_ctrl.ts","webpack:///./public/app/features/alerting/state/ThresholdMapper.ts","webpack:///./public/app/features/alerting/AlertTabCtrl.ts","webpack:///./public/app/core/utils/file_export.ts","webpack:///./public/app/plugins/sdk.ts","webpack:///./public/app/core/utils/flatten.ts","webpack:///./public/app/core/utils/version.ts","webpack:///./public/app/plugins/datasource/graphite/gfunc.ts","webpack:///./public/app/plugins/datasource/graphite/datasource.ts","webpack:///./public/app/plugins/datasource/graphite/add_graphite_func.ts","webpack:///./public/app/plugins/datasource/graphite/func_editor.ts","webpack:///./public/app/plugins/datasource/graphite/lexer.ts","webpack:///./public/app/plugins/datasource/graphite/parser.ts","webpack:///./public/app/plugins/datasource/graphite/graphite_query.ts","webpack:///./public/app/plugins/datasource/graphite/query_ctrl.ts","webpack:///./public/app/plugins/datasource/cloudwatch/query_parameter_ctrl.ts","webpack:///./public/app/plugins/datasource/graphite/config_ctrl.ts","webpack:///./public/app/plugins/datasource/graphite/module.ts","webpack:///./public/app/features/templating/variable.ts","webpack:///./public/app/plugins/datasource/cloudwatch/datasource.ts","webpack:///./public/app/plugins/datasource/cloudwatch/config_ctrl.ts","webpack:///./public/app/plugins/datasource/cloudwatch/query_ctrl.ts","webpack:///./public/app/plugins/datasource/cloudwatch/module.ts","webpack:///./public/app/plugins/datasource/elasticsearch/query_def.ts","webpack:///./public/app/plugins/datasource/elasticsearch/query_builder.ts","webpack:///./public/app/plugins/datasource/elasticsearch/index_pattern.ts","webpack:///./public/app/plugins/datasource/elasticsearch/elastic_response.ts","webpack:///./public/app/plugins/datasource/elasticsearch/datasource.ts","webpack:///./public/app/plugins/datasource/elasticsearch/bucket_agg.ts","webpack:///./public/app/plugins/datasource/elasticsearch/metric_agg.ts","webpack:///./public/app/plugins/datasource/elasticsearch/query_ctrl.ts","webpack:///./public/app/plugins/datasource/elasticsearch/config_ctrl.ts","webpack:///./public/app/plugins/datasource/elasticsearch/module.ts","webpack:///./public/app/plugins/datasource/opentsdb/datasource.ts","webpack:///./public/app/plugins/datasource/opentsdb/query_ctrl.ts","webpack:///./public/app/plugins/datasource/opentsdb/config_ctrl.ts","webpack:///./public/app/plugins/datasource/opentsdb/module.ts","webpack:///./public/app/plugins/datasource/grafana/datasource.ts","webpack:///./public/app/plugins/datasource/grafana/module.ts","webpack:///./public/app/plugins/datasource/influxdb/influx_series.ts","webpack:///./public/app/plugins/datasource/influxdb/query_part.ts","webpack:///./public/app/plugins/datasource/influxdb/influx_query.ts","webpack:///./public/app/plugins/datasource/influxdb/query_builder.ts","webpack:///./public/app/plugins/datasource/influxdb/response_parser.ts","webpack:///./public/app/plugins/datasource/influxdb/datasource.ts","webpack:///./public/app/plugins/datasource/influxdb/query_ctrl.ts","webpack:///./public/app/plugins/datasource/logging/datasource.ts","webpack:///./public/app/plugins/datasource/influxdb/module.ts","webpack:///./public/app/core/logs_model.ts","webpack:///./public/app/plugins/datasource/logging/result_transformer.ts","webpack:///./public/app/plugins/datasource/mixed/datasource.ts","webpack:///./public/app/plugins/datasource/mysql/response_parser.ts","webpack:///./public/app/plugins/datasource/logging/module.ts","webpack:///./public/app/plugins/datasource/mixed/module.ts","webpack:///./public/app/plugins/datasource/mysql/datasource.ts","webpack:///./public/app/plugins/datasource/mysql/query_ctrl.ts","webpack:///./public/app/plugins/datasource/mysql/module.ts","webpack:///./public/app/plugins/datasource/postgres/response_parser.ts","webpack:///./public/app/plugins/datasource/postgres/postgres_query.ts","webpack:///./public/app/plugins/datasource/postgres/datasource.ts","webpack:///./public/app/plugins/datasource/postgres/meta_query.ts","webpack:///./public/app/plugins/datasource/postgres/sql_part.ts","webpack:///./public/app/core/components/sql_part/sql_part.ts","webpack:///./public/app/plugins/datasource/postgres/query_ctrl.ts","webpack:///./public/app/plugins/datasource/postgres/config_ctrl.ts","webpack:///./public/app/plugins/datasource/postgres/module.ts","webpack:///./public/app/plugins/datasource/prometheus/metric_find_query.ts","webpack:///./public/app/plugins/datasource/prometheus/result_transformer.ts","webpack:///./public/app/plugins/datasource/prometheus/add_label_to_query.ts","webpack:///./public/app/plugins/datasource/prometheus/query_hints.ts","webpack:///./public/app/plugins/datasource/prometheus/datasource.ts","webpack:///./public/app/plugins/datasource/prometheus/completer.ts","webpack:///./public/app/plugins/datasource/prometheus/module.ts","webpack:///./public/app/plugins/datasource/prometheus/query_ctrl.ts","webpack:///./public/app/plugins/datasource/prometheus/config_ctrl.ts","webpack:///./public/app/plugins/datasource/mssql/response_parser.ts","webpack:///./public/app/plugins/datasource/mssql/datasource.ts","webpack:///./public/app/plugins/datasource/mssql/query_ctrl.ts","webpack:///./public/app/plugins/datasource/mssql/config_ctrl.ts","webpack:///./public/app/plugins/datasource/mssql/module.ts","webpack:///./public/app/plugins/datasource/testdata/datasource.ts","webpack:///./public/app/plugins/datasource/testdata/query_ctrl.ts","webpack:///./public/app/plugins/datasource/stackdriver/constants.ts","webpack:///./public/app/plugins/datasource/testdata/module.ts","webpack:///./public/app/plugins/datasource/stackdriver/datasource.ts","webpack:///./public/app/plugins/datasource/stackdriver/filter_segments.ts","webpack:///./public/app/plugins/datasource/stackdriver/query_aggregation_ctrl.ts","webpack:///./public/app/plugins/datasource/stackdriver/query_filter_ctrl.ts","webpack:///./public/app/plugins/datasource/stackdriver/query_ctrl.ts","webpack:///./public/app/plugins/datasource/stackdriver/config_ctrl.ts","webpack:///./public/app/plugins/datasource/stackdriver/annotations_query_ctrl.ts","webpack:///./public/app/plugins/panel/text/module.ts","webpack:///./public/app/plugins/datasource/stackdriver/module.ts","webpack:///./public/app/plugins/panel/text2/module.tsx","webpack:///./public/app/viz/Graph.tsx","webpack:///./public/app/viz/state/timeSeries.ts","webpack:///./public/app/plugins/panel/graph/jquery.flot.events.ts","webpack:///./public/app/plugins/panel/graph2/module.tsx","webpack:///./public/app/plugins/panel/graph/graph_tooltip.ts","webpack:///./public/app/plugins/panel/graph/threshold_manager.ts","webpack:///./public/app/features/annotations/editor_ctrl.ts","webpack:///./public/app/features/annotations/events_processing.ts","webpack:///./public/app/features/annotations/annotations_srv.ts","webpack:///./public/app/features/annotations/event_editor.ts","webpack:///./public/app/features/annotations/event.ts","webpack:///./public/app/features/annotations/event_manager.ts","webpack:///./public/app/features/annotations/annotation_tooltip.ts","webpack:///./public/app/plugins/panel/graph/histogram.ts","webpack:///./public/app/features/annotations/all.ts","webpack:///./public/app/plugins/panel/graph/align_yaxes.ts","webpack:///./public/app/plugins/panel/graph/graph.ts","webpack:///./public/app/plugins/panel/graph/legend.ts","webpack:///./public/app/plugins/panel/graph/series_overrides_ctrl.ts","webpack:///./public/app/plugins/panel/graph/thresholds_form.ts","webpack:///./public/app/plugins/panel/graph/template.ts","webpack:///./public/app/plugins/panel/graph/data_processor.ts","webpack:///./public/app/plugins/panel/graph/axes_editor.ts","webpack:///./public/app/plugins/panel/graph/module.ts","webpack:///./public/app/plugins/panel/dashlist/module.ts","webpack:///./public/app/plugins/panel/pluginlist/module.ts","webpack:///./public/app/plugins/panel/alertlist/module.ts","webpack:///./public/app/plugins/panel/heatmap/color_scale.ts","webpack:///./public/app/plugins/panel/heatmap/color_legend.ts","webpack:///./public/app/plugins/panel/heatmap/heatmap_data_converter.ts","webpack:///./public/app/plugins/panel/heatmap/axes_editor.ts","webpack:///./public/app/plugins/panel/heatmap/display_editor.ts","webpack:///./public/app/plugins/panel/heatmap/heatmap_tooltip.ts","webpack:///./public/app/plugins/panel/heatmap/rendering.ts","webpack:///./public/app/plugins/panel/heatmap/heatmap_ctrl.ts","webpack:///./public/app/plugins/panel/heatmap/module.ts","webpack:///./public/app/plugins/panel/table/transformers.ts","webpack:///./public/app/plugins/panel/table/editor.ts","webpack:///./public/app/plugins/panel/table/column_options.ts","webpack:///./public/app/plugins/panel/table/renderer.ts","webpack:///./public/app/plugins/panel/table/module.ts","webpack:///./public/app/features/dashboard/panellinks/link_srv.ts","webpack:///./public/app/plugins/panel/singlestat/module.ts","webpack:///./public/app/features/plugins/built_in_plugins.ts","webpack:///./public/app/plugins/panel/gettingstarted/module.ts","webpack:///./public/app/features/plugins/plugin_loader.ts","webpack:///./public/app/features/plugins/datasource_srv.ts","webpack:///./public/app/core/services/AngularLoader.ts","webpack:///./public/app/routes/GrafanaCtrl.ts","webpack:///./public/app/features/templating/editor_ctrl.ts","webpack:///./public/app/features/templating/template_srv.ts","webpack:///./public/app/core/utils/dag.ts","webpack:///./public/app/features/templating/variable_srv.ts","webpack:///./public/app/features/templating/interval_variable.ts","webpack:///./public/app/features/templating/query_variable.ts","webpack:///./public/app/features/templating/datasource_variable.ts","webpack:///./public/app/features/templating/custom_variable.ts","webpack:///./public/app/features/templating/constant_variable.ts","webpack:///./public/app/features/templating/adhoc_variable.ts","webpack:///./public/app/features/templating/TextBoxVariable.ts","webpack:///./public/app/features/templating/all.ts","webpack:///./public/app/features/plugins/plugin_edit_ctrl.ts","webpack:///./public/app/features/plugins/plugin_page_ctrl.ts","webpack:///./public/app/features/plugins/state/navModel.ts","webpack:///./public/app/features/plugins/import_list/import_list.ts","webpack:///./public/app/features/plugins/ds_edit_ctrl.ts","webpack:///./public/app/plugins/panel/unknown/module.ts","webpack:///./public/app/features/plugins/plugin_component.ts","webpack:///./public/app/features/plugins/all.ts","webpack:///./public/app/features/dashboard/dashboard_ctrl.ts","webpack:///./public/app/features/dashboard/alerting_srv.ts","webpack:///./public/app/features/dashboard/history/history_srv.ts","webpack:///./public/app/features/dashboard/history/history.ts","webpack:///./public/app/features/dashboard/dashboard_loader_srv.ts","webpack:///./public/app/features/dashboard/dashnav/dashnav.ts","webpack:///./public/app/features/dashboard/submenu/submenu.ts","webpack:///./public/app/features/dashboard/save_as_modal.ts","webpack:///./public/app/features/dashboard/save_modal.ts","webpack:///./public/app/features/dashboard/save_provisioned_modal.ts","webpack:///./public/app/features/dashboard/shareModalCtrl.ts","webpack:///./public/app/features/dashboard/share_snapshot_ctrl.ts","webpack:///./public/app/features/dashboard/dashboard_srv.ts","webpack:///./public/app/features/dashboard/view_state_srv.ts","webpack:///./public/app/features/dashboard/validation_srv.ts","webpack:///./public/app/features/dashboard/change_tracker.ts","webpack:///./public/app/features/dashboard/unsaved_changes_srv.ts","webpack:///./public/app/features/dashboard/unsaved_changes_modal.ts","webpack:///./public/app/features/dashboard/timepicker/input_date.ts","webpack:///./public/app/features/dashboard/timepicker/timepicker.ts","webpack:///./public/app/features/dashboard/upload.ts","webpack:///./public/app/features/dashboard/export/exporter.ts","webpack:///./public/app/features/dashboard/export/export_modal.ts","webpack:///./public/app/features/dashboard/export_data/export_data_modal.ts","webpack:///./public/app/features/dashboard/ad_hoc_filters.ts","webpack:///./public/app/features/dashboard/repeat_option/repeat_option.ts","webpack:///./public/app/features/dashboard/dashgrid/DashboardRow.tsx","webpack:///./public/app/core/components/ScrollBar/ScrollBar.tsx","webpack:///./public/app/features/dashboard/dashgrid/AddPanelPanel.tsx","webpack:///./public/app/features/dashboard/dashgrid/PanelHeader.tsx","webpack:///./public/app/features/dashboard/dashgrid/DataPanel.tsx","webpack:///./public/app/features/dashboard/dashgrid/PanelChrome.tsx","webpack:///./public/app/core/components/CustomScrollbar/CustomScrollbar.tsx","webpack:///./public/app/features/dashboard/dashgrid/QueriesTab.tsx","webpack:///./public/app/features/dashboard/dashgrid/VizTypePicker.tsx","webpack:///./public/app/features/dashboard/dashgrid/PanelEditor.tsx","webpack:///./public/app/features/dashboard/dashgrid/DashboardPanel.tsx","webpack:///./public/app/features/dashboard/dashgrid/DashboardGrid.tsx","webpack:///./public/app/features/dashboard/dashgrid/DashboardGridDirective.ts","webpack:///./public/app/features/dashboard/dashgrid/RowOptions.ts","webpack:///./public/app/features/dashboard/folder_picker/folder_picker.ts","webpack:///./public/app/features/dashboard/move_to_folder_modal/move_to_folder.ts","webpack:///./public/app/features/dashboard/settings/settings.ts","webpack:///./public/app/features/dashboard/panellinks/module.ts","webpack:///./public/app/features/dashboard/dashlinks/editor.ts","webpack:///./public/app/features/dashboard/dashlinks/module.ts","webpack:///./public/app/features/dashboard/permissions/DashboardPermissions.tsx","webpack:///./public/app/features/dashboard/folder_page_loader.ts","webpack:///./public/app/features/dashboard/folder_dashboards_ctrl.ts","webpack:///./public/app/features/dashboard/dashboard_import_ctrl.ts","webpack:///./public/app/features/dashboard/create_folder_ctrl.ts","webpack:///./public/app/features/dashboard/all.ts","webpack:///./public/app/features/playlist/playlists_ctrl.ts","webpack:///./public/app/features/playlist/playlist_search.ts","webpack:///./public/app/features/playlist/playlist_srv.ts","webpack:///./public/app/features/playlist/playlist_edit_ctrl.ts","webpack:///./public/app/features/playlist/playlist_routes.ts","webpack:///./public/app/features/playlist/all.ts","webpack:///./public/app/features/panel/panel_header.ts","webpack:///./public/app/features/panel/panel_directive.ts","webpack:///./public/app/features/panel/solo_panel_ctrl.ts","webpack:///./public/app/features/panel/panel_editor_tab.ts","webpack:///./public/app/features/panel/query_editor_row.ts","webpack:///./public/app/features/panel/query_troubleshooter.ts","webpack:///./public/app/features/panel/all.ts","webpack:///./public/app/features/org/profile_ctrl.ts","webpack:///./public/app/features/org/user_invite_ctrl.ts","webpack:///./public/app/features/org/select_org_ctrl.ts","webpack:///./public/app/features/org/change_password_ctrl.ts","webpack:///./public/app/features/org/new_org_ctrl.ts","webpack:///./public/app/features/org/create_team_ctrl.ts","webpack:///./public/app/features/org/org_details_ctrl.ts","webpack:///./public/app/features/org/prefs_control.ts","webpack:///./public/app/features/org/all.ts","webpack:///./public/app/features/admin/AdminListUsersCtrl.ts","webpack:///./public/app/features/admin/AdminEditUserCtrl.ts","webpack:///./public/app/features/admin/AdminListOrgsCtrl.ts","webpack:///./public/app/features/admin/StyleGuideCtrl.ts","webpack:///./public/app/features/admin/AdminEditOrgCtrl.ts","webpack:///./public/app/features/alerting/NotificationsEditCtrl.ts","webpack:///./public/app/features/admin/index.ts","webpack:///./public/app/features/alerting/NotificationsListCtrl.ts","webpack:///./public/app/features/manage-dashboards/SnapshotListCtrl.ts","webpack:///./public/app/features/manage-dashboards/DashboardListCtrl.ts","webpack:///./public/app/features/manage-dashboards/index.ts","webpack:///./public/app/features/all.ts","webpack:///./public/app/app.ts","webpack:///./public/app/core/selectors/location.ts","webpack:///./public/app/index.ts","webpack:///./public/app/features/alerting/state/actions.ts","webpack:///./public/app/core/utils/url.ts","webpack:///./public/app/features/folders/state/navModel.ts","webpack:///./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx","webpack:///./public/app/core/components/TagFilter/TagBadge.tsx","webpack:///./public/app/core/utils/sort_by_keys.ts","webpack:///./public/app/features/dashboard/dashboard_migration.ts","webpack:///./public/app/features/dashboard/dashboard_model.ts","webpack:///./public/vendor/flot/jquery.flot.js","webpack:///./public/app/core/components/Picker/DescriptionOption.tsx","webpack:///./public/app/core/components/Picker/DescriptionPicker.tsx","webpack:///./public/app/core/components/Picker/PickerOption.tsx","webpack:///./public/app/core/actions/navModel.ts","webpack:///./public/app/core/utils/explore.ts","webpack:///./public/app/core/utils/tags.ts","webpack:///./public/app/features/teams/state/navModel.ts","webpack:///./public/app/core/components/Picker/UserPicker.tsx","webpack:///./public/app/core/components/DeleteButton/DeleteButton.tsx","webpack:///./public/app/core/components/OrgActionBar/OrgActionBar.tsx","webpack:///./public/app/core/components/PermissionList/PermissionsInfo.tsx","webpack:///./public/app/core/components/PermissionList/PermissionListItem.tsx","webpack:///./public/app/core/components/PermissionList/DisabledPermissionListItem.tsx","webpack:///./public/app/core/components/PermissionList/PermissionList.tsx","webpack:///./public/app/core/components/Picker/TeamPicker.tsx","webpack:///./public/app/core/components/PermissionList/AddPermission.tsx","webpack:///./public/app/features/plugins/state/selectors.ts","webpack:///./public/vendor/flot/jquery.flot.time.js","webpack:///./public/app/core/components/PageHeader/PageHeader.tsx","webpack:///./public/app/core/constants.ts","webpack:///./public/app/core/utils/datemath.ts","webpack:///./public/app/core/selectors/navModel.ts","webpack:///./public/app/features/alerting/state/selectors.ts","webpack:///./public/app/features/teams/state/actions.ts","webpack:///./public/app/core/store.ts","webpack:///./public/app/types/acl.ts","webpack:///./public/app/core/utils/ticks.ts","webpack:///./public/app/core/core_module.ts","webpack:///./public/app/core/utils/colors.ts","webpack:///./public/app/core/actions/location.ts","webpack:///./public/app/core/actions/index.ts","webpack:///./public/app/features/datasources/state/navModel.ts","webpack:///./public/app/features/datasources/state/actions.ts","webpack:///./public/app/core/services/context_srv.ts","webpack:///./public/vendor/flot/jquery.flot.selection.js","webpack:///./public/vendor/flot/jquery.flot.stack.js","webpack:///./public/app/types/series.ts","webpack:///./public/vendor/flot/jquery.flot.stackpercent.js","webpack:///./public/app/types/index.ts","webpack:///./public/vendor/flot/jquery.flot.fillbelow.js","webpack:///./public/vendor/flot/jquery.flot.dashes.js","webpack:///./public/vendor/flot/jquery.flot.crosshair.js","webpack:///./public/vendor/flot/jquery.flot.gauge.js","webpack:///./public/app/core/time_series2.ts","webpack:///./public/app/features/alerting/AlertRuleList.tsx","webpack:///./public/app/features/admin/ServerStats.tsx","webpack:///./public/app/features/admin/state/apis.ts","webpack:///./public/app/features/alerting/AlertRuleItem.tsx","webpack:///./public/app/features/folders/state/actions.ts","webpack:///./public/app/features/teams/TeamPages.tsx","webpack:///./public/app/features/teams/TeamMembers.tsx","webpack:///./public/app/features/teams/TeamGroupSync.tsx","webpack:///./public/app/features/teams/TeamList.tsx","webpack:///./public/app/features/api-keys/ApiKeysPage.tsx","webpack:///./public/app/features/api-keys/state/selectors.ts","webpack:///./public/app/features/api-keys/ApiKeysAddedModal.tsx","webpack:///./public/app/features/plugins/PluginListPage.tsx","webpack:///./public/app/features/folders/FolderSettingsPage.tsx","webpack:///./public/app/features/folders/FolderPermissions.tsx","webpack:///./public/app/features/datasources/DataSourcesListPage.tsx","webpack:///./public/app/features/datasources/NewDataSourcePage.tsx","webpack:///./public/app/features/users/UsersListPage.tsx","webpack:///./public/app/features/users/UsersActionBar.tsx","webpack:///./public/app/features/users/UsersTable.tsx","webpack:///./public/app/features/users/InviteesTable.tsx","webpack:///./public/app/features/datasources/DataSourceDashboards.tsx","webpack:///./public/app/features/datasources/DashboardsTable.tsx","webpack:///./public/app/features/datasources/DataSourcesListItem.tsx","webpack:///./public/app/features/datasources/DataSourcesList.tsx","webpack:///./public/app/features/plugins/PluginListItem.tsx","webpack:///./public/app/features/plugins/PluginList.tsx","webpack:///./public/app/core/components/Forms/Forms.tsx","webpack:///./public/app/features/teams/TeamSettings.tsx","webpack:///./public/app/features/plugins/state/actions.ts","webpack:///./public/app/features/teams/state/selectors.ts","webpack:///./public/app/features/users/state/actions.ts","webpack:///./public/app/core/table_model.ts","webpack:///./public/app/core/components/LayoutSelector/LayoutSelector.tsx","webpack:///./public/app/features/dashboard/panel_model.ts","webpack:///./public/app/core/config.ts","webpack:///./public/vendor/bootstrap/bootstrap.js","webpack:///./public/vendor/angular-ui/ui-bootstrap-tpls.js","webpack:///./public/vendor/angular-other/angular-strap.js","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./public/vendor/tagsinput/bootstrap-tagsinput.js","webpack:///./public/app sync \\.html$","webpack:///./public/app/core/partials.ts","webpack:///./public/app/core/components/help/help.html","webpack:///./public/app/core/components/search/search_results.html","webpack:///./public/app/features/admin/partials/admin_home.html","webpack:///./public/app/features/admin/partials/edit_org.html","webpack:///./public/app/features/admin/partials/edit_user.html","webpack:///./public/app/features/admin/partials/new_user.html","webpack:///./public/app/features/admin/partials/orgs.html","webpack:///./public/app/features/admin/partials/settings.html","webpack:///./public/app/features/admin/partials/stats.html","webpack:///./public/app/features/admin/partials/styleguide.html","webpack:///./public/app/features/admin/partials/users.html","webpack:///./public/app/features/alerting/partials/alert_howto.html","webpack:///./public/app/features/alerting/partials/alert_tab.html","webpack:///./public/app/features/alerting/partials/notification_edit.html","webpack:///./public/app/features/alerting/partials/notifications_list.html","webpack:///./public/app/features/annotations/partials/editor.html","webpack:///./public/app/features/annotations/partials/event_editor.html","webpack:///./public/app/features/dashboard/dashlinks/editor.html","webpack:///./public/app/features/dashboard/dashnav/dashnav.html","webpack:///./public/app/features/dashboard/export/export_modal.html","webpack:///./public/app/features/dashboard/export_data/export_data_modal.html","webpack:///./public/app/features/dashboard/folder_picker/folder_picker.html","webpack:///./public/app/features/dashboard/history/history.html","webpack:///./public/app/features/dashboard/move_to_folder_modal/move_to_folder.html","webpack:///./public/app/features/dashboard/panellinks/module.html","webpack:///./public/app/features/dashboard/partials/create_folder.html","webpack:///./public/app/features/dashboard/partials/dashboard_import.html","webpack:///./public/app/features/dashboard/partials/folder_dashboards.html","webpack:///./public/app/features/dashboard/partials/folder_permissions.html","webpack:///./public/app/features/dashboard/partials/folder_settings.html","webpack:///./public/app/features/dashboard/partials/inspector.html","webpack:///./public/app/features/dashboard/partials/row_options.html","webpack:///./public/app/features/dashboard/partials/shareModal.html","webpack:///./public/app/features/dashboard/settings/settings.html","webpack:///./public/app/features/dashboard/submenu/submenu.html","webpack:///./public/app/features/dashboard/timepicker/settings.html","webpack:///./public/app/features/dashboard/timepicker/timepicker.html","webpack:///./public/app/features/manage-dashboards/partials/dashboard_list.html","webpack:///./public/app/features/manage-dashboards/partials/snapshot_list.html","webpack:///./public/app/features/org/partials/change_password.html","webpack:///./public/app/features/org/partials/create_team.html","webpack:///./public/app/features/org/partials/invite.html","webpack:///./public/app/features/org/partials/newOrg.html","webpack:///./public/app/features/org/partials/orgDetails.html","webpack:///./public/app/features/org/partials/profile.html","webpack:///./public/app/features/org/partials/select_org.html","webpack:///./public/app/features/panel/partials/metrics_tab.html","webpack:///./public/app/features/panel/partials/panelTime.html","webpack:///./public/app/features/panel/partials/query_editor_row.html","webpack:///./public/app/features/panel/partials/soloPanel.html","webpack:///./public/app/core/components/Animations/SlideDown.tsx","webpack:///./public/app/features/playlist/partials/playlist.html","webpack:///./public/app/features/playlist/partials/playlist_search.html","webpack:///./public/app/features/playlist/partials/playlists.html","webpack:///./public/app/features/plugins/import_list/import_list.html","webpack:///./public/app/features/plugins/partials/ds_edit.html","webpack:///./public/app/features/plugins/partials/ds_http_settings.html","webpack:///./public/app/features/plugins/partials/plugin_edit.html","webpack:///./public/app/features/plugins/partials/plugin_page.html","webpack:///./public/app/features/plugins/partials/update_instructions.html","webpack:///./public/app/features/templating/partials/editor.html","webpack:///./public/app/core/components/PageLoader/PageLoader.tsx","webpack:///./public/app/partials/confirm_modal.html","webpack:///./public/app/partials/dashboard.html","webpack:///./public/app/partials/edit_json.html","webpack:///./public/app/partials/error.html","webpack:///./public/app/partials/login.html","webpack:///./public/app/partials/modal.html","webpack:///./public/app/partials/panelgeneral.html","webpack:///./public/app/partials/reset_password.html","webpack:///./public/app/partials/signup_invited.html","webpack:///./public/app/partials/signup_step2.html","webpack:///./public/app/partials/valueSelectDropdown.html","webpack:///./public/app/plugins/datasource/cloudwatch/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/cloudwatch/partials/config.html","webpack:///./public/app/plugins/datasource/cloudwatch/partials/query.editor.html","webpack:///./public/app/plugins/datasource/cloudwatch/partials/query.parameter.html","webpack:///./public/app/plugins/datasource/elasticsearch/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/elasticsearch/partials/bucket_agg.html","webpack:///./public/app/plugins/datasource/elasticsearch/partials/config.html","webpack:///./public/app/plugins/datasource/elasticsearch/partials/metric_agg.html","webpack:///./public/app/plugins/datasource/elasticsearch/partials/query.editor.html","webpack:///./public/app/plugins/datasource/grafana-live/partials/query.editor.html","webpack:///./public/app/plugins/datasource/grafana/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/grafana/partials/query.editor.html","webpack:///./public/app/plugins/datasource/graphite/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/graphite/partials/config.html","webpack:///./public/app/plugins/datasource/graphite/partials/query.editor.html","webpack:///./public/app/plugins/datasource/influxdb/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/influxdb/partials/config.html","webpack:///./public/app/plugins/datasource/influxdb/partials/query.editor.html","webpack:///./public/app/plugins/datasource/logging/partials/config.html","webpack:///./public/app/features/dashboard/state/actions.ts","webpack:///./public/app/plugins/datasource/mssql/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/mssql/partials/config.html","webpack:///./public/app/plugins/datasource/mssql/partials/query.editor.html","webpack:///./public/app/plugins/datasource/mysql/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/mysql/partials/config.html","webpack:///./public/app/plugins/datasource/mysql/partials/query.editor.html","webpack:///./public/app/plugins/datasource/opentsdb/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/opentsdb/partials/config.html","webpack:///./public/app/plugins/datasource/opentsdb/partials/query.editor.html","webpack:///./public/app/plugins/datasource/postgres/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/postgres/partials/config.html","webpack:///./public/app/plugins/datasource/postgres/partials/query.editor.html","webpack:///./public/app/plugins/datasource/prometheus/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/prometheus/partials/config.html","webpack:///./public/app/plugins/datasource/prometheus/partials/query.editor.html","webpack:///./public/app/plugins/datasource/stackdriver/partials/annotations.editor.html","webpack:///./public/app/plugins/datasource/stackdriver/partials/config.html","webpack:///./public/app/plugins/datasource/stackdriver/partials/query.aggregation.html","webpack:///./public/app/plugins/datasource/stackdriver/partials/query.editor.html","webpack:///./public/app/plugins/datasource/stackdriver/partials/query.filter.html","webpack:///./public/app/plugins/datasource/testdata/partials/query.editor.html","webpack:///./public/app/plugins/panel/alertlist/editor.html","webpack:///./public/app/plugins/panel/alertlist/module.html","webpack:///./public/app/plugins/panel/dashlist/editor.html","webpack:///./public/app/plugins/panel/dashlist/module.html","webpack:///./public/app/plugins/panel/gettingstarted/editor.html","webpack:///./public/app/plugins/panel/gettingstarted/module.html","webpack:///./public/app/plugins/panel/graph/axes_editor.html","webpack:///./public/app/plugins/panel/graph/tab_display.html","webpack:///./public/app/plugins/panel/graph/tab_legend.html","webpack:///./public/app/plugins/panel/heatmap/module.html","webpack:///./public/app/plugins/panel/heatmap/partials/axes_editor.html","webpack:///./public/app/plugins/panel/heatmap/partials/display_editor.html","webpack:///./public/app/plugins/panel/pluginlist/editor.html","webpack:///./public/app/plugins/panel/pluginlist/module.html","webpack:///./public/app/plugins/panel/singlestat/editor.html","webpack:///./public/app/plugins/panel/singlestat/mappings.html","webpack:///./public/app/plugins/panel/singlestat/module.html","webpack:///./public/app/plugins/panel/table/column_options.html","webpack:///./public/app/plugins/panel/table/editor.html","webpack:///./public/app/plugins/panel/table/module.html","webpack:///./public/app/plugins/panel/text/editor.html","webpack:///./public/app/plugins/panel/text/module.html","webpack:///./public/app/plugins/panel/unknown/module.html","webpack:///./public/app/core/components/code_editor/theme-grafana-dark.js","webpack:///./public/app/features/datasources/state/selectors.ts","webpack:///./public/app/core/utils/outline.ts","webpack:///./public/vendor/spectrum.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","head","document","getElementsByTagName","script","createElement","charset","timeout","nc","setAttribute","src","p","4","jsonpScriptSrc","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","error","Error","request","undefined","setTimeout","appendChild","all","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","__webpack_exports__","Emitter","eventemitter3__WEBPACK_IMPORTED_MODULE_0__","this","emitter","emit","on","handler","scope","_this","unbind_1","$on","off","removeAllListeners","evt","props","isOpen","selectProps","menuIsOpen","react__WEBPACK_IMPORTED_MODULE_1___default","a","react_select__WEBPACK_IMPORTED_MODULE_2__","IndicatorsContainer","tslib__WEBPACK_IMPORTED_MODULE_0__","className","children","Option","clearIndicator","container","control","dropdownIndicator","group","groupHeading","indicatorsContainer","indicatorSeparator","input","loadingIndicator","loadingMessage","menu","menuList","multiValue","multiValueLabel","multiValueRemove","noOptionsMessage","option","placeholder","singleValue","valueContainer","getRelativeTimesList","describeTextRange","describeTimeRange","lodash__WEBPACK_IMPORTED_MODULE_0__","lodash__WEBPACK_IMPORTED_MODULE_0___default","moment__WEBPACK_IMPORTED_MODULE_1__","moment__WEBPACK_IMPORTED_MODULE_1___default","_datemath__WEBPACK_IMPORTED_MODULE_2__","spans","display","h","w","M","y","rangeOptions","from","to","section","absoluteFormat","rangeIndex","timepickerSettings","currentDisplay","groupBy","active","formatDate","date","format","expr","isLast","indexOf","opt","parts","exec","unit","amount","parseInt","span","invalid","range","toString","isMoment","toMoment","fromNow","each","frame","appEvents","Tooltip_Tooltip","_super","Tooltip","showTooltip","hideTooltip","tslib_es6","tooltipSetState","prevState","show","render","react_default","react_popper","onMouseOver","onMouseOut","Component","WrappedComponent","class_1","setState","state","placement","componentWillReceiveProps","nextProps","renderContent","content","ReactComponent","_a","ActionTypes","apiKeysLoaded","apiKeys","LoadApiKeys","payload","addApiKey","apiKey","openModal","dispatch","app_core_services_backend_srv__WEBPACK_IMPORTED_MODULE_1__","post","sent","setSearchQuery","loadApiKeys","response","deleteApiKey","id","delete","then","searchQuery","SetApiKeysSearchQuery","kbn","valueFormats","regexEscape","replace","round_interval","interval","secondsToHms","seconds","numyears","Math","floor","numdays","numhours","numminutes","numseconds","nummilliseconds","secondsToHhmmss","strings","join","to_percent","nr","outof","addslashes","str","interval_regex","intervals_in_seconds","ms","calculateInterval","resolution","lowLimitInterval","intervalMs","lowLimitMs","interval_to_ms","valueOf","describe_interval","matches","match","has","sec","count","info","interval_to_seconds","query_color_dot","color","diameter","slugifyForUrl","toLowerCase","stringToJsRegex","RegExp","toFixed","decimals","factor","pow","max","formatted","String","round","decimalPos","precision","substr","toFixedScaled","scaledDecimals","additionalDecimals","ext","roundValue","num","parseFloat","formatBuilders","fixedUnit","size","scaledUnits","extArray","steps","limit","abs","decimalSIPrefix","offset","prefixes","units","map","binarySIPrefix","currency","symbol","scaler","scaled","simpleCountUnit","none","short","dB","percent","percentunit","hex","toUpperCase","hex0x","hexString","substring","sci","toExponential","locale","toLocaleString","maximumFractionDigits","currencyUSD","currencyGBP","currencyEUR","currencyJPY","currencyRUB","currencyUAH","currencyBRL","currencyDKK","currencyISK","currencyNOK","currencySEK","currencyCZK","currencyCHF","currencyPLN","currencyBTC","bits","bytes","kbytes","mbytes","gbytes","decbits","decbytes","deckbytes","decmbytes","decgbytes","pps","bps","Bps","KBs","Kbits","MBs","Mbits","GBs","Gbits","Hs","KHs","MHs","GHs","THs","PHs","EHs","ops","reqps","rps","wps","iops","opm","rpm","wpm","watt","kwatt","mwatt","kwattm","Wm2","voltamp","kvoltamp","voltampreact","kvoltampreact","watth","kwatth","joule","ev","amp","kamp","mamp","volt","kvolt","mvolt","dBm","ohm","lumens","celsius","farenheit","kelvin","humidity","pressurebar","pressurembar","pressurekbar","pressurehpa","pressurekpa","pressurehg","pressurepsi","forceNm","forcekNm","forceN","forcekN","lengthm","lengthmm","lengthkm","lengthmi","lengthft","areaM2","areaF2","areaMI2","massmg","massg","masskg","masst","velocityms","velocitykmh","velocitymph","velocityknot","accMS2","accFS2","accG","litre","mlitre","m3","Nm3","dm3","gallons","flowgpm","flowcms","flowcfs","flowcfm","litreh","flowlpm","flowmlpm","degree","radian","grad","radbq","radci","radgy","radrad","radsv","radrem","radexpckg","radr","radsvh","ppm","conppb","conngm3","conngNm3","conμgm3","conμgNm3","conmgm3","conmgNm3","congm3","congNm3","hertz","toDuration","timeScale","long","find","decrementDecimals","toClock","utc","format_1","format_2","hours","duration","asHours","dtdurationms","dtdurations","dthms","timeticks","clockms","clocks","dateTimeAsIso","epoch","isUtc","time","isSame","dateTimeAsUS","dateTimeFromNow","getUnitFormats","text","submenu","ace","define","require","oop","TextHighlightRules","PrometheusHighlightRules","keywordMapper","createKeywordMapper","support.function","keyword","constant.language","$rules","start","token","regex","next","start-label-matcher","start-label-list-matcher","normalizeRules","inherits","lang","keyWordsCompletions","word","caption","meta","score","Number","MAX_VALUE","functionsCompletions","def","docText","item","docHTML","escapeHTML","convertMarkDownTags","len","lines","space_index","line_start","next_line_end","line","wrapText","convertToHTML","PrometheusCompletions","getCompletions","session","pos","prefix","callback","getTokenAt","row","column","concat","CstyleBehaviour","Behaviour","TokenIterator","PrometheusBehaviour","inherit","add","action","editor","selection","getSelectionRange","selected","doc","getTextRange","getWrapBehavioursEnabled","opening","closing","rowDiff","end","getWrapped","isSaneInsertion","cursor","getCursorPosition","getLine","$findOpeningBracket","isAutoInsertedClosing","isMultiLine","TextMode","Mode","HighlightRules","$behaviour","$completer","completer","$id","snippets","tabTrigger","$","REDRAW_ATTEMPTS","REDRAW_SHRINK","options","series","pie","radius","innerRadius","startAngle","tilt","shadow","left","top","alpha","stroke","width","label","formatter","background","opacity","threshold","combine","highlight","plot","plugins","init","canvas","maxRadius","centerLeft","centerTop","processed","ctx","highlights","processDatapoints","datapoints","getCanvas","parent","getOptions","setData","total","combined","numCombined","newdata","isArray","isNaN","isFinite","angle","PI","getData","draw","newCtx","canvasWidth","getPlaceholder","canvasHeight","height","legendWidth","filter","min","legend","position","slices","attempts","clear","drawShadow","drawPie","prepend","setSeries","insertLegend","clearRect","remove","shadowLeft","shadowTop","save","translate","globalAlpha","fillStyle","scale","beginPath","arc","fill","restore","currentAngle","drawSlice","lineWidth","drawDonutHole","drawLabel","index","lf","labelFormatter","plf","halfAngle","x","cos","sin","html","append","labelTop","labelLeft","css","insertBefore","drawLabels","strokeStyle","lineJoin","moveTo","closePath","layer","globalCompositeOperation","isPointInPoly","poly","pt","onMouseMove","triggerClickHoverEvent","onClick","eventname","mouseX","mouseY","isPointInPath","datapoint","dataIndex","seriesIndex","findNearbySlice","pageX","pageY","grid","autoHighlight","auto","unhighlight","indexOfHighlight","triggerRedrawOverlay","trigger","hooks","processOptions","bindEvents","eventHolder","hoverable","unbind","mousemove","clickable","click","drawOverlay","octx","drawHighlight","version","jQuery","webpackEmptyContext","req","code","keys","setBackendSrv","getBackendSrv","singletonInstance","app_core_core_module__WEBPACK_IMPORTED_MODULE_1__","app_core_app_events__WEBPACK_IMPORTED_MODULE_2__","app_features_dashboard_dashboard_model__WEBPACK_IMPORTED_MODULE_3__","BackendSrv","$http","alertSrv","$q","$timeout","contextSrv","inFlightRequests","HTTP_REQUEST_CANCELLED","$inject","url","params","method","patch","put","withNoBackendCache","noBackendCache","finally","requestErrorHandler","isHandled","message","isString","status","set","severity","description","retry","requestIsLocal","firstAttempt","user","orgId","headers","results","showSuccessAlert","isSignedIn","loginPing","addCanceler","requestId","canceler","resolveCancelerIfExists","cancelers","isUndefined","datasourceRequest","defer","Authorization","silent","catch","cancelled","statusText","search","query","getDashboardBySlug","slug","getDashboardByUid","uid","getFolderByUid","saveDashboard","dash","dashboard","folderId","overwrite","createFolder","deleteFolder","deleteDashboard","deleteFoldersAndDashboards","folderUids","dashboardUids","tasks","_i","folderUids_1","folderUid","createTask","dashboardUids_1","dashboardUid","executeInOrder","moveDashboards","toFolder","dashboardUids_2","moveDashboard","totalCount","successCount","succeeded","alreadyInFolderCount","alreadyInFolder","deferred","fullDash","model","clone","getSaveModelClone","fn","ignoreRejections","arguments","args","res","Array","initialValue","reduce","when","instance","service","angular","angular_default","react","react_dom","moment","moment_default","core_module","dashClass","$scope","elem","ctrl","events","panel","log","fullscreen","addClass","removeClass","toggleClass","$watch","newValue","lodash_default","$compile","menuItems","dropdownTypeaheadOnSelect","attrs","$input","jquery_js_exposed_default","linkText","subItem","$button","typeaheadValues","memo","subIndex","menuItemSelected","menuItem","$item","$subItem","attr","typeahead","source","minLength","items","updater","submenuItem","$apply","hide","val","blur","focus","contents","keyup","$sce","templateSrv","segment","selectMode","cancelBlur","linkMode","debounceLookup","debounce","altSegments","trustAsHtml","highlightVariablesAsHtml","fake","expandable","custom","onChange","switchToLink","fromClick","updateVariableValue","inputBlur","$query","alt","escape","unshift","unescape","matcher","lookup","$element","proxy","process","leading","keyCode","uiSegmentSrv","cachedOptions","valueToSegment","cssClass","newSegment","getOptionsInternal","onSegmentChange","$$postDigest","directive","dropdownTypeahead","dropdownTypeahead2","metricSegment","metricSegmentModel","clipboard","link","_t","icon","replaceWith","element","$eval","compile","ngchange","change","tip","template","showIf","$interpolate","gfDropdown","$parse","restrict","iElement","iAttrs","buildTemplate","ul","divider","href","li","insertAfter","misc_tip","getText","clipboard_default","app_events","destroy","onchange","inputValue","editorOptBool","editorCheckbox","priority","elm","ngModelCtrl","$parsers","viewValue","$validators","integer","modelValue","$isEmpty","rangeutil","getTagColorsFromName","borderColor","tagColorFromName","isFunction","$parent","select","tagsinput","typeaheadSource","widthClass","itemValue","getItemProperty","itemvalue","itemText","itemtext","tagclass","onTagsUpdated","tagElement","setColor","idx","oldVariableText","variable","current","highlightIndex","selectedValues","tags","tag","tagObj","dropdownVisible","updateLinkText","values","currentTexts","selectedAndNotInTag","clearSelections","selectionsChanged","ValueSelectDropdownCtrl","selectTag","getValuesForTag","keyDown","moveHighlight","commitChanges","selectValue","direction","commitChange","excludeOthers","multi","setAllExceptCurrentTo","other","ctrlKey","metaKey","shiftKey","selectedTags","onUpdated","queryChanged","$window","$rootScope","templateUrl","controller","controllerAs","bindToController","linkEl","inputEl","bodyOnClick","vm","bodyEl","rebuildOnChange","$animate","terminal","transclude","block","childScope","previousElements","cleanUp","$destroy","nodes","endNode","node","nextSibling","blockNodes","getBlockNodes","leave","oldValue","showNull","newScope","createComment","enter","value_select_dropdown_ValueSelectDropdownCtrl","valueSelectDropdown","stopPropagation","domEl","setSelectionRange","DeltaCtrl","observer","MutationObserver","mutations","appEvent","observe","attributes","attributeFilter","characterData","childList","subtree","$onDestroy","disconnect","diff_view_DeltaCtrl","LinkJSONCtrl","$anchorScroll","goToLine","switchView","$win","place_tt","defaults","opts","extend","$tooltip","injector","invoke","tmpScope","$new","scopeData","$digest","outerWidth","outerHeight","isObject","getObjectName","constructor","getType","getValuePreview","escapeString","requestAnimationFrame","cb","theme","JsonExplorer","json","open","config","_defaultConfig","skipChildren","_isOpen","DATE_STRING_REGEX","test","JSON_DATE_REGEX","PARTIAL_DATE_REGEX","isEmptyObject","configurable","toggleOpen","appendChildren","animateOpen","removeChildren","animateClose","classList","toggle","helpers_cssClass","openAtDepth","depth","isNumberArray","isNumber","renderArray","arrayWrapperSpan","forEach","skipRoot","togglerLink","togglerIcon","hasKey","objectWrapperSpan","constructorName","isUrl","isDate","createTextNode","valuePreview","isEmpty","removeChild","addEventListener","animated","querySelector","index_1","addAChild_1","childrenElement","DEFAULT_SNIPPETS","editorTemplate","code_editor_link","DEFAULT_MODE","maxLines","DEFAULT_MAX_LINES","showGutter","tabSize","DEFAULT_TAB_SIZE","behavioursEnabled","DEFAULT_BEHAVIOURS","snippetsEnabled","brace_default","edit","aceElem","codeEditor","getSession","highlightActiveLine","showPrintMargin","autoScrollEditorIntoView","setOptions","editorOptions","$blockScrolling","Infinity","renderer","setScrollMargin","setPadding","DEFAULT_THEME_DARK","core_config","bootData","lightTheme","DEFAULT_THEME_LIGHT","setTheme","setThemeMode","langMode","setEditorContent","clearSelection","codeEditorFocus","textarea","getValue","editorValue","commands","addCommand","bindKey","win","mac","datasource","getCompleter","js_drop","drop_default","tinycolor","tinycolor_default","ColorPalette_ColorPalette","ColorPalette","paletteColors","colors","onColorSelect","colorPaletteItems","paletteColor","style","SpectrumPicker_SpectrumPicker","SpectrumPicker","setComponentElem","onSpectrumMove","isMoving","componentDidMount","spectrumOptions","assignIn","flat","showAlpha","showButtons","appendTo","spectrum","componentWillUpdate","componentDidUpdate","componentWillUnmount","ref","DEFAULT_COLOR","ColorPickerPopover","tab","colorString","setPickerNavElem","pickerNavElem","newColor","isValid","sampleColorSelected","spectrumColorSelected","toRgbString","rgbColor","onColorStringChange","newColorString","hash","paletteTab","spectrumTab","currentTab","data-toggle","onBlur","onColorStringBlur","react2AngularDirective","component","reactDirective","ColorPicker","openColorPicker","closeColorPicker","setPickerElem","pickerElem","dropContent","ColorPickerPopover_ColorPickerPopover","dropContentElem","react_dom_default","drop","classes","openOn","hoverCloseDelay","tetherOptions","constraints","attachment","colorPickerDrop","tether","watchDepth","wrapApply","SeriesColorPicker","onColorChange","onToggleAxis","renderAxisSelection","leftButtonClass","yaxis","rightButtonClass","ngModel","$setViewValue","impression_srv","ImpressionSrv","addDashboardImpression","dashboardId","impressionsKey","impressionKey","impressions","core_store","exists","JSON","parse","imp","pop","stringify","getDashboardOpened","el","search_srv_SearchSrv","SearchSrv","backendSrv","recentIsOpen","getBool","starredIsOpen","getRecentDashboards","sections","queryForRecentDashboards","title","removable","expanded","toggleRecent","dashIds","take","dashboardIds","orderId","hit","isStarred","toggleStarred","getStarred","context_srv","starred","hasFilters","folderIds","handleSearchResult","sortBy","results_1","toggleFolder","results_2","folderTitle","folderUrl","getDashboardTags","getReactComponent","$injector","reactComponent","split","namePart","applyFunctions","obj","propsConfig","prev","wrapped","phase","$root","$$phase","wrappedInApply","applied","watchProps","watchExpressions","listener","supportsWatchCollection","$watchCollection","supportsWatchGroup","$watchGroup","watchGroupExpressions","actualExpr","prop","getPropExpression","exprWatchDepth","defaultWatch","getPropWatchDepth","renderComponent","$evalAsync","renderMyComponent","onScopeDestroy","unmountComponent","unmountComponentAtNode","reactComponentName","scopeProps","propName","getPropName","findAttribute","getPropConfig","injectableProps","propExpressions","propTypes","conf","SearchCtrl","$location","searchSrv","openSearch","closeSearch","getTags","onTagSelect","isEditor","hasEditPermissionInFolders","ignoreClose","giveSearchFocus","selectedIndex","currentSearchId","isLoading","moveSelection","currentItem","getFlattenedResultForNavigation","dashboardIndex","selectedDash","folderIndex","path","selectedFolder","onFilterboxClick","preventClose","flattenedResult","newIndex","selectedItem","hideHeader","searchDashboards","localSearchId","queryHasNoFilters","filterByTag","removeTag","without","preventDefault","newTags","showStarred","showImport","folderExpanding","flatMap","wide","dropOptions","hoverOpenDelay","pin","$applyAsync","showSearch","navItemClicked","navItem","clickHandler","$formatters","layout_selector_template","LiveSrv","observers","getWebSocketUrl","location","protocol","host","appSubUrl","getConnection","initPromise","conn","readyState","WebSocket","onclose","reconnect","onmessage","handleMessage","onopen","stream","removeObserver","send","addObserver","subscribe","streamName","Observable","LayoutSelectorCtrl","listView","gridView","onAppEvent","newLayout","layout_selector_LayoutSelectorCtrl","layoutMode","SwitchCtrl","internalOnChange","checked","labelClass","tooltip","switchClass","switch_template","$onInit","DashboardSelectorCtrl","query_part_editor_template","part","paramIndex","$link","optional","updateParam","handleEvent","$event","inputKeyPress","which","inputKeyDown","addElementsAndCompile","partDef","param","$paramsContainer","paramValue","$paramLink","paramTemplate","partial","keypress","clickFuncParam","dynamicLookup","dynamicOptions","op","addTypeahead","showActionsMenu","partActions","triggerPartAction","empty","queryPartEditorDirective","sql_part_editor_template","separator","sqlPartEditorDirective","FormDropdownCtrl","inputElement","first","linkElement","modelChanged","labelMode","cssClasses","typeaheadUpdater","typeaheadMatcher","keydown","startOpen","isPromiseLike","updateDisplay","lookupText","optionTexts","allowCustom","updateValue","optionCache","$option","form_dropdown_template","form_dropdown_FormDropdownCtrl","InspectCtrl","$sanitize","inspector","toJson","request_parameters","getParametersFromQueryString","queryString","parameters","keyValue","inspect_ctrl_InspectCtrl","JsonEditorCtrl","canUpdate","updateHandler","canCopy","enableCopy","newObject","fromJson","getContentForClipboard","json_editor_ctrl_JsonEditorCtrl","LoginCtrl","email","password","command","loggingIn","sidemenu","oauth","oauthEnabled","ldapEnabled","authProxyEnabled","disableLoginForm","disableUserSignUp","loginHint","loginModeChanged","loginError","submit","loginMode","login","signUp","changePasswordView","getElementById","oldPassword","newPassword","confirmNew","toGrafana","skip","loginForm","$valid","formModel","changeView","redirect","redirectUrl","login_ctrl_LoginCtrl","InvitedCtrl","$routeParams","navModel","subTitle","breadcrumbs","invite","username","inviteCode","greeting","invitedBy","inviteForm","invited_ctrl_InvitedCtrl","SignUpCtrl","orgName","verifyEmailEnabled","main","autoAssignOrg","signUpForm","rsp","signup_ctrl_SignUpCtrl","ResetPasswordCtrl","sendResetEmail","sendResetForm","submitReset","resetForm","confirmPassword","navModelSrv","getNotFoundNav","error_ctrl_ErrorCtrl","AlertSrv","list","alert","getIconForSeverity","newAlertJson","newAlert","clearAll","alert_srv_AlertSrv","UtilSrv","$modal","showModal","showConfirmModal","modalScope","dismiss","modal","modalClass","templateHtml","persist","keyboard","backdrop","modalEl","onConfirm","updateConfirmText","confirmTextValid","confirmText","text2","onAltAction","altActionText","yesText","noText","util_srv_UtilSrv","timer_Timer","Timer","timers","register","cancel","cancelAll","gaInit","ajax","dataType","cache","ga","q","Date","googleAnalyticsId","page","track","googleAnalyticsSrv","popover_srv_popoverSrv","openDrop","close","contentElement","innerHTML","classNames","onClose","MetricSegment","fallbackText","newSelectMeasurement","newFake","newKey","condition","newOperator","newOperators","addTemplateVars","variableTypeFilter","self","variables","segments","newSelectMetric","newPlusButton","analytics_Analytics","run","startAnalytics","DynamicDirectiveSrv","addDirective","child","directiveInfo","registered","$normalize","watchPath","childScope_1","dynamic_directive_srv_DynamicDirectiveSrv","navIndex","buildNavIndex","navTree","buildInitialState","location_initialState","reducers","initialState","UpdateNavIndex","newPages","parentItem","routeParams","utils_url","actions","QueryPartDef","defaultParams","category","addStrategy","QueryPart","updateText","innerExpr","hasMultipleParamsInString","strValue","partVal","trim","functionRenderer","paramType","quote","joinEvalMatches","metric","Metric","Value","alertDef","alertQueryDef","getStateDisplayModel","iconClass","stateClass","conditionTypes","evalFunctions","evalOperators","noDataModes","query_part_QueryPart","ah","state_reducers","alertRules","reducers_initialState","LoadAlertRules","rule","stateText","stateModel","newStateDate","executionError","evalData","noData","convertToAlertRule","SetSearchQuery","initialTeamsState","teams","hasFetched","initialTeamState","team","members","groups","searchMemberQuery","teams_state_reducers","state_actions","LoadTeams","LoadTeam","LoadTeamMembers","SetSearchMemberQuery","LoadTeamGroups","api_keys_state_actions","initialApiKeysState","processAclItems","processAclItem","sort","b","sortRank","localeCompare","dto","userId","userLogin","teamId","inititalState","folder","folders_state_actions","LoadFolder","hasChanged","SetFolderTitle","dashboard_state_actions","reducers_inititalState","permissions","dashboard_state_reducers","LoadDashboardPermissions","state_reducers_initialState","plugins_state_reducers","plugins_state_actions","LoadPlugins","SetPluginsSearchQuery","SetLayoutMode","LoadPluginDashboards","dashboards","datasources_state_reducers_initialState","dataSources","dataSourcesCount","dataSourceTypes","dataSourceTypeSearchQuery","dataSourceMeta","datasources_state_actions","LoadDataSources","LoadDataSource","dataSource","SetDataSourcesSearchQuery","SetDataSourcesLayoutMode","LoadDataSourceTypes","SetDataSourceTypeSearchQuery","LoadDataSourceMeta","users_state_actions","canInvite","externalUserMngLinkName","externalUserMngInfo","externalUserMngLinkUrl","users_state_reducers","users_state_reducers_initialState","LoadUsers","users","LoadInvitees","invitees","SetUsersSearchQuery","api_keys_state_reducers","folders_state_reducers","datasources_state_reducers","location_util","stripBaseFromUrl","endsWith","stripExtraChars","bridge_srv_BridgeSrv","BridgeSrv","$route","fullPageReloadRoutes","angularUrl","configureStore_store","getState","core_actions","urlWithoutBase","interpolateTemplateVars","filterFunc","scopedVars","replaceWithText","$stateful","assignModelProperties","removeDefaults","arr","noXml","mousetrap_default","mousetrap","KeybindingSrv","datasourceSrv","timeSrv","modalOpen","timepickerOpen","reset","setupGlobal","showHelpModal","goToHome","openAlerting","goToProfile","openSearchStarred","openSearchTags","bindGlobal","exit","tagsMode","editview","kiosk","keyArg","setupDashboardBindings","graphTooltip","startRefresh","focusPanelId","canEdit","panelId","exploreEnabled","url_1","getPanelById","explore","targets","panelIndex","getPanelInfoById","duplicatePanel","panels","shareScope","panelInfo","collapseRows","expandRows","showDashEditView","help_HelpCtrl","HelpCtrl","tabIndex","shortcuts","Global","Dashboard","Focused Panel","Time Range","nav_model_srv_NavModelSrv","NavModelSrv","navItems","getCfgNode","getNav","NavModel","args_1","nav","_b","_c","core","scroll_scrollBarHTML","scrollRoot","scroller","grafanaScrollbar","scroll_scrollRootClass","scroll_scrollerClass","scrollParams","root","bar","barOnCls","scrollingCls","scrollbar","core_default","dispose","lastPos","scrollTop","animate","preventScroll","gf_page_template","header","body","OrgSwitchCtrl","currentOrgId","getUserOrgs","orgs","setUsingOrg","org","setWindowLocation","org_switcher_template","org_switcher_OrgSwitchCtrl","Profiler","enabled","buildInfo","env","timings","appStart","loadStart","getTime","digestCounter","refresh","dashboardFetched","dashboardInitialized","panelInitialized","panelsInitCount","panelsRendered","getTotalWatcherCount","scopeCount","timeTaken","lastPanelInitializedAt","dashboardLoadStart","rootDigestStart","performance","now","scopes","f","renderingCompleted","panelTimings","renderEnd","renderStart","PasswordStrength","strengthText","strengthClass","SearchResult_SearchResult","SearchResult","SearchResult_SearchResultSection","SearchResultSection","toggleSection","renderItem","collapseClassNames","classnames_default","fa","Async","react_select_esm","TagBadge","removeIcon","NoOptionsMessage","TagFilter_TagFilter","searchTags","tagOptions","term","onSelect","TagFilter","selectOptions","classNamePrefix","isMulti","defaultOptions","getOptionLabel","styles","ResetStyles","components","TagOption","MultiValueLabel","MultiValueRemove","Async_default","sidemenu_DropDownChild","listItemClassName","sidemenu_SideMenuDropDown","role","sidemenu_TopSectionItem","img","sidemenu_TopSection","cloneDeep","hideFromMenu","mainLinks","sidemenu_SignIn","loginUrl","encodeURIComponent","pathname","sidemenu_BottomNavLinks","BottomNavLinks","itemClicked","switchOrg","BottomSection","bottomNav","orgCount","profileNode","toggleSideMenu","SideMenu","toggleSideMenuSmallBreakpoint","time_series2","SearchResultsCtrl","toggleFolderExpand","onFolderExpanding","editable","onSelectionChanged","navigateToFolder","toggleSelection","onItemClick","onTagSelected","$tag","search_results_SearchResultsCtrl","ManageDashboardsCtrl","selectAllChecked","canDelete","canMove","starredFilterOptions","disabled","canSave","skipRecent","skipStarred","selectedStarredFilter","refreshList","initTagFilter","initDashboardList","selectionChanged","selectedDashboards","selectedFolders","getFoldersAndDashboardsToDelete","folders","getFolderIds","ids","sections_1","folderCount","dashCount","getDashboardsToMove","afterSave","tagFilterOptions","onQueryChange","onTagFilterChange","selectedTagFilter","removeStarred","onStarredFilterChange","onSelectAllChanged","clearFilters","createDashboardUrl","importDashboardUrl","manage_dashboards_ManageDashboardsCtrl","dashboard_loaders_LoadDashboardCtrl","loadDashboard","autofitpanels","initDashboard","homeDash","redirectUri","newUrl","canShare","canStar","NewDashboardCtrl","isNew","roles","some","hasRole","locals","default","WrapInProvider","reactContainer","setupAngularRoutes","$routeProvider","$locationProvider","html5Mode","pageClass","reloadOnSearch","DataSourcesListPage","DataSourceDashboards","NewDataSourcePage","FolderPermissions","FolderSettingsPage","UsersListPage","ApiKeysPage","TeamList","TeamPages","ServerStats","PluginListPage","AlertRuleList","handlers_1","handlers","applyRouteRegistrationHandlers","TimeSrv","timer","zoomOut","routeUpdated","autoRefreshBlocked","visibilityState","refreshDashboard","initTimeFromUrl","parseTime","timeAtLoad","setAutoRefresh","parseUrlParam","urlRange","timeRangeForUrl","setTime","timeHasChangedSinceLoad","cancelNextRefresh","intervalMs_1","refreshTimer","startNextRefreshTimer","afterMs","isGrafanaVisible","oldRefresh","fromRouteUpdate","urlParams","timeRange","raw","timezone","getTimezone","datemath","timespan","center","time_srv_TimeSrv","system","system_default","remarkable","PanelCtrl","editorTabIndex","timing","plugin","pluginId","pluginName","panelDidMount","publishAppEvent","evtName","viewPanel","editPanel","exitFullscreen","initEditMode","editorTabs","addEditorTab","editModeInitiated","urlTab","changeTab","updateParams","directiveFn","editorTab","getMenu","shortcut","getAdditionalMenuItems","extendedMenu","getExtendedMenu","otherPanelInFullscreenMode","calculatePanelHeight","docHeight","editHeight","fullscreenHeight","containerHeight","isEditing","gridPos","constants","soloMode","duplicate","removePanel","editPanelJson","editScope","getSaveModel","replacePanel","copyPanel","newPanel","oldPanel","findIndex","panel_model","sortPanelsByGridPos","sharePanel","getInfoMode","links","getInfoContent","markdown","linkSrv","sanitize","interpolatedMarkdown","remarkable_default","getPanelLinkAnchorInfo","openInspector","panelInfoHtml","MetricsTabCtrl","panelCtrl","datasources","getMetricSources","panelDsValue","ds","datasourceInstance","addQueryDropdown","nextRefId","getNextQueryLetter","updateDatasourceOptions","hasQueryHelp","includeBuiltin","builtIn","setDatasource","mixed","defaultDatasource","addMixedQuery","addQuery","toggleHelp","optionsOpen","queryTroubleshooterOpen","helpOpen","md","helpHtml","toggleOptions","toggleQueryTroubleshooter","metricsTabDirective","metrics_tab_MetricsTabCtrl","onMetricsPanelRefresh","onInitMetricsPanelEditMode","onPanelTearDown","MetricsPanelCtrl","dataSubscription","unsubscribe","snapshotData","updateTimeRange","data_1","dataStream","issueQueries","handleQueryResult","loading","setTimeQueryStart","queryStart","setTimeQueryEnd","queryEnd","applyPanelTimeOverrides","maxDataPoints","ceil","intervalOverride","timeInfo","timeFrom","timeFromInterpolated","timeFromInfo","timeFromDate","timeShift","timeShiftInterpolated","hideTimeOverride","assign","__interval","__interval_ms","handleDataStream","snapshot","complete","removeQuery","moveQuery","move","query_ctrl_QueryCtrl","QueryCtrl","ThresholdMapper","alertToGraphThresholds","conditions","evaluator","thresholds","value1","value2","AlertTabCtrl","dashboardSrv","subTabIndex","executionErrorModes","addNotificationSegment","thresholdChangedEventHandler","graphThresholdChanged","editingThresholds","notifications","alertNotifications","alertHistory","initModel","validateModel","getAlertHistory","getCurrent","newState","getAlertAnnotationInfo","getNotificationIcon","getNotifications","changeTabIndex","newTabIndex","notificationAdded","isDefault","removeNotification","buildDefaultCondition","noDataState","alertingNoDataOrNullValues","executionErrorState","alertingErrorOrTimeout","frequency","defaultName","conditionModels","buildConditionModel","addedNotification","notification","bgColor","handleIndex","evaluatorParamsChanged","operator","firstTarget","refId","foundTarget","datasourceName","alerting","targetContainsTemplate","cm","queryPart","reducerPart","createReducerPart","reducer","handleQueryPartEvent","conditionModel","handleReducerPartEvent","reducerTypes","addCondition","removeCondition","alertState","enable","clearHistory","testing","testResult","AlertTabCtrl_AlertTabCtrl","prism","slate_plain_serializer_es","table_model","util","POINT_TIME_INDEX","POINT_VALUE_INDEX","csvEscaped","QUOTE","domParser","DOMParser","htmlDecoded","regexp","parseFromString","textContent","formatSpecialHeader","useExcelHeader","END_COLUMN","END_ROW","formatRow","addEndRowDelimiter","lodash","convertSeriesListToCsv","seriesList","dateTimeFormat","excel","DEFAULT_DATETIME_FORMAT","alias","exportSeriesListToCsv","saveSaveBlob","EXPORT_FILENAME","convertSeriesListToCsvColumns","seriesPoints","timestamps","pointIndex","seriesTimestamps","extendedSeries","mergeSeriesByTime","_loop_1","timestamp","exportSeriesListToCsvColumns","convertTableDataToCsv","table","columns","rows","exportTableDataToCsv","fname","blob","Blob","FileSaver","flatten","delimiter","maxDepth","currentDepth","output","step","isarray","safe","isobject","utils_ticks","versionPattern","version_SemVersion","SemVersion","major","minor","isGtOrEq","compared","isVersionGtOrEq","gfunc_index","addFuncDef","funcDef","shortName","optionalSeriesRefArgs","multiple","graphiteVersion","FuncInstance","withDefaultParams","metricExp","last","includes","_hasMultipleParamsInString","gfunc","getFuncDef","isVersionRelatedFunction","rawDefs","funcName","func","required","rawParam","suggestions","funcDefs","instanceSettings","basicAuth","jsonData","supportsTags","cacheTimeout","withCredentials","render_method","rangeRaw","buildGraphiteParams","graphOptions","httpOptions","convertDataPointsToMs","tagString","annotationQuery","annotation","graphiteQuery","target_1","tags_1","parseTags","what","doGraphiteRequest","translateTime","variableExists","roundUp","subtract","unix","metricFindQuery","optionalOptions","interpolatedQuery","expressions","exprRegex","getTagValuesAutoComplete","getTagsAutoComplete","until","getTagValues","tagPrefix","expression","valuePrefix","createFuncInstance","getFuncDefs","funcDefsPromise","supportsFunctionIndex","parseFuncDefs","testDatasource","inspect","_seriesRefLetters","targetValue","graphiteOptions","cleanOptions","intervalFormatFixRegex","hasTargets","fixIntervalFormat","g1","nestedSeriesRegexReplacer","rst2html_min","categories","createFunctionDropDownMenu","allFunctions","addFunction","cleanUpDrop","shortDesc","rst2html_min_default","targetAttachment","popoverSrv","$funcLink","$funcControls","scheduledRelink","paramCountAtLink","$comma","paramDef","inputElem","relink","targetChanged","hasClass","closest","defParams","lastParam","added","toggleFuncControls","$target","removeFunction","queryModel","functions","$index","graphiteAddFunc","graphiteFuncEditor","unicodeLetterTable","lexer_i","identifierStartTable","Lexer","char","lexer","tokenize","charAt","peek","scanStringLiteral","scanPunctuator","scanNumericLiteral","scanIdentifier","scanTemplateSequence","isUnicodeLetter","isHexDigit","readUnicodeEscapeSequence","ch1","ch2","ch3","ch4","chr","getIdentifierPart","charCodeAt","identifierPartTable","ch","isDecimalDigit","isMalformed","isIdentifierStart","base","isOctalDigit","bad","isPunctuator","isUnclosed","getAst","functionCall","metricExpression","curlySegment","consumeToken","errorMark","curly","curlyBraceSegment","tokens","functionParameters","numericLiteral","seriesRefExpression","boolExpression","stringLiteral","currentToken","token1","token2","matchToken","graphite_query","GraphiteQuery","removeTagValue","parseTarget","textEditor","astNode","Parser","parseTargetRecursive","checkOtherSegmentsIndex","checkForSeriesByTag","seriesByTagFunc","seriesByTagUsed","hidden","splitSeriesByTagParams","getSegmentPathUpTo","innerFunc_1","addFunctionParameter","updateSegmentValue","addSelectMetricSegment","newFunc","moveAliasFuncLast","aliasFunc","startsWith","updateModelTarget","metricPath","wrapFunction","updateRenderedTarget","targetsByRefId","keyBy","nestedSeriesRefRegex","targetWithNestedQueries","refCount","countTargetRefs","updated","targetFull","tagPattern","getSeriesByTagFuncIndex","getSeriesByTagFunc","seriesByTagFuncIndex","addTag","newTagParam","renderTagString","updateTag","tagIndex","renderTagExpressions","excludeIndex","compact","tagExpr","TAG_PREFIX","query_ctrl_GraphiteQueryCtrl","GraphiteQueryCtrl","paused","waitForFuncDefsLoaded","buildSegments","toggleEditorMode","checkOtherSegments","fromIndex","setSegmentFocus","segmentIndex","getAltSegments","eachRight","removeTaggedEntry","addAltTagSegments","getTagsAsSegments","tagSegments","segmentValueChanged","removeTagPrefix","pause","addSeriesByTagFunc","spliceSegments","emptySegments","targetTextChanged","oldTarget","smartlyHandleNewAliasByNode","tagParam","getAllTags","altTags","mapToDropdownOptions","tagExpressions","getTagOperators","GRAPHITE_TAG_OPERATORS","getAllTagValues","tagKey","altValues","tagChanged","addNewTag","newTag","fixTagSegments","addTagSegments","showDelimiter","unpause","GraphiteConfigCtrl","graphiteVersions","autoDetectGraphiteVersion","loadDatasource","getVersion","AnnotationsQueryCtrl","CloudWatchQueryParameterCtrl","namespace","metricName","statistics","dimensions","period","region","returnData","highResolution","regionSegment","getSegmentForValue","namespaceSegment","dimSegments","newKeyValue","statSegments","stat","ensurePlusButton","removeDimSegment","removeStatSegment","getStatSegments","copy","standardStatistics","statSegmentChanged","seg","lastSegment","getDimensionKeys","getDimensionValues","dimensionKey","transformToSegments","dimSegmentChanged","syncDimSegmentsWithModel","dims","keySegment","valueSegment","getRegions","getNamespaces","getMetrics","regionChanged","namespaceChanged","metricChanged","CloudWatchQueryParameter","query_parameter_ctrl_CloudWatchQueryParameterCtrl","containsVariable","variableName","cloudwatch_datasource","proxyUrl","defaultRegion","expandTemplateVariable","getActualRegion","convertDimensionFormat","getPeriod","datasourceId","queries","performTimeSeriesQuery","convertToCloudWatchTime","periodUnit","daySec","awsRequest","queryRes","points","transformSuggestDataFromTable","suggestData","tables","v","doMetricQueryRequest","subtype","CloudWatchDatasource","filterDimensions","getEbsVolumeIds","instanceId","getEc2InstanceAttribute","attributeName","filters","filterJson","metricNameQuery","dimensionKeysQuery","dimensionValuesQuery","ebsVolumeIdsQuery","ec2InstanceAttributeQuery","targetAttributeName","defaultPeriod","prefixMatching","actionPrefix","alarmNamePrefix","k","getDefaultRegion","allSelected","selectedVariables","currentVariables","scopedVar","btoa","chain","findKey","getVariableName","multiVariable","getExpandedVariables","convertedDimensions","CloudWatchQueryCtrl","aliasSyntax","config_ctrl_CloudWatchConfigCtrl","CloudWatchConfigCtrl","accessKeyExist","secretKeyExist","indexPatternTypes","example","regions","timeField","authType","secureJsonFields","accessKey","secretKey","resetAccessKey","resetSecretKey","CloudWatchAnnotationsQueryCtrl","query_def_metricAggTypes","requiresField","supportsInlineScript","supportsMissing","isPipelineAgg","minVersion","query_def_bucketAggTypes","orderByOptions","orderOptions","sizeOptions","extendedStats","intervalOptions","movingAvgModelOptions","query_def_pipelineOptions","moving_avg","derivative","holt","isCheckbox","getMetricAggTypes","esVersion","metricType","po","getMovingAvgSettings","filtered","filteredResult","movingAvgModelSettings","setting","describeMetric","field","ElasticQueryBuilder","getRangeFilter","gte","lte","buildTermsAgg","aggDef","queryNode","metricRef","terms","settings","orderBy","order","metrics","aggs","min_doc_count","missing","getDateHistogramAgg","getHistogramAgg","esAgg","getFiltersAgg","filterObj","documentQuery","unmapped_type","fields","script_fields","fielddata_fields","docvalue_fields","addAdhocFilters","adhocFilters","queryCondition","bool","must","match_phrase","must_not","lt","gt","build","bucketAggs","query_string","analyze_wildcard","nestedAggs","aggField","metricAgg","pipelineAgg","buckets_path","queryDef","_term","pattern","getIndexForToday","startOf","endEpoch","intervalInfo","processMetrics","newSeries","bucket","buckets","doc_count","percentiles","percentileName","statName","stats","std_deviation_bounds_upper","std_deviation_bounds","upper","std_deviation_bounds_lower","lower","normalized_value","processAggregationDocs","addColumn","propKey","filterable","_d","_e","propValues","_f","_g","addMetricValue","getMetricName","processBuckets","aggId","nameIndex","key_as_string","metricDef","getSeriesName","metricTypeCount","g2","appliedAgg","nameSeries","uniq","ElasticResponse","processHits","hits","_id","_type","_index","_source","trimDatapoints","aggregations","histogram","trimEdges","getErrorFromElasticResponse","root_cause","reason","$$config","getTimeSeries","responses","tmpSeriesList","indexPattern","index_pattern_IndexPattern","timeInterval","maxConcurrentShardRequests","queryBuilder","query_builder_ElasticQueryBuilder","getIndexList","indexList","tagsField","textField","ignore_unavailable","getFieldFromSource","fieldName","fieldNames","fieldValue","titleField","getFields","dateFields","getQueryHeader","searchType","timeTo","queryHeader","getAdhocFilters","queryObj","esQuery","sentTargets","elastic_response_ElasticResponse","typeMap","float","double","string","scaled_float","nested","shouldAddField","fieldNameParts","getFieldsRecursively","subObj","properties","indexName","mappings","typeName","getTerms","getTermsQuery","ElasticDatasource","getTagKeys","bucketAgg","objectContainsTemplate","isPrimitive","agg","showOptions","isFirst","bucketAggCount","settingsLinkText","describeOrder","describeOrderBy","defaultTo","addFiltersQuery","removeFiltersQuery","metricRefs","getOrderByOptions","$fieldType","lastBucket","addIndex","bucket_agg_ElasticBucketAggCtrl","metricAggs","updatePipelineAggOptions","pipelineAggOptions","getPipelineAggOptions","isSingle","metricAggTypes","pipelineOptions","getPipelineOptions","precisionThreshold","precision_threshold","percents","movingAvgModelTypes","modelSettings","updateMovingAvgModelSettings","inlineScript","inline","onChangeInternal","modelSettingsKeys","onChangeClearInternal","minimize","onTypeChange","getFieldsInternal","addMetricAgg","removeMetricAgg","toggleShowMetric","metric_agg_ElasticMetricAggCtrl","ElasticQueryCtrl","queryUpdated","jsonStr","handleQueryError","newJson","rawQueryOld","bucketAggTypes","esVersions","indexPatternTypeChanged","database","ElasticConfigCtrl","ElasticAnnotationsQueryCtrl","opentsdb_datasource","tsdbVersion","tsdbResolution","tagKeys","aggregatorsPromise","filterTypesPromise","convertToTSDBTime","qs","convertTargetToQuery","groupByTags","tagk","metricToTargetMapping","mapMetricsToTargets","metricData","_saveTagKeys","transformMetricData","eventList","aggregator","annotationObject","annotations","isGlobal","globalAnnotations","startTime","msResolution","reqBody","showQuery","_addCredentialOptions","suggestTagKeys","aggregateTags","_performSuggestQuery","_get","_performMetricKeyValueLookup","keysArray","keysQuery","tagvs","_performMetricKeyLookup","tagks","tagv","relativeUrl","OpenTsDatasource","interpolated","responseTransform","metricsQuery","tagNamesQuery","tagValuesQuery","tagNamesSuggestQuery","tagValuesSuggestQuery","getAggregators","getFilterTypes","createMetricLabel","dps","metricLabel","scopedVars_1","toPairs","tagData","shouldComputeRate","rate","rateOptions","counter","isCounter","counterMax","counterResetValue","resetValue","dropResets","ResetValue","disableDownsampling","downsampleInterval","downsample","downsampleAggregator","downsampleFillPolicy","filterKey","explicitTags","interpolatedTagValue","arrTagV","every","tagV","tagK","OpenTsQueryCtrl","errors","validateTarget","aggregators","fillPolicies","filterTypes","suggestMetrics","getTextValues","suggestTagValues","targetBlur","metricFindResult","currentTagKey","currentTagValue","addTagMode","editTag","closeAddTagMode","addFilter","addFilterMode","currentFilterType","currentFilter","currentFilterKey","currentFilterValue","currentFilterGroupBy","removeFilter","editFilter","fil","closeAddFilterMode","errs","shouldDownsample","OpenTsConfigCtrl","module_AnnotationsQueryCtrl","GrafanaDatasource","matchAny","tt","GrafanaQueryCtrl","influx_series","seriesName","columnName","_getSeriesName","segIndex","getAnnotations","titleCol","timeCol","tagsCol","textCol","titleColumn","tagsColumn","textColumn","getTable","reordered","InfluxSeries","createPart","query_part_index","groupByTimeFunctions","fieldRenderer","replaceAggregationAddStrategy","selectParts","partModel","query_part_categories","Aggregations","morePartsAvailable","Selectors","addTransformationStrategy","Aliasing","selectModels","Fields","Transformations","Predictors","partCount","query_part","getCategories","influx_query","InfluxQuery","policy","resultFormat","orderByTime","updateProjection","groupByParts","updatePersistedParts","hasGroupByTime","g","hasFill","addGroupBy","stringParts","arg","typePart","removeGroupByPart","removeSelect","removeSelectPart","modelsIndex","partIndex","addSelectPart","renderTagCondition","interpolate","getMeasurementAndPolicy","measurement","interpolateQueryStr","defaultFormatFn","includeAll","selectText","groupBySection","slimit","renderAdhocFilters","response_parser","ResponseParser","influxResults","normalizedQuery","serie","isValueFirst","addUnique","InfluxQueryBuilder","buildExploreQuery","withKey","withMeasurementFilter","whereConditions","influxdb_datasource","urls","responseParser","timeFilter","getTimeFilter","allQueries","acc","_seriesQuery","queryTargets","influxSeries","timeSeries","curry","query_builder_InfluxQueryBuilder","InfluxDatasource","_influxRequest","serializeParams","currentUrl","u","db","getInfluxTime","fromIsAbsolute","query_ctrl_InfluxQueryCtrl","policySegment","measurementSegment","newCondition","buildSelectMenu","removeTagFilterSegment","InfluxQueryCtrl","removeOrderByTime","selectMenu","cat","getGroupByOptions","groupByAction","groupBySegment","plusButton","subitem","handleSelectPartEvent","fieldsQuery","handleGroupByPartEvent","tagsQuery","measurementChanged","getPolicySegments","policiesQuery","policyChanged","rawQuery","getMeasurements","measurementFilter","getTagsOrValues","nextValue","getFieldSegments","tagSegmentUpdated","rebuildTargetTagConditions","tagOperator","segment2","getTagValueOperator","tagValue","getCollapsedText","InfluxConfigCtrl","InfluxAnnotationsQueryCtrl","entry","labels","logLevel","level","LogLevel","getLogLevel","timeFromNow","timeLocal","logging_datasource","LoggingDatasource","_request","apiUrl","prepareQueryTarget","DEFAULT_QUERY_PARAMS","QUERY_REGEXP","parseQuery","streams","entries","processEntry","combinedEntries","reverse","processStreams","metadataRequest","LoggingConfigCtrl","datasource_MixedDatasource","MixedDatasource","sets","dsName","mysql_response_parser","processQueryResult","parseMetricFindQueryResult","textColIndex","findColIndex","valueColIndex","transformToKeyValueList","transformToSimpleList","containsKey","colName","transformAnnotationResponse","timeColumnIndex","textColumnIndex","tagsColumnIndex","MysqlDatasource","interpolateVariable","rawSql","MysqlQueryCtrl","formats","defaultQuery","onDataReceived","onDataError","dataList","anySeriesFromQuery","lastQueryMeta","lastQueryError","MysqlConfigCtrl","MysqlAnnotationsQueryCtrl","module_defaultQuery","postgres_response_parser","rowCount","postgres_query","PostgresQuery","timeColumn","metricColumn","where","unquoteIdentifier","quoteIdentifier","quoteLiteral","escapeLiteral","hasTimeGroup","hasMetricColumn","buildQuery","hasUnixEpochTimecolumn","timeColumnType","buildTimeColumn","timeGroup","macro","buildMetricColumn","buildValueColumns","buildValueColumn","aggregate","windows","overParts","over","curr","buildWhereClause","buildGroupClause","groupSection","PostgresDatasource","getTimescaleDBVersion","PostgresMetaQuery","getOperators","datatype","quoteIdentAsLiteral","findMetricTable","buildSchemaConstraint","buildTableConstraint","buildTableQuery","buildColumnQuery","buildValueQuery","buildDatatypeQuery","buildAggregateQuery","SqlPartDef","wrapOpen","wrapClose","sql_part_SqlPart","SqlPart","sql_part_register","sql_part","sql_part_index","metaBuilder","query_ctrl_defaultQuery","tableSegment","timeColumnSegment","metricColumnSegment","whereAdd","groupAdd","PostgresQueryCtrl","whereParts","groupParts","aggregates","timescaledb","postgresVersion","resetPlusButton","button","getTableSegments","tableChanged","segment_1","timeColumnChanged","task2","task1","getTimeColumnSegments","getMetricColumnSegments","addNone","metricColumnChanged","templateQuoter","findAggregateIndex","findWindowIndex","partType","addGroup","aggIndex","addAlias","windowIndex","aggIndex_1","handleGroupPartEvent","removeGroup","handleWherePartEvent","getWhereOptions","addWhereAction","getGroupOptions","addGroupAction","PostgresConfigCtrl","postgresVersions","sslmode","showTimescaleDBHelp","autoDetectFeatures","trunc","toggleTimescaleDBHelp","postgres_module_defaultQuery","metric_find_query","PrometheusMetricFindQuery","labelValuesQuery","metricNamesQuery","queryResultQuery","metricNameAndLabelsQuery","getPrometheusTime","_labels","metricFilterPattern","matchedMetricName","performInstantQuery","__name__","getOriginalMetricName","transform","prometheusResult","responseListLength","sortSeriesByLabel","prometheusResult_1","transformToHistogramOverTime","prometheusResult_2","resultType","transformInstantMetricData","stepMs","baseTimestamp","dpValue","endTimestamp","responseIndex","transformMetricDataToTable","resultCount","metricLabels","sortedLabels","labelIndex","valueText","labelData","legendFormat","renderTemplate","ResultTransformer","aliasPattern","aliasData","topSeries","bottomSeries","bottomPoint","s1","s2","le2","le1","parseHistogramLabel","le","labelRegexp","selector","parsedLabels","labelOperator","labelKey","operatorForLabelKey","labelValue","isEqual","metricNameRegexp","openChar","closeChar","nextSelectorStart","nextSelectorEnd","isPositionInsideChars","previousWord","keywords","previousWordIsKeyWord","builtInWords","lastIndex","addLabelToSelector","selectorWithLabel","selectorRegexp","suffix","prometheusSpecialRegexEscape","PrometheusDatasource","directUrl","queryTimeout","httpMethod","result_transformer_ResultTransformer","Content-Type","transformRequest","interpolateQueryExpr","prometheusRegularEscape","activeTargets","createQuery","allQueryPromise","instant","responseList","hints","transformerOptions","resultTransformer","hinting","queryHints","fix","increasing_1","nonNullData_1","dp","monotonic","ruleMappings","mapping_1","ruleName","mappingForQuery","mapping","getQueryHints","minInterval","intervalFactor","adjustedInterval","adjustInterval","getRangeScopedVars","add_label_to_query","alignRange","adjusted","performSuggestQuery","metricsNameCache","expire","diff","msRange","regularRange","__range_s","sRange","titleFormat","textFormat","queryOptions","useValueForTime","getExploreState","loadRules","rules","extractRuleMappingFromGroups","modifyQuery","ruleNames","rulesRegex","pre","getTimeRange","PromCompleter","identifierRegexps","labelQueryCache","labelNameCache","labelValueCache","templateVariableCompletions","wrappedCallback","completions","getCompletionsForLabelMatcherName","getCompletionsForLabelMatcherValue","getCompletionsForBinaryOperator","vectors","metricNames","findMetricName","getLabelNameAndValueForExpression","labelNames","transformToCompletions","findToken","labelName","labelNameToken","labelValues","rparenToken","keywordOperatorToken","findExpressionMatchedParen","binaryOperatorToken","metricName_1","words","nameLabelNameToken","nameLabelValueToken","getTokens","metricNameToken","guard","sum","deep","PrometheusQueryCtrl","getDefaultFormat","completer_PromCompleter","refreshMetricData","updateLink","rangeDiff","endTime","g0.expr","g0.range_input","g0.end_input","stack","linkToPrometheus","PrometheusConfigCtrl","PrometheusAnnotationsQueryCtrl","mssql_response_parser","MssqlDatasource","MssqlQueryCtrl","mssql_query_ctrl_defaultQuery","MssqlConfigCtrl","MssqlAnnotationsQueryCtrl","mssql_module_defaultQuery","datasource_TestDataDatasource","TestDataDatasource","scenarioId","stringInput","timeWalker","TestDataQueryCtrl","scenarioList","newPointTime","selectedPoint","getPoints","point","pointSelected","deletePoint","addPoint","newPointValue","scenario","scenarioChanged","TestDataAnnotationsQueryCtrl","MetricKind","ValueTypes","valueTypes","INT64","DOUBLE","MONEY","DISTRIBUTION","metricKinds","CUMULATIVE","DELTA","GAUGE","STRING","VALUE_TYPE_UNSPECIFIED","BOOL","aggOptions","MiBy","By/s","stackdriver_datasource","doRequest","defaultProject","groupBys","primaryAggregation","aggregation","crossSeriesReducer","perSeriesAligner","aliasBy","getLabels","view","StackdriverDatasource","interpolateGroupBys","interpolatedGroupBys","gb","resolvePanelUnitFromTargets","stackdriverUnitMappings","timeSerie","getProjects","projects","projectId","getDefaultProject","error_1","trys","projectName","getMetricTypes","metricsApiPath","error_2","baseUrl","metricDescriptors","serviceShortName","displayName","maxRetries","alignmentPeriod","alignmentPeriods","setAggOptions","setAlignOptions","alignOptions","valueType","metricKind","StackdriverAggregationCtrl","deselectAggregationOption","formatAlignmentText","selectedAlignment","ap","notValidOptionValue","StackdriverAggregation","query_aggregation_ctrl_StackdriverAggregationCtrl","getFilterKeysFunc","getFilterValuesFunc","FilterSegments","buildSegmentModel","removeSegment","filterSegments","getFilters","hasNoFilterKeys","filterValues","getValuesForFilterKey","filterSegmentUpdated","addNewFilterSegments","removeFilterSegment","defaultDropdownValue","defaultServiceValue","hideGroupBys","initSegments","groupBySegments","getCurrentProject","project","loadMetricDescriptors","services","getServicesList","getMetricsList","defaultValue","uniqBy","loadLabelsPromise","resourceLabels","onServiceChange","setMetricType","onMetricTypeChange","StackdriverFilterCtrl","$broadcast","getGroupBys","removeText","removeUsed","ml","defaultRemoveGroupByValue","groupByChanged","getFilterValues","shortKey","StackdriverFilter","query_filter_ctrl_StackdriverFilterCtrl","StackdriverQueryCtrl","showAggregationOptions","defaultsDeep","rawQueryString","decodeURIComponent","jsonBody","StackdriverConfigCtrl","validationErrors","secureJsonData","jwt","tokenUri","token_uri","clientEmail","client_email","project_id","validateJwt","resetValidationMessages","private_key","inputDataValid","onUpload","jsonText","onPasteJwt","originalEvent","clipboardData","annotations_query_ctrl_StackdriverAnnotationsQueryCtrl","StackdriverAnnotationsQueryCtrl","TextPanelCtrl","panelDefaults","onInitEditMode","onRefresh","onRender","throttle","renderMarkdown","updateContent","renderText","scrollable","module_Text2","Text2","react_sizeme","react_sizeme_default","linewidth","right","Graph","prevProps","ticks","secPerTick","time_format","FLOT_OPTIONS","viz_Graph","Graph_Graph","Graph2","nullValueMode","previousTime","allIsNull","allIsZero","ignoreNulls","app_types","Ignore","nullAsZero","AsZero","previousValue","previousDeltaUp","currentValue","currentTime","currentStep","timeStep","nonNulls","logmin","avg","colorIndex","delta","getTimeSeriesVMs","vmSeries","TextOptions","createAnnotationToolip","eventManager","manager","onEdit","editEvent","markerElementToAttachTo","createEditPopover","editorOpen","editorOpened","editorClosed","DrawableEvent","drawFunc","clearFunc","moveFunc","_object","_drawFunc","_moveFunc","_width","_height","_position","_clearFunc","getObject","VisualEvent","drawableEvent","_options","_drawableEvent","_hidden","visual","getParent","_parent","isHidden","unhide","EventMarkers","_events","_types","_plot","eventsEnabled","getEvents","setTypes","types","setupEvents","partition","ve","_buildDiv","vre","_buildRegDiv","ao","bo","drawEvents","_insidePlot","updateEvents","getPlotOffset","getXAxes","xaxis","p2c","_clearEvents","markerSize","markerShow","lineStyle","markerTooltip","that","eventTypeId","eventType","topOffset","eventSectionHeight","border-left-color","marker_1","font-size","line-height","border-left","border-right","border-top","border-bottom","editModel","hover","regionWidth","timeEnd","border-left-width","border-left-style","background-color","xc","eventMarkers","jquery_flot_events_EventMarkers","ThresholdManager","getHandleHtml","valueStr","colorMode","initDragging","handleElem","currentTarget","parents","clientY","lastY","posTop","c2p","graphValue","dragging","stopped","renderHandle","defaultHandleTopPos","handleTopPos","valueCanvasPos","shouldDrawHandles","hasSecondYAxis","prepare","thresholdMargin","needsCleanup","addFlotOptions","gtLimit","ltLimit","fillColor","lineColor","markings","y2axis","editor_ctrl_AnnotationsEditorCtrl","AnnotationsEditorCtrl","annotationDefaults","iconColor","showIn","getAnnotationSources","datasourceChanged","currentAnnotation","currentDatasource","currentIsNew","update","setupNew","backToList","dir","removeAnnotation","makeRegions","regionEvents","singleEvents","regionId","regionObj","isRegion","isStartOfRegion","AnnotationsSrv","clearCache","globalAnnotationsPromise","alertStatesPromise","datasourcePromises","getGlobalAnnotations","getAlertStates","flattenDeep","eventsById","eventGroup","isPanelAlert","dsPromises","this_1","translateQueryResult","datasourcePromise","state_1","saveAnnotationEvent","updateAnnotationEvent","deleteAnnotationEvent","deleteUrl","annotations_srv_AnnotationsSrv","event_editor_EventEditorCtrl","EventEditorCtrl","annotationsSrv","tryEpochToMoment","timeFormated","form","saveModel","event_manager_EventManager","EventManager","updateTime","AnnotationEvent","addFlotEvents","flotOptions","$__alerting","$__ok","$__no_data","$__editing","defaultColor","setAlpha","addAlphaToRGB","levels","annotationTooltipDirective","sanitizeString","titleStateClass","alertId","avatarUrl","convertToHistogramData","bucketSize","hiddenSeries","getSeriesValues","minBound","getBucketBound","maxBound","bound","bound_1","histogamSeries","convertValuesToHistogram","yAxes","axis","checkCorrectAxes","checkCorrectAxis","yRight","yLeft","checkOneSide","oneSide","rateLeft","rateRight","checkTwoCross","absLeftMin","absLeftMax","absRightMin","absRightMax","upLeft","downLeft","upRight","downRight","getRate","axes","GraphElement","panelWidth","threshold_manager_ThresholdManager","getSeriesFn","findHoverIndexFromDataPoints","posX","ps","pointsize","initial","findHoverIndexFromData","middle","absoluteTime","innerHtml","xMode","hoverIndex","hoverDistance","pointTime","minDistance","minTime","hideEmpty","hideZero","value_type","lastValue","aliasEscaped","distance","shared","detach","panelRelY","clearCrosshair","hoverInfo","seriesHtml","tooltipFormat","plotData","allSeriesMode","pointOffset","innerHeight","setCrosshair","sharedCrosshairModeOnly","hasMsResolution","seriesHoverInfo","getMultiSeriesPlotHoverInfo","highlightClass","formatValue","renderAndShow","sortedSeries","onPanelteardown","onLegendRenderingComplete","onGraphHover","onGraphHoverClear","onPlotSelected","onPlotClick","renderData","buildFlotPairs","graphHeight","sharedTooltipModeEnabled","ranges","canMakeEditable","x1","shouldAbortRender","drawHook","yaxes","dataWarning","processOffsetHook","gridMargin","getYAxes","panelOptions","processRangeHook","align","alignLevel","alignYLevel","getMinTimeStepOfSeries","bars","render_panel","dashes","buildFlotOptions","prepareXAxis","configureYAxisOptions","thresholdManager","sortSeries","getFlotPairs","nullPointMode","barWidth","addXSeriesAxis","histMin","histMax","addXHistogramAxis","addXTableAxis","addTimeAxis","callPlot","incrementRenderCounter","renderError","gridColor","processOffset","processRange","stackpercent","percentage","zero","translateFillOption","steppedLine","dashLength","spaceLength","pointradius","shadowSize","minBorderMargin","backgroundColor","borderWidth","margin","labelMarginX","crosshair","sortOrder","sortDesc","haveSortBy","haveSortOrder","shouldSortBy","zindex","timeformat","tickValues","tickStep_1","ticksNum","defaultTicks","configureAxisMode","logBase","parseNumber","secondY","tickDecimals","applyLogScale","toNumber","minSetToZero","MIN_VALUE","inverseTransform","generateTicksForLogScaleYAxis","nextTick","maxNumTicks","numTicks","graph_GraphElement","SeriesOverridesCtrl","overrideMenu","currentOverrides","override","addOverrideOption","propertyName","lenght","setOverride","addSeriesOverride","updateCurrentOverrides","openColorSelector","colorSelected","fakeSeries","autoClose","removeOverride","getSeriesNames","graphDirective","getSeriesIndexForElement","toggleAxis","changeSeriesColor","legendScrollbar","seriesInfo","scrollPosition","getTableHeaderHtml","renderLegendElement","tableHeaderElem","seriesElements","hideFromLegend","renderSeriesLegendElements","alignAsTable","tbodyElem","wrap","rightSide","legendRightDefaultWidth","scrollbarParams","destroyScrollbar","marginRight","offsetWidth","clientWidth","scroll","addScrollbar","legendElem","firstRender","toggleSeries","sortLegend","sideWidth","ieWidth","ThresholdFormCtrl","addThreshold","removeThreshold","onFillColorChange","onLineColorChange","DataProcessor","getSeriesList","autoDetectMode","getAutoDetectXAxisMode","firstItem","setPanelDefaultsForNewXAxisMode","timeSeriesHandler","customHandler","seriesData","aliasColors","isOutsideRange","dataItem","validateXAxisSeriesValue","validOptions","getXAxisValueOptions","fieldParts","getPropertiesRecursive","onlyNumbers","pluckDeep","propertyParts","unitFormats","logScales","linear","log (base 2)","log (base 10)","log (base 32)","log (base 1024)","xAxisModes","Time","Series","Histogram","xAxisStatOptions","setUnitFormat","xAxisModeChanged","processor","xAxisValueChanged","getDataFieldNames","axesEditorComponent","axes_editor_AxesEditorCtrl","GraphCtrl","data_processor_DataProcessor","onDataSnapshotLoad","onInitPanelActions","alertingEnabled","alertTab","annotationsPromise","applySeriesOverrides","seriesOverrides","toggleSeriesExclusiveMode","removeSeriesOverride","toggleLegend","legendValuesOptionChanged","exportCsv","module_DashListCtrl","recent","headings","DashListCtrl","modes","getSearch","starDashboard","onFolderChange","PluginListCtrl","pluginList","viewModel","gotoPlugin","updateAvailable","embedded","hasUpdate","AlertListPanel","sortOrderOptions","stateFilter","currentAlerts","nameFilter","sortResult","alerts","alertStateSortScore","updateStateFilter","getAlertsPromise","getCurrentAlertState","getStateChanges","onlyAlertsOnDashboard","al","noAlertsMessage","dashboardFilter","dashboardQuery","dashboardTags","d3","getColorScale","colorScheme","maxValue","minValue","colorScaleInverted","invert","colorInterpolator","domain","getOpacityScale","legendOpacityScale","colorScale","exponent","LEGEND_TICK_SIZE","drawLegendValues","rangeFrom","rangeTo","childNodes","legendValueScale","tickStepSize","isValueCloseTo","buildLegendTicks","xAxis","tickSize","svgElem","baseVal","getSvgElemX","colorRect","posY","clearLegend","valueTo","colorSchemes","legendHeight","valuesNumber","rangeStep","valuesRange","legendRects","selectAll","drawSimpleColorLegend","colorOptions","legendOpacityScale_1","cardColor","drawSimpleOpacityLegend","cards","cardStats","widthFactor","drawColorLegend","opacityScale","drawOpacityLegend","heatmap_axes_editor_AxesEditorCtrl","AxesEditorCtrl","Time series","Time series buckets","yBucketBoundModes","Auto","Upper","Lower","yAxis","heatmapDisplayEditor","HeatmapDisplayEditorCtrl","label1","heatmap_data_converter_parseHistogramLabel","label2","xBucket","yBucket","card","yBounds","bounds","convertToHeatMap","yBucketSize","xBucketSize","heatmap","bucketBound","heatmap_data_converter_getBucketBound","TIME_INDEX","bucketNum","VALUE_INDEX","pointExt","pushToXBuckets","seriesList_1","yBucketSplitFactor","getLogScaleBucketBounds","bottom","pushToYBuckets","convertToLogScaleValueBuckets","getBucketBounds","getValueBucketBound","getLogScaleBucketBound","powTop","valueLog","logp","additionalBucketSize","additionalLog","getDistance","heatmap_tooltip_HeatmapTooltip","HeatmapTooltip","heatmapPanel","mouseOverBucket","originalFillColor","onMouseLeave","getBucketIndexes","xBucketIndex","yBucketIndex","boundTop","countValueFormatter","bucketBoundFormatter","xData","bucketIndex","tooltipDecimals","tickValueFormatter","tooltipHtml","yData","tsBuckets","tickFormatter","valIndex","tsBucketsFormatted","boundBottom","showHistogram","addHistogram","getXBucketIndex","getYBucketIndex","getSharedTooltipPos","xScale","chartHeight","histogramData","histXScale","yScale","barNumberFactor","histogramDomain","histYScale","clientHeight","tooltipWidth","innerWidth","pageYOffset","tooltipHeight","DATA_RANGE_WIDING_FACTOR","HeatmapRenderer","$heatmap","padding","dataRangeWidingFactor","onMouseDown","drawSharedCrosshair","setElementHeight","getYAxisWidth","axisText","getBBox","getXAxisHeight","axisLinePosition","addXAxis","chartWidth","grafanaTimeFormatter","tickFormat","timeFormat","tickPadding","yAxisWidth","addYAxis","heatmapStats","wideYAxisRange","tickInterval","yMin","yMax","decimalsAuto","flotTickSize","tickSizeInner","tickSizeOuter","yWiding","addLogYAxis","adjustLogRange","minLog","adjustLogMin","adjustLogMax","logScaleTickValues","addYAxisFromBuckets","valueFormatted","domainMin","domainMax","tickValue","fixYAxisTickSize","addAxes","chartTop","chartBottom","dataFormat","xAxisHeight","addHeatmapCanvas","heatmapElem","cardPadding","cardRound","addHeatmap","yBuckets","emptyBucket","nullBucket","minBucket","newBucket","mergeZeroBuckets","cardsData","maxValueAuto","setCardSize","getCardX","getCardWidth","getCardY","getCardHeight","getCardColor","getCardOpacity","highlightCard","resetCardHighLight","highlightColor","darker","strokeColor","brighter","xGridSize","yGridSize","splitFactor","cardWidth","cardHeight","cuttedWidth","getEventOffset","elemOffset","clientX","mouseUpHandler","onMouseUp","one","selectionRange","x2","limitSelection","drawSelection","getEventPos","drawCrosshair","emitGraphHoverEvent","y1","posX1","posX2","selectionX","selectionWidth","HeatmapCtrl","opacityScales","colorModes","selectionActivated","onCardColorChange","axesEditor","convertHistogramToHeatmapData","convertTimeSeriesToHeatmapData","bucketsData","xBucketNumber","xBucketSizeByNumber","parseSeries","yBucketNumber","convertToCards","dsSupportHistogramSort","panelDatasource","heatmap_data_converter_sortSeriesByLabel","histogramToHeatmap","yBucketBound","calculateBucketSize","getPanelDataSourceType","seriesHandler","flotpairs","parseHistogramSeries","rendering_HeatmapRenderer","timeKey","cells","col","columnNames","noTableIndex","fromCharCode","columnIndexMapper","flattenedRows","mapper","alteredRow","rowIndex","mergedRows","otherRow","areRowsMatching","columnsUnion","matchedRow","columnIndex","compactedRows","foundFieldToMatch","names","maxDocs","flattened","z","tableCol","TablePanelEditorCtrl","transformers","fontSizes","addColumnSegment","updateTransformHints","canSetColumns","columnsHelpMessage","getColumnOptions","dataRaw","getColumns","transformChanged","removeColumn","tablePanelEditor","editor_TablePanelEditorCtrl","column_options_ColumnOptionsCtrl","ColumnOptionsCtrl","activeStyleIndex","columnTypes","mappingTypes","getColumnNames","addColumnStyle","stylesCount","indexToInsert","dateFormat","mappingType","removeColumnStyle","invertColorOrder","styleIndex","addValueMap","removeValueMap","addRangeMap","rangeMaps","removeRangeMap","initColumns","setTable","TableRenderer","formatters","colorState","colIndex","createColumnFormatter","getColorForValue","defaultCellFormatter","valueMaps","setColorState","valueFormatter_1","numericValue","renderRowVariables","formatColumnValue","renderCell","addWidthHack","cell","columnHtml","preserveFormat","cellClasses","cellLink","linkUrl","cellLinkTooltip","linkTooltip","cellTarget","linkTargetBlank","cellClass","pageSize","startPos","endPos","rowClasses","rowClass","rowStyle","cellHtml","render_values","newRow","TablePanelCtrl","variableSrv","showHeader","desc","pageIndex","columnOptionsTab","transformer","transformDataToTable","renderer_TableRenderer","isTimezoneUtc","toggleColumnSort","pageCount","renderPanel","panelElem","rootElem","footerElem","fontSize","appendTableRows","startPage","endPage","paginationList","activeClass","pageLinkElem","appendPaginationControls","max-height","panelHeight","getTableHeight","filterData","setAdhocFilter","unbindDestroy","LinkSrv","getLinkUrl","keepTime","includeVars","fillVariableValuesForUrl","addParamsToUrl","paramsArray","appendToQueryString","stringToAppend","getAnchorInfo","targetBlank","dashUri","link_srv_LinkSrv","SingleStatCtrl","valueNameOptions","postfix","valueName","prefixFontSize","valueFontSize","postfixFontSize","colorBackground","colorValue","sparkline","full","gauge","thresholdMarkers","thresholdLabels","tableColumn","onSparklineColorChange","onSparklineFillChange","tableData","tableHandler","setTableValues","setValues","setTableColumnToSensibleDefault","getDecimalsForValue","formatFunc","decimalInfo","valueRounded","canModifyText","setColoring","tmp","panelColorIndex","dec","LN10","magn","norm","lastPoint","setValueMapping","rangeMap","linkInfo","$panelContainer","applyColoringThresholds","valueString","getSpan","addGauge","dimension","invalidGaugeRange","plotCanvas","plotCss","colorMap","fontScale","gaugeWidthReduceRatio","gaugeWidth","thresholdMarkersWidth","thresholdLabelFontSize","gauges","border","layout","thresholdWidth","font","getValueText","family","plotSeries","addSparkline","dynamicHeightMargin","strVale","colorPrefix","colorPostfix","getBigValueHtml","drilldownTooltip","mouseleave","hookupDrilldownLinkTooltip","metrics_panel_ctrl_MetricsPanelCtrl","module_GettingStartedPanelCtrl","GettingStartedPanelCtrl","stepIndex","note","check","cta","nextStep","checksDone","passed","helpFlags1","panel_ctrl_PanelCtrl","built_in_plugins","app/plugins/datasource/graphite/module","module_namespaceObject","app/plugins/datasource/cloudwatch/module","cloudwatch_module_namespaceObject","app/plugins/datasource/elasticsearch/module","elasticsearch_module_namespaceObject","app/plugins/datasource/opentsdb/module","opentsdb_module_namespaceObject","app/plugins/datasource/grafana/module","grafana_module_namespaceObject","app/plugins/datasource/influxdb/module","influxdb_module_namespaceObject","app/plugins/datasource/logging/module","logging_module_namespaceObject","app/plugins/datasource/mixed/module","mixed_module_namespaceObject","app/plugins/datasource/mysql/module","mysql_module_namespaceObject","app/plugins/datasource/postgres/module","postgres_module_namespaceObject","app/plugins/datasource/mssql/module","mssql_module_namespaceObject","app/plugins/datasource/prometheus/module","prometheus_module_namespaceObject","app/plugins/datasource/testdata/module","testdata_module_namespaceObject","app/plugins/datasource/stackdriver/module","stackdriver_module_namespaceObject","app/plugins/panel/text/module","text_module_namespaceObject","app/plugins/panel/text2/module","text2_module_namespaceObject","app/plugins/panel/graph2/module","graph2_module_namespaceObject","app/plugins/panel/graph/module","graph_module_namespaceObject","app/plugins/panel/dashlist/module","dashlist_module_namespaceObject","app/plugins/panel/pluginlist/module","pluginlist_module_namespaceObject","app/plugins/panel/alertlist/module","alertlist_module_namespaceObject","app/plugins/panel/heatmap/module","heatmap_module_namespaceObject","app/plugins/panel/table/module","table_module_namespaceObject","app/plugins/panel/singlestat/module","singlestat_module_namespaceObject","app/plugins/panel/gettingstarted/module","gettingstarted_module_namespaceObject","Subject","registerDynamic","registry","newModule","locate","load","address","bust","defaultExtension","/*","authorization","loader","prism_default","slate_es","slate_react_es","sdk_namespaceObject","file_export_namespaceObject","flatten_namespaceObject","plugin_loader_i","flotDeps_1","fakeDep","import","light","dark","datasource_srv_DatasourceSrv","DatasourceSrv","dsConfig","pluginDef","Datasource","getAll","sources","addDataSourceVariables","getExploreSources","es","metricSources","metricSource","skipVariables","AngularLoader","compiledElem","AngularLoader_AngularLoader","utilSrv","$controller","bridgeSrv","angularLoader","pl","backend_srv","srv","singleton","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","redux","rootReducers","rootReducer","composeEnhancers","redux_thunk_es","dashAlerts","dashboardData","viewScope","localScope","callerScope","$emit","sidemenuOpen","playlistSrv","Constructor","enforceFocus","isPlaying","cookie","$$route","setViewModeBodyClass","drops","lastActivity","activeUser","inActiveTimeLimit","checkForInActiveUser","userActivityDetected","capture","passive","setInterval","clickAutoHide","clickAutoHideParent_1","stop","popover","grafanaAppDirective","VariableEditorCtrl","variableTypes","namePattern","refreshOptions","sortOptions","hideOptions","setMode","addVariable","sameName","validate","infoText","runQuery","optionsLimit","updateOptions","createVariableFromModel","updateTemplateData","datasourceTypes","old","oldIndex","removeVariable","showMoreOptions","editor_ctrl_VariableEditorCtrl","template_srv","TemplateSrv","grafanaVariables","builtIns","isNone","variableInitialized","luceneFormat","luceneEscape","escapedValues","distributeVariable","setGrafanaVariable","var1","var2","fmt2","var3","getAllValue","allValue","systemValue","fmt","fmt3","isAllValue","skipUrlSync","getValueForUrl","Edge","_linkTo","inputEdges","outputEdges","inputNode","outputNode","unlink","inode","onode","edges","dag_Node","Node","getEdgeFrom","getEdgeTo","getOptimizedInputEdges","toBeRemoved","edgeToRemove","createNode","createNodes","inputArr","outputArr","n_1","getNode","inputNodes","n_2","outputNodes","createEdge","VariableSrv","updateUrlParamsWithCurrentVariables","onTimeRangeUpdated","templating","initLock","processVariable","queryParams","previousOptions","dependsOn","otherVariable","dependencies","setValueFromUrl","urlValue","ctor","instantiate","updateSubmenuVisibility","variableUpdated","emitChangeEvents","createGraph","selectOptionsForCurrentValue","validateVariableSelectionState","setValue","currentOption","setOptionFromUrl","defaultText","dag_Graph","v1","v2","variable_srv_VariableSrv","IntervalVariable","auto_min","auto_count","updateAutoValue","setOptionAsCurrent","query_variable_QueryVariable","QueryVariable","useTags","updateOptionsFromMetricFindQuery","updateTags","metricNamesToVariableValues","addAllOption","sortVariableValues","sortType","reverseSort","toLower","supportsMulti","DatasourceVariable","datasource_variable_DatasourceVariable","CustomVariable","ConstantVariable","constant_variable_ConstantVariable","adhoc_variable_AdhocVariable","AdhocVariable","unescapeDelimiter","escapeDelimiter","setFilters","TextBoxVariable","TextBoxVariable_TextBoxVariable","factory","PluginEditCtrl","preUpdateHook","postUpdateHook","setNavModel","defaultTab","logos","large","author","pluginIcon","getPluginIcon","plug","initReadme","linkify","updateCmd","pinned","importDashboards","setPreUpdateHook","plugin_edit_ctrl_PluginEditCtrl","AppPageCtrl","initPage","pluginInfoCache","loadPluginInfo","app","appModel","pluginNav","plugin_page_ctrl_AppPageCtrl","import_list_DashImportListCtrl","DashImportListCtrl","importAll","importNext","installCmd","inputs","importedUri","imported","access","DataSourceEditCtrl","selectors_navModel","loadDatasourceTypes","getDatasourceById","initNewDatasourceModel","ds_edit_ctrl_defaults","gettingstarted","typeChanged","datasourceCreated","userChangedType","updateNav","currentPage","isEnterprise","buildNavModel","datasourceMeta","pluginInfo","updateFrontendSettings","done","saveChanges","editForm","readOnly","confirmDelete","ds_edit_ctrl_DataSourceEditCtrl","noDirectAccess","showAccessHelp","toggleAccessHelp","getSuggestUrls","suggestUrl","UnknownPanelCtrl","$templateCache","relativeTemplateUrlToAbs","loadPanelComponentInfo","componentInfo","class","panelCtrlPromise","module_UnknownPanelCtrl","importPluginModule","panelModule","templatePromise","cached","getTemplate","notFound","bindings","getPluginComponentDirective","directiveName","appendAndCompile","dsModule","panel-ctrl","dsMeta_1","ConfigCtrl","model_1","appModule","appEditCtrl","app-model","app-edit-ctrl","appModel_1","getModule","registerPluginComponent","pluginDirectiveLoader","dashboard_ctrl_DashboardCtrl","DashboardCtrl","keybindingSrv","alertingSrv","unsavedChangesSrv","dashboardViewStateSrv","editTab","getPanelContainer","setupDashboard","setupDashboardInternal","setCurrent","onInitFailed","processRepeats","autoFitPanels","dashboardViewState","setWindowTitleAndTheme","msg","fatal","loadedFallbackDashboard","templateVariableUpdated","windowTitlePrefix","showJsonEditor","getDashboard","onRemovingPanel","ask","onDestroy","AlertingSrv","history_srv_HistorySrv","HistorySrv","getHistoryList","calculateDiff","restoreDashboard","history_HistoryListCtrl","HistoryListCtrl","historySrv","appending","onDashboardSaved","resetFromSource","switchMode","addToLog","getLog","revisionSelectionChanged","revisions","canCompare","formatBasicDate","getDiff","newInfo","isNewLatest","new","baseInfo","diffType","revisions_1","rev","createdDateString","created","ageString","isLastPage","basic","restoreConfirm","reload","dashboard_loader_srv_DashboardLoaderSrv","DashboardLoaderSrv","_dashboardLoadFailed","isSnapshot","dashboardNotFound","_loadScriptedDashboard","isFolder","file","_executeScript","fromScript","scriptResult","Function","scriptFunc","deferred_1","titleTooltip","calendar","expires","DashNavCtrl","toggleSettings","toggleViewMode","shareDashboard","addPanel","dashnav_DashNavCtrl","submenu_SubmenuCtrl","SubmenuCtrl","annotationStateChanged","openEditView","SaveDashboardAsModalCtrl","isValidFolderSelection","hideControls","autoUpdate","onEnterFolderCreation","onExitFolderCreation","save_as_modal_template","SaveDashboardModalCtrl","saveVariables","saveTimerange","originalCurrent","timeChange","variableValueChange","isSaving","hasTimeChanged","hasVariableValuesChanged","saveForm","postSave","resetOriginalVariables","resetOriginalTime","save_modal_template","SaveProvisionedDashboardModalCtrl","dashboardJson","getJsonForClipboard","forCurrent","includeTemplateVars","modeSharePanel","tabs","modalTitle","absUrl","shareUrl","soloUrl","imageUrl","getLocalTimeZone","utcOffset","Intl","resolvedOptions","timeZone","getShareUrl","save_provisioned_modal_SaveProvisionedDashboardModalCtrl","ShareModalCtrl","share_snapshot_ctrl_ShareSnapshotCtrl","ShareSnapshotCtrl","timeoutSeconds","expireOptions","externalUrl","sharingButtonText","externalEnabled","external","originalUrl","saveSnapshot","scrubDashboard","cmdData","postUrl","snapshotUrl","saveExternalSnapshotRef","deleteKey","getSnapshotUrl","singlePanel","forEachPanel","deleteSnapshot","DashboardSrv","dashboard_model","handleSaveDashboardError","showSaveAsModal","provisioned","showDashboardProvisionedModal","makeEditable","showSaveModal","saveJSONDashboard","dashboard_srv_DashboardSrv","DashboardViewState","urlState","getQueryStringState","needsSync","serializeToUrl","fromRouteUpdated","toggleCollapsedPanelRow","syncState","collapsed","toggleRow","setViewMode","enterFullscreen","fullscreenPanel","leaveFullscreen","oldTimeRange","view_state_srv_DashboardViewState","ValidationSrv","rootName","validateNewDashboardName","validateNewFolderName","existingErrorMessage","nameLowerCased","hitTypes","hits_1","change_tracker_ChangeTracker","ChangeTracker","originalCopyDelay","originalPath","original","onbeforeunload","ignoreChanges","open_modal","fromFile","cleanDashboardFromIgnoredChanges","dashData","schemaVersion","iteration","repeatPanelId","hasChanges","originalTimepicker","currentTimepicker","discardChanges","gotoNext","baseLen","nextUrl","tracker","unsaved_changes_modal_template","UnsavedChangesModalCtrl","discard","openDropdown","timepicker","TimePickerCtrl","localeData","firstDayOfWeek","local","timeRaw","rangeString","absolute","fromJs","toDate","toJs","zoom","closeDropdown","editTimeRaw","timeOptions","refresh_intervals","applyCustom","absoluteFromChanged","getAbsoluteMomentForTimezone","absoluteToChanged","jsDate","setRelativeFilter","nowDelay","timepicker_TimePickerCtrl","$elem","$setValidity","parsed","upload_template","isDefined","btnText","wnd","File","FileReader","FileList","files","reader","readAsText","uploadDashboardDirective","DashboardExporter","makeExportable","cleanUpRepeats","requires","variableLookup","templateizeDatasourceUsage","refName","panelDef","processPanel","_h","_j","annotationDef","newObj","DashExportCtrl","exporter_DashboardExporter","saveJson","export_modal_DashExportCtrl","ExportDataModalCtrl","asRows","export_data_modal_ExportDataModalCtrl","AdHocFiltersCtrl","segmentChanged","updateVariableModel","filterIndex","hasFakes","ad_hoc_filters_template","ad_hoc_filters_AdHocFiltersCtrl","dashRepeatOptionDirective","repeat_option_template","optionChanged","repeat","repeatDirection","react_grid_layout","DashboardRow","openSettings","forceUpdate","removeRow","chevronClass","fa-chevron-down","fa-chevron-right","components_ScrollBar_ScrollBar","ScrollBar","handleRef","parentElement","setScrollTop","setScrollLeft","scrollLeft","dist_main","panelPluginInfo","handleCloseAddPanel","renderPanelItem","panelSizeChanged","panelPlugins","getPanelPlugins","getCopiedPanelPlugins","AddPanelPanel","hideFromList","small","copiedPanel","copiedPanelJson","copiedPanels","pluginCopy","filterPanels","onAddPanel","noCopiedPanelPlugins","filterChange","filterKeyPress","openCopy","openAdd","active active--panel","","panelTab","copiedPanelPlugins","copyClass","autoFocus","onKeyPress","onEditPanel","PanelHeader","panelHeaderClass","panel-header","grid-drag-handle","onViewPanel","DataPanel","isVisible","Done","Loading","resp","NotStarted","isFirstLoad","hasPropsChanged","refreshCounter","Fragment","loadingSpinner","defaultProps","PanelChrome_PanelChrome","PanelChrome","otherPanelInFullscreen","PanelComponent","PanelHeader_PanelHeader","DataPanel_DataPanel","QueriesTab","getAngularLoader","react_custom_scrollbars_lib","components_CustomScrollbar_CustomScrollbar","CustomScrollbar","customClassName","scrollProps","react_custom_scrollbars_lib_default","autoHeight","autoHeightMin","autoHeightMax","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","renderView","autoHide","autoHideTimeout","autoHideDuration","hideTracksWhenNotNeeded","viz-picker__item","viz-picker__item--selected","currentType","onTypeChanged","VizTypePicker","renderVizPlugin","PanelEditor","onChangeTab","renderQueriesTab","QueriesTab_QueriesTab","renderPanelOptions","pluginExports","PanelOptions","renderVizTab","VizTypePicker_VizTypePicker","activeTab","TabItem","ng-click","tabClasses","gf-tabs-link","DashboardPanel","specialPanels","onPluginTypeChanged","changeType","loadPlugin","onAngularPluginTypeChanged","renderRow","renderAddPanel","isSpecial","DashboardRow_DashboardRow","AddPanelPanel_AddPanelPanel","cleanUpAngularPanel","angularPanel","renderReactPanel","containerClass","panelWrapperClass","monitorWidth","onLayoutChange","onDragStop","onResize","onResizeStop","onWidthChange","isResizable","isDraggable","lastGridWidth","react_grid_layout_default","measureBeforeMount","containerPadding","useCSSTransforms","cols","rowHeight","draggableHandle","triggerForceUpdate","onViewModeChanged","DashboardGrid","buildLayout","panelMap","stringId","panelPos","newLayout_1","newPos","updateGridPos","resizeDone","oldItem","newItem","renderPanels","panelClasses","panel--fullscreen","panelElements","DashboardPanel_DashboardPanel","panelType","SizedReactLayoutGrid","RowOptionsCtrl","FolderPickerCtrl","validationSrv","loadInitialValue","permission","enableCreateNew","enableReset","initialTitle","createNewFolder","enterFolderCreation","$folder","newFolderNameChanged","newFolderNameTouched","newFolderName","hasValidationError","validationError","closeCreateFolder","cancelCreateFolder","exitFolderCreation","initialFolderId","resetFolder","rootFolder","folder_picker_FolderPickerCtrl","onCreateFolder","move_to_folder_MoveToFolderCtrl","MoveToFolderCtrl","settings_SettingsCtrl","SettingsCtrl","canSaveAs","buildSectionList","onRouteUpdated","canAdmin","sectionParams","viewId","openSaveAsModal","saveDashboardJson","onPostSave","hasUnsavedFolderChange","hideSettings","currentSection","sumBy","deleteDashboardConfirmed","getFolder","PanelLinksEditorCtrl","addLink","queryStr","uri","module_PanelLinksEditorCtrl","editLink","DashLinkEditorCtrl","saveLink","dashLink","asDropdown","anchor","anchorSanitized","sanitizeAnchor","$last","DashLinksContainerCtrl","currentDashId","buildLinks","linkDef","iconMap","updateDashLinks","generatedLinks","fillDropdown","searchHits","module_DashLinksContainerCtrl","SlideDown","PermissionList","permissions_DashboardPermissions","react_redux_es","ConnectedWrappedComponent","store","DashboardPermissions","onOpenAddPermissions","isAdding","onRemoveItem","removeDashboardPermission","updateDashboardPermission","addDashboardPermission","getDashboardPermissions","PermissionsInfo","in","AddPermission","onAddPermission","onCancel","onCancelAddPermission","onPermissionChanged","isFetching","folderInfo","FolderPageLoader","activeChildId","dashTab","FolderDashboardsCtrl","DashboardImportCtrl","nameExists","uidExists","autoGenerateUid","autoGenerateUidValue","gnetUrl","gnetId","checkGnetDashboard","__inputs","inputModel","setDatasourceOptions","inputsValid","titleChanged","uidChanged","inputValueChanged","titleTouched","hasNameValidationError","nameValidationError","hasUidValidationError","uidValidationError","dashUrl","importedUrl","loadJsonText","parseError","gnetError","gnetInfo","back","create_folder_ctrl_CreateFolderCtrl","CreateFolderCtrl","folder_dashboards_ctrl_FolderDashboardsCtrl","dashboard_import_ctrl_DashboardImportCtrl","PlaylistsCtrl","playlists","startUrl","removePlaylistConfirmed","playlist","removePlaylist","playlists_ctrl_PlaylistsCtrl","PlaylistSearchCtrl","prom","dashboardResult","tagResult","searchStarted","PlaylistSrv","cancelPromise","filteredParams","pickBy","playlistId","playlist_srv_PlaylistSrv","PlaylistEditCtrl","filteredDashboards","filteredTags","playlistItems","dashboardresult","tagresult","filterFoundPlaylistItems","playlistItem","listPlaylistItem","addPlaylistItem","addTagPlaylistItem","removePlaylistItem","listedPlaylistItem","savePlaylist","isPlaylistEmpty","movePlaylistItem","currentPosition","newPosition","movePlaylistItemUp","movePlaylistItemDown","playlist_edit_ctrl_PlaylistEditCtrl","grafanaRoutes","listItemClass","renderMenuItem","togglePanelStackPosition","parentsUntil","menuElem","menuScope","menuHtml","createMenuTemplate","targetClass","isDragged","dropdown","togglePanelMenu","mousedown","mouseup","panelHeader","$document","infoDrop","panelScrollbar","lastAlertState","hasAlertRule","panelContainer","panelContent","cornerInfoElem","updatePanelCornerInfo","cornerMode","transparent","__proto__","transparentLastState","lastHasAlertRule","setPanelFocus","panel_directive_module","SoloPanelCtrl","dashboardLoaderSrv","initPanelScope","solo_panel_ctrl_SoloPanelCtrl","panelEditorTab","dynamicDirectiveSrv","tabName","directiveCache","QueryRowCtrl","queryCtrl","toggleCollapse","toggleHideQuery","__collapsedQueryCache","collapsedText","canCollapse","duplicateQuery","query_editor_row_QueryRowCtrl","hasTextEditMode","QueryTroubleshooterCtrl","onRequestErrorEventListener","onRequestError","onRequestResponse","onRequestResponseEventListener","removeEventsListeners","stateChanged","toggleMocking","isMocking","getClipboardText","jsonExplorer","handleMocking","mockedData","mockedResponse","transformResponse","paramSerializer","jsonpCallbackParam","hasError","renderJsonExplorer","query_troubleshooter_template","query_troubleshooter_QueryTroubleshooterCtrl","jsonElem","json_explorer_JsonExplorer","showOrgsList","getUserTeams","getUser","showTeamsList","ProfileCtrl","oldTheme","profile_ctrl_ProfileCtrl","select_org_ctrl_SelectOrgCtrl","SelectOrgCtrl","changePassword","userForm","ChangePasswordCtrl","change_password_ctrl_ChangePasswordCtrl","NewOrgCtrl","newOrg","createOrg","new_org_ctrl_NewOrgCtrl","UserInviteCtrl","sendEmail","CreateTeamCtrl","OrgDetailsCtrl","getOrgInfo","orgForm","addressForm","PrefsControlCtrl","timezones","prefs","prefsForm","cmd","homeDashboardId","prefs_control_PrefsControlCtrl","admin_AdminListUsersCtrl","AdminListUsersCtrl","pages","perPage","getUsers","totalPages","showPaging","navigateToPage","admin_AdminEditUserCtrl","AdminEditUserCtrl","user_id","isGrafanaAdmin","setPassword","passwordForm","updatePermissions","orgUser","removeOrgUser","orgsSearchCache","searchOrgs","addOrgForm","orgInfo","loginOrEmail","admin_AdminListOrgsCtrl","getOrgs","AdminListOrgsCtrl","admin_AdminEditOrgCtrl","AdminEditOrgCtrl","getOrg","getOrgUsers","orgUsers","orgDetailsForm","updateOrgUser","admin_StyleGuideCtrl","StyleGuideCtrl","buttonNames","buttonSizes","switchTheme","AdminSettingsCtrl","AdminHomeCtrl","NotificationsEditCtrl_AlertNotificationEditCtrl","testSeverity","sendReminder","disableResolveMessage","autoResolve","uploadImage","getFrequencySuggestion","notifiers","notifier","getNotifierTemplateId","optionsTemplate","notifierTemplateId","AlertNotificationEditCtrl","theForm","testNotification","AlertNotificationsListCtrl","loadNotifications","SnapshotListCtrl","snapshots","removeSnapshotConfirmed","DashboardListCtrl","SnapshotListCtrl_SnapshotListCtrl","extensionsIndex","GrafanaApp","preBootModules","registerFunctions","ngModuleDependencies","useModule","$controllerProvider","$compileProvider","$filterProvider","$httpProvider","$provide","preAssignBindingsEnabled","debugInfoEnabled","useApplyAsync","$delegate","PasswordStrength_PasswordStrength","SideMenu_SideMenu","PageHeader","EmptyListCTA","animation","bootstrap","getRouteParamsId","getRouteParamsPage","133","getAlertRulesAsync","togglePauseAlertRule","loadAlertRules","getInvitees","getInviteesCount","getUsersSearchQuery","invitee","rbracket","buildParams","getLoadingNav","react__WEBPACK_IMPORTED_MODULE_1__","buttonIcon","buttonLink","buttonTitle","proTip","proTipLink","proTipLinkTitle","proTipTarget","app_core_utils_tags__WEBPACK_IMPORTED_MODULE_2__","tagStyle","sortByKeys","isPlainObject","sortedObject","dashboardModel","updateSchema","oldVersion","panelUpgrades","isBoolean","leftMin","leftMax","y_format","y_formats","y2_format","maxId_1","getNextPanelId","aliasYAxis","pulldowns","allFormat","mathExpr","asExpr","k_1","k_2","templateVariable","hideVariable","hideLabel","rightMin","rightMax","rightLogBase","rightYAxisLabel","leftLogBase","leftYAxisLabel","t2","threshold1","thresholdLine","t1","threshold1Color","threshold2","threshold2Color","sharedCrosshair","upgradeToGridLayout","yPos","nextRowId","collapse","showTitle","repeatIteration","rowGridHeight","getGridHeight","rowPanel","rowPanelModel","showRows","rowArea","dashboard_migration_RowArea","minSpan","getPanelPosition","RowArea","rowYPos","area","callOnce","startPlace","endPlace","dashboard_model_DashboardModel","revision","ensureListExist","panelData","initMeta","addBuiltInAnnotationQuery","found","showSettings","DashboardModel","nonPersistedProperties","originalTemplating","originalTime","timeRangeUpdated","changePanelType","panelA","panelB","panelsToRemove","repeatedByRow","pull","repeatPanel","cleanUpRowRepeats","rowPanels","processRowRepeats","rowPanelIndex","getRowPanels","getPanelRepeatClone","sourcePanel","valueIndex","sourcePanelIndex","getRowRepeatClone","sourceRowPanel","rowPanels_1","insertPos","updateRepeatedPanelIds","selectedOptions","getSelectedVariableOptions","minWidth","xPos","yOffset","repeatRow","variableOption","optionIndex","rowCopy","this_2","getRowHeight","panelBelowIndex","setScopedVars","insertPos_1","cloneRowPanel","_loop_2","positions","maxPos","maxBy","removePanels","submenuEnabled","yDiff","pushDownAmount","hasRepeat","eventName","cycleGraphTooltip","getRelativeTime","dashboard_migration_DashboardMigrator","currentGridHeight","visibleHeight","scaleFactor","DescriptionOption","isSelected","DescriptionPicker_DescriptionPicker","DescriptionPicker","optionsWithDesc","onSelected","161","make","normalize","clamp","extract","nodeName","lookupColors","aqua","azure","beige","black","blue","brown","cyan","darkblue","darkcyan","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkviolet","fuchsia","gold","green","indigo","khaki","lightblue","lightcyan","lightgreen","lightgrey","lightpink","lightyellow","lime","magenta","maroon","navy","olive","orange","pink","purple","violet","red","silver","white","yellow","Canvas","cls","getContext","G_vmlCanvasManager","initElement","context","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","_textSizeCache","flotTextSizeCache","Plot","data_","options_","noColumns","labelBoxBorderColor","backgroundOpacity","sorted","tickColor","autoscaleMargin","labelWidth","labelHeight","tickLength","alignTicksWithAxis","xaxes","horizontal","aboveData","labelMargin","axisMargin","markingsColor","markingsLineWidth","interaction","redrawOverlayInterval","surface","overlay","plotOffset","plotWidth","plotHeight","processRawData","drawBackground","drawSeries","shutdown","executeHooks","hook","parseData","neededColors","maxIndex","sc","colorPool","colorPoolSize","variation","colori","getOrCreateAxis","axisNumber","fillInSeriesOptions","topSentry","POSITIVE_INFINITY","bottomSentry","NEGATIVE_INFINITY","fakeInfinity","updateAxis","datamin","datamax","allAxes","_","used","number","autoscale","insertSteps","nullify","xmin","ymin","xmax","ymax","processData","coord","grep","canvasToAxisCoords","redrawTimeout","maxWidth","legacyStyles","getTextInfo","allocateAxisBoxFirstPhase","lw","isXAxis","innermost","outermost","reserveSpace","lh","eventSectionPadding","box","setupGrid","showGrid","axisOpts","widen","setRange","allocatedAxes","snaped","setupTickGeneration","setTicks","snapRangeToTicks","measureTickLabels","minMargin","margins","adjustLayoutForThingsStickingOut","identity","it","setTransformationHelpers","tick","halign","valign","addText","ascending","rowStarted","fragments","div","prependTo","noTicks","sqrt","maxDec","minTickSize","tickGenerator","NaN","decimal","otherAxis","niceTicks","extraDec","ts","oticks","changed","getColorOrGradient","fillRect","drawGrid","extractRange","bw","bc","getAxes","xrange","yrange","xequal","yequal","subPixel","lineTo","xoff","yoff","plotLine","xoffset","yoffset","axisx","axisy","y2","prevx","prevy","sw","getFillStyle","areaOpen","ypos","segmentStart","segmentEnd","x1old","x2old","plotLineArea","drawSeriesLines","barLeft","fillStyleCallback","barRight","drawBar","drawSeriesBars","plotPoints","drawLeft","drawRight","drawTop","drawBottom","filloptions","seriesColor","removeData","resize","initPlugins","axisOptions","axisCount","fontDefaults","variant","weight","lineHeight","x2axis","coloredAreas","coloredAreasColor","parseOptions","existing","setupCanvases","isSelecting","seriesFilter","canvasY","maxDistance","mouseActiveRadius","mx","my","maxy","maxx","dx","dist","dy","smallestDistance","findNearbyItem","canvasX","hi","pointRadius","drawBarHighlight","spec","parentNode","_textCache","layerKey","getTextLayer","layerCache","styleKey","styleCache","rendered","textContainer","textStyle","max-width","text-align","166","167","172","updateNavIndex","191","DEFAULT_RANGE","getExploreUrl","parseUrlState","serializeStateToUrlParam","app_core_utils_url__WEBPACK_IMPORTED_MODULE_1__","panelTargets","exploreDatasource","exploreTargets","mixedExploreDatasource_1","exploreState","decodeURI","194","219","djb2","TAG_COLORS","TAG_BORDER_COLORS","app_core_config__WEBPACK_IMPORTED_MODULE_0__","getTeamLoadingNav","pageName","memberCount","UserPicker","react_select_lib_Async__WEBPACK_IMPORTED_MODULE_2__","react_select_lib_Async__WEBPACK_IMPORTED_MODULE_2___default","_PickerOption__WEBPACK_IMPORTED_MODULE_3__","lodash__WEBPACK_IMPORTED_MODULE_4__","app_core_services_backend_srv__WEBPACK_IMPORTED_MODULE_5__","_ResetStyles__WEBPACK_IMPORTED_MODULE_6__","_IndicatorsContainer__WEBPACK_IMPORTED_MODULE_7__","_NoOptionsMessage__WEBPACK_IMPORTED_MODULE_8__","debouncedSearch","trailing","loadOptions","getOptionValue","DeleteButton","showConfirm","showDeleteButton","onClickConfirm","onConfirmDelete","onClickDelete","onClickCancel","228","react__WEBPACK_IMPORTED_MODULE_0___default","231","userAvatarUrl","teamAvatarUrl","ItemDescription","PermissionListItem","inheritedFromRoot","inherited","setClassNameHelper","ItemAvatar","acl","PermissionList_DisabledPermissionListItem","DisabledPermissionListItem","colSpan","232","PickerOption","TeamPicker_TeamPicker","TeamPicker","AddPermission_AddPermissions","AddPermissions","User","Team","Editor","Viewer","onUserSelected","onTeamSelected","onSubmit","getCleanState","View","data-save-permission","showPermissionLevels","235","getPlugins","getLayoutMode","floorInBase","monthNames","dayNames","strftime","leftPad","pad","getHours","getMonth","getDate","hours12","getMinutes","getSeconds","getFullYear","getDay","makeUtcWrapper","sourceObj","sourceMethod","targetObj","targetMethod","addProxyMethod","dateGenerator","timezoneJS","setTimezone","timeUnitSize","second","hour","day","month","quarter","specMonths","baseSpec","specQuarters","axisName","minSize","year","setSeconds","setMinutes","setHours","setMonth","setFullYear","minute","carry","hourCode","twelveHourClock","24","GRID_CELL_HEIGHT","GRID_CELL_VMARGIN","GRID_COLUMN_COUNT","REPEAT_DIR_VERTICAL","DEFAULT_PANEL_SPAN","DEFAULT_ROW_HEIGHT","MIN_PANEL_HEIGHT","LS_PANEL_COPY_KEY","25","parseDateMath","parseString","mathString","ISO_8601","dateTime","numFrom","30","classnames__WEBPACK_IMPORTED_MODULE_2__","classnames__WEBPACK_IMPORTED_MODULE_2___default","app_core_app_events__WEBPACK_IMPORTED_MODULE_3__","SelectNav","customCss","defaultSelectedItem","htmlFor","hideFromTabs","Tabs","shouldComponentUpdate","renderTitle","breadcrumbsResult","subType","getNavModel","node_1","getSearchQuery","getAlertRuleItems","setSearchMemberQuery","loadTeamMembers","removeTeamMember","updateTeam","deleteTeam","teamMembersLoaded","teamMembers","teamGroups","loadTeams","perpage","teamsLoaded","loadTeam","teamLoaded","getStore","addTeamMember","loadTeamGroups","teamGroupsLoaded","addTeamGroup","groupId","36","Store","localStorage","ret","setObject","removeItem","OrgRole","PermissionLevel","AclTarget","dashboardAclTargets","DataSourcePermissionLevel","Query","Edit","Admin","38","tickStep","e10","e5","e2","step0","step1","getFlotTickSize","getFlotRange","panelMin","panelMax","getFlotTickDecimals","grafanaTimeFormat","getStringPrecision","dotIndex","angularModules","coreModule","angular__WEBPACK_IMPORTED_MODULE_0__","angular__WEBPACK_IMPORTED_MODULE_0___default","43","DEFAULT_ANNOTATION_COLOR","OK_COLOR","ALERTING_COLOR","NO_DATA_COLOR","REGION_FILL_ALPHA","sortedColors","tinycolor2__WEBPACK_IMPORTED_MODULE_1__","tinycolor2__WEBPACK_IMPORTED_MODULE_1___default","hexToHsl","toHsl","hslToHex","toHexString","hexColors","hslColors","sortedHSLColors","PALETTE_ROWS","zip","sortColorsByHue","49","updateLocation","51","pluginMeta","include","setDataSourcesSearchQuery","setDataSourcesLayoutMode","setDataSourceTypeSearchQuery","loadDataSources","loadDataSource","addDataSource","loadDataSourceTypes","dataSourceLoaded","dataSourceTypesLoaded","dataSourcesLoaded","dataSourceMetaLoaded","newInstance","nameExits","nameHasSuffix","getNewName","incrementLastDigit","getLastDigit","findNewName","digit","lodash__WEBPACK_IMPORTED_MODULE_1__","lodash__WEBPACK_IMPORTED_MODULE_1___default","app_core_core_module__WEBPACK_IMPORTED_MODULE_2__","app_core_store__WEBPACK_IMPORTED_MODULE_3__","ContextSrv","sidemenuSmallBreakpoint","orgRole","528","savedhandlers","updateSelection","getSelection","onselectstart","ondrag","setSelectionPos","selectionIsSane","triggerSelectedEvent","c1","c2","anyUsed","preventEvent","setSelection","shape","strokeRect","allseries","findMatchingSeries","px","py","intery","qx","qy","otherps","otherpoints","newpoints","withlines","withbottom","withsteps","keyOffset","accumulateOffset","fromgap","LoadingState","NullValueMode","530","stackBases","stackSums","getStackSums","_data","data_len","sums","key_idx","value_idx","newPoints","531","segmentIntersection","top_left_x","top_left_y","top_right_x","top_right_y","bottom_left_x","bottom_left_y","bottom_right_x","bottom_right_y","top_delta_x","top_delta_y","bottom_delta_x","bottom_delta_y","otherseries","openPolygon","assert","end_i","start_i","equal","intersect","intersectionPoint","topTraversal","right_i","bottomTraversal","findNextStart","fillBelowTo","findBelowSeries","validateInput","532","locked","unlockCrosshair","mouseout","adj","drawX","drawY","plotDashes","dashOnLength","dashOffLength","dashRemainder","dashOn","dashOffset","ax1","ay1","ay2","lineSegmentOffset","deltaX","deltaY","remainder","ax2","segmentLength","ysign","534","Gauge","gaugeOptions","getLogger","debug","calculateAutoValues","gaugeOptionsi","cellWidth","calculateAngle","endAngle","drawArcWithShadow","cx","cy","rd1","rd2","lc","fc","drawArc","clip","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","drawThresholdValue","cellLayout","drawText","thresholdLabelMargin","toRad","textOptions","calculateLayout","hMargin","vMargin","cellHeight","square","cellMargin","labelFontSize","maxRadiusH","dAngle","heightRatioV","outerRadiusV","valueMargin","maxRadiusV","outerRadius","gaugeOuterHeight","calculateCellLayout","blank","offsetY","drawCellBackground","drawGauge","getColor","a2","drawThreshold","a1","drawLable","drawValue","drawThresholdValues","debugOptions","Logger","vAlign","updateLegendValues","app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_0__","app_core_utils_ticks__WEBPACK_IMPORTED_MODULE_1__","lodash__WEBPACK_IMPORTED_MODULE_2__","lodash__WEBPACK_IMPORTED_MODULE_2___default","aliasOrRegex","seriesAlias","formater","getDataMinMax","tickDecimalsPlusOne","TimeSeries","valueFormater","isMsResolutionNeeded","overrides","matchSeriesOverride","react_hot_loader__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_3__","app_core_selectors_navModel__WEBPACK_IMPORTED_MODULE_4__","_state_apis__WEBPACK_IMPORTED_MODULE_5__","app_core_components_PageHeader_PageHeader__WEBPACK_IMPORTED_MODULE_6__","getServerStats","activeUsers","app_core_components_PageHeader_PageHeader__WEBPACK_IMPORTED_MODULE_4__","_AlertRuleItem__WEBPACK_IMPORTED_MODULE_5__","app_core_app_events__WEBPACK_IMPORTED_MODULE_6__","app_core_actions__WEBPACK_IMPORTED_MODULE_7__","app_core_selectors_navModel__WEBPACK_IMPORTED_MODULE_8__","_state_actions__WEBPACK_IMPORTED_MODULE_9__","_state_selectors__WEBPACK_IMPORTED_MODULE_10__","stateFilters","fetchRules","onSearchQueryChange","onStateFilterChanged","getStateFilter","alertStateFilterOption","onTogglePause","mapDispatchToProps","classnames_bind__WEBPACK_IMPORTED_MODULE_3__","classnames_bind__WEBPACK_IMPORTED_MODULE_3___default","AlertRuleItem","react_highlight_words__WEBPACK_IMPORTED_MODULE_2___default","highlightClassName","textToHighlight","searchWords","fa-play","fa-pause","ruleUrl","stateAge","setFolderTitle","newTitle","loadFolderPermissions","LoadFolderPermissions","loadFolder","app_core_actions__WEBPACK_IMPORTED_MODULE_2__","_navModel__WEBPACK_IMPORTED_MODULE_3__","toUpdateItem","updateFolderPermission","itemToUpdate","itemsToUpdate","removeFolderPermission","itemToDelete","addFolderPermission","getFolderPermissions","react_redux__WEBPACK_IMPORTED_MODULE_2__","lodash__WEBPACK_IMPORTED_MODULE_3__","_TeamMembers__WEBPACK_IMPORTED_MODULE_7__","_TeamSettings__WEBPACK_IMPORTED_MODULE_8__","_TeamGroupSync__WEBPACK_IMPORTED_MODULE_9__","_state_actions__WEBPACK_IMPORTED_MODULE_10__","_state_navModel__WEBPACK_IMPORTED_MODULE_12__","app_core_selectors_navModel__WEBPACK_IMPORTED_MODULE_13__","_core_selectors_location__WEBPACK_IMPORTED_MODULE_14__","fetchTeam","getCurrentPage","lodash__WEBPACK_IMPORTED_MODULE_3___default","renderPage","PageTypes","Members","syncEnabled","isSyncEnabled","Settings","react_hot_loader__WEBPACK_IMPORTED_MODULE_4__","teamLoadingNav","_state_selectors__WEBPACK_IMPORTED_MODULE_11__","app_core_components_Picker_UserPicker__WEBPACK_IMPORTED_MODULE_4__","app_core_components_DeleteButton_DeleteButton__WEBPACK_IMPORTED_MODULE_5__","app_core_components_TagFilter_TagBadge__WEBPACK_IMPORTED_MODULE_6__","_state_actions__WEBPACK_IMPORTED_MODULE_7__","_state_selectors__WEBPACK_IMPORTED_MODULE_8__","newTeamMember","onAddUserToTeam","TeamMembers","renderLabels","member","onRemoveMember","onToggleAdding","app_core_components_Animations_SlideDown__WEBPACK_IMPORTED_MODULE_3__","app_core_components_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_4__","_state_actions__WEBPACK_IMPORTED_MODULE_5__","_state_selectors__WEBPACK_IMPORTED_MODULE_6__","newGroupId","onAddGroup","onRemoveGroup","removeTeamGroup","TeamGroupSync","fetchTeamGroups","isNewGroupValid","renderGroup","headerTooltip","react_hot_loader__WEBPACK_IMPORTED_MODULE_3__","_state_actions__WEBPACK_IMPORTED_MODULE_8__","_state_selectors__WEBPACK_IMPORTED_MODULE_9__","app_core_selectors_navModel__WEBPACK_IMPORTED_MODULE_10__","fetchTeams","renderTeam","teamUrl","renderEmptyList","app_core_components_EmptyListCTA_EmptyListCTA__WEBPACK_IMPORTED_MODULE_6__","renderList","teamsCount","renderTeamList","574","react_dom_server__WEBPACK_IMPORTED_MODULE_2__","react_dom_server__WEBPACK_IMPORTED_MODULE_2___default","app_types__WEBPACK_IMPORTED_MODULE_5__","app_core_selectors_navModel__WEBPACK_IMPORTED_MODULE_6__","_state_selectors__WEBPACK_IMPORTED_MODULE_7__","app_core_components_Animations_SlideDown__WEBPACK_IMPORTED_MODULE_10__","app_core_components_PageLoader_PageLoader__WEBPACK_IMPORTED_MODULE_11__","app_core_config__WEBPACK_IMPORTED_MODULE_13__","app_core_app_events__WEBPACK_IMPORTED_MODULE_14__","onAddApiKey","rootPath","origin","modalTemplate","renderToString","_ApiKeysAddedModal__WEBPACK_IMPORTED_MODULE_12__","newApiKey","initialApiKeyState","fetchApiKeys","onDeleteApiKey","renderTable","onApiKeyStateUpdate","ApiKeyStateProps","Name","getApiKeys","react__WEBPACK_IMPORTED_MODULE_0__","app_core_components_OrgActionBar_OrgActionBar__WEBPACK_IMPORTED_MODULE_5__","app_core_components_PageLoader_PageLoader__WEBPACK_IMPORTED_MODULE_6__","_PluginList__WEBPACK_IMPORTED_MODULE_7__","_core_selectors_navModel__WEBPACK_IMPORTED_MODULE_9__","fetchPlugins","loadPlugins","setPluginsLayoutMode","setPluginsSearchQuery","onSetLayoutMode","linkButton","579","onTitleChange","onSave","saveFolder","onDelete","app_core_app_events__WEBPACK_IMPORTED_MODULE_5__","_state_navModel__WEBPACK_IMPORTED_MODULE_8__","app_core_components_PermissionList_AddPermission__WEBPACK_IMPORTED_MODULE_11__","app_core_components_PermissionList_PermissionsInfo__WEBPACK_IMPORTED_MODULE_12__","581","_core_components_PageHeader_PageHeader__WEBPACK_IMPORTED_MODULE_4__","app_core_components_PageLoader_PageLoader__WEBPACK_IMPORTED_MODULE_5__","_core_components_OrgActionBar_OrgActionBar__WEBPACK_IMPORTED_MODULE_6__","_core_components_EmptyListCTA_EmptyListCTA__WEBPACK_IMPORTED_MODULE_7__","_DataSourcesList__WEBPACK_IMPORTED_MODULE_8__","_core_selectors_navModel__WEBPACK_IMPORTED_MODULE_10__","fetchDataSources","emptyListModel","582","onDataSourceTypeClicked","app_core_app_events__WEBPACK_IMPORTED_MODULE_10__","_state_actions__WEBPACK_IMPORTED_MODULE_11__","_core_selectors_navModel__WEBPACK_IMPORTED_MODULE_12__","_state_selectors__WEBPACK_IMPORTED_MODULE_13__","updateUser","updatedUser","markdownRenderer","remarkable__WEBPACK_IMPORTED_MODULE_4___default","externalUserMngInfoHtml","showInvites","fetchInvitees","loadUsers","loadInvitees","_InviteesTable__WEBPACK_IMPORTED_MODULE_9__","onRevokeInvite","_UsersTable__WEBPACK_IMPORTED_MODULE_8__","onRoleChange","onRemoveUser","setUsersSearchQuery","removeUser","revokeInvite","584","_state_actions__WEBPACK_IMPORTED_MODULE_4__","_state_selectors__WEBPACK_IMPORTED_MODULE_5__","UsersActionBar","pendingInvitesCount","onShowInvites","marginLeft","usersButtonStyle","pendingInvitesButtonStyle","InviteesTable","copyUrlRef","execCommand","copyToClipboard","onImport","importDashboard","onRemove","removeDashboard","pageId","_dashboard_state_actions__WEBPACK_IMPORTED_MODULE_10__","textAlign","importedRevision","buttonText","603","bind_default","DataSourcesListItem","LayoutSelector","DataSourcesList_DataSourcesList","DataSourcesList","listStyle","card-section","card-list-layout-grid","Grid","card-list-layout-list","List","datasources_DataSourcesListItem","plugins_PluginListItem","Label","selectors_location","selectors","onChangeName","onChangeEmail","TeamSettings","onUpdate","TeamSettings_TeamSettings","loadPluginDashboards","_core_services_backend_srv__WEBPACK_IMPORTED_MODULE_1__","pluginsLoaded","pluginDashboardsLoaded","66","getSearchMemberQuery","getTeamGroups","getTeamsCount","getTeam","getTeams","getTeamMembers","67","usersLoaded","inviteesLoaded","73","TableModel","74","LayoutModes","onLayoutModeChanged","76","PanelModel","app_core_utils_emitter__WEBPACK_IMPORTED_MODULE_0__","notPersistedProperties","sizeChanged","hasRefreshed","newPanelTitle","playlist_timespan","unsaved_changes_warning","commit","grafanaBootData","823","support","transition","transEndEventNames","MozTransition","OTransition","transitionEnd","$el","clearMenus","$this","Dropdown","is","documentElement","$items","isActive","eq","noConflict","Modal","delegate","isShown","Event","isDefaultPrevented","hideWithTransition","hideModal","removeBackdrop","$backdrop","doAnimate","eventIn","eventOut","triggers","fixTitle","delay","hoverState","$tip","actualWidth","actualHeight","hasContent","setContent","getPosition","offsetHeight","tp","applyPlacement","replaceArrow","removeWithAnimation","$e","getTitle","$arrow","disable","toggleEnabled","Tab","$ul","previous","relatedTarget","activate","$active","Typeahead","highlighter","$menu","listen","shown","sorter","beginswith","caseSensitive","caseInsensitive","eventSupported","mouseenter","isSupported","suppressKeyPressRepeat","inArray","focused","mousedover","Affix","affix","checkPosition","scrollHeight","offsetBottom","offsetTop","unpin","affixed","$spy","824","isStaticPositioned","cssprop","currentStyle","getComputedStyle","getStyle","elBCR","offsetParentEl","docDomEl","offsetParent","parentOffsetEl","clientTop","offsetParentBCR","clientLeft","boundingClientRect","getBoundingClientRect","positionElements","hostEl","targetEl","positionStr","appendToBody","hostElPos","targetElHeight","targetElPos","pos0","positionStrParts","pos1","targetElWidth","shiftWidth","shiftHeight","$log","$locale","orderByFilter","SPECIAL_CHARACTERS_REGEXP","parsers","formatCodeToRegex","yyyy","yy","DATETIME_FORMATS","MONTH","MMM","SHORTMONTH","MM","dd","EEEE","DAY","EEE","SHORTDAY","HH","hh","H","mm","minutes","sss","milliseconds","ss","baseDate","createParser","parser","dt","getMilliseconds","warn","constant","formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","datepickerMode","minMode","maxMode","showWeeks","startingDay","yearRange","minDate","shortcutPropagation","$attrs","dateFilter","datepickerConfig","$datepickerSuppressError","noop","refreshView","uniqueId","random","initDate","activeDate","$modelValue","$invalid","dateObject","activeDateId","ngModelCtrl_","$render","$viewValue","_refreshView","isDisabled","createDateObject","compare","customClass","arrays","fixTimeZone","months","toggleMode","13","32","33","34","35","37","39","40","focusElement","altKey","handleKeyDown","dateDisabled","datepickerCtrl","ctrls","DAYS_IN_MONTH","getDaysInMonth","getISO8601WeekNumber","checkDate","setDate","firstDayOfMonth","difference","numDisplayedFromPreviousMonth","firstDate","days","startDate","dates","getDates","abbr","weekNumbers","thursdayIndex","numWeeks","curWeek","date1","date2","years","getStartingYear","datepickerPopup","datepickerPopupTemplateUrl","datepickerTemplateUrl","html5Types","datetime-local","currentText","clearText","closeText","closeOnDateSelection","showButtonBar","onOpenFocus","$position","dateParser","datepickerPopupConfig","datepickerAppendToBody","watchData","maxDate","isHtml5DateInput","$observe","newDateFormat","popupEl","cameltoDash","$1","ng-model","ng-change","template-url","datepickerEl","datepickerOptions","getAttribute","$$parserName","ngRequired","dateSelection","contains","inputKeydownBind","documentClickBind","today","$popup","after","$strapConfig","bsTooltip","_tooltip","bsTypeahead","matchAll","826","./af","./af.js","./ar","./ar-dz","./ar-dz.js","./ar-kw","./ar-kw.js","./ar-ly","./ar-ly.js","./ar-ma","./ar-ma.js","./ar-sa","./ar-sa.js","./ar-tn","./ar-tn.js","./ar.js","./az","./az.js","./be","./be.js","./bg","./bg.js","./bm","./bm.js","./bn","./bn.js","./bo","./bo.js","./br","./br.js","./bs","./bs.js","./ca","./ca.js","./cs","./cs.js","./cv","./cv.js","./cy","./cy.js","./da","./da.js","./de","./de-ch","./de-ch.js","./de.js","./dv","./dv.js","./el","./el.js","./en-au","./en-au.js","./en-ca","./en-ca.js","./en-gb","./en-gb.js","./en-ie","./en-ie.js","./en-il","./en-il.js","./en-nz","./en-nz.js","./es-us.js","./es.js","./et.js","./eu","./eu.js","./fa","./fa.js","./fi","./fi.js","./fo","./fo.js","./fr","./fr-ca","./fr-ca.js","./fr-ch","./fr-ch.js","./fr.js","./fy","./fy.js","./gd.js","./gl","./gl.js","./gom-latn","./gom-latn.js","./gu.js","./he","./hi","./hi.js","./hr","./hr.js","./hu","./hy-am","./hy-am.js","./id.js","./is.js","./it","./ja","./ja.js","./jv.js","./ka","./ka.js","./kk","./kk.js","./km","./kn","./kn.js","./ko.js","./ky","./ky.js","./lb.js","./lo","./lo.js","./lt.js","./lv","./lv.js","./me.js","./mi","./mi.js","./mk.js","./ml","./ml.js","./mn","./mn.js","./mr","./ms","./ms-my","./ms-my.js","./ms.js","./mt","./my","./my.js","./nb","./ne","./ne.js","./nl","./nl-be","./nl-be.js","./nl.js","./nn","./nn.js","./pa-in","./pa-in.js","./pl.js","./pt","./pt-br.js","./pt.js","./ro","./ro.js","./ru","./sd","./sd.js","./se","./se.js","./si","./si.js","./sk","./sl","./sl.js","./sq.js","./sr","./sr-cyrl","./sr.js","./ss","./sv","./sv.js","./sw","./sw.js","./ta","./ta.js","./te.js","./tet","./tet.js","./tg","./tg.js","./th","./tl-ph","./tl-ph.js","./tlh","./tlh.js","./tr","./tzl","./tzl.js","./tzm-latn","./tzm-latn.js","./tzm.js","./ug-cn.js","./uk","./ur","./ur.js","./uz","./uz-latn","./uz-latn.js","./vi","./vi.js","./x-pseudo.js","./yo","./zh-cn","./zh-hk","./zh-hk.js","./zh-tw","webpackContext","webpackContextResolve","834","tagClass","freeInput","maxTags","onTagExists","fadeIn","itemsArray","isSelect","hasAttribute","objectItems","placeholderText","$container","makeOptionItemFunction","TagsInput","dontPushVal","tagName","pushVal","$existingTag","htmlEncode","findInputWrapper","before","removeAll","isEnabled","nodeValue","makeOptionFunction","processItems","texts","success","$inputWrapper","doGetCaretPosition","$prevTag","$nextTag","confirmKeys","inputSize","elt","arg1","arg2","retVal","htmlEncodeContainer","iCaretPos","oField","oSel","./core/components/manage_dashboards/manage_dashboards.html","./core/components/navbar/navbar.html","./core/components/search/search.html","./core/components/search/search_results.html","./features/admin/partials/stats.html","./features/admin/partials/styleguide.html","./features/admin/partials/users.html","./features/alerting/partials/alert_howto.html","./features/dashboard/dashnav/dashnav.html","./features/dashboard/export/export_modal.html","./features/dashboard/export_data/export_data_modal.html","./features/dashboard/folder_picker/folder_picker.html","./features/dashboard/partials/folder_permissions.html","./features/dashboard/partials/folder_settings.html","./features/dashboard/partials/inspector.html","./features/dashboard/partials/row_options.html","./features/manage-dashboards/partials/snapshot_list.html","./features/org/partials/change_password.html","./features/org/partials/create_team.html","./features/org/partials/invite.html","./features/panel/partials/query_editor_row.html","./features/panel/partials/soloPanel.html","./features/playlist/partials/playlist.html","./features/playlist/partials/playlist_search.html","./features/plugins/partials/update_instructions.html","./features/templating/partials/editor.html","./partials/confirm_modal.html","./partials/dashboard.html","./partials/signup_invited.html","./partials/signup_step2.html","./partials/valueSelectDropdown.html","./plugins/datasource/cloudwatch/partials/annotations.editor.html","./plugins/datasource/elasticsearch/partials/metric_agg.html","./plugins/datasource/elasticsearch/partials/query.editor.html","./plugins/datasource/grafana-live/partials/query.editor.html","./plugins/datasource/grafana/partials/annotations.editor.html","./plugins/datasource/influxdb/partials/query.editor.html","./plugins/datasource/logging/partials/config.html","./plugins/datasource/mssql/partials/annotations.editor.html","./plugins/datasource/mssql/partials/config.html","./plugins/datasource/opentsdb/partials/query.editor.html","./plugins/datasource/postgres/partials/annotations.editor.html","./plugins/datasource/postgres/partials/config.html","./plugins/datasource/postgres/partials/query.editor.html","./plugins/datasource/stackdriver/partials/query.editor.html","./plugins/datasource/stackdriver/partials/query.filter.html","./plugins/datasource/testdata/partials/query.editor.html","./plugins/panel/alertlist/editor.html","./plugins/panel/graph/tab_display.html","./plugins/panel/graph/tab_legend.html","./plugins/panel/heatmap/module.html","./plugins/panel/heatmap/partials/axes_editor.html","./plugins/panel/table/column_options.html","./plugins/panel/table/editor.html","./plugins/panel/table/module.html","./plugins/panel/text/editor.html","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","871","872","defaultStyle","overflow","transitionStyles","exited","maxHeight","entering","entered","890","891","892","893","894","895","896","897","898","899","90","loadingText","900","901","902","903","904","905","906","907","908","909","912","914","918","924","_plugins_state_actions__WEBPACK_IMPORTED_MODULE_3__","loadDashboardPermissions","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","955","956","957","958","959","960","961","962","963","964","965","967","968","970","971","972","975","acequire","isDark","cssText","importCssString","99","getDataSources","getDataSourceTypes","getDataSourcesSearchQuery","getDataSourcesCount","getDataSource","dataSourceId","getDataSourcesLayoutMode","993","styleElement","domEvents","attachEvent","styleSheet","setCss","outlineFixer","995","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","defaultOpts","beforeShow","showInput","allowEmpty","clickoutFiresChange","showInitial","showPalette","showPaletteOnly","hideAfterPaletteSelect","togglePaletteOnly","localStorageKey","maxSelectionSize","cancelText","chooseText","togglePaletteLessText","noColorSelectedText","preferredFormat","containerClassName","replacerClassName","palette","selectionPalette","IE","navigator","userAgent","rgbaSupport","replaceInput","gradientFix","tiny","equals","swatchStyle","toFilter","formattedString","callbacks","callbackContext","instanceOptions","showSelectionPalette","wait","reflow","visible","isDragging","dragHeight","dragHelperHeight","slideHeight","alphaWidth","alphaSlideHelperWidth","currentHue","currentSaturation","currentAlpha","paletteArray","paletteLookup","shiftMovementDirection","ownerDocument","boundElement","markup","pickerContainer","dragHelper","slider","slideHelper","alphaSliderInner","alphaSlider","textInput","paletteContainer","initialColorContainer","cancelButton","clearButton","toggleButton","isInput","shouldReplace","offsetElement","replacer","initialColor","colorOnShow","isInputTypeColor","applyOptions","togglePaletteMoreText","rgb","updateSelectionPaletteFromStorage","oldPalette","addColorToSelectionPalette","drawPalette","paletteTemplate","currentColor","unique","getUniqueSelectionPalette","drawInitial","dragStart","dragStop","draggingClass","setFromTextInput","updateOriginalInput","spectrums","onkeydown","clickout","updateUI","newHsv","ignoreFormatChange","currentPreferredFormat","getFormat","fromRatio","updateHelperLocations","flatColor","dragger","realColor","displayColor","previewElement","realHex","realRgb","realAlpha","gradientType","gradient","alphaSlideHelper","dragY","dragWidth","dragX","alphaX","slideY","slideHelperHeight","fireCallback","picker","dpWidth","dpHeight","inputHeight","docElem","viewWidth","viewHeight","getOffset","revert","chooseButton","draggable","oldDragX","oldDragY","furtherFromX","paletteElementClick","ignore","paletteEvent","spect","optionName","optionValue","onmove","onstart","onstop","duringDragEvents","prevent","returnValue","documentMode","t0","touches","hasTouch","inputTypeColorSupport","extra","loadOpts","colorInput","_cachedResult","localization","processNativeColorInputs","colorInputs","trimLeft","trimRight","tinyCounter","math","mathMin","mathMax","mathRandom","ok","stringInputToObject","bound01","rgbToRgb","convertToPercentage","mod","hsvToRgb","hue2rgb","hslToRgb","boundAlpha","inputToRGB","_originalInput","_roundA","mathRound","_format","_gradientType","_r","_tc_id","rgbToHsl","rgbToHsv","rgbToHex","allow3Char","pad2","rgbaToHex","convertDecimalToHex","desaturate","hsl","clamp01","saturate","greyscale","lighten","brighten","toRgb","darken","spin","hue","complement","triad","tetrad","splitcomplement","analogous","monochromatic","hsv","modification","isLight","_ok","getOriginalInput","getAlpha","getBrightness","toHsv","toHsvString","toHslString","toHex","toHex8","toHex8String","toPercentageRgb","toPercentageRgbString","toName","hexNames","secondColor","hex8String","secondHex8String","formatSet","hasAlpha","needsAlphaFormat","_applyModification","_applyCombination","color1","color2","mix","w1","rgb2","w2","rgba","rgb1","readability","brightnessA","colorDiff","brightness","brightnessB","isReadable","mostReadable","baseColor","colorList","bestColor","bestIsReadable","readable","bestScore","aliceblue","antiquewhite","aquamarine","bisque","blanchedalmond","blueviolet","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","darkgoldenrod","darkgray","darkslateblue","darkslategray","darkturquoise","deeppink","deepskyblue","dimgray","dodgerblue"],"mappings":"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A,aAKA,OAJAK,SACA7nD,EAAAoC,OAAA,WACAlC,EAAA6nD,eAAA/nD,EAAA0iD,QAIA,GAAAoF,EAAAN,SAAA,iBACAxnD,EAAAoC,OAAA,WACAxB,EAAAhvB,EAAAinE,KAAA34C,EAAA8nD,WAAAC,UAAAjoD,EAAAkoD,OAAAloD,EAAAkoD,OAAA,GACAhoD,EAAAqnD,uBAIA,GAAAO,EAAAN,SAAA,kBACAxnD,EAAAoC,OAAA,WACAxB,EAAAhvB,EAAAinE,KAAA34C,EAAA8nD,WAAAC,UAAAjoD,EAAAkoD,OAAAloD,EAAAkoD,OAAA,GACAhoD,EAAAqnD,uBAIA,GAAAO,EAAAN,SAAA,uBACA,IAAA9F,EAAAxhD,EAAAgW,WAAAosC,WAAAI,EAAA12D,IAAAnd,MACC6yE,KAAA7mD,YACAisD,EAAAhwE,MACA8uB,QAAAv5B,EAAA6B,OACAolB,SAAA,cACAq/B,WAAA,iCACAzsB,SAAA,+FAAAw7C,EAAA7yE,KAAA,+BAAA+3E,KAAAlF,EAAA7mD,aAAA,6BACAuf,OAAA,UAIA/pC,OAAAmgC,KAAA,sFAAAkyC,EAAA12D,IAAAnd,KAAA,aAaAy4E,QDDG,EAAApiD,UAAA,kBAAAijD,MCKH,EAAAjjD,UAAA,qBAAAkjD,YAYJC,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OAEI,OAEN,OACE,uHAiBD,OAEK,OAEC,OAC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","file":"app.39672500eb4e5affa679.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({\"4\":\"explore\"}[chunkId]||chunkId) + \".\" + \"39672500eb4e5affa679\" + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\thead.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"public/build/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1315,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { EventEmitter } from 'eventemitter3';\r\n\r\nexport class Emitter {\r\n  emitter: any;\r\n\r\n  constructor() {\r\n    this.emitter = new EventEmitter();\r\n  }\r\n\r\n  emit(name, data?) {\r\n    this.emitter.emit(name, data);\r\n  }\r\n\r\n  on(name, handler, scope?) {\r\n    this.emitter.on(name, handler);\r\n\r\n    if (scope) {\r\n      const unbind = scope.$on('$destroy', () => {\r\n        this.emitter.off(name, handler);\r\n        unbind();\r\n      });\r\n    }\r\n  }\r\n\r\n  removeAllListeners(evt?) {\r\n    this.emitter.removeAllListeners(evt);\r\n  }\r\n\r\n  off(name, handler) {\r\n    this.emitter.off(name, handler);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { components } from 'react-select';\r\n\r\nexport const IndicatorsContainer = props => {\r\n  const isOpen = props.selectProps.menuIsOpen;\r\n  return (\r\n    <components.IndicatorsContainer {...props}>\r\n      <span\r\n        className={`gf-form-select-box__select-arrow ${isOpen ? `gf-form-select-box__select-arrow--reversed` : ''}`}\r\n      />\r\n    </components.IndicatorsContainer>\r\n  );\r\n};\r\n\r\nexport default IndicatorsContainer;\r\n","import React from 'react';\r\nimport { components } from 'react-select';\r\nimport { OptionProps } from 'react-select/lib/components/Option';\r\n\r\nexport interface Props {\r\n  children: Element;\r\n}\r\n\r\nexport const PickerOption = (props: OptionProps<any>) => {\r\n  const { children, className } = props;\r\n  return (\r\n    <components.Option {...props}>\r\n      <div className={`description-picker-option__button btn btn-link ${className}`}>{children}</div>\r\n    </components.Option>\r\n  );\r\n};\r\n\r\nexport default PickerOption;\r\n","export default {\r\n  clearIndicator: () => ({}),\r\n  container: () => ({}),\r\n  control: () => ({}),\r\n  dropdownIndicator: () => ({}),\r\n  group: () => ({}),\r\n  groupHeading: () => ({}),\r\n  indicatorsContainer: () => ({}),\r\n  indicatorSeparator: () => ({}),\r\n  input: () => ({}),\r\n  loadingIndicator: () => ({}),\r\n  loadingMessage: () => ({}),\r\n  menu: () => ({}),\r\n  menuList: () => ({}),\r\n  multiValue: () => ({}),\r\n  multiValueLabel: () => ({}),\r\n  multiValueRemove: () => ({}),\r\n  noOptionsMessage: () => ({}),\r\n  option: () => ({}),\r\n  placeholder: () => ({}),\r\n  singleValue: () => ({}),\r\n  valueContainer: () => ({}),\r\n};\r\n","import _ from 'lodash';\r\nimport moment from 'moment';\r\nimport * as dateMath from './datemath';\r\n\r\nconst spans = {\r\n  s: { display: 'second' },\r\n  m: { display: 'minute' },\r\n  h: { display: 'hour' },\r\n  d: { display: 'day' },\r\n  w: { display: 'week' },\r\n  M: { display: 'month' },\r\n  y: { display: 'year' },\r\n};\r\n\r\nconst rangeOptions = [\r\n  { from: 'now/d', to: 'now/d', display: 'Today', section: 2 },\r\n  { from: 'now/d', to: 'now', display: 'Today so far', section: 2 },\r\n  { from: 'now/w', to: 'now/w', display: 'This week', section: 2 },\r\n  { from: 'now/w', to: 'now', display: 'This week so far', section: 2 },\r\n  { from: 'now/M', to: 'now/M', display: 'This month', section: 2 },\r\n  { from: 'now/M', to: 'now', display: 'This month so far', section: 2 },\r\n  { from: 'now/y', to: 'now/y', display: 'This year', section: 2 },\r\n  { from: 'now/y', to: 'now', display: 'This year so far', section: 2 },\r\n\r\n  { from: 'now-1d/d', to: 'now-1d/d', display: 'Yesterday', section: 1 },\r\n  {\r\n    from: 'now-2d/d',\r\n    to: 'now-2d/d',\r\n    display: 'Day before yesterday',\r\n    section: 1,\r\n  },\r\n  {\r\n    from: 'now-7d/d',\r\n    to: 'now-7d/d',\r\n    display: 'This day last week',\r\n    section: 1,\r\n  },\r\n  { from: 'now-1w/w', to: 'now-1w/w', display: 'Previous week', section: 1 },\r\n  { from: 'now-1M/M', to: 'now-1M/M', display: 'Previous month', section: 1 },\r\n  { from: 'now-1y/y', to: 'now-1y/y', display: 'Previous year', section: 1 },\r\n\r\n  { from: 'now-5m', to: 'now', display: 'Last 5 minutes', section: 3 },\r\n  { from: 'now-15m', to: 'now', display: 'Last 15 minutes', section: 3 },\r\n  { from: 'now-30m', to: 'now', display: 'Last 30 minutes', section: 3 },\r\n  { from: 'now-1h', to: 'now', display: 'Last 1 hour', section: 3 },\r\n  { from: 'now-3h', to: 'now', display: 'Last 3 hours', section: 3 },\r\n  { from: 'now-6h', to: 'now', display: 'Last 6 hours', section: 3 },\r\n  { from: 'now-12h', to: 'now', display: 'Last 12 hours', section: 3 },\r\n  { from: 'now-24h', to: 'now', display: 'Last 24 hours', section: 3 },\r\n\r\n  { from: 'now-2d', to: 'now', display: 'Last 2 days', section: 0 },\r\n  { from: 'now-7d', to: 'now', display: 'Last 7 days', section: 0 },\r\n  { from: 'now-30d', to: 'now', display: 'Last 30 days', section: 0 },\r\n  { from: 'now-90d', to: 'now', display: 'Last 90 days', section: 0 },\r\n  { from: 'now-6M', to: 'now', display: 'Last 6 months', section: 0 },\r\n  { from: 'now-1y', to: 'now', display: 'Last 1 year', section: 0 },\r\n  { from: 'now-2y', to: 'now', display: 'Last 2 years', section: 0 },\r\n  { from: 'now-5y', to: 'now', display: 'Last 5 years', section: 0 },\r\n];\r\n\r\nconst absoluteFormat = 'MMM D, YYYY HH:mm:ss';\r\n\r\nconst rangeIndex = {};\r\n_.each(rangeOptions, frame => {\r\n  rangeIndex[frame.from + ' to ' + frame.to] = frame;\r\n});\r\n\r\nexport function getRelativeTimesList(timepickerSettings, currentDisplay) {\r\n  const groups = _.groupBy(rangeOptions, (option: any) => {\r\n    option.active = option.display === currentDisplay;\r\n    return option.section;\r\n  });\r\n\r\n  // _.each(timepickerSettings.time_options, (duration: string) => {\r\n  //   let info = describeTextRange(duration);\r\n  //   if (info.section) {\r\n  //     groups[info.section].push(info);\r\n  //   }\r\n  // });\r\n\r\n  return groups;\r\n}\r\n\r\nfunction formatDate(date) {\r\n  return date.format(absoluteFormat);\r\n}\r\n\r\n// handles expressions like\r\n// 5m\r\n// 5m to now/d\r\n// now/d to now\r\n// now/d\r\n// if no to <expr> then to now is assumed\r\nexport function describeTextRange(expr: any) {\r\n  const isLast = expr.indexOf('+') !== 0;\r\n  if (expr.indexOf('now') === -1) {\r\n    expr = (isLast ? 'now-' : 'now') + expr;\r\n  }\r\n\r\n  let opt = rangeIndex[expr + ' to now'];\r\n  if (opt) {\r\n    return opt;\r\n  }\r\n\r\n  if (isLast) {\r\n    opt = { from: expr, to: 'now' };\r\n  } else {\r\n    opt = { from: 'now', to: expr };\r\n  }\r\n\r\n  const parts = /^now([-+])(\\d+)(\\w)/.exec(expr);\r\n  if (parts) {\r\n    const unit = parts[3];\r\n    const amount = parseInt(parts[2], 10);\r\n    const span = spans[unit];\r\n    if (span) {\r\n      opt.display = isLast ? 'Last ' : 'Next ';\r\n      opt.display += amount + ' ' + span.display;\r\n      opt.section = span.section;\r\n      if (amount > 1) {\r\n        opt.display += 's';\r\n      }\r\n    }\r\n  } else {\r\n    opt.display = opt.from + ' to ' + opt.to;\r\n    opt.invalid = true;\r\n  }\r\n\r\n  return opt;\r\n}\r\n\r\nexport function describeTimeRange(range) {\r\n  const option = rangeIndex[range.from.toString() + ' to ' + range.to.toString()];\r\n  if (option) {\r\n    return option.display;\r\n  }\r\n\r\n  if (moment.isMoment(range.from) && moment.isMoment(range.to)) {\r\n    return formatDate(range.from) + ' to ' + formatDate(range.to);\r\n  }\r\n\r\n  if (moment.isMoment(range.from)) {\r\n    const toMoment = dateMath.parse(range.to, true);\r\n    return formatDate(range.from) + ' to ' + toMoment.fromNow();\r\n  }\r\n\r\n  if (moment.isMoment(range.to)) {\r\n    const from = dateMath.parse(range.from, false);\r\n    return from.fromNow() + ' to ' + formatDate(range.to);\r\n  }\r\n\r\n  if (range.to.toString() === 'now') {\r\n    const res = describeTextRange(range.from);\r\n    return res.display;\r\n  }\r\n\r\n  return range.from.toString() + ' to ' + range.to.toString();\r\n}\r\n","import { Emitter } from './utils/emitter';\r\n\r\nconst appEvents = new Emitter();\r\nexport default appEvents;\r\n","import React from 'react';\r\nimport withTooltip from './withTooltip';\r\nimport { Target } from 'react-popper';\r\n\r\ninterface TooltipProps {\r\n  tooltipSetState: (prevState: object) => void;\r\n}\r\n\r\nclass Tooltip extends React.Component<TooltipProps, any> {\r\n  constructor(props) {\r\n    super(props);\r\n    this.showTooltip = this.showTooltip.bind(this);\r\n    this.hideTooltip = this.hideTooltip.bind(this);\r\n  }\r\n\r\n  showTooltip() {\r\n    const { tooltipSetState } = this.props;\r\n    tooltipSetState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        show: true,\r\n      };\r\n    });\r\n  }\r\n\r\n  hideTooltip() {\r\n    const { tooltipSetState } = this.props;\r\n    tooltipSetState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        show: false,\r\n      };\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Target className=\"popper__target\" onMouseOver={this.showTooltip} onMouseOut={this.hideTooltip}>\r\n        {this.props.children}\r\n      </Target>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withTooltip(Tooltip);\r\n","import React from 'react';\r\nimport { Manager, Popper, Arrow } from 'react-popper';\r\n\r\ninterface IwithTooltipProps {\r\n  placement?: string;\r\n  content: string | ((props: any) => JSX.Element);\r\n  className?: string;\r\n}\r\n\r\nexport default function withTooltip(WrappedComponent) {\r\n  return class extends React.Component<IwithTooltipProps, any> {\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.setState = this.setState.bind(this);\r\n      this.state = {\r\n        placement: this.props.placement || 'auto',\r\n        show: false,\r\n      };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n      if (nextProps.placement && nextProps.placement !== this.state.placement) {\r\n        this.setState(prevState => {\r\n          return {\r\n            ...prevState,\r\n            placement: nextProps.placement,\r\n          };\r\n        });\r\n      }\r\n    }\r\n\r\n    renderContent(content) {\r\n      if (typeof content === 'function') {\r\n        // If it's a function we assume it's a React component\r\n        const ReactComponent = content;\r\n        return <ReactComponent />;\r\n      }\r\n      return content;\r\n    }\r\n\r\n    render() {\r\n      const { content, className } = this.props;\r\n\r\n      return (\r\n        <Manager className={`popper__manager ${className || ''}`}>\r\n          <WrappedComponent {...this.props} tooltipSetState={this.setState} />\r\n          {this.state.show ? (\r\n            <Popper placement={this.state.placement} className=\"popper\">\r\n              {this.renderContent(content)}\r\n              <Arrow className=\"popper__arrow\" />\r\n            </Popper>\r\n          ) : null}\r\n        </Manager>\r\n      );\r\n    }\r\n  };\r\n}\r\n","import { ThunkAction } from 'redux-thunk';\r\nimport { getBackendSrv } from 'app/core/services/backend_srv';\r\nimport { StoreState, ApiKey } from 'app/types';\r\n\r\nexport enum ActionTypes {\r\n  LoadApiKeys = 'LOAD_API_KEYS',\r\n  SetApiKeysSearchQuery = 'SET_API_KEYS_SEARCH_QUERY',\r\n}\r\n\r\nexport interface LoadApiKeysAction {\r\n  type: ActionTypes.LoadApiKeys;\r\n  payload: ApiKey[];\r\n}\r\n\r\nexport interface SetSearchQueryAction {\r\n  type: ActionTypes.SetApiKeysSearchQuery;\r\n  payload: string;\r\n}\r\n\r\nexport type Action = LoadApiKeysAction | SetSearchQueryAction;\r\n\r\ntype ThunkResult<R> = ThunkAction<R, StoreState, undefined, Action>;\r\n\r\nconst apiKeysLoaded = (apiKeys: ApiKey[]): LoadApiKeysAction => ({\r\n  type: ActionTypes.LoadApiKeys,\r\n  payload: apiKeys,\r\n});\r\n\r\nexport function addApiKey(apiKey: ApiKey, openModal: (key: string) => void): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const result = await getBackendSrv().post('/api/auth/keys', apiKey);\r\n    dispatch(setSearchQuery(''));\r\n    dispatch(loadApiKeys());\r\n    openModal(result.key);\r\n  };\r\n}\r\n\r\nexport function loadApiKeys(): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const response = await getBackendSrv().get('/api/auth/keys');\r\n    dispatch(apiKeysLoaded(response));\r\n  };\r\n}\r\n\r\nexport function deleteApiKey(id: number): ThunkResult<void> {\r\n  return async dispatch => {\r\n    getBackendSrv()\r\n      .delete('/api/auth/keys/' + id)\r\n      .then(dispatch(loadApiKeys()));\r\n  };\r\n}\r\n\r\nexport const setSearchQuery = (searchQuery: string): SetSearchQueryAction => ({\r\n  type: ActionTypes.SetApiKeysSearchQuery,\r\n  payload: searchQuery,\r\n});\r\n","import _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nconst kbn: any = {};\r\n\r\nkbn.valueFormats = {};\r\n\r\nkbn.regexEscape = value => {\r\n  return value.replace(/[\\\\^$*+?.()|[\\]{}\\/]/g, '\\\\$&');\r\n};\r\n\r\n///// HELPER FUNCTIONS /////\r\n\r\nkbn.round_interval = interval => {\r\n  switch (true) {\r\n    // 0.015s\r\n    case interval < 15:\r\n      return 10; // 0.01s\r\n    // 0.035s\r\n    case interval < 35:\r\n      return 20; // 0.02s\r\n    // 0.075s\r\n    case interval < 75:\r\n      return 50; // 0.05s\r\n    // 0.15s\r\n    case interval < 150:\r\n      return 100; // 0.1s\r\n    // 0.35s\r\n    case interval < 350:\r\n      return 200; // 0.2s\r\n    // 0.75s\r\n    case interval < 750:\r\n      return 500; // 0.5s\r\n    // 1.5s\r\n    case interval < 1500:\r\n      return 1000; // 1s\r\n    // 3.5s\r\n    case interval < 3500:\r\n      return 2000; // 2s\r\n    // 7.5s\r\n    case interval < 7500:\r\n      return 5000; // 5s\r\n    // 12.5s\r\n    case interval < 12500:\r\n      return 10000; // 10s\r\n    // 17.5s\r\n    case interval < 17500:\r\n      return 15000; // 15s\r\n    // 25s\r\n    case interval < 25000:\r\n      return 20000; // 20s\r\n    // 45s\r\n    case interval < 45000:\r\n      return 30000; // 30s\r\n    // 1.5m\r\n    case interval < 90000:\r\n      return 60000; // 1m\r\n    // 3.5m\r\n    case interval < 210000:\r\n      return 120000; // 2m\r\n    // 7.5m\r\n    case interval < 450000:\r\n      return 300000; // 5m\r\n    // 12.5m\r\n    case interval < 750000:\r\n      return 600000; // 10m\r\n    // 12.5m\r\n    case interval < 1050000:\r\n      return 900000; // 15m\r\n    // 25m\r\n    case interval < 1500000:\r\n      return 1200000; // 20m\r\n    // 45m\r\n    case interval < 2700000:\r\n      return 1800000; // 30m\r\n    // 1.5h\r\n    case interval < 5400000:\r\n      return 3600000; // 1h\r\n    // 2.5h\r\n    case interval < 9000000:\r\n      return 7200000; // 2h\r\n    // 4.5h\r\n    case interval < 16200000:\r\n      return 10800000; // 3h\r\n    // 9h\r\n    case interval < 32400000:\r\n      return 21600000; // 6h\r\n    // 1d\r\n    case interval < 86400000:\r\n      return 43200000; // 12h\r\n    // 1w\r\n    case interval < 604800000:\r\n      return 86400000; // 1d\r\n    // 3w\r\n    case interval < 1814400000:\r\n      return 604800000; // 1w\r\n    // 6w\r\n    case interval < 3628800000:\r\n      return 2592000000; // 30d\r\n    default:\r\n      return 31536000000; // 1y\r\n  }\r\n};\r\n\r\nkbn.secondsToHms = seconds => {\r\n  const numyears = Math.floor(seconds / 31536000);\r\n  if (numyears) {\r\n    return numyears + 'y';\r\n  }\r\n  const numdays = Math.floor((seconds % 31536000) / 86400);\r\n  if (numdays) {\r\n    return numdays + 'd';\r\n  }\r\n  const numhours = Math.floor(((seconds % 31536000) % 86400) / 3600);\r\n  if (numhours) {\r\n    return numhours + 'h';\r\n  }\r\n  const numminutes = Math.floor((((seconds % 31536000) % 86400) % 3600) / 60);\r\n  if (numminutes) {\r\n    return numminutes + 'm';\r\n  }\r\n  const numseconds = Math.floor((((seconds % 31536000) % 86400) % 3600) % 60);\r\n  if (numseconds) {\r\n    return numseconds + 's';\r\n  }\r\n  const nummilliseconds = Math.floor(seconds * 1000.0);\r\n  if (nummilliseconds) {\r\n    return nummilliseconds + 'ms';\r\n  }\r\n\r\n  return 'less than a millisecond'; //'just now' //or other string you like;\r\n};\r\n\r\nkbn.secondsToHhmmss = seconds => {\r\n  const strings = [];\r\n  const numhours = Math.floor(seconds / 3600);\r\n  const numminutes = Math.floor((seconds % 3600) / 60);\r\n  const numseconds = Math.floor((seconds % 3600) % 60);\r\n  numhours > 9 ? strings.push('' + numhours) : strings.push('0' + numhours);\r\n  numminutes > 9 ? strings.push('' + numminutes) : strings.push('0' + numminutes);\r\n  numseconds > 9 ? strings.push('' + numseconds) : strings.push('0' + numseconds);\r\n  return strings.join(':');\r\n};\r\n\r\nkbn.to_percent = (nr, outof) => {\r\n  return Math.floor(nr / outof * 10000) / 100 + '%';\r\n};\r\n\r\nkbn.addslashes = str => {\r\n  str = str.replace(/\\\\/g, '\\\\\\\\');\r\n  str = str.replace(/\\'/g, \"\\\\'\");\r\n  str = str.replace(/\\\"/g, '\\\\\"');\r\n  str = str.replace(/\\0/g, '\\\\0');\r\n  return str;\r\n};\r\n\r\nkbn.interval_regex = /(\\d+(?:\\.\\d+)?)(ms|[Mwdhmsy])/;\r\n\r\n// histogram & trends\r\nkbn.intervals_in_seconds = {\r\n  y: 31536000,\r\n  M: 2592000,\r\n  w: 604800,\r\n  d: 86400,\r\n  h: 3600,\r\n  m: 60,\r\n  s: 1,\r\n  ms: 0.001,\r\n};\r\n\r\nkbn.calculateInterval = (range, resolution, lowLimitInterval) => {\r\n  let lowLimitMs = 1; // 1 millisecond default low limit\r\n  let intervalMs;\r\n\r\n  if (lowLimitInterval) {\r\n    if (lowLimitInterval[0] === '>') {\r\n      lowLimitInterval = lowLimitInterval.slice(1);\r\n    }\r\n    lowLimitMs = kbn.interval_to_ms(lowLimitInterval);\r\n  }\r\n\r\n  intervalMs = kbn.round_interval((range.to.valueOf() - range.from.valueOf()) / resolution);\r\n  if (lowLimitMs > intervalMs) {\r\n    intervalMs = lowLimitMs;\r\n  }\r\n\r\n  return {\r\n    intervalMs: intervalMs,\r\n    interval: kbn.secondsToHms(intervalMs / 1000),\r\n  };\r\n};\r\n\r\nkbn.describe_interval = str => {\r\n  const matches = str.match(kbn.interval_regex);\r\n  if (!matches || !_.has(kbn.intervals_in_seconds, matches[2])) {\r\n    throw new Error('Invalid interval string, expecting a number followed by one of \"Mwdhmsy\"');\r\n  } else {\r\n    return {\r\n      sec: kbn.intervals_in_seconds[matches[2]],\r\n      type: matches[2],\r\n      count: parseInt(matches[1], 10),\r\n    };\r\n  }\r\n};\r\n\r\nkbn.interval_to_ms = str => {\r\n  const info = kbn.describe_interval(str);\r\n  return info.sec * 1000 * info.count;\r\n};\r\n\r\nkbn.interval_to_seconds = str => {\r\n  const info = kbn.describe_interval(str);\r\n  return info.sec * info.count;\r\n};\r\n\r\nkbn.query_color_dot = (color, diameter) => {\r\n  return (\r\n    '<div class=\"icon-circle\" style=\"' +\r\n    ['display:inline-block', 'color:' + color, 'font-size:' + diameter + 'px'].join(';') +\r\n    '\"></div>'\r\n  );\r\n};\r\n\r\nkbn.slugifyForUrl = str => {\r\n  return str\r\n    .toLowerCase()\r\n    .replace(/[^\\w ]+/g, '')\r\n    .replace(/ +/g, '-');\r\n};\r\n\r\nkbn.stringToJsRegex = str => {\r\n  if (str[0] !== '/') {\r\n    return new RegExp('^' + str + '$');\r\n  }\r\n\r\n  const match = str.match(new RegExp('^/(.*?)/(g?i?m?y?)$'));\r\n  return new RegExp(match[1], match[2]);\r\n};\r\n\r\nkbn.toFixed = (value, decimals) => {\r\n  if (value === null) {\r\n    return '';\r\n  }\r\n\r\n  const factor = decimals ? Math.pow(10, Math.max(0, decimals)) : 1;\r\n  const formatted = String(Math.round(value * factor) / factor);\r\n\r\n  // if exponent return directly\r\n  if (formatted.indexOf('e') !== -1 || value === 0) {\r\n    return formatted;\r\n  }\r\n\r\n  // If tickDecimals was specified, ensure that we have exactly that\r\n  // much precision; otherwise default to the value's own precision.\r\n  if (decimals != null) {\r\n    const decimalPos = formatted.indexOf('.');\r\n    const precision = decimalPos === -1 ? 0 : formatted.length - decimalPos - 1;\r\n    if (precision < decimals) {\r\n      return (precision ? formatted : formatted + '.') + String(factor).substr(1, decimals - precision);\r\n    }\r\n  }\r\n\r\n  return formatted;\r\n};\r\n\r\nkbn.toFixedScaled = (value, decimals, scaledDecimals, additionalDecimals, ext) => {\r\n  if (scaledDecimals === null) {\r\n    return kbn.toFixed(value, decimals) + ext;\r\n  } else {\r\n    return kbn.toFixed(value, scaledDecimals + additionalDecimals) + ext;\r\n  }\r\n};\r\n\r\nkbn.roundValue = (num, decimals) => {\r\n  if (num === null) {\r\n    return null;\r\n  }\r\n  const n = Math.pow(10, decimals);\r\n  const formatted = (n * num).toFixed(decimals);\r\n  return Math.round(parseFloat(formatted)) / n;\r\n};\r\n\r\n///// FORMAT FUNCTION CONSTRUCTORS /////\r\n\r\nkbn.formatBuilders = {};\r\n\r\n// Formatter which always appends a fixed unit string to the value. No\r\n// scaling of the value is performed.\r\nkbn.formatBuilders.fixedUnit = unit => {\r\n  return (size, decimals) => {\r\n    if (size === null) {\r\n      return '';\r\n    }\r\n    return kbn.toFixed(size, decimals) + ' ' + unit;\r\n  };\r\n};\r\n\r\n// Formatter which scales the unit string geometrically according to the given\r\n// numeric factor. Repeatedly scales the value down by the factor until it is\r\n// less than the factor in magnitude, or the end of the array is reached.\r\nkbn.formatBuilders.scaledUnits = (factor, extArray) => {\r\n  return (size, decimals, scaledDecimals) => {\r\n    if (size === null) {\r\n      return '';\r\n    }\r\n\r\n    let steps = 0;\r\n    const limit = extArray.length;\r\n\r\n    while (Math.abs(size) >= factor) {\r\n      steps++;\r\n      size /= factor;\r\n\r\n      if (steps >= limit) {\r\n        return 'NA';\r\n      }\r\n    }\r\n\r\n    if (steps > 0 && scaledDecimals !== null) {\r\n      decimals = scaledDecimals + 3 * steps;\r\n    }\r\n\r\n    return kbn.toFixed(size, decimals) + extArray[steps];\r\n  };\r\n};\r\n\r\n// Extension of the scaledUnits builder which uses SI decimal prefixes. If an\r\n// offset is given, it adjusts the starting units at the given prefix; a value\r\n// of 0 starts at no scale; -3 drops to nano, +2 starts at mega, etc.\r\nkbn.formatBuilders.decimalSIPrefix = (unit, offset) => {\r\n  let prefixes = ['n', 'µ', 'm', '', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'];\r\n  prefixes = prefixes.slice(3 + (offset || 0));\r\n  const units = prefixes.map(p => {\r\n    return ' ' + p + unit;\r\n  });\r\n  return kbn.formatBuilders.scaledUnits(1000, units);\r\n};\r\n\r\n// Extension of the scaledUnits builder which uses SI binary prefixes. If\r\n// offset is given, it starts the units at the given prefix; otherwise, the\r\n// offset defaults to zero and the initial unit is not prefixed.\r\nkbn.formatBuilders.binarySIPrefix = (unit, offset) => {\r\n  const prefixes = ['', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi', 'Ei', 'Zi', 'Yi'].slice(offset);\r\n  const units = prefixes.map(p => {\r\n    return ' ' + p + unit;\r\n  });\r\n  return kbn.formatBuilders.scaledUnits(1024, units);\r\n};\r\n\r\n// Currency formatter for prefixing a symbol onto a number. Supports scaling\r\n// up to the trillions.\r\nkbn.formatBuilders.currency = symbol => {\r\n  const units = ['', 'K', 'M', 'B', 'T'];\r\n  const scaler = kbn.formatBuilders.scaledUnits(1000, units);\r\n  return (size, decimals, scaledDecimals) => {\r\n    if (size === null) {\r\n      return '';\r\n    }\r\n    const scaled = scaler(size, decimals, scaledDecimals);\r\n    return symbol + scaled;\r\n  };\r\n};\r\n\r\nkbn.formatBuilders.simpleCountUnit = symbol => {\r\n  const units = ['', 'K', 'M', 'B', 'T'];\r\n  const scaler = kbn.formatBuilders.scaledUnits(1000, units);\r\n  return (size, decimals, scaledDecimals) => {\r\n    if (size === null) {\r\n      return '';\r\n    }\r\n    const scaled = scaler(size, decimals, scaledDecimals);\r\n    return scaled + ' ' + symbol;\r\n  };\r\n};\r\n\r\n///// VALUE FORMATS /////\r\n\r\n// Dimensionless Units\r\nkbn.valueFormats.none = kbn.toFixed;\r\nkbn.valueFormats.short = kbn.formatBuilders.scaledUnits(1000, [\r\n  '',\r\n  ' K',\r\n  ' Mil',\r\n  ' Bil',\r\n  ' Tri',\r\n  ' Quadr',\r\n  ' Quint',\r\n  ' Sext',\r\n  ' Sept',\r\n]);\r\nkbn.valueFormats.dB = kbn.formatBuilders.fixedUnit('dB');\r\n\r\nkbn.valueFormats.percent = (size, decimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n  return kbn.toFixed(size, decimals) + '%';\r\n};\r\n\r\nkbn.valueFormats.percentunit = (size, decimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n  return kbn.toFixed(100 * size, decimals) + '%';\r\n};\r\n\r\n/* Formats the value to hex. Uses float if specified decimals are not 0.\r\n * There are two options, one with 0x, and one without */\r\n\r\nkbn.valueFormats.hex = (value, decimals) => {\r\n  if (value == null) {\r\n    return '';\r\n  }\r\n  return parseFloat(kbn.toFixed(value, decimals))\r\n    .toString(16)\r\n    .toUpperCase();\r\n};\r\n\r\nkbn.valueFormats.hex0x = (value, decimals) => {\r\n  if (value == null) {\r\n    return '';\r\n  }\r\n  const hexString = kbn.valueFormats.hex(value, decimals);\r\n  if (hexString.substring(0, 1) === '-') {\r\n    return '-0x' + hexString.substring(1);\r\n  }\r\n  return '0x' + hexString;\r\n};\r\n\r\nkbn.valueFormats.sci = (value, decimals) => {\r\n  return value.toExponential(decimals);\r\n};\r\n\r\nkbn.valueFormats.locale = (value, decimals) => {\r\n  return value.toLocaleString(undefined, { maximumFractionDigits: decimals });\r\n};\r\n\r\n// Currencies\r\nkbn.valueFormats.currencyUSD = kbn.formatBuilders.currency('$');\r\nkbn.valueFormats.currencyGBP = kbn.formatBuilders.currency('£');\r\nkbn.valueFormats.currencyEUR = kbn.formatBuilders.currency('€');\r\nkbn.valueFormats.currencyJPY = kbn.formatBuilders.currency('¥');\r\nkbn.valueFormats.currencyRUB = kbn.formatBuilders.currency('₽');\r\nkbn.valueFormats.currencyUAH = kbn.formatBuilders.currency('₴');\r\nkbn.valueFormats.currencyBRL = kbn.formatBuilders.currency('R$');\r\nkbn.valueFormats.currencyDKK = kbn.formatBuilders.currency('kr');\r\nkbn.valueFormats.currencyISK = kbn.formatBuilders.currency('kr');\r\nkbn.valueFormats.currencyNOK = kbn.formatBuilders.currency('kr');\r\nkbn.valueFormats.currencySEK = kbn.formatBuilders.currency('kr');\r\nkbn.valueFormats.currencyCZK = kbn.formatBuilders.currency('czk');\r\nkbn.valueFormats.currencyCHF = kbn.formatBuilders.currency('CHF');\r\nkbn.valueFormats.currencyPLN = kbn.formatBuilders.currency('zł');\r\nkbn.valueFormats.currencyBTC = kbn.formatBuilders.currency('฿');\r\n\r\n// Data (Binary)\r\nkbn.valueFormats.bits = kbn.formatBuilders.binarySIPrefix('b');\r\nkbn.valueFormats.bytes = kbn.formatBuilders.binarySIPrefix('B');\r\nkbn.valueFormats.kbytes = kbn.formatBuilders.binarySIPrefix('B', 1);\r\nkbn.valueFormats.mbytes = kbn.formatBuilders.binarySIPrefix('B', 2);\r\nkbn.valueFormats.gbytes = kbn.formatBuilders.binarySIPrefix('B', 3);\r\n\r\n// Data (Decimal)\r\nkbn.valueFormats.decbits = kbn.formatBuilders.decimalSIPrefix('b');\r\nkbn.valueFormats.decbytes = kbn.formatBuilders.decimalSIPrefix('B');\r\nkbn.valueFormats.deckbytes = kbn.formatBuilders.decimalSIPrefix('B', 1);\r\nkbn.valueFormats.decmbytes = kbn.formatBuilders.decimalSIPrefix('B', 2);\r\nkbn.valueFormats.decgbytes = kbn.formatBuilders.decimalSIPrefix('B', 3);\r\n\r\n// Data Rate\r\nkbn.valueFormats.pps = kbn.formatBuilders.decimalSIPrefix('pps');\r\nkbn.valueFormats.bps = kbn.formatBuilders.decimalSIPrefix('bps');\r\nkbn.valueFormats.Bps = kbn.formatBuilders.decimalSIPrefix('B/s');\r\nkbn.valueFormats.KBs = kbn.formatBuilders.decimalSIPrefix('Bs', 1);\r\nkbn.valueFormats.Kbits = kbn.formatBuilders.decimalSIPrefix('bps', 1);\r\nkbn.valueFormats.MBs = kbn.formatBuilders.decimalSIPrefix('Bs', 2);\r\nkbn.valueFormats.Mbits = kbn.formatBuilders.decimalSIPrefix('bps', 2);\r\nkbn.valueFormats.GBs = kbn.formatBuilders.decimalSIPrefix('Bs', 3);\r\nkbn.valueFormats.Gbits = kbn.formatBuilders.decimalSIPrefix('bps', 3);\r\n\r\n// Hash Rate\r\nkbn.valueFormats.Hs = kbn.formatBuilders.decimalSIPrefix('H/s');\r\nkbn.valueFormats.KHs = kbn.formatBuilders.decimalSIPrefix('H/s', 1);\r\nkbn.valueFormats.MHs = kbn.formatBuilders.decimalSIPrefix('H/s', 2);\r\nkbn.valueFormats.GHs = kbn.formatBuilders.decimalSIPrefix('H/s', 3);\r\nkbn.valueFormats.THs = kbn.formatBuilders.decimalSIPrefix('H/s', 4);\r\nkbn.valueFormats.PHs = kbn.formatBuilders.decimalSIPrefix('H/s', 5);\r\nkbn.valueFormats.EHs = kbn.formatBuilders.decimalSIPrefix('H/s', 6);\r\n\r\n// Throughput\r\nkbn.valueFormats.ops = kbn.formatBuilders.simpleCountUnit('ops');\r\nkbn.valueFormats.reqps = kbn.formatBuilders.simpleCountUnit('reqps');\r\nkbn.valueFormats.rps = kbn.formatBuilders.simpleCountUnit('rps');\r\nkbn.valueFormats.wps = kbn.formatBuilders.simpleCountUnit('wps');\r\nkbn.valueFormats.iops = kbn.formatBuilders.simpleCountUnit('iops');\r\nkbn.valueFormats.opm = kbn.formatBuilders.simpleCountUnit('opm');\r\nkbn.valueFormats.rpm = kbn.formatBuilders.simpleCountUnit('rpm');\r\nkbn.valueFormats.wpm = kbn.formatBuilders.simpleCountUnit('wpm');\r\n\r\n// Energy\r\nkbn.valueFormats.watt = kbn.formatBuilders.decimalSIPrefix('W');\r\nkbn.valueFormats.kwatt = kbn.formatBuilders.decimalSIPrefix('W', 1);\r\nkbn.valueFormats.mwatt = kbn.formatBuilders.decimalSIPrefix('W', -1);\r\nkbn.valueFormats.kwattm = kbn.formatBuilders.decimalSIPrefix('W/Min', 1);\r\nkbn.valueFormats.Wm2 = kbn.formatBuilders.fixedUnit('W/m²');\r\nkbn.valueFormats.voltamp = kbn.formatBuilders.decimalSIPrefix('VA');\r\nkbn.valueFormats.kvoltamp = kbn.formatBuilders.decimalSIPrefix('VA', 1);\r\nkbn.valueFormats.voltampreact = kbn.formatBuilders.decimalSIPrefix('var');\r\nkbn.valueFormats.kvoltampreact = kbn.formatBuilders.decimalSIPrefix('var', 1);\r\nkbn.valueFormats.watth = kbn.formatBuilders.decimalSIPrefix('Wh');\r\nkbn.valueFormats.kwatth = kbn.formatBuilders.decimalSIPrefix('Wh', 1);\r\nkbn.valueFormats.joule = kbn.formatBuilders.decimalSIPrefix('J');\r\nkbn.valueFormats.ev = kbn.formatBuilders.decimalSIPrefix('eV');\r\nkbn.valueFormats.amp = kbn.formatBuilders.decimalSIPrefix('A');\r\nkbn.valueFormats.kamp = kbn.formatBuilders.decimalSIPrefix('A', 1);\r\nkbn.valueFormats.mamp = kbn.formatBuilders.decimalSIPrefix('A', -1);\r\nkbn.valueFormats.volt = kbn.formatBuilders.decimalSIPrefix('V');\r\nkbn.valueFormats.kvolt = kbn.formatBuilders.decimalSIPrefix('V', 1);\r\nkbn.valueFormats.mvolt = kbn.formatBuilders.decimalSIPrefix('V', -1);\r\nkbn.valueFormats.dBm = kbn.formatBuilders.decimalSIPrefix('dBm');\r\nkbn.valueFormats.ohm = kbn.formatBuilders.decimalSIPrefix('Ω');\r\nkbn.valueFormats.lumens = kbn.formatBuilders.decimalSIPrefix('Lm');\r\n\r\n// Temperature\r\nkbn.valueFormats.celsius = kbn.formatBuilders.fixedUnit('°C');\r\nkbn.valueFormats.farenheit = kbn.formatBuilders.fixedUnit('°F');\r\nkbn.valueFormats.kelvin = kbn.formatBuilders.fixedUnit('K');\r\nkbn.valueFormats.humidity = kbn.formatBuilders.fixedUnit('%H');\r\n\r\n// Pressure\r\nkbn.valueFormats.pressurebar = kbn.formatBuilders.decimalSIPrefix('bar');\r\nkbn.valueFormats.pressurembar = kbn.formatBuilders.decimalSIPrefix('bar', -1);\r\nkbn.valueFormats.pressurekbar = kbn.formatBuilders.decimalSIPrefix('bar', 1);\r\nkbn.valueFormats.pressurehpa = kbn.formatBuilders.fixedUnit('hPa');\r\nkbn.valueFormats.pressurekpa = kbn.formatBuilders.fixedUnit('kPa');\r\nkbn.valueFormats.pressurehg = kbn.formatBuilders.fixedUnit('\"Hg');\r\nkbn.valueFormats.pressurepsi = kbn.formatBuilders.scaledUnits(1000, [' psi', ' ksi', ' Mpsi']);\r\n\r\n// Force\r\nkbn.valueFormats.forceNm = kbn.formatBuilders.decimalSIPrefix('Nm');\r\nkbn.valueFormats.forcekNm = kbn.formatBuilders.decimalSIPrefix('Nm', 1);\r\nkbn.valueFormats.forceN = kbn.formatBuilders.decimalSIPrefix('N');\r\nkbn.valueFormats.forcekN = kbn.formatBuilders.decimalSIPrefix('N', 1);\r\n\r\n// Length\r\nkbn.valueFormats.lengthm = kbn.formatBuilders.decimalSIPrefix('m');\r\nkbn.valueFormats.lengthmm = kbn.formatBuilders.decimalSIPrefix('m', -1);\r\nkbn.valueFormats.lengthkm = kbn.formatBuilders.decimalSIPrefix('m', 1);\r\nkbn.valueFormats.lengthmi = kbn.formatBuilders.fixedUnit('mi');\r\nkbn.valueFormats.lengthft = kbn.formatBuilders.fixedUnit('ft');\r\n\r\n// Area\r\nkbn.valueFormats.areaM2 = kbn.formatBuilders.fixedUnit('m²');\r\nkbn.valueFormats.areaF2 = kbn.formatBuilders.fixedUnit('ft²');\r\nkbn.valueFormats.areaMI2 = kbn.formatBuilders.fixedUnit('mi²');\r\n\r\n// Mass\r\nkbn.valueFormats.massmg = kbn.formatBuilders.decimalSIPrefix('g', -1);\r\nkbn.valueFormats.massg = kbn.formatBuilders.decimalSIPrefix('g');\r\nkbn.valueFormats.masskg = kbn.formatBuilders.decimalSIPrefix('g', 1);\r\nkbn.valueFormats.masst = kbn.formatBuilders.fixedUnit('t');\r\n\r\n// Velocity\r\nkbn.valueFormats.velocityms = kbn.formatBuilders.fixedUnit('m/s');\r\nkbn.valueFormats.velocitykmh = kbn.formatBuilders.fixedUnit('km/h');\r\nkbn.valueFormats.velocitymph = kbn.formatBuilders.fixedUnit('mph');\r\nkbn.valueFormats.velocityknot = kbn.formatBuilders.fixedUnit('kn');\r\n\r\n// Acceleration\r\nkbn.valueFormats.accMS2 = kbn.formatBuilders.fixedUnit('m/sec²');\r\nkbn.valueFormats.accFS2 = kbn.formatBuilders.fixedUnit('f/sec²');\r\nkbn.valueFormats.accG = kbn.formatBuilders.fixedUnit('g');\r\n\r\n// Volume\r\nkbn.valueFormats.litre = kbn.formatBuilders.decimalSIPrefix('L');\r\nkbn.valueFormats.mlitre = kbn.formatBuilders.decimalSIPrefix('L', -1);\r\nkbn.valueFormats.m3 = kbn.formatBuilders.fixedUnit('m³');\r\nkbn.valueFormats.Nm3 = kbn.formatBuilders.fixedUnit('Nm³');\r\nkbn.valueFormats.dm3 = kbn.formatBuilders.fixedUnit('dm³');\r\nkbn.valueFormats.gallons = kbn.formatBuilders.fixedUnit('gal');\r\n\r\n// Flow\r\nkbn.valueFormats.flowgpm = kbn.formatBuilders.fixedUnit('gpm');\r\nkbn.valueFormats.flowcms = kbn.formatBuilders.fixedUnit('cms');\r\nkbn.valueFormats.flowcfs = kbn.formatBuilders.fixedUnit('cfs');\r\nkbn.valueFormats.flowcfm = kbn.formatBuilders.fixedUnit('cfm');\r\nkbn.valueFormats.litreh = kbn.formatBuilders.fixedUnit('l/h');\r\nkbn.valueFormats.flowlpm = kbn.formatBuilders.decimalSIPrefix('L');\r\nkbn.valueFormats.flowmlpm = kbn.formatBuilders.decimalSIPrefix('L', -1);\r\n\r\n// Angle\r\nkbn.valueFormats.degree = kbn.formatBuilders.fixedUnit('°');\r\nkbn.valueFormats.radian = kbn.formatBuilders.fixedUnit('rad');\r\nkbn.valueFormats.grad = kbn.formatBuilders.fixedUnit('grad');\r\n\r\n// Radiation\r\nkbn.valueFormats.radbq = kbn.formatBuilders.decimalSIPrefix('Bq');\r\nkbn.valueFormats.radci = kbn.formatBuilders.decimalSIPrefix('Ci');\r\nkbn.valueFormats.radgy = kbn.formatBuilders.decimalSIPrefix('Gy');\r\nkbn.valueFormats.radrad = kbn.formatBuilders.decimalSIPrefix('rad');\r\nkbn.valueFormats.radsv = kbn.formatBuilders.decimalSIPrefix('Sv');\r\nkbn.valueFormats.radrem = kbn.formatBuilders.decimalSIPrefix('rem');\r\nkbn.valueFormats.radexpckg = kbn.formatBuilders.decimalSIPrefix('C/kg');\r\nkbn.valueFormats.radr = kbn.formatBuilders.decimalSIPrefix('R');\r\nkbn.valueFormats.radsvh = kbn.formatBuilders.decimalSIPrefix('Sv/h');\r\n\r\n// Concentration\r\nkbn.valueFormats.ppm = kbn.formatBuilders.fixedUnit('ppm');\r\nkbn.valueFormats.conppb = kbn.formatBuilders.fixedUnit('ppb');\r\nkbn.valueFormats.conngm3 = kbn.formatBuilders.fixedUnit('ng/m³');\r\nkbn.valueFormats.conngNm3 = kbn.formatBuilders.fixedUnit('ng/Nm³');\r\nkbn.valueFormats.conμgm3 = kbn.formatBuilders.fixedUnit('μg/m³');\r\nkbn.valueFormats.conμgNm3 = kbn.formatBuilders.fixedUnit('μg/Nm³');\r\nkbn.valueFormats.conmgm3 = kbn.formatBuilders.fixedUnit('mg/m³');\r\nkbn.valueFormats.conmgNm3 = kbn.formatBuilders.fixedUnit('mg/Nm³');\r\nkbn.valueFormats.congm3 = kbn.formatBuilders.fixedUnit('g/m³');\r\nkbn.valueFormats.congNm3 = kbn.formatBuilders.fixedUnit('g/Nm³');\r\n\r\n// Time\r\nkbn.valueFormats.hertz = kbn.formatBuilders.decimalSIPrefix('Hz');\r\n\r\nkbn.valueFormats.ms = (size, decimals, scaledDecimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n\r\n  if (Math.abs(size) < 1000) {\r\n    return kbn.toFixed(size, decimals) + ' ms';\r\n  } else if (Math.abs(size) < 60000) {\r\n    // Less than 1 min\r\n    return kbn.toFixedScaled(size / 1000, decimals, scaledDecimals, 3, ' s');\r\n  } else if (Math.abs(size) < 3600000) {\r\n    // Less than 1 hour, divide in minutes\r\n    return kbn.toFixedScaled(size / 60000, decimals, scaledDecimals, 5, ' min');\r\n  } else if (Math.abs(size) < 86400000) {\r\n    // Less than one day, divide in hours\r\n    return kbn.toFixedScaled(size / 3600000, decimals, scaledDecimals, 7, ' hour');\r\n  } else if (Math.abs(size) < 31536000000) {\r\n    // Less than one year, divide in days\r\n    return kbn.toFixedScaled(size / 86400000, decimals, scaledDecimals, 8, ' day');\r\n  }\r\n\r\n  return kbn.toFixedScaled(size / 31536000000, decimals, scaledDecimals, 10, ' year');\r\n};\r\n\r\nkbn.valueFormats.s = (size, decimals, scaledDecimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n\r\n  // Less than 1 µs, divide in ns\r\n  if (Math.abs(size) < 0.000001) {\r\n    return kbn.toFixedScaled(size * 1e9, decimals, scaledDecimals - decimals, -9, ' ns');\r\n  }\r\n  // Less than 1 ms, divide in µs\r\n  if (Math.abs(size) < 0.001) {\r\n    return kbn.toFixedScaled(size * 1e6, decimals, scaledDecimals - decimals, -6, ' µs');\r\n  }\r\n  // Less than 1 second, divide in ms\r\n  if (Math.abs(size) < 1) {\r\n    return kbn.toFixedScaled(size * 1e3, decimals, scaledDecimals - decimals, -3, ' ms');\r\n  }\r\n\r\n  if (Math.abs(size) < 60) {\r\n    return kbn.toFixed(size, decimals) + ' s';\r\n  } else if (Math.abs(size) < 3600) {\r\n    // Less than 1 hour, divide in minutes\r\n    return kbn.toFixedScaled(size / 60, decimals, scaledDecimals, 1, ' min');\r\n  } else if (Math.abs(size) < 86400) {\r\n    // Less than one day, divide in hours\r\n    return kbn.toFixedScaled(size / 3600, decimals, scaledDecimals, 4, ' hour');\r\n  } else if (Math.abs(size) < 604800) {\r\n    // Less than one week, divide in days\r\n    return kbn.toFixedScaled(size / 86400, decimals, scaledDecimals, 5, ' day');\r\n  } else if (Math.abs(size) < 31536000) {\r\n    // Less than one year, divide in week\r\n    return kbn.toFixedScaled(size / 604800, decimals, scaledDecimals, 6, ' week');\r\n  }\r\n\r\n  return kbn.toFixedScaled(size / 3.15569e7, decimals, scaledDecimals, 7, ' year');\r\n};\r\n\r\nkbn.valueFormats['µs'] = (size, decimals, scaledDecimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n\r\n  if (Math.abs(size) < 1000) {\r\n    return kbn.toFixed(size, decimals) + ' µs';\r\n  } else if (Math.abs(size) < 1000000) {\r\n    return kbn.toFixedScaled(size / 1000, decimals, scaledDecimals, 3, ' ms');\r\n  } else {\r\n    return kbn.toFixedScaled(size / 1000000, decimals, scaledDecimals, 6, ' s');\r\n  }\r\n};\r\n\r\nkbn.valueFormats.ns = (size, decimals, scaledDecimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n\r\n  if (Math.abs(size) < 1000) {\r\n    return kbn.toFixed(size, decimals) + ' ns';\r\n  } else if (Math.abs(size) < 1000000) {\r\n    return kbn.toFixedScaled(size / 1000, decimals, scaledDecimals, 3, ' µs');\r\n  } else if (Math.abs(size) < 1000000000) {\r\n    return kbn.toFixedScaled(size / 1000000, decimals, scaledDecimals, 6, ' ms');\r\n  } else if (Math.abs(size) < 60000000000) {\r\n    return kbn.toFixedScaled(size / 1000000000, decimals, scaledDecimals, 9, ' s');\r\n  } else {\r\n    return kbn.toFixedScaled(size / 60000000000, decimals, scaledDecimals, 12, ' min');\r\n  }\r\n};\r\n\r\nkbn.valueFormats.m = (size, decimals, scaledDecimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n\r\n  if (Math.abs(size) < 60) {\r\n    return kbn.toFixed(size, decimals) + ' min';\r\n  } else if (Math.abs(size) < 1440) {\r\n    return kbn.toFixedScaled(size / 60, decimals, scaledDecimals, 2, ' hour');\r\n  } else if (Math.abs(size) < 10080) {\r\n    return kbn.toFixedScaled(size / 1440, decimals, scaledDecimals, 3, ' day');\r\n  } else if (Math.abs(size) < 604800) {\r\n    return kbn.toFixedScaled(size / 10080, decimals, scaledDecimals, 4, ' week');\r\n  } else {\r\n    return kbn.toFixedScaled(size / 5.25948e5, decimals, scaledDecimals, 5, ' year');\r\n  }\r\n};\r\n\r\nkbn.valueFormats.h = (size, decimals, scaledDecimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n\r\n  if (Math.abs(size) < 24) {\r\n    return kbn.toFixed(size, decimals) + ' hour';\r\n  } else if (Math.abs(size) < 168) {\r\n    return kbn.toFixedScaled(size / 24, decimals, scaledDecimals, 2, ' day');\r\n  } else if (Math.abs(size) < 8760) {\r\n    return kbn.toFixedScaled(size / 168, decimals, scaledDecimals, 3, ' week');\r\n  } else {\r\n    return kbn.toFixedScaled(size / 8760, decimals, scaledDecimals, 4, ' year');\r\n  }\r\n};\r\n\r\nkbn.valueFormats.d = (size, decimals, scaledDecimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n\r\n  if (Math.abs(size) < 7) {\r\n    return kbn.toFixed(size, decimals) + ' day';\r\n  } else if (Math.abs(size) < 365) {\r\n    return kbn.toFixedScaled(size / 7, decimals, scaledDecimals, 2, ' week');\r\n  } else {\r\n    return kbn.toFixedScaled(size / 365, decimals, scaledDecimals, 3, ' year');\r\n  }\r\n};\r\n\r\nkbn.toDuration = (size, decimals, timeScale) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n  if (size === 0) {\r\n    return '0 ' + timeScale + 's';\r\n  }\r\n  if (size < 0) {\r\n    return kbn.toDuration(-size, decimals, timeScale) + ' ago';\r\n  }\r\n\r\n  const units = [\r\n    { short: 'y', long: 'year' },\r\n    { short: 'M', long: 'month' },\r\n    { short: 'w', long: 'week' },\r\n    { short: 'd', long: 'day' },\r\n    { short: 'h', long: 'hour' },\r\n    { short: 'm', long: 'minute' },\r\n    { short: 's', long: 'second' },\r\n    { short: 'ms', long: 'millisecond' },\r\n  ];\r\n  // convert $size to milliseconds\r\n  // intervals_in_seconds uses seconds (duh), convert them to milliseconds here to minimize floating point errors\r\n  size *=\r\n    kbn.intervals_in_seconds[\r\n      units.find(e => {\r\n        return e.long === timeScale;\r\n      }).short\r\n    ] * 1000;\r\n\r\n  const strings = [];\r\n  // after first value >= 1 print only $decimals more\r\n  let decrementDecimals = false;\r\n  for (let i = 0; i < units.length && decimals >= 0; i++) {\r\n    const interval = kbn.intervals_in_seconds[units[i].short] * 1000;\r\n    const value = size / interval;\r\n    if (value >= 1 || decrementDecimals) {\r\n      decrementDecimals = true;\r\n      const floor = Math.floor(value);\r\n      const unit = units[i].long + (floor !== 1 ? 's' : '');\r\n      strings.push(floor + ' ' + unit);\r\n      size = size % interval;\r\n      decimals--;\r\n    }\r\n  }\r\n\r\n  return strings.join(', ');\r\n};\r\n\r\nkbn.toClock = (size, decimals) => {\r\n  if (size === null) {\r\n    return '';\r\n  }\r\n\r\n  // < 1 second\r\n  if (size < 1000) {\r\n    return moment.utc(size).format('SSS\\\\m\\\\s');\r\n  }\r\n\r\n  // < 1 minute\r\n  if (size < 60000) {\r\n    let format = 'ss\\\\s:SSS\\\\m\\\\s';\r\n    if (decimals === 0) {\r\n      format = 'ss\\\\s';\r\n    }\r\n    return moment.utc(size).format(format);\r\n  }\r\n\r\n  // < 1 hour\r\n  if (size < 3600000) {\r\n    let format = 'mm\\\\m:ss\\\\s:SSS\\\\m\\\\s';\r\n    if (decimals === 0) {\r\n      format = 'mm\\\\m';\r\n    } else if (decimals === 1) {\r\n      format = 'mm\\\\m:ss\\\\s';\r\n    }\r\n    return moment.utc(size).format(format);\r\n  }\r\n\r\n  let format = 'mm\\\\m:ss\\\\s:SSS\\\\m\\\\s';\r\n\r\n  const hours = `${('0' + Math.floor(moment.duration(size, 'milliseconds').asHours())).slice(-2)}h`;\r\n\r\n  if (decimals === 0) {\r\n    format = '';\r\n  } else if (decimals === 1) {\r\n    format = 'mm\\\\m';\r\n  } else if (decimals === 2) {\r\n    format = 'mm\\\\m:ss\\\\s';\r\n  }\r\n\r\n  return format ? `${hours}:${moment.utc(size).format(format)}` : hours;\r\n};\r\n\r\nkbn.valueFormats.dtdurationms = (size, decimals) => {\r\n  return kbn.toDuration(size, decimals, 'millisecond');\r\n};\r\n\r\nkbn.valueFormats.dtdurations = (size, decimals) => {\r\n  return kbn.toDuration(size, decimals, 'second');\r\n};\r\n\r\nkbn.valueFormats.dthms = (size, decimals) => {\r\n  return kbn.secondsToHhmmss(size);\r\n};\r\n\r\nkbn.valueFormats.timeticks = (size, decimals, scaledDecimals) => {\r\n  return kbn.valueFormats.s(size / 100, decimals, scaledDecimals);\r\n};\r\n\r\nkbn.valueFormats.clockms = (size, decimals) => {\r\n  return kbn.toClock(size, decimals);\r\n};\r\n\r\nkbn.valueFormats.clocks = (size, decimals) => {\r\n  return kbn.toClock(size * 1000, decimals);\r\n};\r\n\r\nkbn.valueFormats.dateTimeAsIso = (epoch, isUtc) => {\r\n  const time = isUtc ? moment.utc(epoch) : moment(epoch);\r\n\r\n  if (moment().isSame(epoch, 'day')) {\r\n    return time.format('HH:mm:ss');\r\n  }\r\n  return time.format('YYYY-MM-DD HH:mm:ss');\r\n};\r\n\r\nkbn.valueFormats.dateTimeAsUS = (epoch, isUtc) => {\r\n  const time = isUtc ? moment.utc(epoch) : moment(epoch);\r\n\r\n  if (moment().isSame(epoch, 'day')) {\r\n    return time.format('h:mm:ss a');\r\n  }\r\n  return time.format('MM/DD/YYYY h:mm:ss a');\r\n};\r\n\r\nkbn.valueFormats.dateTimeFromNow = (epoch, isUtc) => {\r\n  const time = isUtc ? moment.utc(epoch) : moment(epoch);\r\n  return time.fromNow();\r\n};\r\n\r\n///// FORMAT MENU /////\r\n\r\nkbn.getUnitFormats = () => {\r\n  return [\r\n    {\r\n      text: 'none',\r\n      submenu: [\r\n        { text: 'none', value: 'none' },\r\n        { text: 'short', value: 'short' },\r\n        { text: 'percent (0-100)', value: 'percent' },\r\n        { text: 'percent (0.0-1.0)', value: 'percentunit' },\r\n        { text: 'Humidity (%H)', value: 'humidity' },\r\n        { text: 'decibel', value: 'dB' },\r\n        { text: 'hexadecimal (0x)', value: 'hex0x' },\r\n        { text: 'hexadecimal', value: 'hex' },\r\n        { text: 'scientific notation', value: 'sci' },\r\n        { text: 'locale format', value: 'locale' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'currency',\r\n      submenu: [\r\n        { text: 'Dollars ($)', value: 'currencyUSD' },\r\n        { text: 'Pounds (£)', value: 'currencyGBP' },\r\n        { text: 'Euro (€)', value: 'currencyEUR' },\r\n        { text: 'Yen (¥)', value: 'currencyJPY' },\r\n        { text: 'Rubles (₽)', value: 'currencyRUB' },\r\n        { text: 'Hryvnias (₴)', value: 'currencyUAH' },\r\n        { text: 'Real (R$)', value: 'currencyBRL' },\r\n        { text: 'Danish Krone (kr)', value: 'currencyDKK' },\r\n        { text: 'Icelandic Króna (kr)', value: 'currencyISK' },\r\n        { text: 'Norwegian Krone (kr)', value: 'currencyNOK' },\r\n        { text: 'Swedish Krona (kr)', value: 'currencySEK' },\r\n        { text: 'Czech koruna (czk)', value: 'currencyCZK' },\r\n        { text: 'Swiss franc (CHF)', value: 'currencyCHF' },\r\n        { text: 'Polish Złoty (PLN)', value: 'currencyPLN' },\r\n        { text: 'Bitcoin (฿)', value: 'currencyBTC' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'time',\r\n      submenu: [\r\n        { text: 'Hertz (1/s)', value: 'hertz' },\r\n        { text: 'nanoseconds (ns)', value: 'ns' },\r\n        { text: 'microseconds (µs)', value: 'µs' },\r\n        { text: 'milliseconds (ms)', value: 'ms' },\r\n        { text: 'seconds (s)', value: 's' },\r\n        { text: 'minutes (m)', value: 'm' },\r\n        { text: 'hours (h)', value: 'h' },\r\n        { text: 'days (d)', value: 'd' },\r\n        { text: 'duration (ms)', value: 'dtdurationms' },\r\n        { text: 'duration (s)', value: 'dtdurations' },\r\n        { text: 'duration (hh:mm:ss)', value: 'dthms' },\r\n        { text: 'Timeticks (s/100)', value: 'timeticks' },\r\n        { text: 'clock (ms)', value: 'clockms' },\r\n        { text: 'clock (s)', value: 'clocks' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'date & time',\r\n      submenu: [\r\n        { text: 'YYYY-MM-DD HH:mm:ss', value: 'dateTimeAsIso' },\r\n        { text: 'DD/MM/YYYY h:mm:ss a', value: 'dateTimeAsUS' },\r\n        { text: 'From Now', value: 'dateTimeFromNow' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'data (IEC)',\r\n      submenu: [\r\n        { text: 'bits', value: 'bits' },\r\n        { text: 'bytes', value: 'bytes' },\r\n        { text: 'kibibytes', value: 'kbytes' },\r\n        { text: 'mebibytes', value: 'mbytes' },\r\n        { text: 'gibibytes', value: 'gbytes' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'data (Metric)',\r\n      submenu: [\r\n        { text: 'bits', value: 'decbits' },\r\n        { text: 'bytes', value: 'decbytes' },\r\n        { text: 'kilobytes', value: 'deckbytes' },\r\n        { text: 'megabytes', value: 'decmbytes' },\r\n        { text: 'gigabytes', value: 'decgbytes' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'data rate',\r\n      submenu: [\r\n        { text: 'packets/sec', value: 'pps' },\r\n        { text: 'bits/sec', value: 'bps' },\r\n        { text: 'bytes/sec', value: 'Bps' },\r\n        { text: 'kilobits/sec', value: 'Kbits' },\r\n        { text: 'kilobytes/sec', value: 'KBs' },\r\n        { text: 'megabits/sec', value: 'Mbits' },\r\n        { text: 'megabytes/sec', value: 'MBs' },\r\n        { text: 'gigabytes/sec', value: 'GBs' },\r\n        { text: 'gigabits/sec', value: 'Gbits' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'hash rate',\r\n      submenu: [\r\n        { text: 'hashes/sec', value: 'Hs' },\r\n        { text: 'kilohashes/sec', value: 'KHs' },\r\n        { text: 'megahashes/sec', value: 'MHs' },\r\n        { text: 'gigahashes/sec', value: 'GHs' },\r\n        { text: 'terahashes/sec', value: 'THs' },\r\n        { text: 'petahashes/sec', value: 'PHs' },\r\n        { text: 'exahashes/sec', value: 'EHs' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'throughput',\r\n      submenu: [\r\n        { text: 'ops/sec (ops)', value: 'ops' },\r\n        { text: 'requests/sec (rps)', value: 'reqps' },\r\n        { text: 'reads/sec (rps)', value: 'rps' },\r\n        { text: 'writes/sec (wps)', value: 'wps' },\r\n        { text: 'I/O ops/sec (iops)', value: 'iops' },\r\n        { text: 'ops/min (opm)', value: 'opm' },\r\n        { text: 'reads/min (rpm)', value: 'rpm' },\r\n        { text: 'writes/min (wpm)', value: 'wpm' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'length',\r\n      submenu: [\r\n        { text: 'millimetre (mm)', value: 'lengthmm' },\r\n        { text: 'meter (m)', value: 'lengthm' },\r\n        { text: 'feet (ft)', value: 'lengthft' },\r\n        { text: 'kilometer (km)', value: 'lengthkm' },\r\n        { text: 'mile (mi)', value: 'lengthmi' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'area',\r\n      submenu: [\r\n        { text: 'Square Meters (m²)', value: 'areaM2' },\r\n        { text: 'Square Feet (ft²)', value: 'areaF2' },\r\n        { text: 'Square Miles (mi²)', value: 'areaMI2' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'mass',\r\n      submenu: [\r\n        { text: 'milligram (mg)', value: 'massmg' },\r\n        { text: 'gram (g)', value: 'massg' },\r\n        { text: 'kilogram (kg)', value: 'masskg' },\r\n        { text: 'metric ton (t)', value: 'masst' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'velocity',\r\n      submenu: [\r\n        { text: 'metres/second (m/s)', value: 'velocityms' },\r\n        { text: 'kilometers/hour (km/h)', value: 'velocitykmh' },\r\n        { text: 'miles/hour (mph)', value: 'velocitymph' },\r\n        { text: 'knot (kn)', value: 'velocityknot' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'volume',\r\n      submenu: [\r\n        { text: 'millilitre (mL)', value: 'mlitre' },\r\n        { text: 'litre (L)', value: 'litre' },\r\n        { text: 'cubic metre', value: 'm3' },\r\n        { text: 'Normal cubic metre', value: 'Nm3' },\r\n        { text: 'cubic decimetre', value: 'dm3' },\r\n        { text: 'gallons', value: 'gallons' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'energy',\r\n      submenu: [\r\n        { text: 'Watt (W)', value: 'watt' },\r\n        { text: 'Kilowatt (kW)', value: 'kwatt' },\r\n        { text: 'Milliwatt (mW)', value: 'mwatt' },\r\n        { text: 'Watt per square metre (W/m²)', value: 'Wm2' },\r\n        { text: 'Volt-ampere (VA)', value: 'voltamp' },\r\n        { text: 'Kilovolt-ampere (kVA)', value: 'kvoltamp' },\r\n        { text: 'Volt-ampere reactive (var)', value: 'voltampreact' },\r\n        { text: 'Kilovolt-ampere reactive (kvar)', value: 'kvoltampreact' },\r\n        { text: 'Watt-hour (Wh)', value: 'watth' },\r\n        { text: 'Kilowatt-hour (kWh)', value: 'kwatth' },\r\n        { text: 'Kilowatt-min (kWm)', value: 'kwattm' },\r\n        { text: 'Joule (J)', value: 'joule' },\r\n        { text: 'Electron volt (eV)', value: 'ev' },\r\n        { text: 'Ampere (A)', value: 'amp' },\r\n        { text: 'Kiloampere (kA)', value: 'kamp' },\r\n        { text: 'Milliampere (mA)', value: 'mamp' },\r\n        { text: 'Volt (V)', value: 'volt' },\r\n        { text: 'Kilovolt (kV)', value: 'kvolt' },\r\n        { text: 'Millivolt (mV)', value: 'mvolt' },\r\n        { text: 'Decibel-milliwatt (dBm)', value: 'dBm' },\r\n        { text: 'Ohm (Ω)', value: 'ohm' },\r\n        { text: 'Lumens (Lm)', value: 'lumens' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'temperature',\r\n      submenu: [\r\n        { text: 'Celsius (°C)', value: 'celsius' },\r\n        { text: 'Farenheit (°F)', value: 'farenheit' },\r\n        { text: 'Kelvin (K)', value: 'kelvin' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'pressure',\r\n      submenu: [\r\n        { text: 'Millibars', value: 'pressurembar' },\r\n        { text: 'Bars', value: 'pressurebar' },\r\n        { text: 'Kilobars', value: 'pressurekbar' },\r\n        { text: 'Hectopascals', value: 'pressurehpa' },\r\n        { text: 'Kilopascals', value: 'pressurekpa' },\r\n        { text: 'Inches of mercury', value: 'pressurehg' },\r\n        { text: 'PSI', value: 'pressurepsi' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'force',\r\n      submenu: [\r\n        { text: 'Newton-meters (Nm)', value: 'forceNm' },\r\n        { text: 'Kilonewton-meters (kNm)', value: 'forcekNm' },\r\n        { text: 'Newtons (N)', value: 'forceN' },\r\n        { text: 'Kilonewtons (kN)', value: 'forcekN' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'flow',\r\n      submenu: [\r\n        { text: 'Gallons/min (gpm)', value: 'flowgpm' },\r\n        { text: 'Cubic meters/sec (cms)', value: 'flowcms' },\r\n        { text: 'Cubic feet/sec (cfs)', value: 'flowcfs' },\r\n        { text: 'Cubic feet/min (cfm)', value: 'flowcfm' },\r\n        { text: 'Litre/hour', value: 'litreh' },\r\n        { text: 'Litre/min (l/min)', value: 'flowlpm' },\r\n        { text: 'milliLitre/min (mL/min)', value: 'flowmlpm' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'angle',\r\n      submenu: [\r\n        { text: 'Degrees (°)', value: 'degree' },\r\n        { text: 'Radians', value: 'radian' },\r\n        { text: 'Gradian', value: 'grad' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'acceleration',\r\n      submenu: [\r\n        { text: 'Meters/sec²', value: 'accMS2' },\r\n        { text: 'Feet/sec²', value: 'accFS2' },\r\n        { text: 'G unit', value: 'accG' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'radiation',\r\n      submenu: [\r\n        { text: 'Becquerel (Bq)', value: 'radbq' },\r\n        { text: 'curie (Ci)', value: 'radci' },\r\n        { text: 'Gray (Gy)', value: 'radgy' },\r\n        { text: 'rad', value: 'radrad' },\r\n        { text: 'Sievert (Sv)', value: 'radsv' },\r\n        { text: 'rem', value: 'radrem' },\r\n        { text: 'Exposure (C/kg)', value: 'radexpckg' },\r\n        { text: 'roentgen (R)', value: 'radr' },\r\n        { text: 'Sievert/hour (Sv/h)', value: 'radsvh' },\r\n      ],\r\n    },\r\n    {\r\n      text: 'concentration',\r\n      submenu: [\r\n        { text: 'parts-per-million (ppm)', value: 'ppm' },\r\n        { text: 'parts-per-billion (ppb)', value: 'conppb' },\r\n        { text: 'nanogram per cubic metre (ng/m³)', value: 'conngm3' },\r\n        { text: 'nanogram per normal cubic metre (ng/Nm³)', value: 'conngNm3' },\r\n        { text: 'microgram per cubic metre (μg/m³)', value: 'conμgm3' },\r\n        { text: 'microgram per normal cubic metre (μg/Nm³)', value: 'conμgNm3' },\r\n        { text: 'milligram per cubic metre (mg/m³)', value: 'conmgm3' },\r\n        { text: 'milligram per normal cubic metre (mg/Nm³)', value: 'conmgNm3' },\r\n        { text: 'gram per cubic metre (g/m³)', value: 'congm3' },\r\n        { text: 'gram per normal cubic metre (g/Nm³)', value: 'congNm3' },\r\n      ],\r\n    },\r\n  ];\r\n};\r\n\r\nexport default kbn;\r\n","// jshint ignore: start\r\n// jscs: disable\r\nace.define(\"ace/mode/prometheus_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar oop = require(\"../lib/oop\");\r\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\r\n\r\nvar PrometheusHighlightRules = function() {\r\n  var keywords = (\r\n    \"count|count_values|min|max|avg|sum|stddev|stdvar|bottomk|topk|quantile\"\r\n  );\r\n\r\n  var builtinConstants = (\r\n    \"true|false|null|__name__|job\"\r\n  );\r\n\r\n  var builtinFunctions = (\r\n    \"abs|absent|ceil|changes|clamp_max|clamp_min|count_scalar|day_of_month|day_of_week|days_in_month|delta|deriv|\" + \"drop_common_labels|exp|floor|histogram_quantile|holt_winters|hour|idelta|increase|irate|label_replace|ln|log2|\" +\r\n    \"log10|minute|month|predict_linear|rate|resets|round|scalar|sort|sort_desc|sqrt|time|vector|year|avg_over_time|\" +\r\n    \"min_over_time|max_over_time|sum_over_time|count_over_time|quantile_over_time|stddev_over_time|stdvar_over_time\"\r\n  );\r\n\r\n  var keywordMapper = this.createKeywordMapper({\r\n    \"support.function\": builtinFunctions,\r\n    \"keyword\": keywords,\r\n    \"constant.language\": builtinConstants\r\n  }, \"identifier\", true);\r\n\r\n  this.$rules = {\r\n    \"start\" : [ {\r\n      token : \"string\", // single line\r\n      regex : /\"(?:[^\"\\\\]|\\\\.)*?\"/\r\n    }, {\r\n      token : \"string\", // string\r\n      regex : \"'.*?'\"\r\n    }, {\r\n      token : \"constant.numeric\", // float\r\n      regex : \"[-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\r\n    }, {\r\n      token : \"constant.language\", // time\r\n      regex : \"\\\\d+[smhdwy]\"\r\n    }, {\r\n      token : \"keyword.operator.binary\",\r\n      regex : \"\\\\+|\\\\-|\\\\*|\\\\/|%|\\\\^|==|!=|<=|>=|<|>|and|or|unless\"\r\n    }, {\r\n      token : \"keyword.other\",\r\n      regex : \"keep_common|offset|bool\"\r\n    }, {\r\n      token : \"keyword.control\",\r\n      regex : \"by|without|on|ignoring|group_left|group_right\",\r\n      next  : \"start-label-list-matcher\"\r\n    }, {\r\n      token : \"variable\",\r\n      regex : \"\\\\$[A-Za-z0-9_]+\"\r\n    }, {\r\n      token : keywordMapper,\r\n      regex : \"[a-zA-Z_:][a-zA-Z0-9_:]*\"\r\n    }, {\r\n      token : \"paren.lparen\",\r\n      regex : \"[[(]\"\r\n    }, {\r\n      token : \"paren.lparen.label-matcher\",\r\n      regex : \"{\",\r\n      next  : \"start-label-matcher\"\r\n    }, {\r\n      token : \"paren.rparen\",\r\n      regex : \"[\\\\])]\"\r\n    }, {\r\n      token : \"paren.rparen.label-matcher\",\r\n      regex : \"}\"\r\n    }, {\r\n      token : \"text\",\r\n      regex : \"\\\\s+\"\r\n    } ],\r\n    \"start-label-matcher\" : [ {\r\n      token : \"entity.name.tag.label-matcher\",\r\n      regex : '[a-zA-Z_][a-zA-Z0-9_]*'\r\n    }, {\r\n      token : \"keyword.operator.label-matcher\",\r\n      regex : '=~|=|!~|!='\r\n    }, {\r\n      token : \"string.quoted.label-matcher\",\r\n      regex : '\"[^\"]*\"|\\'[^\\']*\\''\r\n    }, {\r\n      token : \"punctuation.operator.label-matcher\",\r\n      regex : \",\"\r\n    }, {\r\n      token : \"paren.rparen.label-matcher\",\r\n      regex : \"}\",\r\n      next  : \"start\"\r\n    } ],\r\n    \"start-label-list-matcher\" : [ {\r\n      token : \"paren.lparen.label-list-matcher\",\r\n      regex : \"[(]\"\r\n    }, {\r\n      token : \"entity.name.tag.label-list-matcher\",\r\n      regex : '[a-zA-Z_][a-zA-Z0-9_]*'\r\n    }, {\r\n      token : \"punctuation.operator.label-list-matcher\",\r\n      regex : \",\"\r\n    }, {\r\n      token : \"paren.rparen.label-list-matcher\",\r\n      regex : \"[)]\",\r\n      next  : \"start\"\r\n    } ]\r\n  };\r\n\r\n  this.normalizeRules();\r\n};\r\n\r\noop.inherits(PrometheusHighlightRules, TextHighlightRules);\r\n\r\nexports.PrometheusHighlightRules = PrometheusHighlightRules;\r\n});\r\n\r\nace.define(\"ace/mode/prometheus_completions\",[\"require\",\"exports\",\"module\",\"ace/token_iterator\", \"ace/lib/lang\"], function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar lang = require(\"../lib/lang\");\r\n\r\nvar prometheusKeyWords = [\r\n  \"by\", \"without\", \"keep_common\", \"offset\", \"bool\", \"and\", \"or\", \"unless\", \"ignoring\", \"on\", \"group_left\",\r\n  \"group_right\", \"count\", \"count_values\", \"min\", \"max\", \"avg\", \"sum\", \"stddev\", \"stdvar\", \"bottomk\", \"topk\", \"quantile\"\r\n];\r\n\r\nvar keyWordsCompletions = prometheusKeyWords.map(function(word) {\r\n  return {\r\n    caption: word,\r\n    value: word,\r\n    meta: \"keyword\",\r\n    score: Number.MAX_VALUE\r\n  }\r\n});\r\n\r\nvar prometheusFunctions = [\r\n  {\r\n    name: 'abs()', value: 'abs',\r\n    def: 'abs(v instant-vector)',\r\n    docText: 'Returns the input vector with all sample values converted to their absolute value.'\r\n  },\r\n  {\r\n    name: 'absent()', value: 'absent',\r\n    def: 'absent(v instant-vector)',\r\n    docText: 'Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination.'\r\n  },\r\n  {\r\n    name: 'ceil()', value: 'ceil',\r\n    def: 'ceil(v instant-vector)',\r\n    docText: 'Rounds the sample values of all elements in `v` up to the nearest integer.'\r\n  },\r\n  {\r\n    name: 'changes()', value: 'changes',\r\n    def: 'changes(v range-vector)',\r\n    docText: 'For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector.'\r\n  },\r\n  {\r\n    name: 'clamp_max()', value: 'clamp_max',\r\n    def: 'clamp_max(v instant-vector, max scalar)',\r\n    docText: 'Clamps the sample values of all elements in `v` to have an upper limit of `max`.'\r\n  },\r\n  {\r\n    name: 'clamp_min()', value: 'clamp_min',\r\n    def: 'clamp_min(v instant-vector, min scalar)',\r\n    docText: 'Clamps the sample values of all elements in `v` to have a lower limit of `min`.'\r\n  },\r\n  {\r\n    name: 'count_scalar()', value: 'count_scalar',\r\n    def: 'count_scalar(v instant-vector)',\r\n    docText: 'Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause.'\r\n  },\r\n  {\r\n    name: 'day_of_month()', value: 'day_of_month',\r\n    def: 'day_of_month(v=vector(time()) instant-vector)',\r\n    docText: 'Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31.'\r\n  },\r\n  {\r\n    name: 'day_of_week()', value: 'day_of_week',\r\n    def: 'day_of_week(v=vector(time()) instant-vector)',\r\n    docText: 'Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc.'\r\n  },\r\n  {\r\n    name: 'days_in_month()', value: 'days_in_month',\r\n    def: 'days_in_month(v=vector(time()) instant-vector)',\r\n    docText: 'Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31.'\r\n  },\r\n  {\r\n    name: 'delta()', value: 'delta',\r\n    def: 'delta(v range-vector)',\r\n    docText: 'Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers.'\r\n  },\r\n  {\r\n    name: 'deriv()', value: 'deriv',\r\n    def: 'deriv(v range-vector)',\r\n    docText: 'Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression.'\r\n  },\r\n  {\r\n    name: 'drop_common_labels()', value: 'drop_common_labels',\r\n    def: 'drop_common_labels(instant-vector)',\r\n    docText: 'Drops all labels that have the same name and value across all series in the input vector.'\r\n  },\r\n  {\r\n    name: 'exp()', value: 'exp',\r\n    def: 'exp(v instant-vector)',\r\n    docText: 'Calculates the exponential function for all elements in `v`.\\nSpecial cases are:\\n* `Exp(+Inf) = +Inf` \\n* `Exp(NaN) = NaN`'\r\n  },\r\n  {\r\n    name: 'floor()', value: 'floor',\r\n    def: 'floor(v instant-vector)',\r\n    docText: 'Rounds the sample values of all elements in `v` down to the nearest integer.'\r\n  },\r\n  {\r\n    name: 'histogram_quantile()', value: 'histogram_quantile',\r\n    def: 'histogram_quantile(φ float, b instant-vector)',\r\n    docText: 'Calculates the φ-quantile (0 ≤ φ ≤ 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels.'\r\n  },\r\n  {\r\n    name: 'holt_winters()', value: 'holt_winters',\r\n    def: 'holt_winters(v range-vector, sf scalar, tf scalar)',\r\n    docText: 'Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1.'\r\n  },\r\n  {\r\n    name: 'hour()', value: 'hour',\r\n    def: 'hour(v=vector(time()) instant-vector)',\r\n    docText: 'Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23.'\r\n  },\r\n  {\r\n    name: 'idelta()', value: 'idelta',\r\n    def: 'idelta(v range-vector)',\r\n    docText: 'Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels.'\r\n  },\r\n  {\r\n    name: 'increase()', value: 'increase',\r\n    def: 'increase(v range-vector)',\r\n    docText: 'Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments.'\r\n  },\r\n  {\r\n    name: 'irate()', value: 'irate',\r\n    def: 'irate(v range-vector)',\r\n    docText: 'Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for.'\r\n  },\r\n  {\r\n    name: 'label_replace()', value: 'label_replace',\r\n    def: 'label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)',\r\n    docText: 'For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn\\'t match then the timeseries is returned unchanged.'\r\n  },\r\n  {\r\n    name: 'ln()', value: 'ln',\r\n    def: 'ln(v instant-vector)',\r\n    docText: 'calculates the natural logarithm for all elements in `v`.\\nSpecial cases are:\\n * `ln(+Inf) = +Inf`\\n * `ln(0) = -Inf`\\n * `ln(x < 0) = NaN`\\n * `ln(NaN) = NaN`'\r\n  },\r\n  {\r\n    name: 'log2()', value: 'log2',\r\n    def: 'log2(v instant-vector)',\r\n    docText: 'Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`.'\r\n  },\r\n  {\r\n    name: 'log10()', value: 'log10',\r\n    def: 'log10(v instant-vector)',\r\n    docText: 'Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`.'\r\n  },\r\n  {\r\n    name: 'minute()', value: 'minute',\r\n    def: 'minute(v=vector(time()) instant-vector)',\r\n    docText: 'Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59.'\r\n  },\r\n  {\r\n    name: 'month()', value: 'month',\r\n    def: 'month(v=vector(time()) instant-vector)',\r\n    docText: 'Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc.'\r\n  },\r\n  {\r\n    name: 'predict_linear()', value: 'predict_linear',\r\n    def: 'predict_linear(v range-vector, t scalar)',\r\n    docText: 'Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression.'\r\n  },\r\n  {\r\n    name: 'rate()', value: 'rate',\r\n    def: 'rate(v range-vector)',\r\n    docText: \"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period.\"\r\n  },\r\n  {\r\n    name: 'resets()', value: 'resets',\r\n    def: 'resets(v range-vector)',\r\n    docText: 'For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset.'\r\n  },\r\n  {\r\n    name: 'round()', value: 'round',\r\n    def: 'round(v instant-vector, to_nearest=1 scalar)',\r\n    docText: 'Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction.'\r\n  },\r\n  {\r\n    name: 'scalar()', value: 'scalar',\r\n    def: 'scalar(v instant-vector)',\r\n    docText: 'Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`.'\r\n  },\r\n  {\r\n    name: 'sort()', value: 'sort',\r\n    def: 'sort(v instant-vector)',\r\n    docText: 'Returns vector elements sorted by their sample values, in ascending order.'\r\n  },\r\n  {\r\n    name: 'sort_desc()', value: 'sort_desc',\r\n    def: 'sort_desc(v instant-vector)',\r\n    docText: 'Returns vector elements sorted by their sample values, in descending order.'\r\n  },\r\n  {\r\n    name: 'sqrt()', value: 'sqrt',\r\n    def: 'sqrt(v instant-vector)',\r\n    docText: 'Calculates the square root of all elements in `v`.'\r\n  },\r\n  {\r\n    name: 'time()', value: 'time',\r\n    def: 'time()',\r\n    docText: 'Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated.'\r\n  },\r\n  {\r\n    name: 'vector()', value: 'vector',\r\n    def: 'vector(s scalar)',\r\n    docText: 'Returns the scalar `s` as a vector with no labels.'\r\n  },\r\n  {\r\n    name: 'year()', value: 'year',\r\n    def: 'year(v=vector(time()) instant-vector)',\r\n    docText: 'Returns the year for each of the given times in UTC.'\r\n  },\r\n  {\r\n    name: 'avg_over_time()', value: 'avg_over_time',\r\n    def: 'avg_over_time(range-vector)',\r\n    docText: 'The average value of all points in the specified interval.'\r\n  },\r\n  {\r\n    name: 'min_over_time()', value: 'min_over_time',\r\n    def: 'min_over_time(range-vector)',\r\n    docText: 'The minimum value of all points in the specified interval.'\r\n  },\r\n  {\r\n    name: 'max_over_time()', value: 'max_over_time',\r\n    def: 'max_over_time(range-vector)',\r\n    docText: 'The maximum value of all points in the specified interval.'\r\n  },\r\n  {\r\n    name: 'sum_over_time()', value: 'sum_over_time',\r\n    def: 'sum_over_time(range-vector)',\r\n    docText: 'The sum of all values in the specified interval.'\r\n  },\r\n  {\r\n    name: 'count_over_time()', value: 'count_over_time',\r\n    def: 'count_over_time(range-vector)',\r\n    docText: 'The count of all values in the specified interval.'\r\n  },\r\n  {\r\n    name: 'quantile_over_time()', value: 'quantile_over_time',\r\n    def: 'quantile_over_time(scalar, range-vector)',\r\n    docText: 'The φ-quantile (0 ≤ φ ≤ 1) of the values in the specified interval.'\r\n  },\r\n  {\r\n    name: 'stddev_over_time()', value: 'stddev_over_time',\r\n    def: 'stddev_over_time(range-vector)',\r\n    docText: 'The population standard deviation of the values in the specified interval.'\r\n  },\r\n  {\r\n    name: 'stdvar_over_time()', value: 'stdvar_over_time',\r\n    def: 'stdvar_over_time(range-vector)',\r\n    docText: 'The population standard variance of the values in the specified interval.'\r\n  },\r\n];\r\n\r\nfunction wrapText(str, len) {\r\n  len = len || 60;\r\n  var lines = [];\r\n  var space_index = 0;\r\n  var line_start = 0;\r\n  var next_line_end = len;\r\n  var line = \"\";\r\n  for (var i = 0; i < str.length; i++) {\r\n    if (str[i] === ' ') {\r\n      space_index = i;\r\n    } else if (i >= next_line_end  && space_index != 0) {\r\n      line = str.slice(line_start, space_index);\r\n      lines.push(line);\r\n      line_start = space_index + 1;\r\n      next_line_end = i + len;\r\n      space_index = 0;\r\n    }\r\n  }\r\n  line = str.slice(line_start);\r\n  lines.push(line);\r\n  return lines.join(\"&nbsp<br>\");\r\n}\r\n\r\nfunction convertMarkDownTags(text) {\r\n  text = text.replace(/```(.+)```/, \"<pre>$1</pre>\");\r\n  text = text.replace(/`([^`]+)`/, \"<code>$1</code>\");\r\n  return text;\r\n}\r\n\r\nfunction convertToHTML(item) {\r\n  var docText = lang.escapeHTML(item.docText);\r\n  docText = convertMarkDownTags(wrapText(docText, 40));\r\n  return [\r\n    \"<b>\", lang.escapeHTML(item.def), \"</b>\", \"<hr></hr>\", docText, \"<br>&nbsp\"\r\n  ].join(\"\");\r\n}\r\n\r\nvar functionsCompletions = prometheusFunctions.map(function(item) {\r\n  return {\r\n    caption: item.name,\r\n    value: item.value,\r\n    docHTML: convertToHTML(item),\r\n    meta: \"function\",\r\n    score: Number.MAX_VALUE\r\n  };\r\n});\r\n\r\nvar PrometheusCompletions = function() {};\r\n\r\n(function() {\r\n  this.getCompletions = function(state, session, pos, prefix, callback) {\r\n    var token = session.getTokenAt(pos.row, pos.column);\r\n    if (token.type === 'entity.name.tag.label-matcher'\r\n      || token.type === 'string.quoted.label-matcher'\r\n      || token.type === 'entity.name.tag.label-list-matcher') {\r\n      return callback(null, []);\r\n    }\r\n\r\n    var completions = keyWordsCompletions.concat(functionsCompletions);\r\n    callback(null, completions);\r\n  };\r\n\r\n}).call(PrometheusCompletions.prototype);\r\n\r\nexports.PrometheusCompletions = PrometheusCompletions;\r\n});\r\n\r\nace.define(\"ace/mode/behaviour/prometheus\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/mode/behaviour/cstyle\",\"ace/token_iterator\"], function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar oop = require(\"../../lib/oop\");\r\nvar Behaviour = require(\"../behaviour\").Behaviour;\r\nvar CstyleBehaviour = require(\"./cstyle\").CstyleBehaviour;\r\nvar TokenIterator = require(\"../../token_iterator\").TokenIterator;\r\n\r\nfunction getWrapped(selection, selected, opening, closing) {\r\n  var rowDiff = selection.end.row - selection.start.row;\r\n  return {\r\n    text: opening + selected + closing,\r\n    selection: [\r\n      0,\r\n      selection.start.column + 1,\r\n      rowDiff,\r\n      selection.end.column + (rowDiff ? 0 : 1)\r\n    ]\r\n  };\r\n};\r\n\r\nvar PrometheusBehaviour = function () {\r\n  this.inherit(CstyleBehaviour);\r\n\r\n  // Rewrite default CstyleBehaviour for {} braces\r\n  this.add(\"braces\", \"insertion\", function(state, action, editor, session, text) {\r\n    if (text == '{') {\r\n      var selection = editor.getSelectionRange();\r\n      var selected = session.doc.getTextRange(selection);\r\n      if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\r\n        return getWrapped(selection, selected, '{', '}');\r\n      } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\r\n        return {\r\n          text: '{}',\r\n          selection: [1, 1]\r\n        };\r\n      }\r\n    } else if (text == '}') {\r\n      var cursor = editor.getCursorPosition();\r\n      var line = session.doc.getLine(cursor.row);\r\n      var rightChar = line.substring(cursor.column, cursor.column + 1);\r\n      if (rightChar == '}') {\r\n        var matching = session.$findOpeningBracket('}', {column: cursor.column + 1, row: cursor.row});\r\n        if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\r\n          return {\r\n            text: '',\r\n            selection: [1, 1]\r\n          };\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  this.add(\"braces\", \"deletion\", function(state, action, editor, session, range) {\r\n    var selected = session.doc.getTextRange(range);\r\n    if (!range.isMultiLine() && selected == '{') {\r\n      var line = session.doc.getLine(range.start.row);\r\n      var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\r\n      if (rightChar == '}') {\r\n        range.end.column++;\r\n        return range;\r\n      }\r\n    }\r\n  });\r\n\r\n}\r\noop.inherits(PrometheusBehaviour, CstyleBehaviour);\r\n\r\nexports.PrometheusBehaviour = PrometheusBehaviour;\r\n});\r\n\r\nace.define(\"ace/mode/prometheus\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/prometheus_highlight_rules\"], function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar oop = require(\"../lib/oop\");\r\nvar TextMode = require(\"./text\").Mode;\r\nvar PrometheusHighlightRules = require(\"./prometheus_highlight_rules\").PrometheusHighlightRules;\r\nvar PrometheusCompletions = require(\"./prometheus_completions\").PrometheusCompletions;\r\nvar PrometheusBehaviour = require(\"./behaviour/prometheus\").PrometheusBehaviour;\r\n\r\nvar Mode = function() {\r\n  this.HighlightRules = PrometheusHighlightRules;\r\n  this.$behaviour = new PrometheusBehaviour();\r\n  this.$completer = new PrometheusCompletions();\r\n  // replace keyWordCompleter\r\n  this.completer = this.$completer;\r\n};\r\noop.inherits(Mode, TextMode);\r\n\r\n(function() {\r\n\r\n  this.$id = \"ace/mode/prometheus\";\r\n}).call(Mode.prototype);\r\n\r\nexports.Mode = Mode;\r\n\r\n});\r\n","// jshint ignore: start\r\n// jscs: disable\r\nace.define(\"ace/snippets/prometheus\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\r\n\"use strict\";\r\n\r\n// exports.snippetText = \"# rate\\n\\\r\n// snippet r\\n\\\r\n//   rate(${1:metric}[${2:range}])\\n\\\r\n// \";\r\n\r\nexports.snippets = [\r\n  {\r\n    \"content\": \"rate(${1:metric}[${2:range}])\",\r\n    \"name\": \"rate()\",\r\n    \"scope\": \"prometheus\",\r\n    \"tabTrigger\": \"r\"\r\n  }\r\n];\r\n\r\nexports.scope = \"prometheus\";\r\n});\r\n","/* Flot plugin for rendering pie charts.\r\n\r\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nThe plugin assumes that each series has a single data value, and that each\r\nvalue is a positive integer or zero.  Negative numbers don't make sense for a\r\npie chart, and have unpredictable results.  The values do NOT need to be\r\npassed in as percentages; the plugin will calculate the total and per-slice\r\npercentages internally.\r\n\r\n* Created by Brian Medendorp\r\n\r\n* Updated with contributions from btburnett3, Anthony Aragues and Xavi Ivars\r\n\r\nThe plugin supports these options:\r\n\r\n\tseries: {\r\n\t\tpie: {\r\n\t\t\tshow: true/false\r\n\t\t\tradius: 0-1 for percentage of fullsize, or a specified pixel length, or 'auto'\r\n\t\t\tinnerRadius: 0-1 for percentage of fullsize or a specified pixel length, for creating a donut effect\r\n\t\t\tstartAngle: 0-2 factor of PI used for starting angle (in radians) i.e 3/2 starts at the top, 0 and 2 have the same result\r\n\t\t\ttilt: 0-1 for percentage to tilt the pie, where 1 is no tilt, and 0 is completely flat (nothing will show)\r\n\t\t\toffset: {\r\n\t\t\t\ttop: integer value to move the pie up or down\r\n\t\t\t\tleft: integer value to move the pie left or right, or 'auto'\r\n\t\t\t},\r\n\t\t\tstroke: {\r\n\t\t\t\tcolor: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#FFF')\r\n\t\t\t\twidth: integer pixel width of the stroke\r\n\t\t\t},\r\n\t\t\tlabel: {\r\n\t\t\t\tshow: true/false, or 'auto'\r\n\t\t\t\tformatter:  a user-defined function that modifies the text/style of the label text\r\n\t\t\t\tradius: 0-1 for percentage of fullsize, or a specified pixel length\r\n\t\t\t\tbackground: {\r\n\t\t\t\t\tcolor: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#000')\r\n\t\t\t\t\topacity: 0-1\r\n\t\t\t\t},\r\n\t\t\t\tthreshold: 0-1 for the percentage value at which to hide labels (if they're too small)\r\n\t\t\t},\r\n\t\t\tcombine: {\r\n\t\t\t\tthreshold: 0-1 for the percentage value at which to combine slices (if they're too small)\r\n\t\t\t\tcolor: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#CCC'), if null, the plugin will automatically use the color of the first slice to be combined\r\n\t\t\t\tlabel: any text value of what the combined slice should be labeled\r\n\t\t\t}\r\n\t\t\thighlight: {\r\n\t\t\t\topacity: 0-1\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nMore detail and specific examples can be found in the included HTML file.\r\n\r\n*/\r\n\r\n(function($) {\r\n\r\n\t// Maximum redraw attempts when fitting labels within the plot\r\n\r\n\tvar REDRAW_ATTEMPTS = 10;\r\n\r\n\t// Factor by which to shrink the pie when fitting labels within the plot\r\n\r\n\tvar REDRAW_SHRINK = 0.95;\r\n\r\n\tfunction init(plot) {\r\n\r\n\t\tvar canvas = null,\r\n\t\t\ttarget = null,\r\n\t\t\tmaxRadius = null,\r\n\t\t\tcenterLeft = null,\r\n\t\t\tcenterTop = null,\r\n\t\t\tprocessed = false,\r\n\t\t\tctx = null;\r\n\r\n\t\t// interactive variables\r\n\r\n\t\tvar highlights = [];\r\n\r\n\t\t// add hook to determine if pie plugin in enabled, and then perform necessary operations\r\n\r\n\t\tplot.hooks.processOptions.push(function(plot, options) {\r\n\t\t\tif (options.series.pie.show) {\r\n\r\n\t\t\t\toptions.grid.show = false;\r\n\r\n\t\t\t\t// set labels.show\r\n\r\n\t\t\t\tif (options.series.pie.label.show == \"auto\") {\r\n\t\t\t\t\tif (options.legend.show) {\r\n\t\t\t\t\t\toptions.series.pie.label.show = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toptions.series.pie.label.show = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// set radius\r\n\r\n\t\t\t\tif (options.series.pie.radius == \"auto\") {\r\n\t\t\t\t\tif (options.series.pie.label.show) {\r\n\t\t\t\t\t\toptions.series.pie.radius = 3/4;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toptions.series.pie.radius = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ensure sane tilt\r\n\r\n\t\t\t\tif (options.series.pie.tilt > 1) {\r\n\t\t\t\t\toptions.series.pie.tilt = 1;\r\n\t\t\t\t} else if (options.series.pie.tilt < 0) {\r\n\t\t\t\t\toptions.series.pie.tilt = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tplot.hooks.bindEvents.push(function(plot, eventHolder) {\r\n\t\t\tvar options = plot.getOptions();\r\n\t\t\tif (options.series.pie.show) {\r\n\t\t\t\tif (options.grid.hoverable) {\r\n\t\t\t\t\teventHolder.unbind(\"mousemove\").mousemove(onMouseMove);\r\n\t\t\t\t}\r\n\t\t\t\tif (options.grid.clickable) {\r\n\t\t\t\t\teventHolder.unbind(\"click\").click(onClick);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tplot.hooks.processDatapoints.push(function(plot, series, data, datapoints) {\r\n\t\t\tvar options = plot.getOptions();\r\n\t\t\tif (options.series.pie.show) {\r\n\t\t\t\tprocessDatapoints(plot, series, data, datapoints);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tplot.hooks.drawOverlay.push(function(plot, octx) {\r\n\t\t\tvar options = plot.getOptions();\r\n\t\t\tif (options.series.pie.show) {\r\n\t\t\t\tdrawOverlay(plot, octx);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tplot.hooks.draw.push(function(plot, newCtx) {\r\n\t\t\tvar options = plot.getOptions();\r\n\t\t\tif (options.series.pie.show) {\r\n\t\t\t\tdraw(plot, newCtx);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction processDatapoints(plot, series, datapoints) {\r\n\t\t\tif (!processed)\t{\r\n\t\t\t\tprocessed = true;\r\n\t\t\t\tcanvas = plot.getCanvas();\r\n\t\t\t\ttarget = $(canvas).parent();\r\n\t\t\t\toptions = plot.getOptions();\r\n\t\t\t\tplot.setData(combine(plot.getData()));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction combine(data) {\r\n\r\n\t\t\tvar total = 0,\r\n\t\t\t\tcombined = 0,\r\n\t\t\t\tnumCombined = 0,\r\n\t\t\t\tcolor = options.series.pie.combine.color,\r\n\t\t\t\tnewdata = [];\r\n\r\n\t\t\t// Fix up the raw data from Flot, ensuring the data is numeric\r\n\r\n\t\t\tfor (var i = 0; i < data.length; ++i) {\r\n\r\n\t\t\t\tvar value = data[i].data;\r\n\r\n\t\t\t\t// If the data is an array, we'll assume that it's a standard\r\n\t\t\t\t// Flot x-y pair, and are concerned only with the second value.\r\n\r\n\t\t\t\t// Note how we use the original array, rather than creating a\r\n\t\t\t\t// new one; this is more efficient and preserves any extra data\r\n\t\t\t\t// that the user may have stored in higher indexes.\r\n\r\n\t\t\t\tif ($.isArray(value) && value.length == 1) {\r\n    \t\t\t\tvalue = value[0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($.isArray(value)) {\r\n\t\t\t\t\t// Equivalent to $.isNumeric() but compatible with jQuery < 1.7\r\n\t\t\t\t\tif (!isNaN(parseFloat(value[1])) && isFinite(value[1])) {\r\n\t\t\t\t\t\tvalue[1] = +value[1];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalue[1] = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (!isNaN(parseFloat(value)) && isFinite(value)) {\r\n\t\t\t\t\tvalue = [1, +value];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = [1, 0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata[i].data = [value];\r\n\t\t\t}\r\n\r\n\t\t\t// Sum up all the slices, so we can calculate percentages for each\r\n\r\n\t\t\tfor (var i = 0; i < data.length; ++i) {\r\n\t\t\t\ttotal += data[i].data[0][1];\r\n\t\t\t}\r\n\r\n\t\t\t// Count the number of slices with percentages below the combine\r\n\t\t\t// threshold; if it turns out to be just one, we won't combine.\r\n\r\n\t\t\tfor (var i = 0; i < data.length; ++i) {\r\n\t\t\t\tvar value = data[i].data[0][1];\r\n\t\t\t\tif (value / total <= options.series.pie.combine.threshold) {\r\n\t\t\t\t\tcombined += value;\r\n\t\t\t\t\tnumCombined++;\r\n\t\t\t\t\tif (!color) {\r\n\t\t\t\t\t\tcolor = data[i].color;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < data.length; ++i) {\r\n\t\t\t\tvar value = data[i].data[0][1];\r\n\t\t\t\tif (numCombined < 2 || value / total > options.series.pie.combine.threshold) {\r\n\t\t\t\t\tnewdata.push({\r\n\t\t\t\t\t\tdata: [[1, value]],\r\n\t\t\t\t\t\tcolor: data[i].color,\r\n\t\t\t\t\t\tlabel: data[i].label,\r\n\t\t\t\t\t\tangle: value * Math.PI * 2 / total,\r\n\t\t\t\t\t\tpercent: value / (total / 100)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (numCombined > 1) {\r\n\t\t\t\tnewdata.push({\r\n\t\t\t\t\tdata: [[1, combined]],\r\n\t\t\t\t\tcolor: color,\r\n\t\t\t\t\tlabel: options.series.pie.combine.label,\r\n\t\t\t\t\tangle: combined * Math.PI * 2 / total,\r\n\t\t\t\t\tpercent: combined / (total / 100)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn newdata;\r\n\t\t}\r\n\r\n\t\tfunction draw(plot, newCtx) {\r\n\r\n\t\t\tif (!target) {\r\n\t\t\t\treturn; // if no series were passed\r\n\t\t\t}\r\n\r\n\t\t\tvar canvasWidth = plot.getPlaceholder().width(),\r\n\t\t\t\tcanvasHeight = plot.getPlaceholder().height(),\r\n\t\t\t\tlegendWidth = target.children().filter(\".legend\").children().width() || 0;\r\n\r\n\t\t\tctx = newCtx;\r\n\r\n\t\t\t// WARNING: HACK! REWRITE THIS CODE AS SOON AS POSSIBLE!\r\n\r\n\t\t\t// When combining smaller slices into an 'other' slice, we need to\r\n\t\t\t// add a new series.  Since Flot gives plugins no way to modify the\r\n\t\t\t// list of series, the pie plugin uses a hack where the first call\r\n\t\t\t// to processDatapoints results in a call to setData with the new\r\n\t\t\t// list of series, then subsequent processDatapoints do nothing.\r\n\r\n\t\t\t// The plugin-global 'processed' flag is used to control this hack;\r\n\t\t\t// it starts out false, and is set to true after the first call to\r\n\t\t\t// processDatapoints.\r\n\r\n\t\t\t// Unfortunately this turns future setData calls into no-ops; they\r\n\t\t\t// call processDatapoints, the flag is true, and nothing happens.\r\n\r\n\t\t\t// To fix this we'll set the flag back to false here in draw, when\r\n\t\t\t// all series have been processed, so the next sequence of calls to\r\n\t\t\t// processDatapoints once again starts out with a slice-combine.\r\n\t\t\t// This is really a hack; in 0.9 we need to give plugins a proper\r\n\t\t\t// way to modify series before any processing begins.\r\n\r\n\t\t\tprocessed = false;\r\n\r\n\t\t\t// calculate maximum radius and center point\r\n\r\n\t\t\tmaxRadius =  Math.min(canvasWidth, canvasHeight / options.series.pie.tilt) / 2;\r\n\t\t\tcenterTop = canvasHeight / 2 + options.series.pie.offset.top;\r\n\t\t\tcenterLeft = canvasWidth / 2;\r\n\r\n\t\t\tif (options.series.pie.offset.left == \"auto\") {\r\n\t\t\t\tif (options.legend.position.match(\"w\")) {\r\n\t\t\t\t\tcenterLeft += legendWidth / 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcenterLeft -= legendWidth / 2;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcenterLeft += options.series.pie.offset.left;\r\n\t\t\t}\r\n\r\n\t\t\tif (centerLeft < maxRadius) {\r\n\t\t\t\tcenterLeft = maxRadius;\r\n\t\t\t} else if (centerLeft > canvasWidth - maxRadius) {\r\n\t\t\t\tcenterLeft = canvasWidth - maxRadius;\r\n\t\t\t}\r\n\r\n\t\t\tvar slices = plot.getData(),\r\n\t\t\t\tattempts = 0;\r\n\r\n\t\t\t// Keep shrinking the pie's radius until drawPie returns true,\r\n\t\t\t// indicating that all the labels fit, or we try too many times.\r\n\r\n\t\t\tdo {\r\n\t\t\t\tif (attempts > 0) {\r\n\t\t\t\t\tmaxRadius *= REDRAW_SHRINK;\r\n\t\t\t\t}\r\n\t\t\t\tattempts += 1;\r\n\t\t\t\tclear();\r\n\t\t\t\tif (options.series.pie.tilt <= 0.8) {\r\n\t\t\t\t\tdrawShadow();\r\n\t\t\t\t}\r\n\t\t\t} while (!drawPie() && attempts < REDRAW_ATTEMPTS)\r\n\r\n\t\t\tif (attempts >= REDRAW_ATTEMPTS) {\r\n\t\t\t\tclear();\r\n\t\t\t\ttarget.prepend(\"<div class='error'>Could not draw pie with labels contained inside canvas</div>\");\r\n\t\t\t}\r\n\r\n\t\t\tif (plot.setSeries && plot.insertLegend) {\r\n\t\t\t\tplot.setSeries(slices);\r\n\t\t\t\tplot.insertLegend();\r\n\t\t\t}\r\n\r\n\t\t\t// we're actually done at this point, just defining internal functions at this point\r\n\r\n\t\t\tfunction clear() {\r\n\t\t\t\tctx.clearRect(0, 0, canvasWidth, canvasHeight);\r\n\t\t\t\ttarget.children().filter(\".pieLabel, .pieLabelBackground\").remove();\r\n\t\t\t}\r\n\r\n\t\t\tfunction drawShadow() {\r\n\r\n\t\t\t\tvar shadowLeft = options.series.pie.shadow.left;\r\n\t\t\t\tvar shadowTop = options.series.pie.shadow.top;\r\n\t\t\t\tvar edge = 10;\r\n\t\t\t\tvar alpha = options.series.pie.shadow.alpha;\r\n\t\t\t\tvar radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;\r\n\r\n\t\t\t\tif (radius >= canvasWidth / 2 - shadowLeft || radius * options.series.pie.tilt >= canvasHeight / 2 - shadowTop || radius <= edge) {\r\n\t\t\t\t\treturn;\t// shadow would be outside canvas, so don't draw it\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.translate(shadowLeft,shadowTop);\r\n\t\t\t\tctx.globalAlpha = alpha;\r\n\t\t\t\tctx.fillStyle = \"#000\";\r\n\r\n\t\t\t\t// center and rotate to starting position\r\n\r\n\t\t\t\tctx.translate(centerLeft,centerTop);\r\n\t\t\t\tctx.scale(1, options.series.pie.tilt);\r\n\r\n\t\t\t\t//radius -= edge;\r\n\r\n\t\t\t\tfor (var i = 1; i <= edge; i++) {\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc(0, 0, radius, 0, Math.PI * 2, false);\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tradius -= i;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\r\n\t\t\tfunction drawPie() {\r\n\r\n\t\t\t\tvar startAngle = Math.PI * options.series.pie.startAngle;\r\n\t\t\t\tvar radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;\r\n\r\n\t\t\t\t// center and rotate to starting position\r\n\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.translate(centerLeft,centerTop);\r\n\t\t\t\tctx.scale(1, options.series.pie.tilt);\r\n\t\t\t\t//ctx.rotate(startAngle); // start at top; -- This doesn't work properly in Opera\r\n\r\n\t\t\t\t// draw slices\r\n\r\n\t\t\t\tctx.save();\r\n\t\t\t\tvar currentAngle = startAngle;\r\n\t\t\t\tfor (var i = 0; i < slices.length; ++i) {\r\n\t\t\t\t\tslices[i].startAngle = currentAngle;\r\n\t\t\t\t\tdrawSlice(slices[i].angle, slices[i].color, true);\r\n\t\t\t\t}\r\n\t\t\t\tctx.restore();\r\n\r\n\t\t\t\t// draw slice outlines\r\n\r\n\t\t\t\tif (options.series.pie.stroke.width > 0) {\r\n\t\t\t\t\tctx.save();\r\n\t\t\t\t\tctx.lineWidth = options.series.pie.stroke.width;\r\n\t\t\t\t\tcurrentAngle = startAngle;\r\n\t\t\t\t\tfor (var i = 0; i < slices.length; ++i) {\r\n\t\t\t\t\t\tdrawSlice(slices[i].angle, options.series.pie.stroke.color, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// draw donut hole\r\n\r\n\t\t\t\tdrawDonutHole(ctx);\r\n\r\n\t\t\t\tctx.restore();\r\n\r\n\t\t\t\t// Draw the labels, returning true if they fit within the plot\r\n\r\n\t\t\t\tif (options.series.pie.label.show) {\r\n\t\t\t\t\treturn drawLabels();\r\n\t\t\t\t} else return true;\r\n\r\n\t\t\t\tfunction drawSlice(angle, color, fill) {\r\n\r\n\t\t\t\t\tif (angle <= 0 || isNaN(angle)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (fill) {\r\n\t\t\t\t\t\tctx.fillStyle = color;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\t\t\tctx.lineJoin = \"round\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tif (Math.abs(angle - Math.PI * 2) > 0.000000001) {\r\n\t\t\t\t\t\tctx.moveTo(0, 0); // Center of the pie\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//ctx.arc(0, 0, radius, 0, angle, false); // This doesn't work properly in Opera\r\n\t\t\t\t\tctx.arc(0, 0, radius,currentAngle, currentAngle + angle / 2, false);\r\n\t\t\t\t\tctx.arc(0, 0, radius,currentAngle + angle / 2, currentAngle + angle, false);\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t//ctx.rotate(angle); // This doesn't work properly in Opera\r\n\t\t\t\t\tcurrentAngle += angle;\r\n\r\n\t\t\t\t\tif (fill) {\r\n\t\t\t\t\t\tctx.fill();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction drawLabels() {\r\n\r\n\t\t\t\t\tvar currentAngle = startAngle;\r\n\t\t\t\t\tvar radius = options.series.pie.label.radius > 1 ? options.series.pie.label.radius : maxRadius * options.series.pie.label.radius;\r\n\r\n\t\t\t\t\tfor (var i = 0; i < slices.length; ++i) {\r\n\t\t\t\t\t\tif (slices[i].percent >= options.series.pie.label.threshold * 100) {\r\n\t\t\t\t\t\t\tif (!drawLabel(slices[i], currentAngle, i)) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrentAngle += slices[i].angle;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\tfunction drawLabel(slice, startAngle, index) {\r\n\r\n\t\t\t\t\t\tif (slice.data[0][1] == 0) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// format label text\r\n\r\n\t\t\t\t\t\tvar lf = options.legend.labelFormatter, text, plf = options.series.pie.label.formatter;\r\n\r\n\t\t\t\t\t\tif (lf) {\r\n\t\t\t\t\t\t\ttext = lf(slice.label, slice);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttext = slice.label;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (plf) {\r\n\t\t\t\t\t\t\ttext = plf(text, slice);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar halfAngle = ((startAngle + slice.angle) + startAngle) / 2;\r\n\t\t\t\t\t\tvar x = centerLeft + Math.round(Math.cos(halfAngle) * radius);\r\n\t\t\t\t\t\tvar y = centerTop + Math.round(Math.sin(halfAngle) * radius) * options.series.pie.tilt;\r\n\r\n\t\t\t\t\t\tvar html = \"<span class='pieLabel' id='pieLabel\" + index + \"' style='position:absolute;top:\" + y + \"px;left:\" + x + \"px;'>\" + text + \"</span>\";\r\n\t\t\t\t\t\ttarget.append(html);\r\n\r\n\t\t\t\t\t\tvar label = target.children(\"#pieLabel\" + index);\r\n\t\t\t\t\t\tvar labelTop = (y - label.height() / 2);\r\n\t\t\t\t\t\tvar labelLeft = (x - label.width() / 2);\r\n\r\n\t\t\t\t\t\tlabel.css(\"top\", labelTop);\r\n\t\t\t\t\t\tlabel.css(\"left\", labelLeft);\r\n\r\n\t\t\t\t\t\t// check to make sure that the label is not outside the canvas\r\n\r\n\t\t\t\t\t\tif (0 - labelTop > 0 || 0 - labelLeft > 0 || canvasHeight - (labelTop + label.height()) < 0 || canvasWidth - (labelLeft + label.width()) < 0) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (options.series.pie.label.background.opacity != 0) {\r\n\r\n\t\t\t\t\t\t\t// put in the transparent background separately to avoid blended labels and label boxes\r\n\r\n\t\t\t\t\t\t\tvar c = options.series.pie.label.background.color;\r\n\r\n\t\t\t\t\t\t\tif (c == null) {\r\n\t\t\t\t\t\t\t\tc = slice.color;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar pos = \"top:\" + labelTop + \"px;left:\" + labelLeft + \"px;\";\r\n\t\t\t\t\t\t\t$(\"<div class='pieLabelBackground' style='position:absolute;width:\" + label.width() + \"px;height:\" + label.height() + \"px;\" + pos + \"background-color:\" + c + \";'></div>\")\r\n\t\t\t\t\t\t\t\t.css(\"opacity\", options.series.pie.label.background.opacity)\r\n\t\t\t\t\t\t\t\t.insertBefore(label);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} // end individual label function\r\n\t\t\t\t} // end drawLabels function\r\n\t\t\t} // end drawPie function\r\n\t\t} // end draw function\r\n\r\n\t\t// Placed here because it needs to be accessed from multiple locations\r\n\r\n\t\tfunction drawDonutHole(layer) {\r\n\t\t\tif (options.series.pie.innerRadius > 0) {\r\n\r\n\t\t\t\t// subtract the center\r\n\r\n\t\t\t\tlayer.save();\r\n\t\t\t\tvar innerRadius = options.series.pie.innerRadius > 1 ? options.series.pie.innerRadius : maxRadius * options.series.pie.innerRadius;\r\n\t\t\t\tlayer.globalCompositeOperation = \"destination-out\"; // this does not work with excanvas, but it will fall back to using the stroke color\r\n\t\t\t\tlayer.beginPath();\r\n\t\t\t\tlayer.fillStyle = options.series.pie.stroke.color;\r\n\t\t\t\tlayer.arc(0, 0, innerRadius, 0, Math.PI * 2, false);\r\n\t\t\t\tlayer.fill();\r\n\t\t\t\tlayer.closePath();\r\n\t\t\t\tlayer.restore();\r\n\r\n\t\t\t\t// add inner stroke\r\n\r\n\t\t\t\tlayer.save();\r\n\t\t\t\tlayer.beginPath();\r\n\t\t\t\tlayer.strokeStyle = options.series.pie.stroke.color;\r\n\t\t\t\tlayer.arc(0, 0, innerRadius, 0, Math.PI * 2, false);\r\n\t\t\t\tlayer.stroke();\r\n\t\t\t\tlayer.closePath();\r\n\t\t\t\tlayer.restore();\r\n\r\n\t\t\t\t// TODO: add extra shadow inside hole (with a mask) if the pie is tilted.\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//-- Additional Interactive related functions --\r\n\r\n\t\tfunction isPointInPoly(poly, pt) {\r\n\t\t\tfor(var c = false, i = -1, l = poly.length, j = l - 1; ++i < l; j = i)\r\n\t\t\t\t((poly[i][1] <= pt[1] && pt[1] < poly[j][1]) || (poly[j][1] <= pt[1] && pt[1]< poly[i][1]))\r\n\t\t\t\t&& (pt[0] < (poly[j][0] - poly[i][0]) * (pt[1] - poly[i][1]) / (poly[j][1] - poly[i][1]) + poly[i][0])\r\n\t\t\t\t&& (c = !c);\r\n\t\t\treturn c;\r\n\t\t}\r\n\r\n\t\tfunction findNearbySlice(mouseX, mouseY) {\r\n\r\n\t\t\tvar slices = plot.getData(),\r\n\t\t\t\toptions = plot.getOptions(),\r\n\t\t\t\tradius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius,\r\n\t\t\t\tx, y;\r\n\r\n\t\t\tfor (var i = 0; i < slices.length; ++i) {\r\n\r\n\t\t\t\tvar s = slices[i];\r\n\r\n\t\t\t\tif (s.pie.show) {\r\n\r\n\t\t\t\t\tctx.save();\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(0, 0); // Center of the pie\r\n\t\t\t\t\t//ctx.scale(1, options.series.pie.tilt);\t// this actually seems to break everything when here.\r\n\t\t\t\t\tctx.arc(0, 0, radius, s.startAngle, s.startAngle + s.angle / 2, false);\r\n\t\t\t\t\tctx.arc(0, 0, radius, s.startAngle + s.angle / 2, s.startAngle + s.angle, false);\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tx = mouseX - centerLeft;\r\n\t\t\t\t\ty = mouseY - centerTop;\r\n\r\n\t\t\t\t\tif (ctx.isPointInPath) {\r\n\t\t\t\t\t\tif (ctx.isPointInPath(mouseX - centerLeft, mouseY - centerTop)) {\r\n\t\t\t\t\t\t\tctx.restore();\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tdatapoint: [s.percent, s.data],\r\n\t\t\t\t\t\t\t\tdataIndex: 0,\r\n\t\t\t\t\t\t\t\tseries: s,\r\n\t\t\t\t\t\t\t\tseriesIndex: i\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// excanvas for IE doesn;t support isPointInPath, this is a workaround.\r\n\r\n\t\t\t\t\t\tvar p1X = radius * Math.cos(s.startAngle),\r\n\t\t\t\t\t\t\tp1Y = radius * Math.sin(s.startAngle),\r\n\t\t\t\t\t\t\tp2X = radius * Math.cos(s.startAngle + s.angle / 4),\r\n\t\t\t\t\t\t\tp2Y = radius * Math.sin(s.startAngle + s.angle / 4),\r\n\t\t\t\t\t\t\tp3X = radius * Math.cos(s.startAngle + s.angle / 2),\r\n\t\t\t\t\t\t\tp3Y = radius * Math.sin(s.startAngle + s.angle / 2),\r\n\t\t\t\t\t\t\tp4X = radius * Math.cos(s.startAngle + s.angle / 1.5),\r\n\t\t\t\t\t\t\tp4Y = radius * Math.sin(s.startAngle + s.angle / 1.5),\r\n\t\t\t\t\t\t\tp5X = radius * Math.cos(s.startAngle + s.angle),\r\n\t\t\t\t\t\t\tp5Y = radius * Math.sin(s.startAngle + s.angle),\r\n\t\t\t\t\t\t\tarrPoly = [[0, 0], [p1X, p1Y], [p2X, p2Y], [p3X, p3Y], [p4X, p4Y], [p5X, p5Y]],\r\n\t\t\t\t\t\t\tarrPoint = [x, y];\r\n\r\n\t\t\t\t\t\t// TODO: perhaps do some mathmatical trickery here with the Y-coordinate to compensate for pie tilt?\r\n\r\n\t\t\t\t\t\tif (isPointInPoly(arrPoly, arrPoint)) {\r\n\t\t\t\t\t\t\tctx.restore();\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tdatapoint: [s.percent, s.data],\r\n\t\t\t\t\t\t\t\tdataIndex: 0,\r\n\t\t\t\t\t\t\t\tseries: s,\r\n\t\t\t\t\t\t\t\tseriesIndex: i\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\ttriggerClickHoverEvent(\"plothover\", e);\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\ttriggerClickHoverEvent(\"plotclick\", e);\r\n\t\t}\r\n\r\n\t\t// trigger click or hover event (they send the same parameters so we share their code)\r\n\r\n\t\tfunction triggerClickHoverEvent(eventname, e) {\r\n\r\n\t\t\tvar offset = plot.offset();\r\n\t\t\tvar canvasX = parseInt(e.pageX - offset.left);\r\n\t\t\tvar canvasY =  parseInt(e.pageY - offset.top);\r\n\t\t\tvar item = findNearbySlice(canvasX, canvasY);\r\n\r\n\t\t\tif (options.grid.autoHighlight) {\r\n\r\n\t\t\t\t// clear auto-highlights\r\n\r\n\t\t\t\tfor (var i = 0; i < highlights.length; ++i) {\r\n\t\t\t\t\tvar h = highlights[i];\r\n\t\t\t\t\tif (h.auto == eventname && !(item && h.series == item.series)) {\r\n\t\t\t\t\t\tunhighlight(h.series);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// highlight the slice\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\thighlight(item.series, eventname);\r\n\t\t\t}\r\n\r\n\t\t\t// trigger any hover bind events\r\n\r\n\t\t\tvar pos = { pageX: e.pageX, pageY: e.pageY };\r\n\t\t\ttarget.trigger(eventname, [pos, item]);\r\n\t\t}\r\n\r\n\t\tfunction highlight(s, auto) {\r\n\t\t\t//if (typeof s == \"number\") {\r\n\t\t\t//\ts = series[s];\r\n\t\t\t//}\r\n\r\n\t\t\tvar i = indexOfHighlight(s);\r\n\r\n\t\t\tif (i == -1) {\r\n\t\t\t\thighlights.push({ series: s, auto: auto });\r\n\t\t\t\tplot.triggerRedrawOverlay();\r\n\t\t\t} else if (!auto) {\r\n\t\t\t\thighlights[i].auto = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction unhighlight(s) {\r\n\t\t\tif (s == null) {\r\n\t\t\t\thighlights = [];\r\n\t\t\t\tplot.triggerRedrawOverlay();\r\n\t\t\t}\r\n\r\n\t\t\t//if (typeof s == \"number\") {\r\n\t\t\t//\ts = series[s];\r\n\t\t\t//}\r\n\r\n\t\t\tvar i = indexOfHighlight(s);\r\n\r\n\t\t\tif (i != -1) {\r\n\t\t\t\thighlights.splice(i, 1);\r\n\t\t\t\tplot.triggerRedrawOverlay();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction indexOfHighlight(s) {\r\n\t\t\tfor (var i = 0; i < highlights.length; ++i) {\r\n\t\t\t\tvar h = highlights[i];\r\n\t\t\t\tif (h.series == s)\r\n\t\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfunction drawOverlay(plot, octx) {\r\n\r\n\t\t\tvar options = plot.getOptions();\r\n\r\n\t\t\tvar radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;\r\n\r\n\t\t\toctx.save();\r\n\t\t\toctx.translate(centerLeft, centerTop);\r\n\t\t\toctx.scale(1, options.series.pie.tilt);\r\n\r\n\t\t\tfor (var i = 0; i < highlights.length; ++i) {\r\n\t\t\t\tdrawHighlight(highlights[i].series);\r\n\t\t\t}\r\n\r\n\t\t\tdrawDonutHole(octx);\r\n\r\n\t\t\toctx.restore();\r\n\r\n\t\t\tfunction drawHighlight(series) {\r\n\r\n\t\t\t\tif (series.angle <= 0 || isNaN(series.angle)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//octx.fillStyle = parseColor(options.series.pie.highlight.color).scale(null, null, null, options.series.pie.highlight.opacity).toString();\r\n\t\t\t\toctx.fillStyle = \"rgba(255, 255, 255, \" + options.series.pie.highlight.opacity + \")\"; // this is temporary until we have access to parseColor\r\n\t\t\t\toctx.beginPath();\r\n\t\t\t\tif (Math.abs(series.angle - Math.PI * 2) > 0.000000001) {\r\n\t\t\t\t\toctx.moveTo(0, 0); // Center of the pie\r\n\t\t\t\t}\r\n\t\t\t\toctx.arc(0, 0, radius, series.startAngle, series.startAngle + series.angle / 2, false);\r\n\t\t\t\toctx.arc(0, 0, radius, series.startAngle + series.angle / 2, series.startAngle + series.angle, false);\r\n\t\t\t\toctx.closePath();\r\n\t\t\t\toctx.fill();\r\n\t\t\t}\r\n\t\t}\r\n\t} // end init (plugin body)\r\n\r\n\t// define pie specific options and their default values\r\n\r\n\tvar options = {\r\n\t\tseries: {\r\n\t\t\tpie: {\r\n\t\t\t\tshow: false,\r\n\t\t\t\tradius: \"auto\",\t// actual radius of the visible pie (based on full calculated radius if <=1, or hard pixel value)\r\n\t\t\t\tinnerRadius: 0, /* for donut */\r\n\t\t\t\tstartAngle: 3/2,\r\n\t\t\t\ttilt: 1,\r\n\t\t\t\tshadow: {\r\n\t\t\t\t\tleft: 5,\t// shadow left offset\r\n\t\t\t\t\ttop: 15,\t// shadow top offset\r\n\t\t\t\t\talpha: 0.02\t// shadow alpha\r\n\t\t\t\t},\r\n\t\t\t\toffset: {\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\tleft: \"auto\"\r\n\t\t\t\t},\r\n\t\t\t\tstroke: {\r\n\t\t\t\t\tcolor: \"#fff\",\r\n\t\t\t\t\twidth: 1\r\n\t\t\t\t},\r\n\t\t\t\tlabel: {\r\n\t\t\t\t\tshow: \"auto\",\r\n\t\t\t\t\tformatter: function(label, slice) {\r\n\t\t\t\t\t\treturn \"<div style='font-size:x-small;text-align:center;padding:2px;color:\" + slice.color + \";'>\" + label + \"<br/>\" + Math.round(slice.percent) + \"%</div>\";\r\n\t\t\t\t\t},\t// formatter function\r\n\t\t\t\t\tradius: 1,\t// radius at which to place the labels (based on full calculated radius if <=1, or hard pixel value)\r\n\t\t\t\t\tbackground: {\r\n\t\t\t\t\t\tcolor: null,\r\n\t\t\t\t\t\topacity: 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthreshold: 0\t// percentage at which to hide the label (i.e. the slice is too narrow)\r\n\t\t\t\t},\r\n\t\t\t\tcombine: {\r\n\t\t\t\t\tthreshold: -1,\t// percentage at which to combine little slices into one larger slice\r\n\t\t\t\t\tcolor: null,\t// color to give the new slice (auto-generated if null)\r\n\t\t\t\t\tlabel: \"Other\"\t// label to give the new slice\r\n\t\t\t\t},\r\n\t\t\t\thighlight: {\r\n\t\t\t\t\t//color: \"#fff\",\t\t// will add this functionality once parseColor is available\r\n\t\t\t\t\topacity: 0.5\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t$.plot.plugins.push({\r\n\t\tinit: init,\r\n\t\toptions: options,\r\n\t\tname: \"pie\",\r\n\t\tversion: \"1.1\"\r\n\t});\r\n\r\n})(jQuery);\r\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1268;","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\nimport { DashboardModel } from 'app/features/dashboard/dashboard_model';\r\n\r\nexport class BackendSrv {\r\n  private inFlightRequests = {};\r\n  private HTTP_REQUEST_CANCELLED = -1;\r\n  private noBackendCache: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private $http, private alertSrv, private $q, private $timeout, private contextSrv) {}\r\n\r\n  get(url, params?) {\r\n    return this.request({ method: 'GET', url: url, params: params });\r\n  }\r\n\r\n  delete(url) {\r\n    return this.request({ method: 'DELETE', url: url });\r\n  }\r\n\r\n  post(url, data) {\r\n    return this.request({ method: 'POST', url: url, data: data });\r\n  }\r\n\r\n  patch(url, data) {\r\n    return this.request({ method: 'PATCH', url: url, data: data });\r\n  }\r\n\r\n  put(url, data) {\r\n    return this.request({ method: 'PUT', url: url, data: data });\r\n  }\r\n\r\n  withNoBackendCache(callback) {\r\n    this.noBackendCache = true;\r\n    return callback().finally(() => {\r\n      this.noBackendCache = false;\r\n    });\r\n  }\r\n\r\n  requestErrorHandler(err) {\r\n    if (err.isHandled) {\r\n      return;\r\n    }\r\n\r\n    let data = err.data || { message: 'Unexpected error' };\r\n    if (_.isString(data)) {\r\n      data = { message: data };\r\n    }\r\n\r\n    if (err.status === 422) {\r\n      this.alertSrv.set('Validation failed', data.message, 'warning', 4000);\r\n      throw data;\r\n    }\r\n\r\n    data.severity = 'error';\r\n\r\n    if (err.status < 500) {\r\n      data.severity = 'warning';\r\n    }\r\n\r\n    if (data.message) {\r\n      let description = '';\r\n      let message = data.message;\r\n      if (message.length > 80) {\r\n        description = message;\r\n        message = 'Error';\r\n      }\r\n      this.alertSrv.set(message, description, data.severity, 10000);\r\n    }\r\n\r\n    throw data;\r\n  }\r\n\r\n  request(options) {\r\n    options.retry = options.retry || 0;\r\n    const requestIsLocal = !options.url.match(/^http/);\r\n    const firstAttempt = options.retry === 0;\r\n\r\n    if (requestIsLocal) {\r\n      if (this.contextSrv.user && this.contextSrv.user.orgId) {\r\n        options.headers = options.headers || {};\r\n        options.headers['X-Grafana-Org-Id'] = this.contextSrv.user.orgId;\r\n      }\r\n\r\n      if (options.url.indexOf('/') === 0) {\r\n        options.url = options.url.substring(1);\r\n      }\r\n    }\r\n\r\n    return this.$http(options).then(\r\n      results => {\r\n        if (options.method !== 'GET') {\r\n          if (results && results.data.message) {\r\n            if (options.showSuccessAlert !== false) {\r\n              this.alertSrv.set(results.data.message, '', 'success', 3000);\r\n            }\r\n          }\r\n        }\r\n        return results.data;\r\n      },\r\n      err => {\r\n        // handle unauthorized\r\n        if (err.status === 401 && this.contextSrv.user.isSignedIn && firstAttempt) {\r\n          return this.loginPing().then(() => {\r\n            options.retry = 1;\r\n            return this.request(options);\r\n          });\r\n        }\r\n\r\n        this.$timeout(this.requestErrorHandler.bind(this, err), 50);\r\n        throw err;\r\n      }\r\n    );\r\n  }\r\n\r\n  addCanceler(requestId, canceler) {\r\n    if (requestId in this.inFlightRequests) {\r\n      this.inFlightRequests[requestId].push(canceler);\r\n    } else {\r\n      this.inFlightRequests[requestId] = [canceler];\r\n    }\r\n  }\r\n\r\n  resolveCancelerIfExists(requestId) {\r\n    const cancelers = this.inFlightRequests[requestId];\r\n    if (!_.isUndefined(cancelers) && cancelers.length) {\r\n      cancelers[0].resolve();\r\n    }\r\n  }\r\n\r\n  datasourceRequest(options) {\r\n    let canceler = null;\r\n    options.retry = options.retry || 0;\r\n\r\n    // A requestID is provided by the datasource as a unique identifier for a\r\n    // particular query. If the requestID exists, the promise it is keyed to\r\n    // is canceled, canceling the previous datasource request if it is still\r\n    // in-flight.\r\n    const requestId = options.requestId;\r\n    if (requestId) {\r\n      this.resolveCancelerIfExists(requestId);\r\n      // create new canceler\r\n      canceler = this.$q.defer();\r\n      options.timeout = canceler.promise;\r\n      this.addCanceler(requestId, canceler);\r\n    }\r\n\r\n    const requestIsLocal = !options.url.match(/^http/);\r\n    const firstAttempt = options.retry === 0;\r\n\r\n    if (requestIsLocal) {\r\n      if (this.contextSrv.user && this.contextSrv.user.orgId) {\r\n        options.headers = options.headers || {};\r\n        options.headers['X-Grafana-Org-Id'] = this.contextSrv.user.orgId;\r\n      }\r\n\r\n      if (options.url.indexOf('/') === 0) {\r\n        options.url = options.url.substring(1);\r\n      }\r\n\r\n      if (options.headers && options.headers.Authorization) {\r\n        options.headers['X-DS-Authorization'] = options.headers.Authorization;\r\n        delete options.headers.Authorization;\r\n      }\r\n\r\n      if (this.noBackendCache) {\r\n        options.headers['X-Grafana-NoCache'] = 'true';\r\n      }\r\n    }\r\n\r\n    return this.$http(options)\r\n      .then(response => {\r\n        if (!options.silent) {\r\n          appEvents.emit('ds-request-response', response);\r\n        }\r\n        return response;\r\n      })\r\n      .catch(err => {\r\n        if (err.status === this.HTTP_REQUEST_CANCELLED) {\r\n          throw { err, cancelled: true };\r\n        }\r\n\r\n        // handle unauthorized for backend requests\r\n        if (requestIsLocal && firstAttempt && err.status === 401) {\r\n          return this.loginPing().then(() => {\r\n            options.retry = 1;\r\n            if (canceler) {\r\n              canceler.resolve();\r\n            }\r\n            return this.datasourceRequest(options);\r\n          });\r\n        }\r\n\r\n        // populate error obj on Internal Error\r\n        if (_.isString(err.data) && err.status === 500) {\r\n          err.data = {\r\n            error: err.statusText,\r\n            response: err.data,\r\n          };\r\n        }\r\n\r\n        // for Prometheus\r\n        if (err.data && !err.data.message && _.isString(err.data.error)) {\r\n          err.data.message = err.data.error;\r\n        }\r\n        if (!options.silent) {\r\n          appEvents.emit('ds-request-error', err);\r\n        }\r\n        throw err;\r\n      })\r\n      .finally(() => {\r\n        // clean up\r\n        if (options.requestId) {\r\n          this.inFlightRequests[options.requestId].shift();\r\n        }\r\n      });\r\n  }\r\n\r\n  loginPing() {\r\n    return this.request({ url: '/api/login/ping', method: 'GET', retry: 1 });\r\n  }\r\n\r\n  search(query) {\r\n    return this.get('/api/search', query);\r\n  }\r\n\r\n  getDashboardBySlug(slug) {\r\n    return this.get(`/api/dashboards/db/${slug}`);\r\n  }\r\n\r\n  getDashboardByUid(uid: string) {\r\n    return this.get(`/api/dashboards/uid/${uid}`);\r\n  }\r\n\r\n  getFolderByUid(uid: string) {\r\n    return this.get(`/api/folders/${uid}`);\r\n  }\r\n\r\n  saveDashboard(dash, options) {\r\n    options = options || {};\r\n\r\n    return this.post('/api/dashboards/db/', {\r\n      dashboard: dash,\r\n      folderId: options.folderId,\r\n      overwrite: options.overwrite === true,\r\n      message: options.message || '',\r\n    });\r\n  }\r\n\r\n  createFolder(payload: any) {\r\n    return this.post('/api/folders', payload);\r\n  }\r\n\r\n  deleteFolder(uid: string, showSuccessAlert) {\r\n    return this.request({ method: 'DELETE', url: `/api/folders/${uid}`, showSuccessAlert: showSuccessAlert === true });\r\n  }\r\n\r\n  deleteDashboard(uid, showSuccessAlert) {\r\n    return this.request({\r\n      method: 'DELETE',\r\n      url: `/api/dashboards/uid/${uid}`,\r\n      showSuccessAlert: showSuccessAlert === true,\r\n    });\r\n  }\r\n\r\n  deleteFoldersAndDashboards(folderUids, dashboardUids) {\r\n    const tasks = [];\r\n\r\n    for (const folderUid of folderUids) {\r\n      tasks.push(this.createTask(this.deleteFolder.bind(this), true, folderUid, true));\r\n    }\r\n\r\n    for (const dashboardUid of dashboardUids) {\r\n      tasks.push(this.createTask(this.deleteDashboard.bind(this), true, dashboardUid, true));\r\n    }\r\n\r\n    return this.executeInOrder(tasks, []);\r\n  }\r\n\r\n  moveDashboards(dashboardUids, toFolder) {\r\n    const tasks = [];\r\n\r\n    for (const uid of dashboardUids) {\r\n      tasks.push(this.createTask(this.moveDashboard.bind(this), true, uid, toFolder));\r\n    }\r\n\r\n    return this.executeInOrder(tasks, []).then(result => {\r\n      return {\r\n        totalCount: result.length,\r\n        successCount: _.filter(result, { succeeded: true }).length,\r\n        alreadyInFolderCount: _.filter(result, { alreadyInFolder: true }).length,\r\n      };\r\n    });\r\n  }\r\n\r\n  private moveDashboard(uid, toFolder) {\r\n    const deferred = this.$q.defer();\r\n\r\n    this.getDashboardByUid(uid).then(fullDash => {\r\n      const model = new DashboardModel(fullDash.dashboard, fullDash.meta);\r\n\r\n      if ((!fullDash.meta.folderId && toFolder.id === 0) || fullDash.meta.folderId === toFolder.id) {\r\n        deferred.resolve({ alreadyInFolder: true });\r\n        return;\r\n      }\r\n\r\n      const clone = model.getSaveModelClone();\r\n      const options = {\r\n        folderId: toFolder.id,\r\n        overwrite: false,\r\n      };\r\n\r\n      this.saveDashboard(clone, options)\r\n        .then(() => {\r\n          deferred.resolve({ succeeded: true });\r\n        })\r\n        .catch(err => {\r\n          if (err.data && err.data.status === 'plugin-dashboard') {\r\n            err.isHandled = true;\r\n            options.overwrite = true;\r\n\r\n            this.saveDashboard(clone, options)\r\n              .then(() => {\r\n                deferred.resolve({ succeeded: true });\r\n              })\r\n              .catch(err => {\r\n                deferred.resolve({ succeeded: false });\r\n              });\r\n          } else {\r\n            deferred.resolve({ succeeded: false });\r\n          }\r\n        });\r\n    });\r\n\r\n    return deferred.promise;\r\n  }\r\n\r\n  private createTask(fn, ignoreRejections, ...args: any[]) {\r\n    return result => {\r\n      return fn\r\n        .apply(null, args)\r\n        .then(res => {\r\n          return Array.prototype.concat(result, [res]);\r\n        })\r\n        .catch(err => {\r\n          if (ignoreRejections) {\r\n            return result;\r\n          }\r\n\r\n          throw err;\r\n        });\r\n    };\r\n  }\r\n\r\n  private executeInOrder(tasks, initialValue) {\r\n    return tasks.reduce(this.$q.when, initialValue);\r\n  }\r\n}\r\n\r\ncoreModule.service('backendSrv', BackendSrv);\r\n\r\n//\r\n// Code below is to expore the service to react components\r\n//\r\n\r\nlet singletonInstance: BackendSrv;\r\n\r\nexport function setBackendSrv(instance: BackendSrv) {\r\n  singletonInstance = instance;\r\n}\r\n\r\nexport function getBackendSrv(): BackendSrv {\r\n  return singletonInstance;\r\n}\r\n","import _ from 'lodash';\r\nimport coreModule from '../core_module';\r\n\r\n/** @ngInject */\r\nfunction dashClass($timeout) {\r\n  return {\r\n    link: ($scope, elem) => {\r\n      $scope.ctrl.dashboard.events.on('view-mode-changed', panel => {\r\n        console.log('view-mode-changed', panel.fullscreen);\r\n        if (panel.fullscreen) {\r\n          elem.addClass('panel-in-fullscreen');\r\n        } else {\r\n          $timeout(() => {\r\n            elem.removeClass('panel-in-fullscreen');\r\n          });\r\n        }\r\n      });\r\n\r\n      elem.toggleClass('panel-in-fullscreen', $scope.ctrl.dashboard.meta.fullscreen === true);\r\n\r\n      $scope.$watch('ctrl.dashboardViewState.state.editview', newValue => {\r\n        if (newValue) {\r\n          elem.toggleClass('dashboard-page--settings-opening', _.isString(newValue));\r\n          setTimeout(() => {\r\n            elem.toggleClass('dashboard-page--settings-open', _.isString(newValue));\r\n          }, 10);\r\n        } else {\r\n          elem.removeClass('dashboard-page--settings-opening');\r\n          elem.removeClass('dashboard-page--settings-open');\r\n        }\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('dashClass', dashClass);\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport coreModule from '../core_module';\r\n\r\n/** @ngInject */\r\nexport function dropdownTypeahead($compile) {\r\n  const inputTemplate =\r\n    '<input type=\"text\"' +\r\n    ' class=\"gf-form-input input-medium tight-form-input\"' +\r\n    ' spellcheck=\"false\" style=\"display:none\"></input>';\r\n\r\n  const buttonTemplate =\r\n    '<a class=\"gf-form-label tight-form-func dropdown-toggle\"' +\r\n    ' tabindex=\"1\" gf-dropdown=\"menuItems\" data-toggle=\"dropdown\"' +\r\n    ' data-placement=\"top\"><i class=\"fa fa-plus\"></i></a>';\r\n\r\n  return {\r\n    scope: {\r\n      menuItems: '=dropdownTypeahead',\r\n      dropdownTypeaheadOnSelect: '&dropdownTypeaheadOnSelect',\r\n      model: '=ngModel',\r\n    },\r\n    link: ($scope, elem, attrs) => {\r\n      const $input = $(inputTemplate);\r\n      const $button = $(buttonTemplate);\r\n      $input.appendTo(elem);\r\n      $button.appendTo(elem);\r\n\r\n      if (attrs.linkText) {\r\n        $button.html(attrs.linkText);\r\n      }\r\n\r\n      if (attrs.ngModel) {\r\n        $scope.$watch('model', newValue => {\r\n          _.each($scope.menuItems, item => {\r\n            _.each(item.submenu, subItem => {\r\n              if (subItem.value === newValue) {\r\n                $button.html(subItem.text);\r\n              }\r\n            });\r\n          });\r\n        });\r\n      }\r\n\r\n      const typeaheadValues = _.reduce(\r\n        $scope.menuItems,\r\n        (memo, value, index) => {\r\n          if (!value.submenu) {\r\n            value.click = 'menuItemSelected(' + index + ')';\r\n            memo.push(value.text);\r\n          } else {\r\n            _.each(value.submenu, (item, subIndex) => {\r\n              item.click = 'menuItemSelected(' + index + ',' + subIndex + ')';\r\n              memo.push(value.text + ' ' + item.text);\r\n            });\r\n          }\r\n          return memo;\r\n        },\r\n        []\r\n      );\r\n\r\n      $scope.menuItemSelected = (index, subIndex) => {\r\n        const menuItem = $scope.menuItems[index];\r\n        const payload: any = { $item: menuItem };\r\n        if (menuItem.submenu && subIndex !== void 0) {\r\n          payload.$subItem = menuItem.submenu[subIndex];\r\n        }\r\n        $scope.dropdownTypeaheadOnSelect(payload);\r\n      };\r\n\r\n      $input.attr('data-provide', 'typeahead');\r\n      $input.typeahead({\r\n        source: typeaheadValues,\r\n        minLength: 1,\r\n        items: 10,\r\n        updater: value => {\r\n          const result: any = {};\r\n          _.each($scope.menuItems, menuItem => {\r\n            _.each(menuItem.submenu, submenuItem => {\r\n              if (value === menuItem.text + ' ' + submenuItem.text) {\r\n                result.$subItem = submenuItem;\r\n                result.$item = menuItem;\r\n              }\r\n            });\r\n          });\r\n\r\n          if (result.$item) {\r\n            $scope.$apply(() => {\r\n              $scope.dropdownTypeaheadOnSelect(result);\r\n            });\r\n          }\r\n\r\n          $input.trigger('blur');\r\n          return '';\r\n        },\r\n      });\r\n\r\n      $button.click(() => {\r\n        $button.hide();\r\n        $input.show();\r\n        $input.focus();\r\n      });\r\n\r\n      $input.keyup(() => {\r\n        elem.toggleClass('open', $input.val() === '');\r\n      });\r\n\r\n      $input.blur(() => {\r\n        $input.hide();\r\n        $input.val('');\r\n        $button.show();\r\n        $button.focus();\r\n        // clicking the function dropdown menu won't\r\n        // work if you remove class at once\r\n        setTimeout(() => {\r\n          elem.removeClass('open');\r\n        }, 200);\r\n      });\r\n\r\n      $compile(elem.contents())($scope);\r\n    },\r\n  };\r\n}\r\n\r\n/** @ngInject */\r\nexport function dropdownTypeahead2($compile) {\r\n  const inputTemplate =\r\n    '<input type=\"text\"' + ' class=\"gf-form-input\"' + ' spellcheck=\"false\" style=\"display:none\"></input>';\r\n\r\n  const buttonTemplate =\r\n    '<a class=\"gf-form-input dropdown-toggle\"' +\r\n    ' tabindex=\"1\" gf-dropdown=\"menuItems\" data-toggle=\"dropdown\"' +\r\n    ' data-placement=\"top\"><i class=\"fa fa-plus\"></i></a>';\r\n\r\n  return {\r\n    scope: {\r\n      menuItems: '=dropdownTypeahead2',\r\n      dropdownTypeaheadOnSelect: '&dropdownTypeaheadOnSelect',\r\n      model: '=ngModel',\r\n    },\r\n    link: ($scope, elem, attrs) => {\r\n      const $input = $(inputTemplate);\r\n      const $button = $(buttonTemplate);\r\n      $input.appendTo(elem);\r\n      $button.appendTo(elem);\r\n\r\n      if (attrs.linkText) {\r\n        $button.html(attrs.linkText);\r\n      }\r\n\r\n      if (attrs.ngModel) {\r\n        $scope.$watch('model', newValue => {\r\n          _.each($scope.menuItems, item => {\r\n            _.each(item.submenu, subItem => {\r\n              if (subItem.value === newValue) {\r\n                $button.html(subItem.text);\r\n              }\r\n            });\r\n          });\r\n        });\r\n      }\r\n\r\n      const typeaheadValues = _.reduce(\r\n        $scope.menuItems,\r\n        (memo, value, index) => {\r\n          if (!value.submenu) {\r\n            value.click = 'menuItemSelected(' + index + ')';\r\n            memo.push(value.text);\r\n          } else {\r\n            _.each(value.submenu, (item, subIndex) => {\r\n              item.click = 'menuItemSelected(' + index + ',' + subIndex + ')';\r\n              memo.push(value.text + ' ' + item.text);\r\n            });\r\n          }\r\n          return memo;\r\n        },\r\n        []\r\n      );\r\n\r\n      $scope.menuItemSelected = (index, subIndex) => {\r\n        const menuItem = $scope.menuItems[index];\r\n        const payload: any = { $item: menuItem };\r\n        if (menuItem.submenu && subIndex !== void 0) {\r\n          payload.$subItem = menuItem.submenu[subIndex];\r\n        }\r\n        $scope.dropdownTypeaheadOnSelect(payload);\r\n      };\r\n\r\n      $input.attr('data-provide', 'typeahead');\r\n      $input.typeahead({\r\n        source: typeaheadValues,\r\n        minLength: 1,\r\n        items: 10,\r\n        updater: value => {\r\n          const result: any = {};\r\n          _.each($scope.menuItems, menuItem => {\r\n            _.each(menuItem.submenu, submenuItem => {\r\n              if (value === menuItem.text + ' ' + submenuItem.text) {\r\n                result.$subItem = submenuItem;\r\n                result.$item = menuItem;\r\n              }\r\n            });\r\n          });\r\n\r\n          if (result.$item) {\r\n            $scope.$apply(() => {\r\n              $scope.dropdownTypeaheadOnSelect(result);\r\n            });\r\n          }\r\n\r\n          $input.trigger('blur');\r\n          return '';\r\n        },\r\n      });\r\n\r\n      $button.click(() => {\r\n        $button.hide();\r\n        $input.show();\r\n        $input.focus();\r\n      });\r\n\r\n      $input.keyup(() => {\r\n        elem.toggleClass('open', $input.val() === '');\r\n      });\r\n\r\n      $input.blur(() => {\r\n        $input.hide();\r\n        $input.val('');\r\n        $button.show();\r\n        $button.focus();\r\n        // clicking the function dropdown menu won't\r\n        // work if you remove class at once\r\n        setTimeout(() => {\r\n          elem.removeClass('open');\r\n        }, 200);\r\n      });\r\n\r\n      $compile(elem.contents())($scope);\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('dropdownTypeahead', dropdownTypeahead);\r\ncoreModule.directive('dropdownTypeahead2', dropdownTypeahead2);\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport coreModule from '../core_module';\r\n\r\n/** @ngInject */\r\nexport function metricSegment($compile, $sce, templateSrv) {\r\n  const inputTemplate =\r\n    '<input type=\"text\" data-provide=\"typeahead\" ' +\r\n    ' class=\"gf-form-input input-medium\"' +\r\n    ' spellcheck=\"false\" style=\"display:none\"></input>';\r\n\r\n  const linkTemplate =\r\n    '<a class=\"gf-form-label\" ng-class=\"segment.cssClass\" ' +\r\n    'tabindex=\"1\" give-focus=\"segment.focus\" ng-bind-html=\"segment.html\"></a>';\r\n\r\n  const selectTemplate =\r\n    '<a class=\"gf-form-input gf-form-input--dropdown\" ng-class=\"segment.cssClass\" ' +\r\n    'tabindex=\"1\" give-focus=\"segment.focus\" ng-bind-html=\"segment.html\"></a>';\r\n\r\n  return {\r\n    scope: {\r\n      segment: '=',\r\n      getOptions: '&',\r\n      onChange: '&',\r\n      debounce: '@',\r\n    },\r\n    link: ($scope, elem) => {\r\n      const $input = $(inputTemplate);\r\n      const segment = $scope.segment;\r\n      const $button = $(segment.selectMode ? selectTemplate : linkTemplate);\r\n      let options = null;\r\n      let cancelBlur = null;\r\n      let linkMode = true;\r\n      const debounceLookup = $scope.debounce;\r\n\r\n      $input.appendTo(elem);\r\n      $button.appendTo(elem);\r\n\r\n      $scope.updateVariableValue = value => {\r\n        if (value === '' || segment.value === value) {\r\n          return;\r\n        }\r\n\r\n        $scope.$apply(() => {\r\n          const selected = _.find($scope.altSegments, { value: value });\r\n          if (selected) {\r\n            segment.value = selected.value;\r\n            segment.html = selected.html || $sce.trustAsHtml(templateSrv.highlightVariablesAsHtml(selected.value));\r\n            segment.fake = false;\r\n            segment.expandable = selected.expandable;\r\n\r\n            if (selected.type) {\r\n              segment.type = selected.type;\r\n            }\r\n          } else if (segment.custom !== 'false') {\r\n            segment.value = value;\r\n            segment.html = $sce.trustAsHtml(templateSrv.highlightVariablesAsHtml(value));\r\n            segment.expandable = true;\r\n            segment.fake = false;\r\n          }\r\n\r\n          $scope.onChange();\r\n        });\r\n      };\r\n\r\n      $scope.switchToLink = fromClick => {\r\n        if (linkMode && !fromClick) {\r\n          return;\r\n        }\r\n\r\n        clearTimeout(cancelBlur);\r\n        cancelBlur = null;\r\n        linkMode = true;\r\n        $input.hide();\r\n        $button.show();\r\n        $scope.updateVariableValue($input.val());\r\n      };\r\n\r\n      $scope.inputBlur = () => {\r\n        // happens long before the click event on the typeahead options\r\n        // need to have long delay because the blur\r\n        cancelBlur = setTimeout($scope.switchToLink, 200);\r\n      };\r\n\r\n      $scope.source = (query, callback) => {\r\n        $scope.$apply(() => {\r\n          $scope.getOptions({ $query: query }).then(altSegments => {\r\n            $scope.altSegments = altSegments;\r\n            options = _.map($scope.altSegments, alt => {\r\n              return _.escape(alt.value);\r\n            });\r\n\r\n            // add custom values\r\n            if (segment.custom !== 'false') {\r\n              if (!segment.fake && _.indexOf(options, segment.value) === -1) {\r\n                options.unshift(_.escape(segment.value));\r\n              }\r\n            }\r\n\r\n            callback(options);\r\n          });\r\n        });\r\n      };\r\n\r\n      $scope.updater = value => {\r\n        value = _.unescape(value);\r\n        if (value === segment.value) {\r\n          clearTimeout(cancelBlur);\r\n          $input.focus();\r\n          return value;\r\n        }\r\n\r\n        $input.val(value);\r\n        $scope.switchToLink(true);\r\n\r\n        return value;\r\n      };\r\n\r\n      $scope.matcher = function(item) {\r\n        if (linkMode) {\r\n          return false;\r\n        }\r\n        let str = this.query;\r\n        if (str[0] === '/') {\r\n          str = str.substring(1);\r\n        }\r\n        if (str[str.length - 1] === '/') {\r\n          str = str.substring(0, str.length - 1);\r\n        }\r\n        try {\r\n          return item.toLowerCase().match(str.toLowerCase());\r\n        } catch (e) {\r\n          return false;\r\n        }\r\n      };\r\n\r\n      $input.attr('data-provide', 'typeahead');\r\n      $input.typeahead({\r\n        source: $scope.source,\r\n        minLength: 0,\r\n        items: 10000,\r\n        updater: $scope.updater,\r\n        matcher: $scope.matcher,\r\n      });\r\n\r\n      const typeahead = $input.data('typeahead');\r\n      typeahead.lookup = function() {\r\n        this.query = this.$element.val() || '';\r\n        const items = this.source(this.query, $.proxy(this.process, this));\r\n        return items ? this.process(items) : items;\r\n      };\r\n\r\n      if (debounceLookup) {\r\n        typeahead.lookup = _.debounce(typeahead.lookup, 500, { leading: true });\r\n      }\r\n\r\n      $button.keydown(evt => {\r\n        // trigger typeahead on down arrow or enter key\r\n        if (evt.keyCode === 40 || evt.keyCode === 13) {\r\n          $button.click();\r\n        }\r\n      });\r\n\r\n      $button.click(() => {\r\n        options = null;\r\n        $input.css('width', Math.max($button.width(), 80) + 16 + 'px');\r\n\r\n        $button.hide();\r\n        $input.show();\r\n        $input.focus();\r\n\r\n        linkMode = false;\r\n\r\n        const typeahead = $input.data('typeahead');\r\n        if (typeahead) {\r\n          $input.val('');\r\n          typeahead.lookup();\r\n        }\r\n      });\r\n\r\n      $input.blur($scope.inputBlur);\r\n\r\n      $compile(elem.contents())($scope);\r\n    },\r\n  };\r\n}\r\n\r\n/** @ngInject */\r\nexport function metricSegmentModel(uiSegmentSrv, $q) {\r\n  return {\r\n    template:\r\n      '<metric-segment segment=\"segment\" get-options=\"getOptionsInternal()\" on-change=\"onSegmentChange()\"></metric-segment>',\r\n    restrict: 'E',\r\n    scope: {\r\n      property: '=',\r\n      options: '=',\r\n      getOptions: '&',\r\n      onChange: '&',\r\n    },\r\n    link: {\r\n      pre: function postLink($scope, elem, attrs) {\r\n        let cachedOptions;\r\n\r\n        $scope.valueToSegment = value => {\r\n          const option = _.find($scope.options, { value: value });\r\n          const segment = {\r\n            cssClass: attrs.cssClass,\r\n            custom: attrs.custom,\r\n            value: option ? option.text : value,\r\n            selectMode: attrs.selectMode,\r\n          };\r\n\r\n          return uiSegmentSrv.newSegment(segment);\r\n        };\r\n\r\n        $scope.getOptionsInternal = () => {\r\n          if ($scope.options) {\r\n            cachedOptions = $scope.options;\r\n            return $q.when(\r\n              _.map($scope.options, option => {\r\n                return { value: option.text };\r\n              })\r\n            );\r\n          } else {\r\n            return $scope.getOptions().then(options => {\r\n              cachedOptions = options;\r\n              return _.map(options, option => {\r\n                if (option.html) {\r\n                  return option;\r\n                }\r\n                return { value: option.text };\r\n              });\r\n            });\r\n          }\r\n        };\r\n\r\n        $scope.onSegmentChange = () => {\r\n          if (cachedOptions) {\r\n            const option = _.find(cachedOptions, { text: $scope.segment.value });\r\n            if (option && option.value !== $scope.property) {\r\n              $scope.property = option.value;\r\n            } else if (attrs.custom !== 'false') {\r\n              $scope.property = $scope.segment.value;\r\n            }\r\n          } else {\r\n            $scope.property = $scope.segment.value;\r\n          }\r\n\r\n          // needs to call this after digest so\r\n          // property is synced with outerscope\r\n          $scope.$$postDigest(() => {\r\n            $scope.$apply(() => {\r\n              $scope.onChange();\r\n            });\r\n          });\r\n        };\r\n\r\n        $scope.segment = $scope.valueToSegment($scope.property);\r\n      },\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('metricSegment', metricSegment);\r\ncoreModule.directive('metricSegmentModel', metricSegmentModel);\r\n","import angular from 'angular';\r\nimport Clipboard from 'clipboard';\r\nimport coreModule from '../core_module';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport { appEvents } from 'app/core/core';\r\n\r\n/** @ngInject */\r\nfunction tip($compile) {\r\n  return {\r\n    restrict: 'E',\r\n    link: (scope, elem, attrs) => {\r\n      let _t =\r\n        '<i class=\"grafana-tip fa fa-' +\r\n        (attrs.icon || 'question-circle') +\r\n        '\" bs-tooltip=\"\\'' +\r\n        kbn.addslashes(elem.text()) +\r\n        '\\'\"></i>';\r\n      _t = _t.replace(/{/g, '\\\\{').replace(/}/g, '\\\\}');\r\n      elem.replaceWith($compile(angular.element(_t))(scope));\r\n    },\r\n  };\r\n}\r\n\r\nfunction clipboardButton() {\r\n  return {\r\n    scope: {\r\n      getText: '&clipboardButton',\r\n    },\r\n    link: (scope, elem) => {\r\n      scope.clipboard = new Clipboard(elem[0], {\r\n        text: () => {\r\n          return scope.getText();\r\n        },\r\n      });\r\n\r\n      scope.clipboard.on('success', () => {\r\n        appEvents.emit('alert-success', ['Content copied to clipboard']);\r\n      });\r\n\r\n      scope.$on('$destroy', () => {\r\n        if (scope.clipboard) {\r\n          scope.clipboard.destroy();\r\n        }\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\n/** @ngInject */\r\nfunction compile($compile) {\r\n  return {\r\n    restrict: 'A',\r\n    link: (scope, element, attrs) => {\r\n      scope.$watch(\r\n        scope => {\r\n          return scope.$eval(attrs.compile);\r\n        },\r\n        value => {\r\n          element.html(value);\r\n          $compile(element.contents())(scope);\r\n        }\r\n      );\r\n    },\r\n  };\r\n}\r\n\r\nfunction watchChange() {\r\n  return {\r\n    scope: { onchange: '&watchChange' },\r\n    link: (scope, element) => {\r\n      element.on('input', () => {\r\n        scope.$apply(() => {\r\n          scope.onchange({ inputValue: element.val() });\r\n        });\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\n/** @ngInject */\r\nfunction editorOptBool($compile) {\r\n  return {\r\n    restrict: 'E',\r\n    link: (scope, elem, attrs) => {\r\n      const ngchange = attrs.change ? ' ng-change=\"' + attrs.change + '\"' : '';\r\n      const tip = attrs.tip ? ' <tip>' + attrs.tip + '</tip>' : '';\r\n      const showIf = attrs.showIf ? ' ng-show=\"' + attrs.showIf + '\" ' : '';\r\n\r\n      const template =\r\n        '<div class=\"editor-option gf-form-checkbox text-center\"' +\r\n        showIf +\r\n        '>' +\r\n        ' <label for=\"' +\r\n        attrs.model +\r\n        '\" class=\"small\">' +\r\n        attrs.text +\r\n        tip +\r\n        '</label>' +\r\n        '<input class=\"cr1\" id=\"' +\r\n        attrs.model +\r\n        '\" type=\"checkbox\" ' +\r\n        '       ng-model=\"' +\r\n        attrs.model +\r\n        '\"' +\r\n        ngchange +\r\n        '       ng-checked=\"' +\r\n        attrs.model +\r\n        '\"></input>' +\r\n        ' <label for=\"' +\r\n        attrs.model +\r\n        '\" class=\"cr1\"></label>';\r\n      elem.replaceWith($compile(angular.element(template))(scope));\r\n    },\r\n  };\r\n}\r\n\r\n/** @ngInject */\r\nfunction editorCheckbox($compile, $interpolate) {\r\n  return {\r\n    restrict: 'E',\r\n    link: (scope, elem, attrs) => {\r\n      const text = $interpolate(attrs.text)(scope);\r\n      const model = $interpolate(attrs.model)(scope);\r\n      const ngchange = attrs.change ? ' ng-change=\"' + attrs.change + '\"' : '';\r\n      const tip = attrs.tip ? ' <tip>' + attrs.tip + '</tip>' : '';\r\n      const label = '<label for=\"' + scope.$id + model + '\" class=\"checkbox-label\">' + text + tip + '</label>';\r\n\r\n      let template =\r\n        '<input class=\"cr1\" id=\"' +\r\n        scope.$id +\r\n        model +\r\n        '\" type=\"checkbox\" ' +\r\n        '       ng-model=\"' +\r\n        model +\r\n        '\"' +\r\n        ngchange +\r\n        '       ng-checked=\"' +\r\n        model +\r\n        '\"></input>' +\r\n        ' <label for=\"' +\r\n        scope.$id +\r\n        model +\r\n        '\" class=\"cr1\"></label>';\r\n\r\n      template = template + label;\r\n      elem.addClass('gf-form-checkbox');\r\n      elem.html($compile(angular.element(template))(scope));\r\n    },\r\n  };\r\n}\r\n\r\n/** @ngInject */\r\nfunction gfDropdown($parse, $compile, $timeout) {\r\n  function buildTemplate(items, placement?) {\r\n    const upclass = placement === 'top' ? 'dropup' : '';\r\n    const ul = ['<ul class=\"dropdown-menu ' + upclass + '\" role=\"menu\" aria-labelledby=\"drop1\">', '</ul>'];\r\n\r\n    for (let index = 0; index < items.length; index++) {\r\n      const item = items[index];\r\n\r\n      if (item.divider) {\r\n        ul.splice(index + 1, 0, '<li class=\"divider\"></li>');\r\n        continue;\r\n      }\r\n\r\n      let li =\r\n        '<li' +\r\n        (item.submenu && item.submenu.length ? ' class=\"dropdown-submenu\"' : '') +\r\n        '>' +\r\n        '<a tabindex=\"-1\" ng-href=\"' +\r\n        (item.href || '') +\r\n        '\"' +\r\n        (item.click ? ' ng-click=\"' + item.click + '\"' : '') +\r\n        (item.target ? ' target=\"' + item.target + '\"' : '') +\r\n        (item.method ? ' data-method=\"' + item.method + '\"' : '') +\r\n        '>' +\r\n        (item.text || '') +\r\n        '</a>';\r\n\r\n      if (item.submenu && item.submenu.length) {\r\n        li += buildTemplate(item.submenu).join('\\n');\r\n      }\r\n\r\n      li += '</li>';\r\n      ul.splice(index + 1, 0, li);\r\n    }\r\n\r\n    return ul;\r\n  }\r\n\r\n  return {\r\n    restrict: 'EA',\r\n    scope: true,\r\n    link: function postLink(scope, iElement, iAttrs) {\r\n      const getter = $parse(iAttrs.gfDropdown),\r\n        items = getter(scope);\r\n      $timeout(() => {\r\n        const placement = iElement.data('placement');\r\n        const dropdown = angular.element(buildTemplate(items, placement).join(''));\r\n        dropdown.insertAfter(iElement);\r\n        $compile(iElement.next('ul.dropdown-menu'))(scope);\r\n      });\r\n\r\n      iElement.addClass('dropdown-toggle').attr('data-toggle', 'dropdown');\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('tip', tip);\r\ncoreModule.directive('clipboardButton', clipboardButton);\r\ncoreModule.directive('compile', compile);\r\ncoreModule.directive('watchChange', watchChange);\r\ncoreModule.directive('editorOptBool', editorOptBool);\r\ncoreModule.directive('editorCheckbox', editorCheckbox);\r\ncoreModule.directive('gfDropdown', gfDropdown);\r\n","import coreModule from '../core_module';\r\nimport * as rangeUtil from 'app/core/utils/rangeutil';\r\n\r\nfunction ngModelOnBlur() {\r\n  return {\r\n    restrict: 'A',\r\n    priority: 1,\r\n    require: 'ngModel',\r\n    link: (scope, elm, attr, ngModelCtrl) => {\r\n      if (attr.type === 'radio' || attr.type === 'checkbox') {\r\n        return;\r\n      }\r\n\r\n      elm.off('input keydown change');\r\n      elm.bind('blur', () => {\r\n        scope.$apply(() => {\r\n          ngModelCtrl.$setViewValue(elm.val());\r\n        });\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\nfunction emptyToNull() {\r\n  return {\r\n    restrict: 'A',\r\n    require: 'ngModel',\r\n    link: (scope, elm, attrs, ctrl) => {\r\n      ctrl.$parsers.push(viewValue => {\r\n        if (viewValue === '') {\r\n          return null;\r\n        }\r\n        return viewValue;\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\nfunction validTimeSpan() {\r\n  return {\r\n    require: 'ngModel',\r\n    link: (scope, elm, attrs, ctrl) => {\r\n      ctrl.$validators.integer = (modelValue, viewValue) => {\r\n        if (ctrl.$isEmpty(modelValue)) {\r\n          return true;\r\n        }\r\n        if (viewValue.indexOf('$') === 0 || viewValue.indexOf('+$') === 0) {\r\n          return true; // allow template variable\r\n        }\r\n        const info = rangeUtil.describeTextRange(viewValue);\r\n        return info.invalid !== true;\r\n      };\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('ngModelOnblur', ngModelOnBlur);\r\ncoreModule.directive('emptyToNull', emptyToNull);\r\ncoreModule.directive('validTimeSpan', validTimeSpan);\r\n","import angular from 'angular';\r\nimport $ from 'jquery';\r\nimport coreModule from '../core_module';\r\nimport tags from 'app/core/utils/tags';\r\nimport 'vendor/tagsinput/bootstrap-tagsinput.js';\r\n\r\nfunction setColor(name, element) {\r\n  const { color, borderColor } = tags.getTagColorsFromName(name);\r\n  element.css('background-color', color);\r\n  element.css('border-color', borderColor);\r\n}\r\n\r\nfunction tagColorFromName() {\r\n  return {\r\n    scope: { tagColorFromName: '=' },\r\n    link: (scope, element) => {\r\n      setColor(scope.tagColorFromName, element);\r\n    },\r\n  };\r\n}\r\n\r\nfunction bootstrapTagsinput() {\r\n  function getItemProperty(scope, property) {\r\n    if (!property) {\r\n      return undefined;\r\n    }\r\n\r\n    if (angular.isFunction(scope.$parent[property])) {\r\n      return scope.$parent[property];\r\n    }\r\n\r\n    return item => {\r\n      return item[property];\r\n    };\r\n  }\r\n\r\n  return {\r\n    restrict: 'EA',\r\n    scope: {\r\n      model: '=ngModel',\r\n      onTagsUpdated: '&',\r\n    },\r\n    template: '<select multiple></select>',\r\n    replace: false,\r\n    link: function(scope, element, attrs) {\r\n      if (!angular.isArray(scope.model)) {\r\n        scope.model = [];\r\n      }\r\n\r\n      const select = $('select', element);\r\n\r\n      if (attrs.placeholder) {\r\n        select.attr('placeholder', attrs.placeholder);\r\n      }\r\n\r\n      select.tagsinput({\r\n        typeahead: {\r\n          source: angular.isFunction(scope.$parent[attrs.typeaheadSource])\r\n            ? scope.$parent[attrs.typeaheadSource]\r\n            : null,\r\n        },\r\n        widthClass: attrs.widthClass,\r\n        itemValue: getItemProperty(scope, attrs.itemvalue),\r\n        itemText: getItemProperty(scope, attrs.itemtext),\r\n        tagClass: angular.isFunction(scope.$parent[attrs.tagclass])\r\n          ? scope.$parent[attrs.tagclass]\r\n          : () => {\r\n              return attrs.tagclass;\r\n            },\r\n      });\r\n\r\n      select.on('itemAdded', event => {\r\n        if (scope.model.indexOf(event.item) === -1) {\r\n          scope.model.push(event.item);\r\n          if (scope.onTagsUpdated) {\r\n            scope.onTagsUpdated();\r\n          }\r\n        }\r\n        const tagElement = select\r\n          .next()\r\n          .children('span')\r\n          .filter(() => {\r\n            return $(this).text() === event.item;\r\n          });\r\n        setColor(event.item, tagElement);\r\n      });\r\n\r\n      select.on('itemRemoved', event => {\r\n        const idx = scope.model.indexOf(event.item);\r\n        if (idx !== -1) {\r\n          scope.model.splice(idx, 1);\r\n          if (scope.onTagsUpdated) {\r\n            scope.onTagsUpdated();\r\n          }\r\n        }\r\n      });\r\n\r\n      scope.$watch(\r\n        'model',\r\n        () => {\r\n          if (!angular.isArray(scope.model)) {\r\n            scope.model = [];\r\n          }\r\n\r\n          select.tagsinput('removeAll');\r\n\r\n          for (let i = 0; i < scope.model.length; i++) {\r\n            select.tagsinput('add', scope.model[i]);\r\n          }\r\n        },\r\n        true\r\n      );\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('tagColorFromName', tagColorFromName);\r\ncoreModule.directive('bootstrapTagsinput', bootstrapTagsinput);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport coreModule from '../core_module';\r\n\r\nexport class ValueSelectDropdownCtrl {\r\n  dropdownVisible: any;\r\n  highlightIndex: any;\r\n  linkText: any;\r\n  oldVariableText: any;\r\n  options: any;\r\n  search: any;\r\n  selectedTags: any;\r\n  selectedValues: any;\r\n  tags: any;\r\n  variable: any;\r\n\r\n  hide: any;\r\n  onUpdated: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $q) {}\r\n\r\n  show() {\r\n    this.oldVariableText = this.variable.current.text;\r\n    this.highlightIndex = -1;\r\n\r\n    this.options = this.variable.options;\r\n    this.selectedValues = _.filter(this.options, { selected: true });\r\n\r\n    this.tags = _.map(this.variable.tags, value => {\r\n      let tag = { text: value, selected: false };\r\n      _.each(this.variable.current.tags, tagObj => {\r\n        if (tagObj.text === value) {\r\n          tag = tagObj;\r\n        }\r\n      });\r\n      return tag;\r\n    });\r\n\r\n    this.search = {\r\n      query: '',\r\n      options: this.options.slice(0, Math.min(this.options.length, 1000)),\r\n    };\r\n\r\n    this.dropdownVisible = true;\r\n  }\r\n\r\n  updateLinkText() {\r\n    const current = this.variable.current;\r\n\r\n    if (current.tags && current.tags.length) {\r\n      // filer out values that are in selected tags\r\n      const selectedAndNotInTag = _.filter(this.variable.options, option => {\r\n        if (!option.selected) {\r\n          return false;\r\n        }\r\n        for (let i = 0; i < current.tags.length; i++) {\r\n          const tag = current.tags[i];\r\n          if (_.indexOf(tag.values, option.value) !== -1) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      });\r\n\r\n      // convert values to text\r\n      const currentTexts = _.map(selectedAndNotInTag, 'text');\r\n\r\n      // join texts\r\n      this.linkText = currentTexts.join(' + ');\r\n      if (this.linkText.length > 0) {\r\n        this.linkText += ' + ';\r\n      }\r\n    } else {\r\n      this.linkText = this.variable.current.text;\r\n    }\r\n  }\r\n\r\n  clearSelections() {\r\n    _.each(this.options, option => {\r\n      option.selected = false;\r\n    });\r\n\r\n    this.selectionsChanged(false);\r\n  }\r\n\r\n  selectTag(tag) {\r\n    tag.selected = !tag.selected;\r\n    let tagValuesPromise;\r\n    if (!tag.values) {\r\n      tagValuesPromise = this.variable.getValuesForTag(tag.text);\r\n    } else {\r\n      tagValuesPromise = this.$q.when(tag.values);\r\n    }\r\n\r\n    return tagValuesPromise.then(values => {\r\n      tag.values = values;\r\n      tag.valuesText = values.join(' + ');\r\n      _.each(this.options, option => {\r\n        if (_.indexOf(tag.values, option.value) !== -1) {\r\n          option.selected = tag.selected;\r\n        }\r\n      });\r\n\r\n      this.selectionsChanged(false);\r\n    });\r\n  }\r\n\r\n  keyDown(evt) {\r\n    if (evt.keyCode === 27) {\r\n      this.hide();\r\n    }\r\n    if (evt.keyCode === 40) {\r\n      this.moveHighlight(1);\r\n    }\r\n    if (evt.keyCode === 38) {\r\n      this.moveHighlight(-1);\r\n    }\r\n    if (evt.keyCode === 13) {\r\n      if (this.search.options.length === 0) {\r\n        this.commitChanges();\r\n      } else {\r\n        this.selectValue(this.search.options[this.highlightIndex], {}, true, false);\r\n      }\r\n    }\r\n    if (evt.keyCode === 32) {\r\n      this.selectValue(this.search.options[this.highlightIndex], {}, false, false);\r\n    }\r\n  }\r\n\r\n  moveHighlight(direction) {\r\n    this.highlightIndex = (this.highlightIndex + direction) % this.search.options.length;\r\n  }\r\n\r\n  selectValue(option, event, commitChange?, excludeOthers?) {\r\n    if (!option) {\r\n      return;\r\n    }\r\n\r\n    option.selected = this.variable.multi ? !option.selected : true;\r\n\r\n    commitChange = commitChange || false;\r\n    excludeOthers = excludeOthers || false;\r\n\r\n    const setAllExceptCurrentTo = newValue => {\r\n      _.each(this.options, other => {\r\n        if (option !== other) {\r\n          other.selected = newValue;\r\n        }\r\n      });\r\n    };\r\n\r\n    // commit action (enter key), should not deselect it\r\n    if (commitChange) {\r\n      option.selected = true;\r\n    }\r\n\r\n    if (option.text === 'All' || excludeOthers) {\r\n      setAllExceptCurrentTo(false);\r\n      commitChange = true;\r\n    } else if (!this.variable.multi) {\r\n      setAllExceptCurrentTo(false);\r\n      commitChange = true;\r\n    } else if (event.ctrlKey || event.metaKey || event.shiftKey) {\r\n      commitChange = true;\r\n      setAllExceptCurrentTo(false);\r\n    }\r\n\r\n    this.selectionsChanged(commitChange);\r\n  }\r\n\r\n  selectionsChanged(commitChange) {\r\n    this.selectedValues = _.filter(this.options, { selected: true });\r\n\r\n    if (this.selectedValues.length > 1) {\r\n      if (this.selectedValues[0].text === 'All') {\r\n        this.selectedValues[0].selected = false;\r\n        this.selectedValues = this.selectedValues.slice(1, this.selectedValues.length);\r\n      }\r\n    }\r\n\r\n    // validate selected tags\r\n    _.each(this.tags, tag => {\r\n      if (tag.selected) {\r\n        _.each(tag.values, value => {\r\n          if (!_.find(this.selectedValues, { value: value })) {\r\n            tag.selected = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    this.selectedTags = _.filter(this.tags, { selected: true });\r\n    this.variable.current.value = _.map(this.selectedValues, 'value');\r\n    this.variable.current.text = _.map(this.selectedValues, 'text').join(' + ');\r\n    this.variable.current.tags = this.selectedTags;\r\n\r\n    if (!this.variable.multi) {\r\n      this.variable.current.value = this.selectedValues[0].value;\r\n    }\r\n\r\n    if (commitChange) {\r\n      this.commitChanges();\r\n    }\r\n  }\r\n\r\n  commitChanges() {\r\n    // if we have a search query and no options use that\r\n    if (this.search.options.length === 0 && this.search.query.length > 0) {\r\n      this.variable.current = { text: this.search.query, value: this.search.query };\r\n    } else if (this.selectedValues.length === 0) {\r\n      // make sure one option is selected\r\n      this.options[0].selected = true;\r\n      this.selectionsChanged(false);\r\n    }\r\n\r\n    this.dropdownVisible = false;\r\n    this.updateLinkText();\r\n\r\n    if (this.variable.current.text !== this.oldVariableText) {\r\n      this.onUpdated();\r\n    }\r\n  }\r\n\r\n  queryChanged() {\r\n    this.highlightIndex = -1;\r\n    this.search.options = _.filter(this.options, option => {\r\n      return option.text.toLowerCase().indexOf(this.search.query.toLowerCase()) !== -1;\r\n    });\r\n\r\n    this.search.options = this.search.options.slice(0, Math.min(this.search.options.length, 1000));\r\n  }\r\n\r\n  init() {\r\n    this.selectedTags = this.variable.current.tags || [];\r\n    this.updateLinkText();\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function valueSelectDropdown($compile, $window, $timeout, $rootScope) {\r\n  return {\r\n    scope: { variable: '=', onUpdated: '&' },\r\n    templateUrl: 'public/app/partials/valueSelectDropdown.html',\r\n    controller: 'ValueSelectDropdownCtrl',\r\n    controllerAs: 'vm',\r\n    bindToController: true,\r\n    link: (scope, elem) => {\r\n      const bodyEl = angular.element($window.document.body);\r\n      const linkEl = elem.find('.variable-value-link');\r\n      const inputEl = elem.find('input');\r\n\r\n      function openDropdown() {\r\n        inputEl.css('width', Math.max(linkEl.width(), 80) + 'px');\r\n\r\n        inputEl.show();\r\n        linkEl.hide();\r\n\r\n        inputEl.focus();\r\n        $timeout(\r\n          () => {\r\n            bodyEl.on('click', bodyOnClick);\r\n          },\r\n          0,\r\n          false\r\n        );\r\n      }\r\n\r\n      function switchToLink() {\r\n        inputEl.hide();\r\n        linkEl.show();\r\n        bodyEl.off('click', bodyOnClick);\r\n      }\r\n\r\n      function bodyOnClick(e) {\r\n        if (elem.has(e.target).length === 0) {\r\n          scope.$apply(() => {\r\n            scope.vm.commitChanges();\r\n          });\r\n        }\r\n      }\r\n\r\n      scope.$watch('vm.dropdownVisible', newValue => {\r\n        if (newValue) {\r\n          openDropdown();\r\n        } else {\r\n          switchToLink();\r\n        }\r\n      });\r\n\r\n      const cleanUp = $rootScope.$on('template-variable-value-updated', () => {\r\n        scope.vm.updateLinkText();\r\n      });\r\n\r\n      scope.$on('$destroy', () => {\r\n        cleanUp();\r\n      });\r\n\r\n      scope.vm.init();\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.controller('ValueSelectDropdownCtrl', ValueSelectDropdownCtrl);\r\ncoreModule.directive('valueSelectDropdown', valueSelectDropdown);\r\n","import $ from 'jquery';\r\nimport coreModule from '../core_module';\r\n\r\nfunction getBlockNodes(nodes) {\r\n  let node = nodes[0];\r\n  const endNode = nodes[nodes.length - 1];\r\n  let blockNodes;\r\n  node = node.nextSibling;\r\n\r\n  for (let i = 1; node !== endNode && node; i++) {\r\n    if (blockNodes || nodes[i] !== node) {\r\n      if (!blockNodes) {\r\n        blockNodes = $([].slice.call(nodes, 0, i));\r\n      }\r\n      blockNodes.push(node);\r\n    }\r\n    node = node.nextSibling;\r\n  }\r\n\r\n  return blockNodes || nodes;\r\n}\r\n\r\n/** @ngInject */\r\nfunction rebuildOnChange($animate) {\r\n  return {\r\n    multiElement: true,\r\n    terminal: true,\r\n    transclude: true,\r\n    priority: 600,\r\n    restrict: 'E',\r\n    link: (scope, elem, attrs, ctrl, transclude) => {\r\n      let block, childScope, previousElements;\r\n\r\n      function cleanUp() {\r\n        if (previousElements) {\r\n          previousElements.remove();\r\n          previousElements = null;\r\n        }\r\n        if (childScope) {\r\n          childScope.$destroy();\r\n          childScope = null;\r\n        }\r\n        if (block) {\r\n          previousElements = getBlockNodes(block.clone);\r\n          $animate.leave(previousElements).then(() => {\r\n            previousElements = null;\r\n          });\r\n          block = null;\r\n        }\r\n      }\r\n\r\n      scope.$watch(attrs.property, function rebuildOnChangeAction(value, oldValue) {\r\n        if (childScope && value !== oldValue) {\r\n          cleanUp();\r\n        }\r\n\r\n        if (!childScope && (value || attrs.showNull)) {\r\n          transclude((clone, newScope) => {\r\n            childScope = newScope;\r\n            clone[clone.length++] = document.createComment(' end rebuild on change ');\r\n            block = { clone: clone };\r\n            $animate.enter(clone, elem.parent(), elem);\r\n          });\r\n        } else {\r\n          cleanUp();\r\n        }\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('rebuildOnChange', rebuildOnChange);\r\n","import coreModule from '../core_module';\r\n\r\ncoreModule.directive('giveFocus', () => {\r\n  return (scope, element, attrs) => {\r\n    element.click(e => {\r\n      e.stopPropagation();\r\n    });\r\n\r\n    scope.$watch(\r\n      attrs.giveFocus,\r\n      newValue => {\r\n        if (!newValue) {\r\n          return;\r\n        }\r\n        setTimeout(() => {\r\n          element.focus();\r\n          const domEl = element[0];\r\n          if (domEl.setSelectionRange) {\r\n            const pos = element.val().length * 2;\r\n            domEl.setSelectionRange(pos, pos);\r\n          }\r\n        }, 200);\r\n      },\r\n      true\r\n    );\r\n  };\r\n});\r\n\r\nexport default {};\r\n","import angular from 'angular';\r\nimport coreModule from '../core_module';\r\n\r\nexport class DeltaCtrl {\r\n  observer: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $rootScope) {\r\n    const waitForCompile = mutations => {\r\n      if (mutations.length === 1) {\r\n        this.$rootScope.appEvent('json-diff-ready');\r\n      }\r\n    };\r\n\r\n    this.observer = new MutationObserver(waitForCompile);\r\n\r\n    const observerConfig = {\r\n      attributes: true,\r\n      attributeFilter: ['class'],\r\n      characterData: false,\r\n      childList: true,\r\n      subtree: false,\r\n    };\r\n\r\n    this.observer.observe(angular.element('.delta-html')[0], observerConfig);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.observer.disconnect();\r\n  }\r\n}\r\n\r\nexport function delta() {\r\n  return {\r\n    controller: DeltaCtrl,\r\n    replace: false,\r\n    restrict: 'A',\r\n  };\r\n}\r\ncoreModule.directive('diffDelta', delta);\r\n\r\n// Link to JSON line number\r\nexport class LinkJSONCtrl {\r\n  /** @ngInject */\r\n  constructor(private $scope, private $rootScope, private $anchorScroll) {}\r\n\r\n  goToLine(line: number) {\r\n    let unbind;\r\n\r\n    const scroll = () => {\r\n      this.$anchorScroll(`l${line}`);\r\n      unbind();\r\n    };\r\n\r\n    this.$scope.switchView().then(() => {\r\n      unbind = this.$rootScope.$on('json-diff-ready', scroll.bind(this));\r\n    });\r\n  }\r\n}\r\n\r\nexport function linkJson() {\r\n  return {\r\n    controller: LinkJSONCtrl,\r\n    controllerAs: 'ctrl',\r\n    replace: true,\r\n    restrict: 'E',\r\n    scope: {\r\n      line: '@lineDisplay',\r\n      link: '@lineLink',\r\n      switchView: '&',\r\n    },\r\n    template: `<a class=\"diff-linenum btn btn-inverse btn-small\" ng-click=\"ctrl.goToLine(link)\">Line {{ line }}</a>`,\r\n  };\r\n}\r\ncoreModule.directive('diffLinkJson', linkJson);\r\n","import $ from 'jquery';\r\nimport angular from 'angular';\r\nimport _ from 'lodash';\r\n\r\nconst $win = $(window);\r\n\r\n$.fn.place_tt = (() => {\r\n  const defaults = {\r\n    offset: 5,\r\n  };\r\n\r\n  return function(this: any, x, y, opts) {\r\n    opts = $.extend(true, {}, defaults, opts);\r\n\r\n    return this.each(() => {\r\n      const $tooltip = $(this);\r\n      let width, height;\r\n\r\n      $tooltip.addClass('grafana-tooltip');\r\n\r\n      $('#tooltip').remove();\r\n      $tooltip.appendTo(document.body);\r\n\r\n      if (opts.compile) {\r\n        angular\r\n          .element(document)\r\n          .injector()\r\n          .invoke([\r\n            '$compile',\r\n            '$rootScope',\r\n            ($compile, $rootScope) => {\r\n              const tmpScope = $rootScope.$new(true);\r\n              _.extend(tmpScope, opts.scopeData);\r\n\r\n              $compile($tooltip)(tmpScope);\r\n              tmpScope.$digest();\r\n              tmpScope.$destroy();\r\n            },\r\n          ]);\r\n      }\r\n\r\n      width = $tooltip.outerWidth(true);\r\n      height = $tooltip.outerHeight(true);\r\n\r\n      $tooltip.css('left', x + opts.offset + width > $win.width() ? x - opts.offset - width : x + opts.offset);\r\n      $tooltip.css('top', y + opts.offset + height > $win.height() ? y - opts.offset - height : y + opts.offset);\r\n    });\r\n  };\r\n})();\r\n","// Based on work https://github.com/mohsen1/json-formatter-js\r\n// Licence MIT, Copyright (c) 2015 Mohsen Azimi\r\n\r\n/*\r\n * Escapes `\"` characters from string\r\n*/\r\nfunction escapeString(str: string): string {\r\n  return str.replace('\"', '\"');\r\n}\r\n\r\n/*\r\n * Determines if a value is an object\r\n*/\r\nexport function isObject(value: any): boolean {\r\n  const type = typeof value;\r\n  return !!value && type === 'object';\r\n}\r\n\r\n/*\r\n * Gets constructor name of an object.\r\n * From http://stackoverflow.com/a/332429\r\n *\r\n*/\r\nexport function getObjectName(object: object): string {\r\n  if (object === undefined) {\r\n    return '';\r\n  }\r\n  if (object === null) {\r\n    return 'Object';\r\n  }\r\n  if (typeof object === 'object' && !object.constructor) {\r\n    return 'Object';\r\n  }\r\n\r\n  const funcNameRegex = /function ([^(]*)/;\r\n  const results = funcNameRegex.exec(object.constructor.toString());\r\n  if (results && results.length > 1) {\r\n    return results[1];\r\n  } else {\r\n    return '';\r\n  }\r\n}\r\n\r\n/*\r\n * Gets type of an object. Returns \"null\" for null objects\r\n*/\r\nexport function getType(object: object): string {\r\n  if (object === null) {\r\n    return 'null';\r\n  }\r\n  return typeof object;\r\n}\r\n\r\n/*\r\n * Generates inline preview for a JavaScript object based on a value\r\n*/\r\nexport function getValuePreview(object: object, value: string): string {\r\n  const type = getType(object);\r\n\r\n  if (type === 'null' || type === 'undefined') {\r\n    return type;\r\n  }\r\n\r\n  if (type === 'string') {\r\n    value = '\"' + escapeString(value) + '\"';\r\n  }\r\n  if (type === 'function') {\r\n    // Remove content of the function\r\n    return (\r\n      object\r\n        .toString()\r\n        .replace(/[\\r\\n]/g, '')\r\n        .replace(/\\{.*\\}/, '') + '{…}'\r\n    );\r\n  }\r\n  return value;\r\n}\r\n\r\n/*\r\n * Generates inline preview for a JavaScript object\r\n*/\r\nlet value = '';\r\nexport function getPreview(obj: object): string {\r\n  if (isObject(obj)) {\r\n    value = getObjectName(obj);\r\n    if (Array.isArray(obj)) {\r\n      value += '[' + obj.length + ']';\r\n    }\r\n  } else {\r\n    value = getValuePreview(obj, obj.toString());\r\n  }\r\n  return value;\r\n}\r\n\r\n/*\r\n * Generates a prefixed CSS class name\r\n*/\r\nexport function cssClass(className: string): string {\r\n  return `json-formatter-${className}`;\r\n}\r\n\r\n/*\r\n  * Creates a new DOM element with given type and class\r\n  * TODO: move me to helpers\r\n*/\r\nexport function createElement(type: string, className?: string, content?: Element | string): Element {\r\n  const el = document.createElement(type);\r\n  if (className) {\r\n    el.classList.add(cssClass(className));\r\n  }\r\n  if (content !== undefined) {\r\n    if (content instanceof Node) {\r\n      el.appendChild(content);\r\n    } else {\r\n      el.appendChild(document.createTextNode(String(content)));\r\n    }\r\n  }\r\n  return el;\r\n}\r\n","// Based on work https://github.com/mohsen1/json-formatter-js\r\n// Licence MIT, Copyright (c) 2015 Mohsen Azimi\r\n\r\nimport { isObject, getObjectName, getType, getValuePreview, cssClass, createElement } from './helpers';\r\n\r\nimport _ from 'lodash';\r\n\r\nconst DATE_STRING_REGEX = /(^\\d{1,4}[\\.|\\\\/|-]\\d{1,2}[\\.|\\\\/|-]\\d{1,4})(\\s*(?:0?[1-9]:[0-5]|1(?=[012])\\d:[0-5])\\d\\s*[ap]m)?$/;\r\nconst PARTIAL_DATE_REGEX = /\\d{2}:\\d{2}:\\d{2} GMT-\\d{4}/;\r\nconst JSON_DATE_REGEX = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z/;\r\n\r\n// When toggleing, don't animated removal or addition of more than a few items\r\nconst MAX_ANIMATED_TOGGLE_ITEMS = 10;\r\n\r\nconst requestAnimationFrame =\r\n  window.requestAnimationFrame ||\r\n  ((cb: () => void) => {\r\n    cb();\r\n    return 0;\r\n  });\r\n\r\nexport interface JsonExplorerConfig {\r\n  animateOpen?: boolean;\r\n  animateClose?: boolean;\r\n  theme?: string;\r\n}\r\n\r\nconst _defaultConfig: JsonExplorerConfig = {\r\n  animateOpen: true,\r\n  animateClose: true,\r\n  theme: null,\r\n};\r\n\r\n/**\r\n * @class JsonExplorer\r\n *\r\n * JsonExplorer allows you to render JSON objects in HTML with a\r\n * **collapsible** navigation.\r\n */\r\nexport class JsonExplorer {\r\n  // Hold the open state after the toggler is used\r\n  private _isOpen: boolean = null;\r\n\r\n  // A reference to the element that we render to\r\n  private element: Element;\r\n\r\n  private skipChildren = false;\r\n\r\n  /**\r\n   * @param {object} json The JSON object you want to render. It has to be an\r\n   * object or array. Do NOT pass raw JSON string.\r\n   *\r\n   * @param {number} [open=1] his number indicates up to how many levels the\r\n   * rendered tree should expand. Set it to `0` to make the whole tree collapsed\r\n   * or set it to `Infinity` to expand the tree deeply\r\n   *\r\n   * @param {object} [config=defaultConfig] -\r\n   *  defaultConfig = {\r\n   *   hoverPreviewEnabled: false,\r\n   *   hoverPreviewArrayCount: 100,\r\n   *   hoverPreviewFieldCount: 5\r\n   * }\r\n   *\r\n   * Available configurations:\r\n   *  #####Hover Preview\r\n   * * `hoverPreviewEnabled`:  enable preview on hover\r\n   * * `hoverPreviewArrayCount`: number of array items to show in preview Any\r\n   *    array larger than this number will be shown as `Array[XXX]` where `XXX`\r\n   *    is length of the array.\r\n   * * `hoverPreviewFieldCount`: number of object properties to show for object\r\n   *   preview. Any object with more properties that thin number will be\r\n   *   truncated.\r\n   *\r\n   * @param {string} [key=undefined] The key that this object in it's parent\r\n   * context\r\n   */\r\n  constructor(\r\n    public json: any,\r\n    private open = 1,\r\n    private config: JsonExplorerConfig = _defaultConfig,\r\n    private key?: string\r\n  ) {}\r\n\r\n  /*\r\n   * is formatter open?\r\n  */\r\n  private get isOpen(): boolean {\r\n    if (this._isOpen !== null) {\r\n      return this._isOpen;\r\n    } else {\r\n      return this.open > 0;\r\n    }\r\n  }\r\n\r\n  /*\r\n   * set open state (from toggler)\r\n  */\r\n  private set isOpen(value: boolean) {\r\n    this._isOpen = value;\r\n  }\r\n\r\n  /*\r\n   * is this a date string?\r\n  */\r\n  private get isDate(): boolean {\r\n    return (\r\n      this.type === 'string' &&\r\n      (DATE_STRING_REGEX.test(this.json) || JSON_DATE_REGEX.test(this.json) || PARTIAL_DATE_REGEX.test(this.json))\r\n    );\r\n  }\r\n\r\n  /*\r\n   * is this a URL string?\r\n  */\r\n  private get isUrl(): boolean {\r\n    return this.type === 'string' && this.json.indexOf('http') === 0;\r\n  }\r\n\r\n  /*\r\n   * is this an array?\r\n  */\r\n  private get isArray(): boolean {\r\n    return Array.isArray(this.json);\r\n  }\r\n\r\n  /*\r\n   * is this an object?\r\n   * Note: In this context arrays are object as well\r\n  */\r\n  private get isObject(): boolean {\r\n    return isObject(this.json);\r\n  }\r\n\r\n  /*\r\n   * is this an empty object with no properties?\r\n  */\r\n  private get isEmptyObject(): boolean {\r\n    return !this.keys.length && !this.isArray;\r\n  }\r\n\r\n  /*\r\n   * is this an empty object or array?\r\n  */\r\n  private get isEmpty(): boolean {\r\n    return this.isEmptyObject || (this.keys && !this.keys.length && this.isArray);\r\n  }\r\n\r\n  /*\r\n   * did we receive a key argument?\r\n   * This means that the formatter was called as a sub formatter of a parent formatter\r\n  */\r\n  private get hasKey(): boolean {\r\n    return typeof this.key !== 'undefined';\r\n  }\r\n\r\n  /*\r\n   * if this is an object, get constructor function name\r\n  */\r\n  private get constructorName(): string {\r\n    return getObjectName(this.json);\r\n  }\r\n\r\n  /*\r\n   * get type of this value\r\n   * Possible values: all JavaScript primitive types plus \"array\" and \"null\"\r\n  */\r\n  private get type(): string {\r\n    return getType(this.json);\r\n  }\r\n\r\n  /*\r\n   * get object keys\r\n   * If there is an empty key we pad it wit quotes to make it visible\r\n  */\r\n  private get keys(): string[] {\r\n    if (this.isObject) {\r\n      return Object.keys(this.json).map(key => (key ? key : '\"\"'));\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles `isOpen` state\r\n   *\r\n   */\r\n  toggleOpen() {\r\n    this.isOpen = !this.isOpen;\r\n\r\n    if (this.element) {\r\n      if (this.isOpen) {\r\n        this.appendChildren(this.config.animateOpen);\r\n      } else {\r\n        this.removeChildren(this.config.animateClose);\r\n      }\r\n      this.element.classList.toggle(cssClass('open'));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open all children up to a certain depth.\r\n   * Allows actions such as expand all/collapse all\r\n   *\r\n   */\r\n  openAtDepth(depth = 1) {\r\n    if (depth < 0) {\r\n      return;\r\n    }\r\n\r\n    this.open = depth;\r\n    this.isOpen = depth !== 0;\r\n\r\n    if (this.element) {\r\n      this.removeChildren(false);\r\n\r\n      if (depth === 0) {\r\n        this.element.classList.remove(cssClass('open'));\r\n      } else {\r\n        this.appendChildren(this.config.animateOpen);\r\n        this.element.classList.add(cssClass('open'));\r\n      }\r\n    }\r\n  }\r\n\r\n  isNumberArray() {\r\n    return this.json.length > 0 && this.json.length < 4 && (_.isNumber(this.json[0]) || _.isNumber(this.json[1]));\r\n  }\r\n\r\n  renderArray() {\r\n    const arrayWrapperSpan = createElement('span');\r\n    arrayWrapperSpan.appendChild(createElement('span', 'bracket', '['));\r\n\r\n    // some pretty handling of number arrays\r\n    if (this.isNumberArray()) {\r\n      this.json.forEach((val, index) => {\r\n        if (index > 0) {\r\n          arrayWrapperSpan.appendChild(createElement('span', 'array-comma', ','));\r\n        }\r\n        arrayWrapperSpan.appendChild(createElement('span', 'number', val));\r\n      });\r\n      this.skipChildren = true;\r\n    } else {\r\n      arrayWrapperSpan.appendChild(createElement('span', 'number', this.json.length));\r\n    }\r\n\r\n    arrayWrapperSpan.appendChild(createElement('span', 'bracket', ']'));\r\n    return arrayWrapperSpan;\r\n  }\r\n\r\n  /**\r\n   * Renders an HTML element and installs event listeners\r\n   *\r\n   * @returns {HTMLDivElement}\r\n   */\r\n  render(skipRoot = false): HTMLDivElement {\r\n    // construct the root element and assign it to this.element\r\n    this.element = createElement('div', 'row');\r\n\r\n    // construct the toggler link\r\n    const togglerLink = createElement('a', 'toggler-link');\r\n    const togglerIcon = createElement('span', 'toggler');\r\n\r\n    // if this is an object we need a wrapper span (toggler)\r\n    if (this.isObject) {\r\n      togglerLink.appendChild(togglerIcon);\r\n    }\r\n\r\n    // if this is child of a parent formatter we need to append the key\r\n    if (this.hasKey) {\r\n      togglerLink.appendChild(createElement('span', 'key', `${this.key}:`));\r\n    }\r\n\r\n    // Value for objects and arrays\r\n    if (this.isObject) {\r\n      // construct the value holder element\r\n      const value = createElement('span', 'value');\r\n\r\n      // we need a wrapper span for objects\r\n      const objectWrapperSpan = createElement('span');\r\n\r\n      // get constructor name and append it to wrapper span\r\n      const constructorName = createElement('span', 'constructor-name', this.constructorName);\r\n      objectWrapperSpan.appendChild(constructorName);\r\n\r\n      // if it's an array append the array specific elements like brackets and length\r\n      if (this.isArray) {\r\n        const arrayWrapperSpan = this.renderArray();\r\n        objectWrapperSpan.appendChild(arrayWrapperSpan);\r\n      }\r\n\r\n      // append object wrapper span to toggler link\r\n      value.appendChild(objectWrapperSpan);\r\n      togglerLink.appendChild(value);\r\n      // Primitive values\r\n    } else {\r\n      // make a value holder element\r\n      const value = this.isUrl ? createElement('a') : createElement('span');\r\n\r\n      // add type and other type related CSS classes\r\n      value.classList.add(cssClass(this.type));\r\n      if (this.isDate) {\r\n        value.classList.add(cssClass('date'));\r\n      }\r\n      if (this.isUrl) {\r\n        value.classList.add(cssClass('url'));\r\n        value.setAttribute('href', this.json);\r\n      }\r\n\r\n      // Append value content to value element\r\n      const valuePreview = getValuePreview(this.json, this.json);\r\n      value.appendChild(document.createTextNode(valuePreview));\r\n\r\n      // append the value element to toggler link\r\n      togglerLink.appendChild(value);\r\n    }\r\n\r\n    // construct a children element\r\n    const children = createElement('div', 'children');\r\n\r\n    // set CSS classes for children\r\n    if (this.isObject) {\r\n      children.classList.add(cssClass('object'));\r\n    }\r\n    if (this.isArray) {\r\n      children.classList.add(cssClass('array'));\r\n    }\r\n    if (this.isEmpty) {\r\n      children.classList.add(cssClass('empty'));\r\n    }\r\n\r\n    // set CSS classes for root element\r\n    if (this.config && this.config.theme) {\r\n      this.element.classList.add(cssClass(this.config.theme));\r\n    }\r\n    if (this.isOpen) {\r\n      this.element.classList.add(cssClass('open'));\r\n    }\r\n\r\n    // append toggler and children elements to root element\r\n    if (!skipRoot) {\r\n      this.element.appendChild(togglerLink);\r\n    }\r\n\r\n    if (!this.skipChildren) {\r\n      this.element.appendChild(children);\r\n    } else {\r\n      // remove togglerIcon\r\n      togglerLink.removeChild(togglerIcon);\r\n    }\r\n\r\n    // if formatter is set to be open call appendChildren\r\n    if (this.isObject && this.isOpen) {\r\n      this.appendChildren();\r\n    }\r\n\r\n    // add event listener for toggling\r\n    if (this.isObject) {\r\n      togglerLink.addEventListener('click', this.toggleOpen.bind(this));\r\n    }\r\n\r\n    return this.element as HTMLDivElement;\r\n  }\r\n\r\n  /**\r\n   * Appends all the children to children element\r\n   * Animated option is used when user triggers this via a click\r\n   */\r\n  appendChildren(animated = false) {\r\n    const children = this.element.querySelector(`div.${cssClass('children')}`);\r\n\r\n    if (!children || this.isEmpty) {\r\n      return;\r\n    }\r\n\r\n    if (animated) {\r\n      let index = 0;\r\n      const addAChild = () => {\r\n        const key = this.keys[index];\r\n        const formatter = new JsonExplorer(this.json[key], this.open - 1, this.config, key);\r\n        children.appendChild(formatter.render());\r\n\r\n        index += 1;\r\n\r\n        if (index < this.keys.length) {\r\n          if (index > MAX_ANIMATED_TOGGLE_ITEMS) {\r\n            addAChild();\r\n          } else {\r\n            requestAnimationFrame(addAChild);\r\n          }\r\n        }\r\n      };\r\n\r\n      requestAnimationFrame(addAChild);\r\n    } else {\r\n      this.keys.forEach(key => {\r\n        const formatter = new JsonExplorer(this.json[key], this.open - 1, this.config, key);\r\n        children.appendChild(formatter.render());\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes all the children from children element\r\n   * Animated option is used when user triggers this via a click\r\n   */\r\n  removeChildren(animated = false) {\r\n    const childrenElement = this.element.querySelector(`div.${cssClass('children')}`) as HTMLDivElement;\r\n\r\n    if (animated) {\r\n      let childrenRemoved = 0;\r\n      const removeAChild = () => {\r\n        if (childrenElement && childrenElement.children.length) {\r\n          childrenElement.removeChild(childrenElement.children[0]);\r\n          childrenRemoved += 1;\r\n          if (childrenRemoved > MAX_ANIMATED_TOGGLE_ITEMS) {\r\n            removeAChild();\r\n          } else {\r\n            requestAnimationFrame(removeAChild);\r\n          }\r\n        }\r\n      };\r\n      requestAnimationFrame(removeAChild);\r\n    } else {\r\n      if (childrenElement) {\r\n        childrenElement.innerHTML = '';\r\n      }\r\n    }\r\n  }\r\n}\r\n","import coreModule from 'app/core/core_module';\r\nimport { JsonExplorer } from '../json_explorer/json_explorer';\r\n\r\ncoreModule.directive('jsonTree', [\r\n  function jsonTreeDirective() {\r\n    return {\r\n      restrict: 'E',\r\n      scope: {\r\n        object: '=',\r\n        startExpanded: '@',\r\n        rootName: '@',\r\n      },\r\n      link: (scope, elem) => {\r\n        const jsonExp = new JsonExplorer(scope.object, 3, {\r\n          animateOpen: true,\r\n        });\r\n\r\n        const html = jsonExp.render(true);\r\n        elem.html(html);\r\n      },\r\n    };\r\n  },\r\n]);\r\n","/**\r\n * codeEditor directive based on Ace code editor\r\n * https://github.com/ajaxorg/ace\r\n *\r\n * Basic usage:\r\n * <code-editor content=\"ctrl.target.query\" on-change=\"ctrl.panelCtrl.refresh()\"\r\n *  data-mode=\"sql\" data-show-gutter>\r\n * </code-editor>\r\n *\r\n * Params:\r\n * content:      Editor content.\r\n * onChange:     Function called on content change (invoked on editor blur, ctrl+enter, not on every change).\r\n * getCompleter: Function returned external completer. Completer is an object implemented getCompletions() method,\r\n *               see Prometheus Data Source implementation for details.\r\n *\r\n * Some Ace editor options available via data-* attributes:\r\n * data-mode               - Language mode (text, sql, javascript, etc.). Default is 'text'.\r\n * data-theme              - Editor theme (eg 'solarized_dark').\r\n * data-max-lines          - Max editor height in lines. Editor grows automatically from 1 to maxLines.\r\n * data-show-gutter        - Show gutter (contains line numbers and additional info).\r\n * data-tab-size           - Tab size, default is 2.\r\n * data-behaviours-enabled - Specifies whether to use behaviors or not. \"Behaviors\" in this case is the auto-pairing of\r\n *                           special characters, like quotation marks, parenthesis, or brackets.\r\n * data-snippets-enabled   - Specifies whether to use snippets or not. \"Snippets\" are small pieces of code that can be\r\n *                           inserted via the completion box.\r\n *\r\n * Keybindings:\r\n * Ctrl-Enter (Command-Enter): run onChange() function\r\n */\r\n\r\nimport coreModule from 'app/core/core_module';\r\nimport config from 'app/core/config';\r\nimport ace from 'brace';\r\nimport './theme-grafana-dark';\r\nimport 'brace/ext/language_tools';\r\nimport 'brace/theme/textmate';\r\nimport 'brace/mode/text';\r\nimport 'brace/snippets/text';\r\nimport 'brace/mode/sql';\r\nimport 'brace/snippets/sql';\r\nimport 'brace/mode/sqlserver';\r\nimport 'brace/snippets/sqlserver';\r\nimport 'brace/mode/markdown';\r\nimport 'brace/snippets/markdown';\r\nimport 'brace/mode/json';\r\nimport 'brace/snippets/json';\r\n\r\nconst DEFAULT_THEME_DARK = 'ace/theme/grafana-dark';\r\nconst DEFAULT_THEME_LIGHT = 'ace/theme/textmate';\r\nconst DEFAULT_MODE = 'text';\r\nconst DEFAULT_MAX_LINES = 10;\r\nconst DEFAULT_TAB_SIZE = 2;\r\nconst DEFAULT_BEHAVIOURS = true;\r\nconst DEFAULT_SNIPPETS = true;\r\n\r\nconst editorTemplate = `<div></div>`;\r\n\r\nfunction link(scope, elem, attrs) {\r\n  // Options\r\n  const langMode = attrs.mode || DEFAULT_MODE;\r\n  const maxLines = attrs.maxLines || DEFAULT_MAX_LINES;\r\n  const showGutter = attrs.showGutter !== undefined;\r\n  const tabSize = attrs.tabSize || DEFAULT_TAB_SIZE;\r\n  const behavioursEnabled = attrs.behavioursEnabled ? attrs.behavioursEnabled === 'true' : DEFAULT_BEHAVIOURS;\r\n  const snippetsEnabled = attrs.snippetsEnabled ? attrs.snippetsEnabled === 'true' : DEFAULT_SNIPPETS;\r\n\r\n  // Initialize editor\r\n  const aceElem = elem.get(0);\r\n  const codeEditor = ace.edit(aceElem);\r\n  const editorSession = codeEditor.getSession();\r\n\r\n  const editorOptions = {\r\n    maxLines: maxLines,\r\n    showGutter: showGutter,\r\n    tabSize: tabSize,\r\n    behavioursEnabled: behavioursEnabled,\r\n    highlightActiveLine: false,\r\n    showPrintMargin: false,\r\n    autoScrollEditorIntoView: true, // this is needed if editor is inside scrollable page\r\n  };\r\n\r\n  // Set options\r\n  codeEditor.setOptions(editorOptions);\r\n  // disable depreacation warning\r\n  codeEditor.$blockScrolling = Infinity;\r\n  // Padding hacks\r\n  (codeEditor.renderer as any).setScrollMargin(15, 15);\r\n  codeEditor.renderer.setPadding(10);\r\n\r\n  setThemeMode();\r\n  setLangMode(langMode);\r\n  setEditorContent(scope.content);\r\n\r\n  // Add classes\r\n  elem.addClass('gf-code-editor');\r\n  const textarea = elem.find('textarea');\r\n  textarea.addClass('gf-form-input');\r\n\r\n  if (scope.codeEditorFocus) {\r\n    setTimeout(() => {\r\n      textarea.focus();\r\n      const domEl = textarea[0];\r\n      if (domEl.setSelectionRange) {\r\n        const pos = textarea.val().length * 2;\r\n        domEl.setSelectionRange(pos, pos);\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  // Event handlers\r\n  editorSession.on('change', e => {\r\n    scope.$apply(() => {\r\n      const newValue = codeEditor.getValue();\r\n      scope.content = newValue;\r\n    });\r\n  });\r\n\r\n  // Sync with outer scope - update editor content if model has been changed from outside of directive.\r\n  scope.$watch('content', (newValue, oldValue) => {\r\n    const editorValue = codeEditor.getValue();\r\n    if (newValue !== editorValue && newValue !== oldValue) {\r\n      scope.$$postDigest(() => {\r\n        setEditorContent(newValue);\r\n      });\r\n    }\r\n  });\r\n\r\n  codeEditor.on('blur', () => {\r\n    scope.onChange();\r\n  });\r\n\r\n  scope.$on('$destroy', () => {\r\n    codeEditor.destroy();\r\n  });\r\n\r\n  // Keybindings\r\n  codeEditor.commands.addCommand({\r\n    name: 'executeQuery',\r\n    bindKey: { win: 'Ctrl-Enter', mac: 'Command-Enter' },\r\n    exec: () => {\r\n      scope.onChange();\r\n    },\r\n  });\r\n\r\n  function setLangMode(lang) {\r\n    ace.acequire('ace/ext/language_tools');\r\n    codeEditor.setOptions({\r\n      enableBasicAutocompletion: true,\r\n      enableLiveAutocompletion: true,\r\n      enableSnippets: snippetsEnabled,\r\n    });\r\n\r\n    if (scope.getCompleter()) {\r\n      // make copy of array as ace seems to share completers array between instances\r\n      const anyEditor = codeEditor as any;\r\n      anyEditor.completers = anyEditor.completers.slice();\r\n      anyEditor.completers.push(scope.getCompleter());\r\n    }\r\n\r\n    const aceModeName = `ace/mode/${lang}`;\r\n    editorSession.setMode(aceModeName);\r\n  }\r\n\r\n  function setThemeMode() {\r\n    let theme = DEFAULT_THEME_DARK;\r\n    if (config.bootData.user.lightTheme) {\r\n      theme = DEFAULT_THEME_LIGHT;\r\n    }\r\n\r\n    codeEditor.setTheme(theme);\r\n  }\r\n\r\n  function setEditorContent(value) {\r\n    codeEditor.setValue(value);\r\n    codeEditor.clearSelection();\r\n  }\r\n}\r\n\r\nexport function codeEditorDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    template: editorTemplate,\r\n    scope: {\r\n      content: '=',\r\n      datasource: '=',\r\n      codeEditorFocus: '<',\r\n      onChange: '&',\r\n      getCompleter: '&',\r\n    },\r\n    link: link,\r\n  };\r\n}\r\n\r\ncoreModule.directive('codeEditor', codeEditorDirective);\r\n","import React from 'react';\r\nimport { sortedColors } from 'app/core/utils/colors';\r\n\r\nexport interface Props {\r\n  color: string;\r\n  onColorSelect: (c: string) => void;\r\n}\r\n\r\nexport class ColorPalette extends React.Component<Props, any> {\r\n  paletteColors: string[];\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.paletteColors = sortedColors;\r\n    this.onColorSelect = this.onColorSelect.bind(this);\r\n  }\r\n\r\n  onColorSelect(color) {\r\n    return () => {\r\n      this.props.onColorSelect(color);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const colorPaletteItems = this.paletteColors.map(paletteColor => {\r\n      const cssClass = paletteColor.toLowerCase() === this.props.color.toLowerCase() ? 'fa-circle-o' : 'fa-circle';\r\n      return (\r\n        <i\r\n          key={paletteColor}\r\n          className={'pointer fa ' + cssClass}\r\n          style={{ color: paletteColor }}\r\n          onClick={this.onColorSelect(paletteColor)}\r\n        >\r\n          &nbsp;\r\n        </i>\r\n      );\r\n    });\r\n    return (\r\n      <div className=\"graph-legend-popover\">\r\n        <p className=\"m-b-0\">{colorPaletteItems}</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport 'vendor/spectrum';\r\n\r\nexport interface Props {\r\n  color: string;\r\n  options: object;\r\n  onColorSelect: (c: string) => void;\r\n}\r\n\r\nexport class SpectrumPicker extends React.Component<Props, any> {\r\n  elem: any;\r\n  isMoving: boolean;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onSpectrumMove = this.onSpectrumMove.bind(this);\r\n    this.setComponentElem = this.setComponentElem.bind(this);\r\n  }\r\n\r\n  setComponentElem(elem) {\r\n    this.elem = $(elem);\r\n  }\r\n\r\n  onSpectrumMove(color) {\r\n    this.isMoving = true;\r\n    this.props.onColorSelect(color);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const spectrumOptions = _.assignIn(\r\n      {\r\n        flat: true,\r\n        showAlpha: true,\r\n        showButtons: false,\r\n        color: this.props.color,\r\n        appendTo: this.elem,\r\n        move: this.onSpectrumMove,\r\n      },\r\n      this.props.options\r\n    );\r\n\r\n    this.elem.spectrum(spectrumOptions);\r\n    this.elem.spectrum('show');\r\n    this.elem.spectrum('set', this.props.color);\r\n  }\r\n\r\n  componentWillUpdate(nextProps) {\r\n    // If user move pointer over spectrum field this produce 'move' event and component\r\n    // may update props.color. We don't want to update spectrum color in this case, so we can use\r\n    // isMoving flag for tracking moving state. Flag should be cleared in componentDidUpdate() which\r\n    // is called after updating occurs (when user finished moving).\r\n    if (!this.isMoving) {\r\n      this.elem.spectrum('set', nextProps.color);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.isMoving) {\r\n      this.isMoving = false;\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.elem.spectrum('destroy');\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"spectrum-container\" ref={this.setComponentElem} />;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport $ from 'jquery';\r\nimport tinycolor from 'tinycolor2';\r\nimport { ColorPalette } from './ColorPalette';\r\nimport { SpectrumPicker } from './SpectrumPicker';\r\n\r\nconst DEFAULT_COLOR = '#000000';\r\n\r\nexport interface Props {\r\n  color: string;\r\n  onColorSelect: (c: string) => void;\r\n}\r\n\r\nexport class ColorPickerPopover extends React.Component<Props, any> {\r\n  pickerNavElem: any;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tab: 'palette',\r\n      color: this.props.color || DEFAULT_COLOR,\r\n      colorString: this.props.color || DEFAULT_COLOR,\r\n    };\r\n  }\r\n\r\n  setPickerNavElem(elem) {\r\n    this.pickerNavElem = $(elem);\r\n  }\r\n\r\n  setColor(color) {\r\n    const newColor = tinycolor(color);\r\n    if (newColor.isValid()) {\r\n      this.setState({\r\n        color: newColor.toString(),\r\n        colorString: newColor.toString(),\r\n      });\r\n      this.props.onColorSelect(color);\r\n    }\r\n  }\r\n\r\n  sampleColorSelected(color) {\r\n    this.setColor(color);\r\n  }\r\n\r\n  spectrumColorSelected(color) {\r\n    const rgbColor = color.toRgbString();\r\n    this.setColor(rgbColor);\r\n  }\r\n\r\n  onColorStringChange(e) {\r\n    const colorString = e.target.value;\r\n    this.setState({\r\n      colorString: colorString,\r\n    });\r\n\r\n    const newColor = tinycolor(colorString);\r\n    if (newColor.isValid()) {\r\n      // Update only color state\r\n      const newColorString = newColor.toString();\r\n      this.setState({\r\n        color: newColorString,\r\n      });\r\n      this.props.onColorSelect(newColorString);\r\n    }\r\n  }\r\n\r\n  onColorStringBlur(e) {\r\n    const colorString = e.target.value;\r\n    this.setColor(colorString);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.pickerNavElem.find('li:first').addClass('active');\r\n    this.pickerNavElem.on('show', e => {\r\n      // use href attr (#name => name)\r\n      const tab = e.target.hash.slice(1);\r\n      this.setState({\r\n        tab: tab,\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const paletteTab = (\r\n      <div id=\"palette\">\r\n        <ColorPalette color={this.state.color} onColorSelect={this.sampleColorSelected.bind(this)} />\r\n      </div>\r\n    );\r\n    const spectrumTab = (\r\n      <div id=\"spectrum\">\r\n        <SpectrumPicker color={this.state.color} onColorSelect={this.spectrumColorSelected.bind(this)} options={{}} />\r\n      </div>\r\n    );\r\n    const currentTab = this.state.tab === 'palette' ? paletteTab : spectrumTab;\r\n\r\n    return (\r\n      <div className=\"gf-color-picker\">\r\n        <ul className=\"nav nav-tabs\" id=\"colorpickernav\" ref={this.setPickerNavElem.bind(this)}>\r\n          <li className=\"gf-tabs-item-colorpicker\">\r\n            <a href=\"#palette\" data-toggle=\"tab\">\r\n              Colors\r\n            </a>\r\n          </li>\r\n          <li className=\"gf-tabs-item-colorpicker\">\r\n            <a href=\"#spectrum\" data-toggle=\"tab\">\r\n              Custom\r\n            </a>\r\n          </li>\r\n        </ul>\r\n        <div className=\"gf-color-picker__body\">{currentTab}</div>\r\n        <div>\r\n          <input\r\n            className=\"gf-form-input gf-form-input--small\"\r\n            value={this.state.colorString}\r\n            onChange={this.onColorStringChange.bind(this)}\r\n            onBlur={this.onColorStringBlur.bind(this)}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import coreModule from 'app/core/core_module';\r\n\r\nexport function react2AngularDirective(name: string, component: any, options: any) {\r\n  coreModule.directive(name, [\r\n    'reactDirective',\r\n    reactDirective => {\r\n      return reactDirective(component, options);\r\n    },\r\n  ]);\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport $ from 'jquery';\r\nimport Drop from 'tether-drop';\r\nimport { ColorPickerPopover } from './ColorPickerPopover';\r\nimport { react2AngularDirective } from 'app/core/utils/react2angular';\r\n\r\nexport interface Props {\r\n  color: string;\r\n  onChange: (c: string) => void;\r\n}\r\n\r\nexport class ColorPicker extends React.Component<Props, any> {\r\n  pickerElem: any;\r\n  colorPickerDrop: any;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.openColorPicker = this.openColorPicker.bind(this);\r\n    this.closeColorPicker = this.closeColorPicker.bind(this);\r\n    this.setPickerElem = this.setPickerElem.bind(this);\r\n    this.onColorSelect = this.onColorSelect.bind(this);\r\n  }\r\n\r\n  setPickerElem(elem) {\r\n    this.pickerElem = $(elem);\r\n  }\r\n\r\n  openColorPicker() {\r\n    const dropContent = <ColorPickerPopover color={this.props.color} onColorSelect={this.onColorSelect} />;\r\n\r\n    const dropContentElem = document.createElement('div');\r\n    ReactDOM.render(dropContent, dropContentElem);\r\n\r\n    const drop = new Drop({\r\n      target: this.pickerElem[0],\r\n      content: dropContentElem,\r\n      position: 'top center',\r\n      classes: 'drop-popover',\r\n      openOn: 'click',\r\n      hoverCloseDelay: 200,\r\n      tetherOptions: {\r\n        constraints: [{ to: 'scrollParent', attachment: 'none both' }],\r\n      },\r\n    });\r\n\r\n    drop.on('close', this.closeColorPicker);\r\n\r\n    this.colorPickerDrop = drop;\r\n    this.colorPickerDrop.open();\r\n  }\r\n\r\n  closeColorPicker() {\r\n    setTimeout(() => {\r\n      if (this.colorPickerDrop && this.colorPickerDrop.tether) {\r\n        this.colorPickerDrop.destroy();\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  onColorSelect(color) {\r\n    this.props.onChange(color);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"sp-replacer sp-light\" onClick={this.openColorPicker} ref={this.setPickerElem}>\r\n        <div className=\"sp-preview\">\r\n          <div className=\"sp-preview-inner\" style={{ backgroundColor: this.props.color }} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nreact2AngularDirective('colorPicker', ColorPicker, [\r\n  'color',\r\n  ['onChange', { watchDepth: 'reference', wrapApply: true }],\r\n]);\r\n","/**\r\n * Wrapper for the new ngReact <color-picker> directive for backward compatibility.\r\n * Allows remaining <spectrum-picker> untouched in outdated plugins.\r\n * Technically, it's just a wrapper for react component with two-way data binding support.\r\n */\r\nimport coreModule from '../../core_module';\r\n\r\n/** @ngInject */\r\nexport function spectrumPicker() {\r\n  return {\r\n    restrict: 'E',\r\n    require: 'ngModel',\r\n    scope: true,\r\n    replace: true,\r\n    template: '<color-picker color=\"ngModel.$viewValue\" onChange=\"onColorChange\"></color-picker>',\r\n    link: (scope, element, attrs, ngModel) => {\r\n      scope.ngModel = ngModel;\r\n      scope.onColorChange = color => {\r\n        ngModel.$setViewValue(color);\r\n      };\r\n    },\r\n  };\r\n}\r\ncoreModule.directive('spectrumPicker', spectrumPicker);\r\n","import React from 'react';\r\nimport { ColorPickerPopover } from './ColorPickerPopover';\r\nimport { react2AngularDirective } from 'app/core/utils/react2angular';\r\n\r\nexport interface Props {\r\n  series: any;\r\n  onColorChange: (color: string) => void;\r\n  onToggleAxis: () => void;\r\n}\r\n\r\nexport class SeriesColorPicker extends React.Component<Props, any> {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onColorChange = this.onColorChange.bind(this);\r\n    this.onToggleAxis = this.onToggleAxis.bind(this);\r\n  }\r\n\r\n  onColorChange(color) {\r\n    this.props.onColorChange(color);\r\n  }\r\n\r\n  onToggleAxis() {\r\n    this.props.onToggleAxis();\r\n  }\r\n\r\n  renderAxisSelection() {\r\n    const leftButtonClass = this.props.series.yaxis === 1 ? 'btn-success' : 'btn-inverse';\r\n    const rightButtonClass = this.props.series.yaxis === 2 ? 'btn-success' : 'btn-inverse';\r\n\r\n    return (\r\n      <div className=\"p-b-1\">\r\n        <label className=\"small p-r-1\">Y Axis:</label>\r\n        <button onClick={this.onToggleAxis} className={'btn btn-small ' + leftButtonClass}>\r\n          Left\r\n        </button>\r\n        <button onClick={this.onToggleAxis} className={'btn btn-small ' + rightButtonClass}>\r\n          Right\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"graph-legend-popover\">\r\n        {this.props.series.yaxis && this.renderAxisSelection()}\r\n        <ColorPickerPopover color={this.props.series.color} onColorSelect={this.onColorChange} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nreact2AngularDirective('seriesColorPicker', SeriesColorPicker, ['series', 'onColorChange', 'onToggleAxis']);\r\n","import store from 'app/core/store';\r\nimport _ from 'lodash';\r\nimport config from 'app/core/config';\r\n\r\nexport class ImpressionSrv {\r\n  constructor() {}\r\n\r\n  addDashboardImpression(dashboardId) {\r\n    const impressionsKey = this.impressionKey(config);\r\n    let impressions = [];\r\n    if (store.exists(impressionsKey)) {\r\n      impressions = JSON.parse(store.get(impressionsKey));\r\n      if (!_.isArray(impressions)) {\r\n        impressions = [];\r\n      }\r\n    }\r\n\r\n    impressions = impressions.filter(imp => {\r\n      return dashboardId !== imp;\r\n    });\r\n\r\n    impressions.unshift(dashboardId);\r\n\r\n    if (impressions.length > 50) {\r\n      impressions.pop();\r\n    }\r\n    store.set(impressionsKey, JSON.stringify(impressions));\r\n  }\r\n\r\n  getDashboardOpened() {\r\n    let impressions = store.get(this.impressionKey(config)) || '[]';\r\n\r\n    impressions = JSON.parse(impressions);\r\n\r\n    impressions = _.filter(impressions, el => {\r\n      return _.isNumber(el);\r\n    });\r\n\r\n    return impressions;\r\n  }\r\n\r\n  impressionKey(config) {\r\n    return 'dashboard_impressions-' + config.bootData.user.orgId;\r\n  }\r\n}\r\n\r\nconst impressionSrv = new ImpressionSrv();\r\nexport default impressionSrv;\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport impressionSrv from 'app/core/services/impression_srv';\r\nimport store from 'app/core/store';\r\nimport { contextSrv } from 'app/core/services/context_srv';\r\n\r\nexport class SearchSrv {\r\n  recentIsOpen: boolean;\r\n  starredIsOpen: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private $q) {\r\n    this.recentIsOpen = store.getBool('search.sections.recent', true);\r\n    this.starredIsOpen = store.getBool('search.sections.starred', true);\r\n  }\r\n\r\n  private getRecentDashboards(sections) {\r\n    return this.queryForRecentDashboards().then(result => {\r\n      if (result.length > 0) {\r\n        sections['recent'] = {\r\n          title: 'Recent',\r\n          icon: 'fa fa-clock-o',\r\n          score: -1,\r\n          removable: true,\r\n          expanded: this.recentIsOpen,\r\n          toggle: this.toggleRecent.bind(this),\r\n          items: result,\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  private queryForRecentDashboards() {\r\n    const dashIds = _.take(impressionSrv.getDashboardOpened(), 5);\r\n    if (dashIds.length === 0) {\r\n      return Promise.resolve([]);\r\n    }\r\n\r\n    return this.backendSrv.search({ dashboardIds: dashIds }).then(result => {\r\n      return dashIds\r\n        .map(orderId => {\r\n          return _.find(result, { id: orderId });\r\n        })\r\n        .filter(hit => hit && !hit.isStarred);\r\n    });\r\n  }\r\n\r\n  private toggleRecent(section) {\r\n    this.recentIsOpen = section.expanded = !section.expanded;\r\n    store.set('search.sections.recent', this.recentIsOpen);\r\n\r\n    if (!section.expanded || section.items.length) {\r\n      return Promise.resolve(section);\r\n    }\r\n\r\n    return this.queryForRecentDashboards().then(result => {\r\n      section.items = result;\r\n      return Promise.resolve(section);\r\n    });\r\n  }\r\n\r\n  private toggleStarred(section) {\r\n    this.starredIsOpen = section.expanded = !section.expanded;\r\n    store.set('search.sections.starred', this.starredIsOpen);\r\n    return Promise.resolve(section);\r\n  }\r\n\r\n  private getStarred(sections) {\r\n    if (!contextSrv.isSignedIn) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    return this.backendSrv.search({ starred: true, limit: 5 }).then(result => {\r\n      if (result.length > 0) {\r\n        sections['starred'] = {\r\n          title: 'Starred',\r\n          icon: 'fa fa-star-o',\r\n          score: -2,\r\n          expanded: this.starredIsOpen,\r\n          toggle: this.toggleStarred.bind(this),\r\n          items: result,\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  search(options) {\r\n    const sections: any = {};\r\n    const promises = [];\r\n    const query = _.clone(options);\r\n    const hasFilters =\r\n      options.query ||\r\n      (options.tag && options.tag.length > 0) ||\r\n      options.starred ||\r\n      (options.folderIds && options.folderIds.length > 0);\r\n\r\n    if (!options.skipRecent && !hasFilters) {\r\n      promises.push(this.getRecentDashboards(sections));\r\n    }\r\n\r\n    if (!options.skipStarred && !hasFilters) {\r\n      promises.push(this.getStarred(sections));\r\n    }\r\n\r\n    query.folderIds = query.folderIds || [];\r\n    if (!hasFilters) {\r\n      query.folderIds = [0];\r\n    }\r\n\r\n    promises.push(\r\n      this.backendSrv.search(query).then(results => {\r\n        return this.handleSearchResult(sections, results);\r\n      })\r\n    );\r\n\r\n    return this.$q.all(promises).then(() => {\r\n      return _.sortBy(_.values(sections), 'score');\r\n    });\r\n  }\r\n\r\n  private handleSearchResult(sections, results) {\r\n    if (results.length === 0) {\r\n      return sections;\r\n    }\r\n\r\n    // create folder index\r\n    for (const hit of results) {\r\n      if (hit.type === 'dash-folder') {\r\n        sections[hit.id] = {\r\n          id: hit.id,\r\n          uid: hit.uid,\r\n          title: hit.title,\r\n          expanded: false,\r\n          items: [],\r\n          toggle: this.toggleFolder.bind(this),\r\n          url: hit.url,\r\n          icon: 'fa fa-folder',\r\n          score: _.keys(sections).length,\r\n        };\r\n      }\r\n    }\r\n\r\n    for (const hit of results) {\r\n      if (hit.type === 'dash-folder') {\r\n        continue;\r\n      }\r\n\r\n      let section = sections[hit.folderId || 0];\r\n      if (!section) {\r\n        if (hit.folderId) {\r\n          section = {\r\n            id: hit.folderId,\r\n            uid: hit.folderUid,\r\n            title: hit.folderTitle,\r\n            url: hit.folderUrl,\r\n            items: [],\r\n            icon: 'fa fa-folder-open',\r\n            toggle: this.toggleFolder.bind(this),\r\n            score: _.keys(sections).length,\r\n          };\r\n        } else {\r\n          section = {\r\n            id: 0,\r\n            title: 'General',\r\n            items: [],\r\n            icon: 'fa fa-folder-open',\r\n            toggle: this.toggleFolder.bind(this),\r\n            score: _.keys(sections).length,\r\n          };\r\n        }\r\n        // add section\r\n        sections[hit.folderId || 0] = section;\r\n      }\r\n\r\n      section.expanded = true;\r\n      section.items.push(hit);\r\n    }\r\n  }\r\n\r\n  private toggleFolder(section) {\r\n    section.expanded = !section.expanded;\r\n    section.icon = section.expanded ? 'fa fa-folder-open' : 'fa fa-folder';\r\n\r\n    if (section.items.length) {\r\n      return Promise.resolve(section);\r\n    }\r\n\r\n    const query = {\r\n      folderIds: [section.id],\r\n    };\r\n\r\n    return this.backendSrv.search(query).then(results => {\r\n      section.items = results;\r\n      return Promise.resolve(section);\r\n    });\r\n  }\r\n\r\n  getDashboardTags() {\r\n    return this.backendSrv.get('/api/dashboards/tags');\r\n  }\r\n}\r\n\r\ncoreModule.service('searchSrv', SearchSrv);\r\n","//\r\n// This is using ng-react with this PR applied https://github.com/ngReact/ngReact/pull/199\r\n//\r\n\r\n// # ngReact\r\n// ### Use React Components inside of your Angular applications\r\n//\r\n// Composed of\r\n// - reactComponent (generic directive for delegating off to React Components)\r\n// - reactDirective (factory for creating specific directives that correspond to reactComponent directives)\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport angular from 'angular';\r\n\r\n// get a react component from name (components can be an angular injectable e.g. value, factory or\r\n// available on window\r\nfunction getReactComponent(name, $injector) {\r\n  // if name is a function assume it is component and return it\r\n  if (angular.isFunction(name)) {\r\n    return name;\r\n  }\r\n\r\n  // a React component name must be specified\r\n  if (!name) {\r\n    throw new Error('ReactComponent name attribute must be specified');\r\n  }\r\n\r\n  // ensure the specified React component is accessible, and fail fast if it's not\r\n  let reactComponent;\r\n  try {\r\n    reactComponent = $injector.get(name);\r\n  } catch (e) {}\r\n\r\n  if (!reactComponent) {\r\n    try {\r\n      reactComponent = name.split('.').reduce((current, namePart) => {\r\n        return current[namePart];\r\n      }, window);\r\n    } catch (e) {}\r\n  }\r\n\r\n  if (!reactComponent) {\r\n    throw Error('Cannot find react component ' + name);\r\n  }\r\n\r\n  return reactComponent;\r\n}\r\n\r\n// wraps a function with scope.$apply, if already applied just return\r\nfunction applied(fn, scope) {\r\n  if (fn.wrappedInApply) {\r\n    return fn;\r\n  }\r\n  //tslint:disable-next-line:only-arrow-functions\r\n  const wrapped: any = function() {\r\n    const args = arguments;\r\n    const phase = scope.$root.$$phase;\r\n    if (phase === '$apply' || phase === '$digest') {\r\n      return fn.apply(null, args);\r\n    } else {\r\n      return scope.$apply(() => {\r\n        return fn.apply(null, args);\r\n      });\r\n    }\r\n  };\r\n  wrapped.wrappedInApply = true;\r\n  return wrapped;\r\n}\r\n\r\n/**\r\n * wraps functions on obj in scope.$apply\r\n *\r\n * keeps backwards compatibility, as if propsConfig is not passed, it will\r\n * work as before, wrapping all functions and won't wrap only when specified.\r\n *\r\n * @version 0.4.1\r\n * @param obj react component props\r\n * @param scope current scope\r\n * @param propsConfig configuration object for all properties\r\n * @returns {Object} props with the functions wrapped in scope.$apply\r\n */\r\nfunction applyFunctions(obj, scope, propsConfig?) {\r\n  return Object.keys(obj || {}).reduce((prev, key) => {\r\n    const value = obj[key];\r\n    const config = (propsConfig || {})[key] || {};\r\n    /**\r\n     * wrap functions in a function that ensures they are scope.$applied\r\n     * ensures that when function is called from a React component\r\n     * the Angular digest cycle is run\r\n     */\r\n    prev[key] = angular.isFunction(value) && config.wrapApply !== false ? applied(value, scope) : value;\r\n\r\n    return prev;\r\n  }, {});\r\n}\r\n\r\n/**\r\n *\r\n * @param watchDepth (value of HTML watch-depth attribute)\r\n * @param scope (angular scope)\r\n *\r\n * Uses the watchDepth attribute to determine how to watch props on scope.\r\n * If watchDepth attribute is NOT reference or collection, watchDepth defaults to deep watching by value\r\n */\r\nfunction watchProps(watchDepth, scope, watchExpressions, listener) {\r\n  const supportsWatchCollection = angular.isFunction(scope.$watchCollection);\r\n  const supportsWatchGroup = angular.isFunction(scope.$watchGroup);\r\n\r\n  const watchGroupExpressions = [];\r\n\r\n  watchExpressions.forEach(expr => {\r\n    const actualExpr = getPropExpression(expr);\r\n    const exprWatchDepth = getPropWatchDepth(watchDepth, expr);\r\n\r\n    if (exprWatchDepth === 'collection' && supportsWatchCollection) {\r\n      scope.$watchCollection(actualExpr, listener);\r\n    } else if (exprWatchDepth === 'reference' && supportsWatchGroup) {\r\n      watchGroupExpressions.push(actualExpr);\r\n    } else if (exprWatchDepth === 'one-time') {\r\n      //do nothing because we handle our one time bindings after this\r\n    } else {\r\n      scope.$watch(actualExpr, listener, exprWatchDepth !== 'reference');\r\n    }\r\n  });\r\n\r\n  if (watchDepth === 'one-time') {\r\n    listener();\r\n  }\r\n\r\n  if (watchGroupExpressions.length) {\r\n    scope.$watchGroup(watchGroupExpressions, listener);\r\n  }\r\n}\r\n\r\n// render React component, with scope[attrs.props] being passed in as the component props\r\nfunction renderComponent(component, props, scope, elem) {\r\n  scope.$evalAsync(() => {\r\n    ReactDOM.render(React.createElement(component, props), elem[0]);\r\n  });\r\n}\r\n\r\n// get prop name from prop (string or array)\r\nfunction getPropName(prop) {\r\n  return Array.isArray(prop) ? prop[0] : prop;\r\n}\r\n\r\n// get prop name from prop (string or array)\r\nfunction getPropConfig(prop) {\r\n  return Array.isArray(prop) ? prop[1] : {};\r\n}\r\n\r\n// get prop expression from prop (string or array)\r\nfunction getPropExpression(prop) {\r\n  return Array.isArray(prop) ? prop[0] : prop;\r\n}\r\n\r\n// find the normalized attribute knowing that React props accept any type of capitalization\r\nfunction findAttribute(attrs, propName) {\r\n  const index = Object.keys(attrs).filter(attr => {\r\n    return attr.toLowerCase() === propName.toLowerCase();\r\n  })[0];\r\n  return attrs[index];\r\n}\r\n\r\n// get watch depth of prop (string or array)\r\nfunction getPropWatchDepth(defaultWatch, prop) {\r\n  const customWatchDepth = Array.isArray(prop) && angular.isObject(prop[1]) && prop[1].watchDepth;\r\n  return customWatchDepth || defaultWatch;\r\n}\r\n\r\n// # reactComponent\r\n// Directive that allows React components to be used in Angular templates.\r\n//\r\n// Usage:\r\n//     <react-component name=\"Hello\" props=\"name\"/>\r\n//\r\n// This requires that there exists an injectable or globally available 'Hello' React component.\r\n// The 'props' attribute is optional and is passed to the component.\r\n//\r\n// The following would would create and register the component:\r\n//\r\n//     var module = angular.module('ace.react.components');\r\n//     module.value('Hello', React.createClass({\r\n//         render: function() {\r\n//             return <div>Hello {this.props.name}</div>;\r\n//         }\r\n//     }));\r\n//\r\nconst reactComponent = $injector => {\r\n  return {\r\n    restrict: 'E',\r\n    replace: true,\r\n    link: function(scope, elem, attrs) {\r\n      const reactComponent = getReactComponent(attrs.name, $injector);\r\n\r\n      const renderMyComponent = () => {\r\n        const scopeProps = scope.$eval(attrs.props);\r\n        const props = applyFunctions(scopeProps, scope);\r\n\r\n        renderComponent(reactComponent, props, scope, elem);\r\n      };\r\n\r\n      // If there are props, re-render when they change\r\n      attrs.props ? watchProps(attrs.watchDepth, scope, [attrs.props], renderMyComponent) : renderMyComponent();\r\n\r\n      // cleanup when scope is destroyed\r\n      scope.$on('$destroy', () => {\r\n        if (!attrs.onScopeDestroy) {\r\n          ReactDOM.unmountComponentAtNode(elem[0]);\r\n        } else {\r\n          scope.$eval(attrs.onScopeDestroy, {\r\n            unmountComponent: ReactDOM.unmountComponentAtNode.bind(this, elem[0]),\r\n          });\r\n        }\r\n      });\r\n    },\r\n  };\r\n};\r\n\r\n// # reactDirective\r\n// Factory function to create directives for React components.\r\n//\r\n// With a component like this:\r\n//\r\n//     var module = angular.module('ace.react.components');\r\n//     module.value('Hello', React.createClass({\r\n//         render: function() {\r\n//             return <div>Hello {this.props.name}</div>;\r\n//         }\r\n//     }));\r\n//\r\n// A directive can be created and registered with:\r\n//\r\n//     module.directive('hello', function(reactDirective) {\r\n//         return reactDirective('Hello', ['name']);\r\n//     });\r\n//\r\n// Where the first argument is the injectable or globally accessible name of the React component\r\n// and the second argument is an array of property names to be watched and passed to the React component\r\n// as props.\r\n//\r\n// This directive can then be used like this:\r\n//\r\n//     <hello name=\"name\"/>\r\n//\r\nconst reactDirective = $injector => {\r\n  return (reactComponentName, props, conf, injectableProps) => {\r\n    const directive = {\r\n      restrict: 'E',\r\n      replace: true,\r\n      link: function(scope, elem, attrs) {\r\n        const reactComponent = getReactComponent(reactComponentName, $injector);\r\n\r\n        // if props is not defined, fall back to use the React component's propTypes if present\r\n        props = props || Object.keys(reactComponent.propTypes || {});\r\n\r\n        // for each of the properties, get their scope value and set it to scope.props\r\n        const renderMyComponent = () => {\r\n          let scopeProps = {};\r\n          const config = {};\r\n\r\n          props.forEach(prop => {\r\n            const propName = getPropName(prop);\r\n            scopeProps[propName] = scope.$eval(findAttribute(attrs, propName));\r\n            config[propName] = getPropConfig(prop);\r\n          });\r\n\r\n          scopeProps = applyFunctions(scopeProps, scope, config);\r\n          scopeProps = angular.extend({}, scopeProps, injectableProps);\r\n          renderComponent(reactComponent, scopeProps, scope, elem);\r\n        };\r\n\r\n        // watch each property name and trigger an update whenever something changes,\r\n        // to update scope.props with new values\r\n        const propExpressions = props.map(prop => {\r\n          return Array.isArray(prop) ? [attrs[getPropName(prop)], getPropConfig(prop)] : attrs[prop];\r\n        });\r\n\r\n        // If we don't have any props, then our watch statement won't fire.\r\n        props.length ? watchProps(attrs.watchDepth, scope, propExpressions, renderMyComponent) : renderMyComponent();\r\n\r\n        // cleanup when scope is destroyed\r\n        scope.$on('$destroy', () => {\r\n          if (!attrs.onScopeDestroy) {\r\n            ReactDOM.unmountComponentAtNode(elem[0]);\r\n          } else {\r\n            scope.$eval(attrs.onScopeDestroy, {\r\n              unmountComponent: ReactDOM.unmountComponentAtNode.bind(this, elem[0]),\r\n            });\r\n          }\r\n        });\r\n      },\r\n    };\r\n    return angular.extend(directive, conf);\r\n  };\r\n};\r\n\r\nconst ngModule = angular.module('react', []);\r\nngModule.directive('reactComponent', ['$injector', reactComponent]);\r\nngModule.factory('reactDirective', ['$injector', reactDirective]);\r\n","import _ from 'lodash';\r\nimport coreModule from '../../core_module';\r\nimport { SearchSrv } from 'app/core/services/search_srv';\r\nimport { contextSrv } from 'app/core/services/context_srv';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class SearchCtrl {\r\n  isOpen: boolean;\r\n  query: any;\r\n  giveSearchFocus: number;\r\n  selectedIndex: number;\r\n  results: any;\r\n  currentSearchId: number;\r\n  showImport: boolean;\r\n  dismiss: any;\r\n  ignoreClose: any;\r\n  isLoading: boolean;\r\n  initialFolderFilterTitle: string;\r\n  isEditor: string;\r\n  hasEditPermissionInFolders: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, private $location, private $timeout, private searchSrv: SearchSrv) {\r\n    appEvents.on('show-dash-search', this.openSearch.bind(this), $scope);\r\n    appEvents.on('hide-dash-search', this.closeSearch.bind(this), $scope);\r\n\r\n    this.initialFolderFilterTitle = 'All';\r\n    this.getTags = this.getTags.bind(this);\r\n    this.onTagSelect = this.onTagSelect.bind(this);\r\n    this.isEditor = contextSrv.isEditor;\r\n    this.hasEditPermissionInFolders = contextSrv.hasEditPermissionInFolders;\r\n  }\r\n\r\n  closeSearch() {\r\n    this.isOpen = this.ignoreClose;\r\n  }\r\n\r\n  openSearch(evt, payload) {\r\n    if (this.isOpen) {\r\n      this.closeSearch();\r\n      return;\r\n    }\r\n\r\n    this.isOpen = true;\r\n    this.giveSearchFocus = 0;\r\n    this.selectedIndex = -1;\r\n    this.results = [];\r\n    this.query = { query: '', tag: [], starred: false };\r\n    this.currentSearchId = 0;\r\n    this.ignoreClose = true;\r\n    this.isLoading = true;\r\n\r\n    if (payload && payload.starred) {\r\n      this.query.starred = true;\r\n    }\r\n\r\n    this.$timeout(() => {\r\n      this.ignoreClose = false;\r\n      this.giveSearchFocus = this.giveSearchFocus + 1;\r\n      this.search();\r\n    }, 100);\r\n  }\r\n\r\n  keyDown(evt) {\r\n    if (evt.keyCode === 27) {\r\n      this.closeSearch();\r\n    }\r\n    if (evt.keyCode === 40) {\r\n      this.moveSelection(1);\r\n    }\r\n    if (evt.keyCode === 38) {\r\n      this.moveSelection(-1);\r\n    }\r\n    if (evt.keyCode === 13) {\r\n      const flattenedResult = this.getFlattenedResultForNavigation();\r\n      const currentItem = flattenedResult[this.selectedIndex];\r\n\r\n      if (currentItem) {\r\n        if (currentItem.dashboardIndex !== undefined) {\r\n          const selectedDash = this.results[currentItem.folderIndex].items[currentItem.dashboardIndex];\r\n\r\n          if (selectedDash) {\r\n            this.$location.search({});\r\n            this.$location.path(selectedDash.url);\r\n            this.closeSearch();\r\n          }\r\n        } else {\r\n          const selectedFolder = this.results[currentItem.folderIndex];\r\n\r\n          if (selectedFolder) {\r\n            selectedFolder.toggle(selectedFolder);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onFilterboxClick() {\r\n    this.giveSearchFocus = 0;\r\n    this.preventClose();\r\n  }\r\n\r\n  preventClose() {\r\n    this.ignoreClose = true;\r\n\r\n    this.$timeout(() => {\r\n      this.ignoreClose = false;\r\n    }, 100);\r\n  }\r\n\r\n  moveSelection(direction) {\r\n    if (this.results.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const flattenedResult = this.getFlattenedResultForNavigation();\r\n    const currentItem = flattenedResult[this.selectedIndex];\r\n\r\n    if (currentItem) {\r\n      if (currentItem.dashboardIndex !== undefined) {\r\n        this.results[currentItem.folderIndex].items[currentItem.dashboardIndex].selected = false;\r\n      } else {\r\n        this.results[currentItem.folderIndex].selected = false;\r\n      }\r\n    }\r\n\r\n    if (direction === 0) {\r\n      this.selectedIndex = -1;\r\n      return;\r\n    }\r\n\r\n    const max = flattenedResult.length;\r\n    const newIndex = (this.selectedIndex + direction) % max;\r\n    this.selectedIndex = newIndex < 0 ? newIndex + max : newIndex;\r\n    const selectedItem = flattenedResult[this.selectedIndex];\r\n\r\n    if (selectedItem.dashboardIndex === undefined && this.results[selectedItem.folderIndex].id === 0) {\r\n      this.moveSelection(direction);\r\n      return;\r\n    }\r\n\r\n    if (selectedItem.dashboardIndex !== undefined) {\r\n      if (!this.results[selectedItem.folderIndex].expanded) {\r\n        this.moveSelection(direction);\r\n        return;\r\n      }\r\n\r\n      this.results[selectedItem.folderIndex].items[selectedItem.dashboardIndex].selected = true;\r\n      return;\r\n    }\r\n\r\n    if (this.results[selectedItem.folderIndex].hideHeader) {\r\n      this.moveSelection(direction);\r\n      return;\r\n    }\r\n\r\n    this.results[selectedItem.folderIndex].selected = true;\r\n  }\r\n\r\n  searchDashboards() {\r\n    this.currentSearchId = this.currentSearchId + 1;\r\n    const localSearchId = this.currentSearchId;\r\n    const query = {\r\n      ...this.query,\r\n      tag: this.query.tag.map(i => i.value),\r\n    };\r\n\r\n    return this.searchSrv.search(query).then(results => {\r\n      if (localSearchId < this.currentSearchId) {\r\n        return;\r\n      }\r\n      this.results = results || [];\r\n      this.isLoading = false;\r\n      this.moveSelection(1);\r\n    });\r\n  }\r\n\r\n  queryHasNoFilters() {\r\n    const query = this.query;\r\n    return query.query === '' && query.starred === false && query.tag.length === 0;\r\n  }\r\n\r\n  filterByTag(tag) {\r\n    if (_.indexOf(this.query.tag, tag) === -1) {\r\n      this.query.tag.push(tag);\r\n      this.search();\r\n    }\r\n  }\r\n\r\n  removeTag(tag, evt) {\r\n    this.query.tag = _.without(this.query.tag, tag);\r\n    this.search();\r\n    this.giveSearchFocus = this.giveSearchFocus + 1;\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n  }\r\n\r\n  getTags() {\r\n    return this.searchSrv.getDashboardTags();\r\n  }\r\n\r\n  onTagSelect(newTags) {\r\n    this.query.tag = newTags;\r\n    this.search();\r\n  }\r\n\r\n  clearSearchFilter() {\r\n    this.query.tag = [];\r\n    this.search();\r\n  }\r\n\r\n  showStarred() {\r\n    this.query.starred = !this.query.starred;\r\n    this.giveSearchFocus = this.giveSearchFocus + 1;\r\n    this.search();\r\n  }\r\n\r\n  search() {\r\n    this.showImport = false;\r\n    this.selectedIndex = -1;\r\n    this.searchDashboards();\r\n  }\r\n\r\n  folderExpanding() {\r\n    this.moveSelection(0);\r\n  }\r\n\r\n  private getFlattenedResultForNavigation() {\r\n    let folderIndex = 0;\r\n\r\n    return _.flatMap(this.results, s => {\r\n      let result = [];\r\n\r\n      result.push({\r\n        folderIndex: folderIndex,\r\n      });\r\n\r\n      let dashboardIndex = 0;\r\n\r\n      result = result.concat(\r\n        _.map(s.items || [], i => {\r\n          return {\r\n            folderIndex: folderIndex,\r\n            dashboardIndex: dashboardIndex++,\r\n          };\r\n        })\r\n      );\r\n\r\n      folderIndex++;\r\n      return result;\r\n    });\r\n  }\r\n}\r\n\r\nexport function searchDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/core/components/search/search.html',\r\n    controller: SearchCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {},\r\n  };\r\n}\r\n\r\ncoreModule.directive('dashboardSearch', searchDirective);\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport Drop from 'tether-drop';\r\n\r\nexport function infoPopover() {\r\n  return {\r\n    restrict: 'E',\r\n    template: '<i class=\"fa fa-info-circle\"></i>',\r\n    transclude: true,\r\n    link: (scope, elem, attrs, ctrl, transclude) => {\r\n      const offset = attrs.offset || '0 -10px';\r\n      const position = attrs.position || 'right middle';\r\n      let classes = 'drop-help drop-hide-out-of-bounds';\r\n      const openOn = 'hover';\r\n\r\n      elem.addClass('gf-form-help-icon');\r\n\r\n      if (attrs.wide) {\r\n        classes += ' drop-wide';\r\n      }\r\n\r\n      if (attrs.mode) {\r\n        elem.addClass('gf-form-help-icon--' + attrs.mode);\r\n      }\r\n\r\n      transclude((clone, newScope) => {\r\n        const content = document.createElement('div');\r\n        content.className = 'markdown-html';\r\n\r\n        _.each(clone, node => {\r\n          content.appendChild(node);\r\n        });\r\n\r\n        const dropOptions = {\r\n          target: elem[0],\r\n          content: content,\r\n          position: position,\r\n          classes: classes,\r\n          openOn: openOn,\r\n          hoverOpenDelay: 400,\r\n          tetherOptions: {\r\n            offset: offset,\r\n            constraints: [\r\n              {\r\n                to: 'window',\r\n                attachment: 'together',\r\n                pin: true,\r\n              },\r\n            ],\r\n          },\r\n        };\r\n\r\n        // Create drop in next digest after directive content is rendered.\r\n        scope.$applyAsync(() => {\r\n          const drop = new Drop(dropOptions);\r\n\r\n          const unbind = scope.$on('$destroy', () => {\r\n            drop.destroy();\r\n            unbind();\r\n          });\r\n        });\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('infoPopover', infoPopover);\r\n","import _ from 'lodash';\r\nimport coreModule from '../core_module';\r\n\r\nexport function arrayJoin() {\r\n  'use strict';\r\n\r\n  return {\r\n    restrict: 'A',\r\n    require: 'ngModel',\r\n    link: (scope, element, attr, ngModel) => {\r\n      function split_array(text) {\r\n        return (text || '').split(',');\r\n      }\r\n\r\n      function join_array(text) {\r\n        if (_.isArray(text)) {\r\n          return (text || '').join(',');\r\n        } else {\r\n          return text;\r\n        }\r\n      }\r\n\r\n      ngModel.$parsers.push(split_array);\r\n      ngModel.$formatters.push(join_array);\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('arrayJoin', arrayJoin);\r\n","import coreModule from '../../core_module';\r\nimport { NavModel } from '../../nav_model_srv';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class NavbarCtrl {\r\n  model: NavModel;\r\n\r\n  /** @ngInject */\r\n  constructor() {}\r\n\r\n  showSearch() {\r\n    appEvents.emit('show-dash-search');\r\n  }\r\n\r\n  navItemClicked(navItem, evt) {\r\n    if (navItem.clickHandler) {\r\n      navItem.clickHandler();\r\n      evt.preventDefault();\r\n    }\r\n  }\r\n}\r\n\r\nexport function navbarDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/core/components/navbar/navbar.html',\r\n    controller: NavbarCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      model: '=',\r\n    },\r\n    link: (scope, elem) => {},\r\n  };\r\n}\r\n\r\nexport function pageH1() {\r\n  return {\r\n    restrict: 'E',\r\n    template: `\r\n    <h1 class=\"page-header__title\">\r\n      <i class=\"page-header__icon {{::model.header.icon}}\" ng-if=\"::model.header.icon\"></i>\r\n      <img class=\"page-header__img\" ng-src=\"{{::model.header.img}}\" ng-if=\"::model.header.img\"></i>\r\n      {{model.header.text}}\r\n    </h1>\r\n    `,\r\n    scope: {\r\n      model: '=',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('pageH1', pageH1);\r\ncoreModule.directive('navbar', navbarDirective);\r\n","import _ from 'lodash';\r\nimport config from 'app/core/config';\r\n\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\nexport class LiveSrv {\r\n  conn: any;\r\n  observers: any;\r\n  initPromise: any;\r\n\r\n  constructor() {\r\n    this.observers = {};\r\n  }\r\n\r\n  getWebSocketUrl() {\r\n    const l = window.location;\r\n    return (l.protocol === 'https:' ? 'wss://' : 'ws://') + l.host + config.appSubUrl + '/ws';\r\n  }\r\n\r\n  getConnection() {\r\n    if (this.initPromise) {\r\n      return this.initPromise;\r\n    }\r\n\r\n    if (this.conn && this.conn.readyState === 1) {\r\n      return Promise.resolve(this.conn);\r\n    }\r\n\r\n    this.initPromise = new Promise((resolve, reject) => {\r\n      console.log('Live: connecting...');\r\n      this.conn = new WebSocket(this.getWebSocketUrl());\r\n\r\n      this.conn.onclose = evt => {\r\n        console.log('Live: websocket onclose', evt);\r\n        reject({ message: 'Connection closed' });\r\n\r\n        this.initPromise = null;\r\n        setTimeout(this.reconnect.bind(this), 2000);\r\n      };\r\n\r\n      this.conn.onmessage = evt => {\r\n        this.handleMessage(evt.data);\r\n      };\r\n\r\n      this.conn.onerror = evt => {\r\n        this.initPromise = null;\r\n        reject({ message: 'Connection error' });\r\n        console.log('Live: websocket error', evt);\r\n      };\r\n\r\n      this.conn.onopen = evt => {\r\n        console.log('opened');\r\n        this.initPromise = null;\r\n        resolve(this.conn);\r\n      };\r\n    });\r\n\r\n    return this.initPromise;\r\n  }\r\n\r\n  handleMessage(message) {\r\n    message = JSON.parse(message);\r\n\r\n    if (!message.stream) {\r\n      console.log('Error: stream message without stream!', message);\r\n      return;\r\n    }\r\n\r\n    const observer = this.observers[message.stream];\r\n    if (!observer) {\r\n      this.removeObserver(message.stream, null);\r\n      return;\r\n    }\r\n\r\n    observer.next(message);\r\n  }\r\n\r\n  reconnect() {\r\n    // no need to reconnect if no one cares\r\n    if (_.keys(this.observers).length === 0) {\r\n      return;\r\n    }\r\n\r\n    console.log('LiveSrv: Reconnecting');\r\n\r\n    this.getConnection().then(conn => {\r\n      _.each(this.observers, (value, key) => {\r\n        this.send({ action: 'subscribe', stream: key });\r\n      });\r\n    });\r\n  }\r\n\r\n  send(data) {\r\n    this.conn.send(JSON.stringify(data));\r\n  }\r\n\r\n  addObserver(stream, observer) {\r\n    this.observers[stream] = observer;\r\n\r\n    this.getConnection().then(conn => {\r\n      this.send({ action: 'subscribe', stream: stream });\r\n    });\r\n  }\r\n\r\n  removeObserver(stream, observer) {\r\n    console.log('unsubscribe', stream);\r\n    delete this.observers[stream];\r\n\r\n    this.getConnection().then(conn => {\r\n      this.send({ action: 'unsubscribe', stream: stream });\r\n    });\r\n  }\r\n\r\n  subscribe(streamName) {\r\n    console.log('LiveSrv.subscribe: ' + streamName);\r\n\r\n    return Observable.create(observer => {\r\n      this.addObserver(streamName, observer);\r\n\r\n      return () => {\r\n        this.removeObserver(streamName, observer);\r\n      };\r\n    });\r\n\r\n    // return this.init().then(() =>  {\r\n    //   this.send({action: 'subscribe', stream: name});\r\n    // });\r\n  }\r\n}\r\n\r\nconst instance = new LiveSrv();\r\nexport { instance as liveSrv };\r\n","import store from 'app/core/store';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<div class=\"layout-selector\">\r\n  <button ng-click=\"ctrl.listView()\" ng-class=\"{active: ctrl.mode === 'list'}\">\r\n    <i class=\"fa fa-list\"></i>\r\n  </button>\r\n  <button ng-click=\"ctrl.gridView()\" ng-class=\"{active: ctrl.mode === 'grid'}\">\r\n    <i class=\"fa fa-th\"></i>\r\n  </button>\r\n</div>\r\n`;\r\n\r\nexport class LayoutSelectorCtrl {\r\n  mode: string;\r\n\r\n  /** @ngInject */\r\n  constructor(private $rootScope) {\r\n    this.mode = store.get('grafana.list.layout.mode') || 'grid';\r\n  }\r\n\r\n  listView() {\r\n    this.mode = 'list';\r\n    store.set('grafana.list.layout.mode', 'list');\r\n    this.$rootScope.appEvent('layout-mode-changed', 'list');\r\n  }\r\n\r\n  gridView() {\r\n    this.mode = 'grid';\r\n    store.set('grafana.list.layout.mode', 'grid');\r\n    this.$rootScope.appEvent('layout-mode-changed', 'grid');\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function layoutSelector() {\r\n  return {\r\n    restrict: 'E',\r\n    controller: LayoutSelectorCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {},\r\n    template: template,\r\n  };\r\n}\r\n\r\n/** @ngInject */\r\nexport function layoutMode($rootScope) {\r\n  return {\r\n    restrict: 'A',\r\n    scope: {},\r\n    link: (scope, elem) => {\r\n      const layout = store.get('grafana.list.layout.mode') || 'grid';\r\n      let className = 'card-list-layout-' + layout;\r\n      elem.addClass(className);\r\n\r\n      $rootScope.onAppEvent(\r\n        'layout-mode-changed',\r\n        (evt, newLayout) => {\r\n          elem.removeClass(className);\r\n          className = 'card-list-layout-' + newLayout;\r\n          elem.addClass(className);\r\n        },\r\n        scope\r\n      );\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('layoutSelector', layoutSelector);\r\ncoreModule.directive('layoutMode', layoutMode);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<label for=\"check-{{ctrl.id}}\" class=\"gf-form-label {{ctrl.labelClass}} pointer\" ng-show=\"ctrl.label\">\r\n  {{ctrl.label}}\r\n  <info-popover mode=\"right-normal\" ng-if=\"ctrl.tooltip\" position=\"top center\">\r\n    {{ctrl.tooltip}}\r\n  </info-popover>\r\n</label>\r\n<div class=\"gf-form-switch {{ctrl.switchClass}}\" ng-if=\"ctrl.show\">\r\n  <input id=\"check-{{ctrl.id}}\" type=\"checkbox\" ng-model=\"ctrl.checked\" ng-change=\"ctrl.internalOnChange()\">\r\n  <label for=\"check-{{ctrl.id}}\" data-on=\"Yes\" data-off=\"No\"></label>\r\n</div>\r\n`;\r\n\r\nexport class SwitchCtrl {\r\n  onChange: any;\r\n  checked: any;\r\n  show: any;\r\n  id: any;\r\n  label: string;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, private $timeout) {\r\n    this.show = true;\r\n    this.id = $scope.$id;\r\n  }\r\n\r\n  internalOnChange() {\r\n    return this.$timeout(() => {\r\n      return this.onChange();\r\n    });\r\n  }\r\n}\r\n\r\nexport function switchDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    controller: SwitchCtrl,\r\n    controllerAs: 'ctrl',\r\n    bindToController: true,\r\n    scope: {\r\n      checked: '=',\r\n      label: '@',\r\n      labelClass: '@',\r\n      tooltip: '@',\r\n      switchClass: '@',\r\n      onChange: '&',\r\n    },\r\n    template: template,\r\n  };\r\n}\r\n\r\ncoreModule.directive('gfFormSwitch', switchDirective);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<select class=\"gf-form-input\" ng-model=\"ctrl.model\" ng-options=\"f.value as f.text for f in ctrl.options\"></select>\r\n`;\r\n\r\nexport class DashboardSelectorCtrl {\r\n  model: any;\r\n  options: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv) {}\r\n\r\n  $onInit() {\r\n    this.options = [{ value: 0, text: 'Default' }];\r\n\r\n    return this.backendSrv.search({ starred: true }).then(res => {\r\n      res.forEach(dash => {\r\n        this.options.push({ value: dash.id, text: dash.title });\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport function dashboardSelector() {\r\n  return {\r\n    restrict: 'E',\r\n    controller: DashboardSelectorCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    template: template,\r\n    scope: {\r\n      model: '=',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('dashboardSelector', dashboardSelector);\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<div class=\"dropdown cascade-open\">\r\n<a ng-click=\"showActionsMenu()\" class=\"query-part-name pointer dropdown-toggle\" data-toggle=\"dropdown\">{{part.def.type}}</a>\r\n<span>(</span><span class=\"query-part-parameters\"></span><span>)</span>\r\n<ul class=\"dropdown-menu\">\r\n  <li ng-repeat=\"action in partActions\">\r\n    <a ng-click=\"triggerPartAction(action)\">{{action.text}}</a>\r\n  </li>\r\n</ul>\r\n`;\r\n\r\n/** @ngInject */\r\nexport function queryPartEditorDirective($compile, templateSrv) {\r\n  const paramTemplate = '<input type=\"text\" class=\"hide input-mini tight-form-func-param\"></input>';\r\n\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    scope: {\r\n      part: '=',\r\n      handleEvent: '&',\r\n      debounce: '@',\r\n    },\r\n    link: function postLink($scope, elem) {\r\n      const part = $scope.part;\r\n      const partDef = part.def;\r\n      const $paramsContainer = elem.find('.query-part-parameters');\r\n      const debounceLookup = $scope.debounce;\r\n\r\n      $scope.partActions = [];\r\n\r\n      function clickFuncParam(this: any, paramIndex) {\r\n        /*jshint validthis:true */\r\n        const $link = $(this);\r\n        const $input = $link.next();\r\n\r\n        $input.val(part.params[paramIndex]);\r\n        $input.css('width', $link.width() + 16 + 'px');\r\n\r\n        $link.hide();\r\n        $input.show();\r\n        $input.focus();\r\n        $input.select();\r\n\r\n        const typeahead = $input.data('typeahead');\r\n        if (typeahead) {\r\n          $input.val('');\r\n          typeahead.lookup();\r\n        }\r\n      }\r\n\r\n      function inputBlur(this: any, paramIndex) {\r\n        /*jshint validthis:true */\r\n        const $input = $(this);\r\n        const $link = $input.prev();\r\n        const newValue = $input.val();\r\n\r\n        if (newValue !== '' || part.def.params[paramIndex].optional) {\r\n          $link.html(templateSrv.highlightVariablesAsHtml(newValue));\r\n\r\n          part.updateParam($input.val(), paramIndex);\r\n          $scope.$apply(() => {\r\n            $scope.handleEvent({ $event: { name: 'part-param-changed' } });\r\n          });\r\n        }\r\n\r\n        $input.hide();\r\n        $link.show();\r\n      }\r\n\r\n      function inputKeyPress(this: any, paramIndex, e) {\r\n        /*jshint validthis:true */\r\n        if (e.which === 13) {\r\n          inputBlur.call(this, paramIndex);\r\n        }\r\n      }\r\n\r\n      function inputKeyDown(this: any) {\r\n        /*jshint validthis:true */\r\n        this.style.width = (3 + this.value.length) * 8 + 'px';\r\n      }\r\n\r\n      function addTypeahead($input, param, paramIndex) {\r\n        if (!param.options && !param.dynamicLookup) {\r\n          return;\r\n        }\r\n\r\n        const typeaheadSource = (query, callback) => {\r\n          if (param.options) {\r\n            let options = param.options;\r\n            if (param.type === 'int') {\r\n              options = _.map(options, val => {\r\n                return val.toString();\r\n              });\r\n            }\r\n            return options;\r\n          }\r\n\r\n          $scope.$apply(() => {\r\n            $scope.handleEvent({ $event: { name: 'get-param-options' } }).then(result => {\r\n              const dynamicOptions = _.map(result, op => {\r\n                return _.escape(op.value);\r\n              });\r\n              callback(dynamicOptions);\r\n            });\r\n          });\r\n        };\r\n\r\n        $input.attr('data-provide', 'typeahead');\r\n\r\n        $input.typeahead({\r\n          source: typeaheadSource,\r\n          minLength: 0,\r\n          items: 1000,\r\n          updater: value => {\r\n            value = _.unescape(value);\r\n            setTimeout(() => {\r\n              inputBlur.call($input[0], paramIndex);\r\n            }, 0);\r\n            return value;\r\n          },\r\n        });\r\n\r\n        const typeahead = $input.data('typeahead');\r\n        typeahead.lookup = function() {\r\n          this.query = this.$element.val() || '';\r\n          const items = this.source(this.query, $.proxy(this.process, this));\r\n          return items ? this.process(items) : items;\r\n        };\r\n\r\n        if (debounceLookup) {\r\n          typeahead.lookup = _.debounce(typeahead.lookup, 500, { leading: true });\r\n        }\r\n      }\r\n\r\n      $scope.showActionsMenu = () => {\r\n        $scope.handleEvent({ $event: { name: 'get-part-actions' } }).then(res => {\r\n          $scope.partActions = res;\r\n        });\r\n      };\r\n\r\n      $scope.triggerPartAction = action => {\r\n        $scope.handleEvent({ $event: { name: 'action', action: action } });\r\n      };\r\n\r\n      function addElementsAndCompile() {\r\n        _.each(partDef.params, (param, index) => {\r\n          if (param.optional && part.params.length <= index) {\r\n            return;\r\n          }\r\n\r\n          if (index > 0) {\r\n            $('<span>, </span>').appendTo($paramsContainer);\r\n          }\r\n\r\n          const paramValue = templateSrv.highlightVariablesAsHtml(part.params[index]);\r\n          const $paramLink = $('<a class=\"graphite-func-param-link pointer\">' + paramValue + '</a>');\r\n          const $input = $(paramTemplate);\r\n\r\n          $paramLink.appendTo($paramsContainer);\r\n          $input.appendTo($paramsContainer);\r\n\r\n          $input.blur(_.partial(inputBlur, index));\r\n          $input.keyup(inputKeyDown);\r\n          $input.keypress(_.partial(inputKeyPress, index));\r\n          $paramLink.click(_.partial(clickFuncParam, index));\r\n\r\n          addTypeahead($input, param, index);\r\n        });\r\n      }\r\n\r\n      function relink() {\r\n        $paramsContainer.empty();\r\n        addElementsAndCompile();\r\n      }\r\n\r\n      relink();\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('queryPartEditor', queryPartEditorDirective);\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<div class=\"dropdown cascade-open\">\r\n<a ng-click=\"showActionsMenu()\" class=\"query-part-name pointer dropdown-toggle\" data-toggle=\"dropdown\">{{part.label}}</a>\r\n<span>{{part.def.wrapOpen}}</span><span class=\"query-part-parameters\"></span><span>{{part.def.wrapClose}}</span>\r\n<ul class=\"dropdown-menu\">\r\n  <li ng-repeat=\"action in partActions\">\r\n    <a ng-click=\"triggerPartAction(action)\">{{action.text}}</a>\r\n  </li>\r\n</ul>\r\n`;\r\n\r\n/** @ngInject */\r\nexport function sqlPartEditorDirective($compile, templateSrv) {\r\n  const paramTemplate = '<input type=\"text\" class=\"hide input-mini\"></input>';\r\n\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    scope: {\r\n      part: '=',\r\n      handleEvent: '&',\r\n      debounce: '@',\r\n    },\r\n    link: function postLink($scope, elem) {\r\n      const part = $scope.part;\r\n      const partDef = part.def;\r\n      const $paramsContainer = elem.find('.query-part-parameters');\r\n      const debounceLookup = $scope.debounce;\r\n      let cancelBlur = null;\r\n\r\n      $scope.partActions = [];\r\n\r\n      function clickFuncParam(this: any, paramIndex) {\r\n        /*jshint validthis:true */\r\n        const $link = $(this);\r\n        const $input = $link.next();\r\n\r\n        $input.val(part.params[paramIndex]);\r\n        $input.css('width', $link.width() + 16 + 'px');\r\n\r\n        $link.hide();\r\n        $input.show();\r\n        $input.focus();\r\n        $input.select();\r\n\r\n        const typeahead = $input.data('typeahead');\r\n        if (typeahead) {\r\n          $input.val('');\r\n          typeahead.lookup();\r\n        }\r\n      }\r\n\r\n      function inputBlur($input, paramIndex) {\r\n        cancelBlur = setTimeout(() => {\r\n          switchToLink($input, paramIndex);\r\n        }, 200);\r\n      }\r\n\r\n      function switchToLink($input, paramIndex) {\r\n        /*jshint validthis:true */\r\n        const $link = $input.prev();\r\n        const newValue = $input.val();\r\n\r\n        if (newValue !== '' || part.def.params[paramIndex].optional) {\r\n          $link.html(templateSrv.highlightVariablesAsHtml(newValue));\r\n\r\n          part.updateParam($input.val(), paramIndex);\r\n          $scope.$apply(() => {\r\n            $scope.handleEvent({ $event: { name: 'part-param-changed' } });\r\n          });\r\n        }\r\n\r\n        $input.hide();\r\n        $link.show();\r\n      }\r\n\r\n      function inputKeyPress(this: any, paramIndex, e) {\r\n        /*jshint validthis:true */\r\n        if (e.which === 13) {\r\n          switchToLink($(this), paramIndex);\r\n        }\r\n      }\r\n\r\n      function inputKeyDown(this: any) {\r\n        /*jshint validthis:true */\r\n        this.style.width = (3 + this.value.length) * 8 + 'px';\r\n      }\r\n\r\n      function addTypeahead($input, param, paramIndex) {\r\n        if (!param.options && !param.dynamicLookup) {\r\n          return;\r\n        }\r\n\r\n        const typeaheadSource = (query, callback) => {\r\n          if (param.options) {\r\n            let options = param.options;\r\n            if (param.type === 'int') {\r\n              options = _.map(options, val => {\r\n                return val.toString();\r\n              });\r\n            }\r\n            return options;\r\n          }\r\n\r\n          $scope.$apply(() => {\r\n            $scope.handleEvent({ $event: { name: 'get-param-options', param: param } }).then(result => {\r\n              const dynamicOptions = _.map(result, op => {\r\n                return _.escape(op.value);\r\n              });\r\n\r\n              // add current value to dropdown if it's not in dynamicOptions\r\n              if (_.indexOf(dynamicOptions, part.params[paramIndex]) === -1) {\r\n                dynamicOptions.unshift(_.escape(part.params[paramIndex]));\r\n              }\r\n\r\n              callback(dynamicOptions);\r\n            });\r\n          });\r\n        };\r\n\r\n        $input.attr('data-provide', 'typeahead');\r\n\r\n        $input.typeahead({\r\n          source: typeaheadSource,\r\n          minLength: 0,\r\n          items: 1000,\r\n          updater: value => {\r\n            value = _.unescape(value);\r\n            if (value === part.params[paramIndex]) {\r\n              clearTimeout(cancelBlur);\r\n              $input.focus();\r\n              return value;\r\n            }\r\n            return value;\r\n          },\r\n        });\r\n\r\n        const typeahead = $input.data('typeahead');\r\n        typeahead.lookup = function() {\r\n          this.query = this.$element.val() || '';\r\n          const items = this.source(this.query, $.proxy(this.process, this));\r\n          return items ? this.process(items) : items;\r\n        };\r\n\r\n        if (debounceLookup) {\r\n          typeahead.lookup = _.debounce(typeahead.lookup, 500, { leading: true });\r\n        }\r\n      }\r\n\r\n      $scope.showActionsMenu = () => {\r\n        $scope.handleEvent({ $event: { name: 'get-part-actions' } }).then(res => {\r\n          $scope.partActions = res;\r\n        });\r\n      };\r\n\r\n      $scope.triggerPartAction = action => {\r\n        $scope.handleEvent({ $event: { name: 'action', action: action } });\r\n      };\r\n\r\n      function addElementsAndCompile() {\r\n        _.each(partDef.params, (param, index) => {\r\n          if (param.optional && part.params.length <= index) {\r\n            return;\r\n          }\r\n\r\n          if (index > 0) {\r\n            $('<span>' + partDef.separator + '</span>').appendTo($paramsContainer);\r\n          }\r\n\r\n          const paramValue = templateSrv.highlightVariablesAsHtml(part.params[index]);\r\n          const $paramLink = $('<a class=\"graphite-func-param-link pointer\">' + paramValue + '</a>');\r\n          const $input = $(paramTemplate);\r\n\r\n          $paramLink.appendTo($paramsContainer);\r\n          $input.appendTo($paramsContainer);\r\n\r\n          $input.blur(_.partial(inputBlur, $input, index));\r\n          $input.keyup(inputKeyDown);\r\n          $input.keypress(_.partial(inputKeyPress, index));\r\n          $paramLink.click(_.partial(clickFuncParam, index));\r\n\r\n          addTypeahead($input, param, index);\r\n        });\r\n      }\r\n\r\n      function relink() {\r\n        $paramsContainer.empty();\r\n        addElementsAndCompile();\r\n      }\r\n\r\n      relink();\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('sqlPartEditor', sqlPartEditorDirective);\r\n","import _ from 'lodash';\r\nimport coreModule from '../../core_module';\r\n\r\nfunction typeaheadMatcher(this: any, item) {\r\n  let str = this.query;\r\n  if (str === '') {\r\n    return true;\r\n  }\r\n  if (str[0] === '/') {\r\n    str = str.substring(1);\r\n  }\r\n  if (str[str.length - 1] === '/') {\r\n    str = str.substring(0, str.length - 1);\r\n  }\r\n  return item.toLowerCase().match(str.toLowerCase());\r\n}\r\n\r\nexport class FormDropdownCtrl {\r\n  inputElement: any;\r\n  linkElement: any;\r\n  model: any;\r\n  display: any;\r\n  text: any;\r\n  options: any;\r\n  cssClass: any;\r\n  cssClasses: any;\r\n  allowCustom: any;\r\n  labelMode: boolean;\r\n  linkMode: boolean;\r\n  cancelBlur: any;\r\n  onChange: any;\r\n  getOptions: any;\r\n  optionCache: any;\r\n  lookupText: boolean;\r\n  placeholder: any;\r\n  startOpen: any;\r\n  debounce: number;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope, $element, private $sce, private templateSrv, private $q) {\r\n    this.inputElement = $element.find('input').first();\r\n    this.linkElement = $element.find('a').first();\r\n    this.linkMode = true;\r\n    this.cancelBlur = null;\r\n\r\n    // listen to model changes\r\n    $scope.$watch('ctrl.model', this.modelChanged.bind(this));\r\n\r\n    if (this.labelMode) {\r\n      this.cssClasses = 'gf-form-label ' + this.cssClass;\r\n    } else {\r\n      this.cssClasses = 'gf-form-input gf-form-input--dropdown ' + this.cssClass;\r\n    }\r\n\r\n    if (this.placeholder) {\r\n      this.inputElement.attr('placeholder', this.placeholder);\r\n    }\r\n\r\n    this.inputElement.attr('data-provide', 'typeahead');\r\n    this.inputElement.typeahead({\r\n      source: this.typeaheadSource.bind(this),\r\n      minLength: 0,\r\n      items: 10000,\r\n      updater: this.typeaheadUpdater.bind(this),\r\n      matcher: typeaheadMatcher,\r\n    });\r\n\r\n    // modify typeahead lookup\r\n    // this = typeahead\r\n    const typeahead = this.inputElement.data('typeahead');\r\n    typeahead.lookup = function() {\r\n      this.query = this.$element.val() || '';\r\n      this.source(this.query, this.process.bind(this));\r\n    };\r\n\r\n    if (this.debounce) {\r\n      typeahead.lookup = _.debounce(typeahead.lookup, 500, { leading: true });\r\n    }\r\n\r\n    this.linkElement.keydown(evt => {\r\n      // trigger typeahead on down arrow or enter key\r\n      if (evt.keyCode === 40 || evt.keyCode === 13) {\r\n        this.linkElement.click();\r\n      }\r\n    });\r\n\r\n    this.inputElement.keydown(evt => {\r\n      if (evt.keyCode === 13) {\r\n        setTimeout(() => {\r\n          this.inputElement.blur();\r\n        }, 100);\r\n      }\r\n    });\r\n\r\n    this.inputElement.blur(this.inputBlur.bind(this));\r\n\r\n    if (this.startOpen) {\r\n      setTimeout(this.open.bind(this), 0);\r\n    }\r\n  }\r\n\r\n  getOptionsInternal(query) {\r\n    const result = this.getOptions({ $query: query });\r\n    if (this.isPromiseLike(result)) {\r\n      return result;\r\n    }\r\n    return this.$q.when(result);\r\n  }\r\n\r\n  isPromiseLike(obj) {\r\n    return obj && typeof obj.then === 'function';\r\n  }\r\n\r\n  modelChanged() {\r\n    if (_.isObject(this.model)) {\r\n      this.updateDisplay(this.model.text);\r\n    } else {\r\n      // if we have text use it\r\n      if (this.lookupText) {\r\n        this.getOptionsInternal('').then(options => {\r\n          const item = _.find(options, { value: this.model });\r\n          this.updateDisplay(item ? item.text : this.model);\r\n        });\r\n      } else {\r\n        this.updateDisplay(this.model);\r\n      }\r\n    }\r\n  }\r\n\r\n  typeaheadSource(query, callback) {\r\n    this.getOptionsInternal(query).then(options => {\r\n      this.optionCache = options;\r\n\r\n      // extract texts\r\n      const optionTexts = _.map(options, op => {\r\n        return _.escape(op.text);\r\n      });\r\n\r\n      // add custom values\r\n      if (this.allowCustom && this.text !== '') {\r\n        if (_.indexOf(optionTexts, this.text) === -1) {\r\n          optionTexts.unshift(this.text);\r\n        }\r\n      }\r\n\r\n      callback(optionTexts);\r\n    });\r\n  }\r\n\r\n  typeaheadUpdater(text) {\r\n    if (text === this.text) {\r\n      clearTimeout(this.cancelBlur);\r\n      this.inputElement.focus();\r\n      return text;\r\n    }\r\n\r\n    this.inputElement.val(text);\r\n    this.switchToLink(true);\r\n    return text;\r\n  }\r\n\r\n  switchToLink(fromClick) {\r\n    if (this.linkMode && !fromClick) {\r\n      return;\r\n    }\r\n\r\n    clearTimeout(this.cancelBlur);\r\n    this.cancelBlur = null;\r\n    this.linkMode = true;\r\n    this.inputElement.hide();\r\n    this.linkElement.show();\r\n    this.updateValue(this.inputElement.val());\r\n  }\r\n\r\n  inputBlur() {\r\n    // happens long before the click event on the typeahead options\r\n    // need to have long delay because the blur\r\n    this.cancelBlur = setTimeout(this.switchToLink.bind(this), 200);\r\n  }\r\n\r\n  updateValue(text) {\r\n    text = _.unescape(text);\r\n\r\n    if (text === '' || this.text === text) {\r\n      return;\r\n    }\r\n\r\n    this.$scope.$apply(() => {\r\n      const option = _.find(this.optionCache, { text: text });\r\n\r\n      if (option) {\r\n        if (_.isObject(this.model)) {\r\n          this.model = option;\r\n        } else {\r\n          this.model = option.value;\r\n        }\r\n        this.text = option.text;\r\n      } else if (this.allowCustom) {\r\n        if (_.isObject(this.model)) {\r\n          this.model.text = this.model.value = text;\r\n        } else {\r\n          this.model = text;\r\n        }\r\n        this.text = text;\r\n      }\r\n\r\n      // needs to call this after digest so\r\n      // property is synced with outerscope\r\n      this.$scope.$$postDigest(() => {\r\n        this.$scope.$apply(() => {\r\n          this.onChange({ $option: option });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  updateDisplay(text) {\r\n    this.text = text;\r\n    this.display = this.$sce.trustAsHtml(this.templateSrv.highlightVariablesAsHtml(text));\r\n  }\r\n\r\n  open() {\r\n    this.inputElement.css('width', Math.max(this.linkElement.width(), 80) + 16 + 'px');\r\n\r\n    this.inputElement.show();\r\n    this.inputElement.focus();\r\n\r\n    this.linkElement.hide();\r\n    this.linkMode = false;\r\n\r\n    const typeahead = this.inputElement.data('typeahead');\r\n    if (typeahead) {\r\n      this.inputElement.val('');\r\n      typeahead.lookup();\r\n    }\r\n  }\r\n}\r\n\r\nconst template = `\r\n<input type=\"text\"\r\n  data-provide=\"typeahead\"\r\n  class=\"gf-form-input\"\r\n  spellcheck=\"false\"\r\n  style=\"display:none\">\r\n</input>\r\n<a ng-class=\"ctrl.cssClasses\"\r\n   tabindex=\"1\"\r\n   ng-click=\"ctrl.open()\"\r\n   give-focus=\"ctrl.focus\"\r\n   ng-bind-html=\"ctrl.display || '&nbsp;'\">\r\n</a>\r\n`;\r\n\r\nexport function formDropdownDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    controller: FormDropdownCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      model: '=',\r\n      getOptions: '&',\r\n      onChange: '&',\r\n      cssClass: '@',\r\n      allowCustom: '@',\r\n      labelMode: '@',\r\n      lookupText: '@',\r\n      placeholder: '@',\r\n      startOpen: '@',\r\n      debounce: '@',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('gfFormDropdown', formDropdownDirective);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport coreModule from '../core_module';\r\n\r\nexport class InspectCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $sanitize) {\r\n    const model = $scope.inspector;\r\n\r\n    $scope.init = function() {\r\n      $scope.editor = { index: 0 };\r\n\r\n      if (!model.error) {\r\n        return;\r\n      }\r\n\r\n      if (_.isString(model.error.data)) {\r\n        $scope.response = $('<div>' + model.error.data + '</div>').text();\r\n      } else if (model.error.data) {\r\n        if (model.error.data.response) {\r\n          $scope.response = $sanitize(model.error.data.response);\r\n        } else {\r\n          $scope.response = angular.toJson(model.error.data, true);\r\n        }\r\n      } else if (model.error.message) {\r\n        $scope.message = model.error.message;\r\n      }\r\n\r\n      if (model.error.config && model.error.config.params) {\r\n        $scope.request_parameters = _.map(model.error.config.params, (value, key) => {\r\n          return { key: key, value: value };\r\n        });\r\n      }\r\n\r\n      if (model.error.stack) {\r\n        $scope.editor.index = 3;\r\n        $scope.stack_trace = model.error.stack;\r\n        $scope.message = model.error.message;\r\n      }\r\n\r\n      if (model.error.config && model.error.config.data) {\r\n        $scope.editor.index = 2;\r\n\r\n        if (_.isString(model.error.config.data)) {\r\n          $scope.request_parameters = this.getParametersFromQueryString(model.error.config.data);\r\n        } else {\r\n          $scope.request_parameters = _.map(model.error.config.data, (value, key) => {\r\n            return { key: key, value: angular.toJson(value, true) };\r\n          });\r\n        }\r\n      }\r\n    };\r\n  }\r\n  getParametersFromQueryString(queryString) {\r\n    const result = [];\r\n    const parameters = queryString.split('&');\r\n    for (let i = 0; i < parameters.length; i++) {\r\n      const keyValue = parameters[i].split('=');\r\n      if (keyValue[1].length > 0) {\r\n        result.push({\r\n          key: keyValue[0],\r\n          value: (window as any).unescape(keyValue[1]),\r\n        });\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\ncoreModule.controller('InspectCtrl', InspectCtrl);\r\n","import angular from 'angular';\r\nimport coreModule from '../core_module';\r\n\r\nexport class JsonEditorCtrl {\r\n  /** @ngInject */\r\n  constructor($scope) {\r\n    $scope.json = angular.toJson($scope.object, true);\r\n    $scope.canUpdate = $scope.updateHandler !== void 0 && $scope.contextSrv.isEditor;\r\n    $scope.canCopy = $scope.enableCopy;\r\n\r\n    $scope.update = () => {\r\n      const newObject = angular.fromJson($scope.json);\r\n      $scope.updateHandler(newObject, $scope.object);\r\n    };\r\n\r\n    $scope.getContentForClipboard = () => $scope.json;\r\n  }\r\n}\r\n\r\ncoreModule.controller('JsonEditorCtrl', JsonEditorCtrl);\r\n","import _ from 'lodash';\r\nimport coreModule from '../core_module';\r\nimport config from 'app/core/config';\r\n\r\nexport class LoginCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, backendSrv, contextSrv, $location) {\r\n    $scope.formModel = {\r\n      user: '',\r\n      email: '',\r\n      password: '',\r\n    };\r\n\r\n    $scope.command = {};\r\n    $scope.result = '';\r\n    $scope.loggingIn = false;\r\n\r\n    contextSrv.sidemenu = false;\r\n\r\n    $scope.oauth = config.oauth;\r\n    $scope.oauthEnabled = _.keys(config.oauth).length > 0;\r\n    $scope.ldapEnabled = config.ldapEnabled;\r\n    $scope.authProxyEnabled = config.authProxyEnabled;\r\n\r\n    $scope.disableLoginForm = config.disableLoginForm;\r\n    $scope.disableUserSignUp = config.disableUserSignUp;\r\n    $scope.loginHint = config.loginHint;\r\n\r\n    $scope.loginMode = true;\r\n    $scope.submitBtnText = 'Log in';\r\n\r\n    $scope.init = () => {\r\n      $scope.$watch('loginMode', $scope.loginModeChanged);\r\n\r\n      if (config.loginError) {\r\n        $scope.appEvent('alert-warning', ['Login Failed', config.loginError]);\r\n      }\r\n    };\r\n\r\n    $scope.submit = () => {\r\n      if ($scope.loginMode) {\r\n        $scope.login();\r\n      } else {\r\n        $scope.signUp();\r\n      }\r\n    };\r\n\r\n    $scope.changeView = () => {\r\n      const loginView = document.querySelector('#login-view');\r\n      const changePasswordView = document.querySelector('#change-password-view');\r\n\r\n      loginView.className += ' add';\r\n      setTimeout(() => {\r\n        loginView.className += ' hidden';\r\n      }, 250);\r\n      setTimeout(() => {\r\n        changePasswordView.classList.remove('hidden');\r\n      }, 251);\r\n      setTimeout(() => {\r\n        changePasswordView.classList.remove('remove');\r\n      }, 301);\r\n\r\n      setTimeout(() => {\r\n        document.getElementById('newPassword').focus();\r\n      }, 400);\r\n    };\r\n\r\n    $scope.changePassword = () => {\r\n      $scope.command.oldPassword = 'admin';\r\n\r\n      if ($scope.command.newPassword !== $scope.command.confirmNew) {\r\n        $scope.appEvent('alert-warning', ['New passwords do not match', '']);\r\n        return;\r\n      }\r\n\r\n      backendSrv.put('/api/user/password', $scope.command).then(() => {\r\n        $scope.toGrafana();\r\n      });\r\n    };\r\n\r\n    $scope.skip = () => {\r\n      $scope.toGrafana();\r\n    };\r\n\r\n    $scope.loginModeChanged = newValue => {\r\n      $scope.submitBtnText = newValue ? 'Log in' : 'Sign up';\r\n    };\r\n\r\n    $scope.signUp = () => {\r\n      if (!$scope.loginForm.$valid) {\r\n        return;\r\n      }\r\n\r\n      backendSrv.post('/api/user/signup', $scope.formModel).then(result => {\r\n        if (result.status === 'SignUpCreated') {\r\n          $location.path('/signup').search({ email: $scope.formModel.email });\r\n        } else {\r\n          window.location.href = config.appSubUrl + '/';\r\n        }\r\n      });\r\n    };\r\n\r\n    $scope.login = () => {\r\n      delete $scope.loginError;\r\n\r\n      if (!$scope.loginForm.$valid) {\r\n        return;\r\n      }\r\n      $scope.loggingIn = true;\r\n\r\n      backendSrv\r\n        .post('/login', $scope.formModel)\r\n        .then(result => {\r\n          $scope.result = result;\r\n\r\n          if ($scope.formModel.password !== 'admin' || $scope.ldapEnabled || $scope.authProxyEnabled) {\r\n            $scope.toGrafana();\r\n            return;\r\n          } else {\r\n            $scope.changeView();\r\n          }\r\n        })\r\n        .catch(() => {\r\n          $scope.loggingIn = false;\r\n        });\r\n    };\r\n\r\n    $scope.toGrafana = () => {\r\n      const params = $location.search();\r\n\r\n      if (params.redirect && params.redirect[0] === '/') {\r\n        window.location.href = config.appSubUrl + params.redirect;\r\n      } else if ($scope.result.redirectUrl) {\r\n        window.location.href = $scope.result.redirectUrl;\r\n      } else {\r\n        window.location.href = config.appSubUrl + '/';\r\n      }\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\ncoreModule.controller('LoginCtrl', LoginCtrl);\r\n","import coreModule from '../core_module';\r\nimport config from 'app/core/config';\r\n\r\nexport class InvitedCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $routeParams, contextSrv, backendSrv) {\r\n    contextSrv.sidemenu = false;\r\n    $scope.formModel = {};\r\n\r\n    $scope.navModel = {\r\n      main: {\r\n        icon: 'gicon gicon-branding',\r\n        text: 'Invite',\r\n        subTitle: 'Register your Grafana account',\r\n        breadcrumbs: [{ title: 'Login', url: 'login' }],\r\n      },\r\n    };\r\n\r\n    $scope.init = () => {\r\n      backendSrv.get('/api/user/invite/' + $routeParams.code).then(invite => {\r\n        $scope.formModel.name = invite.name;\r\n        $scope.formModel.email = invite.email;\r\n        $scope.formModel.username = invite.email;\r\n        $scope.formModel.inviteCode = $routeParams.code;\r\n\r\n        $scope.greeting = invite.name || invite.email || invite.username;\r\n        $scope.invitedBy = invite.invitedBy;\r\n      });\r\n    };\r\n\r\n    $scope.submit = () => {\r\n      if (!$scope.inviteForm.$valid) {\r\n        return;\r\n      }\r\n\r\n      backendSrv.post('/api/user/invite/complete', $scope.formModel).then(() => {\r\n        window.location.href = config.appSubUrl + '/';\r\n      });\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\ncoreModule.controller('InvitedCtrl', InvitedCtrl);\r\n","import config from 'app/core/config';\r\nimport coreModule from '../core_module';\r\n\r\nexport class SignUpCtrl {\r\n  /** @ngInject */\r\n  constructor(private $scope: any, private backendSrv: any, $location: any, contextSrv: any) {\r\n    contextSrv.sidemenu = false;\r\n    $scope.ctrl = this;\r\n\r\n    $scope.formModel = {};\r\n\r\n    const params = $location.search();\r\n\r\n    // validate email is semi ok\r\n    if (params.email && !params.email.match(/^\\S+@\\S+$/)) {\r\n      console.log('invalid email');\r\n      return;\r\n    }\r\n\r\n    $scope.formModel.orgName = params.email;\r\n    $scope.formModel.email = params.email;\r\n    $scope.formModel.username = params.email;\r\n    $scope.formModel.code = params.code;\r\n\r\n    $scope.verifyEmailEnabled = false;\r\n    $scope.autoAssignOrg = false;\r\n\r\n    $scope.navModel = {\r\n      main: {\r\n        icon: 'gicon gicon-branding',\r\n        text: 'Sign Up',\r\n        subTitle: 'Register your Grafana account',\r\n        breadcrumbs: [{ title: 'Login', url: 'login' }],\r\n      },\r\n    };\r\n\r\n    backendSrv.get('/api/user/signup/options').then(options => {\r\n      $scope.verifyEmailEnabled = options.verifyEmailEnabled;\r\n      $scope.autoAssignOrg = options.autoAssignOrg;\r\n    });\r\n  }\r\n\r\n  submit() {\r\n    if (!this.$scope.signUpForm.$valid) {\r\n      return;\r\n    }\r\n\r\n    this.backendSrv.post('/api/user/signup/step2', this.$scope.formModel).then(rsp => {\r\n      if (rsp.code === 'redirect-to-select-org') {\r\n        window.location.href = config.appSubUrl + '/profile/select-org?signup=1';\r\n      } else {\r\n        window.location.href = config.appSubUrl + '/';\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.controller('SignUpCtrl', SignUpCtrl);\r\n","import coreModule from '../core_module';\r\n\r\nexport class ResetPasswordCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, contextSrv, backendSrv, $location) {\r\n    contextSrv.sidemenu = false;\r\n    $scope.formModel = {};\r\n    $scope.mode = 'send';\r\n\r\n    const params = $location.search();\r\n    if (params.code) {\r\n      $scope.mode = 'reset';\r\n      $scope.formModel.code = params.code;\r\n    }\r\n\r\n    $scope.navModel = {\r\n      main: {\r\n        icon: 'gicon gicon-branding',\r\n        text: 'Reset Password',\r\n        subTitle: 'Reset your Grafana password',\r\n        breadcrumbs: [{ title: 'Login', url: 'login' }],\r\n      },\r\n    };\r\n\r\n    $scope.sendResetEmail = () => {\r\n      if (!$scope.sendResetForm.$valid) {\r\n        return;\r\n      }\r\n      backendSrv.post('/api/user/password/send-reset-email', $scope.formModel).then(() => {\r\n        $scope.mode = 'email-sent';\r\n      });\r\n    };\r\n\r\n    $scope.submitReset = () => {\r\n      if (!$scope.resetForm.$valid) {\r\n        return;\r\n      }\r\n\r\n      if ($scope.formModel.newPassword !== $scope.formModel.confirmPassword) {\r\n        $scope.appEvent('alert-warning', ['New passwords do not match', '']);\r\n        return;\r\n      }\r\n\r\n      backendSrv.post('/api/user/password/reset', $scope.formModel).then(() => {\r\n        $location.path('login');\r\n      });\r\n    };\r\n  }\r\n}\r\n\r\ncoreModule.controller('ResetPasswordCtrl', ResetPasswordCtrl);\r\n","import config from 'app/core/config';\r\nimport coreModule from '../core_module';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class ErrorCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, contextSrv, navModelSrv) {\r\n    $scope.navModel = navModelSrv.getNotFoundNav();\r\n    $scope.appSubUrl = config.appSubUrl;\r\n\r\n    if (!contextSrv.isSignedIn) {\r\n      appEvents.emit('toggle-sidemenu-hidden');\r\n    }\r\n\r\n    $scope.$on('destroy', () => {\r\n      if (!contextSrv.isSignedIn) {\r\n        appEvents.emit('toggle-sidemenu-hidden');\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.controller('ErrorCtrl', ErrorCtrl);\r\n","import './inspect_ctrl';\r\nimport './json_editor_ctrl';\r\nimport './login_ctrl';\r\nimport './invited_ctrl';\r\nimport './signup_ctrl';\r\nimport './reset_password_ctrl';\r\nimport './error_ctrl';\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class AlertSrv {\r\n  list: any[];\r\n\r\n  /** @ngInject */\r\n  constructor(private $timeout, private $rootScope) {\r\n    this.list = [];\r\n  }\r\n\r\n  init() {\r\n    this.$rootScope.onAppEvent(\r\n      'alert-error',\r\n      (e, alert) => {\r\n        this.set(alert[0], alert[1], 'error', 12000);\r\n      },\r\n      this.$rootScope\r\n    );\r\n\r\n    this.$rootScope.onAppEvent(\r\n      'alert-warning',\r\n      (e, alert) => {\r\n        this.set(alert[0], alert[1], 'warning', 5000);\r\n      },\r\n      this.$rootScope\r\n    );\r\n\r\n    this.$rootScope.onAppEvent(\r\n      'alert-success',\r\n      (e, alert) => {\r\n        this.set(alert[0], alert[1], 'success', 3000);\r\n      },\r\n      this.$rootScope\r\n    );\r\n\r\n    appEvents.on('alert-warning', options => this.set(options[0], options[1], 'warning', 5000));\r\n    appEvents.on('alert-success', options => this.set(options[0], options[1], 'success', 3000));\r\n    appEvents.on('alert-error', options => this.set(options[0], options[1], 'error', 7000));\r\n  }\r\n\r\n  getIconForSeverity(severity) {\r\n    switch (severity) {\r\n      case 'success':\r\n        return 'fa fa-check';\r\n      case 'error':\r\n        return 'fa fa-exclamation-triangle';\r\n      default:\r\n        return 'fa fa-exclamation';\r\n    }\r\n  }\r\n\r\n  set(title, text, severity, timeout) {\r\n    if (_.isObject(text)) {\r\n      console.log('alert error', text);\r\n      if (text.statusText) {\r\n        text = `HTTP Error (${text.status}) ${text.statusText}`;\r\n      }\r\n    }\r\n\r\n    const newAlert = {\r\n      title: title || '',\r\n      text: text || '',\r\n      severity: severity || 'info',\r\n      icon: this.getIconForSeverity(severity),\r\n    };\r\n\r\n    const newAlertJson = angular.toJson(newAlert);\r\n\r\n    // remove same alert if it already exists\r\n    _.remove(this.list, value => {\r\n      return angular.toJson(value) === newAlertJson;\r\n    });\r\n\r\n    this.list.push(newAlert);\r\n    if (timeout > 0) {\r\n      this.$timeout(() => {\r\n        this.list = _.without(this.list, newAlert);\r\n      }, timeout);\r\n    }\r\n\r\n    if (!this.$rootScope.$$phase) {\r\n      this.$rootScope.$digest();\r\n    }\r\n\r\n    return newAlert;\r\n  }\r\n\r\n  clear(alert) {\r\n    this.list = _.without(this.list, alert);\r\n  }\r\n\r\n  clearAll() {\r\n    this.list = [];\r\n  }\r\n}\r\n\r\ncoreModule.service('alertSrv', AlertSrv);\r\n","import coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class UtilSrv {\r\n  modalScope: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $rootScope, private $modal) {}\r\n\r\n  init() {\r\n    appEvents.on('show-modal', this.showModal.bind(this), this.$rootScope);\r\n    appEvents.on('hide-modal', this.hideModal.bind(this), this.$rootScope);\r\n    appEvents.on('confirm-modal', this.showConfirmModal.bind(this), this.$rootScope);\r\n  }\r\n\r\n  hideModal() {\r\n    if (this.modalScope && this.modalScope.dismiss) {\r\n      this.modalScope.dismiss();\r\n    }\r\n  }\r\n\r\n  showModal(options) {\r\n    if (this.modalScope && this.modalScope.dismiss) {\r\n      this.modalScope.dismiss();\r\n    }\r\n\r\n    this.modalScope = options.scope;\r\n\r\n    if (options.model) {\r\n      this.modalScope = this.$rootScope.$new();\r\n      this.modalScope.model = options.model;\r\n    } else if (!this.modalScope) {\r\n      this.modalScope = this.$rootScope.$new();\r\n    }\r\n\r\n    const modal = this.$modal({\r\n      modalClass: options.modalClass,\r\n      template: options.src,\r\n      templateHtml: options.templateHtml,\r\n      persist: false,\r\n      show: false,\r\n      scope: this.modalScope,\r\n      keyboard: false,\r\n      backdrop: options.backdrop,\r\n    });\r\n\r\n    Promise.resolve(modal).then(modalEl => {\r\n      modalEl.modal('show');\r\n    });\r\n  }\r\n\r\n  showConfirmModal(payload) {\r\n    const scope = this.$rootScope.$new();\r\n\r\n    scope.onConfirm = () => {\r\n      payload.onConfirm();\r\n      scope.dismiss();\r\n    };\r\n\r\n    scope.updateConfirmText = value => {\r\n      scope.confirmTextValid = payload.confirmText.toLowerCase() === value.toLowerCase();\r\n    };\r\n\r\n    scope.title = payload.title;\r\n    scope.text = payload.text;\r\n    scope.text2 = payload.text2;\r\n    scope.confirmText = payload.confirmText;\r\n\r\n    scope.onConfirm = payload.onConfirm;\r\n    scope.onAltAction = payload.onAltAction;\r\n    scope.altActionText = payload.altActionText;\r\n    scope.icon = payload.icon || 'fa-check';\r\n    scope.yesText = payload.yesText || 'Yes';\r\n    scope.noText = payload.noText || 'Cancel';\r\n    scope.confirmTextValid = scope.confirmText ? false : true;\r\n\r\n    appEvents.emit('show-modal', {\r\n      src: 'public/app/partials/confirm_modal.html',\r\n      scope: scope,\r\n      modalClass: 'confirm-modal',\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.service('utilSrv', UtilSrv);\r\n","import $ from 'jquery';\r\nimport coreModule from 'app/core/core_module';\r\nimport config from 'app/core/config';\r\n\r\nexport class Analytics {\r\n  /** @ngInject */\r\n  constructor(private $rootScope, private $location) {}\r\n\r\n  gaInit() {\r\n    $.ajax({\r\n      url: 'https://www.google-analytics.com/analytics.js',\r\n      dataType: 'script',\r\n      cache: true,\r\n    });\r\n    const ga = ((window as any).ga =\r\n      (window as any).ga ||\r\n      //tslint:disable-next-line:only-arrow-functions\r\n      function() {\r\n        (ga.q = ga.q || []).push(arguments);\r\n      });\r\n    ga.l = +new Date();\r\n    ga('create', (config as any).googleAnalyticsId, 'auto');\r\n    ga('set', 'anonymizeIp', true);\r\n    return ga;\r\n  }\r\n\r\n  init() {\r\n    this.$rootScope.$on('$viewContentLoaded', () => {\r\n      const track = { page: this.$location.url() };\r\n      const ga = (window as any).ga || this.gaInit();\r\n      ga('set', track);\r\n      ga('send', 'pageview');\r\n    });\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nfunction startAnalytics(googleAnalyticsSrv) {\r\n  if ((config as any).googleAnalyticsId) {\r\n    googleAnalyticsSrv.init();\r\n  }\r\n}\r\n\r\ncoreModule.service('googleAnalyticsSrv', Analytics).run(startAnalytics);\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\n\r\n// This service really just tracks a list of $timeout promises to give us a\r\n// method for cancelling them all when we need to\r\nexport class Timer {\r\n  timers = [];\r\n\r\n  /** @ngInject */\r\n  constructor(private $timeout) {}\r\n\r\n  register(promise) {\r\n    this.timers.push(promise);\r\n    return promise;\r\n  }\r\n\r\n  cancel(promise) {\r\n    this.timers = _.without(this.timers, promise);\r\n    this.$timeout.cancel(promise);\r\n  }\r\n\r\n  cancelAll() {\r\n    _.each(this.timers, t => {\r\n      this.$timeout.cancel(t);\r\n    });\r\n    this.timers = [];\r\n  }\r\n}\r\n\r\ncoreModule.service('timer', Timer);\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport Drop from 'tether-drop';\r\n\r\n/** @ngInject */\r\nfunction popoverSrv(this: any, $compile, $rootScope, $timeout) {\r\n  let openDrop = null;\r\n\r\n  this.close = () => {\r\n    if (openDrop) {\r\n      openDrop.close();\r\n    }\r\n  };\r\n\r\n  this.show = options => {\r\n    if (openDrop) {\r\n      openDrop.close();\r\n      openDrop = null;\r\n    }\r\n\r\n    const scope = _.extend($rootScope.$new(true), options.model);\r\n    let drop;\r\n\r\n    const cleanUp = () => {\r\n      setTimeout(() => {\r\n        scope.$destroy();\r\n\r\n        if (drop.tether) {\r\n          drop.destroy();\r\n        }\r\n\r\n        if (options.onClose) {\r\n          options.onClose();\r\n        }\r\n      });\r\n\r\n      openDrop = null;\r\n    };\r\n\r\n    scope.dismiss = () => {\r\n      drop.close();\r\n    };\r\n\r\n    const contentElement = document.createElement('div');\r\n    contentElement.innerHTML = options.template;\r\n\r\n    $compile(contentElement)(scope);\r\n\r\n    $timeout(() => {\r\n      drop = new Drop({\r\n        target: options.element,\r\n        content: contentElement,\r\n        position: options.position,\r\n        classes: options.classNames || 'drop-popover',\r\n        openOn: options.openOn,\r\n        hoverCloseDelay: 200,\r\n        tetherOptions: {\r\n          constraints: [{ to: 'scrollParent', attachment: 'together' }],\r\n        },\r\n      });\r\n\r\n      drop.on('close', () => {\r\n        cleanUp();\r\n      });\r\n\r\n      openDrop = drop;\r\n      openDrop.open();\r\n    }, 100);\r\n\r\n    // return close function\r\n    return () => {\r\n      if (drop) {\r\n        drop.close();\r\n      }\r\n    };\r\n  };\r\n}\r\n\r\ncoreModule.service('popoverSrv', popoverSrv);\r\n","import _ from 'lodash';\r\nimport coreModule from '../core_module';\r\n\r\n/** @ngInject */\r\nexport function uiSegmentSrv(this: any, $sce, templateSrv) {\r\n  const self = this;\r\n\r\n  function MetricSegment(this: any, options) {\r\n    if (options === '*' || options.value === '*') {\r\n      this.value = '*';\r\n      this.html = $sce.trustAsHtml('<i class=\"fa fa-asterisk\"><i>');\r\n      this.type = options.type;\r\n      this.expandable = true;\r\n      return;\r\n    }\r\n\r\n    if (_.isString(options)) {\r\n      this.value = options;\r\n      this.html = $sce.trustAsHtml(templateSrv.highlightVariablesAsHtml(this.value));\r\n      return;\r\n    }\r\n\r\n    // temp hack to work around legacy inconsistency in segment model\r\n    this.text = options.value;\r\n\r\n    this.cssClass = options.cssClass;\r\n    this.custom = options.custom;\r\n    this.type = options.type;\r\n    this.fake = options.fake;\r\n    this.value = options.value;\r\n    this.selectMode = options.selectMode;\r\n    this.type = options.type;\r\n    this.expandable = options.expandable;\r\n    this.html = options.html || $sce.trustAsHtml(templateSrv.highlightVariablesAsHtml(this.value));\r\n  }\r\n\r\n  this.getSegmentForValue = function(value, fallbackText) {\r\n    if (value) {\r\n      return this.newSegment(value);\r\n    } else {\r\n      return this.newSegment({ value: fallbackText, fake: true });\r\n    }\r\n  };\r\n\r\n  this.newSelectMeasurement = () => {\r\n    return new MetricSegment({ value: 'select measurement', fake: true });\r\n  };\r\n\r\n  this.newFake = (text, type, cssClass) => {\r\n    return new MetricSegment({ value: text, fake: true, type: type, cssClass: cssClass });\r\n  };\r\n\r\n  this.newSegment = options => {\r\n    return new MetricSegment(options);\r\n  };\r\n\r\n  this.newKey = key => {\r\n    return new MetricSegment({ value: key, type: 'key', cssClass: 'query-segment-key' });\r\n  };\r\n\r\n  this.newKeyValue = value => {\r\n    return new MetricSegment({ value: value, type: 'value', cssClass: 'query-segment-value' });\r\n  };\r\n\r\n  this.newCondition = condition => {\r\n    return new MetricSegment({ value: condition, type: 'condition', cssClass: 'query-keyword' });\r\n  };\r\n\r\n  this.newOperator = op => {\r\n    return new MetricSegment({ value: op, type: 'operator', cssClass: 'query-segment-operator' });\r\n  };\r\n\r\n  this.newOperators = ops => {\r\n    return _.map(ops, op => {\r\n      return new MetricSegment({ value: op, type: 'operator', cssClass: 'query-segment-operator' });\r\n    });\r\n  };\r\n\r\n  this.transformToSegments = (addTemplateVars, variableTypeFilter) => {\r\n    return results => {\r\n      const segments = _.map(results, segment => {\r\n        return self.newSegment({ value: segment.text, expandable: segment.expandable });\r\n      });\r\n\r\n      if (addTemplateVars) {\r\n        _.each(templateSrv.variables, variable => {\r\n          if (variableTypeFilter === void 0 || variableTypeFilter === variable.type) {\r\n            segments.unshift(self.newSegment({ type: 'value', value: '$' + variable.name, expandable: true }));\r\n          }\r\n        });\r\n      }\r\n\r\n      return segments;\r\n    };\r\n  };\r\n\r\n  this.newSelectMetric = () => {\r\n    return new MetricSegment({ value: 'select metric', fake: true });\r\n  };\r\n\r\n  this.newPlusButton = () => {\r\n    return new MetricSegment({\r\n      fake: true,\r\n      html: '<i class=\"fa fa-plus \"></i>',\r\n      type: 'plus-button',\r\n      cssClass: 'query-part',\r\n    });\r\n  };\r\n}\r\n\r\ncoreModule.service('uiSegmentSrv', uiSegmentSrv);\r\n","import angular from 'angular';\r\nimport coreModule from '../core_module';\r\n\r\nclass DynamicDirectiveSrv {\r\n  /** @ngInject */\r\n  constructor(private $compile) {}\r\n\r\n  addDirective(element, name, scope) {\r\n    const child = angular.element(document.createElement(name));\r\n    this.$compile(child)(scope);\r\n\r\n    element.empty();\r\n    element.append(child);\r\n  }\r\n\r\n  link(scope, elem, attrs, options) {\r\n    const directiveInfo = options.directive(scope);\r\n    if (!directiveInfo || !directiveInfo.fn) {\r\n      elem.empty();\r\n      return;\r\n    }\r\n\r\n    if (!directiveInfo.fn.registered) {\r\n      console.log('register panel tab');\r\n      coreModule.directive(attrs.$normalize(directiveInfo.name), directiveInfo.fn);\r\n      directiveInfo.fn.registered = true;\r\n    }\r\n\r\n    this.addDirective(elem, directiveInfo.name, scope);\r\n  }\r\n\r\n  create(options) {\r\n    const directiveDef = {\r\n      restrict: 'E',\r\n      scope: options.scope,\r\n      link: (scope, elem, attrs) => {\r\n        if (options.watchPath) {\r\n          let childScope = null;\r\n          scope.$watch(options.watchPath, () => {\r\n            if (childScope) {\r\n              childScope.$destroy();\r\n            }\r\n            childScope = scope.$new();\r\n            this.link(childScope, elem, attrs, options);\r\n          });\r\n        } else {\r\n          this.link(scope, elem, attrs, options);\r\n        }\r\n      },\r\n    };\r\n\r\n    return directiveDef;\r\n  }\r\n}\r\n\r\ncoreModule.service('dynamicDirectiveSrv', DynamicDirectiveSrv);\r\n","import { Action, ActionTypes } from 'app/core/actions/navModel';\r\nimport { NavIndex, NavModelItem } from 'app/types';\r\nimport config from 'app/core/config';\r\n\r\nexport function buildInitialState(): NavIndex {\r\n  const navIndex: NavIndex = {};\r\n  const rootNodes = config.bootData.navTree as NavModelItem[];\r\n  buildNavIndex(navIndex, rootNodes);\r\n  return navIndex;\r\n}\r\n\r\nfunction buildNavIndex(navIndex: NavIndex, children: NavModelItem[], parentItem?: NavModelItem) {\r\n  for (const node of children) {\r\n    navIndex[node.id] = {\r\n      ...node,\r\n      parentItem: parentItem,\r\n    };\r\n\r\n    if (node.children) {\r\n      buildNavIndex(navIndex, node.children, node);\r\n    }\r\n  }\r\n}\r\n\r\nexport const initialState: NavIndex = buildInitialState();\r\n\r\nexport const navIndexReducer = (state = initialState, action: Action): NavIndex => {\r\n  switch (action.type) {\r\n    case ActionTypes.UpdateNavIndex:\r\n      const newPages = {};\r\n      const payload = action.payload;\r\n\r\n      for (const node of payload.children) {\r\n        newPages[node.id] = {\r\n          ...node,\r\n          parentItem: payload,\r\n        };\r\n      }\r\n\r\n      return { ...state, ...newPages };\r\n  }\r\n  return state;\r\n};\r\n","import { Action } from 'app/core/actions/location';\r\nimport { LocationState } from 'app/types';\r\nimport { renderUrl } from 'app/core/utils/url';\r\nimport _ from 'lodash';\r\n\r\nexport const initialState: LocationState = {\r\n  url: '',\r\n  path: '',\r\n  query: {},\r\n  routeParams: {},\r\n};\r\n\r\nexport const locationReducer = (state = initialState, action: Action): LocationState => {\r\n  switch (action.type) {\r\n    case 'UPDATE_LOCATION': {\r\n      const { path, routeParams } = action.payload;\r\n      let query = action.payload.query || state.query;\r\n\r\n      if (action.payload.partial) {\r\n        query = _.defaults(query, state.query);\r\n      }\r\n\r\n      return {\r\n        url: renderUrl(path || state.path, query),\r\n        path: path || state.path,\r\n        query: query,\r\n        routeParams: routeParams || state.routeParams,\r\n      };\r\n    }\r\n  }\r\n\r\n  return state;\r\n};\r\n","import { navIndexReducer as navIndex } from './navModel';\r\nimport { locationReducer as location } from './location';\r\n\r\nexport default {\r\n  navIndex,\r\n  location,\r\n};\r\n","import _ from 'lodash';\r\n\r\nexport class QueryPartDef {\r\n  type: string;\r\n  params: any[];\r\n  defaultParams: any[];\r\n  renderer: any;\r\n  category: any;\r\n  addStrategy: any;\r\n\r\n  constructor(options: any) {\r\n    this.type = options.type;\r\n    this.params = options.params;\r\n    this.defaultParams = options.defaultParams;\r\n    this.renderer = options.renderer;\r\n    this.category = options.category;\r\n    this.addStrategy = options.addStrategy;\r\n  }\r\n}\r\n\r\nexport class QueryPart {\r\n  part: any;\r\n  def: QueryPartDef;\r\n  params: any[];\r\n  text: string;\r\n\r\n  constructor(part: any, def: any) {\r\n    this.part = part;\r\n    this.def = def;\r\n    if (!this.def) {\r\n      throw { message: 'Could not find query part ' + part.type };\r\n    }\r\n\r\n    part.params = part.params || _.clone(this.def.defaultParams);\r\n    this.params = part.params;\r\n    this.updateText();\r\n  }\r\n\r\n  render(innerExpr: string) {\r\n    return this.def.renderer(this, innerExpr);\r\n  }\r\n\r\n  hasMultipleParamsInString(strValue, index) {\r\n    if (strValue.indexOf(',') === -1) {\r\n      return false;\r\n    }\r\n\r\n    return this.def.params[index + 1] && this.def.params[index + 1].optional;\r\n  }\r\n\r\n  updateParam(strValue, index) {\r\n    // handle optional parameters\r\n    // if string contains ',' and next param is optional, split and update both\r\n    if (this.hasMultipleParamsInString(strValue, index)) {\r\n      _.each(strValue.split(','), (partVal, idx) => {\r\n        this.updateParam(partVal.trim(), idx);\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (strValue === '' && this.def.params[index].optional) {\r\n      this.params.splice(index, 1);\r\n    } else {\r\n      this.params[index] = strValue;\r\n    }\r\n\r\n    this.part.params = this.params;\r\n    this.updateText();\r\n  }\r\n\r\n  updateText() {\r\n    if (this.params.length === 0) {\r\n      this.text = this.def.type + '()';\r\n      return;\r\n    }\r\n\r\n    let text = this.def.type + '(';\r\n    text += this.params.join(', ');\r\n    text += ')';\r\n    this.text = text;\r\n  }\r\n}\r\n\r\nexport function functionRenderer(part, innerExpr) {\r\n  const str = part.def.type + '(';\r\n  const parameters = _.map(part.params, (value, index) => {\r\n    const paramType = part.def.params[index];\r\n    if (paramType.type === 'time') {\r\n      if (value === 'auto') {\r\n        value = '$__interval';\r\n      }\r\n    }\r\n    if (paramType.quote === 'single') {\r\n      return \"'\" + value + \"'\";\r\n    } else if (paramType.quote === 'double') {\r\n      return '\"' + value + '\"';\r\n    }\r\n\r\n    return value;\r\n  });\r\n\r\n  if (innerExpr) {\r\n    parameters.unshift(innerExpr);\r\n  }\r\n  return str + parameters.join(', ') + ')';\r\n}\r\n\r\nexport function suffixRenderer(part, innerExpr) {\r\n  return innerExpr + ' ' + part.params[0];\r\n}\r\n\r\nexport function identityRenderer(part, innerExpr) {\r\n  return part.params[0];\r\n}\r\n\r\nexport function quotedIdentityRenderer(part, innerExpr) {\r\n  return '\"' + part.params[0] + '\"';\r\n}\r\n","import _ from 'lodash';\r\nimport { QueryPartDef, QueryPart } from 'app/core/components/query_part/query_part';\r\n\r\nconst alertQueryDef = new QueryPartDef({\r\n  type: 'query',\r\n  params: [\r\n    { name: 'queryRefId', type: 'string', dynamicLookup: true },\r\n    {\r\n      name: 'from',\r\n      type: 'string',\r\n      options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h', '24h', '48h'],\r\n    },\r\n    { name: 'to', type: 'string', options: ['now'] },\r\n  ],\r\n  defaultParams: ['#A', '15m', 'now', 'avg'],\r\n});\r\n\r\nconst conditionTypes = [{ text: 'Query', value: 'query' }];\r\n\r\nconst alertStateSortScore = {\r\n  alerting: 1,\r\n  no_data: 2,\r\n  pending: 3,\r\n  ok: 4,\r\n  paused: 5,\r\n};\r\n\r\nconst evalFunctions = [\r\n  { text: 'IS ABOVE', value: 'gt' },\r\n  { text: 'IS BELOW', value: 'lt' },\r\n  { text: 'IS OUTSIDE RANGE', value: 'outside_range' },\r\n  { text: 'IS WITHIN RANGE', value: 'within_range' },\r\n  { text: 'HAS NO VALUE', value: 'no_value' },\r\n];\r\n\r\nconst evalOperators = [{ text: 'OR', value: 'or' }, { text: 'AND', value: 'and' }];\r\n\r\nconst reducerTypes = [\r\n  { text: 'avg()', value: 'avg' },\r\n  { text: 'min()', value: 'min' },\r\n  { text: 'max()', value: 'max' },\r\n  { text: 'sum()', value: 'sum' },\r\n  { text: 'count()', value: 'count' },\r\n  { text: 'last()', value: 'last' },\r\n  { text: 'median()', value: 'median' },\r\n  { text: 'diff()', value: 'diff' },\r\n  { text: 'percent_diff()', value: 'percent_diff' },\r\n  { text: 'count_non_null()', value: 'count_non_null' },\r\n];\r\n\r\nconst noDataModes = [\r\n  { text: 'Alerting', value: 'alerting' },\r\n  { text: 'No Data', value: 'no_data' },\r\n  { text: 'Keep Last State', value: 'keep_state' },\r\n  { text: 'Ok', value: 'ok' },\r\n];\r\n\r\nconst executionErrorModes = [{ text: 'Alerting', value: 'alerting' }, { text: 'Keep Last State', value: 'keep_state' }];\r\n\r\nfunction createReducerPart(model) {\r\n  const def = new QueryPartDef({ type: model.type, defaultParams: [] });\r\n  return new QueryPart(model, def);\r\n}\r\n\r\nfunction getStateDisplayModel(state) {\r\n  switch (state) {\r\n    case 'ok': {\r\n      return {\r\n        text: 'OK',\r\n        iconClass: 'icon-gf icon-gf-online',\r\n        stateClass: 'alert-state-ok',\r\n      };\r\n    }\r\n    case 'alerting': {\r\n      return {\r\n        text: 'ALERTING',\r\n        iconClass: 'icon-gf icon-gf-critical',\r\n        stateClass: 'alert-state-critical',\r\n      };\r\n    }\r\n    case 'no_data': {\r\n      return {\r\n        text: 'NO DATA',\r\n        iconClass: 'fa fa-question',\r\n        stateClass: 'alert-state-warning',\r\n      };\r\n    }\r\n    case 'paused': {\r\n      return {\r\n        text: 'PAUSED',\r\n        iconClass: 'fa fa-pause',\r\n        stateClass: 'alert-state-paused',\r\n      };\r\n    }\r\n    case 'pending': {\r\n      return {\r\n        text: 'PENDING',\r\n        iconClass: 'fa fa-exclamation',\r\n        stateClass: 'alert-state-warning',\r\n      };\r\n    }\r\n  }\r\n\r\n  throw { message: 'Unknown alert state' };\r\n}\r\n\r\nfunction joinEvalMatches(matches, separator: string) {\r\n  return _.reduce(\r\n    matches,\r\n    (res, ev) => {\r\n      if (ev.metric !== undefined && ev.value !== undefined) {\r\n        res.push(ev.metric + '=' + ev.value);\r\n      }\r\n\r\n      // For backwards compatibility . Should be be able to remove this after ~2017-06-01\r\n      if (ev.Metric !== undefined && ev.Value !== undefined) {\r\n        res.push(ev.Metric + '=' + ev.Value);\r\n      }\r\n\r\n      return res;\r\n    },\r\n    []\r\n  ).join(separator);\r\n}\r\n\r\nfunction getAlertAnnotationInfo(ah) {\r\n  // backward compatibility, can be removed in grafana 5.x\r\n  // old way stored evalMatches in data property directly,\r\n  // new way stores it in evalMatches property on new data object\r\n\r\n  if (_.isArray(ah.data)) {\r\n    return joinEvalMatches(ah.data, ', ');\r\n  } else if (_.isArray(ah.data.evalMatches)) {\r\n    return joinEvalMatches(ah.data.evalMatches, ', ');\r\n  }\r\n\r\n  if (ah.data.error) {\r\n    return 'Error: ' + ah.data.error;\r\n  }\r\n\r\n  return '';\r\n}\r\n\r\nexport default {\r\n  alertQueryDef: alertQueryDef,\r\n  getStateDisplayModel: getStateDisplayModel,\r\n  conditionTypes: conditionTypes,\r\n  evalFunctions: evalFunctions,\r\n  evalOperators: evalOperators,\r\n  noDataModes: noDataModes,\r\n  executionErrorModes: executionErrorModes,\r\n  reducerTypes: reducerTypes,\r\n  createReducerPart: createReducerPart,\r\n  getAlertAnnotationInfo: getAlertAnnotationInfo,\r\n  alertStateSortScore: alertStateSortScore,\r\n};\r\n","import moment from 'moment';\r\nimport { AlertRuleDTO, AlertRule, AlertRulesState } from 'app/types';\r\nimport { Action, ActionTypes } from './actions';\r\nimport alertDef from './alertDef';\r\n\r\nexport const initialState: AlertRulesState = { items: [], searchQuery: '' };\r\n\r\nfunction convertToAlertRule(rule, state): AlertRule {\r\n  const stateModel = alertDef.getStateDisplayModel(state);\r\n  rule.stateText = stateModel.text;\r\n  rule.stateIcon = stateModel.iconClass;\r\n  rule.stateClass = stateModel.stateClass;\r\n  rule.stateAge = moment(rule.newStateDate)\r\n    .fromNow()\r\n    .replace(' ago', '');\r\n\r\n  if (rule.state !== 'paused') {\r\n    if (rule.executionError) {\r\n      rule.info = 'Execution Error: ' + rule.executionError;\r\n    }\r\n    if (rule.evalData && rule.evalData.noData) {\r\n      rule.info = 'Query returned no data';\r\n    }\r\n  }\r\n\r\n  return rule;\r\n}\r\n\r\nexport const alertRulesReducer = (state = initialState, action: Action): AlertRulesState => {\r\n  switch (action.type) {\r\n    case ActionTypes.LoadAlertRules: {\r\n      const alertRules: AlertRuleDTO[] = action.payload;\r\n\r\n      const alertRulesViewModel: AlertRule[] = alertRules.map(rule => {\r\n        return convertToAlertRule(rule, rule.state);\r\n      });\r\n\r\n      return { items: alertRulesViewModel, searchQuery: state.searchQuery };\r\n    }\r\n\r\n    case ActionTypes.SetSearchQuery:\r\n      return { items: state.items, searchQuery: action.payload };\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nexport default {\r\n  alertRules: alertRulesReducer,\r\n};\r\n","import { Team, TeamGroup, TeamMember, TeamsState, TeamState } from 'app/types';\r\nimport { Action, ActionTypes } from './actions';\r\n\r\nexport const initialTeamsState: TeamsState = { teams: [], searchQuery: '', hasFetched: false };\r\nexport const initialTeamState: TeamState = {\r\n  team: {} as Team,\r\n  members: [] as TeamMember[],\r\n  groups: [] as TeamGroup[],\r\n  searchMemberQuery: '',\r\n};\r\n\r\nexport const teamsReducer = (state = initialTeamsState, action: Action): TeamsState => {\r\n  switch (action.type) {\r\n    case ActionTypes.LoadTeams:\r\n      return { ...state, hasFetched: true, teams: action.payload };\r\n\r\n    case ActionTypes.SetSearchQuery:\r\n      return { ...state, searchQuery: action.payload };\r\n  }\r\n  return state;\r\n};\r\n\r\nexport const teamReducer = (state = initialTeamState, action: Action): TeamState => {\r\n  switch (action.type) {\r\n    case ActionTypes.LoadTeam:\r\n      return { ...state, team: action.payload };\r\n\r\n    case ActionTypes.LoadTeamMembers:\r\n      return { ...state, members: action.payload };\r\n\r\n    case ActionTypes.SetSearchMemberQuery:\r\n      return { ...state, searchMemberQuery: action.payload };\r\n\r\n    case ActionTypes.LoadTeamGroups:\r\n      return { ...state, groups: action.payload };\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nexport default {\r\n  teams: teamsReducer,\r\n  team: teamReducer,\r\n};\r\n","import { ApiKeysState } from 'app/types';\r\nimport { Action, ActionTypes } from './actions';\r\n\r\nexport const initialApiKeysState: ApiKeysState = {\r\n  keys: [],\r\n  searchQuery: '',\r\n  hasFetched: false,\r\n};\r\n\r\nexport const apiKeysReducer = (state = initialApiKeysState, action: Action): ApiKeysState => {\r\n  switch (action.type) {\r\n    case ActionTypes.LoadApiKeys:\r\n      return { ...state, hasFetched: true, keys: action.payload };\r\n    case ActionTypes.SetApiKeysSearchQuery:\r\n      return { ...state, searchQuery: action.payload };\r\n  }\r\n  return state;\r\n};\r\n\r\nexport default {\r\n  apiKeys: apiKeysReducer,\r\n};\r\n","import { DashboardAcl, DashboardAclDTO } from 'app/types/acl';\r\n\r\nexport function processAclItems(items: DashboardAclDTO[]): DashboardAcl[] {\r\n  return items.map(processAclItem).sort((a, b) => b.sortRank - a.sortRank || a.name.localeCompare(b.name));\r\n}\r\n\r\nfunction processAclItem(dto: DashboardAclDTO): DashboardAcl {\r\n  const item = dto as DashboardAcl;\r\n\r\n  item.sortRank = 0;\r\n  if (item.userId > 0) {\r\n    item.name = item.userLogin;\r\n    item.sortRank = 10;\r\n  } else if (item.teamId > 0) {\r\n    item.name = item.team;\r\n    item.sortRank = 20;\r\n  } else if (item.role) {\r\n    item.icon = 'fa fa-fw fa-street-view';\r\n    item.name = item.role;\r\n    item.sortRank = 30;\r\n    if (item.role === 'Editor') {\r\n      item.sortRank += 1;\r\n    }\r\n  }\r\n\r\n  if (item.inherited) {\r\n    item.sortRank += 100;\r\n  }\r\n\r\n  return item;\r\n}\r\n","import { FolderState } from 'app/types';\r\nimport { Action, ActionTypes } from './actions';\r\nimport { processAclItems } from 'app/core/utils/acl';\r\n\r\nexport const inititalState: FolderState = {\r\n  id: 0,\r\n  uid: 'loading',\r\n  title: 'loading',\r\n  url: '',\r\n  canSave: false,\r\n  hasChanged: false,\r\n  version: 1,\r\n  permissions: [],\r\n};\r\n\r\nexport const folderReducer = (state = inititalState, action: Action): FolderState => {\r\n  switch (action.type) {\r\n    case ActionTypes.LoadFolder:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        hasChanged: false,\r\n      };\r\n    case ActionTypes.SetFolderTitle:\r\n      return {\r\n        ...state,\r\n        title: action.payload,\r\n        hasChanged: action.payload.trim().length > 0,\r\n      };\r\n    case ActionTypes.LoadFolderPermissions:\r\n      return {\r\n        ...state,\r\n        permissions: processAclItems(action.payload),\r\n      };\r\n  }\r\n  return state;\r\n};\r\n\r\nexport default {\r\n  folder: folderReducer,\r\n};\r\n","import { DashboardState } from 'app/types';\r\nimport { Action, ActionTypes } from './actions';\r\nimport { processAclItems } from 'app/core/utils/acl';\r\n\r\nexport const inititalState: DashboardState = {\r\n  permissions: [],\r\n};\r\n\r\nexport const dashboardReducer = (state = inititalState, action: Action): DashboardState => {\r\n  switch (action.type) {\r\n    case ActionTypes.LoadDashboardPermissions:\r\n      return {\r\n        ...state,\r\n        permissions: processAclItems(action.payload),\r\n      };\r\n  }\r\n  return state;\r\n};\r\n\r\nexport default {\r\n  dashboard: dashboardReducer,\r\n};\r\n","import { Action, ActionTypes } from './actions';\r\nimport { Plugin, PluginsState } from 'app/types';\r\nimport { LayoutModes } from '../../../core/components/LayoutSelector/LayoutSelector';\r\nimport { PluginDashboard } from '../../../types/plugins';\r\n\r\nexport const initialState: PluginsState = {\r\n  plugins: [] as Plugin[],\r\n  searchQuery: '',\r\n  layoutMode: LayoutModes.Grid,\r\n  hasFetched: false,\r\n  dashboards: [] as PluginDashboard[],\r\n};\r\n\r\nexport const pluginsReducer = (state = initialState, action: Action): PluginsState => {\r\n  switch (action.type) {\r\n    case ActionTypes.LoadPlugins:\r\n      return { ...state, hasFetched: true, plugins: action.payload };\r\n\r\n    case ActionTypes.SetPluginsSearchQuery:\r\n      return { ...state, searchQuery: action.payload };\r\n\r\n    case ActionTypes.SetLayoutMode:\r\n      return { ...state, layoutMode: action.payload };\r\n\r\n    case ActionTypes.LoadPluginDashboards:\r\n      return { ...state, dashboards: action.payload };\r\n  }\r\n  return state;\r\n};\r\n\r\nexport default {\r\n  plugins: pluginsReducer,\r\n};\r\n","import { DataSource, DataSourcesState, Plugin } from 'app/types';\r\nimport { Action, ActionTypes } from './actions';\r\nimport { LayoutModes } from '../../../core/components/LayoutSelector/LayoutSelector';\r\n\r\nconst initialState: DataSourcesState = {\r\n  dataSources: [] as DataSource[],\r\n  dataSource: {} as DataSource,\r\n  layoutMode: LayoutModes.Grid,\r\n  searchQuery: '',\r\n  dataSourcesCount: 0,\r\n  dataSourceTypes: [] as Plugin[],\r\n  dataSourceTypeSearchQuery: '',\r\n  dataSourceMeta: {} as Plugin,\r\n  hasFetched: false,\r\n};\r\n\r\nexport const dataSourcesReducer = (state = initialState, action: Action): DataSourcesState => {\r\n  switch (action.type) {\r\n    case ActionTypes.LoadDataSources:\r\n      return { ...state, hasFetched: true, dataSources: action.payload, dataSourcesCount: action.payload.length };\r\n\r\n    case ActionTypes.LoadDataSource:\r\n      return { ...state, dataSource: action.payload };\r\n\r\n    case ActionTypes.SetDataSourcesSearchQuery:\r\n      return { ...state, searchQuery: action.payload };\r\n\r\n    case ActionTypes.SetDataSourcesLayoutMode:\r\n      return { ...state, layoutMode: action.payload };\r\n\r\n    case ActionTypes.LoadDataSourceTypes:\r\n      return { ...state, dataSourceTypes: action.payload };\r\n\r\n    case ActionTypes.SetDataSourceTypeSearchQuery:\r\n      return { ...state, dataSourceTypeSearchQuery: action.payload };\r\n\r\n    case ActionTypes.LoadDataSourceMeta:\r\n      return { ...state, dataSourceMeta: action.payload };\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nexport default {\r\n  dataSources: dataSourcesReducer,\r\n};\r\n","import { Invitee, OrgUser, UsersState } from 'app/types';\r\nimport { Action, ActionTypes } from './actions';\r\nimport config from 'app/core/config';\r\n\r\nexport const initialState: UsersState = {\r\n  invitees: [] as Invitee[],\r\n  users: [] as OrgUser[],\r\n  searchQuery: '',\r\n  canInvite: !config.disableLoginForm && !config.externalUserMngLinkName,\r\n  externalUserMngInfo: config.externalUserMngInfo,\r\n  externalUserMngLinkName: config.externalUserMngLinkName,\r\n  externalUserMngLinkUrl: config.externalUserMngLinkUrl,\r\n  hasFetched: false,\r\n};\r\n\r\nexport const usersReducer = (state = initialState, action: Action): UsersState => {\r\n  switch (action.type) {\r\n    case ActionTypes.LoadUsers:\r\n      return { ...state, hasFetched: true, users: action.payload };\r\n\r\n    case ActionTypes.LoadInvitees:\r\n      return { ...state, hasFetched: true, invitees: action.payload };\r\n\r\n    case ActionTypes.SetUsersSearchQuery:\r\n      return { ...state, searchQuery: action.payload };\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nexport default {\r\n  users: usersReducer,\r\n};\r\n","import { createStore, applyMiddleware, compose, combineReducers } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { createLogger } from 'redux-logger';\r\nimport sharedReducers from 'app/core/reducers';\r\nimport alertingReducers from 'app/features/alerting/state/reducers';\r\nimport teamsReducers from 'app/features/teams/state/reducers';\r\nimport apiKeysReducers from 'app/features/api-keys/state/reducers';\r\nimport foldersReducers from 'app/features/folders/state/reducers';\r\nimport dashboardReducers from 'app/features/dashboard/state/reducers';\r\nimport pluginReducers from 'app/features/plugins/state/reducers';\r\nimport dataSourcesReducers from 'app/features/datasources/state/reducers';\r\nimport usersReducers from 'app/features/users/state/reducers';\r\n\r\nconst rootReducers = {\r\n  ...sharedReducers,\r\n  ...alertingReducers,\r\n  ...teamsReducers,\r\n  ...apiKeysReducers,\r\n  ...foldersReducers,\r\n  ...dashboardReducers,\r\n  ...pluginReducers,\r\n  ...dataSourcesReducers,\r\n  ...usersReducers,\r\n};\r\n\r\nexport let store;\r\n\r\nexport function addRootReducer(reducers) {\r\n  Object.assign(rootReducers, ...reducers);\r\n}\r\n\r\nexport function configureStore() {\r\n  const composeEnhancers = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n  const rootReducer = combineReducers(rootReducers);\r\n\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    // DEV builds we had the logger middleware\r\n    store = createStore(rootReducer, {}, composeEnhancers(applyMiddleware(thunk, createLogger())));\r\n  } else {\r\n    store = createStore(rootReducer, {}, composeEnhancers(applyMiddleware(thunk)));\r\n  }\r\n}\r\n","import config from 'app/core/config';\r\n\r\nexport const stripBaseFromUrl = url => {\r\n  const appSubUrl = config.appSubUrl;\r\n  const stripExtraChars = appSubUrl.endsWith('/') ? 1 : 0;\r\n  const urlWithoutBase =\r\n    url.length > 0 && url.indexOf(appSubUrl) === 0 ? url.slice(appSubUrl.length - stripExtraChars) : url;\r\n\r\n  return urlWithoutBase;\r\n};\r\n\r\nexport default { stripBaseFromUrl };\r\n","import coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\nimport { store } from 'app/store/configureStore';\r\nimport locationUtil from 'app/core/utils/location_util';\r\nimport { updateLocation } from 'app/core/actions';\r\n\r\n// Services that handles angular -> mobx store sync & other react <-> angular sync\r\nexport class BridgeSrv {\r\n  private fullPageReloadRoutes;\r\n\r\n  /** @ngInject */\r\n  constructor(private $location, private $timeout, private $window, private $rootScope, private $route) {\r\n    this.fullPageReloadRoutes = ['/logout'];\r\n  }\r\n\r\n  init() {\r\n    this.$rootScope.$on('$routeUpdate', (evt, data) => {\r\n      const angularUrl = this.$location.url();\r\n      const state = store.getState();\r\n      if (state.location.url !== angularUrl) {\r\n        store.dispatch(\r\n          updateLocation({\r\n            path: this.$location.path(),\r\n            query: this.$location.search(),\r\n            routeParams: this.$route.current.params,\r\n          })\r\n        );\r\n      }\r\n    });\r\n\r\n    this.$rootScope.$on('$routeChangeSuccess', (evt, data) => {\r\n      store.dispatch(\r\n        updateLocation({\r\n          path: this.$location.path(),\r\n          query: this.$location.search(),\r\n          routeParams: this.$route.current.params,\r\n        })\r\n      );\r\n    });\r\n\r\n    // Listen for changes in redux location -> update angular location\r\n    store.subscribe(() => {\r\n      const state = store.getState();\r\n      const angularUrl = this.$location.url();\r\n      const url = locationUtil.stripBaseFromUrl(state.location.url);\r\n      if (angularUrl !== url) {\r\n        this.$timeout(() => {\r\n          this.$location.url(url);\r\n        });\r\n        console.log('store updating angular $location.url', url);\r\n      }\r\n    });\r\n\r\n    appEvents.on('location-change', payload => {\r\n      const urlWithoutBase = locationUtil.stripBaseFromUrl(payload.href);\r\n      if (this.fullPageReloadRoutes.indexOf(urlWithoutBase) > -1) {\r\n        this.$window.location.href = payload.href;\r\n        return;\r\n      }\r\n\r\n      this.$timeout(() => {\r\n        // A hack to use timeout when we're changing things (in this case the url) from outside of Angular.\r\n        this.$location.url(urlWithoutBase);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.service('bridgeSrv', BridgeSrv);\r\n","import './alert_srv';\r\nimport './util_srv';\r\nimport './context_srv';\r\nimport './timer';\r\nimport './analytics';\r\nimport './popover_srv';\r\nimport './segment_srv';\r\nimport './backend_srv';\r\nimport './dynamic_directive_srv';\r\nimport './bridge_srv';\r\n","import _ from 'lodash';\r\nimport angular from 'angular';\r\nimport moment from 'moment';\r\nimport coreModule from '../core_module';\r\n\r\ncoreModule.filter('stringSort', () => {\r\n  return input => {\r\n    return input.sort();\r\n  };\r\n});\r\n\r\ncoreModule.filter('slice', () => {\r\n  return (arr, start, end) => {\r\n    if (!_.isUndefined(arr)) {\r\n      return arr.slice(start, end);\r\n    }\r\n  };\r\n});\r\n\r\ncoreModule.filter('stringify', () => {\r\n  return arr => {\r\n    if (_.isObject(arr) && !_.isArray(arr)) {\r\n      return angular.toJson(arr);\r\n    } else {\r\n      return _.isNull(arr) ? null : arr.toString();\r\n    }\r\n  };\r\n});\r\n\r\ncoreModule.filter('moment', () => {\r\n  return (date, mode) => {\r\n    switch (mode) {\r\n      case 'ago':\r\n        return moment(date).fromNow();\r\n    }\r\n    return moment(date).fromNow();\r\n  };\r\n});\r\n\r\ncoreModule.filter('noXml', () => {\r\n  const noXml = text => {\r\n    return _.isString(text)\r\n      ? text\r\n          .replace(/&/g, '&amp;')\r\n          .replace(/</g, '&lt;')\r\n          .replace(/>/g, '&gt;')\r\n          .replace(/'/g, '&#39;')\r\n          .replace(/\"/g, '&quot;')\r\n      : text;\r\n  };\r\n  return text => {\r\n    return _.isArray(text) ? _.map(text, noXml) : noXml(text);\r\n  };\r\n});\r\n\r\n/** @ngInject */\r\nfunction interpolateTemplateVars(templateSrv) {\r\n  const filterFunc: any = (text, scope) => {\r\n    let scopedVars;\r\n    if (scope.ctrl) {\r\n      scopedVars = (scope.ctrl.panel || scope.ctrl.row).scopedVars;\r\n    } else {\r\n      scopedVars = scope.row.scopedVars;\r\n    }\r\n\r\n    return templateSrv.replaceWithText(text, scopedVars);\r\n  };\r\n\r\n  filterFunc.$stateful = true;\r\n  return filterFunc;\r\n}\r\n\r\ncoreModule.filter('interpolateTemplateVars', interpolateTemplateVars);\r\nexport default {};\r\n","import $ from 'jquery';\r\nimport _ from 'lodash';\r\n\r\nimport config from 'app/core/config';\r\nimport coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\nimport { getExploreUrl } from 'app/core/utils/explore';\r\n\r\nimport Mousetrap from 'mousetrap';\r\nimport 'mousetrap-global-bind';\r\n\r\nexport class KeybindingSrv {\r\n  helpModal: boolean;\r\n  modalOpen = false;\r\n  timepickerOpen = false;\r\n\r\n  /** @ngInject */\r\n  constructor(\r\n    private $rootScope,\r\n    private $location,\r\n    private $timeout,\r\n    private datasourceSrv,\r\n    private timeSrv,\r\n    private contextSrv\r\n  ) {\r\n    // clear out all shortcuts on route change\r\n    $rootScope.$on('$routeChangeSuccess', () => {\r\n      Mousetrap.reset();\r\n      // rebind global shortcuts\r\n      this.setupGlobal();\r\n    });\r\n\r\n    this.setupGlobal();\r\n    appEvents.on('show-modal', () => (this.modalOpen = true));\r\n    $rootScope.onAppEvent('timepickerOpen', () => (this.timepickerOpen = true));\r\n    $rootScope.onAppEvent('timepickerClosed', () => (this.timepickerOpen = false));\r\n  }\r\n\r\n  setupGlobal() {\r\n    this.bind(['?', 'h'], this.showHelpModal);\r\n    this.bind('g h', this.goToHome);\r\n    this.bind('g a', this.openAlerting);\r\n    this.bind('g p', this.goToProfile);\r\n    this.bind('s s', this.openSearchStarred);\r\n    this.bind('s o', this.openSearch);\r\n    this.bind('s t', this.openSearchTags);\r\n    this.bind('f', this.openSearch);\r\n    this.bindGlobal('esc', this.exit);\r\n  }\r\n\r\n  openSearchStarred() {\r\n    appEvents.emit('show-dash-search', { starred: true });\r\n  }\r\n\r\n  openSearchTags() {\r\n    appEvents.emit('show-dash-search', { tagsMode: true });\r\n  }\r\n\r\n  openSearch() {\r\n    appEvents.emit('show-dash-search');\r\n  }\r\n\r\n  openAlerting() {\r\n    this.$location.url('/alerting');\r\n  }\r\n\r\n  goToHome() {\r\n    this.$location.url('/');\r\n  }\r\n\r\n  goToProfile() {\r\n    this.$location.url('/profile');\r\n  }\r\n\r\n  showHelpModal() {\r\n    appEvents.emit('show-modal', { templateHtml: '<help-modal></help-modal>' });\r\n  }\r\n\r\n  exit() {\r\n    const popups = $('.popover.in');\r\n    if (popups.length > 0) {\r\n      return;\r\n    }\r\n\r\n    appEvents.emit('hide-modal');\r\n\r\n    if (this.modalOpen) {\r\n      this.modalOpen = false;\r\n      return;\r\n    }\r\n\r\n    if (this.timepickerOpen) {\r\n      this.$rootScope.appEvent('closeTimepicker');\r\n      this.timepickerOpen = false;\r\n      return;\r\n    }\r\n\r\n    // close settings view\r\n    const search = this.$location.search();\r\n    if (search.editview) {\r\n      delete search.editview;\r\n      this.$location.search(search);\r\n      return;\r\n    }\r\n\r\n    if (search.fullscreen) {\r\n      this.$rootScope.appEvent('panel-change-view', { fullscreen: false, edit: false });\r\n      return;\r\n    }\r\n\r\n    if (search.kiosk) {\r\n      this.$rootScope.appEvent('toggle-kiosk-mode', { exit: true });\r\n    }\r\n  }\r\n\r\n  bind(keyArg, fn) {\r\n    Mousetrap.bind(\r\n      keyArg,\r\n      evt => {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        evt.returnValue = false;\r\n        return this.$rootScope.$apply(fn.bind(this));\r\n      },\r\n      'keydown'\r\n    );\r\n  }\r\n\r\n  bindGlobal(keyArg, fn) {\r\n    Mousetrap.bindGlobal(\r\n      keyArg,\r\n      evt => {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        evt.returnValue = false;\r\n        return this.$rootScope.$apply(fn.bind(this));\r\n      },\r\n      'keydown'\r\n    );\r\n  }\r\n\r\n  showDashEditView() {\r\n    const search = _.extend(this.$location.search(), { editview: 'settings' });\r\n    this.$location.search(search);\r\n  }\r\n\r\n  setupDashboardBindings(scope, dashboard) {\r\n    this.bind('mod+o', () => {\r\n      dashboard.graphTooltip = (dashboard.graphTooltip + 1) % 3;\r\n      appEvents.emit('graph-hover-clear');\r\n      dashboard.startRefresh();\r\n    });\r\n\r\n    this.bind('mod+s', e => {\r\n      scope.appEvent('save-dashboard');\r\n    });\r\n\r\n    this.bind('t z', () => {\r\n      scope.appEvent('zoom-out', 2);\r\n    });\r\n\r\n    this.bind('ctrl+z', () => {\r\n      scope.appEvent('zoom-out', 2);\r\n    });\r\n\r\n    this.bind('t left', () => {\r\n      scope.appEvent('shift-time-backward');\r\n    });\r\n\r\n    this.bind('t right', () => {\r\n      scope.appEvent('shift-time-forward');\r\n    });\r\n\r\n    // edit panel\r\n    this.bind('e', () => {\r\n      if (dashboard.meta.focusPanelId && dashboard.meta.canEdit) {\r\n        this.$rootScope.appEvent('panel-change-view', {\r\n          fullscreen: true,\r\n          edit: true,\r\n          panelId: dashboard.meta.focusPanelId,\r\n          toggle: true,\r\n        });\r\n      }\r\n    });\r\n\r\n    // view panel\r\n    this.bind('v', () => {\r\n      if (dashboard.meta.focusPanelId) {\r\n        this.$rootScope.appEvent('panel-change-view', {\r\n          fullscreen: true,\r\n          edit: null,\r\n          panelId: dashboard.meta.focusPanelId,\r\n          toggle: true,\r\n        });\r\n      }\r\n    });\r\n\r\n    // jump to explore if permissions allow\r\n    if (this.contextSrv.isEditor && config.exploreEnabled) {\r\n      this.bind('x', async () => {\r\n        if (dashboard.meta.focusPanelId) {\r\n          const panel = dashboard.getPanelById(dashboard.meta.focusPanelId);\r\n          const datasource = await this.datasourceSrv.get(panel.datasource);\r\n          const url = await getExploreUrl(panel, panel.targets, datasource, this.datasourceSrv, this.timeSrv);\r\n          if (url) {\r\n            this.$timeout(() => this.$location.url(url));\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // delete panel\r\n    this.bind('p r', () => {\r\n      if (dashboard.meta.focusPanelId && dashboard.meta.canEdit) {\r\n        this.$rootScope.appEvent('panel-remove', {\r\n          panelId: dashboard.meta.focusPanelId,\r\n        });\r\n        dashboard.meta.focusPanelId = 0;\r\n      }\r\n    });\r\n\r\n    // duplicate panel\r\n    this.bind('p d', () => {\r\n      if (dashboard.meta.focusPanelId && dashboard.meta.canEdit) {\r\n        const panelIndex = dashboard.getPanelInfoById(dashboard.meta.focusPanelId).index;\r\n        dashboard.duplicatePanel(dashboard.panels[panelIndex]);\r\n      }\r\n    });\r\n\r\n    // share panel\r\n    this.bind('p s', () => {\r\n      if (dashboard.meta.focusPanelId) {\r\n        const shareScope = scope.$new();\r\n        const panelInfo = dashboard.getPanelInfoById(dashboard.meta.focusPanelId);\r\n        shareScope.panel = panelInfo.panel;\r\n        shareScope.dashboard = dashboard;\r\n\r\n        appEvents.emit('show-modal', {\r\n          src: 'public/app/features/dashboard/partials/shareModal.html',\r\n          scope: shareScope,\r\n        });\r\n      }\r\n    });\r\n\r\n    // collapse all rows\r\n    this.bind('d shift+c', () => {\r\n      dashboard.collapseRows();\r\n    });\r\n\r\n    // expand all rows\r\n    this.bind('d shift+e', () => {\r\n      dashboard.expandRows();\r\n    });\r\n\r\n    this.bind('d n', e => {\r\n      this.$location.url('/dashboard/new');\r\n    });\r\n\r\n    this.bind('d r', () => {\r\n      dashboard.startRefresh();\r\n    });\r\n\r\n    this.bind('d s', () => {\r\n      this.showDashEditView();\r\n    });\r\n\r\n    this.bind('d k', () => {\r\n      appEvents.emit('toggle-kiosk-mode');\r\n    });\r\n\r\n    this.bind('d v', () => {\r\n      appEvents.emit('toggle-view-mode');\r\n    });\r\n\r\n    //Autofit panels\r\n    this.bind('d a', () => {\r\n      // this has to be a full page reload\r\n      window.location.href = window.location.href + '&autofitpanels';\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.service('keybindingSrv', KeybindingSrv);\r\n","export function assignModelProperties(target, source, defaults, removeDefaults?) {\r\n  for (const key in defaults) {\r\n    if (!defaults.hasOwnProperty(key)) {\r\n      continue;\r\n    }\r\n\r\n    target[key] = source[key] === undefined ? defaults[key] : source[key];\r\n  }\r\n}\r\n","import coreModule from '../../core_module';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class HelpCtrl {\r\n  tabIndex: any;\r\n  shortcuts: any;\r\n\r\n  /** @ngInject */\r\n  constructor() {\r\n    this.tabIndex = 0;\r\n    this.shortcuts = {\r\n      Global: [\r\n        { keys: ['g', 'h'], description: 'Go to Home Dashboard' },\r\n        { keys: ['g', 'p'], description: 'Go to Profile' },\r\n        { keys: ['s', 'o'], description: 'Open search' },\r\n        { keys: ['s', 's'], description: 'Open search with starred filter' },\r\n        { keys: ['s', 't'], description: 'Open search in tags view' },\r\n        { keys: ['esc'], description: 'Exit edit/setting views' },\r\n      ],\r\n      Dashboard: [\r\n        { keys: ['mod+s'], description: 'Save dashboard' },\r\n        { keys: ['d', 'r'], description: 'Refresh all panels' },\r\n        { keys: ['d', 's'], description: 'Dashboard settings' },\r\n        { keys: ['d', 'v'], description: 'Toggle in-active / view mode' },\r\n        { keys: ['d', 'k'], description: 'Toggle kiosk mode (hides top nav)' },\r\n        { keys: ['d', 'E'], description: 'Expand all rows' },\r\n        { keys: ['d', 'C'], description: 'Collapse all rows' },\r\n        { keys: ['d', 'a'], description: 'Toggle auto fit panels (experimental feature)' },\r\n        { keys: ['mod+o'], description: 'Toggle shared graph crosshair' },\r\n      ],\r\n      'Focused Panel': [\r\n        { keys: ['e'], description: 'Toggle panel edit view' },\r\n        { keys: ['v'], description: 'Toggle panel fullscreen view' },\r\n        { keys: ['p', 's'], description: 'Open Panel Share Modal' },\r\n        { keys: ['p', 'd'], description: 'Duplicate Panel' },\r\n        { keys: ['p', 'r'], description: 'Remove Panel' },\r\n      ],\r\n      'Time Range': [\r\n        { keys: ['t', 'z'], description: 'Zoom out time range' },\r\n        {\r\n          keys: ['t', '<i class=\"fa fa-long-arrow-left\"></i>'],\r\n          description: 'Move time range back',\r\n        },\r\n        {\r\n          keys: ['t', '<i class=\"fa fa-long-arrow-right\"></i>'],\r\n          description: 'Move time range forward',\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  dismiss() {\r\n    appEvents.emit('hide-modal');\r\n  }\r\n}\r\n\r\nexport function helpModal() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/core/components/help/help.html',\r\n    controller: HelpCtrl,\r\n    bindToController: true,\r\n    transclude: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {},\r\n  };\r\n}\r\n\r\ncoreModule.directive('helpModal', helpModal);\r\n","import coreModule from 'app/core/core_module';\r\nimport config from 'app/core/config';\r\nimport _ from 'lodash';\r\n\r\nexport interface NavModelItem {\r\n  text: string;\r\n  url: string;\r\n  icon?: string;\r\n  img?: string;\r\n  id: string;\r\n  active?: boolean;\r\n  hideFromTabs?: boolean;\r\n  divider?: boolean;\r\n  children: NavModelItem[];\r\n  target?: string;\r\n}\r\n\r\nexport class NavModel {\r\n  breadcrumbs: NavModelItem[];\r\n  main: NavModelItem;\r\n  node: NavModelItem;\r\n\r\n  constructor() {\r\n    this.breadcrumbs = [];\r\n  }\r\n}\r\n\r\nexport class NavModelSrv {\r\n  navItems: any;\r\n\r\n  /** @ngInject */\r\n  constructor() {\r\n    this.navItems = config.bootData.navTree;\r\n  }\r\n\r\n  getCfgNode() {\r\n    return _.find(this.navItems, { id: 'cfg' });\r\n  }\r\n\r\n  getNav(...args) {\r\n    let children = this.navItems;\r\n    const nav = new NavModel();\r\n\r\n    for (const id of args) {\r\n      // if its a number then it's the index to use for main\r\n      if (_.isNumber(id)) {\r\n        nav.main = nav.breadcrumbs[id];\r\n        break;\r\n      }\r\n\r\n      const node = _.find(children, { id: id });\r\n      nav.breadcrumbs.push(node);\r\n      nav.node = node;\r\n      nav.main = node;\r\n      children = node.children;\r\n    }\r\n\r\n    if (nav.main.children) {\r\n      for (const item of nav.main.children) {\r\n        item.active = false;\r\n\r\n        if (item.url === nav.node.url) {\r\n          item.active = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    return nav;\r\n  }\r\n\r\n  getNotFoundNav() {\r\n    const node = {\r\n      text: 'Page not found',\r\n      icon: 'fa fa-fw fa-warning',\r\n      subTitle: '404 Error',\r\n    };\r\n\r\n    return {\r\n      breadcrumbs: [node],\r\n      node: node,\r\n      main: node,\r\n    };\r\n  }\r\n}\r\n\r\ncoreModule.service('navModelSrv', NavModelSrv);\r\n","import $ from 'jquery';\r\nimport baron from 'baron';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nconst scrollBarHTML = `\r\n<div class=\"baron__track\">\r\n  <div class=\"baron__bar\"></div>\r\n</div>\r\n`;\r\n\r\nconst scrollRootClass = 'baron baron__root';\r\nconst scrollerClass = 'baron__scroller';\r\n\r\nexport function geminiScrollbar() {\r\n  return {\r\n    restrict: 'A',\r\n    link: (scope, elem, attrs) => {\r\n      let scrollRoot = elem.parent();\r\n      const scroller = elem;\r\n\r\n      console.log('scroll');\r\n      if (attrs.grafanaScrollbar && attrs.grafanaScrollbar === 'scrollonroot') {\r\n        scrollRoot = scroller;\r\n      }\r\n\r\n      scrollRoot.addClass(scrollRootClass);\r\n      $(scrollBarHTML).appendTo(scrollRoot);\r\n      elem.addClass(scrollerClass);\r\n\r\n      const scrollParams = {\r\n        root: scrollRoot[0],\r\n        scroller: scroller[0],\r\n        bar: '.baron__bar',\r\n        barOnCls: '_scrollbar',\r\n        scrollingCls: '_scrolling',\r\n        track: '.baron__track',\r\n        direction: 'v',\r\n      };\r\n\r\n      const scrollbar = baron(scrollParams);\r\n\r\n      scope.$on('$destroy', () => {\r\n        scrollbar.dispose();\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('grafanaScrollbar', geminiScrollbar);\r\n","import coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport function pageScrollbar() {\r\n  return {\r\n    restrict: 'A',\r\n    link: (scope, elem, attrs) => {\r\n      let lastPos = 0;\r\n\r\n      appEvents.on(\r\n        'dash-scroll',\r\n        evt => {\r\n          if (evt.restore) {\r\n            elem[0].scrollTop = lastPos;\r\n            return;\r\n          }\r\n\r\n          lastPos = elem[0].scrollTop;\r\n\r\n          if (evt.animate) {\r\n            elem.animate({ scrollTop: evt.pos }, 500);\r\n          } else {\r\n            elem[0].scrollTop = evt.pos;\r\n          }\r\n        },\r\n        scope\r\n      );\r\n\r\n      scope.$on('$routeChangeSuccess', () => {\r\n        lastPos = 0;\r\n        elem[0].scrollTop = 0;\r\n        // Focus page to enable scrolling by keyboard\r\n        elem[0].focus({ preventScroll: true });\r\n      });\r\n\r\n      elem[0].tabIndex = -1;\r\n      // Focus page to enable scrolling by keyboard\r\n      elem[0].focus({ preventScroll: true });\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('pageScrollbar', pageScrollbar);\r\n","import coreModule from 'app/core/core_module';\r\nimport { contextSrv } from 'app/core/services/context_srv';\r\nimport config from 'app/core/config';\r\n\r\nconst template = `\r\n<div class=\"modal-body\">\r\n\t<div class=\"modal-header\">\r\n\t\t<h2 class=\"modal-header-title\">\r\n\t\t\t<i class=\"fa fa-random\"></i>\r\n\t\t\t<span class=\"p-l-1\">Switch Organization</span>\r\n\t\t</h2>\r\n\r\n\t\t<a class=\"modal-header-close\" ng-click=\"ctrl.dismiss();\">\r\n\t\t\t<i class=\"fa fa-remove\"></i>\r\n\t\t</a>\r\n\t</div>\r\n\r\n  <div class=\"modal-content modal-content--has-scroll\" grafana-scrollbar>\r\n    <table class=\"filter-table form-inline\">\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t<th>Role</th>\r\n\t\t\t\t\t<th></th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr ng-repeat=\"org in ctrl.orgs\">\r\n\t\t\t\t\t<td>{{org.name}}</td>\r\n\t\t\t\t\t<td>{{org.role}}</td>\r\n\t\t\t\t\t<td class=\"text-right\">\r\n\t\t\t\t\t\t<span class=\"btn btn-primary btn-mini\" ng-show=\"org.orgId === ctrl.currentOrgId\">\r\n\t\t\t\t\t\t\tCurrent\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<a ng-click=\"ctrl.setUsingOrg(org)\" class=\"btn btn-inverse btn-mini\" ng-show=\"org.orgId !== ctrl.currentOrgId\">\r\n\t\t\t\t\t\t\tSwitch to\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t</div>\r\n</div>`;\r\n\r\nexport class OrgSwitchCtrl {\r\n  orgs: any[];\r\n  currentOrgId: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv) {\r\n    this.currentOrgId = contextSrv.user.orgId;\r\n    this.getUserOrgs();\r\n  }\r\n\r\n  getUserOrgs() {\r\n    this.backendSrv.get('/api/user/orgs').then(orgs => {\r\n      this.orgs = orgs;\r\n    });\r\n  }\r\n\r\n  setUsingOrg(org) {\r\n    return this.backendSrv.post('/api/user/using/' + org.orgId).then(() => {\r\n      this.setWindowLocation(config.appSubUrl + (config.appSubUrl.endsWith('/') ? '' : '/') + '?orgId=' + org.orgId);\r\n    });\r\n  }\r\n\r\n  setWindowLocation(href: string) {\r\n    window.location.href = href;\r\n  }\r\n}\r\n\r\nexport function orgSwitcher() {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    controller: OrgSwitchCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: { dismiss: '&' },\r\n  };\r\n}\r\n\r\ncoreModule.directive('orgSwitcher', orgSwitcher);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<div class=\"scroll-canvas\">\r\n  <navbar model=\"model\"></navbar>\r\n   <div class=\"page-container\">\r\n\t\t<div class=\"page-header\">\r\n      <h1>\r\n         <i class=\"{{::model.node.icon}}\" ng-if=\"::model.node.icon\"></i>\r\n         <img ng-src=\"{{::model.node.img}}\" ng-if=\"::model.node.img\"></i>\r\n         {{::model.node.text}}\r\n       </h1>\r\n\r\n      <div class=\"page-header__actions\" ng-transclude=\"header\"></div>\r\n\t\t</div>\r\n\r\n    <div class=\"page-body\" ng-transclude=\"body\">\r\n    </div>\r\n  </div>\r\n</div>\r\n`;\r\n\r\nexport function gfPageDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    scope: {\r\n      model: '=',\r\n    },\r\n    transclude: {\r\n      header: '?gfPageHeader',\r\n      body: 'gfPageBody',\r\n    },\r\n    link: (scope, elem, attrs) => {\r\n      console.log(scope);\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('gfPage', gfPageDirective);\r\n","import $ from 'jquery';\r\nimport angular from 'angular';\r\n\r\nexport class Profiler {\r\n  panelsRendered: number;\r\n  enabled: boolean;\r\n  panelsInitCount: any;\r\n  timings: any;\r\n  digestCounter: any;\r\n  $rootScope: any;\r\n  scopeCount: any;\r\n  window: any;\r\n\r\n  init(config, $rootScope) {\r\n    this.enabled = config.buildInfo.env === 'development';\r\n    this.timings = {};\r\n    this.timings.appStart = { loadStart: new Date().getTime() };\r\n    this.$rootScope = $rootScope;\r\n    this.window = window;\r\n\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n\r\n    $rootScope.$watch(\r\n      () => {\r\n        this.digestCounter++;\r\n        return false;\r\n      },\r\n      () => {}\r\n    );\r\n\r\n    $rootScope.onAppEvent('refresh', this.refresh.bind(this), $rootScope);\r\n    $rootScope.onAppEvent('dashboard-fetch-end', this.dashboardFetched.bind(this), $rootScope);\r\n    $rootScope.onAppEvent('dashboard-initialized', this.dashboardInitialized.bind(this), $rootScope);\r\n    $rootScope.onAppEvent('panel-initialized', this.panelInitialized.bind(this), $rootScope);\r\n  }\r\n\r\n  refresh() {\r\n    this.timings.query = 0;\r\n    this.timings.render = 0;\r\n\r\n    setTimeout(() => {\r\n      console.log('panel count: ' + this.panelsInitCount);\r\n      console.log('total query: ' + this.timings.query);\r\n      console.log('total render: ' + this.timings.render);\r\n      console.log('avg render: ' + this.timings.render / this.panelsInitCount);\r\n    }, 5000);\r\n  }\r\n\r\n  dashboardFetched() {\r\n    this.timings.dashboardLoadStart = new Date().getTime();\r\n    this.panelsInitCount = 0;\r\n    this.digestCounter = 0;\r\n    this.panelsInitCount = 0;\r\n    this.panelsRendered = 0;\r\n    this.timings.query = 0;\r\n    this.timings.render = 0;\r\n  }\r\n\r\n  dashboardInitialized() {\r\n    setTimeout(() => {\r\n      console.log('Dashboard::Performance Total Digests: ' + this.digestCounter);\r\n      console.log('Dashboard::Performance Total Watchers: ' + this.getTotalWatcherCount());\r\n      console.log('Dashboard::Performance Total ScopeCount: ' + this.scopeCount);\r\n\r\n      const timeTaken = this.timings.lastPanelInitializedAt - this.timings.dashboardLoadStart;\r\n      console.log('Dashboard::Performance All panels initialized in ' + timeTaken + ' ms');\r\n\r\n      // measure digest performance\r\n      const rootDigestStart = window.performance.now();\r\n      for (let i = 0; i < 30; i++) {\r\n        this.$rootScope.$apply();\r\n      }\r\n\r\n      console.log('Dashboard::Performance Root Digest ' + (window.performance.now() - rootDigestStart) / 30);\r\n    }, 3000);\r\n  }\r\n\r\n  getTotalWatcherCount() {\r\n    let count = 0;\r\n    let scopes = 0;\r\n    const root = $(document.getElementsByTagName('body'));\r\n\r\n    const f = element => {\r\n      if (element.data().hasOwnProperty('$scope')) {\r\n        scopes++;\r\n        angular.forEach(element.data().$scope.$$watchers, () => {\r\n          count++;\r\n        });\r\n      }\r\n\r\n      angular.forEach(element.children(), childElement => {\r\n        f($(childElement));\r\n      });\r\n    };\r\n\r\n    f(root);\r\n    this.scopeCount = scopes;\r\n    return count;\r\n  }\r\n\r\n  renderingCompleted(panelId, panelTimings) {\r\n    // add render counter to root scope\r\n    // used by phantomjs render.js to know when panel has rendered\r\n    this.panelsRendered = (this.panelsRendered || 0) + 1;\r\n\r\n    // this window variable is used by backend rendering tools to know\r\n    // all panels have completed rendering\r\n    this.window.panelsRendered = this.panelsRendered;\r\n\r\n    if (this.enabled) {\r\n      panelTimings.renderEnd = new Date().getTime();\r\n      this.timings.query += panelTimings.queryEnd - panelTimings.queryStart;\r\n      this.timings.render += panelTimings.renderEnd - panelTimings.renderStart;\r\n    }\r\n  }\r\n\r\n  panelInitialized() {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n\r\n    this.panelsInitCount++;\r\n    this.timings.lastPanelInitializedAt = new Date().getTime();\r\n  }\r\n}\r\n\r\nconst profiler = new Profiler();\r\nexport { profiler };\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nexport class SearchResult extends React.Component<any, any> {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      search: '',\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return this.state.search.sections.map(section => {\r\n      return <SearchResultSection section={section} key={section.id} />;\r\n    });\r\n  }\r\n}\r\n\r\nexport interface SectionProps {\r\n  section: any;\r\n}\r\n\r\nexport class SearchResultSection extends React.Component<SectionProps, any> {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  renderItem(item) {\r\n    return (\r\n      <a className=\"search-item\" href={item.url} key={item.id}>\r\n        <span className=\"search-item__icon\">\r\n          <i className=\"fa fa-th-large\" />\r\n        </span>\r\n        <span className=\"search-item__body\">\r\n          <div className=\"search-item__body-title\">{item.title}</div>\r\n        </span>\r\n      </a>\r\n    );\r\n  }\r\n\r\n  toggleSection = () => {\r\n    this.props.section.toggle();\r\n  };\r\n\r\n  render() {\r\n    const collapseClassNames = classNames({\r\n      fa: true,\r\n      'fa-plus': !this.props.section.expanded,\r\n      'fa-minus': this.props.section.expanded,\r\n      'search-section__header__toggle': true,\r\n    });\r\n\r\n    return (\r\n      <div className=\"search-section\" key={this.props.section.id}>\r\n        <div className=\"search-section__header\">\r\n          <i className={classNames('search-section__header__icon', this.props.section.icon)} />\r\n          <span className=\"search-section__header__text\">{this.props.section.title}</span>\r\n          <i className={collapseClassNames} onClick={this.toggleSection} />\r\n        </div>\r\n        {this.props.section.expanded && (\r\n          <div className=\"search-section__items\">{this.props.section.items.map(this.renderItem)}</div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport interface Props {\r\n  password: string;\r\n}\r\n\r\nexport class PasswordStrength extends React.Component<Props, any> {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { password } = this.props;\r\n    let strengthText = 'strength: strong like a bull.';\r\n    let strengthClass = 'password-strength-good';\r\n\r\n    if (!password) {\r\n      return null;\r\n    }\r\n\r\n    if (password.length <= 8) {\r\n      strengthText = 'strength: you can do better.';\r\n      strengthClass = 'password-strength-ok';\r\n    }\r\n\r\n    if (password.length < 4) {\r\n      strengthText = 'strength: weak sauce.';\r\n      strengthClass = 'password-strength-bad';\r\n    }\r\n\r\n    return (\r\n      <div className={`password-strength small ${strengthClass}`}>\r\n        <em>{strengthText}</em>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { components } from 'react-select';\r\nimport { OptionProps } from 'react-select/lib/components/Option';\r\nimport { TagBadge } from './TagBadge';\r\n\r\n// https://github.com/JedWatson/react-select/issues/3038\r\ninterface ExtendedOptionProps extends OptionProps<any> {\r\n  data: any;\r\n}\r\n\r\nexport const TagOption = (props: ExtendedOptionProps) => {\r\n  const { data, className, label } = props;\r\n  return (\r\n    <components.Option {...props}>\r\n      <div className={`tag-filter-option btn btn-link ${className || ''}`}>\r\n        <TagBadge label={label} removeIcon={false} count={data.count} />\r\n      </div>\r\n    </components.Option>\r\n  );\r\n};\r\n\r\nexport default TagOption;\r\n","import React from 'react';\r\nimport AsyncSelect from 'react-select/lib/Async';\r\nimport { TagOption } from './TagOption';\r\nimport { TagBadge } from './TagBadge';\r\nimport IndicatorsContainer from 'app/core/components/Picker/IndicatorsContainer';\r\nimport NoOptionsMessage from 'app/core/components/Picker/NoOptionsMessage';\r\nimport { components } from 'react-select';\r\nimport ResetStyles from 'app/core/components/Picker/ResetStyles';\r\n\r\nexport interface Props {\r\n  tags: string[];\r\n  tagOptions: () => any;\r\n  onSelect: (tag: string) => void;\r\n}\r\n\r\nexport class TagFilter extends React.Component<Props, any> {\r\n  inlineTags: boolean;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.searchTags = this.searchTags.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  searchTags(query) {\r\n    return this.props.tagOptions().then(options => {\r\n      return options.map(option => ({\r\n        value: option.term,\r\n        label: option.term,\r\n        count: option.count,\r\n      }));\r\n    });\r\n  }\r\n\r\n  onChange(newTags) {\r\n    this.props.onSelect(newTags);\r\n  }\r\n\r\n  render() {\r\n    const selectOptions = {\r\n      classNamePrefix: 'gf-form-select-box',\r\n      isMulti: true,\r\n      defaultOptions: true,\r\n      loadOptions: this.searchTags,\r\n      onChange: this.onChange,\r\n      className: 'gf-form-input gf-form-input--form-dropdown',\r\n      placeholder: 'Tags',\r\n      loadingMessage: () => 'Loading...',\r\n      noOptionsMessage: () => 'No tags found',\r\n      getOptionValue: i => i.value,\r\n      getOptionLabel: i => i.label,\r\n      value: this.props.tags,\r\n      styles: ResetStyles,\r\n      components: {\r\n        Option: TagOption,\r\n        IndicatorsContainer,\r\n        NoOptionsMessage,\r\n        MultiValueLabel: () => {\r\n          return null; // We want the whole tag to be clickable so we use MultiValueRemove instead\r\n        },\r\n        MultiValueRemove: props => {\r\n          const { data } = props;\r\n\r\n          return (\r\n            <components.MultiValueRemove {...props}>\r\n              <TagBadge key={data.label} label={data.label} removeIcon={true} count={data.count} />\r\n            </components.MultiValueRemove>\r\n          );\r\n        },\r\n      },\r\n    };\r\n\r\n    return (\r\n      <div className=\"gf-form gf-form--has-input-icon gf-form--grow\">\r\n        <div className=\"tag-filter\">\r\n          <AsyncSelect {...selectOptions} />\r\n        </div>\r\n        <i className=\"gf-form-input-icon fa fa-tag\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { SFC } from 'react';\r\n\r\nexport interface Props {\r\n  child: any;\r\n}\r\n\r\nconst DropDownChild: SFC<Props> = props => {\r\n  const { child } = props;\r\n  const listItemClassName = child.divider ? 'divider' : '';\r\n\r\n  return (\r\n    <li className={listItemClassName}>\r\n      <a href={child.url}>\r\n        {child.icon && <i className={child.icon} />}\r\n        {child.text}\r\n      </a>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default DropDownChild;\r\n","import React, { SFC } from 'react';\r\nimport DropDownChild from './DropDownChild';\r\n\r\ninterface Props {\r\n  link: any;\r\n}\r\n\r\nconst SideMenuDropDown: SFC<Props> = props => {\r\n  const { link } = props;\r\n  return (\r\n    <ul className=\"dropdown-menu dropdown-menu--sidemenu\" role=\"menu\">\r\n      <li className=\"side-menu-header\">\r\n        <span className=\"sidemenu-item-text\">{link.text}</span>\r\n      </li>\r\n      {link.children &&\r\n        link.children.map((child, index) => {\r\n          return <DropDownChild child={child} key={`${child.url}-${index}`} />;\r\n        })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default SideMenuDropDown;\r\n","import React, { SFC } from 'react';\r\nimport SideMenuDropDown from './SideMenuDropDown';\r\n\r\nexport interface Props {\r\n  link: any;\r\n}\r\n\r\nconst TopSectionItem: SFC<Props> = props => {\r\n  const { link } = props;\r\n  return (\r\n    <div className=\"sidemenu-item dropdown\">\r\n      <a className=\"sidemenu-link\" href={link.url} target={link.target}>\r\n        <span className=\"icon-circle sidemenu-icon\">\r\n          <i className={link.icon} />\r\n          {link.img && <img src={link.img} />}\r\n        </span>\r\n      </a>\r\n      {link.children && <SideMenuDropDown link={link} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopSectionItem;\r\n","import React, { SFC } from 'react';\r\nimport _ from 'lodash';\r\nimport TopSectionItem from './TopSectionItem';\r\nimport config from '../../config';\r\n\r\nconst TopSection: SFC<any> = () => {\r\n  const navTree = _.cloneDeep(config.bootData.navTree);\r\n  const mainLinks = _.filter(navTree, item => !item.hideFromMenu);\r\n\r\n  return (\r\n    <div className=\"sidemenu__top\">\r\n      {mainLinks.map((link, index) => {\r\n        return <TopSectionItem link={link} key={`${link.id}-${index}`} />;\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopSection;\r\n","import React, { SFC } from 'react';\r\n\r\nconst SignIn: SFC<any> = () => {\r\n  const loginUrl = `login?redirect=${encodeURIComponent(window.location.pathname)}`;\r\n  return (\r\n    <div className=\"sidemenu-item\">\r\n      <a href={loginUrl} className=\"sidemenu-link\" target=\"_self\">\r\n        <span className=\"icon-circle sidemenu-icon\">\r\n          <i className=\"fa fa-fw fa-sign-in\" />\r\n        </span>\r\n      </a>\r\n      <a href={loginUrl} target=\"_self\">\r\n        <ul className=\"dropdown-menu dropdown-menu--sidemenu\" role=\"menu\">\r\n          <li className=\"side-menu-header\">\r\n            <span className=\"sidemenu-item-text\">Sign In</span>\r\n          </li>\r\n        </ul>\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n","import React, { PureComponent } from 'react';\r\nimport appEvents from '../../app_events';\r\nimport { User } from '../../services/context_srv';\r\n\r\nexport interface Props {\r\n  link: any;\r\n  user: User;\r\n}\r\n\r\nclass BottomNavLinks extends PureComponent<Props> {\r\n  itemClicked = (event, child) => {\r\n    if (child.url === '/shortcuts') {\r\n      event.preventDefault();\r\n      appEvents.emit('show-modal', {\r\n        templateHtml: '<help-modal></help-modal>',\r\n      });\r\n    }\r\n  };\r\n\r\n  switchOrg = () => {\r\n    appEvents.emit('show-modal', {\r\n      templateHtml: '<org-switcher dismiss=\"dismiss()\"></org-switcher>',\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { link, user } = this.props;\r\n    return (\r\n      <div className=\"sidemenu-item dropdown dropup\">\r\n        <a href={link.url} className=\"sidemenu-link\" target={link.target}>\r\n          <span className=\"icon-circle sidemenu-icon\">\r\n            {link.icon && <i className={link.icon} />}\r\n            {link.img && <img src={link.img} />}\r\n          </span>\r\n        </a>\r\n        <ul className=\"dropdown-menu dropdown-menu--sidemenu\" role=\"menu\">\r\n          {link.subTitle && (\r\n            <li className=\"sidemenu-subtitle\">\r\n              <span className=\"sidemenu-item-text\">{link.subTitle}</span>\r\n            </li>\r\n          )}\r\n          {link.showOrgSwitcher && (\r\n            <li className=\"sidemenu-org-switcher\">\r\n              <a onClick={this.switchOrg}>\r\n                <div>\r\n                  <div className=\"sidemenu-org-switcher__org-name\">{user.orgName}</div>\r\n                  <div className=\"sidemenu-org-switcher__org-current\">Current Org:</div>\r\n                </div>\r\n                <div className=\"sidemenu-org-switcher__switch\">\r\n                  <i className=\"fa fa-fw fa-random\" />Switch\r\n                </div>\r\n              </a>\r\n            </li>\r\n          )}\r\n          {link.children &&\r\n            link.children.map((child, index) => {\r\n              if (!child.hideFromMenu) {\r\n                return (\r\n                  <li className={child.divider} key={`${child.text}-${index}`}>\r\n                    <a href={child.url} target={child.target} onClick={event => this.itemClicked(event, child)}>\r\n                      {child.icon && <i className={child.icon} />}\r\n                      {child.text}\r\n                    </a>\r\n                  </li>\r\n                );\r\n              }\r\n              return null;\r\n            })}\r\n          <li className=\"side-menu-header\">\r\n            <span className=\"sidemenu-item-text\">{link.text}</span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BottomNavLinks;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport SignIn from './SignIn';\r\nimport BottomNavLinks from './BottomNavLinks';\r\nimport { contextSrv } from 'app/core/services/context_srv';\r\nimport config from '../../config';\r\n\r\nexport default function BottomSection() {\r\n  const navTree = _.cloneDeep(config.bootData.navTree);\r\n  const bottomNav = _.filter(navTree, item => item.hideFromMenu);\r\n  const isSignedIn = contextSrv.isSignedIn;\r\n  const user = contextSrv.user;\r\n\r\n  if (user && user.orgCount > 1) {\r\n    const profileNode = _.find(bottomNav, { id: 'profile' });\r\n    if (profileNode) {\r\n      profileNode.showOrgSwitcher = true;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"sidemenu__bottom\">\r\n      {!isSignedIn && <SignIn />}\r\n      {bottomNav.map((link, index) => {\r\n        return <BottomNavLinks link={link} user={user} key={`${link.url}-${index}`} />;\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import { react2AngularDirective } from 'app/core/utils/react2angular';\r\nimport { PasswordStrength } from './components/PasswordStrength';\r\nimport PageHeader from './components/PageHeader/PageHeader';\r\nimport EmptyListCTA from './components/EmptyListCTA/EmptyListCTA';\r\nimport { SearchResult } from './components/search/SearchResult';\r\nimport { TagFilter } from './components/TagFilter/TagFilter';\r\nimport { SideMenu } from './components/sidemenu/SideMenu';\r\n\r\nexport function registerAngularDirectives() {\r\n  react2AngularDirective('passwordStrength', PasswordStrength, ['password']);\r\n  react2AngularDirective('sidemenu', SideMenu, []);\r\n  react2AngularDirective('pageHeader', PageHeader, ['model', 'noTabs']);\r\n  react2AngularDirective('emptyListCta', EmptyListCTA, ['model']);\r\n  react2AngularDirective('searchResult', SearchResult, []);\r\n  react2AngularDirective('tagFilter', TagFilter, [\r\n    'tags',\r\n    ['onSelect', { watchDepth: 'reference' }],\r\n    ['tagOptions', { watchDepth: 'reference' }],\r\n  ]);\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport appEvents from '../../app_events';\r\nimport { contextSrv } from 'app/core/services/context_srv';\r\nimport TopSection from './TopSection';\r\nimport BottomSection from './BottomSection';\r\n\r\nexport class SideMenu extends PureComponent {\r\n  toggleSideMenu = () => {\r\n    contextSrv.toggleSideMenu();\r\n    appEvents.emit('toggle-sidemenu');\r\n  };\r\n\r\n  toggleSideMenuSmallBreakpoint = () => {\r\n    appEvents.emit('toggle-sidemenu-mobile');\r\n  };\r\n\r\n  render() {\r\n    return [\r\n      <div className=\"sidemenu__logo\" onClick={this.toggleSideMenu} key=\"logo\">\r\n        <img src=\"public/img/grafana_icon.svg\" alt=\"Grafana\" />\r\n      </div>,\r\n      <div className=\"sidemenu__logo_small_breakpoint\" onClick={this.toggleSideMenuSmallBreakpoint} key=\"hamburger\">\r\n        <i className=\"fa fa-bars\" />\r\n        <span className=\"sidemenu__close\">\r\n          <i className=\"fa fa-times\" />&nbsp;Close\r\n        </span>\r\n      </div>,\r\n      <TopSection key=\"topsection\" />,\r\n      <BottomSection key=\"bottomsection\" />,\r\n    ];\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport coreModule from '../../core_module';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class SearchResultsCtrl {\r\n  results: any;\r\n  onSelectionChanged: any;\r\n  onTagSelected: any;\r\n  onFolderExpanding: any;\r\n  editable: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private $location) {}\r\n\r\n  toggleFolderExpand(section) {\r\n    if (section.toggle) {\r\n      if (!section.expanded && this.onFolderExpanding) {\r\n        this.onFolderExpanding();\r\n      }\r\n\r\n      section.toggle(section).then(f => {\r\n        if (this.editable && f.expanded) {\r\n          if (f.items) {\r\n            _.each(f.items, i => {\r\n              i.checked = f.checked;\r\n            });\r\n\r\n            if (this.onSelectionChanged) {\r\n              this.onSelectionChanged();\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  navigateToFolder(section, evt) {\r\n    this.$location.path(section.url);\r\n\r\n    if (evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n  }\r\n\r\n  toggleSelection(item, evt) {\r\n    item.checked = !item.checked;\r\n\r\n    if (item.items) {\r\n      _.each(item.items, i => {\r\n        i.checked = item.checked;\r\n      });\r\n    }\r\n\r\n    if (this.onSelectionChanged) {\r\n      this.onSelectionChanged();\r\n    }\r\n\r\n    if (evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n  }\r\n\r\n  onItemClick(item) {\r\n    //Check if one string can be found in the other\r\n    if (this.$location.path().indexOf(item.url) > -1 || item.url.indexOf(this.$location.path()) > -1) {\r\n      appEvents.emit('hide-dash-search');\r\n    }\r\n  }\r\n\r\n  selectTag(tag, evt) {\r\n    if (this.onTagSelected) {\r\n      this.onTagSelected({ $tag: tag });\r\n    }\r\n\r\n    if (evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n  }\r\n}\r\n\r\nexport function searchResultsDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/core/components/search/search_results.html',\r\n    controller: SearchResultsCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      editable: '@',\r\n      results: '=',\r\n      onSelectionChanged: '&',\r\n      onTagSelected: '&',\r\n      onFolderExpanding: '&',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('dashboardSearchResults', searchResultsDirective);\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\nimport { SearchSrv } from 'app/core/services/search_srv';\r\n\r\nclass Query {\r\n  query: string;\r\n  mode: string;\r\n  tag: any[];\r\n  starred: boolean;\r\n  skipRecent: boolean;\r\n  skipStarred: boolean;\r\n  folderIds: number[];\r\n}\r\n\r\nexport class ManageDashboardsCtrl {\r\n  sections: any[];\r\n\r\n  query: Query;\r\n  navModel: any;\r\n\r\n  selectAllChecked = false;\r\n\r\n  // enable/disable actions depending on the folders or dashboards selected\r\n  canDelete = false;\r\n  canMove = false;\r\n\r\n  // filter variables\r\n  hasFilters = false;\r\n  tagFilterOptions: any[];\r\n  selectedTagFilter: any;\r\n  starredFilterOptions = [{ text: 'Filter by Starred', disabled: true }, { text: 'Yes' }, { text: 'No' }];\r\n  selectedStarredFilter: any;\r\n\r\n  // used when managing dashboards for a specific folder\r\n  folderId?: number;\r\n  folderUid?: string;\r\n\r\n  // if user can add new folders and/or add new dashboards\r\n  canSave = false;\r\n\r\n  // if user has editor role or higher\r\n  isEditor: boolean;\r\n\r\n  hasEditPermissionInFolders: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, navModelSrv, private searchSrv: SearchSrv, private contextSrv) {\r\n    this.isEditor = this.contextSrv.isEditor;\r\n    this.hasEditPermissionInFolders = this.contextSrv.hasEditPermissionInFolders;\r\n\r\n    this.query = {\r\n      query: '',\r\n      mode: 'tree',\r\n      tag: [],\r\n      starred: false,\r\n      skipRecent: true,\r\n      skipStarred: true,\r\n      folderIds: [],\r\n    };\r\n\r\n    if (this.folderId) {\r\n      this.query.folderIds = [this.folderId];\r\n    }\r\n\r\n    this.selectedStarredFilter = this.starredFilterOptions[0];\r\n\r\n    this.refreshList().then(() => {\r\n      this.initTagFilter();\r\n    });\r\n  }\r\n\r\n  refreshList() {\r\n    return this.searchSrv\r\n      .search(this.query)\r\n      .then(result => {\r\n        return this.initDashboardList(result);\r\n      })\r\n      .then(() => {\r\n        if (!this.folderUid) {\r\n          return;\r\n        }\r\n\r\n        return this.backendSrv.getFolderByUid(this.folderUid).then(folder => {\r\n          this.canSave = folder.canSave;\r\n          if (!this.canSave) {\r\n            this.hasEditPermissionInFolders = false;\r\n          }\r\n        });\r\n      });\r\n  }\r\n\r\n  initDashboardList(result: any) {\r\n    this.canMove = false;\r\n    this.canDelete = false;\r\n    this.selectAllChecked = false;\r\n    this.hasFilters = this.query.query.length > 0 || this.query.tag.length > 0 || this.query.starred;\r\n\r\n    if (!result) {\r\n      this.sections = [];\r\n      return;\r\n    }\r\n\r\n    this.sections = result;\r\n\r\n    for (const section of this.sections) {\r\n      section.checked = false;\r\n\r\n      for (const dashboard of section.items) {\r\n        dashboard.checked = false;\r\n      }\r\n    }\r\n\r\n    if (this.folderId && this.sections.length > 0) {\r\n      this.sections[0].hideHeader = true;\r\n    }\r\n  }\r\n\r\n  selectionChanged() {\r\n    let selectedDashboards = 0;\r\n\r\n    for (const section of this.sections) {\r\n      selectedDashboards += _.filter(section.items, { checked: true }).length;\r\n    }\r\n\r\n    const selectedFolders = _.filter(this.sections, { checked: true }).length;\r\n    this.canMove = selectedDashboards > 0;\r\n    this.canDelete = selectedDashboards > 0 || selectedFolders > 0;\r\n  }\r\n\r\n  getFoldersAndDashboardsToDelete() {\r\n    const selectedDashboards = {\r\n      folders: [],\r\n      dashboards: [],\r\n    };\r\n\r\n    for (const section of this.sections) {\r\n      if (section.checked && section.id !== 0) {\r\n        selectedDashboards.folders.push(section.uid);\r\n      } else {\r\n        const selected = _.filter(section.items, { checked: true });\r\n        selectedDashboards.dashboards.push(..._.map(selected, 'uid'));\r\n      }\r\n    }\r\n\r\n    return selectedDashboards;\r\n  }\r\n\r\n  getFolderIds(sections) {\r\n    const ids = [];\r\n    for (const s of sections) {\r\n      if (s.checked) {\r\n        ids.push(s.id);\r\n      }\r\n    }\r\n    return ids;\r\n  }\r\n\r\n  delete() {\r\n    const data = this.getFoldersAndDashboardsToDelete();\r\n    const folderCount = data.folders.length;\r\n    const dashCount = data.dashboards.length;\r\n    let text = 'Do you want to delete the ';\r\n    let text2;\r\n\r\n    if (folderCount > 0 && dashCount > 0) {\r\n      text += `selected folder${folderCount === 1 ? '' : 's'} and dashboard${dashCount === 1 ? '' : 's'}?`;\r\n      text2 = `All dashboards of the selected folder${folderCount === 1 ? '' : 's'} will also be deleted`;\r\n    } else if (folderCount > 0) {\r\n      text += `selected folder${folderCount === 1 ? '' : 's'} and all its dashboards?`;\r\n    } else {\r\n      text += `selected dashboard${dashCount === 1 ? '' : 's'}?`;\r\n    }\r\n\r\n    appEvents.emit('confirm-modal', {\r\n      title: 'Delete',\r\n      text: text,\r\n      text2: text2,\r\n      icon: 'fa-trash',\r\n      yesText: 'Delete',\r\n      onConfirm: () => {\r\n        this.deleteFoldersAndDashboards(data.folders, data.dashboards);\r\n      },\r\n    });\r\n  }\r\n\r\n  private deleteFoldersAndDashboards(folderUids, dashboardUids) {\r\n    this.backendSrv.deleteFoldersAndDashboards(folderUids, dashboardUids).then(() => {\r\n      this.refreshList();\r\n    });\r\n  }\r\n\r\n  getDashboardsToMove() {\r\n    const selectedDashboards = [];\r\n\r\n    for (const section of this.sections) {\r\n      const selected = _.filter(section.items, { checked: true });\r\n      selectedDashboards.push(..._.map(selected, 'uid'));\r\n    }\r\n\r\n    return selectedDashboards;\r\n  }\r\n\r\n  moveTo() {\r\n    const selectedDashboards = this.getDashboardsToMove();\r\n\r\n    const template =\r\n      '<move-to-folder-modal dismiss=\"dismiss()\" ' +\r\n      'dashboards=\"model.dashboards\" after-save=\"model.afterSave()\">' +\r\n      '</move-to-folder-modal>';\r\n    appEvents.emit('show-modal', {\r\n      templateHtml: template,\r\n      modalClass: 'modal--narrow',\r\n      model: {\r\n        dashboards: selectedDashboards,\r\n        afterSave: this.refreshList.bind(this),\r\n      },\r\n    });\r\n  }\r\n\r\n  initTagFilter() {\r\n    return this.searchSrv.getDashboardTags().then(results => {\r\n      this.tagFilterOptions = [{ term: 'Filter By Tag', disabled: true }].concat(results);\r\n      this.selectedTagFilter = this.tagFilterOptions[0];\r\n    });\r\n  }\r\n\r\n  filterByTag(tag) {\r\n    if (_.indexOf(this.query.tag, tag) === -1) {\r\n      this.query.tag.push(tag);\r\n    }\r\n\r\n    return this.refreshList();\r\n  }\r\n\r\n  onQueryChange() {\r\n    return this.refreshList();\r\n  }\r\n\r\n  onTagFilterChange() {\r\n    const res = this.filterByTag(this.selectedTagFilter.term);\r\n    this.selectedTagFilter = this.tagFilterOptions[0];\r\n    return res;\r\n  }\r\n\r\n  removeTag(tag, evt) {\r\n    this.query.tag = _.without(this.query.tag, tag);\r\n    this.refreshList();\r\n    if (evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n  }\r\n\r\n  removeStarred() {\r\n    this.query.starred = false;\r\n    return this.refreshList();\r\n  }\r\n\r\n  onStarredFilterChange() {\r\n    this.query.starred = this.selectedStarredFilter.text === 'Yes';\r\n    this.selectedStarredFilter = this.starredFilterOptions[0];\r\n    return this.refreshList();\r\n  }\r\n\r\n  onSelectAllChanged() {\r\n    for (const section of this.sections) {\r\n      if (!section.hideHeader) {\r\n        section.checked = this.selectAllChecked;\r\n      }\r\n\r\n      section.items = _.map(section.items, item => {\r\n        item.checked = this.selectAllChecked;\r\n        return item;\r\n      });\r\n    }\r\n\r\n    this.selectionChanged();\r\n  }\r\n\r\n  clearFilters() {\r\n    this.query.query = '';\r\n    this.query.tag = [];\r\n    this.query.starred = false;\r\n    this.refreshList();\r\n  }\r\n\r\n  createDashboardUrl() {\r\n    let url = 'dashboard/new';\r\n\r\n    if (this.folderId) {\r\n      url += `?folderId=${this.folderId}`;\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  importDashboardUrl() {\r\n    let url = 'dashboard/import';\r\n\r\n    if (this.folderId) {\r\n      url += `?folderId=${this.folderId}`;\r\n    }\r\n\r\n    return url;\r\n  }\r\n}\r\n\r\nexport function manageDashboardsDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/core/components/manage_dashboards/manage_dashboards.html',\r\n    controller: ManageDashboardsCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      folderId: '=',\r\n      folderUid: '=',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('manageDashboards', manageDashboardsDirective);\r\n","import './directives/dash_class';\r\nimport './directives/dropdown_typeahead';\r\nimport './directives/metric_segment';\r\nimport './directives/misc';\r\nimport './directives/ng_model_on_blur';\r\nimport './directives/tags';\r\nimport './directives/value_select_dropdown';\r\nimport './directives/rebuild_on_change';\r\nimport './directives/give_focus';\r\nimport './directives/diff-view';\r\nimport './jquery_extended';\r\nimport './partials';\r\nimport './components/jsontree/jsontree';\r\nimport './components/code_editor/code_editor';\r\nimport './utils/outline';\r\nimport './components/colorpicker/ColorPicker';\r\nimport './components/colorpicker/SeriesColorPicker';\r\nimport './components/colorpicker/spectrum_picker';\r\nimport './services/search_srv';\r\nimport './services/ng_react';\r\n\r\nimport { searchDirective } from './components/search/search';\r\nimport { infoPopover } from './components/info_popover';\r\nimport { navbarDirective } from './components/navbar/navbar';\r\nimport { arrayJoin } from './directives/array_join';\r\nimport { liveSrv } from './live/live_srv';\r\nimport { Emitter } from './utils/emitter';\r\nimport { layoutSelector } from './components/layout_selector/layout_selector';\r\nimport { switchDirective } from './components/switch';\r\nimport { dashboardSelector } from './components/dashboard_selector';\r\nimport { queryPartEditorDirective } from './components/query_part/query_part_editor';\r\nimport { sqlPartEditorDirective } from './components/sql_part/sql_part_editor';\r\nimport { formDropdownDirective } from './components/form_dropdown/form_dropdown';\r\nimport 'app/core/controllers/all';\r\nimport 'app/core/services/all';\r\nimport './filters/filters';\r\nimport coreModule from './core_module';\r\nimport appEvents from './app_events';\r\nimport colors from './utils/colors';\r\nimport { assignModelProperties } from './utils/model_utils';\r\nimport { contextSrv } from './services/context_srv';\r\nimport { KeybindingSrv } from './services/keybindingSrv';\r\nimport { helpModal } from './components/help/help';\r\nimport { JsonExplorer } from './components/json_explorer/json_explorer';\r\nimport { NavModelSrv, NavModel } from './nav_model_srv';\r\nimport { geminiScrollbar } from './components/scroll/scroll';\r\nimport { pageScrollbar } from './components/scroll/page_scroll';\r\nimport { gfPageDirective } from './components/gf_page';\r\nimport { orgSwitcher } from './components/org_switcher';\r\nimport { profiler } from './profiler';\r\nimport { registerAngularDirectives } from './angular_wrappers';\r\nimport { updateLegendValues } from './time_series2';\r\nimport TimeSeries from './time_series2';\r\nimport { searchResultsDirective } from './components/search/search_results';\r\nimport { manageDashboardsDirective } from './components/manage_dashboards/manage_dashboards';\r\n\r\nexport {\r\n  profiler,\r\n  registerAngularDirectives,\r\n  arrayJoin,\r\n  coreModule,\r\n  navbarDirective,\r\n  searchDirective,\r\n  liveSrv,\r\n  layoutSelector,\r\n  switchDirective,\r\n  infoPopover,\r\n  Emitter,\r\n  appEvents,\r\n  dashboardSelector,\r\n  queryPartEditorDirective,\r\n  sqlPartEditorDirective,\r\n  colors,\r\n  formDropdownDirective,\r\n  assignModelProperties,\r\n  contextSrv,\r\n  KeybindingSrv,\r\n  helpModal,\r\n  JsonExplorer,\r\n  NavModelSrv,\r\n  NavModel,\r\n  geminiScrollbar,\r\n  pageScrollbar,\r\n  gfPageDirective,\r\n  orgSwitcher,\r\n  manageDashboardsDirective,\r\n  TimeSeries,\r\n  updateLegendValues,\r\n  searchResultsDirective,\r\n};\r\n","import coreModule from 'app/core/core_module';\r\nimport locationUtil from 'app/core/utils/location_util';\r\n\r\nexport class LoadDashboardCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $routeParams, dashboardLoaderSrv, backendSrv, $location, $browser) {\r\n    $scope.appEvent('dashboard-fetch-start');\r\n\r\n    if (!$routeParams.uid && !$routeParams.slug) {\r\n      backendSrv.get('/api/dashboards/home').then(homeDash => {\r\n        if (homeDash.redirectUri) {\r\n          const newUrl = locationUtil.stripBaseFromUrl(homeDash.redirectUri);\r\n          $location.path(newUrl);\r\n        } else {\r\n          const meta = homeDash.meta;\r\n          meta.canSave = meta.canShare = meta.canStar = false;\r\n          $scope.initDashboard(homeDash, $scope);\r\n        }\r\n      });\r\n      return;\r\n    }\r\n\r\n    // if no uid, redirect to new route based on slug\r\n    if (!($routeParams.type === 'script' || $routeParams.type === 'snapshot') && !$routeParams.uid) {\r\n      backendSrv.getDashboardBySlug($routeParams.slug).then(res => {\r\n        if (res) {\r\n          $location.path(locationUtil.stripBaseFromUrl(res.meta.url)).replace();\r\n        }\r\n      });\r\n      return;\r\n    }\r\n\r\n    dashboardLoaderSrv.loadDashboard($routeParams.type, $routeParams.slug, $routeParams.uid).then(result => {\r\n      if (result.meta.url) {\r\n        const url = locationUtil.stripBaseFromUrl(result.meta.url);\r\n\r\n        if (url !== $location.path()) {\r\n          // replace url to not create additional history items and then return so that initDashboard below isn't executed multiple times.\r\n          $location.path(url).replace();\r\n          return;\r\n        }\r\n      }\r\n\r\n      result.meta.autofitpanels = $routeParams.autofitpanels;\r\n      result.meta.kiosk = $routeParams.kiosk;\r\n\r\n      $scope.initDashboard(result, $scope);\r\n    });\r\n  }\r\n}\r\n\r\nexport class NewDashboardCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $routeParams) {\r\n    $scope.initDashboard(\r\n      {\r\n        meta: {\r\n          canStar: false,\r\n          canShare: false,\r\n          isNew: true,\r\n          folderId: Number($routeParams.folderId),\r\n        },\r\n        dashboard: {\r\n          title: 'New dashboard',\r\n          panels: [\r\n            {\r\n              type: 'add-panel',\r\n              gridPos: { x: 0, y: 0, w: 12, h: 9 },\r\n              title: 'Panel Title',\r\n            },\r\n          ],\r\n        },\r\n      },\r\n      $scope\r\n    );\r\n  }\r\n}\r\n\r\ncoreModule.controller('LoadDashboardCtrl', LoadDashboardCtrl);\r\ncoreModule.controller('NewDashboardCtrl', NewDashboardCtrl);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport coreModule from 'app/core/core_module';\r\nimport { store } from 'app/store/configureStore';\r\nimport { BackendSrv } from 'app/core/services/backend_srv';\r\nimport { DatasourceSrv } from 'app/features/plugins/datasource_srv';\r\nimport { ContextSrv } from 'app/core/services/context_srv';\r\n\r\nfunction WrapInProvider(store, Component, props) {\r\n  return (\r\n    <Provider store={store}>\r\n      <Component {...props} />\r\n    </Provider>\r\n  );\r\n}\r\n\r\n/** @ngInject */\r\nexport function reactContainer(\r\n  $route,\r\n  $location,\r\n  backendSrv: BackendSrv,\r\n  datasourceSrv: DatasourceSrv,\r\n  contextSrv: ContextSrv\r\n) {\r\n  return {\r\n    restrict: 'E',\r\n    template: '',\r\n    link(scope, elem) {\r\n      // Check permissions for this component\r\n      const { roles } = $route.current.locals;\r\n      if (roles && roles.length) {\r\n        if (!roles.some(r => contextSrv.hasRole(r))) {\r\n          $location.url('/');\r\n        }\r\n      }\r\n\r\n      let { component } = $route.current.locals;\r\n      // Dynamic imports return whole module, need to extract default export\r\n      if (component.default) {\r\n        component = component.default;\r\n      }\r\n\r\n      const props = {\r\n        backendSrv: backendSrv,\r\n        datasourceSrv: datasourceSrv,\r\n        routeParams: $route.current.params,\r\n      };\r\n\r\n      ReactDOM.render(WrapInProvider(store, component, props), elem[0]);\r\n\r\n      scope.$on('$destroy', () => {\r\n        ReactDOM.unmountComponentAtNode(elem[0]);\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('reactContainer', reactContainer);\r\n","interface RegisterRoutesHandler {\r\n  ($routeProvider): any;\r\n}\r\n\r\nconst handlers: RegisterRoutesHandler[] = [];\r\n\r\nexport function applyRouteRegistrationHandlers($routeProvider) {\r\n  for (const handler of handlers) {\r\n    handler($routeProvider);\r\n  }\r\n}\r\n\r\nexport function addRouteRegistrationHandler(fn: RegisterRoutesHandler) {\r\n  handlers.push(fn);\r\n}\r\n","import './dashboard_loaders';\r\nimport './ReactContainer';\r\nimport { applyRouteRegistrationHandlers } from './registry';\r\n\r\nimport ServerStats from 'app/features/admin/ServerStats';\r\nimport AlertRuleList from 'app/features/alerting/AlertRuleList';\r\nimport TeamPages from 'app/features/teams/TeamPages';\r\nimport TeamList from 'app/features/teams/TeamList';\r\nimport ApiKeys from 'app/features/api-keys/ApiKeysPage';\r\nimport PluginListPage from 'app/features/plugins/PluginListPage';\r\nimport FolderSettingsPage from 'app/features/folders/FolderSettingsPage';\r\nimport FolderPermissions from 'app/features/folders/FolderPermissions';\r\nimport DataSourcesListPage from 'app/features/datasources/DataSourcesListPage';\r\nimport NewDataSourcePage from '../features/datasources/NewDataSourcePage';\r\nimport UsersListPage from 'app/features/users/UsersListPage';\r\nimport DataSourceDashboards from 'app/features/datasources/DataSourceDashboards';\r\n\r\n/** @ngInject */\r\nexport function setupAngularRoutes($routeProvider, $locationProvider) {\r\n  $locationProvider.html5Mode(true);\r\n\r\n  $routeProvider\r\n    .when('/', {\r\n      templateUrl: 'public/app/partials/dashboard.html',\r\n      controller: 'LoadDashboardCtrl',\r\n      reloadOnSearch: false,\r\n      pageClass: 'page-dashboard',\r\n    })\r\n    .when('/d/:uid/:slug', {\r\n      templateUrl: 'public/app/partials/dashboard.html',\r\n      controller: 'LoadDashboardCtrl',\r\n      reloadOnSearch: false,\r\n      pageClass: 'page-dashboard',\r\n    })\r\n    .when('/d/:uid', {\r\n      templateUrl: 'public/app/partials/dashboard.html',\r\n      controller: 'LoadDashboardCtrl',\r\n      reloadOnSearch: false,\r\n      pageClass: 'page-dashboard',\r\n    })\r\n    .when('/dashboard/:type/:slug', {\r\n      templateUrl: 'public/app/partials/dashboard.html',\r\n      controller: 'LoadDashboardCtrl',\r\n      reloadOnSearch: false,\r\n      pageClass: 'page-dashboard',\r\n    })\r\n    .when('/d-solo/:uid/:slug', {\r\n      templateUrl: 'public/app/features/panel/partials/soloPanel.html',\r\n      controller: 'SoloPanelCtrl',\r\n      reloadOnSearch: false,\r\n      pageClass: 'page-dashboard',\r\n    })\r\n    .when('/dashboard-solo/:type/:slug', {\r\n      templateUrl: 'public/app/features/panel/partials/soloPanel.html',\r\n      controller: 'SoloPanelCtrl',\r\n      reloadOnSearch: false,\r\n      pageClass: 'page-dashboard',\r\n    })\r\n    .when('/dashboard/new', {\r\n      templateUrl: 'public/app/partials/dashboard.html',\r\n      controller: 'NewDashboardCtrl',\r\n      reloadOnSearch: false,\r\n      pageClass: 'page-dashboard',\r\n    })\r\n    .when('/dashboard/import', {\r\n      templateUrl: 'public/app/features/dashboard/partials/dashboard_import.html',\r\n      controller: 'DashboardImportCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/datasources', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        component: () => DataSourcesListPage,\r\n      },\r\n    })\r\n    .when('/datasources/edit/:id', {\r\n      templateUrl: 'public/app/features/plugins/partials/ds_edit.html',\r\n      controller: 'DataSourceEditCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/datasources/edit/:id/dashboards', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        component: () => DataSourceDashboards,\r\n      },\r\n    })\r\n    .when('/datasources/new', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        component: () => NewDataSourcePage,\r\n      },\r\n    })\r\n    .when('/dashboards', {\r\n      templateUrl: 'public/app/features/manage-dashboards/partials/dashboard_list.html',\r\n      controller: 'DashboardListCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/dashboards/folder/new', {\r\n      templateUrl: 'public/app/features/dashboard/partials/create_folder.html',\r\n      controller: 'CreateFolderCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/dashboards/f/:uid/:slug/permissions', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        component: () => FolderPermissions,\r\n      },\r\n    })\r\n    .when('/dashboards/f/:uid/:slug/settings', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        component: () => FolderSettingsPage,\r\n      },\r\n    })\r\n    .when('/dashboards/f/:uid/:slug', {\r\n      templateUrl: 'public/app/features/dashboard/partials/folder_dashboards.html',\r\n      controller: 'FolderDashboardsCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/dashboards/f/:uid', {\r\n      templateUrl: 'public/app/features/dashboard/partials/folder_dashboards.html',\r\n      controller: 'FolderDashboardsCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/explore', {\r\n      template: '<react-container />',\r\n      reloadOnSearch: false,\r\n      resolve: {\r\n        roles: () => ['Editor', 'Admin'],\r\n        component: () => import(/* webpackChunkName: \"explore\" */ 'app/features/explore/Wrapper'),\r\n      },\r\n    })\r\n    .when('/org', {\r\n      templateUrl: 'public/app/features/org/partials/orgDetails.html',\r\n      controller: 'OrgDetailsCtrl',\r\n    })\r\n    .when('/org/new', {\r\n      templateUrl: 'public/app/features/org/partials/newOrg.html',\r\n      controller: 'NewOrgCtrl',\r\n    })\r\n    .when('/org/users', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        component: () => UsersListPage,\r\n      },\r\n    })\r\n    .when('/org/users/invite', {\r\n      templateUrl: 'public/app/features/org/partials/invite.html',\r\n      controller: 'UserInviteCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/org/apikeys', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        roles: () => ['Editor', 'Admin'],\r\n        component: () => ApiKeys,\r\n      },\r\n    })\r\n    .when('/org/teams', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        roles: () => ['Editor', 'Admin'],\r\n        component: () => TeamList,\r\n      },\r\n    })\r\n    .when('/org/teams/new', {\r\n      templateUrl: 'public/app/features/org/partials/create_team.html',\r\n      controller: 'CreateTeamCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/org/teams/edit/:id/:page?', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        roles: () => ['Admin'],\r\n        component: () => TeamPages,\r\n      },\r\n    })\r\n    .when('/profile', {\r\n      templateUrl: 'public/app/features/org/partials/profile.html',\r\n      controller: 'ProfileCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/profile/password', {\r\n      templateUrl: 'public/app/features/org/partials/change_password.html',\r\n      controller: 'ChangePasswordCtrl',\r\n    })\r\n    .when('/profile/select-org', {\r\n      templateUrl: 'public/app/features/org/partials/select_org.html',\r\n      controller: 'SelectOrgCtrl',\r\n    })\r\n    // ADMIN\r\n    .when('/admin', {\r\n      templateUrl: 'public/app/features/admin/partials/admin_home.html',\r\n      controller: 'AdminHomeCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/admin/settings', {\r\n      templateUrl: 'public/app/features/admin/partials/settings.html',\r\n      controller: 'AdminSettingsCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/admin/users', {\r\n      templateUrl: 'public/app/features/admin/partials/users.html',\r\n      controller: 'AdminListUsersCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/admin/users/create', {\r\n      templateUrl: 'public/app/features/admin/partials/new_user.html',\r\n      controller: 'AdminEditUserCtrl',\r\n    })\r\n    .when('/admin/users/edit/:id', {\r\n      templateUrl: 'public/app/features/admin/partials/edit_user.html',\r\n      controller: 'AdminEditUserCtrl',\r\n    })\r\n    .when('/admin/orgs', {\r\n      templateUrl: 'public/app/features/admin/partials/orgs.html',\r\n      controller: 'AdminListOrgsCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/admin/orgs/edit/:id', {\r\n      templateUrl: 'public/app/features/admin/partials/edit_org.html',\r\n      controller: 'AdminEditOrgCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/admin/stats', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        component: () => ServerStats,\r\n      },\r\n    })\r\n    // LOGIN / SIGNUP\r\n    .when('/login', {\r\n      templateUrl: 'public/app/partials/login.html',\r\n      controller: 'LoginCtrl',\r\n      pageClass: 'login-page sidemenu-hidden',\r\n    })\r\n    .when('/invite/:code', {\r\n      templateUrl: 'public/app/partials/signup_invited.html',\r\n      controller: 'InvitedCtrl',\r\n      pageClass: 'sidemenu-hidden',\r\n    })\r\n    .when('/signup', {\r\n      templateUrl: 'public/app/partials/signup_step2.html',\r\n      controller: 'SignUpCtrl',\r\n      pageClass: 'sidemenu-hidden',\r\n    })\r\n    .when('/user/password/send-reset-email', {\r\n      templateUrl: 'public/app/partials/reset_password.html',\r\n      controller: 'ResetPasswordCtrl',\r\n      pageClass: 'sidemenu-hidden',\r\n    })\r\n    .when('/user/password/reset', {\r\n      templateUrl: 'public/app/partials/reset_password.html',\r\n      controller: 'ResetPasswordCtrl',\r\n      pageClass: 'sidemenu-hidden',\r\n    })\r\n    .when('/dashboard/snapshots', {\r\n      templateUrl: 'public/app/features/manage-dashboards/partials/snapshot_list.html',\r\n      controller: 'SnapshotListCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/plugins', {\r\n      template: '<react-container />',\r\n      resolve: {\r\n        component: () => PluginListPage,\r\n      },\r\n    })\r\n    .when('/plugins/:pluginId/edit', {\r\n      templateUrl: 'public/app/features/plugins/partials/plugin_edit.html',\r\n      controller: 'PluginEditCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/plugins/:pluginId/page/:slug', {\r\n      templateUrl: 'public/app/features/plugins/partials/plugin_page.html',\r\n      controller: 'AppPageCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/styleguide/:page?', {\r\n      controller: 'StyleGuideCtrl',\r\n      controllerAs: 'ctrl',\r\n      templateUrl: 'public/app/features/admin/partials/styleguide.html',\r\n    })\r\n    .when('/alerting', {\r\n      redirectTo: '/alerting/list',\r\n    })\r\n    .when('/alerting/list', {\r\n      template: '<react-container />',\r\n      reloadOnSearch: false,\r\n      resolve: {\r\n        component: () => AlertRuleList,\r\n      },\r\n    })\r\n    .when('/alerting/notifications', {\r\n      templateUrl: 'public/app/features/alerting/partials/notifications_list.html',\r\n      controller: 'AlertNotificationsListCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/alerting/notification/new', {\r\n      templateUrl: 'public/app/features/alerting/partials/notification_edit.html',\r\n      controller: 'AlertNotificationEditCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .when('/alerting/notification/:id/edit', {\r\n      templateUrl: 'public/app/features/alerting/partials/notification_edit.html',\r\n      controller: 'AlertNotificationEditCtrl',\r\n      controllerAs: 'ctrl',\r\n    })\r\n    .otherwise({\r\n      templateUrl: 'public/app/partials/error.html',\r\n      controller: 'ErrorCtrl',\r\n    });\r\n\r\n  applyRouteRegistrationHandlers($routeProvider);\r\n}\r\n","// Libraries\r\nimport moment from 'moment';\r\nimport _ from 'lodash';\r\n\r\n// Utils\r\nimport kbn from 'app/core/utils/kbn';\r\nimport coreModule from 'app/core/core_module';\r\nimport * as dateMath from 'app/core/utils/datemath';\r\n// Types\r\n\r\nimport { TimeRange } from 'app/types';\r\n\r\nexport class TimeSrv {\r\n  time: any;\r\n  refreshTimer: any;\r\n  refresh: boolean;\r\n  oldRefresh: boolean;\r\n  dashboard: any;\r\n  timeAtLoad: any;\r\n  private autoRefreshBlocked: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private $rootScope, private $timeout, private $location, private timer, private contextSrv) {\r\n    // default time\r\n    this.time = { from: '6h', to: 'now' };\r\n\r\n    $rootScope.$on('zoom-out', this.zoomOut.bind(this));\r\n    $rootScope.$on('$routeUpdate', this.routeUpdated.bind(this));\r\n\r\n    document.addEventListener('visibilitychange', () => {\r\n      if (this.autoRefreshBlocked && document.visibilityState === 'visible') {\r\n        this.autoRefreshBlocked = false;\r\n        this.refreshDashboard();\r\n      }\r\n    });\r\n  }\r\n\r\n  init(dashboard) {\r\n    this.timer.cancelAll();\r\n\r\n    this.dashboard = dashboard;\r\n    this.time = dashboard.time;\r\n    this.refresh = dashboard.refresh;\r\n\r\n    this.initTimeFromUrl();\r\n    this.parseTime();\r\n\r\n    // remember time at load so we can go back to it\r\n    this.timeAtLoad = _.cloneDeep(this.time);\r\n\r\n    if (this.refresh) {\r\n      this.setAutoRefresh(this.refresh);\r\n    }\r\n  }\r\n\r\n  private parseTime() {\r\n    // when absolute time is saved in json it is turned to a string\r\n    if (_.isString(this.time.from) && this.time.from.indexOf('Z') >= 0) {\r\n      this.time.from = moment(this.time.from).utc();\r\n    }\r\n    if (_.isString(this.time.to) && this.time.to.indexOf('Z') >= 0) {\r\n      this.time.to = moment(this.time.to).utc();\r\n    }\r\n  }\r\n\r\n  private parseUrlParam(value) {\r\n    if (value.indexOf('now') !== -1) {\r\n      return value;\r\n    }\r\n    if (value.length === 8) {\r\n      return moment.utc(value, 'YYYYMMDD');\r\n    }\r\n    if (value.length === 15) {\r\n      return moment.utc(value, 'YYYYMMDDTHHmmss');\r\n    }\r\n\r\n    if (!isNaN(value)) {\r\n      const epoch = parseInt(value, 10);\r\n      return moment.utc(epoch);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  private initTimeFromUrl() {\r\n    const params = this.$location.search();\r\n    if (params.from) {\r\n      this.time.from = this.parseUrlParam(params.from) || this.time.from;\r\n    }\r\n    if (params.to) {\r\n      this.time.to = this.parseUrlParam(params.to) || this.time.to;\r\n    }\r\n    // if absolute ignore refresh option saved to dashboard\r\n    if (params.to && params.to.indexOf('now') === -1) {\r\n      this.refresh = false;\r\n      this.dashboard.refresh = false;\r\n    }\r\n    // but if refresh explicitly set then use that\r\n    if (params.refresh) {\r\n      this.refresh = params.refresh || this.refresh;\r\n    }\r\n  }\r\n\r\n  private routeUpdated() {\r\n    const params = this.$location.search();\r\n    const urlRange = this.timeRangeForUrl();\r\n    // check if url has time range\r\n    if (params.from && params.to) {\r\n      // is it different from what our current time range?\r\n      if (params.from !== urlRange.from || params.to !== urlRange.to) {\r\n        // issue update\r\n        this.initTimeFromUrl();\r\n        this.setTime(this.time, true);\r\n      }\r\n    } else if (this.timeHasChangedSinceLoad()) {\r\n      this.setTime(this.timeAtLoad, true);\r\n    }\r\n  }\r\n\r\n  private timeHasChangedSinceLoad() {\r\n    return this.timeAtLoad && (this.timeAtLoad.from !== this.time.from || this.timeAtLoad.to !== this.time.to);\r\n  }\r\n\r\n  setAutoRefresh(interval) {\r\n    this.dashboard.refresh = interval;\r\n    this.cancelNextRefresh();\r\n    if (interval) {\r\n      const intervalMs = kbn.interval_to_ms(interval);\r\n\r\n      this.refreshTimer = this.timer.register(\r\n        this.$timeout(() => {\r\n          this.startNextRefreshTimer(intervalMs);\r\n          this.refreshDashboard();\r\n        }, intervalMs)\r\n      );\r\n    }\r\n\r\n    // update url\r\n    const params = this.$location.search();\r\n    if (interval) {\r\n      params.refresh = interval;\r\n      this.$location.search(params);\r\n    } else if (params.refresh) {\r\n      delete params.refresh;\r\n      this.$location.search(params);\r\n    }\r\n  }\r\n\r\n  refreshDashboard() {\r\n    this.dashboard.timeRangeUpdated();\r\n  }\r\n\r\n  private startNextRefreshTimer(afterMs) {\r\n    this.cancelNextRefresh();\r\n    this.refreshTimer = this.timer.register(\r\n      this.$timeout(() => {\r\n        this.startNextRefreshTimer(afterMs);\r\n        if (this.contextSrv.isGrafanaVisible()) {\r\n          this.refreshDashboard();\r\n        } else {\r\n          this.autoRefreshBlocked = true;\r\n        }\r\n      }, afterMs)\r\n    );\r\n  }\r\n\r\n  private cancelNextRefresh() {\r\n    this.timer.cancel(this.refreshTimer);\r\n  }\r\n\r\n  setTime(time, fromRouteUpdate?) {\r\n    _.extend(this.time, time);\r\n\r\n    // disable refresh if zoom in or zoom out\r\n    if (moment.isMoment(time.to)) {\r\n      this.oldRefresh = this.dashboard.refresh || this.oldRefresh;\r\n      this.setAutoRefresh(false);\r\n    } else if (this.oldRefresh && this.oldRefresh !== this.dashboard.refresh) {\r\n      this.setAutoRefresh(this.oldRefresh);\r\n      this.oldRefresh = null;\r\n    }\r\n\r\n    // update url\r\n    if (fromRouteUpdate !== true) {\r\n      const urlRange = this.timeRangeForUrl();\r\n      const urlParams = this.$location.search();\r\n      urlParams.from = urlRange.from;\r\n      urlParams.to = urlRange.to;\r\n      this.$location.search(urlParams);\r\n    }\r\n\r\n    this.$rootScope.appEvent('time-range-changed', this.time);\r\n    this.$timeout(this.refreshDashboard.bind(this), 0);\r\n  }\r\n\r\n  timeRangeForUrl() {\r\n    const range = this.timeRange().raw;\r\n\r\n    if (moment.isMoment(range.from)) {\r\n      range.from = range.from.valueOf().toString();\r\n    }\r\n    if (moment.isMoment(range.to)) {\r\n      range.to = range.to.valueOf().toString();\r\n    }\r\n\r\n    return range;\r\n  }\r\n\r\n  timeRange(): TimeRange {\r\n    // make copies if they are moment  (do not want to return out internal moment, because they are mutable!)\r\n    const raw = {\r\n      from: moment.isMoment(this.time.from) ? moment(this.time.from) : this.time.from,\r\n      to: moment.isMoment(this.time.to) ? moment(this.time.to) : this.time.to,\r\n    };\r\n\r\n    const timezone = this.dashboard && this.dashboard.getTimezone();\r\n\r\n    return {\r\n      from: dateMath.parse(raw.from, false, timezone),\r\n      to: dateMath.parse(raw.to, true, timezone),\r\n      raw: raw,\r\n    };\r\n  }\r\n\r\n  zoomOut(e, factor) {\r\n    const range = this.timeRange();\r\n\r\n    const timespan = range.to.valueOf() - range.from.valueOf();\r\n    const center = range.to.valueOf() - timespan / 2;\r\n\r\n    const to = center + timespan * factor / 2;\r\n    const from = center - timespan * factor / 2;\r\n\r\n    this.setTime({ from: moment.utc(from), to: moment.utc(to) });\r\n  }\r\n}\r\n\r\nlet singleton;\r\n\r\nexport function setTimeSrv(srv: TimeSrv) {\r\n  singleton = srv;\r\n}\r\n\r\nexport function getTimeSrv(): TimeSrv {\r\n  return singleton;\r\n}\r\n\r\ncoreModule.service('timeSrv', TimeSrv);\r\n","import config from 'app/core/config';\r\nimport _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport { appEvents, profiler } from 'app/core/core';\r\nimport { PanelModel } from 'app/features/dashboard/panel_model';\r\nimport Remarkable from 'remarkable';\r\nimport { GRID_CELL_HEIGHT, GRID_CELL_VMARGIN, LS_PANEL_COPY_KEY } from 'app/core/constants';\r\nimport store from 'app/core/store';\r\n\r\nconst TITLE_HEIGHT = 27;\r\nconst PANEL_BORDER = 2;\r\n\r\nimport { Emitter } from 'app/core/core';\r\n\r\nexport class PanelCtrl {\r\n  panel: any;\r\n  error: any;\r\n  dashboard: any;\r\n  editorTabIndex: number;\r\n  pluginName: string;\r\n  pluginId: string;\r\n  editorTabs: any;\r\n  $scope: any;\r\n  $injector: any;\r\n  $location: any;\r\n  $timeout: any;\r\n  inspector: any;\r\n  editModeInitiated: boolean;\r\n  height: any;\r\n  containerHeight: any;\r\n  events: Emitter;\r\n  timing: any;\r\n  loading: boolean;\r\n\r\n  constructor($scope, $injector) {\r\n    this.$injector = $injector;\r\n    this.$location = $injector.get('$location');\r\n    this.$scope = $scope;\r\n    this.$timeout = $injector.get('$timeout');\r\n    this.editorTabIndex = 0;\r\n    this.events = this.panel.events;\r\n    this.timing = {};\r\n\r\n    const plugin = config.panels[this.panel.type];\r\n    if (plugin) {\r\n      this.pluginId = plugin.id;\r\n      this.pluginName = plugin.name;\r\n    }\r\n\r\n    $scope.$on('component-did-mount', () => this.panelDidMount());\r\n\r\n    $scope.$on('$destroy', () => {\r\n      this.events.emit('panel-teardown');\r\n      this.events.removeAllListeners();\r\n    });\r\n  }\r\n\r\n  panelDidMount() {\r\n    this.events.emit('component-did-mount');\r\n    this.dashboard.panelInitialized(this.panel);\r\n  }\r\n\r\n  renderingCompleted() {\r\n    profiler.renderingCompleted(this.panel.id, this.timing);\r\n  }\r\n\r\n  refresh() {\r\n    this.panel.refresh();\r\n  }\r\n\r\n  publishAppEvent(evtName, evt) {\r\n    this.$scope.$root.appEvent(evtName, evt);\r\n  }\r\n\r\n  changeView(fullscreen, edit) {\r\n    this.publishAppEvent('panel-change-view', {\r\n      fullscreen: fullscreen,\r\n      edit: edit,\r\n      panelId: this.panel.id,\r\n    });\r\n  }\r\n\r\n  viewPanel() {\r\n    this.changeView(true, false);\r\n  }\r\n\r\n  editPanel() {\r\n    this.changeView(true, true);\r\n  }\r\n\r\n  exitFullscreen() {\r\n    this.changeView(false, false);\r\n  }\r\n\r\n  initEditMode() {\r\n    this.editorTabs = [];\r\n    this.addEditorTab('General', 'public/app/partials/panelgeneral.html');\r\n\r\n    this.editModeInitiated = true;\r\n    this.events.emit('init-edit-mode', null);\r\n\r\n    const urlTab = (this.$injector.get('$routeParams').tab || '').toLowerCase();\r\n    if (urlTab) {\r\n      this.editorTabs.forEach((tab, i) => {\r\n        if (tab.title.toLowerCase() === urlTab) {\r\n          this.editorTabIndex = i;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  changeTab(newIndex) {\r\n    this.editorTabIndex = newIndex;\r\n    const route = this.$injector.get('$route');\r\n    route.current.params.tab = this.editorTabs[newIndex].title.toLowerCase();\r\n    route.updateParams();\r\n  }\r\n\r\n  addEditorTab(title, directiveFn, index?, icon?) {\r\n    const editorTab = { title, directiveFn, icon };\r\n\r\n    if (_.isString(directiveFn)) {\r\n      editorTab.directiveFn = () => {\r\n        return { templateUrl: directiveFn };\r\n      };\r\n    }\r\n\r\n    if (index) {\r\n      this.editorTabs.splice(index, 0, editorTab);\r\n    } else {\r\n      this.editorTabs.push(editorTab);\r\n    }\r\n  }\r\n\r\n  getMenu() {\r\n    const menu = [];\r\n    menu.push({\r\n      text: 'View',\r\n      click: 'ctrl.viewPanel();',\r\n      icon: 'fa fa-fw fa-eye',\r\n      shortcut: 'v',\r\n    });\r\n\r\n    if (this.dashboard.meta.canEdit) {\r\n      menu.push({\r\n        text: 'Edit',\r\n        click: 'ctrl.editPanel();',\r\n        role: 'Editor',\r\n        icon: 'fa fa-fw fa-edit',\r\n        shortcut: 'e',\r\n      });\r\n    }\r\n\r\n    menu.push({\r\n      text: 'Share',\r\n      click: 'ctrl.sharePanel();',\r\n      icon: 'fa fa-fw fa-share',\r\n      shortcut: 'p s',\r\n    });\r\n\r\n    // Additional items from sub-class\r\n    menu.push(...this.getAdditionalMenuItems());\r\n\r\n    const extendedMenu = this.getExtendedMenu();\r\n    menu.push({\r\n      text: 'More ...',\r\n      click: '',\r\n      icon: 'fa fa-fw fa-cube',\r\n      submenu: extendedMenu,\r\n    });\r\n\r\n    if (this.dashboard.meta.canEdit) {\r\n      menu.push({ divider: true, role: 'Editor' });\r\n      menu.push({\r\n        text: 'Remove',\r\n        click: 'ctrl.removePanel();',\r\n        role: 'Editor',\r\n        icon: 'fa fa-fw fa-trash',\r\n        shortcut: 'p r',\r\n      });\r\n    }\r\n\r\n    return menu;\r\n  }\r\n\r\n  getExtendedMenu() {\r\n    const menu = [];\r\n    if (!this.panel.fullscreen && this.dashboard.meta.canEdit) {\r\n      menu.push({\r\n        text: 'Duplicate',\r\n        click: 'ctrl.duplicate()',\r\n        role: 'Editor',\r\n        shortcut: 'p d',\r\n      });\r\n\r\n      menu.push({\r\n        text: 'Copy',\r\n        click: 'ctrl.copyPanel()',\r\n        role: 'Editor',\r\n      });\r\n    }\r\n\r\n    menu.push({\r\n      text: 'Panel JSON',\r\n      click: 'ctrl.editPanelJson(); dismiss();',\r\n    });\r\n\r\n    this.events.emit('init-panel-actions', menu);\r\n    return menu;\r\n  }\r\n\r\n  // Override in sub-class to add items before extended menu\r\n  getAdditionalMenuItems() {\r\n    return [];\r\n  }\r\n\r\n  otherPanelInFullscreenMode() {\r\n    return this.dashboard.meta.fullscreen && !this.panel.fullscreen;\r\n  }\r\n\r\n  calculatePanelHeight() {\r\n    if (this.panel.fullscreen) {\r\n      const docHeight = $('.react-grid-layout').height();\r\n      const editHeight = Math.floor(docHeight * 0.35);\r\n      const fullscreenHeight = Math.floor(docHeight * 0.8);\r\n      this.containerHeight = this.panel.isEditing ? editHeight : fullscreenHeight;\r\n    } else {\r\n      this.containerHeight = this.panel.gridPos.h * GRID_CELL_HEIGHT + (this.panel.gridPos.h - 1) * GRID_CELL_VMARGIN;\r\n    }\r\n\r\n    if (this.panel.soloMode) {\r\n      this.containerHeight = $(window).height();\r\n    }\r\n\r\n    // hacky solution\r\n    if (this.panel.isEditing && !this.editModeInitiated) {\r\n      this.initEditMode();\r\n    }\r\n\r\n    this.height = this.containerHeight - (PANEL_BORDER + TITLE_HEIGHT);\r\n  }\r\n\r\n  render(payload?) {\r\n    this.timing.renderStart = new Date().getTime();\r\n    this.events.emit('render', payload);\r\n  }\r\n\r\n  duplicate() {\r\n    this.dashboard.duplicatePanel(this.panel);\r\n  }\r\n\r\n  removePanel() {\r\n    this.publishAppEvent('panel-remove', {\r\n      panelId: this.panel.id,\r\n    });\r\n  }\r\n\r\n  editPanelJson() {\r\n    const editScope = this.$scope.$root.$new();\r\n    editScope.object = this.panel.getSaveModel();\r\n    editScope.updateHandler = this.replacePanel.bind(this);\r\n    editScope.enableCopy = true;\r\n\r\n    this.publishAppEvent('show-modal', {\r\n      src: 'public/app/partials/edit_json.html',\r\n      scope: editScope,\r\n    });\r\n  }\r\n\r\n  copyPanel() {\r\n    store.set(LS_PANEL_COPY_KEY, JSON.stringify(this.panel.getSaveModel()));\r\n    appEvents.emit('alert-success', ['Panel copied. Open Add Panel to paste']);\r\n  }\r\n\r\n  replacePanel(newPanel, oldPanel) {\r\n    const dashboard = this.dashboard;\r\n    const index = _.findIndex(dashboard.panels, panel => {\r\n      return panel.id === oldPanel.id;\r\n    });\r\n\r\n    const deletedPanel = dashboard.panels.splice(index, 1);\r\n    this.dashboard.events.emit('panel-removed', deletedPanel);\r\n\r\n    newPanel = new PanelModel(newPanel);\r\n    newPanel.id = oldPanel.id;\r\n\r\n    dashboard.panels.splice(index, 0, newPanel);\r\n    dashboard.sortPanelsByGridPos();\r\n    dashboard.events.emit('panel-added', newPanel);\r\n  }\r\n\r\n  sharePanel() {\r\n    const shareScope = this.$scope.$new();\r\n    shareScope.panel = this.panel;\r\n    shareScope.dashboard = this.dashboard;\r\n\r\n    this.publishAppEvent('show-modal', {\r\n      src: 'public/app/features/dashboard/partials/shareModal.html',\r\n      scope: shareScope,\r\n    });\r\n  }\r\n\r\n  getInfoMode() {\r\n    if (this.error) {\r\n      return 'error';\r\n    }\r\n    if (!!this.panel.description) {\r\n      return 'info';\r\n    }\r\n    if (this.panel.links && this.panel.links.length) {\r\n      return 'links';\r\n    }\r\n    return '';\r\n  }\r\n\r\n  getInfoContent(options) {\r\n    let markdown = this.panel.description;\r\n\r\n    if (options.mode === 'tooltip') {\r\n      markdown = this.error || this.panel.description;\r\n    }\r\n\r\n    const linkSrv = this.$injector.get('linkSrv');\r\n    const sanitize = this.$injector.get('$sanitize');\r\n    const templateSrv = this.$injector.get('templateSrv');\r\n    const interpolatedMarkdown = templateSrv.replace(markdown, this.panel.scopedVars);\r\n    let html = '<div class=\"markdown-html\">';\r\n\r\n    html += new Remarkable().render(interpolatedMarkdown);\r\n\r\n    if (this.panel.links && this.panel.links.length > 0) {\r\n      html += '<ul>';\r\n      for (const link of this.panel.links) {\r\n        const info = linkSrv.getPanelLinkAnchorInfo(link, this.panel.scopedVars);\r\n        html +=\r\n          '<li><a class=\"panel-menu-link\" href=\"' +\r\n          info.href +\r\n          '\" target=\"' +\r\n          info.target +\r\n          '\">' +\r\n          info.title +\r\n          '</a></li>';\r\n      }\r\n      html += '</ul>';\r\n    }\r\n\r\n    html += '</div>';\r\n    return sanitize(html);\r\n  }\r\n\r\n  openInspector() {\r\n    const modalScope = this.$scope.$new();\r\n    modalScope.panel = this.panel;\r\n    modalScope.dashboard = this.dashboard;\r\n    modalScope.panelInfoHtml = this.getInfoContent({ mode: 'inspector' });\r\n\r\n    modalScope.inspector = $.extend(true, {}, this.inspector);\r\n    this.publishAppEvent('show-modal', {\r\n      src: 'public/app/features/dashboard/partials/inspector.html',\r\n      scope: modalScope,\r\n    });\r\n  }\r\n}\r\n","// Libraries\r\nimport _ from 'lodash';\r\nimport Remarkable from 'remarkable';\r\n\r\n// Services & utils\r\nimport coreModule from 'app/core/core_module';\r\nimport config from 'app/core/config';\r\n\r\n// Types\r\nimport { DashboardModel } from '../dashboard/dashboard_model';\r\n\r\nexport class MetricsTabCtrl {\r\n  dsName: string;\r\n  panel: any;\r\n  panelCtrl: any;\r\n  datasources: any[];\r\n  datasourceInstance: any;\r\n  nextRefId: string;\r\n  dashboard: DashboardModel;\r\n  panelDsValue: any;\r\n  addQueryDropdown: any;\r\n  queryTroubleshooterOpen: boolean;\r\n  helpOpen: boolean;\r\n  optionsOpen: boolean;\r\n  hasQueryHelp: boolean;\r\n  helpHtml: string;\r\n  queryOptions: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, private $sce, datasourceSrv, private backendSrv) {\r\n    this.panelCtrl = $scope.ctrl;\r\n    $scope.ctrl = this;\r\n\r\n    this.panel = this.panelCtrl.panel;\r\n    this.panel.datasource = this.panel.datasource || null;\r\n    this.panel.targets = this.panel.targets || [{}];\r\n\r\n    this.dashboard = this.panelCtrl.dashboard;\r\n    this.datasources = datasourceSrv.getMetricSources();\r\n    this.panelDsValue = this.panelCtrl.panel.datasource;\r\n\r\n    for (const ds of this.datasources) {\r\n      if (ds.value === this.panelDsValue) {\r\n        this.datasourceInstance = ds;\r\n      }\r\n    }\r\n\r\n    this.addQueryDropdown = { text: 'Add Query', value: null, fake: true };\r\n\r\n    // update next ref id\r\n    this.panelCtrl.nextRefId = this.dashboard.getNextQueryLetter(this.panel);\r\n    this.updateDatasourceOptions();\r\n  }\r\n\r\n  updateDatasourceOptions() {\r\n    if (this.datasourceInstance) {\r\n      this.hasQueryHelp = this.datasourceInstance.meta.hasQueryHelp;\r\n      this.queryOptions = this.datasourceInstance.meta.queryOptions;\r\n    }\r\n  }\r\n\r\n  getOptions(includeBuiltin) {\r\n    return Promise.resolve(\r\n      this.datasources\r\n        .filter(value => {\r\n          return includeBuiltin || !value.meta.builtIn;\r\n        })\r\n        .map(ds => {\r\n          return { value: ds.value, text: ds.name, datasource: ds };\r\n        })\r\n    );\r\n  }\r\n\r\n  datasourceChanged(option) {\r\n    if (!option) {\r\n      return;\r\n    }\r\n\r\n    this.datasourceInstance = option.datasource;\r\n    this.setDatasource(option.datasource);\r\n    this.updateDatasourceOptions();\r\n  }\r\n\r\n  setDatasource(datasource) {\r\n    // switching to mixed\r\n    if (datasource.meta.mixed) {\r\n      _.each(this.panel.targets, target => {\r\n        target.datasource = this.panel.datasource;\r\n        if (!target.datasource) {\r\n          target.datasource = config.defaultDatasource;\r\n        }\r\n      });\r\n    } else if (this.datasourceInstance && this.datasourceInstance.meta.mixed) {\r\n      _.each(this.panel.targets, target => {\r\n        delete target.datasource;\r\n      });\r\n    }\r\n\r\n    this.panel.datasource = datasource.value;\r\n    this.panel.refresh();\r\n  }\r\n\r\n  addMixedQuery(option) {\r\n    if (!option) {\r\n      return;\r\n    }\r\n\r\n    this.panelCtrl.addQuery({\r\n      isNew: true,\r\n      datasource: option.datasource.name,\r\n    });\r\n    this.addQueryDropdown = { text: 'Add Query', value: null, fake: true };\r\n  }\r\n\r\n  addQuery() {\r\n    this.panelCtrl.addQuery({ isNew: true });\r\n  }\r\n\r\n  toggleHelp() {\r\n    this.optionsOpen = false;\r\n    this.queryTroubleshooterOpen = false;\r\n    this.helpOpen = !this.helpOpen;\r\n\r\n    this.backendSrv.get(`/api/plugins/${this.datasourceInstance.meta.id}/markdown/query_help`).then(res => {\r\n      const md = new Remarkable();\r\n      this.helpHtml = this.$sce.trustAsHtml(md.render(res));\r\n    });\r\n  }\r\n\r\n  toggleOptions() {\r\n    this.helpOpen = false;\r\n    this.queryTroubleshooterOpen = false;\r\n    this.optionsOpen = !this.optionsOpen;\r\n  }\r\n\r\n  toggleQueryTroubleshooter() {\r\n    this.helpOpen = false;\r\n    this.optionsOpen = false;\r\n    this.queryTroubleshooterOpen = !this.queryTroubleshooterOpen;\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function metricsTabDirective() {\r\n  'use strict';\r\n  return {\r\n    restrict: 'E',\r\n    scope: true,\r\n    templateUrl: 'public/app/features/panel/partials/metrics_tab.html',\r\n    controller: MetricsTabCtrl,\r\n  };\r\n}\r\n\r\ncoreModule.directive('metricsTab', metricsTabDirective);\r\n","import $ from 'jquery';\r\nimport _ from 'lodash';\r\n\r\nimport config from 'app/core/config';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport { PanelCtrl } from 'app/features/panel/panel_ctrl';\r\nimport * as rangeUtil from 'app/core/utils/rangeutil';\r\nimport * as dateMath from 'app/core/utils/datemath';\r\nimport { getExploreUrl } from 'app/core/utils/explore';\r\nimport { metricsTabDirective } from './metrics_tab';\r\n\r\nclass MetricsPanelCtrl extends PanelCtrl {\r\n  scope: any;\r\n  datasource: any;\r\n  $q: any;\r\n  $timeout: any;\r\n  contextSrv: any;\r\n  datasourceSrv: any;\r\n  timeSrv: any;\r\n  templateSrv: any;\r\n  timing: any;\r\n  range: any;\r\n  interval: any;\r\n  intervalMs: any;\r\n  resolution: any;\r\n  timeInfo: any;\r\n  skipDataOnInit: boolean;\r\n  dataStream: any;\r\n  dataSubscription: any;\r\n  dataList: any;\r\n  nextRefId: string;\r\n\r\n  constructor($scope, $injector) {\r\n    super($scope, $injector);\r\n\r\n    // make metrics tab the default\r\n    this.editorTabIndex = 1;\r\n    this.$q = $injector.get('$q');\r\n    this.contextSrv = $injector.get('contextSrv');\r\n    this.datasourceSrv = $injector.get('datasourceSrv');\r\n    this.timeSrv = $injector.get('timeSrv');\r\n    this.templateSrv = $injector.get('templateSrv');\r\n    this.scope = $scope;\r\n    this.panel.datasource = this.panel.datasource || null;\r\n\r\n    this.events.on('refresh', this.onMetricsPanelRefresh.bind(this));\r\n    this.events.on('init-edit-mode', this.onInitMetricsPanelEditMode.bind(this));\r\n    this.events.on('panel-teardown', this.onPanelTearDown.bind(this));\r\n  }\r\n\r\n  private onPanelTearDown() {\r\n    if (this.dataSubscription) {\r\n      this.dataSubscription.unsubscribe();\r\n      this.dataSubscription = null;\r\n    }\r\n  }\r\n\r\n  private onInitMetricsPanelEditMode() {\r\n    this.addEditorTab('Metrics', metricsTabDirective, 1, 'fa fa-database');\r\n    this.addEditorTab('Time range', 'public/app/features/panel/partials/panelTime.html');\r\n  }\r\n\r\n  private onMetricsPanelRefresh() {\r\n    // ignore fetching data if another panel is in fullscreen\r\n    if (this.otherPanelInFullscreenMode()) {\r\n      return;\r\n    }\r\n\r\n    // if we have snapshot data use that\r\n    if (this.panel.snapshotData) {\r\n      this.updateTimeRange();\r\n      let data = this.panel.snapshotData;\r\n      // backward compatibility\r\n      if (!_.isArray(data)) {\r\n        data = data.data;\r\n      }\r\n\r\n      // Defer panel rendering till the next digest cycle.\r\n      // For some reason snapshot panels don't init at this time, so this helps to avoid rendering issues.\r\n      return this.$timeout(() => {\r\n        this.events.emit('data-snapshot-load', data);\r\n      });\r\n    }\r\n\r\n    // // ignore if we have data stream\r\n    if (this.dataStream) {\r\n      return;\r\n    }\r\n\r\n    // clear loading/error state\r\n    delete this.error;\r\n    this.loading = true;\r\n\r\n    // load datasource service\r\n    this.setTimeQueryStart();\r\n    this.datasourceSrv\r\n      .get(this.panel.datasource)\r\n      .then(this.updateTimeRange.bind(this))\r\n      .then(this.issueQueries.bind(this))\r\n      .then(this.handleQueryResult.bind(this))\r\n      .catch(err => {\r\n        // if cancelled  keep loading set to true\r\n        if (err.cancelled) {\r\n          console.log('Panel request cancelled', err);\r\n          return;\r\n        }\r\n\r\n        this.loading = false;\r\n        this.error = err.message || 'Request Error';\r\n        this.inspector = { error: err };\r\n\r\n        if (err.data) {\r\n          if (err.data.message) {\r\n            this.error = err.data.message;\r\n          }\r\n          if (err.data.error) {\r\n            this.error = err.data.error;\r\n          }\r\n        }\r\n\r\n        this.events.emit('data-error', err);\r\n        console.log('Panel data error:', err);\r\n      });\r\n  }\r\n\r\n  setTimeQueryStart() {\r\n    this.timing.queryStart = new Date().getTime();\r\n  }\r\n\r\n  setTimeQueryEnd() {\r\n    this.timing.queryEnd = new Date().getTime();\r\n  }\r\n\r\n  updateTimeRange(datasource?) {\r\n    this.datasource = datasource || this.datasource;\r\n    this.range = this.timeSrv.timeRange();\r\n\r\n    this.applyPanelTimeOverrides();\r\n\r\n    if (this.panel.maxDataPoints) {\r\n      this.resolution = this.panel.maxDataPoints;\r\n    } else {\r\n      this.resolution = Math.ceil($(window).width() * (this.panel.gridPos.w / 24));\r\n    }\r\n\r\n    this.calculateInterval();\r\n\r\n    return this.datasource;\r\n  }\r\n\r\n  calculateInterval() {\r\n    let intervalOverride = this.panel.interval;\r\n\r\n    // if no panel interval check datasource\r\n    if (intervalOverride) {\r\n      intervalOverride = this.templateSrv.replace(intervalOverride, this.panel.scopedVars);\r\n    } else if (this.datasource && this.datasource.interval) {\r\n      intervalOverride = this.datasource.interval;\r\n    }\r\n\r\n    const res = kbn.calculateInterval(this.range, this.resolution, intervalOverride);\r\n    this.interval = res.interval;\r\n    this.intervalMs = res.intervalMs;\r\n  }\r\n\r\n  applyPanelTimeOverrides() {\r\n    this.timeInfo = '';\r\n\r\n    // check panel time overrrides\r\n    if (this.panel.timeFrom) {\r\n      const timeFromInterpolated = this.templateSrv.replace(this.panel.timeFrom, this.panel.scopedVars);\r\n      const timeFromInfo = rangeUtil.describeTextRange(timeFromInterpolated);\r\n      if (timeFromInfo.invalid) {\r\n        this.timeInfo = 'invalid time override';\r\n        return;\r\n      }\r\n\r\n      if (_.isString(this.range.raw.from)) {\r\n        const timeFromDate = dateMath.parse(timeFromInfo.from);\r\n        this.timeInfo = timeFromInfo.display;\r\n        this.range.from = timeFromDate;\r\n        this.range.to = dateMath.parse(timeFromInfo.to);\r\n        this.range.raw.from = timeFromInfo.from;\r\n        this.range.raw.to = timeFromInfo.to;\r\n      }\r\n    }\r\n\r\n    if (this.panel.timeShift) {\r\n      const timeShiftInterpolated = this.templateSrv.replace(this.panel.timeShift, this.panel.scopedVars);\r\n      const timeShiftInfo = rangeUtil.describeTextRange(timeShiftInterpolated);\r\n      if (timeShiftInfo.invalid) {\r\n        this.timeInfo = 'invalid timeshift';\r\n        return;\r\n      }\r\n\r\n      const timeShift = '-' + timeShiftInterpolated;\r\n      this.timeInfo += ' timeshift ' + timeShift;\r\n      this.range.from = dateMath.parseDateMath(timeShift, this.range.from, false);\r\n      this.range.to = dateMath.parseDateMath(timeShift, this.range.to, true);\r\n      this.range.raw = { from: this.range.from, to: this.range.to };\r\n    }\r\n\r\n    if (this.panel.hideTimeOverride) {\r\n      this.timeInfo = '';\r\n    }\r\n  }\r\n\r\n  issueQueries(datasource) {\r\n    this.datasource = datasource;\r\n\r\n    if (!this.panel.targets || this.panel.targets.length === 0) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    // make shallow copy of scoped vars,\r\n    // and add built in variables interval and interval_ms\r\n    const scopedVars = Object.assign({}, this.panel.scopedVars, {\r\n      __interval: { text: this.interval, value: this.interval },\r\n      __interval_ms: { text: this.intervalMs, value: this.intervalMs },\r\n    });\r\n\r\n    const metricsQuery = {\r\n      timezone: this.dashboard.getTimezone(),\r\n      panelId: this.panel.id,\r\n      dashboardId: this.dashboard.id,\r\n      range: this.range,\r\n      rangeRaw: this.range.raw,\r\n      interval: this.interval,\r\n      intervalMs: this.intervalMs,\r\n      targets: this.panel.targets,\r\n      maxDataPoints: this.resolution,\r\n      scopedVars: scopedVars,\r\n      cacheTimeout: this.panel.cacheTimeout,\r\n    };\r\n\r\n    return datasource.query(metricsQuery);\r\n  }\r\n\r\n  handleQueryResult(result) {\r\n    this.setTimeQueryEnd();\r\n    this.loading = false;\r\n\r\n    // check for if data source returns subject\r\n    if (result && result.subscribe) {\r\n      this.handleDataStream(result);\r\n      return;\r\n    }\r\n\r\n    if (this.dashboard.snapshot) {\r\n      this.panel.snapshotData = result.data;\r\n    }\r\n\r\n    if (!result || !result.data) {\r\n      console.log('Data source query result invalid, missing data field:', result);\r\n      result = { data: [] };\r\n    }\r\n\r\n    this.events.emit('data-received', result.data);\r\n  }\r\n\r\n  handleDataStream(stream) {\r\n    // if we already have a connection\r\n    if (this.dataStream) {\r\n      console.log('two stream observables!');\r\n      return;\r\n    }\r\n\r\n    this.dataStream = stream;\r\n    this.dataSubscription = stream.subscribe({\r\n      next: data => {\r\n        console.log('dataSubject next!');\r\n        if (data.range) {\r\n          this.range = data.range;\r\n        }\r\n        this.events.emit('data-received', data.data);\r\n      },\r\n      error: error => {\r\n        this.events.emit('data-error', error);\r\n        console.log('panel: observer got error');\r\n      },\r\n      complete: () => {\r\n        console.log('panel: observer got complete');\r\n        this.dataStream = null;\r\n      },\r\n    });\r\n  }\r\n\r\n  getAdditionalMenuItems() {\r\n    const items = [];\r\n    if (\r\n      config.exploreEnabled &&\r\n      this.contextSrv.isEditor &&\r\n      this.datasource &&\r\n      (this.datasource.meta.explore || this.datasource.meta.id === 'mixed')\r\n    ) {\r\n      items.push({\r\n        text: 'Explore',\r\n        click: 'ctrl.explore();',\r\n        icon: 'fa fa-fw fa-rocket',\r\n        shortcut: 'x',\r\n      });\r\n    }\r\n    return items;\r\n  }\r\n\r\n  async explore() {\r\n    const url = await getExploreUrl(this.panel, this.panel.targets, this.datasource, this.datasourceSrv, this.timeSrv);\r\n    if (url) {\r\n      this.$timeout(() => this.$location.url(url));\r\n    }\r\n  }\r\n\r\n  addQuery(target) {\r\n    target.refId = this.dashboard.getNextQueryLetter(this.panel);\r\n\r\n    this.panel.targets.push(target);\r\n    this.nextRefId = this.dashboard.getNextQueryLetter(this.panel);\r\n  }\r\n\r\n  removeQuery(target) {\r\n    const index = _.indexOf(this.panel.targets, target);\r\n    this.panel.targets.splice(index, 1);\r\n    this.nextRefId = this.dashboard.getNextQueryLetter(this.panel);\r\n    this.refresh();\r\n  }\r\n\r\n  moveQuery(target, direction) {\r\n    const index = _.indexOf(this.panel.targets, target);\r\n    _.move(this.panel.targets, index, index + direction);\r\n  }\r\n}\r\n\r\nexport { MetricsPanelCtrl };\r\n","import _ from 'lodash';\r\n\r\nexport class QueryCtrl {\r\n  target: any;\r\n  datasource: any;\r\n  panelCtrl: any;\r\n  panel: any;\r\n  hasRawMode: boolean;\r\n  error: string;\r\n  isLastQuery: boolean;\r\n\r\n  constructor(public $scope, public $injector) {\r\n    this.panel = this.panelCtrl.panel;\r\n    this.isLastQuery = _.indexOf(this.panel.targets, this.target) === this.panel.targets.length - 1;\r\n  }\r\n\r\n  refresh() {\r\n    this.panelCtrl.refresh();\r\n  }\r\n}\r\n","export class ThresholdMapper {\r\n  static alertToGraphThresholds(panel) {\r\n    for (let i = 0; i < panel.alert.conditions.length; i++) {\r\n      const condition = panel.alert.conditions[i];\r\n      if (condition.type !== 'query') {\r\n        continue;\r\n      }\r\n\r\n      const evaluator = condition.evaluator;\r\n      const thresholds = (panel.thresholds = []);\r\n\r\n      switch (evaluator.type) {\r\n        case 'gt': {\r\n          const value = evaluator.params[0];\r\n          thresholds.push({ value: value, op: 'gt' });\r\n          break;\r\n        }\r\n        case 'lt': {\r\n          const value = evaluator.params[0];\r\n          thresholds.push({ value: value, op: 'lt' });\r\n          break;\r\n        }\r\n        case 'outside_range': {\r\n          const value1 = evaluator.params[0];\r\n          const value2 = evaluator.params[1];\r\n\r\n          if (value1 > value2) {\r\n            thresholds.push({ value: value1, op: 'gt' });\r\n            thresholds.push({ value: value2, op: 'lt' });\r\n          } else {\r\n            thresholds.push({ value: value1, op: 'lt' });\r\n            thresholds.push({ value: value2, op: 'gt' });\r\n          }\r\n\r\n          break;\r\n        }\r\n        case 'within_range': {\r\n          const value1 = evaluator.params[0];\r\n          const value2 = evaluator.params[1];\r\n\r\n          if (value1 > value2) {\r\n            thresholds.push({ value: value1, op: 'lt' });\r\n            thresholds.push({ value: value2, op: 'gt' });\r\n          } else {\r\n            thresholds.push({ value: value1, op: 'gt' });\r\n            thresholds.push({ value: value2, op: 'lt' });\r\n          }\r\n          break;\r\n        }\r\n      }\r\n      break;\r\n    }\r\n\r\n    for (const t of panel.thresholds) {\r\n      t.fill = true;\r\n      t.line = true;\r\n      t.colorMode = 'critical';\r\n    }\r\n\r\n    const updated = true;\r\n    return updated;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport { ThresholdMapper } from './state/ThresholdMapper';\r\nimport { QueryPart } from 'app/core/components/query_part/query_part';\r\nimport alertDef from './state/alertDef';\r\nimport config from 'app/core/config';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class AlertTabCtrl {\r\n  panel: any;\r\n  panelCtrl: any;\r\n  testing: boolean;\r\n  testResult: any;\r\n  subTabIndex: number;\r\n  conditionTypes: any;\r\n  alert: any;\r\n  conditionModels: any;\r\n  evalFunctions: any;\r\n  evalOperators: any;\r\n  noDataModes: any;\r\n  executionErrorModes: any;\r\n  addNotificationSegment;\r\n  notifications;\r\n  alertNotifications;\r\n  error: string;\r\n  appSubUrl: string;\r\n  alertHistory: any;\r\n\r\n  /** @ngInject */\r\n  constructor(\r\n    private $scope,\r\n    private backendSrv,\r\n    private dashboardSrv,\r\n    private uiSegmentSrv,\r\n    private $q,\r\n    private datasourceSrv\r\n  ) {\r\n    this.panelCtrl = $scope.ctrl;\r\n    this.panel = this.panelCtrl.panel;\r\n    this.$scope.ctrl = this;\r\n    this.subTabIndex = 0;\r\n    this.evalFunctions = alertDef.evalFunctions;\r\n    this.evalOperators = alertDef.evalOperators;\r\n    this.conditionTypes = alertDef.conditionTypes;\r\n    this.noDataModes = alertDef.noDataModes;\r\n    this.executionErrorModes = alertDef.executionErrorModes;\r\n    this.appSubUrl = config.appSubUrl;\r\n  }\r\n\r\n  $onInit() {\r\n    this.addNotificationSegment = this.uiSegmentSrv.newPlusButton();\r\n\r\n    // subscribe to graph threshold handle changes\r\n    const thresholdChangedEventHandler = this.graphThresholdChanged.bind(this);\r\n    this.panelCtrl.events.on('threshold-changed', thresholdChangedEventHandler);\r\n\r\n    // set panel alert edit mode\r\n    this.$scope.$on('$destroy', () => {\r\n      this.panelCtrl.events.off('threshold-changed', thresholdChangedEventHandler);\r\n      this.panelCtrl.editingThresholds = false;\r\n      this.panelCtrl.render();\r\n    });\r\n\r\n    // build notification model\r\n    this.notifications = [];\r\n    this.alertNotifications = [];\r\n    this.alertHistory = [];\r\n\r\n    return this.backendSrv.get('/api/alert-notifications').then(res => {\r\n      this.notifications = res;\r\n\r\n      this.initModel();\r\n      this.validateModel();\r\n    });\r\n  }\r\n\r\n  getAlertHistory() {\r\n    this.backendSrv\r\n      .get(`/api/annotations?dashboardId=${this.panelCtrl.dashboard.id}&panelId=${this.panel.id}&limit=50&type=alert`)\r\n      .then(res => {\r\n        this.alertHistory = _.map(res, ah => {\r\n          ah.time = this.dashboardSrv.getCurrent().formatDate(ah.time, 'MMM D, YYYY HH:mm:ss');\r\n          ah.stateModel = alertDef.getStateDisplayModel(ah.newState);\r\n          ah.info = alertDef.getAlertAnnotationInfo(ah);\r\n          return ah;\r\n        });\r\n      });\r\n  }\r\n\r\n  getNotificationIcon(type): string {\r\n    switch (type) {\r\n      case 'email':\r\n        return 'fa fa-envelope';\r\n      case 'slack':\r\n        return 'fa fa-slack';\r\n      case 'victorops':\r\n        return 'fa fa-pagelines';\r\n      case 'webhook':\r\n        return 'fa fa-cubes';\r\n      case 'pagerduty':\r\n        return 'fa fa-bullhorn';\r\n      case 'opsgenie':\r\n        return 'fa fa-bell';\r\n      case 'hipchat':\r\n        return 'fa fa-mail-forward';\r\n      case 'pushover':\r\n        return 'fa fa-mobile';\r\n      case 'kafka':\r\n        return 'fa fa-random';\r\n      case 'teams':\r\n        return 'fa fa-windows';\r\n    }\r\n    return 'fa fa-bell';\r\n  }\r\n\r\n  getNotifications() {\r\n    return Promise.resolve(\r\n      this.notifications.map(item => {\r\n        return this.uiSegmentSrv.newSegment(item.name);\r\n      })\r\n    );\r\n  }\r\n\r\n  changeTabIndex(newTabIndex) {\r\n    this.subTabIndex = newTabIndex;\r\n\r\n    if (this.subTabIndex === 2) {\r\n      this.getAlertHistory();\r\n    }\r\n  }\r\n\r\n  notificationAdded() {\r\n    const model = _.find(this.notifications, {\r\n      name: this.addNotificationSegment.value,\r\n    });\r\n    if (!model) {\r\n      return;\r\n    }\r\n\r\n    this.alertNotifications.push({\r\n      name: model.name,\r\n      iconClass: this.getNotificationIcon(model.type),\r\n      isDefault: false,\r\n    });\r\n    this.alert.notifications.push({ id: model.id });\r\n\r\n    // reset plus button\r\n    this.addNotificationSegment.value = this.uiSegmentSrv.newPlusButton().value;\r\n    this.addNotificationSegment.html = this.uiSegmentSrv.newPlusButton().html;\r\n  }\r\n\r\n  removeNotification(index) {\r\n    this.alert.notifications.splice(index, 1);\r\n    this.alertNotifications.splice(index, 1);\r\n  }\r\n\r\n  initModel() {\r\n    const alert = (this.alert = this.panel.alert);\r\n    if (!alert) {\r\n      return;\r\n    }\r\n\r\n    alert.conditions = alert.conditions || [];\r\n    if (alert.conditions.length === 0) {\r\n      alert.conditions.push(this.buildDefaultCondition());\r\n    }\r\n\r\n    alert.noDataState = alert.noDataState || config.alertingNoDataOrNullValues;\r\n    alert.executionErrorState = alert.executionErrorState || config.alertingErrorOrTimeout;\r\n    alert.frequency = alert.frequency || '60s';\r\n    alert.handler = alert.handler || 1;\r\n    alert.notifications = alert.notifications || [];\r\n\r\n    const defaultName = this.panel.title + ' alert';\r\n    alert.name = alert.name || defaultName;\r\n\r\n    this.conditionModels = _.reduce(\r\n      alert.conditions,\r\n      (memo, value) => {\r\n        memo.push(this.buildConditionModel(value));\r\n        return memo;\r\n      },\r\n      []\r\n    );\r\n\r\n    ThresholdMapper.alertToGraphThresholds(this.panel);\r\n\r\n    for (const addedNotification of alert.notifications) {\r\n      const model = _.find(this.notifications, { id: addedNotification.id });\r\n      if (model && model.isDefault === false) {\r\n        model.iconClass = this.getNotificationIcon(model.type);\r\n        this.alertNotifications.push(model);\r\n      }\r\n    }\r\n\r\n    for (const notification of this.notifications) {\r\n      if (notification.isDefault) {\r\n        notification.iconClass = this.getNotificationIcon(notification.type);\r\n        notification.bgColor = '#00678b';\r\n        this.alertNotifications.push(notification);\r\n      }\r\n    }\r\n\r\n    this.panelCtrl.editingThresholds = true;\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  graphThresholdChanged(evt) {\r\n    for (const condition of this.alert.conditions) {\r\n      if (condition.type === 'query') {\r\n        condition.evaluator.params[evt.handleIndex] = evt.threshold.value;\r\n        this.evaluatorParamsChanged();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  buildDefaultCondition() {\r\n    return {\r\n      type: 'query',\r\n      query: { params: ['A', '5m', 'now'] },\r\n      reducer: { type: 'avg', params: [] },\r\n      evaluator: { type: 'gt', params: [null] },\r\n      operator: { type: 'and' },\r\n    };\r\n  }\r\n\r\n  validateModel() {\r\n    if (!this.alert) {\r\n      return;\r\n    }\r\n\r\n    let firstTarget;\r\n    let foundTarget = null;\r\n\r\n    for (const condition of this.alert.conditions) {\r\n      if (condition.type !== 'query') {\r\n        continue;\r\n      }\r\n\r\n      for (const target of this.panel.targets) {\r\n        if (!firstTarget) {\r\n          firstTarget = target;\r\n        }\r\n        if (condition.query.params[0] === target.refId) {\r\n          foundTarget = target;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!foundTarget) {\r\n        if (firstTarget) {\r\n          condition.query.params[0] = firstTarget.refId;\r\n          foundTarget = firstTarget;\r\n        } else {\r\n          this.error = 'Could not find any metric queries';\r\n        }\r\n      }\r\n\r\n      const datasourceName = foundTarget.datasource || this.panel.datasource;\r\n      this.datasourceSrv.get(datasourceName).then(ds => {\r\n        if (!ds.meta.alerting) {\r\n          this.error = 'The datasource does not support alerting queries';\r\n        } else if (ds.targetContainsTemplate(foundTarget)) {\r\n          this.error = 'Template variables are not supported in alert queries';\r\n        } else {\r\n          this.error = '';\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  buildConditionModel(source) {\r\n    const cm: any = { source: source, type: source.type };\r\n\r\n    cm.queryPart = new QueryPart(source.query, alertDef.alertQueryDef);\r\n    cm.reducerPart = alertDef.createReducerPart(source.reducer);\r\n    cm.evaluator = source.evaluator;\r\n    cm.operator = source.operator;\r\n\r\n    return cm;\r\n  }\r\n\r\n  handleQueryPartEvent(conditionModel, evt) {\r\n    switch (evt.name) {\r\n      case 'action-remove-part': {\r\n        break;\r\n      }\r\n      case 'get-part-actions': {\r\n        return this.$q.when([]);\r\n      }\r\n      case 'part-param-changed': {\r\n        this.validateModel();\r\n      }\r\n      case 'get-param-options': {\r\n        const result = this.panel.targets.map(target => {\r\n          return this.uiSegmentSrv.newSegment({ value: target.refId });\r\n        });\r\n\r\n        return this.$q.when(result);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleReducerPartEvent(conditionModel, evt) {\r\n    switch (evt.name) {\r\n      case 'action': {\r\n        conditionModel.source.reducer.type = evt.action.value;\r\n        conditionModel.reducerPart = alertDef.createReducerPart(conditionModel.source.reducer);\r\n        break;\r\n      }\r\n      case 'get-part-actions': {\r\n        const result = [];\r\n        for (const type of alertDef.reducerTypes) {\r\n          if (type.value !== conditionModel.source.reducer.type) {\r\n            result.push(type);\r\n          }\r\n        }\r\n        return this.$q.when(result);\r\n      }\r\n    }\r\n  }\r\n\r\n  addCondition(type) {\r\n    const condition = this.buildDefaultCondition();\r\n    // add to persited model\r\n    this.alert.conditions.push(condition);\r\n    // add to view model\r\n    this.conditionModels.push(this.buildConditionModel(condition));\r\n  }\r\n\r\n  removeCondition(index) {\r\n    this.alert.conditions.splice(index, 1);\r\n    this.conditionModels.splice(index, 1);\r\n  }\r\n\r\n  delete() {\r\n    appEvents.emit('confirm-modal', {\r\n      title: 'Delete Alert',\r\n      text: 'Are you sure you want to delete this alert rule?',\r\n      text2: 'You need to save dashboard for the delete to take effect',\r\n      icon: 'fa-trash',\r\n      yesText: 'Delete',\r\n      onConfirm: () => {\r\n        delete this.panel.alert;\r\n        this.alert = null;\r\n        this.panel.thresholds = [];\r\n        this.conditionModels = [];\r\n        this.panelCtrl.alertState = null;\r\n        this.panelCtrl.render();\r\n      },\r\n    });\r\n  }\r\n\r\n  enable() {\r\n    this.panel.alert = {};\r\n    this.initModel();\r\n  }\r\n\r\n  evaluatorParamsChanged() {\r\n    ThresholdMapper.alertToGraphThresholds(this.panel);\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  evaluatorTypeChanged(evaluator) {\r\n    // ensure params array is correct length\r\n    switch (evaluator.type) {\r\n      case 'lt':\r\n      case 'gt': {\r\n        evaluator.params = [evaluator.params[0]];\r\n        break;\r\n      }\r\n      case 'within_range':\r\n      case 'outside_range': {\r\n        evaluator.params = [evaluator.params[0], evaluator.params[1]];\r\n        break;\r\n      }\r\n      case 'no_value': {\r\n        evaluator.params = [];\r\n      }\r\n    }\r\n\r\n    this.evaluatorParamsChanged();\r\n  }\r\n\r\n  clearHistory() {\r\n    appEvents.emit('confirm-modal', {\r\n      title: 'Delete Alert History',\r\n      text: 'Are you sure you want to remove all history & annotations for this alert?',\r\n      icon: 'fa-trash',\r\n      yesText: 'Yes',\r\n      onConfirm: () => {\r\n        this.backendSrv\r\n          .post('/api/annotations/mass-delete', {\r\n            dashboardId: this.panelCtrl.dashboard.id,\r\n            panelId: this.panel.id,\r\n          })\r\n          .then(res => {\r\n            this.alertHistory = [];\r\n            this.panelCtrl.refresh();\r\n          });\r\n      },\r\n    });\r\n  }\r\n\r\n  test() {\r\n    this.testing = true;\r\n    this.testResult = false;\r\n\r\n    const payload = {\r\n      dashboard: this.dashboardSrv.getCurrent().getSaveModelClone(),\r\n      panelId: this.panelCtrl.panel.id,\r\n    };\r\n\r\n    return this.backendSrv.post('/api/alerts/test', payload).then(res => {\r\n      this.testResult = res;\r\n      this.testing = false;\r\n    });\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function alertTab() {\r\n  'use strict';\r\n  return {\r\n    restrict: 'E',\r\n    scope: true,\r\n    templateUrl: 'public/app/features/alerting/partials/alert_tab.html',\r\n    controller: AlertTabCtrl,\r\n  };\r\n}\r\n","import { isBoolean, isNumber, sortedUniq, sortedIndexOf, unescape as htmlUnescaped } from 'lodash';\r\nimport moment from 'moment';\r\nimport { saveAs } from 'file-saver';\r\nimport { isNullOrUndefined } from 'util';\r\n\r\nconst DEFAULT_DATETIME_FORMAT = 'YYYY-MM-DDTHH:mm:ssZ';\r\nconst POINT_TIME_INDEX = 1;\r\nconst POINT_VALUE_INDEX = 0;\r\n\r\nconst END_COLUMN = ';';\r\nconst END_ROW = '\\r\\n';\r\nconst QUOTE = '\"';\r\nconst EXPORT_FILENAME = 'grafana_data_export.csv';\r\n\r\nfunction csvEscaped(text) {\r\n  if (!text) {\r\n    return text;\r\n  }\r\n\r\n  return text.split(QUOTE).join(QUOTE + QUOTE);\r\n}\r\n\r\nconst domParser = new DOMParser();\r\nfunction htmlDecoded(text) {\r\n  if (!text) {\r\n    return text;\r\n  }\r\n\r\n  const regexp = /&[^;]+;/g;\r\n  function htmlDecoded(value) {\r\n    const parsedDom = domParser.parseFromString(value, 'text/html');\r\n    return parsedDom.body.textContent;\r\n  }\r\n  return text.replace(regexp, htmlDecoded).replace(regexp, htmlDecoded);\r\n}\r\n\r\nfunction formatSpecialHeader(useExcelHeader) {\r\n  return useExcelHeader ? `sep=${END_COLUMN}${END_ROW}` : '';\r\n}\r\n\r\nfunction formatRow(row, addEndRowDelimiter = true) {\r\n  let text = '';\r\n  for (let i = 0; i < row.length; i += 1) {\r\n    if (isBoolean(row[i]) || isNullOrUndefined(row[i])) {\r\n      text += row[i];\r\n    } else if (isNumber(row[i])) {\r\n      text += row[i].toLocaleString();\r\n    } else {\r\n      text += `${QUOTE}${csvEscaped(htmlUnescaped(htmlDecoded(row[i])))}${QUOTE}`;\r\n    }\r\n\r\n    if (i < row.length - 1) {\r\n      text += END_COLUMN;\r\n    }\r\n  }\r\n  return addEndRowDelimiter ? text + END_ROW : text;\r\n}\r\n\r\nexport function convertSeriesListToCsv(seriesList, dateTimeFormat = DEFAULT_DATETIME_FORMAT, excel = false) {\r\n  let text = formatSpecialHeader(excel) + formatRow(['Series', 'Time', 'Value']);\r\n  for (let seriesIndex = 0; seriesIndex < seriesList.length; seriesIndex += 1) {\r\n    for (let i = 0; i < seriesList[seriesIndex].datapoints.length; i += 1) {\r\n      text += formatRow(\r\n        [\r\n          seriesList[seriesIndex].alias,\r\n          moment(seriesList[seriesIndex].datapoints[i][POINT_TIME_INDEX]).format(dateTimeFormat),\r\n          seriesList[seriesIndex].datapoints[i][POINT_VALUE_INDEX],\r\n        ],\r\n        i < seriesList[seriesIndex].datapoints.length - 1 || seriesIndex < seriesList.length - 1\r\n      );\r\n    }\r\n  }\r\n  return text;\r\n}\r\n\r\nexport function exportSeriesListToCsv(seriesList, dateTimeFormat = DEFAULT_DATETIME_FORMAT, excel = false) {\r\n  const text = convertSeriesListToCsv(seriesList, dateTimeFormat, excel);\r\n  saveSaveBlob(text, EXPORT_FILENAME);\r\n}\r\n\r\nexport function convertSeriesListToCsvColumns(seriesList, dateTimeFormat = DEFAULT_DATETIME_FORMAT, excel = false) {\r\n  // add header\r\n  let text =\r\n    formatSpecialHeader(excel) +\r\n    formatRow(\r\n      ['Time'].concat(\r\n        seriesList.map(val => {\r\n          return val.alias;\r\n        })\r\n      )\r\n    );\r\n  // process data\r\n  seriesList = mergeSeriesByTime(seriesList);\r\n\r\n  // make text\r\n  for (let i = 0; i < seriesList[0].datapoints.length; i += 1) {\r\n    const timestamp = moment(seriesList[0].datapoints[i][POINT_TIME_INDEX]).format(dateTimeFormat);\r\n    text += formatRow(\r\n      [timestamp].concat(\r\n        seriesList.map(series => {\r\n          return series.datapoints[i][POINT_VALUE_INDEX];\r\n        })\r\n      ),\r\n      i < seriesList[0].datapoints.length - 1\r\n    );\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\n/**\r\n * Collect all unique timestamps from series list and use it to fill\r\n * missing points by null.\r\n */\r\nfunction mergeSeriesByTime(seriesList) {\r\n  let timestamps = [];\r\n  for (let i = 0; i < seriesList.length; i++) {\r\n    const seriesPoints = seriesList[i].datapoints;\r\n    for (let j = 0; j < seriesPoints.length; j++) {\r\n      timestamps.push(seriesPoints[j][POINT_TIME_INDEX]);\r\n    }\r\n  }\r\n  timestamps = sortedUniq(timestamps.sort());\r\n\r\n  for (let i = 0; i < seriesList.length; i++) {\r\n    const seriesPoints = seriesList[i].datapoints;\r\n    const seriesTimestamps = seriesPoints.map(p => p[POINT_TIME_INDEX]);\r\n    const extendedSeries = [];\r\n    let pointIndex;\r\n    for (let j = 0; j < timestamps.length; j++) {\r\n      pointIndex = sortedIndexOf(seriesTimestamps, timestamps[j]);\r\n      if (pointIndex !== -1) {\r\n        extendedSeries.push(seriesPoints[pointIndex]);\r\n      } else {\r\n        extendedSeries.push([null, timestamps[j]]);\r\n      }\r\n    }\r\n    seriesList[i].datapoints = extendedSeries;\r\n  }\r\n  return seriesList;\r\n}\r\n\r\nexport function exportSeriesListToCsvColumns(seriesList, dateTimeFormat = DEFAULT_DATETIME_FORMAT, excel = false) {\r\n  const text = convertSeriesListToCsvColumns(seriesList, dateTimeFormat, excel);\r\n  saveSaveBlob(text, EXPORT_FILENAME);\r\n}\r\n\r\nexport function convertTableDataToCsv(table, excel = false) {\r\n  let text = formatSpecialHeader(excel);\r\n  // add headline\r\n  text += formatRow(table.columns.map(val => val.title || val.text));\r\n  // process data\r\n  for (let i = 0; i < table.rows.length; i += 1) {\r\n    text += formatRow(table.rows[i], i < table.rows.length - 1);\r\n  }\r\n  return text;\r\n}\r\n\r\nexport function exportTableDataToCsv(table, excel = false) {\r\n  const text = convertTableDataToCsv(table, excel);\r\n  saveSaveBlob(text, EXPORT_FILENAME);\r\n}\r\n\r\nexport function saveSaveBlob(payload, fname) {\r\n  const blob = new Blob([payload], { type: 'text/csv;charset=utf-8;header=present;' });\r\n  saveAs(blob, fname);\r\n}\r\n","import { PanelCtrl } from 'app/features/panel/panel_ctrl';\r\nimport { MetricsPanelCtrl } from 'app/features/panel/metrics_panel_ctrl';\r\nimport { QueryCtrl } from 'app/features/panel/query_ctrl';\r\nimport { alertTab } from 'app/features/alerting/AlertTabCtrl';\r\nimport { loadPluginCss } from 'app/features/plugins/plugin_loader';\r\n\r\nexport { PanelCtrl, MetricsPanelCtrl, QueryCtrl, alertTab, loadPluginCss };\r\n","// Copyright (c) 2014, Hugh Kennedy\r\n// Based on code from https://github.com/hughsk/flat/blob/master/index.js\r\n//\r\nexport default function flatten(target, opts): any {\r\n  opts = opts || {};\r\n\r\n  const delimiter = opts.delimiter || '.';\r\n  let maxDepth = opts.maxDepth || 3;\r\n  let currentDepth = 1;\r\n  const output = {};\r\n\r\n  function step(object, prev) {\r\n    Object.keys(object).forEach(key => {\r\n      const value = object[key];\r\n      const isarray = opts.safe && Array.isArray(value);\r\n      const type = Object.prototype.toString.call(value);\r\n      const isobject = type === '[object Object]';\r\n\r\n      const newKey = prev ? prev + delimiter + key : key;\r\n\r\n      if (!opts.maxDepth) {\r\n        maxDepth = currentDepth + 1;\r\n      }\r\n\r\n      if (!isarray && isobject && Object.keys(value).length && currentDepth < maxDepth) {\r\n        ++currentDepth;\r\n        return step(value, newKey);\r\n      }\r\n\r\n      output[newKey] = value;\r\n    });\r\n  }\r\n\r\n  step(target, null);\r\n\r\n  return output;\r\n}\r\n","import _ from 'lodash';\r\n\r\nconst versionPattern = /^(\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))?(?:-([0-9A-Za-z\\.]+))?/;\r\n\r\nexport class SemVersion {\r\n  major: number;\r\n  minor: number;\r\n  patch: number;\r\n  meta: string;\r\n\r\n  constructor(version: string) {\r\n    const match = versionPattern.exec(version);\r\n    if (match) {\r\n      this.major = Number(match[1]);\r\n      this.minor = Number(match[2] || 0);\r\n      this.patch = Number(match[3] || 0);\r\n      this.meta = match[4];\r\n    }\r\n  }\r\n\r\n  isGtOrEq(version: string): boolean {\r\n    const compared = new SemVersion(version);\r\n    return !(this.major < compared.major || this.minor < compared.minor || this.patch < compared.patch);\r\n  }\r\n\r\n  isValid(): boolean {\r\n    return _.isNumber(this.major);\r\n  }\r\n}\r\n\r\nexport function isVersionGtOrEq(a: string, b: string): boolean {\r\n  const aSemver = new SemVersion(a);\r\n  return aSemver.isGtOrEq(b);\r\n}\r\n","import _ from 'lodash';\r\nimport { isVersionGtOrEq } from 'app/core/utils/version';\r\n\r\nconst index = {};\r\n\r\nfunction addFuncDef(funcDef) {\r\n  funcDef.params = funcDef.params || [];\r\n  funcDef.defaultParams = funcDef.defaultParams || [];\r\n\r\n  index[funcDef.name] = funcDef;\r\n  if (funcDef.shortName) {\r\n    index[funcDef.shortName] = funcDef;\r\n  }\r\n}\r\n\r\nconst optionalSeriesRefArgs = [{ name: 'other', type: 'value_or_series', optional: true, multiple: true }];\r\n\r\naddFuncDef({\r\n  name: 'scaleToSeconds',\r\n  category: 'Transform',\r\n  params: [{ name: 'seconds', type: 'int' }],\r\n  defaultParams: [1],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'perSecond',\r\n  category: 'Transform',\r\n  params: [{ name: 'max value', type: 'int', optional: true }],\r\n  defaultParams: [],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'holtWintersForecast',\r\n  category: 'Calculate',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'holtWintersConfidenceBands',\r\n  category: 'Calculate',\r\n  params: [{ name: 'delta', type: 'int' }],\r\n  defaultParams: [3],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'holtWintersAberration',\r\n  category: 'Calculate',\r\n  params: [{ name: 'delta', type: 'int' }],\r\n  defaultParams: [3],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'nPercentile',\r\n  category: 'Calculate',\r\n  params: [{ name: 'Nth percentile', type: 'int' }],\r\n  defaultParams: [95],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'diffSeries',\r\n  params: optionalSeriesRefArgs,\r\n  defaultParams: ['#A'],\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'stddevSeries',\r\n  params: optionalSeriesRefArgs,\r\n  defaultParams: [''],\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'divideSeries',\r\n  params: optionalSeriesRefArgs,\r\n  defaultParams: ['#A'],\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'multiplySeries',\r\n  params: optionalSeriesRefArgs,\r\n  defaultParams: ['#A'],\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'asPercent',\r\n  params: optionalSeriesRefArgs,\r\n  defaultParams: ['#A'],\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'group',\r\n  params: optionalSeriesRefArgs,\r\n  defaultParams: ['#A', '#B'],\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'sumSeries',\r\n  shortName: 'sum',\r\n  category: 'Combine',\r\n  params: optionalSeriesRefArgs,\r\n  defaultParams: [''],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'averageSeries',\r\n  shortName: 'avg',\r\n  category: 'Combine',\r\n  params: optionalSeriesRefArgs,\r\n  defaultParams: [''],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'rangeOfSeries',\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'percentileOfSeries',\r\n  category: 'Combine',\r\n  params: [{ name: 'n', type: 'int' }, { name: 'interpolate', type: 'boolean', options: ['true', 'false'] }],\r\n  defaultParams: [95, 'false'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'sumSeriesWithWildcards',\r\n  category: 'Combine',\r\n  params: [{ name: 'node', type: 'int', multiple: true }],\r\n  defaultParams: [3],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'maxSeries',\r\n  shortName: 'max',\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'minSeries',\r\n  shortName: 'min',\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'averageSeriesWithWildcards',\r\n  category: 'Combine',\r\n  params: [{ name: 'node', type: 'int', multiple: true }],\r\n  defaultParams: [3],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'alias',\r\n  category: 'Alias',\r\n  params: [{ name: 'alias', type: 'string' }],\r\n  defaultParams: ['alias'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'aliasSub',\r\n  category: 'Alias',\r\n  params: [{ name: 'search', type: 'string' }, { name: 'replace', type: 'string' }],\r\n  defaultParams: ['', '\\\\1'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'consolidateBy',\r\n  category: 'Special',\r\n  params: [\r\n    {\r\n      name: 'function',\r\n      type: 'string',\r\n      options: ['sum', 'average', 'min', 'max'],\r\n    },\r\n  ],\r\n  defaultParams: ['max'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'cumulative',\r\n  category: 'Special',\r\n  params: [],\r\n  defaultParams: [],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'groupByNode',\r\n  category: 'Combine',\r\n  params: [\r\n    {\r\n      name: 'node',\r\n      type: 'int',\r\n      options: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12],\r\n    },\r\n    {\r\n      name: 'function',\r\n      type: 'string',\r\n      options: ['sum', 'avg', 'maxSeries'],\r\n    },\r\n  ],\r\n  defaultParams: [3, 'sum'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'aliasByNode',\r\n  category: 'Alias',\r\n  params: [\r\n    {\r\n      name: 'node',\r\n      type: 'int',\r\n      options: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12],\r\n      multiple: true,\r\n    },\r\n  ],\r\n  defaultParams: [3],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'substr',\r\n  category: 'Special',\r\n  params: [\r\n    {\r\n      name: 'start',\r\n      type: 'int',\r\n      options: [-6, -5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12],\r\n    },\r\n    {\r\n      name: 'stop',\r\n      type: 'int',\r\n      options: [-6, -5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12],\r\n    },\r\n  ],\r\n  defaultParams: [0, 0],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'sortByName',\r\n  category: 'Sorting',\r\n  params: [\r\n    {\r\n      name: 'natural',\r\n      type: 'boolean',\r\n      options: ['true', 'false'],\r\n      optional: true,\r\n    },\r\n  ],\r\n  defaultParams: ['false'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'sortByMaxima',\r\n  category: 'Sorting',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'sortByMinima',\r\n  category: 'Sorting',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'sortByTotal',\r\n  category: 'Sorting',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'aliasByMetric',\r\n  category: 'Alias',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'randomWalk',\r\n  fake: true,\r\n  category: 'Special',\r\n  params: [{ name: 'name', type: 'string' }],\r\n  defaultParams: ['randomWalk'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'countSeries',\r\n  category: 'Combine',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'constantLine',\r\n  category: 'Special',\r\n  params: [{ name: 'value', type: 'int' }],\r\n  defaultParams: [10],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'cactiStyle',\r\n  category: 'Special',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'keepLastValue',\r\n  category: 'Transform',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [100],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'changed',\r\n  category: 'Special',\r\n  params: [],\r\n  defaultParams: [],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'scale',\r\n  category: 'Transform',\r\n  params: [{ name: 'factor', type: 'int' }],\r\n  defaultParams: [1],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'offset',\r\n  category: 'Transform',\r\n  params: [{ name: 'amount', type: 'int' }],\r\n  defaultParams: [10],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'transformNull',\r\n  category: 'Transform',\r\n  params: [{ name: 'amount', type: 'int' }],\r\n  defaultParams: [0],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'integral',\r\n  category: 'Transform',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'derivative',\r\n  category: 'Transform',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'nonNegativeDerivative',\r\n  category: 'Transform',\r\n  params: [{ name: 'max value or 0', type: 'int', optional: true }],\r\n  defaultParams: [''],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'timeShift',\r\n  category: 'Transform',\r\n  params: [\r\n    {\r\n      name: 'amount',\r\n      type: 'select',\r\n      options: ['1h', '6h', '12h', '1d', '2d', '7d', '14d', '30d'],\r\n    },\r\n  ],\r\n  defaultParams: ['1d'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'timeStack',\r\n  category: 'Transform',\r\n  params: [\r\n    {\r\n      name: 'timeShiftUnit',\r\n      type: 'select',\r\n      options: ['1h', '6h', '12h', '1d', '2d', '7d', '14d', '30d'],\r\n    },\r\n    { name: 'timeShiftStart', type: 'int' },\r\n    { name: 'timeShiftEnd', type: 'int' },\r\n  ],\r\n  defaultParams: ['1d', 0, 7],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'summarize',\r\n  category: 'Transform',\r\n  params: [\r\n    { name: 'interval', type: 'string' },\r\n    {\r\n      name: 'func',\r\n      type: 'select',\r\n      options: ['sum', 'avg', 'min', 'max', 'last'],\r\n    },\r\n    {\r\n      name: 'alignToFrom',\r\n      type: 'boolean',\r\n      optional: true,\r\n      options: ['false', 'true'],\r\n    },\r\n  ],\r\n  defaultParams: ['1h', 'sum', 'false'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'smartSummarize',\r\n  category: 'Transform',\r\n  params: [\r\n    { name: 'interval', type: 'string' },\r\n    {\r\n      name: 'func',\r\n      type: 'select',\r\n      options: ['sum', 'avg', 'min', 'max', 'last'],\r\n    },\r\n  ],\r\n  defaultParams: ['1h', 'sum'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'absolute',\r\n  category: 'Transform',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'hitcount',\r\n  category: 'Transform',\r\n  params: [{ name: 'interval', type: 'string' }],\r\n  defaultParams: ['10s'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'log',\r\n  category: 'Transform',\r\n  params: [{ name: 'base', type: 'int' }],\r\n  defaultParams: ['10'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'averageAbove',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [25],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'averageBelow',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [25],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'currentAbove',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [25],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'currentBelow',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [25],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'maximumAbove',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'value', type: 'int' }],\r\n  defaultParams: [0],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'maximumBelow',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'value', type: 'int' }],\r\n  defaultParams: [0],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'minimumAbove',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'value', type: 'int' }],\r\n  defaultParams: [0],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'minimumBelow',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'value', type: 'int' }],\r\n  defaultParams: [0],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'limit',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'mostDeviant',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [10],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'exclude',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'exclude', type: 'string' }],\r\n  defaultParams: ['exclude'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'highestCurrent',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'count', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'highestMax',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'count', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'lowestCurrent',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'count', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'movingAverage',\r\n  category: 'Calculate',\r\n  params: [\r\n    {\r\n      name: 'windowSize',\r\n      type: 'int_or_interval',\r\n      options: ['5', '7', '10', '5min', '10min', '30min', '1hour'],\r\n    },\r\n  ],\r\n  defaultParams: [10],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'movingMedian',\r\n  category: 'Calculate',\r\n  params: [\r\n    {\r\n      name: 'windowSize',\r\n      type: 'int_or_interval',\r\n      options: ['5', '7', '10', '5min', '10min', '30min', '1hour'],\r\n    },\r\n  ],\r\n  defaultParams: ['5'],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'stdev',\r\n  category: 'Calculate',\r\n  params: [{ name: 'n', type: 'int' }, { name: 'tolerance', type: 'int' }],\r\n  defaultParams: [5, 0.1],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'highestAverage',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'count', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'lowestAverage',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'count', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'removeAbovePercentile',\r\n  category: 'Filter Data',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'removeAboveValue',\r\n  category: 'Filter Data',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'removeBelowPercentile',\r\n  category: 'Filter Data',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'removeBelowValue',\r\n  category: 'Filter Data',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [5],\r\n});\r\n\r\naddFuncDef({\r\n  name: 'useSeriesAbove',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'value', type: 'int' }, { name: 'search', type: 'string' }, { name: 'replace', type: 'string' }],\r\n  defaultParams: [0, 'search', 'replace'],\r\n});\r\n\r\n////////////////////\r\n// Graphite 1.0.x //\r\n////////////////////\r\n\r\naddFuncDef({\r\n  name: 'aggregateLine',\r\n  category: 'Calculate',\r\n  params: [\r\n    {\r\n      name: 'func',\r\n      type: 'select',\r\n      options: ['sum', 'avg', 'min', 'max', 'last'],\r\n    },\r\n  ],\r\n  defaultParams: ['avg'],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'averageOutsidePercentile',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [95],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'delay',\r\n  category: 'Transform',\r\n  params: [{ name: 'steps', type: 'int' }],\r\n  defaultParams: [1],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'exponentialMovingAverage',\r\n  category: 'Calculate',\r\n  params: [\r\n    {\r\n      name: 'windowSize',\r\n      type: 'int_or_interval',\r\n      options: ['5', '7', '10', '5min', '10min', '30min', '1hour'],\r\n    },\r\n  ],\r\n  defaultParams: [10],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'fallbackSeries',\r\n  category: 'Special',\r\n  params: [{ name: 'fallback', type: 'string' }],\r\n  defaultParams: ['constantLine(0)'],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'grep',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'grep', type: 'string' }],\r\n  defaultParams: ['grep'],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'groupByNodes',\r\n  category: 'Combine',\r\n  params: [\r\n    {\r\n      name: 'function',\r\n      type: 'string',\r\n      options: ['sum', 'avg', 'maxSeries'],\r\n    },\r\n    {\r\n      name: 'node',\r\n      type: 'int',\r\n      options: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12],\r\n      multiple: true,\r\n    },\r\n  ],\r\n  defaultParams: ['sum', 3],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'integralByInterval',\r\n  category: 'Transform',\r\n  params: [\r\n    {\r\n      name: 'intervalUnit',\r\n      type: 'select',\r\n      options: ['1h', '6h', '12h', '1d', '2d', '7d', '14d', '30d'],\r\n    },\r\n  ],\r\n  defaultParams: ['1d'],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'interpolate',\r\n  category: 'Transform',\r\n  params: [{ name: 'limit', type: 'int', optional: true }],\r\n  defaultParams: [],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'invert',\r\n  category: 'Transform',\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'isNonNull',\r\n  category: 'Combine',\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'linearRegression',\r\n  category: 'Calculate',\r\n  params: [\r\n    {\r\n      name: 'startSourceAt',\r\n      type: 'select',\r\n      options: ['-1h', '-6h', '-12h', '-1d', '-2d', '-7d', '-14d', '-30d'],\r\n      optional: true,\r\n    },\r\n    {\r\n      name: 'endSourceAt',\r\n      type: 'select',\r\n      options: ['-1h', '-6h', '-12h', '-1d', '-2d', '-7d', '-14d', '-30d'],\r\n      optional: true,\r\n    },\r\n  ],\r\n  defaultParams: [],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'mapSeries',\r\n  shortName: 'map',\r\n  params: [{ name: 'node', type: 'int' }],\r\n  defaultParams: [3],\r\n  category: 'Combine',\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'movingMin',\r\n  category: 'Calculate',\r\n  params: [\r\n    {\r\n      name: 'windowSize',\r\n      type: 'int_or_interval',\r\n      options: ['5', '7', '10', '5min', '10min', '30min', '1hour'],\r\n    },\r\n  ],\r\n  defaultParams: [10],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'movingMax',\r\n  category: 'Calculate',\r\n  params: [\r\n    {\r\n      name: 'windowSize',\r\n      type: 'int_or_interval',\r\n      options: ['5', '7', '10', '5min', '10min', '30min', '1hour'],\r\n    },\r\n  ],\r\n  defaultParams: [10],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'movingSum',\r\n  category: 'Calculate',\r\n  params: [\r\n    {\r\n      name: 'windowSize',\r\n      type: 'int_or_interval',\r\n      options: ['5', '7', '10', '5min', '10min', '30min', '1hour'],\r\n    },\r\n  ],\r\n  defaultParams: [10],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'multiplySeriesWithWildcards',\r\n  category: 'Combine',\r\n  params: [\r\n    {\r\n      name: 'position',\r\n      type: 'int',\r\n      options: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12],\r\n      multiple: true,\r\n    },\r\n  ],\r\n  defaultParams: [2],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'offsetToZero',\r\n  category: 'Transform',\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'pow',\r\n  category: 'Transform',\r\n  params: [{ name: 'factor', type: 'int' }],\r\n  defaultParams: [10],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'powSeries',\r\n  category: 'Transform',\r\n  params: optionalSeriesRefArgs,\r\n  defaultParams: [''],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'reduceSeries',\r\n  shortName: 'reduce',\r\n  params: [\r\n    {\r\n      name: 'function',\r\n      type: 'string',\r\n      options: ['asPercent', 'diffSeries', 'divideSeries'],\r\n    },\r\n    {\r\n      name: 'reduceNode',\r\n      type: 'int',\r\n      options: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\r\n    },\r\n    { name: 'reduceMatchers', type: 'string', multiple: true },\r\n  ],\r\n  defaultParams: ['asPercent', 2, 'used_bytes'],\r\n  category: 'Combine',\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'removeBetweenPercentile',\r\n  category: 'Filter Series',\r\n  params: [{ name: 'n', type: 'int' }],\r\n  defaultParams: [95],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'removeEmptySeries',\r\n  category: 'Filter Series',\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'squareRoot',\r\n  category: 'Transform',\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'timeSlice',\r\n  category: 'Transform',\r\n  params: [\r\n    {\r\n      name: 'startSliceAt',\r\n      type: 'select',\r\n      options: ['-1h', '-6h', '-12h', '-1d', '-2d', '-7d', '-14d', '-30d'],\r\n    },\r\n    {\r\n      name: 'endSliceAt',\r\n      type: 'select',\r\n      options: ['-1h', '-6h', '-12h', '-1d', '-2d', '-7d', '-14d', '-30d'],\r\n      optional: true,\r\n    },\r\n  ],\r\n  defaultParams: ['-1h'],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'weightedAverage',\r\n  category: 'Combine',\r\n  params: [\r\n    { name: 'other', type: 'value_or_series', optional: true },\r\n    {\r\n      name: 'node',\r\n      type: 'int',\r\n      options: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12],\r\n    },\r\n  ],\r\n  defaultParams: ['#A', 4],\r\n  version: '1.0',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'seriesByTag',\r\n  category: 'Special',\r\n  params: [{ name: 'tagExpression', type: 'string', multiple: true }],\r\n  version: '1.1',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'groupByTags',\r\n  category: 'Combine',\r\n  params: [\r\n    {\r\n      name: 'function',\r\n      type: 'string',\r\n      options: ['sum', 'avg', 'maxSeries'],\r\n    },\r\n    { name: 'tag', type: 'string', multiple: true },\r\n  ],\r\n  defaultParams: ['sum', 'tag'],\r\n  version: '1.1',\r\n});\r\n\r\naddFuncDef({\r\n  name: 'aliasByTags',\r\n  category: 'Alias',\r\n  params: [{ name: 'tag', type: 'string', multiple: true }],\r\n  defaultParams: ['tag'],\r\n  version: '1.1',\r\n});\r\n\r\nfunction isVersionRelatedFunction(obj, graphiteVersion) {\r\n  return !obj.version || isVersionGtOrEq(graphiteVersion, obj.version);\r\n}\r\n\r\nexport class FuncInstance {\r\n  def: any;\r\n  params: any;\r\n  text: any;\r\n  added: boolean;\r\n\r\n  constructor(funcDef, options) {\r\n    this.def = funcDef;\r\n    this.params = [];\r\n\r\n    if (options && options.withDefaultParams) {\r\n      this.params = funcDef.defaultParams.slice(0);\r\n    }\r\n\r\n    this.updateText();\r\n  }\r\n\r\n  render(metricExp) {\r\n    const str = this.def.name + '(';\r\n\r\n    const parameters = _.map(this.params, (value, index) => {\r\n      let paramType;\r\n      if (index < this.def.params.length) {\r\n        paramType = this.def.params[index].type;\r\n      } else if (_.get(_.last(this.def.params), 'multiple')) {\r\n        paramType = _.get(_.last(this.def.params), 'type');\r\n      }\r\n      // param types that should never be quoted\r\n      if (_.includes(['value_or_series', 'boolean', 'int', 'float', 'node'], paramType)) {\r\n        return value;\r\n      }\r\n      // param types that might be quoted\r\n      if (_.includes(['int_or_interval', 'node_or_tag'], paramType) && _.isFinite(+value)) {\r\n        return _.toString(+value);\r\n      }\r\n      return \"'\" + value + \"'\";\r\n    });\r\n\r\n    // don't send any blank parameters to graphite\r\n    while (parameters[parameters.length - 1] === '') {\r\n      parameters.pop();\r\n    }\r\n\r\n    if (metricExp) {\r\n      parameters.unshift(metricExp);\r\n    }\r\n\r\n    return str + parameters.join(', ') + ')';\r\n  }\r\n\r\n  _hasMultipleParamsInString(strValue, index) {\r\n    if (strValue.indexOf(',') === -1) {\r\n      return false;\r\n    }\r\n\r\n    if (this.def.params[index + 1] && this.def.params[index + 1].optional) {\r\n      return true;\r\n    }\r\n\r\n    if (index + 1 >= this.def.params.length && _.get(_.last(this.def.params), 'multiple')) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  updateParam(strValue, index) {\r\n    // handle optional parameters\r\n    // if string contains ',' and next param is optional, split and update both\r\n    if (this._hasMultipleParamsInString(strValue, index)) {\r\n      _.each(strValue.split(','), (partVal, idx) => {\r\n        this.updateParam(partVal.trim(), index + idx);\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (strValue === '' && (index >= this.def.params.length || this.def.params[index].optional)) {\r\n      this.params.splice(index, 1);\r\n    } else {\r\n      this.params[index] = strValue;\r\n    }\r\n\r\n    this.updateText();\r\n  }\r\n\r\n  updateText() {\r\n    if (this.params.length === 0) {\r\n      this.text = this.def.name + '()';\r\n      return;\r\n    }\r\n\r\n    let text = this.def.name + '(';\r\n    text += this.params.join(', ');\r\n    text += ')';\r\n    this.text = text;\r\n  }\r\n}\r\n\r\nfunction createFuncInstance(funcDef, options?, idx?) {\r\n  if (_.isString(funcDef)) {\r\n    funcDef = getFuncDef(funcDef, idx);\r\n  }\r\n  return new FuncInstance(funcDef, options);\r\n}\r\n\r\nfunction getFuncDef(name, idx?) {\r\n  if (!(idx || index)[name]) {\r\n    throw { message: 'Method not found ' + name };\r\n  }\r\n  return (idx || index)[name];\r\n}\r\n\r\nfunction getFuncDefs(graphiteVersion, idx?) {\r\n  const funcs = {};\r\n  _.forEach(idx || index, funcDef => {\r\n    if (isVersionRelatedFunction(funcDef, graphiteVersion)) {\r\n      funcs[funcDef.name] = _.assign({}, funcDef, {\r\n        params: _.filter(funcDef.params, param => {\r\n          return isVersionRelatedFunction(param, graphiteVersion);\r\n        }),\r\n      });\r\n    }\r\n  });\r\n  return funcs;\r\n}\r\n\r\n// parse response from graphite /functions endpoint into internal format\r\nfunction parseFuncDefs(rawDefs) {\r\n  const funcDefs = {};\r\n\r\n  _.forEach(rawDefs || {}, (funcDef, funcName) => {\r\n    // skip graphite graph functions\r\n    if (funcDef.group === 'Graph') {\r\n      return;\r\n    }\r\n\r\n    let description = funcDef.description;\r\n    if (description) {\r\n      // tidy up some pydoc syntax that rst2html can't handle\r\n      description = description\r\n        .replace(/:py:func:`(.+)( <[^>]*>)?`/g, '``$1``')\r\n        .replace(/.. seealso:: /g, 'See also: ')\r\n        .replace(/.. code-block *:: *none/g, '.. code-block::');\r\n    }\r\n\r\n    const func = {\r\n      name: funcDef.name,\r\n      description: description,\r\n      category: funcDef.group,\r\n      params: [],\r\n      defaultParams: [],\r\n      fake: false,\r\n    };\r\n\r\n    // get rid of the first \"seriesList\" param\r\n    if (/^seriesLists?$/.test(_.get(funcDef, 'params[0].type', ''))) {\r\n      // handle functions that accept multiple seriesLists\r\n      // we leave the param in place but mark it optional, so users can add more series if they wish\r\n      if (funcDef.params[0].multiple) {\r\n        funcDef.params[0].required = false;\r\n        // otherwise chop off the first param, it'll be handled separately\r\n      } else {\r\n        funcDef.params.shift();\r\n      }\r\n      // tag function as fake\r\n    } else {\r\n      func.fake = true;\r\n    }\r\n\r\n    _.forEach(funcDef.params, rawParam => {\r\n      const param = {\r\n        name: rawParam.name,\r\n        type: 'string',\r\n        optional: !rawParam.required,\r\n        multiple: !!rawParam.multiple,\r\n        options: undefined,\r\n      };\r\n\r\n      if (rawParam.default !== undefined) {\r\n        func.defaultParams.push(_.toString(rawParam.default));\r\n      } else if (rawParam.suggestions) {\r\n        func.defaultParams.push(_.toString(rawParam.suggestions[0]));\r\n      } else {\r\n        func.defaultParams.push('');\r\n      }\r\n\r\n      if (rawParam.type === 'boolean') {\r\n        param.type = 'boolean';\r\n        param.options = ['true', 'false'];\r\n      } else if (rawParam.type === 'integer') {\r\n        param.type = 'int';\r\n      } else if (rawParam.type === 'float') {\r\n        param.type = 'float';\r\n      } else if (rawParam.type === 'node') {\r\n        param.type = 'node';\r\n        param.options = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'];\r\n      } else if (rawParam.type === 'nodeOrTag') {\r\n        param.type = 'node_or_tag';\r\n        param.options = ['name', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'];\r\n      } else if (rawParam.type === 'intOrInterval') {\r\n        param.type = 'int_or_interval';\r\n      } else if (rawParam.type === 'seriesList') {\r\n        param.type = 'value_or_series';\r\n      }\r\n\r\n      if (rawParam.options) {\r\n        param.options = _.map(rawParam.options, _.toString);\r\n      } else if (rawParam.suggestions) {\r\n        param.options = _.map(rawParam.suggestions, _.toString);\r\n      }\r\n\r\n      func.params.push(param);\r\n    });\r\n\r\n    funcDefs[funcName] = func;\r\n  });\r\n\r\n  return funcDefs;\r\n}\r\n\r\nexport default {\r\n  createFuncInstance: createFuncInstance,\r\n  getFuncDef: getFuncDef,\r\n  getFuncDefs: getFuncDefs,\r\n  parseFuncDefs: parseFuncDefs,\r\n};\r\n","import _ from 'lodash';\r\nimport * as dateMath from 'app/core/utils/datemath';\r\nimport { isVersionGtOrEq, SemVersion } from 'app/core/utils/version';\r\nimport gfunc from './gfunc';\r\n\r\n/** @ngInject */\r\nexport function GraphiteDatasource(this: any, instanceSettings, $q, backendSrv, templateSrv) {\r\n  this.basicAuth = instanceSettings.basicAuth;\r\n  this.url = instanceSettings.url;\r\n  this.name = instanceSettings.name;\r\n  this.graphiteVersion = instanceSettings.jsonData.graphiteVersion || '0.9';\r\n  this.supportsTags = supportsTags(this.graphiteVersion);\r\n  this.cacheTimeout = instanceSettings.cacheTimeout;\r\n  this.withCredentials = instanceSettings.withCredentials;\r\n  this.render_method = instanceSettings.render_method || 'POST';\r\n  this.funcDefs = null;\r\n  this.funcDefsPromise = null;\r\n\r\n  this.getQueryOptionsInfo = () => {\r\n    return {\r\n      maxDataPoints: true,\r\n      cacheTimeout: true,\r\n      links: [\r\n        {\r\n          text: 'Help',\r\n          url: 'http://docs.grafana.org/features/datasources/graphite/#using-graphite-in-grafana',\r\n        },\r\n      ],\r\n    };\r\n  };\r\n\r\n  this.query = function(options) {\r\n    const graphOptions = {\r\n      from: this.translateTime(options.rangeRaw.from, false),\r\n      until: this.translateTime(options.rangeRaw.to, true),\r\n      targets: options.targets,\r\n      format: options.format,\r\n      cacheTimeout: options.cacheTimeout || this.cacheTimeout,\r\n      maxDataPoints: options.maxDataPoints,\r\n    };\r\n\r\n    const params = this.buildGraphiteParams(graphOptions, options.scopedVars);\r\n    if (params.length === 0) {\r\n      return $q.when({ data: [] });\r\n    }\r\n\r\n    const httpOptions: any = {\r\n      method: 'POST',\r\n      url: '/render',\r\n      data: params.join('&'),\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n    };\r\n\r\n    this.addTracingHeaders(httpOptions, options);\r\n\r\n    if (options.panelId) {\r\n      httpOptions.requestId = this.name + '.panelId.' + options.panelId;\r\n    }\r\n\r\n    return this.doGraphiteRequest(httpOptions).then(this.convertDataPointsToMs);\r\n  };\r\n\r\n  this.addTracingHeaders = function(httpOptions, options) {\r\n    const proxyMode = !this.url.match(/^http/);\r\n    if (proxyMode) {\r\n      httpOptions.headers['X-Dashboard-Id'] = options.dashboardId;\r\n      httpOptions.headers['X-Panel-Id'] = options.panelId;\r\n    }\r\n  };\r\n\r\n  this.convertDataPointsToMs = result => {\r\n    if (!result || !result.data) {\r\n      return [];\r\n    }\r\n    for (let i = 0; i < result.data.length; i++) {\r\n      const series = result.data[i];\r\n      for (let y = 0; y < series.datapoints.length; y++) {\r\n        series.datapoints[y][1] *= 1000;\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  this.parseTags = tagString => {\r\n    let tags = [];\r\n    tags = tagString.split(',');\r\n    if (tags.length === 1) {\r\n      tags = tagString.split(' ');\r\n      if (tags[0] === '') {\r\n        tags = [];\r\n      }\r\n    }\r\n    return tags;\r\n  };\r\n\r\n  this.annotationQuery = function(options) {\r\n    // Graphite metric as annotation\r\n    if (options.annotation.target) {\r\n      const target = templateSrv.replace(options.annotation.target, {}, 'glob');\r\n      const graphiteQuery = {\r\n        rangeRaw: options.rangeRaw,\r\n        targets: [{ target: target }],\r\n        format: 'json',\r\n        maxDataPoints: 100,\r\n      };\r\n\r\n      return this.query(graphiteQuery).then(result => {\r\n        const list = [];\r\n\r\n        for (let i = 0; i < result.data.length; i++) {\r\n          const target = result.data[i];\r\n\r\n          for (let y = 0; y < target.datapoints.length; y++) {\r\n            const datapoint = target.datapoints[y];\r\n            if (!datapoint[0]) {\r\n              continue;\r\n            }\r\n\r\n            list.push({\r\n              annotation: options.annotation,\r\n              time: datapoint[1],\r\n              title: target.target,\r\n            });\r\n          }\r\n        }\r\n\r\n        return list;\r\n      });\r\n    } else {\r\n      // Graphite event as annotation\r\n      const tags = templateSrv.replace(options.annotation.tags);\r\n      return this.events({ range: options.rangeRaw, tags: tags }).then(results => {\r\n        const list = [];\r\n        for (let i = 0; i < results.data.length; i++) {\r\n          const e = results.data[i];\r\n\r\n          let tags = e.tags;\r\n          if (_.isString(e.tags)) {\r\n            tags = this.parseTags(e.tags);\r\n          }\r\n\r\n          list.push({\r\n            annotation: options.annotation,\r\n            time: e.when * 1000,\r\n            title: e.what,\r\n            tags: tags,\r\n            text: e.data,\r\n          });\r\n        }\r\n\r\n        return list;\r\n      });\r\n    }\r\n  };\r\n\r\n  this.events = function(options) {\r\n    try {\r\n      let tags = '';\r\n      if (options.tags) {\r\n        tags = '&tags=' + options.tags;\r\n      }\r\n      return this.doGraphiteRequest({\r\n        method: 'GET',\r\n        url:\r\n          '/events/get_data?from=' +\r\n          this.translateTime(options.range.from, false) +\r\n          '&until=' +\r\n          this.translateTime(options.range.to, true) +\r\n          tags,\r\n      });\r\n    } catch (err) {\r\n      return $q.reject(err);\r\n    }\r\n  };\r\n\r\n  this.targetContainsTemplate = target => {\r\n    return templateSrv.variableExists(target.target);\r\n  };\r\n\r\n  this.translateTime = (date, roundUp) => {\r\n    if (_.isString(date)) {\r\n      if (date === 'now') {\r\n        return 'now';\r\n      } else if (date.indexOf('now-') >= 0 && date.indexOf('/') === -1) {\r\n        date = date.substring(3);\r\n        date = date.replace('m', 'min');\r\n        date = date.replace('M', 'mon');\r\n        return date;\r\n      }\r\n      date = dateMath.parse(date, roundUp);\r\n    }\r\n\r\n    // graphite' s from filter is exclusive\r\n    // here we step back one minute in order\r\n    // to guarantee that we get all the data that\r\n    // exists for the specified range\r\n    if (roundUp) {\r\n      if (date.get('s')) {\r\n        date.add(1, 'm');\r\n      }\r\n    } else if (roundUp === false) {\r\n      if (date.get('s')) {\r\n        date.subtract(1, 'm');\r\n      }\r\n    }\r\n\r\n    return date.unix();\r\n  };\r\n\r\n  this.metricFindQuery = function(query, optionalOptions) {\r\n    const options = optionalOptions || {};\r\n    const interpolatedQuery = templateSrv.replace(query);\r\n\r\n    // special handling for tag_values(<tag>[,<expression>]*), this is used for template variables\r\n    let matches = interpolatedQuery.match(/^tag_values\\(([^,]+)((, *[^,]+)*)\\)$/);\r\n    if (matches) {\r\n      const expressions = [];\r\n      const exprRegex = /, *([^,]+)/g;\r\n      let match = exprRegex.exec(matches[2]);\r\n      while (match !== null) {\r\n        expressions.push(match[1]);\r\n        match = exprRegex.exec(matches[2]);\r\n      }\r\n      options.limit = 10000;\r\n      return this.getTagValuesAutoComplete(expressions, matches[1], undefined, options);\r\n    }\r\n\r\n    // special handling for tags(<expression>[,<expression>]*), this is used for template variables\r\n    matches = interpolatedQuery.match(/^tags\\(([^,]*)((, *[^,]+)*)\\)$/);\r\n    if (matches) {\r\n      const expressions = [];\r\n      if (matches[1]) {\r\n        expressions.push(matches[1]);\r\n        const exprRegex = /, *([^,]+)/g;\r\n        let match = exprRegex.exec(matches[2]);\r\n        while (match !== null) {\r\n          expressions.push(match[1]);\r\n          match = exprRegex.exec(matches[2]);\r\n        }\r\n      }\r\n      options.limit = 10000;\r\n      return this.getTagsAutoComplete(expressions, undefined, options);\r\n    }\r\n\r\n    const httpOptions: any = {\r\n      method: 'GET',\r\n      url: '/metrics/find',\r\n      params: {\r\n        query: interpolatedQuery,\r\n      },\r\n      // for cancellations\r\n      requestId: options.requestId,\r\n    };\r\n\r\n    if (options.range) {\r\n      httpOptions.params.from = this.translateTime(options.range.from, false);\r\n      httpOptions.params.until = this.translateTime(options.range.to, true);\r\n    }\r\n\r\n    return this.doGraphiteRequest(httpOptions).then(results => {\r\n      return _.map(results.data, metric => {\r\n        return {\r\n          text: metric.text,\r\n          expandable: metric.expandable ? true : false,\r\n        };\r\n      });\r\n    });\r\n  };\r\n\r\n  this.getTags = function(optionalOptions) {\r\n    const options = optionalOptions || {};\r\n\r\n    const httpOptions: any = {\r\n      method: 'GET',\r\n      url: '/tags',\r\n      // for cancellations\r\n      requestId: options.requestId,\r\n    };\r\n\r\n    if (options.range) {\r\n      httpOptions.params.from = this.translateTime(options.range.from, false);\r\n      httpOptions.params.until = this.translateTime(options.range.to, true);\r\n    }\r\n\r\n    return this.doGraphiteRequest(httpOptions).then(results => {\r\n      return _.map(results.data, tag => {\r\n        return {\r\n          text: tag.tag,\r\n          id: tag.id,\r\n        };\r\n      });\r\n    });\r\n  };\r\n\r\n  this.getTagValues = function(tag, optionalOptions) {\r\n    const options = optionalOptions || {};\r\n\r\n    const httpOptions: any = {\r\n      method: 'GET',\r\n      url: '/tags/' + templateSrv.replace(tag),\r\n      // for cancellations\r\n      requestId: options.requestId,\r\n    };\r\n\r\n    if (options.range) {\r\n      httpOptions.params.from = this.translateTime(options.range.from, false);\r\n      httpOptions.params.until = this.translateTime(options.range.to, true);\r\n    }\r\n\r\n    return this.doGraphiteRequest(httpOptions).then(results => {\r\n      if (results.data && results.data.values) {\r\n        return _.map(results.data.values, value => {\r\n          return {\r\n            text: value.value,\r\n            id: value.id,\r\n          };\r\n        });\r\n      } else {\r\n        return [];\r\n      }\r\n    });\r\n  };\r\n\r\n  this.getTagsAutoComplete = (expressions, tagPrefix, optionalOptions) => {\r\n    const options = optionalOptions || {};\r\n\r\n    const httpOptions: any = {\r\n      method: 'GET',\r\n      url: '/tags/autoComplete/tags',\r\n      params: {\r\n        expr: _.map(expressions, expression => templateSrv.replace((expression || '').trim())),\r\n      },\r\n      // for cancellations\r\n      requestId: options.requestId,\r\n    };\r\n\r\n    if (tagPrefix) {\r\n      httpOptions.params.tagPrefix = tagPrefix;\r\n    }\r\n    if (options.limit) {\r\n      httpOptions.params.limit = options.limit;\r\n    }\r\n    if (options.range) {\r\n      httpOptions.params.from = this.translateTime(options.range.from, false);\r\n      httpOptions.params.until = this.translateTime(options.range.to, true);\r\n    }\r\n\r\n    return this.doGraphiteRequest(httpOptions).then(results => {\r\n      if (results.data) {\r\n        return _.map(results.data, tag => {\r\n          return { text: tag };\r\n        });\r\n      } else {\r\n        return [];\r\n      }\r\n    });\r\n  };\r\n\r\n  this.getTagValuesAutoComplete = (expressions, tag, valuePrefix, optionalOptions) => {\r\n    const options = optionalOptions || {};\r\n\r\n    const httpOptions: any = {\r\n      method: 'GET',\r\n      url: '/tags/autoComplete/values',\r\n      params: {\r\n        expr: _.map(expressions, expression => templateSrv.replace((expression || '').trim())),\r\n        tag: templateSrv.replace((tag || '').trim()),\r\n      },\r\n      // for cancellations\r\n      requestId: options.requestId,\r\n    };\r\n\r\n    if (valuePrefix) {\r\n      httpOptions.params.valuePrefix = valuePrefix;\r\n    }\r\n    if (options.limit) {\r\n      httpOptions.params.limit = options.limit;\r\n    }\r\n    if (options.range) {\r\n      httpOptions.params.from = this.translateTime(options.range.from, false);\r\n      httpOptions.params.until = this.translateTime(options.range.to, true);\r\n    }\r\n\r\n    return this.doGraphiteRequest(httpOptions).then(results => {\r\n      if (results.data) {\r\n        return _.map(results.data, value => {\r\n          return { text: value };\r\n        });\r\n      } else {\r\n        return [];\r\n      }\r\n    });\r\n  };\r\n\r\n  this.getVersion = function(optionalOptions) {\r\n    const options = optionalOptions || {};\r\n\r\n    const httpOptions = {\r\n      method: 'GET',\r\n      url: '/version',\r\n      requestId: options.requestId,\r\n    };\r\n\r\n    return this.doGraphiteRequest(httpOptions)\r\n      .then(results => {\r\n        if (results.data) {\r\n          const semver = new SemVersion(results.data);\r\n          return semver.isValid() ? results.data : '';\r\n        }\r\n        return '';\r\n      })\r\n      .catch(() => {\r\n        return '';\r\n      });\r\n  };\r\n\r\n  this.createFuncInstance = function(funcDef, options?) {\r\n    return gfunc.createFuncInstance(funcDef, options, this.funcDefs);\r\n  };\r\n\r\n  this.getFuncDef = function(name) {\r\n    return gfunc.getFuncDef(name, this.funcDefs);\r\n  };\r\n\r\n  this.waitForFuncDefsLoaded = function() {\r\n    return this.getFuncDefs();\r\n  };\r\n\r\n  this.getFuncDefs = function() {\r\n    if (this.funcDefsPromise !== null) {\r\n      return this.funcDefsPromise;\r\n    }\r\n\r\n    if (!supportsFunctionIndex(this.graphiteVersion)) {\r\n      this.funcDefs = gfunc.getFuncDefs(this.graphiteVersion);\r\n      this.funcDefsPromise = Promise.resolve(this.funcDefs);\r\n      return this.funcDefsPromise;\r\n    }\r\n\r\n    const httpOptions = {\r\n      method: 'GET',\r\n      url: '/functions',\r\n    };\r\n\r\n    this.funcDefsPromise = this.doGraphiteRequest(httpOptions)\r\n      .then(results => {\r\n        if (results.status !== 200 || typeof results.data !== 'object') {\r\n          this.funcDefs = gfunc.getFuncDefs(this.graphiteVersion);\r\n        } else {\r\n          this.funcDefs = gfunc.parseFuncDefs(results.data);\r\n        }\r\n        return this.funcDefs;\r\n      })\r\n      .catch(err => {\r\n        console.log('Fetching graphite functions error', err);\r\n        this.funcDefs = gfunc.getFuncDefs(this.graphiteVersion);\r\n        return this.funcDefs;\r\n      });\r\n\r\n    return this.funcDefsPromise;\r\n  };\r\n\r\n  this.testDatasource = function() {\r\n    const query = {\r\n      panelId: 3,\r\n      rangeRaw: { from: 'now-1h', to: 'now' },\r\n      targets: [{ target: 'constantLine(100)' }],\r\n      maxDataPoints: 300,\r\n    };\r\n    return this.query(query).then(() => {\r\n      return { status: 'success', message: 'Data source is working' };\r\n    });\r\n  };\r\n\r\n  this.doGraphiteRequest = function(options) {\r\n    if (this.basicAuth || this.withCredentials) {\r\n      options.withCredentials = true;\r\n    }\r\n    if (this.basicAuth) {\r\n      options.headers = options.headers || {};\r\n      options.headers.Authorization = this.basicAuth;\r\n    }\r\n\r\n    options.url = this.url + options.url;\r\n    options.inspect = { type: 'graphite' };\r\n\r\n    return backendSrv.datasourceRequest(options);\r\n  };\r\n\r\n  this._seriesRefLetters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\r\n  this.buildGraphiteParams = function(options, scopedVars) {\r\n    const graphiteOptions = ['from', 'until', 'rawData', 'format', 'maxDataPoints', 'cacheTimeout'];\r\n    const cleanOptions = [],\r\n      targets = {};\r\n    let target, targetValue, i;\r\n    const regex = /\\#([A-Z])/g;\r\n    const intervalFormatFixRegex = /'(\\d+)m'/gi;\r\n    let hasTargets = false;\r\n\r\n    options['format'] = 'json';\r\n\r\n    function fixIntervalFormat(match) {\r\n      return match.replace('m', 'min').replace('M', 'mon');\r\n    }\r\n\r\n    for (i = 0; i < options.targets.length; i++) {\r\n      target = options.targets[i];\r\n      if (!target.target) {\r\n        continue;\r\n      }\r\n\r\n      if (!target.refId) {\r\n        target.refId = this._seriesRefLetters[i];\r\n      }\r\n\r\n      targetValue = templateSrv.replace(target.target, scopedVars);\r\n      targetValue = targetValue.replace(intervalFormatFixRegex, fixIntervalFormat);\r\n      targets[target.refId] = targetValue;\r\n    }\r\n\r\n    function nestedSeriesRegexReplacer(match, g1) {\r\n      return targets[g1] || match;\r\n    }\r\n\r\n    for (i = 0; i < options.targets.length; i++) {\r\n      target = options.targets[i];\r\n      if (!target.target) {\r\n        continue;\r\n      }\r\n\r\n      targetValue = targets[target.refId];\r\n      targetValue = targetValue.replace(regex, nestedSeriesRegexReplacer);\r\n      targets[target.refId] = targetValue;\r\n\r\n      if (!target.hide) {\r\n        hasTargets = true;\r\n        cleanOptions.push('target=' + encodeURIComponent(targetValue));\r\n      }\r\n    }\r\n\r\n    _.each(options, (value, key) => {\r\n      if (_.indexOf(graphiteOptions, key) === -1) {\r\n        return;\r\n      }\r\n      if (value) {\r\n        cleanOptions.push(key + '=' + encodeURIComponent(value));\r\n      }\r\n    });\r\n\r\n    if (!hasTargets) {\r\n      return [];\r\n    }\r\n\r\n    return cleanOptions;\r\n  };\r\n}\r\n\r\nfunction supportsTags(version: string): boolean {\r\n  return isVersionGtOrEq(version, '1.1');\r\n}\r\n\r\nfunction supportsFunctionIndex(version: string): boolean {\r\n  return isVersionGtOrEq(version, '1.1');\r\n}\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport rst2html from 'rst2html';\r\nimport Drop from 'tether-drop';\r\nimport coreModule from 'app/core/core_module';\r\n\r\n/** @ngInject */\r\nexport function graphiteAddFunc($compile) {\r\n  const inputTemplate =\r\n    '<input type=\"text\"' + ' class=\"gf-form-input\"' + ' spellcheck=\"false\" style=\"display:none\"></input>';\r\n\r\n  const buttonTemplate =\r\n    '<a class=\"gf-form-label query-part dropdown-toggle\"' +\r\n    ' tabindex=\"1\" gf-dropdown=\"functionMenu\" data-toggle=\"dropdown\">' +\r\n    '<i class=\"fa fa-plus\"></i></a>';\r\n\r\n  return {\r\n    link: function($scope, elem) {\r\n      const ctrl = $scope.ctrl;\r\n\r\n      const $input = $(inputTemplate);\r\n      const $button = $(buttonTemplate);\r\n\r\n      $input.appendTo(elem);\r\n      $button.appendTo(elem);\r\n\r\n      ctrl.datasource.getFuncDefs().then(funcDefs => {\r\n        const allFunctions = _.map(funcDefs, 'name').sort();\r\n\r\n        $scope.functionMenu = createFunctionDropDownMenu(funcDefs);\r\n\r\n        $input.attr('data-provide', 'typeahead');\r\n        $input.typeahead({\r\n          source: allFunctions,\r\n          minLength: 1,\r\n          items: 10,\r\n          updater: value => {\r\n            let funcDef = ctrl.datasource.getFuncDef(value);\r\n            if (!funcDef) {\r\n              // try find close match\r\n              value = value.toLowerCase();\r\n              funcDef = _.find(allFunctions, funcName => {\r\n                return funcName.toLowerCase().indexOf(value) === 0;\r\n              });\r\n\r\n              if (!funcDef) {\r\n                return '';\r\n              }\r\n            }\r\n\r\n            $scope.$apply(() => {\r\n              ctrl.addFunction(funcDef);\r\n            });\r\n\r\n            $input.trigger('blur');\r\n            return '';\r\n          },\r\n        });\r\n\r\n        $button.click(() => {\r\n          $button.hide();\r\n          $input.show();\r\n          $input.focus();\r\n        });\r\n\r\n        $input.keyup(() => {\r\n          elem.toggleClass('open', $input.val() === '');\r\n        });\r\n\r\n        $input.blur(() => {\r\n          // clicking the function dropdown menu won't\r\n          // work if you remove class at once\r\n          setTimeout(() => {\r\n            $input.val('');\r\n            $input.hide();\r\n            $button.show();\r\n            elem.removeClass('open');\r\n          }, 200);\r\n        });\r\n\r\n        $compile(elem.contents())($scope);\r\n      });\r\n\r\n      let drop;\r\n      const cleanUpDrop = () => {\r\n        if (drop) {\r\n          drop.destroy();\r\n          drop = null;\r\n        }\r\n      };\r\n\r\n      $(elem)\r\n        .on('mouseenter', 'ul.dropdown-menu li', () => {\r\n          cleanUpDrop();\r\n\r\n          let funcDef;\r\n          try {\r\n            funcDef = ctrl.datasource.getFuncDef($('a', this).text());\r\n          } catch (e) {\r\n            // ignore\r\n          }\r\n\r\n          if (funcDef && funcDef.description) {\r\n            let shortDesc = funcDef.description;\r\n            if (shortDesc.length > 500) {\r\n              shortDesc = shortDesc.substring(0, 497) + '...';\r\n            }\r\n\r\n            const contentElement = document.createElement('div');\r\n            contentElement.innerHTML = '<h4>' + funcDef.name + '</h4>' + rst2html(shortDesc);\r\n\r\n            drop = new Drop({\r\n              target: this,\r\n              content: contentElement,\r\n              classes: 'drop-popover',\r\n              openOn: 'always',\r\n              tetherOptions: {\r\n                attachment: 'bottom left',\r\n                targetAttachment: 'bottom right',\r\n              },\r\n            });\r\n          }\r\n        })\r\n        .on('mouseout', 'ul.dropdown-menu li', () => {\r\n          cleanUpDrop();\r\n        });\r\n\r\n      $scope.$on('$destroy', cleanUpDrop);\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('graphiteAddFunc', graphiteAddFunc);\r\n\r\nfunction createFunctionDropDownMenu(funcDefs) {\r\n  const categories = {};\r\n\r\n  _.forEach(funcDefs, funcDef => {\r\n    if (!funcDef.category) {\r\n      return;\r\n    }\r\n    if (!categories[funcDef.category]) {\r\n      categories[funcDef.category] = [];\r\n    }\r\n    categories[funcDef.category].push({\r\n      text: funcDef.name,\r\n      click: \"ctrl.addFunction('\" + funcDef.name + \"')\",\r\n    });\r\n  });\r\n\r\n  return _.sortBy(\r\n    _.map(categories, (submenu, category) => {\r\n      return {\r\n        text: category,\r\n        submenu: _.sortBy(submenu, 'text'),\r\n      };\r\n    }),\r\n    'text'\r\n  );\r\n}\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport rst2html from 'rst2html';\r\nimport coreModule from 'app/core/core_module';\r\n\r\n/** @ngInject */\r\nexport function graphiteFuncEditor($compile, templateSrv, popoverSrv) {\r\n  const funcSpanTemplate = '<a ng-click=\"\">{{func.def.name}}</a><span>(</span>';\r\n  const paramTemplate =\r\n    '<input type=\"text\" style=\"display:none\"' + ' class=\"input-small tight-form-func-param\"></input>';\r\n\r\n  const funcControlsTemplate = `\r\n    <div class=\"tight-form-func-controls\">\r\n      <span class=\"pointer fa fa-arrow-left\"></span>\r\n      <span class=\"pointer fa fa-question-circle\"></span>\r\n      <span class=\"pointer fa fa-remove\" ></span>\r\n      <span class=\"pointer fa fa-arrow-right\"></span>\r\n    </div>`;\r\n\r\n  return {\r\n    restrict: 'A',\r\n    link: function postLink($scope, elem) {\r\n      const $funcLink = $(funcSpanTemplate);\r\n      const $funcControls = $(funcControlsTemplate);\r\n      const ctrl = $scope.ctrl;\r\n      const func = $scope.func;\r\n      let scheduledRelink = false;\r\n      let paramCountAtLink = 0;\r\n      let cancelBlur = null;\r\n\r\n      function clickFuncParam(this: any, paramIndex) {\r\n        /*jshint validthis:true */\r\n\r\n        const $link = $(this);\r\n        const $comma = $link.prev('.comma');\r\n        const $input = $link.next();\r\n\r\n        $input.val(func.params[paramIndex]);\r\n\r\n        $comma.removeClass('query-part__last');\r\n        $link.hide();\r\n        $input.show();\r\n        $input.focus();\r\n        $input.select();\r\n\r\n        const typeahead = $input.data('typeahead');\r\n        if (typeahead) {\r\n          $input.val('');\r\n          typeahead.lookup();\r\n        }\r\n      }\r\n\r\n      function scheduledRelinkIfNeeded() {\r\n        if (paramCountAtLink === func.params.length) {\r\n          return;\r\n        }\r\n\r\n        if (!scheduledRelink) {\r\n          scheduledRelink = true;\r\n          setTimeout(() => {\r\n            relink();\r\n            scheduledRelink = false;\r\n          }, 200);\r\n        }\r\n      }\r\n\r\n      function paramDef(index) {\r\n        if (index < func.def.params.length) {\r\n          return func.def.params[index];\r\n        }\r\n        if (_.last(func.def.params).multiple) {\r\n          return _.assign({}, _.last(func.def.params), { optional: true });\r\n        }\r\n        return {};\r\n      }\r\n\r\n      function switchToLink(inputElem, paramIndex) {\r\n        /*jshint validthis:true */\r\n        const $input = $(inputElem);\r\n\r\n        clearTimeout(cancelBlur);\r\n        cancelBlur = null;\r\n\r\n        const $link = $input.prev();\r\n        const $comma = $link.prev('.comma');\r\n        const newValue = $input.val();\r\n\r\n        // remove optional empty params\r\n        if (newValue !== '' || paramDef(paramIndex).optional) {\r\n          func.updateParam(newValue, paramIndex);\r\n          $link.html(newValue ? templateSrv.highlightVariablesAsHtml(newValue) : '&nbsp;');\r\n        }\r\n\r\n        scheduledRelinkIfNeeded();\r\n\r\n        $scope.$apply(() => {\r\n          ctrl.targetChanged();\r\n        });\r\n\r\n        if ($link.hasClass('query-part__last') && newValue === '') {\r\n          $comma.addClass('query-part__last');\r\n        } else {\r\n          $link.removeClass('query-part__last');\r\n        }\r\n\r\n        $input.hide();\r\n        $link.show();\r\n      }\r\n\r\n      // this = input element\r\n      function inputBlur(this: any, paramIndex) {\r\n        /*jshint validthis:true */\r\n        const inputElem = this;\r\n        // happens long before the click event on the typeahead options\r\n        // need to have long delay because the blur\r\n        cancelBlur = setTimeout(() => {\r\n          switchToLink(inputElem, paramIndex);\r\n        }, 200);\r\n      }\r\n\r\n      function inputKeyPress(this: any, paramIndex, e) {\r\n        /*jshint validthis:true */\r\n        if (e.which === 13) {\r\n          $(this).blur();\r\n        }\r\n      }\r\n\r\n      function inputKeyDown(this: any) {\r\n        /*jshint validthis:true */\r\n        this.style.width = (3 + this.value.length) * 8 + 'px';\r\n      }\r\n\r\n      function addTypeahead($input, paramIndex) {\r\n        $input.attr('data-provide', 'typeahead');\r\n\r\n        let options = paramDef(paramIndex).options;\r\n        if (paramDef(paramIndex).type === 'int') {\r\n          options = _.map(options, val => {\r\n            return val.toString();\r\n          });\r\n        }\r\n\r\n        $input.typeahead({\r\n          source: options,\r\n          minLength: 0,\r\n          items: 20,\r\n          updater: value => {\r\n            $input.val(value);\r\n            switchToLink($input[0], paramIndex);\r\n            return value;\r\n          },\r\n        });\r\n\r\n        const typeahead = $input.data('typeahead');\r\n        typeahead.lookup = function() {\r\n          this.query = this.$element.val() || '';\r\n          return this.process(this.source);\r\n        };\r\n      }\r\n\r\n      function toggleFuncControls() {\r\n        const targetDiv = elem.closest('.tight-form');\r\n\r\n        if (elem.hasClass('show-function-controls')) {\r\n          elem.removeClass('show-function-controls');\r\n          targetDiv.removeClass('has-open-function');\r\n          $funcControls.hide();\r\n          return;\r\n        }\r\n\r\n        elem.addClass('show-function-controls');\r\n        targetDiv.addClass('has-open-function');\r\n\r\n        $funcControls.show();\r\n      }\r\n\r\n      function addElementsAndCompile() {\r\n        $funcControls.appendTo(elem);\r\n        $funcLink.appendTo(elem);\r\n\r\n        const defParams = _.clone(func.def.params);\r\n        const lastParam = _.last(func.def.params);\r\n\r\n        while (func.params.length >= defParams.length && lastParam && lastParam.multiple) {\r\n          defParams.push(_.assign({}, lastParam, { optional: true }));\r\n        }\r\n\r\n        _.each(defParams, (param, index) => {\r\n          if (param.optional && func.params.length < index) {\r\n            return false;\r\n          }\r\n\r\n          let paramValue = templateSrv.highlightVariablesAsHtml(func.params[index]);\r\n\r\n          const last = index >= func.params.length - 1 && param.optional && !paramValue;\r\n          if (last && param.multiple) {\r\n            paramValue = '+';\r\n          }\r\n\r\n          if (index > 0) {\r\n            $('<span class=\"comma' + (last ? ' query-part__last' : '') + '\">, </span>').appendTo(elem);\r\n          }\r\n\r\n          const $paramLink = $(\r\n            '<a ng-click=\"\" class=\"graphite-func-param-link' +\r\n              (last ? ' query-part__last' : '') +\r\n              '\">' +\r\n              (paramValue || '&nbsp;') +\r\n              '</a>'\r\n          );\r\n          const $input = $(paramTemplate);\r\n          $input.attr('placeholder', param.name);\r\n\r\n          paramCountAtLink++;\r\n\r\n          $paramLink.appendTo(elem);\r\n          $input.appendTo(elem);\r\n\r\n          $input.blur(_.partial(inputBlur, index));\r\n          $input.keyup(inputKeyDown);\r\n          $input.keypress(_.partial(inputKeyPress, index));\r\n          $paramLink.click(_.partial(clickFuncParam, index));\r\n\r\n          if (param.options) {\r\n            addTypeahead($input, index);\r\n          }\r\n\r\n          return true;\r\n        });\r\n\r\n        $('<span>)</span>').appendTo(elem);\r\n\r\n        $compile(elem.contents())($scope);\r\n      }\r\n\r\n      function ifJustAddedFocusFirstParam() {\r\n        if ($scope.func.added) {\r\n          $scope.func.added = false;\r\n          setTimeout(() => {\r\n            elem\r\n              .find('.graphite-func-param-link')\r\n              .first()\r\n              .click();\r\n          }, 10);\r\n        }\r\n      }\r\n\r\n      function registerFuncControlsToggle() {\r\n        $funcLink.click(toggleFuncControls);\r\n      }\r\n\r\n      function registerFuncControlsActions() {\r\n        $funcControls.click(e => {\r\n          const $target = $(e.target);\r\n          if ($target.hasClass('fa-remove')) {\r\n            toggleFuncControls();\r\n            $scope.$apply(() => {\r\n              ctrl.removeFunction($scope.func);\r\n            });\r\n            return;\r\n          }\r\n\r\n          if ($target.hasClass('fa-arrow-left')) {\r\n            $scope.$apply(() => {\r\n              _.move(ctrl.queryModel.functions, $scope.$index, $scope.$index - 1);\r\n              ctrl.targetChanged();\r\n            });\r\n            return;\r\n          }\r\n\r\n          if ($target.hasClass('fa-arrow-right')) {\r\n            $scope.$apply(() => {\r\n              _.move(ctrl.queryModel.functions, $scope.$index, $scope.$index + 1);\r\n              ctrl.targetChanged();\r\n            });\r\n            return;\r\n          }\r\n\r\n          if ($target.hasClass('fa-question-circle')) {\r\n            const funcDef = ctrl.datasource.getFuncDef(func.def.name);\r\n            if (funcDef && funcDef.description) {\r\n              popoverSrv.show({\r\n                element: e.target,\r\n                position: 'bottom left',\r\n                classNames: 'drop-popover drop-function-def',\r\n                template: `\r\n                  <div style=\"overflow:auto;max-height:30rem;\">\r\n                    <h4> ${funcDef.name} </h4>\r\n                    ${rst2html(funcDef.description)}\r\n                  </div>`,\r\n                openOn: 'click',\r\n              });\r\n            } else {\r\n              window.open(\r\n                'http://graphite.readthedocs.org/en/latest/functions.html#graphite.render.functions.' + func.def.name,\r\n                '_blank'\r\n              );\r\n            }\r\n            return;\r\n          }\r\n        });\r\n      }\r\n\r\n      function relink() {\r\n        elem.children().remove();\r\n\r\n        addElementsAndCompile();\r\n        ifJustAddedFocusFirstParam();\r\n        registerFuncControlsToggle();\r\n        registerFuncControlsActions();\r\n      }\r\n\r\n      relink();\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('graphiteFuncEditor', graphiteFuncEditor);\r\n","import _ from 'lodash';\r\n\r\n// This is auto generated from the unicode tables.\r\n// The tables are at:\r\n// http://www.fileformat.info/info/unicode/category/Lu/list.htm\r\n// http://www.fileformat.info/info/unicode/category/Ll/list.htm\r\n// http://www.fileformat.info/info/unicode/category/Lt/list.htm\r\n// http://www.fileformat.info/info/unicode/category/Lm/list.htm\r\n// http://www.fileformat.info/info/unicode/category/Lo/list.htm\r\n// http://www.fileformat.info/info/unicode/category/Nl/list.htm\r\n\r\nconst unicodeLetterTable = [\r\n  170,\r\n  170,\r\n  181,\r\n  181,\r\n  186,\r\n  186,\r\n  192,\r\n  214,\r\n  216,\r\n  246,\r\n  248,\r\n  705,\r\n  710,\r\n  721,\r\n  736,\r\n  740,\r\n  748,\r\n  748,\r\n  750,\r\n  750,\r\n  880,\r\n  884,\r\n  886,\r\n  887,\r\n  890,\r\n  893,\r\n  902,\r\n  902,\r\n  904,\r\n  906,\r\n  908,\r\n  908,\r\n  910,\r\n  929,\r\n  931,\r\n  1013,\r\n  1015,\r\n  1153,\r\n  1162,\r\n  1319,\r\n  1329,\r\n  1366,\r\n  1369,\r\n  1369,\r\n  1377,\r\n  1415,\r\n  1488,\r\n  1514,\r\n  1520,\r\n  1522,\r\n  1568,\r\n  1610,\r\n  1646,\r\n  1647,\r\n  1649,\r\n  1747,\r\n  1749,\r\n  1749,\r\n  1765,\r\n  1766,\r\n  1774,\r\n  1775,\r\n  1786,\r\n  1788,\r\n  1791,\r\n  1791,\r\n  1808,\r\n  1808,\r\n  1810,\r\n  1839,\r\n  1869,\r\n  1957,\r\n  1969,\r\n  1969,\r\n  1994,\r\n  2026,\r\n  2036,\r\n  2037,\r\n  2042,\r\n  2042,\r\n  2048,\r\n  2069,\r\n  2074,\r\n  2074,\r\n  2084,\r\n  2084,\r\n  2088,\r\n  2088,\r\n  2112,\r\n  2136,\r\n  2308,\r\n  2361,\r\n  2365,\r\n  2365,\r\n  2384,\r\n  2384,\r\n  2392,\r\n  2401,\r\n  2417,\r\n  2423,\r\n  2425,\r\n  2431,\r\n  2437,\r\n  2444,\r\n  2447,\r\n  2448,\r\n  2451,\r\n  2472,\r\n  2474,\r\n  2480,\r\n  2482,\r\n  2482,\r\n  2486,\r\n  2489,\r\n  2493,\r\n  2493,\r\n  2510,\r\n  2510,\r\n  2524,\r\n  2525,\r\n  2527,\r\n  2529,\r\n  2544,\r\n  2545,\r\n  2565,\r\n  2570,\r\n  2575,\r\n  2576,\r\n  2579,\r\n  2600,\r\n  2602,\r\n  2608,\r\n  2610,\r\n  2611,\r\n  2613,\r\n  2614,\r\n  2616,\r\n  2617,\r\n  2649,\r\n  2652,\r\n  2654,\r\n  2654,\r\n  2674,\r\n  2676,\r\n  2693,\r\n  2701,\r\n  2703,\r\n  2705,\r\n  2707,\r\n  2728,\r\n  2730,\r\n  2736,\r\n  2738,\r\n  2739,\r\n  2741,\r\n  2745,\r\n  2749,\r\n  2749,\r\n  2768,\r\n  2768,\r\n  2784,\r\n  2785,\r\n  2821,\r\n  2828,\r\n  2831,\r\n  2832,\r\n  2835,\r\n  2856,\r\n  2858,\r\n  2864,\r\n  2866,\r\n  2867,\r\n  2869,\r\n  2873,\r\n  2877,\r\n  2877,\r\n  2908,\r\n  2909,\r\n  2911,\r\n  2913,\r\n  2929,\r\n  2929,\r\n  2947,\r\n  2947,\r\n  2949,\r\n  2954,\r\n  2958,\r\n  2960,\r\n  2962,\r\n  2965,\r\n  2969,\r\n  2970,\r\n  2972,\r\n  2972,\r\n  2974,\r\n  2975,\r\n  2979,\r\n  2980,\r\n  2984,\r\n  2986,\r\n  2990,\r\n  3001,\r\n  3024,\r\n  3024,\r\n  3077,\r\n  3084,\r\n  3086,\r\n  3088,\r\n  3090,\r\n  3112,\r\n  3114,\r\n  3123,\r\n  3125,\r\n  3129,\r\n  3133,\r\n  3133,\r\n  3160,\r\n  3161,\r\n  3168,\r\n  3169,\r\n  3205,\r\n  3212,\r\n  3214,\r\n  3216,\r\n  3218,\r\n  3240,\r\n  3242,\r\n  3251,\r\n  3253,\r\n  3257,\r\n  3261,\r\n  3261,\r\n  3294,\r\n  3294,\r\n  3296,\r\n  3297,\r\n  3313,\r\n  3314,\r\n  3333,\r\n  3340,\r\n  3342,\r\n  3344,\r\n  3346,\r\n  3386,\r\n  3389,\r\n  3389,\r\n  3406,\r\n  3406,\r\n  3424,\r\n  3425,\r\n  3450,\r\n  3455,\r\n  3461,\r\n  3478,\r\n  3482,\r\n  3505,\r\n  3507,\r\n  3515,\r\n  3517,\r\n  3517,\r\n  3520,\r\n  3526,\r\n  3585,\r\n  3632,\r\n  3634,\r\n  3635,\r\n  3648,\r\n  3654,\r\n  3713,\r\n  3714,\r\n  3716,\r\n  3716,\r\n  3719,\r\n  3720,\r\n  3722,\r\n  3722,\r\n  3725,\r\n  3725,\r\n  3732,\r\n  3735,\r\n  3737,\r\n  3743,\r\n  3745,\r\n  3747,\r\n  3749,\r\n  3749,\r\n  3751,\r\n  3751,\r\n  3754,\r\n  3755,\r\n  3757,\r\n  3760,\r\n  3762,\r\n  3763,\r\n  3773,\r\n  3773,\r\n  3776,\r\n  3780,\r\n  3782,\r\n  3782,\r\n  3804,\r\n  3805,\r\n  3840,\r\n  3840,\r\n  3904,\r\n  3911,\r\n  3913,\r\n  3948,\r\n  3976,\r\n  3980,\r\n  4096,\r\n  4138,\r\n  4159,\r\n  4159,\r\n  4176,\r\n  4181,\r\n  4186,\r\n  4189,\r\n  4193,\r\n  4193,\r\n  4197,\r\n  4198,\r\n  4206,\r\n  4208,\r\n  4213,\r\n  4225,\r\n  4238,\r\n  4238,\r\n  4256,\r\n  4293,\r\n  4304,\r\n  4346,\r\n  4348,\r\n  4348,\r\n  4352,\r\n  4680,\r\n  4682,\r\n  4685,\r\n  4688,\r\n  4694,\r\n  4696,\r\n  4696,\r\n  4698,\r\n  4701,\r\n  4704,\r\n  4744,\r\n  4746,\r\n  4749,\r\n  4752,\r\n  4784,\r\n  4786,\r\n  4789,\r\n  4792,\r\n  4798,\r\n  4800,\r\n  4800,\r\n  4802,\r\n  4805,\r\n  4808,\r\n  4822,\r\n  4824,\r\n  4880,\r\n  4882,\r\n  4885,\r\n  4888,\r\n  4954,\r\n  4992,\r\n  5007,\r\n  5024,\r\n  5108,\r\n  5121,\r\n  5740,\r\n  5743,\r\n  5759,\r\n  5761,\r\n  5786,\r\n  5792,\r\n  5866,\r\n  5870,\r\n  5872,\r\n  5888,\r\n  5900,\r\n  5902,\r\n  5905,\r\n  5920,\r\n  5937,\r\n  5952,\r\n  5969,\r\n  5984,\r\n  5996,\r\n  5998,\r\n  6000,\r\n  6016,\r\n  6067,\r\n  6103,\r\n  6103,\r\n  6108,\r\n  6108,\r\n  6176,\r\n  6263,\r\n  6272,\r\n  6312,\r\n  6314,\r\n  6314,\r\n  6320,\r\n  6389,\r\n  6400,\r\n  6428,\r\n  6480,\r\n  6509,\r\n  6512,\r\n  6516,\r\n  6528,\r\n  6571,\r\n  6593,\r\n  6599,\r\n  6656,\r\n  6678,\r\n  6688,\r\n  6740,\r\n  6823,\r\n  6823,\r\n  6917,\r\n  6963,\r\n  6981,\r\n  6987,\r\n  7043,\r\n  7072,\r\n  7086,\r\n  7087,\r\n  7104,\r\n  7141,\r\n  7168,\r\n  7203,\r\n  7245,\r\n  7247,\r\n  7258,\r\n  7293,\r\n  7401,\r\n  7404,\r\n  7406,\r\n  7409,\r\n  7424,\r\n  7615,\r\n  7680,\r\n  7957,\r\n  7960,\r\n  7965,\r\n  7968,\r\n  8005,\r\n  8008,\r\n  8013,\r\n  8016,\r\n  8023,\r\n  8025,\r\n  8025,\r\n  8027,\r\n  8027,\r\n  8029,\r\n  8029,\r\n  8031,\r\n  8061,\r\n  8064,\r\n  8116,\r\n  8118,\r\n  8124,\r\n  8126,\r\n  8126,\r\n  8130,\r\n  8132,\r\n  8134,\r\n  8140,\r\n  8144,\r\n  8147,\r\n  8150,\r\n  8155,\r\n  8160,\r\n  8172,\r\n  8178,\r\n  8180,\r\n  8182,\r\n  8188,\r\n  8305,\r\n  8305,\r\n  8319,\r\n  8319,\r\n  8336,\r\n  8348,\r\n  8450,\r\n  8450,\r\n  8455,\r\n  8455,\r\n  8458,\r\n  8467,\r\n  8469,\r\n  8469,\r\n  8473,\r\n  8477,\r\n  8484,\r\n  8484,\r\n  8486,\r\n  8486,\r\n  8488,\r\n  8488,\r\n  8490,\r\n  8493,\r\n  8495,\r\n  8505,\r\n  8508,\r\n  8511,\r\n  8517,\r\n  8521,\r\n  8526,\r\n  8526,\r\n  8544,\r\n  8584,\r\n  11264,\r\n  11310,\r\n  11312,\r\n  11358,\r\n  11360,\r\n  11492,\r\n  11499,\r\n  11502,\r\n  11520,\r\n  11557,\r\n  11568,\r\n  11621,\r\n  11631,\r\n  11631,\r\n  11648,\r\n  11670,\r\n  11680,\r\n  11686,\r\n  11688,\r\n  11694,\r\n  11696,\r\n  11702,\r\n  11704,\r\n  11710,\r\n  11712,\r\n  11718,\r\n  11720,\r\n  11726,\r\n  11728,\r\n  11734,\r\n  11736,\r\n  11742,\r\n  11823,\r\n  11823,\r\n  12293,\r\n  12295,\r\n  12321,\r\n  12329,\r\n  12337,\r\n  12341,\r\n  12344,\r\n  12348,\r\n  12353,\r\n  12438,\r\n  12445,\r\n  12447,\r\n  12449,\r\n  12538,\r\n  12540,\r\n  12543,\r\n  12549,\r\n  12589,\r\n  12593,\r\n  12686,\r\n  12704,\r\n  12730,\r\n  12784,\r\n  12799,\r\n  13312,\r\n  13312,\r\n  19893,\r\n  19893,\r\n  19968,\r\n  19968,\r\n  40907,\r\n  40907,\r\n  40960,\r\n  42124,\r\n  42192,\r\n  42237,\r\n  42240,\r\n  42508,\r\n  42512,\r\n  42527,\r\n  42538,\r\n  42539,\r\n  42560,\r\n  42606,\r\n  42623,\r\n  42647,\r\n  42656,\r\n  42735,\r\n  42775,\r\n  42783,\r\n  42786,\r\n  42888,\r\n  42891,\r\n  42894,\r\n  42896,\r\n  42897,\r\n  42912,\r\n  42921,\r\n  43002,\r\n  43009,\r\n  43011,\r\n  43013,\r\n  43015,\r\n  43018,\r\n  43020,\r\n  43042,\r\n  43072,\r\n  43123,\r\n  43138,\r\n  43187,\r\n  43250,\r\n  43255,\r\n  43259,\r\n  43259,\r\n  43274,\r\n  43301,\r\n  43312,\r\n  43334,\r\n  43360,\r\n  43388,\r\n  43396,\r\n  43442,\r\n  43471,\r\n  43471,\r\n  43520,\r\n  43560,\r\n  43584,\r\n  43586,\r\n  43588,\r\n  43595,\r\n  43616,\r\n  43638,\r\n  43642,\r\n  43642,\r\n  43648,\r\n  43695,\r\n  43697,\r\n  43697,\r\n  43701,\r\n  43702,\r\n  43705,\r\n  43709,\r\n  43712,\r\n  43712,\r\n  43714,\r\n  43714,\r\n  43739,\r\n  43741,\r\n  43777,\r\n  43782,\r\n  43785,\r\n  43790,\r\n  43793,\r\n  43798,\r\n  43808,\r\n  43814,\r\n  43816,\r\n  43822,\r\n  43968,\r\n  44002,\r\n  44032,\r\n  44032,\r\n  55203,\r\n  55203,\r\n  55216,\r\n  55238,\r\n  55243,\r\n  55291,\r\n  63744,\r\n  64045,\r\n  64048,\r\n  64109,\r\n  64112,\r\n  64217,\r\n  64256,\r\n  64262,\r\n  64275,\r\n  64279,\r\n  64285,\r\n  64285,\r\n  64287,\r\n  64296,\r\n  64298,\r\n  64310,\r\n  64312,\r\n  64316,\r\n  64318,\r\n  64318,\r\n  64320,\r\n  64321,\r\n  64323,\r\n  64324,\r\n  64326,\r\n  64433,\r\n  64467,\r\n  64829,\r\n  64848,\r\n  64911,\r\n  64914,\r\n  64967,\r\n  65008,\r\n  65019,\r\n  65136,\r\n  65140,\r\n  65142,\r\n  65276,\r\n  65313,\r\n  65338,\r\n  65345,\r\n  65370,\r\n  65382,\r\n  65470,\r\n  65474,\r\n  65479,\r\n  65482,\r\n  65487,\r\n  65490,\r\n  65495,\r\n  65498,\r\n  65500,\r\n  65536,\r\n  65547,\r\n  65549,\r\n  65574,\r\n  65576,\r\n  65594,\r\n  65596,\r\n  65597,\r\n  65599,\r\n  65613,\r\n  65616,\r\n  65629,\r\n  65664,\r\n  65786,\r\n  65856,\r\n  65908,\r\n  66176,\r\n  66204,\r\n  66208,\r\n  66256,\r\n  66304,\r\n  66334,\r\n  66352,\r\n  66378,\r\n  66432,\r\n  66461,\r\n  66464,\r\n  66499,\r\n  66504,\r\n  66511,\r\n  66513,\r\n  66517,\r\n  66560,\r\n  66717,\r\n  67584,\r\n  67589,\r\n  67592,\r\n  67592,\r\n  67594,\r\n  67637,\r\n  67639,\r\n  67640,\r\n  67644,\r\n  67644,\r\n  67647,\r\n  67669,\r\n  67840,\r\n  67861,\r\n  67872,\r\n  67897,\r\n  68096,\r\n  68096,\r\n  68112,\r\n  68115,\r\n  68117,\r\n  68119,\r\n  68121,\r\n  68147,\r\n  68192,\r\n  68220,\r\n  68352,\r\n  68405,\r\n  68416,\r\n  68437,\r\n  68448,\r\n  68466,\r\n  68608,\r\n  68680,\r\n  69635,\r\n  69687,\r\n  69763,\r\n  69807,\r\n  73728,\r\n  74606,\r\n  74752,\r\n  74850,\r\n  77824,\r\n  78894,\r\n  92160,\r\n  92728,\r\n  110592,\r\n  110593,\r\n  119808,\r\n  119892,\r\n  119894,\r\n  119964,\r\n  119966,\r\n  119967,\r\n  119970,\r\n  119970,\r\n  119973,\r\n  119974,\r\n  119977,\r\n  119980,\r\n  119982,\r\n  119993,\r\n  119995,\r\n  119995,\r\n  119997,\r\n  120003,\r\n  120005,\r\n  120069,\r\n  120071,\r\n  120074,\r\n  120077,\r\n  120084,\r\n  120086,\r\n  120092,\r\n  120094,\r\n  120121,\r\n  120123,\r\n  120126,\r\n  120128,\r\n  120132,\r\n  120134,\r\n  120134,\r\n  120138,\r\n  120144,\r\n  120146,\r\n  120485,\r\n  120488,\r\n  120512,\r\n  120514,\r\n  120538,\r\n  120540,\r\n  120570,\r\n  120572,\r\n  120596,\r\n  120598,\r\n  120628,\r\n  120630,\r\n  120654,\r\n  120656,\r\n  120686,\r\n  120688,\r\n  120712,\r\n  120714,\r\n  120744,\r\n  120746,\r\n  120770,\r\n  120772,\r\n  120779,\r\n  131072,\r\n  131072,\r\n  173782,\r\n  173782,\r\n  173824,\r\n  173824,\r\n  177972,\r\n  177972,\r\n  177984,\r\n  177984,\r\n  178205,\r\n  178205,\r\n  194560,\r\n  195101,\r\n];\r\n\r\nconst identifierStartTable = [];\r\n\r\nfor (let i = 0; i < 128; i++) {\r\n  identifierStartTable[i] =\r\n    (i >= 48 && i <= 57) || // 0-9\r\n    i === 36 || // $\r\n    i === 126 || // ~\r\n    i === 124 || // |\r\n    (i >= 65 && i <= 90) || // A-Z\r\n    i === 95 || // _\r\n    i === 45 || // -\r\n    i === 42 || // *\r\n    i === 58 || // :\r\n    i === 91 || // templateStart [\r\n    i === 93 || // templateEnd ]\r\n    i === 63 || // ?\r\n    i === 37 || // %\r\n    i === 35 || // #\r\n    i === 61 || // =\r\n    (i >= 97 && i <= 122); // a-z\r\n}\r\n\r\nconst identifierPartTable = identifierStartTable;\r\n\r\nexport function Lexer(this: any, expression) {\r\n  this.input = expression;\r\n  this.char = 1;\r\n  this.from = 1;\r\n}\r\n\r\nLexer.prototype = {\r\n  peek: function(i) {\r\n    return this.input.charAt(i || 0);\r\n  },\r\n\r\n  skip: function(i) {\r\n    i = i || 1;\r\n    this.char += i;\r\n    this.input = this.input.slice(i);\r\n  },\r\n\r\n  tokenize: function() {\r\n    const list = [];\r\n    let token = this.next();\r\n    while (token) {\r\n      list.push(token);\r\n      token = this.next();\r\n    }\r\n    return list;\r\n  },\r\n\r\n  next: function() {\r\n    this.from = this.char;\r\n\r\n    // Move to the next non-space character.\r\n    if (/\\s/.test(this.peek())) {\r\n      while (/\\s/.test(this.peek())) {\r\n        this.from += 1;\r\n        this.skip();\r\n      }\r\n\r\n      if (this.peek() === '') {\r\n        // EOL\r\n        return null;\r\n      }\r\n    }\r\n\r\n    let match = this.scanStringLiteral();\r\n    if (match) {\r\n      return match;\r\n    }\r\n\r\n    match = this.scanPunctuator() || this.scanNumericLiteral() || this.scanIdentifier() || this.scanTemplateSequence();\r\n\r\n    if (match) {\r\n      this.skip(match.value.length);\r\n      return match;\r\n    }\r\n\r\n    // No token could be matched, give up.\r\n    return null;\r\n  },\r\n\r\n  scanTemplateSequence: function() {\r\n    if (this.peek() === '[' && this.peek(1) === '[') {\r\n      return {\r\n        type: 'templateStart',\r\n        value: '[[',\r\n        pos: this.char,\r\n      };\r\n    }\r\n\r\n    if (this.peek() === ']' && this.peek(1) === ']') {\r\n      return {\r\n        type: 'templateEnd',\r\n        value: '[[',\r\n        pos: this.char,\r\n      };\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  /*\r\n   * Extract a JavaScript identifier out of the next sequence of\r\n   * characters or return 'null' if its not possible. In addition,\r\n   * to Identifier this method can also produce BooleanLiteral\r\n   * (true/false) and NullLiteral (null).\r\n   */\r\n  scanIdentifier: function() {\r\n    let id = '';\r\n    let index = 0;\r\n    let type, char;\r\n\r\n    // Detects any character in the Unicode categories \"Uppercase\r\n    // letter (Lu)\", \"Lowercase letter (Ll)\", \"Titlecase letter\r\n    // (Lt)\", \"Modifier letter (Lm)\", \"Other letter (Lo)\", or\r\n    // \"Letter number (Nl)\".\r\n    //\r\n    // Both approach and unicodeLetterTable were borrowed from\r\n    // Google's Traceur.\r\n\r\n    function isUnicodeLetter(code) {\r\n      for (let i = 0; i < unicodeLetterTable.length; ) {\r\n        if (code < unicodeLetterTable[i++]) {\r\n          return false;\r\n        }\r\n\r\n        if (code <= unicodeLetterTable[i++]) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    function isHexDigit(str) {\r\n      return /^[0-9a-fA-F]$/.test(str);\r\n    }\r\n\r\n    const readUnicodeEscapeSequence = _.bind(function(this: any) {\r\n      /*jshint validthis:true */\r\n      index += 1;\r\n\r\n      if (this.peek(index) !== 'u') {\r\n        return null;\r\n      }\r\n\r\n      const ch1 = this.peek(index + 1);\r\n      const ch2 = this.peek(index + 2);\r\n      const ch3 = this.peek(index + 3);\r\n      const ch4 = this.peek(index + 4);\r\n      let code;\r\n\r\n      if (isHexDigit(ch1) && isHexDigit(ch2) && isHexDigit(ch3) && isHexDigit(ch4)) {\r\n        code = parseInt(ch1 + ch2 + ch3 + ch4, 16);\r\n\r\n        if (isUnicodeLetter(code)) {\r\n          index += 5;\r\n          return '\\\\u' + ch1 + ch2 + ch3 + ch4;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      return null;\r\n    }, this);\r\n\r\n    const getIdentifierStart = _.bind(function(this: any) {\r\n      /*jshint validthis:true */\r\n      const chr = this.peek(index);\r\n      const code = chr.charCodeAt(0);\r\n\r\n      if (chr === '*') {\r\n        index += 1;\r\n        return chr;\r\n      }\r\n\r\n      if (code === 92) {\r\n        return readUnicodeEscapeSequence();\r\n      }\r\n\r\n      if (code < 128) {\r\n        if (identifierStartTable[code]) {\r\n          index += 1;\r\n          return chr;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      if (isUnicodeLetter(code)) {\r\n        index += 1;\r\n        return chr;\r\n      }\r\n\r\n      return null;\r\n    }, this);\r\n\r\n    const getIdentifierPart = _.bind(function(this: any) {\r\n      /*jshint validthis:true */\r\n      const chr = this.peek(index);\r\n      const code = chr.charCodeAt(0);\r\n\r\n      if (code === 92) {\r\n        return readUnicodeEscapeSequence();\r\n      }\r\n\r\n      if (code < 128) {\r\n        if (identifierPartTable[code]) {\r\n          index += 1;\r\n          return chr;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      if (isUnicodeLetter(code)) {\r\n        index += 1;\r\n        return chr;\r\n      }\r\n\r\n      return null;\r\n    }, this);\r\n\r\n    char = getIdentifierStart();\r\n    if (char === null) {\r\n      return null;\r\n    }\r\n\r\n    id = char;\r\n    for (;;) {\r\n      char = getIdentifierPart();\r\n\r\n      if (char === null) {\r\n        break;\r\n      }\r\n\r\n      id += char;\r\n    }\r\n\r\n    switch (id) {\r\n      case 'true': {\r\n        type = 'bool';\r\n        break;\r\n      }\r\n      case 'false': {\r\n        type = 'bool';\r\n        break;\r\n      }\r\n      default:\r\n        type = 'identifier';\r\n    }\r\n\r\n    return {\r\n      type: type,\r\n      value: id,\r\n      pos: this.char,\r\n    };\r\n  },\r\n\r\n  /*\r\n   * Extract a numeric literal out of the next sequence of\r\n   * characters or return 'null' if its not possible. This method\r\n   * supports all numeric literals described in section 7.8.3\r\n   * of the EcmaScript 5 specification.\r\n   *\r\n   * This method's implementation was heavily influenced by the\r\n   * scanNumericLiteral function in the Esprima parser's source code.\r\n   */\r\n  scanNumericLiteral: function(): any {\r\n    let index = 0;\r\n    let value = '';\r\n    const length = this.input.length;\r\n    let char = this.peek(index);\r\n    let bad;\r\n\r\n    function isDecimalDigit(str) {\r\n      return /^[0-9]$/.test(str);\r\n    }\r\n\r\n    function isOctalDigit(str) {\r\n      return /^[0-7]$/.test(str);\r\n    }\r\n\r\n    function isHexDigit(str) {\r\n      return /^[0-9a-fA-F]$/.test(str);\r\n    }\r\n\r\n    function isIdentifierStart(ch) {\r\n      return ch === '$' || ch === '_' || ch === '\\\\' || (ch >= 'a' && ch <= 'z') || (ch >= 'A' && ch <= 'Z');\r\n    }\r\n\r\n    // handle negative num literals\r\n    if (char === '-') {\r\n      value += char;\r\n      index += 1;\r\n      char = this.peek(index);\r\n    }\r\n\r\n    // Numbers must start either with a decimal digit or a point.\r\n    if (char !== '.' && !isDecimalDigit(char)) {\r\n      return null;\r\n    }\r\n\r\n    if (char !== '.') {\r\n      value += this.peek(index);\r\n      index += 1;\r\n      char = this.peek(index);\r\n\r\n      if (value === '0') {\r\n        // Base-16 numbers.\r\n        if (char === 'x' || char === 'X') {\r\n          index += 1;\r\n          value += char;\r\n\r\n          while (index < length) {\r\n            char = this.peek(index);\r\n            if (!isHexDigit(char)) {\r\n              break;\r\n            }\r\n            value += char;\r\n            index += 1;\r\n          }\r\n\r\n          if (value.length <= 2) {\r\n            // 0x\r\n            return {\r\n              type: 'number',\r\n              value: value,\r\n              isMalformed: true,\r\n              pos: this.char,\r\n            };\r\n          }\r\n\r\n          if (index < length) {\r\n            char = this.peek(index);\r\n            if (isIdentifierStart(char)) {\r\n              return null;\r\n            }\r\n          }\r\n\r\n          return {\r\n            type: 'number',\r\n            value: value,\r\n            base: 16,\r\n            isMalformed: false,\r\n            pos: this.char,\r\n          };\r\n        }\r\n\r\n        // Base-8 numbers.\r\n        if (isOctalDigit(char)) {\r\n          index += 1;\r\n          value += char;\r\n          bad = false;\r\n\r\n          while (index < length) {\r\n            char = this.peek(index);\r\n\r\n            // Numbers like '019' (note the 9) are not valid octals\r\n            // but we still parse them and mark as malformed.\r\n\r\n            if (isDecimalDigit(char)) {\r\n              bad = true;\r\n            }\r\n            if (!isOctalDigit(char)) {\r\n              // if the char is a non punctuator then its not a valid number\r\n              if (!this.isPunctuator(char)) {\r\n                return null;\r\n              }\r\n              break;\r\n            }\r\n            value += char;\r\n            index += 1;\r\n          }\r\n\r\n          if (index < length) {\r\n            char = this.peek(index);\r\n            if (isIdentifierStart(char)) {\r\n              return null;\r\n            }\r\n          }\r\n\r\n          return {\r\n            type: 'number',\r\n            value: value,\r\n            base: 8,\r\n            isMalformed: bad,\r\n          };\r\n        }\r\n\r\n        // Decimal numbers that start with '0' such as '09' are illegal\r\n        // but we still parse them and return as malformed.\r\n\r\n        if (isDecimalDigit(char)) {\r\n          index += 1;\r\n          value += char;\r\n        }\r\n      }\r\n\r\n      while (index < length) {\r\n        char = this.peek(index);\r\n        if (!isDecimalDigit(char)) {\r\n          break;\r\n        }\r\n        value += char;\r\n        index += 1;\r\n      }\r\n    }\r\n\r\n    // Decimal digits.\r\n\r\n    if (char === '.') {\r\n      value += char;\r\n      index += 1;\r\n\r\n      while (index < length) {\r\n        char = this.peek(index);\r\n        if (!isDecimalDigit(char)) {\r\n          break;\r\n        }\r\n        value += char;\r\n        index += 1;\r\n      }\r\n    }\r\n\r\n    // Exponent part.\r\n\r\n    if (char === 'e' || char === 'E') {\r\n      value += char;\r\n      index += 1;\r\n      char = this.peek(index);\r\n\r\n      if (char === '+' || char === '-') {\r\n        value += this.peek(index);\r\n        index += 1;\r\n      }\r\n\r\n      char = this.peek(index);\r\n      if (isDecimalDigit(char)) {\r\n        value += char;\r\n        index += 1;\r\n\r\n        while (index < length) {\r\n          char = this.peek(index);\r\n          if (!isDecimalDigit(char)) {\r\n            break;\r\n          }\r\n          value += char;\r\n          index += 1;\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    if (index < length) {\r\n      char = this.peek(index);\r\n      if (!this.isPunctuator(char)) {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return {\r\n      type: 'number',\r\n      value: value,\r\n      base: 10,\r\n      pos: this.char,\r\n      isMalformed: !isFinite(+value),\r\n    };\r\n  },\r\n\r\n  isPunctuator: ch1 => {\r\n    switch (ch1) {\r\n      case '.':\r\n      case '(':\r\n      case ')':\r\n      case ',':\r\n      case '{':\r\n      case '}':\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  scanPunctuator: function() {\r\n    const ch1 = this.peek();\r\n\r\n    if (this.isPunctuator(ch1)) {\r\n      return {\r\n        type: ch1,\r\n        value: ch1,\r\n        pos: this.char,\r\n      };\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  /*\r\n   * Extract a string out of the next sequence of characters and/or\r\n   * lines or return 'null' if its not possible. Since strings can\r\n   * span across multiple lines this method has to move the char\r\n   * pointer.\r\n   *\r\n   * This method recognizes pseudo-multiline JavaScript strings:\r\n   *\r\n   *   var str = \"hello\\\r\n   *   world\";\r\n   */\r\n  scanStringLiteral: function() {\r\n    /*jshint loopfunc:true */\r\n    const quote = this.peek();\r\n\r\n    // String must start with a quote.\r\n    if (quote !== '\"' && quote !== \"'\") {\r\n      return null;\r\n    }\r\n\r\n    let value = '';\r\n\r\n    this.skip();\r\n\r\n    while (this.peek() !== quote) {\r\n      if (this.peek() === '') {\r\n        // End Of Line\r\n        return {\r\n          type: 'string',\r\n          value: value,\r\n          isUnclosed: true,\r\n          quote: quote,\r\n          pos: this.char,\r\n        };\r\n      }\r\n\r\n      const char = this.peek();\r\n      const jump = 1; // A length of a jump, after we're done\r\n      // parsing this character.\r\n\r\n      value += char;\r\n      this.skip(jump);\r\n    }\r\n\r\n    this.skip();\r\n    return {\r\n      type: 'string',\r\n      value: value,\r\n      isUnclosed: false,\r\n      quote: quote,\r\n      pos: this.char,\r\n    };\r\n  },\r\n};\r\n","import { Lexer } from './lexer';\r\n\r\nexport function Parser(this: any, expression) {\r\n  this.expression = expression;\r\n  this.lexer = new Lexer(expression);\r\n  this.tokens = this.lexer.tokenize();\r\n  this.index = 0;\r\n}\r\n\r\nParser.prototype = {\r\n  getAst: function() {\r\n    return this.start();\r\n  },\r\n\r\n  start: function() {\r\n    try {\r\n      return this.functionCall() || this.metricExpression();\r\n    } catch (e) {\r\n      return {\r\n        type: 'error',\r\n        message: e.message,\r\n        pos: e.pos,\r\n      };\r\n    }\r\n  },\r\n\r\n  curlyBraceSegment: function() {\r\n    if (this.match('identifier', '{') || this.match('{')) {\r\n      let curlySegment = '';\r\n\r\n      while (!this.match('') && !this.match('}')) {\r\n        curlySegment += this.consumeToken().value;\r\n      }\r\n\r\n      if (!this.match('}')) {\r\n        this.errorMark(\"Expected closing '}'\");\r\n      }\r\n\r\n      curlySegment += this.consumeToken().value;\r\n\r\n      // if curly segment is directly followed by identifier\r\n      // include it in the segment\r\n      if (this.match('identifier')) {\r\n        curlySegment += this.consumeToken().value;\r\n      }\r\n\r\n      return {\r\n        type: 'segment',\r\n        value: curlySegment,\r\n      };\r\n    } else {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  metricSegment: function() {\r\n    const curly = this.curlyBraceSegment();\r\n    if (curly) {\r\n      return curly;\r\n    }\r\n\r\n    if (this.match('identifier') || this.match('number')) {\r\n      // hack to handle float numbers in metric segments\r\n      const parts = this.consumeToken().value.split('.');\r\n      if (parts.length === 2) {\r\n        this.tokens.splice(this.index, 0, { type: '.' });\r\n        this.tokens.splice(this.index + 1, 0, {\r\n          type: 'number',\r\n          value: parts[1],\r\n        });\r\n      }\r\n\r\n      return {\r\n        type: 'segment',\r\n        value: parts[0],\r\n      };\r\n    }\r\n\r\n    if (!this.match('templateStart')) {\r\n      this.errorMark('Expected metric identifier');\r\n    }\r\n\r\n    this.consumeToken();\r\n\r\n    if (!this.match('identifier')) {\r\n      this.errorMark('Expected identifier after templateStart');\r\n    }\r\n\r\n    const node = {\r\n      type: 'template',\r\n      value: this.consumeToken().value,\r\n    };\r\n\r\n    if (!this.match('templateEnd')) {\r\n      this.errorMark('Expected templateEnd');\r\n    }\r\n\r\n    this.consumeToken();\r\n    return node;\r\n  },\r\n\r\n  metricExpression: function() {\r\n    if (!this.match('templateStart') && !this.match('identifier') && !this.match('number') && !this.match('{')) {\r\n      return null;\r\n    }\r\n\r\n    const node = {\r\n      type: 'metric',\r\n      segments: [],\r\n    };\r\n\r\n    node.segments.push(this.metricSegment());\r\n\r\n    while (this.match('.')) {\r\n      this.consumeToken();\r\n\r\n      const segment = this.metricSegment();\r\n      if (!segment) {\r\n        this.errorMark('Expected metric identifier');\r\n      }\r\n\r\n      node.segments.push(segment);\r\n    }\r\n\r\n    return node;\r\n  },\r\n\r\n  functionCall: function() {\r\n    if (!this.match('identifier', '(')) {\r\n      return null;\r\n    }\r\n\r\n    const node: any = {\r\n      type: 'function',\r\n      name: this.consumeToken().value,\r\n    };\r\n\r\n    // consume left parenthesis\r\n    this.consumeToken();\r\n\r\n    node.params = this.functionParameters();\r\n\r\n    if (!this.match(')')) {\r\n      this.errorMark('Expected closing parenthesis');\r\n    }\r\n\r\n    this.consumeToken();\r\n\r\n    return node;\r\n  },\r\n\r\n  boolExpression: function() {\r\n    if (!this.match('bool')) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      type: 'bool',\r\n      value: this.consumeToken().value === 'true',\r\n    };\r\n  },\r\n\r\n  functionParameters: function() {\r\n    if (this.match(')') || this.match('')) {\r\n      return [];\r\n    }\r\n\r\n    const param =\r\n      this.functionCall() ||\r\n      this.numericLiteral() ||\r\n      this.seriesRefExpression() ||\r\n      this.boolExpression() ||\r\n      this.metricExpression() ||\r\n      this.stringLiteral();\r\n\r\n    if (!this.match(',')) {\r\n      return [param];\r\n    }\r\n\r\n    this.consumeToken();\r\n    return [param].concat(this.functionParameters());\r\n  },\r\n\r\n  seriesRefExpression: function() {\r\n    if (!this.match('identifier')) {\r\n      return null;\r\n    }\r\n\r\n    const value = this.tokens[this.index].value;\r\n    if (!value.match(/\\#[A-Z]/)) {\r\n      return null;\r\n    }\r\n\r\n    const token = this.consumeToken();\r\n\r\n    return {\r\n      type: 'series-ref',\r\n      value: token.value,\r\n    };\r\n  },\r\n\r\n  numericLiteral: function() {\r\n    if (!this.match('number')) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      type: 'number',\r\n      value: parseFloat(this.consumeToken().value),\r\n    };\r\n  },\r\n\r\n  stringLiteral: function() {\r\n    if (!this.match('string')) {\r\n      return null;\r\n    }\r\n\r\n    const token = this.consumeToken();\r\n    if (token.isUnclosed) {\r\n      throw { message: 'Unclosed string parameter', pos: token.pos };\r\n    }\r\n\r\n    return {\r\n      type: 'string',\r\n      value: token.value,\r\n    };\r\n  },\r\n\r\n  errorMark: function(text) {\r\n    const currentToken = this.tokens[this.index];\r\n    const type = currentToken ? currentToken.type : 'end of string';\r\n    throw {\r\n      message: text + ' instead found ' + type,\r\n      pos: currentToken ? currentToken.pos : this.lexer.char,\r\n    };\r\n  },\r\n\r\n  // returns token value and incre\r\n  consumeToken: function() {\r\n    this.index++;\r\n    return this.tokens[this.index - 1];\r\n  },\r\n\r\n  matchToken: function(type, index) {\r\n    const token = this.tokens[this.index + index];\r\n    return (token === undefined && type === '') || (token && token.type === type);\r\n  },\r\n\r\n  match: function(token1, token2) {\r\n    return this.matchToken(token1, 0) && (!token2 || this.matchToken(token2, 1));\r\n  },\r\n};\r\n","import _ from 'lodash';\r\nimport { Parser } from './parser';\r\n\r\nexport default class GraphiteQuery {\r\n  datasource: any;\r\n  target: any;\r\n  functions: any[];\r\n  segments: any[];\r\n  tags: any[];\r\n  error: any;\r\n  seriesByTagUsed: boolean;\r\n  checkOtherSegmentsIndex: number;\r\n  removeTagValue: string;\r\n  templateSrv: any;\r\n  scopedVars: any;\r\n\r\n  /** @ngInject */\r\n  constructor(datasource, target, templateSrv?, scopedVars?) {\r\n    this.datasource = datasource;\r\n    this.target = target;\r\n    this.parseTarget();\r\n\r\n    this.removeTagValue = '-- remove tag --';\r\n  }\r\n\r\n  parseTarget() {\r\n    this.functions = [];\r\n    this.segments = [];\r\n    this.tags = [];\r\n    this.error = null;\r\n\r\n    if (this.target.textEditor) {\r\n      return;\r\n    }\r\n\r\n    const parser = new Parser(this.target.target);\r\n    const astNode = parser.getAst();\r\n    if (astNode === null) {\r\n      this.checkOtherSegmentsIndex = 0;\r\n      return;\r\n    }\r\n\r\n    if (astNode.type === 'error') {\r\n      this.error = astNode.message + ' at position: ' + astNode.pos;\r\n      this.target.textEditor = true;\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.parseTargetRecursive(astNode, null);\r\n    } catch (err) {\r\n      console.log('error parsing target:', err.message);\r\n      this.error = err.message;\r\n      this.target.textEditor = true;\r\n    }\r\n\r\n    this.checkOtherSegmentsIndex = this.segments.length - 1;\r\n    this.checkForSeriesByTag();\r\n  }\r\n\r\n  checkForSeriesByTag() {\r\n    const seriesByTagFunc = _.find(this.functions, func => func.def.name === 'seriesByTag');\r\n    if (seriesByTagFunc) {\r\n      this.seriesByTagUsed = true;\r\n      seriesByTagFunc.hidden = true;\r\n      const tags = this.splitSeriesByTagParams(seriesByTagFunc);\r\n      this.tags = tags;\r\n    }\r\n  }\r\n\r\n  getSegmentPathUpTo(index) {\r\n    const arr = this.segments.slice(0, index);\r\n\r\n    return _.reduce(\r\n      arr,\r\n      (result, segment) => {\r\n        return result ? result + '.' + segment.value : segment.value;\r\n      },\r\n      ''\r\n    );\r\n  }\r\n\r\n  parseTargetRecursive(astNode, func) {\r\n    if (astNode === null) {\r\n      return null;\r\n    }\r\n\r\n    switch (astNode.type) {\r\n      case 'function':\r\n        const innerFunc = this.datasource.createFuncInstance(astNode.name, {\r\n          withDefaultParams: false,\r\n        });\r\n        _.each(astNode.params, param => {\r\n          this.parseTargetRecursive(param, innerFunc);\r\n        });\r\n\r\n        innerFunc.updateText();\r\n        this.functions.push(innerFunc);\r\n        break;\r\n      case 'series-ref':\r\n        if (this.segments.length > 0) {\r\n          this.addFunctionParameter(func, astNode.value);\r\n        } else {\r\n          this.segments.push(astNode);\r\n        }\r\n        break;\r\n      case 'bool':\r\n      case 'string':\r\n      case 'number':\r\n        this.addFunctionParameter(func, astNode.value);\r\n        break;\r\n      case 'metric':\r\n        if (this.segments.length > 0) {\r\n          this.addFunctionParameter(func, _.join(_.map(astNode.segments, 'value'), '.'));\r\n        } else {\r\n          this.segments = astNode.segments;\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  updateSegmentValue(segment, index) {\r\n    this.segments[index].value = segment.value;\r\n  }\r\n\r\n  addSelectMetricSegment() {\r\n    this.segments.push({ value: 'select metric' });\r\n  }\r\n\r\n  addFunction(newFunc) {\r\n    this.functions.push(newFunc);\r\n    this.moveAliasFuncLast();\r\n  }\r\n\r\n  moveAliasFuncLast() {\r\n    const aliasFunc = _.find(this.functions, func => {\r\n      return func.def.name.startsWith('alias');\r\n    });\r\n\r\n    if (aliasFunc) {\r\n      this.functions = _.without(this.functions, aliasFunc);\r\n      this.functions.push(aliasFunc);\r\n    }\r\n  }\r\n\r\n  addFunctionParameter(func, value) {\r\n    if (func.params.length >= func.def.params.length && !_.get(_.last(func.def.params), 'multiple', false)) {\r\n      throw { message: 'too many parameters for function ' + func.def.name };\r\n    }\r\n    func.params.push(value);\r\n  }\r\n\r\n  removeFunction(func) {\r\n    this.functions = _.without(this.functions, func);\r\n  }\r\n\r\n  updateModelTarget(targets) {\r\n    // render query\r\n    if (!this.target.textEditor) {\r\n      const metricPath = this.getSegmentPathUpTo(this.segments.length).replace(/\\.select metric$/, '');\r\n      this.target.target = _.reduce(this.functions, wrapFunction, metricPath);\r\n    }\r\n\r\n    this.updateRenderedTarget(this.target, targets);\r\n\r\n    // loop through other queries and update targetFull as needed\r\n    for (const target of targets || []) {\r\n      if (target.refId !== this.target.refId) {\r\n        this.updateRenderedTarget(target, targets);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateRenderedTarget(target, targets) {\r\n    // render nested query\r\n    const targetsByRefId = _.keyBy(targets, 'refId');\r\n\r\n    // no references to self\r\n    delete targetsByRefId[target.refId];\r\n\r\n    const nestedSeriesRefRegex = /\\#([A-Z])/g;\r\n    let targetWithNestedQueries = target.target;\r\n\r\n    // Use ref count to track circular references\r\n    function countTargetRefs(targetsByRefId, refId) {\r\n      let refCount = 0;\r\n      _.each(targetsByRefId, (t, id) => {\r\n        if (id !== refId) {\r\n          const match = nestedSeriesRefRegex.exec(t.target);\r\n          const count = match && match.length ? match.length - 1 : 0;\r\n          refCount += count;\r\n        }\r\n      });\r\n      targetsByRefId[refId].refCount = refCount;\r\n    }\r\n    _.each(targetsByRefId, (t, id) => {\r\n      countTargetRefs(targetsByRefId, id);\r\n    });\r\n\r\n    // Keep interpolating until there are no query references\r\n    // The reason for the loop is that the referenced query might contain another reference to another query\r\n    while (targetWithNestedQueries.match(nestedSeriesRefRegex)) {\r\n      const updated = targetWithNestedQueries.replace(nestedSeriesRefRegex, (match, g1) => {\r\n        const t = targetsByRefId[g1];\r\n        if (!t) {\r\n          return match;\r\n        }\r\n\r\n        // no circular references\r\n        if (t.refCount === 0) {\r\n          delete targetsByRefId[g1];\r\n        }\r\n        t.refCount--;\r\n\r\n        return t.target;\r\n      });\r\n\r\n      if (updated === targetWithNestedQueries) {\r\n        break;\r\n      }\r\n\r\n      targetWithNestedQueries = updated;\r\n    }\r\n\r\n    delete target.targetFull;\r\n    if (target.target !== targetWithNestedQueries) {\r\n      target.targetFull = targetWithNestedQueries;\r\n    }\r\n  }\r\n\r\n  splitSeriesByTagParams(func) {\r\n    const tagPattern = /([^\\!=~]+)(\\!?=~?)(.*)/;\r\n    return _.flatten(\r\n      _.map(func.params, (param: string) => {\r\n        const matches = tagPattern.exec(param);\r\n        if (matches) {\r\n          const tag = matches.slice(1);\r\n          if (tag.length === 3) {\r\n            return {\r\n              key: tag[0],\r\n              operator: tag[1],\r\n              value: tag[2],\r\n            };\r\n          }\r\n        }\r\n        return [];\r\n      })\r\n    );\r\n  }\r\n\r\n  getSeriesByTagFuncIndex() {\r\n    return _.findIndex(this.functions, func => func.def.name === 'seriesByTag');\r\n  }\r\n\r\n  getSeriesByTagFunc() {\r\n    const seriesByTagFuncIndex = this.getSeriesByTagFuncIndex();\r\n    if (seriesByTagFuncIndex >= 0) {\r\n      return this.functions[seriesByTagFuncIndex];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  addTag(tag) {\r\n    const newTagParam = renderTagString(tag);\r\n    this.getSeriesByTagFunc().params.push(newTagParam);\r\n    this.tags.push(tag);\r\n  }\r\n\r\n  removeTag(index) {\r\n    this.getSeriesByTagFunc().params.splice(index, 1);\r\n    this.tags.splice(index, 1);\r\n  }\r\n\r\n  updateTag(tag, tagIndex) {\r\n    this.error = null;\r\n\r\n    if (tag.key === this.removeTagValue) {\r\n      this.removeTag(tagIndex);\r\n      return;\r\n    }\r\n\r\n    const newTagParam = renderTagString(tag);\r\n    this.getSeriesByTagFunc().params[tagIndex] = newTagParam;\r\n    this.tags[tagIndex] = tag;\r\n  }\r\n\r\n  renderTagExpressions(excludeIndex = -1) {\r\n    return _.compact(\r\n      _.map(this.tags, (tagExpr, index) => {\r\n        // Don't render tag that we want to lookup\r\n        if (index !== excludeIndex) {\r\n          return tagExpr.key + tagExpr.operator + tagExpr.value;\r\n        }\r\n      })\r\n    );\r\n  }\r\n}\r\n\r\nfunction wrapFunction(target, func) {\r\n  return func.render(target);\r\n}\r\n\r\nfunction renderTagString(tag) {\r\n  return tag.key + tag.operator + tag.value;\r\n}\r\n","import './add_graphite_func';\r\nimport './func_editor';\r\n\r\nimport _ from 'lodash';\r\nimport GraphiteQuery from './graphite_query';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nconst GRAPHITE_TAG_OPERATORS = ['=', '!=', '=~', '!=~'];\r\nconst TAG_PREFIX = 'tag: ';\r\n\r\nexport class GraphiteQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n\r\n  queryModel: GraphiteQuery;\r\n  segments: any[];\r\n  addTagSegments: any[];\r\n  removeTagValue: string;\r\n  supportsTags: boolean;\r\n  paused: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private uiSegmentSrv, private templateSrv, $timeout) {\r\n    super($scope, $injector);\r\n    this.supportsTags = this.datasource.supportsTags;\r\n    this.paused = false;\r\n    this.target.target = this.target.target || '';\r\n\r\n    this.datasource.waitForFuncDefsLoaded().then(() => {\r\n      this.queryModel = new GraphiteQuery(this.datasource, this.target, templateSrv);\r\n      this.buildSegments();\r\n    });\r\n\r\n    this.removeTagValue = '-- remove tag --';\r\n  }\r\n\r\n  parseTarget() {\r\n    this.queryModel.parseTarget();\r\n    this.buildSegments();\r\n  }\r\n\r\n  toggleEditorMode() {\r\n    this.target.textEditor = !this.target.textEditor;\r\n    this.parseTarget();\r\n  }\r\n\r\n  buildSegments() {\r\n    this.segments = _.map(this.queryModel.segments, segment => {\r\n      return this.uiSegmentSrv.newSegment(segment);\r\n    });\r\n\r\n    const checkOtherSegmentsIndex = this.queryModel.checkOtherSegmentsIndex || 0;\r\n    this.checkOtherSegments(checkOtherSegmentsIndex);\r\n\r\n    if (this.queryModel.seriesByTagUsed) {\r\n      this.fixTagSegments();\r\n    }\r\n  }\r\n\r\n  addSelectMetricSegment() {\r\n    this.queryModel.addSelectMetricSegment();\r\n    this.segments.push(this.uiSegmentSrv.newSelectMetric());\r\n  }\r\n\r\n  checkOtherSegments(fromIndex) {\r\n    if (this.queryModel.segments.length === 1 && this.queryModel.segments[0].type === 'series-ref') {\r\n      return;\r\n    }\r\n\r\n    if (fromIndex === 0) {\r\n      this.addSelectMetricSegment();\r\n      return;\r\n    }\r\n\r\n    const path = this.queryModel.getSegmentPathUpTo(fromIndex + 1);\r\n    if (path === '') {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    return this.datasource\r\n      .metricFindQuery(path)\r\n      .then(segments => {\r\n        if (segments.length === 0) {\r\n          if (path !== '') {\r\n            this.queryModel.segments = this.queryModel.segments.splice(0, fromIndex);\r\n            this.segments = this.segments.splice(0, fromIndex);\r\n            this.addSelectMetricSegment();\r\n          }\r\n        } else if (segments[0].expandable) {\r\n          if (this.segments.length === fromIndex) {\r\n            this.addSelectMetricSegment();\r\n          } else {\r\n            return this.checkOtherSegments(fromIndex + 1);\r\n          }\r\n        }\r\n      })\r\n      .catch(err => {\r\n        appEvents.emit('alert-error', ['Error', err]);\r\n      });\r\n  }\r\n\r\n  setSegmentFocus(segmentIndex) {\r\n    _.each(this.segments, (segment, index) => {\r\n      segment.focus = segmentIndex === index;\r\n    });\r\n  }\r\n\r\n  getAltSegments(index, prefix) {\r\n    let query = prefix && prefix.length > 0 ? '*' + prefix + '*' : '*';\r\n    if (index > 0) {\r\n      query = this.queryModel.getSegmentPathUpTo(index) + '.' + query;\r\n    }\r\n    const options = {\r\n      range: this.panelCtrl.range,\r\n      requestId: 'get-alt-segments',\r\n    };\r\n\r\n    return this.datasource\r\n      .metricFindQuery(query, options)\r\n      .then(segments => {\r\n        const altSegments = _.map(segments, segment => {\r\n          return this.uiSegmentSrv.newSegment({\r\n            value: segment.text,\r\n            expandable: segment.expandable,\r\n          });\r\n        });\r\n\r\n        if (index > 0 && altSegments.length === 0) {\r\n          return altSegments;\r\n        }\r\n\r\n        // add query references\r\n        if (index === 0) {\r\n          _.eachRight(this.panelCtrl.panel.targets, target => {\r\n            if (target.refId === this.queryModel.target.refId) {\r\n              return;\r\n            }\r\n\r\n            altSegments.unshift(\r\n              this.uiSegmentSrv.newSegment({\r\n                type: 'series-ref',\r\n                value: '#' + target.refId,\r\n                expandable: false,\r\n              })\r\n            );\r\n          });\r\n        }\r\n\r\n        // add template variables\r\n        _.eachRight(this.templateSrv.variables, variable => {\r\n          altSegments.unshift(\r\n            this.uiSegmentSrv.newSegment({\r\n              type: 'template',\r\n              value: '$' + variable.name,\r\n              expandable: true,\r\n            })\r\n          );\r\n        });\r\n\r\n        // add wildcard option\r\n        altSegments.unshift(this.uiSegmentSrv.newSegment('*'));\r\n\r\n        if (this.supportsTags && index === 0) {\r\n          this.removeTaggedEntry(altSegments);\r\n          return this.addAltTagSegments(prefix, altSegments);\r\n        } else {\r\n          return altSegments;\r\n        }\r\n      })\r\n      .catch(err => {\r\n        return [];\r\n      });\r\n  }\r\n\r\n  addAltTagSegments(prefix, altSegments) {\r\n    return this.getTagsAsSegments(prefix).then(tagSegments => {\r\n      tagSegments = _.map(tagSegments, segment => {\r\n        segment.value = TAG_PREFIX + segment.value;\r\n        return segment;\r\n      });\r\n      return altSegments.concat(...tagSegments);\r\n    });\r\n  }\r\n\r\n  removeTaggedEntry(altSegments) {\r\n    altSegments = _.remove(altSegments, s => s.value === '_tagged');\r\n  }\r\n\r\n  segmentValueChanged(segment, segmentIndex) {\r\n    this.error = null;\r\n    this.queryModel.updateSegmentValue(segment, segmentIndex);\r\n\r\n    if (this.queryModel.functions.length > 0 && this.queryModel.functions[0].def.fake) {\r\n      this.queryModel.functions = [];\r\n    }\r\n\r\n    if (segment.type === 'tag') {\r\n      const tag = removeTagPrefix(segment.value);\r\n      this.pause();\r\n      this.addSeriesByTagFunc(tag);\r\n      return;\r\n    }\r\n\r\n    if (segment.expandable) {\r\n      return this.checkOtherSegments(segmentIndex + 1).then(() => {\r\n        this.setSegmentFocus(segmentIndex + 1);\r\n        this.targetChanged();\r\n      });\r\n    } else {\r\n      this.spliceSegments(segmentIndex + 1);\r\n    }\r\n\r\n    this.setSegmentFocus(segmentIndex + 1);\r\n    this.targetChanged();\r\n  }\r\n\r\n  spliceSegments(index) {\r\n    this.segments = this.segments.splice(0, index);\r\n    this.queryModel.segments = this.queryModel.segments.splice(0, index);\r\n  }\r\n\r\n  emptySegments() {\r\n    this.queryModel.segments = [];\r\n    this.segments = [];\r\n  }\r\n\r\n  targetTextChanged() {\r\n    this.updateModelTarget();\r\n    this.refresh();\r\n  }\r\n\r\n  updateModelTarget() {\r\n    this.queryModel.updateModelTarget(this.panelCtrl.panel.targets);\r\n  }\r\n\r\n  targetChanged() {\r\n    if (this.queryModel.error) {\r\n      return;\r\n    }\r\n\r\n    const oldTarget = this.queryModel.target.target;\r\n    this.updateModelTarget();\r\n\r\n    if (this.queryModel.target !== oldTarget && !this.paused) {\r\n      this.panelCtrl.refresh();\r\n    }\r\n  }\r\n\r\n  addFunction(funcDef) {\r\n    const newFunc = this.datasource.createFuncInstance(funcDef, {\r\n      withDefaultParams: true,\r\n    });\r\n    newFunc.added = true;\r\n    this.queryModel.addFunction(newFunc);\r\n    this.smartlyHandleNewAliasByNode(newFunc);\r\n\r\n    if (this.segments.length === 1 && this.segments[0].fake) {\r\n      this.emptySegments();\r\n    }\r\n\r\n    if (!newFunc.params.length && newFunc.added) {\r\n      this.targetChanged();\r\n    }\r\n\r\n    if (newFunc.def.name === 'seriesByTag') {\r\n      this.parseTarget();\r\n    }\r\n  }\r\n\r\n  removeFunction(func) {\r\n    this.queryModel.removeFunction(func);\r\n    this.targetChanged();\r\n  }\r\n\r\n  addSeriesByTagFunc(tag) {\r\n    const newFunc = this.datasource.createFuncInstance('seriesByTag', {\r\n      withDefaultParams: false,\r\n    });\r\n    const tagParam = `${tag}=`;\r\n    newFunc.params = [tagParam];\r\n    this.queryModel.addFunction(newFunc);\r\n    newFunc.added = true;\r\n\r\n    this.emptySegments();\r\n    this.targetChanged();\r\n    this.parseTarget();\r\n  }\r\n\r\n  smartlyHandleNewAliasByNode(func) {\r\n    if (func.def.name !== 'aliasByNode') {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0; i < this.segments.length; i++) {\r\n      if (this.segments[i].value.indexOf('*') >= 0) {\r\n        func.params[0] = i;\r\n        func.added = false;\r\n        this.targetChanged();\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  getAllTags() {\r\n    return this.datasource.getTags().then(values => {\r\n      const altTags = _.map(values, 'text');\r\n      altTags.splice(0, 0, this.removeTagValue);\r\n      return mapToDropdownOptions(altTags);\r\n    });\r\n  }\r\n\r\n  getTags(index, tagPrefix) {\r\n    const tagExpressions = this.queryModel.renderTagExpressions(index);\r\n    return this.datasource.getTagsAutoComplete(tagExpressions, tagPrefix).then(values => {\r\n      const altTags = _.map(values, 'text');\r\n      altTags.splice(0, 0, this.removeTagValue);\r\n      return mapToDropdownOptions(altTags);\r\n    });\r\n  }\r\n\r\n  getTagsAsSegments(tagPrefix) {\r\n    const tagExpressions = this.queryModel.renderTagExpressions();\r\n    return this.datasource.getTagsAutoComplete(tagExpressions, tagPrefix).then(values => {\r\n      return _.map(values, val => {\r\n        return this.uiSegmentSrv.newSegment({\r\n          value: val.text,\r\n          type: 'tag',\r\n          expandable: false,\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  getTagOperators() {\r\n    return mapToDropdownOptions(GRAPHITE_TAG_OPERATORS);\r\n  }\r\n\r\n  getAllTagValues(tag) {\r\n    const tagKey = tag.key;\r\n    return this.datasource.getTagValues(tagKey).then(values => {\r\n      const altValues = _.map(values, 'text');\r\n      return mapToDropdownOptions(altValues);\r\n    });\r\n  }\r\n\r\n  getTagValues(tag, index, valuePrefix) {\r\n    const tagExpressions = this.queryModel.renderTagExpressions(index);\r\n    const tagKey = tag.key;\r\n    return this.datasource.getTagValuesAutoComplete(tagExpressions, tagKey, valuePrefix).then(values => {\r\n      const altValues = _.map(values, 'text');\r\n      // Add template variables as additional values\r\n      _.eachRight(this.templateSrv.variables, variable => {\r\n        altValues.push('${' + variable.name + ':regex}');\r\n      });\r\n      return mapToDropdownOptions(altValues);\r\n    });\r\n  }\r\n\r\n  tagChanged(tag, tagIndex) {\r\n    this.queryModel.updateTag(tag, tagIndex);\r\n    this.targetChanged();\r\n  }\r\n\r\n  addNewTag(segment) {\r\n    const newTagKey = segment.value;\r\n    const newTag = { key: newTagKey, operator: '=', value: '' };\r\n    this.queryModel.addTag(newTag);\r\n    this.targetChanged();\r\n    this.fixTagSegments();\r\n  }\r\n\r\n  removeTag(index) {\r\n    this.queryModel.removeTag(index);\r\n    this.targetChanged();\r\n  }\r\n\r\n  fixTagSegments() {\r\n    // Adding tag with the same name as just removed works incorrectly if single segment is used (instead of array)\r\n    this.addTagSegments = [this.uiSegmentSrv.newPlusButton()];\r\n  }\r\n\r\n  showDelimiter(index) {\r\n    return index !== this.queryModel.tags.length - 1;\r\n  }\r\n\r\n  pause() {\r\n    this.paused = true;\r\n  }\r\n\r\n  unpause() {\r\n    this.paused = false;\r\n    this.panelCtrl.refresh();\r\n  }\r\n}\r\n\r\nfunction mapToDropdownOptions(results) {\r\n  return _.map(results, value => {\r\n    return { text: value, value: value };\r\n  });\r\n}\r\n\r\nfunction removeTagPrefix(value: string): string {\r\n  return value.replace(TAG_PREFIX, '');\r\n}\r\n","import angular from 'angular';\r\nimport coreModule from 'app/core/core_module';\r\nimport _ from 'lodash';\r\n\r\nexport class CloudWatchQueryParameter {\r\n  constructor() {\r\n    return {\r\n      templateUrl: 'public/app/plugins/datasource/cloudwatch/partials/query.parameter.html',\r\n      controller: 'CloudWatchQueryParameterCtrl',\r\n      restrict: 'E',\r\n      scope: {\r\n        target: '=',\r\n        datasource: '=',\r\n        onChange: '&',\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport class CloudWatchQueryParameterCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, templateSrv, uiSegmentSrv, datasourceSrv, $q) {\r\n    $scope.init = () => {\r\n      const target = $scope.target;\r\n      target.namespace = target.namespace || '';\r\n      target.metricName = target.metricName || '';\r\n      target.statistics = target.statistics || ['Average'];\r\n      target.dimensions = target.dimensions || {};\r\n      target.period = target.period || '';\r\n      target.region = target.region || 'default';\r\n      target.id = target.id || '';\r\n      target.expression = target.expression || '';\r\n      target.returnData = target.returnData || false;\r\n      target.highResolution = target.highResolution || false;\r\n\r\n      $scope.regionSegment = uiSegmentSrv.getSegmentForValue($scope.target.region, 'select region');\r\n      $scope.namespaceSegment = uiSegmentSrv.getSegmentForValue($scope.target.namespace, 'select namespace');\r\n      $scope.metricSegment = uiSegmentSrv.getSegmentForValue($scope.target.metricName, 'select metric');\r\n\r\n      $scope.dimSegments = _.reduce(\r\n        $scope.target.dimensions,\r\n        (memo, value, key) => {\r\n          memo.push(uiSegmentSrv.newKey(key));\r\n          memo.push(uiSegmentSrv.newOperator('='));\r\n          memo.push(uiSegmentSrv.newKeyValue(value));\r\n          return memo;\r\n        },\r\n        []\r\n      );\r\n\r\n      $scope.statSegments = _.map($scope.target.statistics, stat => {\r\n        return uiSegmentSrv.getSegmentForValue(stat);\r\n      });\r\n\r\n      $scope.ensurePlusButton($scope.statSegments);\r\n      $scope.ensurePlusButton($scope.dimSegments);\r\n      $scope.removeDimSegment = uiSegmentSrv.newSegment({\r\n        fake: true,\r\n        value: '-- remove dimension --',\r\n      });\r\n      $scope.removeStatSegment = uiSegmentSrv.newSegment({\r\n        fake: true,\r\n        value: '-- remove stat --',\r\n      });\r\n\r\n      if (_.isEmpty($scope.target.region)) {\r\n        $scope.target.region = 'default';\r\n      }\r\n\r\n      if (!$scope.onChange) {\r\n        $scope.onChange = () => {};\r\n      }\r\n    };\r\n\r\n    $scope.getStatSegments = () => {\r\n      return $q.when(\r\n        _.flatten([\r\n          angular.copy($scope.removeStatSegment),\r\n          _.map($scope.datasource.standardStatistics, s => {\r\n            return uiSegmentSrv.getSegmentForValue(s);\r\n          }),\r\n          uiSegmentSrv.getSegmentForValue('pNN.NN'),\r\n        ])\r\n      );\r\n    };\r\n\r\n    $scope.statSegmentChanged = (segment, index) => {\r\n      if (segment.value === $scope.removeStatSegment.value) {\r\n        $scope.statSegments.splice(index, 1);\r\n      } else {\r\n        segment.type = 'value';\r\n      }\r\n\r\n      $scope.target.statistics = _.reduce(\r\n        $scope.statSegments,\r\n        (memo, seg) => {\r\n          if (!seg.fake) {\r\n            memo.push(seg.value);\r\n          }\r\n          return memo;\r\n        },\r\n        []\r\n      );\r\n\r\n      $scope.ensurePlusButton($scope.statSegments);\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.ensurePlusButton = segments => {\r\n      const count = segments.length;\r\n      const lastSegment = segments[Math.max(count - 1, 0)];\r\n\r\n      if (!lastSegment || lastSegment.type !== 'plus-button') {\r\n        segments.push(uiSegmentSrv.newPlusButton());\r\n      }\r\n    };\r\n\r\n    $scope.getDimSegments = (segment, $index) => {\r\n      if (segment.type === 'operator') {\r\n        return $q.when([]);\r\n      }\r\n\r\n      const target = $scope.target;\r\n      let query = $q.when([]);\r\n\r\n      if (segment.type === 'key' || segment.type === 'plus-button') {\r\n        query = $scope.datasource.getDimensionKeys($scope.target.namespace, $scope.target.region);\r\n      } else if (segment.type === 'value') {\r\n        const dimensionKey = $scope.dimSegments[$index - 2].value;\r\n        query = $scope.datasource.getDimensionValues(\r\n          target.region,\r\n          target.namespace,\r\n          target.metricName,\r\n          dimensionKey,\r\n          target.dimensions\r\n        );\r\n      }\r\n\r\n      return query.then($scope.transformToSegments(true)).then(results => {\r\n        if (segment.type === 'key') {\r\n          results.splice(0, 0, angular.copy($scope.removeDimSegment));\r\n        }\r\n        return results;\r\n      });\r\n    };\r\n\r\n    $scope.dimSegmentChanged = (segment, index) => {\r\n      $scope.dimSegments[index] = segment;\r\n\r\n      if (segment.value === $scope.removeDimSegment.value) {\r\n        $scope.dimSegments.splice(index, 3);\r\n      } else if (segment.type === 'plus-button') {\r\n        $scope.dimSegments.push(uiSegmentSrv.newOperator('='));\r\n        $scope.dimSegments.push(uiSegmentSrv.newFake('select dimension value', 'value', 'query-segment-value'));\r\n        segment.type = 'key';\r\n        segment.cssClass = 'query-segment-key';\r\n      }\r\n\r\n      $scope.syncDimSegmentsWithModel();\r\n      $scope.ensurePlusButton($scope.dimSegments);\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.syncDimSegmentsWithModel = () => {\r\n      const dims = {};\r\n      const length = $scope.dimSegments.length;\r\n\r\n      for (let i = 0; i < length - 2; i += 3) {\r\n        const keySegment = $scope.dimSegments[i];\r\n        const valueSegment = $scope.dimSegments[i + 2];\r\n        if (!valueSegment.fake) {\r\n          dims[keySegment.value] = valueSegment.value;\r\n        }\r\n      }\r\n\r\n      $scope.target.dimensions = dims;\r\n    };\r\n\r\n    $scope.getRegions = () => {\r\n      return $scope.datasource\r\n        .metricFindQuery('regions()')\r\n        .then(results => {\r\n          results.unshift({ text: 'default' });\r\n          return results;\r\n        })\r\n        .then($scope.transformToSegments(true));\r\n    };\r\n\r\n    $scope.getNamespaces = () => {\r\n      return $scope.datasource.metricFindQuery('namespaces()').then($scope.transformToSegments(true));\r\n    };\r\n\r\n    $scope.getMetrics = () => {\r\n      return $scope.datasource\r\n        .metricFindQuery('metrics(' + $scope.target.namespace + ',' + $scope.target.region + ')')\r\n        .then($scope.transformToSegments(true));\r\n    };\r\n\r\n    $scope.regionChanged = () => {\r\n      $scope.target.region = $scope.regionSegment.value;\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.namespaceChanged = () => {\r\n      $scope.target.namespace = $scope.namespaceSegment.value;\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.metricChanged = () => {\r\n      $scope.target.metricName = $scope.metricSegment.value;\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.transformToSegments = addTemplateVars => {\r\n      return results => {\r\n        const segments = _.map(results, segment => {\r\n          return uiSegmentSrv.newSegment({\r\n            value: segment.text,\r\n            expandable: segment.expandable,\r\n          });\r\n        });\r\n\r\n        if (addTemplateVars) {\r\n          _.each(templateSrv.variables, variable => {\r\n            segments.unshift(\r\n              uiSegmentSrv.newSegment({\r\n                type: 'template',\r\n                value: '$' + variable.name,\r\n                expandable: true,\r\n              })\r\n            );\r\n          });\r\n        }\r\n\r\n        return segments;\r\n      };\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\ncoreModule.directive('cloudwatchQueryParameter', CloudWatchQueryParameter);\r\ncoreModule.controller('CloudWatchQueryParameterCtrl', CloudWatchQueryParameterCtrl);\r\n","export class GraphiteConfigCtrl {\r\n  static templateUrl = 'public/app/plugins/datasource/graphite/partials/config.html';\r\n  datasourceSrv: any;\r\n  current: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, datasourceSrv) {\r\n    this.datasourceSrv = datasourceSrv;\r\n    this.current.jsonData = this.current.jsonData || {};\r\n    this.current.jsonData.graphiteVersion = this.current.jsonData.graphiteVersion || '0.9';\r\n    this.autoDetectGraphiteVersion();\r\n  }\r\n\r\n  autoDetectGraphiteVersion() {\r\n    if (!this.current.id) {\r\n      return;\r\n    }\r\n\r\n    this.datasourceSrv\r\n      .loadDatasource(this.current.name)\r\n      .then(ds => {\r\n        return ds.getVersion();\r\n      })\r\n      .then(version => {\r\n        this.graphiteVersions.push({ name: version, value: version });\r\n        this.current.jsonData.graphiteVersion = version;\r\n      });\r\n  }\r\n\r\n  graphiteVersions = [\r\n    { name: '0.9.x', value: '0.9' },\r\n    { name: '1.0.x', value: '1.0' },\r\n    { name: '1.1.x', value: '1.1' },\r\n  ];\r\n}\r\n","import { GraphiteDatasource } from './datasource';\r\nimport { GraphiteQueryCtrl } from './query_ctrl';\r\nimport { GraphiteConfigCtrl } from './config_ctrl';\r\n\r\nclass AnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n}\r\n\r\nexport {\r\n  GraphiteDatasource as Datasource,\r\n  GraphiteQueryCtrl as QueryCtrl,\r\n  GraphiteConfigCtrl as ConfigCtrl,\r\n  AnnotationsQueryCtrl,\r\n};\r\n","import kbn from 'app/core/utils/kbn';\r\nimport { assignModelProperties } from 'app/core/utils/model_utils';\r\n\r\nexport interface Variable {\r\n  setValue(option);\r\n  updateOptions();\r\n  dependsOn(variable);\r\n  setValueFromUrl(urlValue);\r\n  getValueForUrl();\r\n  getSaveModel();\r\n}\r\n\r\nexport let variableTypes = {};\r\nexport { assignModelProperties };\r\n\r\nexport function containsVariable(...args: any[]) {\r\n  let variableName = args[args.length - 1];\r\n  let str = args[0] || '';\r\n\r\n  for (let i = 1; i < args.length - 1; i++) {\r\n    str += ' ' + args[i] || '';\r\n  }\r\n\r\n  variableName = kbn.regexEscape(variableName);\r\n  const findVarRegex = new RegExp('\\\\$(' + variableName + ')(?:\\\\W|$)|\\\\[\\\\[(' + variableName + ')\\\\]\\\\]', 'g');\r\n  const match = findVarRegex.exec(str);\r\n  return match !== null;\r\n}\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport * as dateMath from 'app/core/utils/datemath';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport * as templatingVariable from 'app/features/templating/variable';\r\n// import * as moment from 'moment';\r\n\r\nexport default class CloudWatchDatasource {\r\n  type: any;\r\n  name: any;\r\n  proxyUrl: any;\r\n  defaultRegion: any;\r\n  instanceSettings: any;\r\n  standardStatistics: any;\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private $q, private backendSrv, private templateSrv, private timeSrv) {\r\n    this.type = 'cloudwatch';\r\n    this.name = instanceSettings.name;\r\n    this.proxyUrl = instanceSettings.url;\r\n    this.defaultRegion = instanceSettings.jsonData.defaultRegion;\r\n    this.instanceSettings = instanceSettings;\r\n    this.standardStatistics = ['Average', 'Maximum', 'Minimum', 'Sum', 'SampleCount'];\r\n  }\r\n\r\n  query(options) {\r\n    options = angular.copy(options);\r\n    options.targets = this.expandTemplateVariable(options.targets, options.scopedVars, this.templateSrv);\r\n\r\n    const queries = _.filter(options.targets, item => {\r\n      return (\r\n        (item.id !== '' || item.hide !== true) &&\r\n        ((!!item.region && !!item.namespace && !!item.metricName && !_.isEmpty(item.statistics)) ||\r\n          item.expression.length > 0)\r\n      );\r\n    }).map(item => {\r\n      item.region = this.templateSrv.replace(this.getActualRegion(item.region), options.scopedVars);\r\n      item.namespace = this.templateSrv.replace(item.namespace, options.scopedVars);\r\n      item.metricName = this.templateSrv.replace(item.metricName, options.scopedVars);\r\n      item.dimensions = this.convertDimensionFormat(item.dimensions, options.scopedVars);\r\n      item.period = String(this.getPeriod(item, options)); // use string format for period in graph query, and alerting\r\n      item.id = this.templateSrv.replace(item.id, options.scopedVars);\r\n      item.expression = this.templateSrv.replace(item.expression, options.scopedVars);\r\n      item.returnData = typeof item.hide === 'undefined' ? true : !item.hide;\r\n\r\n      // valid ExtendedStatistics is like p90.00, check the pattern\r\n      const hasInvalidStatistics = item.statistics.some(s => {\r\n        if (s.indexOf('p') === 0) {\r\n          const matches = /^p\\d{2}(?:\\.\\d{1,2})?$/.exec(s);\r\n          return !matches || matches[0] !== s;\r\n        }\r\n\r\n        return false;\r\n      });\r\n\r\n      if (hasInvalidStatistics) {\r\n        throw { message: 'Invalid extended statistics' };\r\n      }\r\n\r\n      return _.extend(\r\n        {\r\n          refId: item.refId,\r\n          intervalMs: options.intervalMs,\r\n          maxDataPoints: options.maxDataPoints,\r\n          datasourceId: this.instanceSettings.id,\r\n          type: 'timeSeriesQuery',\r\n        },\r\n        item\r\n      );\r\n    });\r\n\r\n    // No valid targets, return the empty result to save a round trip.\r\n    if (_.isEmpty(queries)) {\r\n      const d = this.$q.defer();\r\n      d.resolve({ data: [] });\r\n      return d.promise;\r\n    }\r\n\r\n    const request = {\r\n      from: options.range.from.valueOf().toString(),\r\n      to: options.range.to.valueOf().toString(),\r\n      queries: queries,\r\n    };\r\n\r\n    return this.performTimeSeriesQuery(request);\r\n  }\r\n\r\n  getPeriod(target, options, now?) {\r\n    const start = this.convertToCloudWatchTime(options.range.from, false);\r\n    const end = this.convertToCloudWatchTime(options.range.to, true);\r\n    now = Math.round((now || Date.now()) / 1000);\r\n\r\n    let period;\r\n    const range = end - start;\r\n\r\n    const hourSec = 60 * 60;\r\n    const daySec = hourSec * 24;\r\n    let periodUnit = 60;\r\n    if (!target.period) {\r\n      if (now - start <= daySec * 15) {\r\n        // until 15 days ago\r\n        if (target.namespace === 'AWS/EC2') {\r\n          periodUnit = period = 300;\r\n        } else {\r\n          periodUnit = period = 60;\r\n        }\r\n      } else if (now - start <= daySec * 63) {\r\n        // until 63 days ago\r\n        periodUnit = period = 60 * 5;\r\n      } else if (now - start <= daySec * 455) {\r\n        // until 455 days ago\r\n        periodUnit = period = 60 * 60;\r\n      } else {\r\n        // over 455 days, should return error, but try to long period\r\n        periodUnit = period = 60 * 60;\r\n      }\r\n    } else {\r\n      if (/^\\d+$/.test(target.period)) {\r\n        period = parseInt(target.period, 10);\r\n      } else {\r\n        period = kbn.interval_to_seconds(this.templateSrv.replace(target.period, options.scopedVars));\r\n      }\r\n    }\r\n    if (period < 1) {\r\n      period = 1;\r\n    }\r\n    if (!target.highResolution && range / period >= 1440) {\r\n      period = Math.ceil(range / 1440 / periodUnit) * periodUnit;\r\n    }\r\n\r\n    return period;\r\n  }\r\n\r\n  performTimeSeriesQuery(request) {\r\n    return this.awsRequest('/api/tsdb/query', request).then(res => {\r\n      const data = [];\r\n\r\n      if (res.results) {\r\n        _.forEach(res.results, queryRes => {\r\n          _.forEach(queryRes.series, series => {\r\n            const s = { target: series.name, datapoints: series.points } as any;\r\n            if (queryRes.meta.unit) {\r\n              s.unit = queryRes.meta.unit;\r\n            }\r\n            data.push(s);\r\n          });\r\n        });\r\n      }\r\n\r\n      return { data: data };\r\n    });\r\n  }\r\n\r\n  transformSuggestDataFromTable(suggestData) {\r\n    return _.map(suggestData.results['metricFindQuery'].tables[0].rows, v => {\r\n      return {\r\n        text: v[0],\r\n        value: v[1],\r\n      };\r\n    });\r\n  }\r\n\r\n  doMetricQueryRequest(subtype, parameters) {\r\n    const range = this.timeSrv.timeRange();\r\n    return this.awsRequest('/api/tsdb/query', {\r\n      from: range.from.valueOf().toString(),\r\n      to: range.to.valueOf().toString(),\r\n      queries: [\r\n        _.extend(\r\n          {\r\n            refId: 'metricFindQuery',\r\n            intervalMs: 1, // dummy\r\n            maxDataPoints: 1, // dummy\r\n            datasourceId: this.instanceSettings.id,\r\n            type: 'metricFindQuery',\r\n            subtype: subtype,\r\n          },\r\n          parameters\r\n        ),\r\n      ],\r\n    }).then(r => {\r\n      return this.transformSuggestDataFromTable(r);\r\n    });\r\n  }\r\n\r\n  getRegions() {\r\n    return this.doMetricQueryRequest('regions', null);\r\n  }\r\n\r\n  getNamespaces() {\r\n    return this.doMetricQueryRequest('namespaces', null);\r\n  }\r\n\r\n  getMetrics(namespace, region) {\r\n    return this.doMetricQueryRequest('metrics', {\r\n      region: this.templateSrv.replace(this.getActualRegion(region)),\r\n      namespace: this.templateSrv.replace(namespace),\r\n    });\r\n  }\r\n\r\n  getDimensionKeys(namespace, region) {\r\n    return this.doMetricQueryRequest('dimension_keys', {\r\n      region: this.templateSrv.replace(this.getActualRegion(region)),\r\n      namespace: this.templateSrv.replace(namespace),\r\n    });\r\n  }\r\n\r\n  getDimensionValues(region, namespace, metricName, dimensionKey, filterDimensions) {\r\n    return this.doMetricQueryRequest('dimension_values', {\r\n      region: this.templateSrv.replace(this.getActualRegion(region)),\r\n      namespace: this.templateSrv.replace(namespace),\r\n      metricName: this.templateSrv.replace(metricName),\r\n      dimensionKey: this.templateSrv.replace(dimensionKey),\r\n      dimensions: this.convertDimensionFormat(filterDimensions, {}),\r\n    });\r\n  }\r\n\r\n  getEbsVolumeIds(region, instanceId) {\r\n    return this.doMetricQueryRequest('ebs_volume_ids', {\r\n      region: this.templateSrv.replace(this.getActualRegion(region)),\r\n      instanceId: this.templateSrv.replace(instanceId),\r\n    });\r\n  }\r\n\r\n  getEc2InstanceAttribute(region, attributeName, filters) {\r\n    return this.doMetricQueryRequest('ec2_instance_attribute', {\r\n      region: this.templateSrv.replace(this.getActualRegion(region)),\r\n      attributeName: this.templateSrv.replace(attributeName),\r\n      filters: filters,\r\n    });\r\n  }\r\n\r\n  metricFindQuery(query) {\r\n    let region;\r\n    let namespace;\r\n    let metricName;\r\n    let filterJson;\r\n\r\n    const regionQuery = query.match(/^regions\\(\\)/);\r\n    if (regionQuery) {\r\n      return this.getRegions();\r\n    }\r\n\r\n    const namespaceQuery = query.match(/^namespaces\\(\\)/);\r\n    if (namespaceQuery) {\r\n      return this.getNamespaces();\r\n    }\r\n\r\n    const metricNameQuery = query.match(/^metrics\\(([^\\)]+?)(,\\s?([^,]+?))?\\)/);\r\n    if (metricNameQuery) {\r\n      namespace = metricNameQuery[1];\r\n      region = metricNameQuery[3];\r\n      return this.getMetrics(namespace, region);\r\n    }\r\n\r\n    const dimensionKeysQuery = query.match(/^dimension_keys\\(([^\\)]+?)(,\\s?([^,]+?))?\\)/);\r\n    if (dimensionKeysQuery) {\r\n      namespace = dimensionKeysQuery[1];\r\n      region = dimensionKeysQuery[3];\r\n      return this.getDimensionKeys(namespace, region);\r\n    }\r\n\r\n    const dimensionValuesQuery = query.match(\r\n      /^dimension_values\\(([^,]+?),\\s?([^,]+?),\\s?([^,]+?),\\s?([^,]+?)(,\\s?(.+))?\\)/\r\n    );\r\n    if (dimensionValuesQuery) {\r\n      region = dimensionValuesQuery[1];\r\n      namespace = dimensionValuesQuery[2];\r\n      metricName = dimensionValuesQuery[3];\r\n      const dimensionKey = dimensionValuesQuery[4];\r\n      filterJson = {};\r\n      if (dimensionValuesQuery[6]) {\r\n        filterJson = JSON.parse(this.templateSrv.replace(dimensionValuesQuery[6]));\r\n      }\r\n\r\n      return this.getDimensionValues(region, namespace, metricName, dimensionKey, filterJson);\r\n    }\r\n\r\n    const ebsVolumeIdsQuery = query.match(/^ebs_volume_ids\\(([^,]+?),\\s?([^,]+?)\\)/);\r\n    if (ebsVolumeIdsQuery) {\r\n      region = ebsVolumeIdsQuery[1];\r\n      const instanceId = ebsVolumeIdsQuery[2];\r\n      return this.getEbsVolumeIds(region, instanceId);\r\n    }\r\n\r\n    const ec2InstanceAttributeQuery = query.match(/^ec2_instance_attribute\\(([^,]+?),\\s?([^,]+?),\\s?(.+?)\\)/);\r\n    if (ec2InstanceAttributeQuery) {\r\n      region = ec2InstanceAttributeQuery[1];\r\n      const targetAttributeName = ec2InstanceAttributeQuery[2];\r\n      filterJson = JSON.parse(this.templateSrv.replace(ec2InstanceAttributeQuery[3]));\r\n      return this.getEc2InstanceAttribute(region, targetAttributeName, filterJson);\r\n    }\r\n\r\n    return this.$q.when([]);\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    const annotation = options.annotation;\r\n    const statistics = _.map(annotation.statistics, s => {\r\n      return this.templateSrv.replace(s);\r\n    });\r\n    const defaultPeriod = annotation.prefixMatching ? '' : '300';\r\n    let period = annotation.period || defaultPeriod;\r\n    period = parseInt(period, 10);\r\n    const parameters = {\r\n      prefixMatching: annotation.prefixMatching,\r\n      region: this.templateSrv.replace(this.getActualRegion(annotation.region)),\r\n      namespace: this.templateSrv.replace(annotation.namespace),\r\n      metricName: this.templateSrv.replace(annotation.metricName),\r\n      dimensions: this.convertDimensionFormat(annotation.dimensions, {}),\r\n      statistics: statistics,\r\n      period: period,\r\n      actionPrefix: annotation.actionPrefix || '',\r\n      alarmNamePrefix: annotation.alarmNamePrefix || '',\r\n    };\r\n\r\n    return this.awsRequest('/api/tsdb/query', {\r\n      from: options.range.from.valueOf().toString(),\r\n      to: options.range.to.valueOf().toString(),\r\n      queries: [\r\n        _.extend(\r\n          {\r\n            refId: 'annotationQuery',\r\n            intervalMs: 1, // dummy\r\n            maxDataPoints: 1, // dummy\r\n            datasourceId: this.instanceSettings.id,\r\n            type: 'annotationQuery',\r\n          },\r\n          parameters\r\n        ),\r\n      ],\r\n    }).then(r => {\r\n      return _.map(r.results['annotationQuery'].tables[0].rows, v => {\r\n        return {\r\n          annotation: annotation,\r\n          time: Date.parse(v[0]),\r\n          title: v[1],\r\n          tags: [v[2]],\r\n          text: v[3],\r\n        };\r\n      });\r\n    });\r\n  }\r\n\r\n  targetContainsTemplate(target) {\r\n    return (\r\n      this.templateSrv.variableExists(target.region) ||\r\n      this.templateSrv.variableExists(target.namespace) ||\r\n      this.templateSrv.variableExists(target.metricName) ||\r\n      _.find(target.dimensions, (v, k) => {\r\n        return this.templateSrv.variableExists(k) || this.templateSrv.variableExists(v);\r\n      })\r\n    );\r\n  }\r\n\r\n  testDatasource() {\r\n    /* use billing metrics for test */\r\n    const region = this.defaultRegion;\r\n    const namespace = 'AWS/Billing';\r\n    const metricName = 'EstimatedCharges';\r\n    const dimensions = {};\r\n\r\n    return this.getDimensionValues(region, namespace, metricName, 'ServiceName', dimensions).then(\r\n      () => {\r\n        return { status: 'success', message: 'Data source is working' };\r\n      },\r\n      err => {\r\n        return { status: 'error', message: err.message };\r\n      }\r\n    );\r\n  }\r\n\r\n  awsRequest(url, data) {\r\n    const options = {\r\n      method: 'POST',\r\n      url: url,\r\n      data: data,\r\n    };\r\n\r\n    return this.backendSrv.datasourceRequest(options).then(result => {\r\n      return result.data;\r\n    });\r\n  }\r\n\r\n  getDefaultRegion() {\r\n    return this.defaultRegion;\r\n  }\r\n\r\n  getActualRegion(region) {\r\n    if (region === 'default' || _.isEmpty(region)) {\r\n      return this.getDefaultRegion();\r\n    }\r\n    return region;\r\n  }\r\n\r\n  getExpandedVariables(target, dimensionKey, variable, templateSrv) {\r\n    /* if the all checkbox is marked we should add all values to the targets */\r\n    const allSelected = _.find(variable.options, { selected: true, text: 'All' });\r\n    const selectedVariables = _.filter(variable.options, v => {\r\n      if (allSelected) {\r\n        return v.text !== 'All';\r\n      } else {\r\n        return v.selected;\r\n      }\r\n    });\r\n    const currentVariables = !_.isArray(variable.current.value)\r\n      ? [variable.current]\r\n      : variable.current.value.map(v => {\r\n          return {\r\n            text: v,\r\n            value: v,\r\n          };\r\n        });\r\n    const useSelectedVariables =\r\n      selectedVariables.some(s => {\r\n        return s.value === currentVariables[0].value;\r\n      }) || currentVariables[0].value === '$__all';\r\n    return (useSelectedVariables ? selectedVariables : currentVariables).map(v => {\r\n      const t = angular.copy(target);\r\n      const scopedVar = {};\r\n      scopedVar[variable.name] = v;\r\n      t.refId = target.refId + '_' + v.value;\r\n      t.dimensions[dimensionKey] = templateSrv.replace(t.dimensions[dimensionKey], scopedVar);\r\n      if (variable.multi && target.id) {\r\n        t.id = target.id + window.btoa(v.value).replace(/=/g, '0'); // generate unique id\r\n      } else {\r\n        t.id = target.id;\r\n      }\r\n      return t;\r\n    });\r\n  }\r\n\r\n  expandTemplateVariable(targets, scopedVars, templateSrv) {\r\n    // Datasource and template srv logic uber-complected. This should be cleaned up.\r\n    return _.chain(targets)\r\n      .map(target => {\r\n        const dimensionKey = _.findKey(target.dimensions, v => {\r\n          return templateSrv.variableExists(v) && !_.has(scopedVars, templateSrv.getVariableName(v));\r\n        });\r\n\r\n        if (dimensionKey) {\r\n          const multiVariable = _.find(templateSrv.variables, variable => {\r\n            return (\r\n              templatingVariable.containsVariable(target.dimensions[dimensionKey], variable.name) && variable.multi\r\n            );\r\n          });\r\n          const variable = _.find(templateSrv.variables, variable => {\r\n            return templatingVariable.containsVariable(target.dimensions[dimensionKey], variable.name);\r\n          });\r\n          return this.getExpandedVariables(target, dimensionKey, multiVariable || variable, templateSrv);\r\n        } else {\r\n          return [target];\r\n        }\r\n      })\r\n      .flatten()\r\n      .value();\r\n  }\r\n\r\n  convertToCloudWatchTime(date, roundUp) {\r\n    if (_.isString(date)) {\r\n      date = dateMath.parse(date, roundUp);\r\n    }\r\n    return Math.round(date.valueOf() / 1000);\r\n  }\r\n\r\n  convertDimensionFormat(dimensions, scopedVars) {\r\n    const convertedDimensions = {};\r\n    _.each(dimensions, (value, key) => {\r\n      convertedDimensions[this.templateSrv.replace(key, scopedVars)] = this.templateSrv.replace(value, scopedVars);\r\n    });\r\n    return convertedDimensions;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nexport class CloudWatchConfigCtrl {\r\n  static templateUrl = 'partials/config.html';\r\n  current: any;\r\n  datasourceSrv: any;\r\n\r\n  accessKeyExist = false;\r\n  secretKeyExist = false;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, datasourceSrv) {\r\n    this.current.jsonData.timeField = this.current.jsonData.timeField || '@timestamp';\r\n    this.current.jsonData.authType = this.current.jsonData.authType || 'credentials';\r\n\r\n    this.accessKeyExist = this.current.secureJsonFields.accessKey;\r\n    this.secretKeyExist = this.current.secureJsonFields.secretKey;\r\n    this.datasourceSrv = datasourceSrv;\r\n    this.getRegions();\r\n  }\r\n\r\n  resetAccessKey() {\r\n    this.accessKeyExist = false;\r\n  }\r\n\r\n  resetSecretKey() {\r\n    this.secretKeyExist = false;\r\n  }\r\n\r\n  authTypes = [\r\n    { name: 'Access & secret key', value: 'keys' },\r\n    { name: 'Credentials file', value: 'credentials' },\r\n    { name: 'ARN', value: 'arn' },\r\n  ];\r\n\r\n  indexPatternTypes = [\r\n    { name: 'No pattern', value: undefined },\r\n    { name: 'Hourly', value: 'Hourly', example: '[logstash-]YYYY.MM.DD.HH' },\r\n    { name: 'Daily', value: 'Daily', example: '[logstash-]YYYY.MM.DD' },\r\n    { name: 'Weekly', value: 'Weekly', example: '[logstash-]GGGG.WW' },\r\n    { name: 'Monthly', value: 'Monthly', example: '[logstash-]YYYY.MM' },\r\n    { name: 'Yearly', value: 'Yearly', example: '[logstash-]YYYY' },\r\n  ];\r\n\r\n  regions = [\r\n    'ap-northeast-1',\r\n    'ap-northeast-2',\r\n    'ap-northeast-3',\r\n    'ap-south-1',\r\n    'ap-southeast-1',\r\n    'ap-southeast-2',\r\n    'ca-central-1',\r\n    'cn-north-1',\r\n    'cn-northwest-1',\r\n    'eu-central-1',\r\n    'eu-north-1',\r\n    'eu-west-1',\r\n    'eu-west-2',\r\n    'eu-west-3',\r\n    'me-south-1',\r\n    'sa-east-1',\r\n    'us-east-1',\r\n    'us-east-2',\r\n    'us-gov-east-1',\r\n    'us-gov-west-1',\r\n    'us-iso-east-1',\r\n    'us-isob-east-1',\r\n    'us-west-1',\r\n    'us-west-2',\r\n  ];\r\n\r\n  getRegions() {\r\n    this.datasourceSrv\r\n      .loadDatasource(this.current.name)\r\n      .then(ds => {\r\n        return ds.getRegions();\r\n      })\r\n      .then(\r\n        regions => {\r\n          this.regions = _.map(regions, 'value');\r\n        },\r\n        err => {\r\n          console.error('failed to get latest regions');\r\n        }\r\n      );\r\n  }\r\n}\r\n","import './query_parameter_ctrl';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\n\r\nexport class CloudWatchQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n\r\n  aliasSyntax: string;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector) {\r\n    super($scope, $injector);\r\n    this.aliasSyntax = '{{metric}} {{stat}} {{namespace}} {{region}} {{<dimension name>}}';\r\n  }\r\n}\r\n","import './query_parameter_ctrl';\r\n\r\nimport CloudWatchDatasource from './datasource';\r\nimport { CloudWatchQueryCtrl } from './query_ctrl';\r\nimport { CloudWatchConfigCtrl } from './config_ctrl';\r\n\r\nclass CloudWatchAnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n}\r\n\r\nexport {\r\n  CloudWatchDatasource as Datasource,\r\n  CloudWatchQueryCtrl as QueryCtrl,\r\n  CloudWatchConfigCtrl as ConfigCtrl,\r\n  CloudWatchAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","import _ from 'lodash';\r\n\r\nexport const metricAggTypes = [\r\n  { text: 'Count', value: 'count', requiresField: false },\r\n  {\r\n    text: 'Average',\r\n    value: 'avg',\r\n    requiresField: true,\r\n    supportsInlineScript: true,\r\n    supportsMissing: true,\r\n  },\r\n  {\r\n    text: 'Sum',\r\n    value: 'sum',\r\n    requiresField: true,\r\n    supportsInlineScript: true,\r\n    supportsMissing: true,\r\n  },\r\n  {\r\n    text: 'Max',\r\n    value: 'max',\r\n    requiresField: true,\r\n    supportsInlineScript: true,\r\n    supportsMissing: true,\r\n  },\r\n  {\r\n    text: 'Min',\r\n    value: 'min',\r\n    requiresField: true,\r\n    supportsInlineScript: true,\r\n    supportsMissing: true,\r\n  },\r\n  {\r\n    text: 'Extended Stats',\r\n    value: 'extended_stats',\r\n    requiresField: true,\r\n    supportsMissing: true,\r\n    supportsInlineScript: true,\r\n  },\r\n  {\r\n    text: 'Percentiles',\r\n    value: 'percentiles',\r\n    requiresField: true,\r\n    supportsMissing: true,\r\n    supportsInlineScript: true,\r\n  },\r\n  {\r\n    text: 'Unique Count',\r\n    value: 'cardinality',\r\n    requiresField: true,\r\n    supportsMissing: true,\r\n  },\r\n  {\r\n    text: 'Moving Average',\r\n    value: 'moving_avg',\r\n    requiresField: false,\r\n    isPipelineAgg: true,\r\n    minVersion: 2,\r\n  },\r\n  {\r\n    text: 'Derivative',\r\n    value: 'derivative',\r\n    requiresField: false,\r\n    isPipelineAgg: true,\r\n    minVersion: 2,\r\n  },\r\n  { text: 'Raw Document', value: 'raw_document', requiresField: false },\r\n];\r\n\r\nexport const bucketAggTypes = [\r\n  { text: 'Terms', value: 'terms', requiresField: true },\r\n  { text: 'Filters', value: 'filters' },\r\n  { text: 'Geo Hash Grid', value: 'geohash_grid', requiresField: true },\r\n  { text: 'Date Histogram', value: 'date_histogram', requiresField: true },\r\n  { text: 'Histogram', value: 'histogram', requiresField: true },\r\n];\r\n\r\nexport const orderByOptions = [{ text: 'Doc Count', value: '_count' }, { text: 'Term value', value: '_term' }];\r\n\r\nexport const orderOptions = [{ text: 'Top', value: 'desc' }, { text: 'Bottom', value: 'asc' }];\r\n\r\nexport const sizeOptions = [\r\n  { text: 'No limit', value: '0' },\r\n  { text: '1', value: '1' },\r\n  { text: '2', value: '2' },\r\n  { text: '3', value: '3' },\r\n  { text: '5', value: '5' },\r\n  { text: '10', value: '10' },\r\n  { text: '15', value: '15' },\r\n  { text: '20', value: '20' },\r\n];\r\n\r\nexport const extendedStats = [\r\n  { text: 'Avg', value: 'avg' },\r\n  { text: 'Min', value: 'min' },\r\n  { text: 'Max', value: 'max' },\r\n  { text: 'Sum', value: 'sum' },\r\n  { text: 'Count', value: 'count' },\r\n  { text: 'Std Dev', value: 'std_deviation' },\r\n  { text: 'Std Dev Upper', value: 'std_deviation_bounds_upper' },\r\n  { text: 'Std Dev Lower', value: 'std_deviation_bounds_lower' },\r\n];\r\n\r\nexport const intervalOptions = [\r\n  { text: 'auto', value: 'auto' },\r\n  { text: '10s', value: '10s' },\r\n  { text: '1m', value: '1m' },\r\n  { text: '5m', value: '5m' },\r\n  { text: '10m', value: '10m' },\r\n  { text: '20m', value: '20m' },\r\n  { text: '1h', value: '1h' },\r\n  { text: '1d', value: '1d' },\r\n];\r\n\r\nexport const movingAvgModelOptions = [\r\n  { text: 'Simple', value: 'simple' },\r\n  { text: 'Linear', value: 'linear' },\r\n  { text: 'Exponentially Weighted', value: 'ewma' },\r\n  { text: 'Holt Linear', value: 'holt' },\r\n  { text: 'Holt Winters', value: 'holt_winters' },\r\n];\r\n\r\nexport const pipelineOptions = {\r\n  moving_avg: [\r\n    { text: 'window', default: 5 },\r\n    { text: 'model', default: 'simple' },\r\n    { text: 'predict', default: undefined },\r\n    { text: 'minimize', default: false },\r\n  ],\r\n  derivative: [{ text: 'unit', default: undefined }],\r\n};\r\n\r\nexport const movingAvgModelSettings = {\r\n  simple: [],\r\n  linear: [],\r\n  ewma: [{ text: 'Alpha', value: 'alpha', default: undefined }],\r\n  holt: [{ text: 'Alpha', value: 'alpha', default: undefined }, { text: 'Beta', value: 'beta', default: undefined }],\r\n  holt_winters: [\r\n    { text: 'Alpha', value: 'alpha', default: undefined },\r\n    { text: 'Beta', value: 'beta', default: undefined },\r\n    { text: 'Gamma', value: 'gamma', default: undefined },\r\n    { text: 'Period', value: 'period', default: undefined },\r\n    { text: 'Pad', value: 'pad', default: undefined, isCheckbox: true },\r\n  ],\r\n};\r\n\r\nexport function getMetricAggTypes(esVersion) {\r\n  return _.filter(metricAggTypes, f => {\r\n    if (f.minVersion) {\r\n      return f.minVersion <= esVersion;\r\n    } else {\r\n      return true;\r\n    }\r\n  });\r\n}\r\n\r\nexport function getPipelineOptions(metric) {\r\n  if (!isPipelineAgg(metric.type)) {\r\n    return [];\r\n  }\r\n\r\n  return pipelineOptions[metric.type];\r\n}\r\n\r\nexport function isPipelineAgg(metricType) {\r\n  if (metricType) {\r\n    const po = pipelineOptions[metricType];\r\n    return po !== null && po !== undefined;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function getPipelineAggOptions(targets) {\r\n  const result = [];\r\n  _.each(targets.metrics, metric => {\r\n    if (!isPipelineAgg(metric.type)) {\r\n      result.push({ text: describeMetric(metric), value: metric.id });\r\n    }\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\nexport function getMovingAvgSettings(model, filtered) {\r\n  const filteredResult = [];\r\n  if (filtered) {\r\n    _.each(movingAvgModelSettings[model], setting => {\r\n      if (!setting.isCheckbox) {\r\n        filteredResult.push(setting);\r\n      }\r\n    });\r\n    return filteredResult;\r\n  }\r\n  return movingAvgModelSettings[model];\r\n}\r\n\r\nexport function getOrderByOptions(target) {\r\n  const metricRefs = [];\r\n  _.each(target.metrics, metric => {\r\n    if (metric.type !== 'count') {\r\n      metricRefs.push({ text: describeMetric(metric), value: metric.id });\r\n    }\r\n  });\r\n\r\n  return orderByOptions.concat(metricRefs);\r\n}\r\n\r\nexport function describeOrder(order) {\r\n  const def = _.find(orderOptions, { value: order });\r\n  return def.text;\r\n}\r\n\r\nexport function describeMetric(metric) {\r\n  const def = _.find(metricAggTypes, { value: metric.type });\r\n  return def.text + ' ' + metric.field;\r\n}\r\n\r\nexport function describeOrderBy(orderBy, target) {\r\n  const def = _.find(orderByOptions, { value: orderBy });\r\n  if (def) {\r\n    return def.text;\r\n  }\r\n  const metric = _.find(target.metrics, { id: orderBy });\r\n  if (metric) {\r\n    return describeMetric(metric);\r\n  } else {\r\n    return 'metric not found';\r\n  }\r\n}\r\n","import * as queryDef from './query_def';\r\n\r\nexport class ElasticQueryBuilder {\r\n  timeField: string;\r\n  esVersion: number;\r\n\r\n  constructor(options) {\r\n    this.timeField = options.timeField;\r\n    this.esVersion = options.esVersion;\r\n  }\r\n\r\n  getRangeFilter() {\r\n    const filter = {};\r\n    filter[this.timeField] = {\r\n      gte: '$timeFrom',\r\n      lte: '$timeTo',\r\n      format: 'epoch_millis',\r\n    };\r\n\r\n    return filter;\r\n  }\r\n\r\n  buildTermsAgg(aggDef, queryNode, target) {\r\n    let metricRef, metric, y;\r\n    queryNode.terms = { field: aggDef.field };\r\n\r\n    if (!aggDef.settings) {\r\n      return queryNode;\r\n    }\r\n\r\n    queryNode.terms.size = parseInt(aggDef.settings.size, 10) === 0 ? 500 : parseInt(aggDef.settings.size, 10);\r\n    if (aggDef.settings.orderBy !== void 0) {\r\n      queryNode.terms.order = {};\r\n      queryNode.terms.order[aggDef.settings.orderBy] = aggDef.settings.order;\r\n\r\n      // if metric ref, look it up and add it to this agg level\r\n      metricRef = parseInt(aggDef.settings.orderBy, 10);\r\n      if (!isNaN(metricRef)) {\r\n        for (y = 0; y < target.metrics.length; y++) {\r\n          metric = target.metrics[y];\r\n          if (metric.id === aggDef.settings.orderBy) {\r\n            queryNode.aggs = {};\r\n            queryNode.aggs[metric.id] = {};\r\n            queryNode.aggs[metric.id][metric.type] = { field: metric.field };\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (aggDef.settings.min_doc_count !== void 0) {\r\n      queryNode.terms.min_doc_count = parseInt(aggDef.settings.min_doc_count, 10);\r\n    }\r\n\r\n    if (aggDef.settings.missing) {\r\n      queryNode.terms.missing = aggDef.settings.missing;\r\n    }\r\n\r\n    return queryNode;\r\n  }\r\n\r\n  getDateHistogramAgg(aggDef) {\r\n    const esAgg: any = {};\r\n    const settings = aggDef.settings || {};\r\n    esAgg.interval = settings.interval;\r\n    esAgg.field = this.timeField;\r\n    esAgg.min_doc_count = settings.min_doc_count || 0;\r\n    esAgg.extended_bounds = { min: '$timeFrom', max: '$timeTo' };\r\n    esAgg.format = 'epoch_millis';\r\n\r\n    if (esAgg.interval === 'auto') {\r\n      esAgg.interval = '$__interval';\r\n    }\r\n\r\n    if (settings.missing) {\r\n      esAgg.missing = settings.missing;\r\n    }\r\n\r\n    return esAgg;\r\n  }\r\n\r\n  getHistogramAgg(aggDef) {\r\n    const esAgg: any = {};\r\n    const settings = aggDef.settings || {};\r\n    esAgg.interval = settings.interval;\r\n    esAgg.field = aggDef.field;\r\n    esAgg.min_doc_count = settings.min_doc_count || 0;\r\n\r\n    if (settings.missing) {\r\n      esAgg.missing = settings.missing;\r\n    }\r\n    return esAgg;\r\n  }\r\n\r\n  getFiltersAgg(aggDef) {\r\n    const filterObj = {};\r\n    for (let i = 0; i < aggDef.settings.filters.length; i++) {\r\n      const query = aggDef.settings.filters[i].query;\r\n      let label = aggDef.settings.filters[i].label;\r\n      label = label === '' || label === undefined ? query : label;\r\n      filterObj[label] = {\r\n        query_string: {\r\n          query: query,\r\n          analyze_wildcard: true,\r\n        },\r\n      };\r\n    }\r\n\r\n    return filterObj;\r\n  }\r\n\r\n  documentQuery(query, size) {\r\n    query.size = size;\r\n    query.sort = {};\r\n    query.sort[this.timeField] = { order: 'desc', unmapped_type: 'boolean' };\r\n\r\n    // fields field not supported on ES 5.x\r\n    if (this.esVersion < 5) {\r\n      query.fields = ['*', '_source'];\r\n    }\r\n\r\n    query.script_fields = {};\r\n    if (this.esVersion < 5) {\r\n      query.fielddata_fields = [this.timeField];\r\n    } else {\r\n      query.docvalue_fields = [this.timeField];\r\n    }\r\n    return query;\r\n  }\r\n\r\n  addAdhocFilters(query, adhocFilters) {\r\n    if (!adhocFilters) {\r\n      return;\r\n    }\r\n\r\n    let i, filter, condition, queryCondition;\r\n\r\n    for (i = 0; i < adhocFilters.length; i++) {\r\n      filter = adhocFilters[i];\r\n      condition = {};\r\n      condition[filter.key] = filter.value;\r\n      queryCondition = {};\r\n      queryCondition[filter.key] = { query: filter.value };\r\n\r\n      switch (filter.operator) {\r\n        case '=':\r\n          if (!query.query.bool.must) {\r\n            query.query.bool.must = [];\r\n          }\r\n          query.query.bool.must.push({ match_phrase: queryCondition });\r\n          break;\r\n        case '!=':\r\n          if (!query.query.bool.must_not) {\r\n            query.query.bool.must_not = [];\r\n          }\r\n          query.query.bool.must_not.push({ match_phrase: queryCondition });\r\n          break;\r\n        case '<':\r\n          condition[filter.key] = { lt: filter.value };\r\n          query.query.bool.filter.push({ range: condition });\r\n          break;\r\n        case '>':\r\n          condition[filter.key] = { gt: filter.value };\r\n          query.query.bool.filter.push({ range: condition });\r\n          break;\r\n        case '=~':\r\n          query.query.bool.filter.push({ regexp: condition });\r\n          break;\r\n        case '!~':\r\n          query.query.bool.filter.push({\r\n            bool: { must_not: { regexp: condition } },\r\n          });\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  build(target, adhocFilters?, queryString?) {\r\n    // make sure query has defaults;\r\n    target.metrics = target.metrics || [{ type: 'count', id: '1' }];\r\n    target.bucketAggs = target.bucketAggs || [{ type: 'date_histogram', id: '2', settings: { interval: 'auto' } }];\r\n    target.timeField = this.timeField;\r\n\r\n    let i, nestedAggs, metric;\r\n    const query = {\r\n      size: 0,\r\n      query: {\r\n        bool: {\r\n          filter: [\r\n            { range: this.getRangeFilter() },\r\n            {\r\n              query_string: {\r\n                analyze_wildcard: true,\r\n                query: queryString,\r\n              },\r\n            },\r\n          ],\r\n        },\r\n      },\r\n    };\r\n\r\n    this.addAdhocFilters(query, adhocFilters);\r\n\r\n    // handle document query\r\n    if (target.bucketAggs.length === 0) {\r\n      metric = target.metrics[0];\r\n      if (!metric || metric.type !== 'raw_document') {\r\n        throw { message: 'Invalid query' };\r\n      }\r\n\r\n      const size = (metric.settings && metric.settings.size) || 500;\r\n      return this.documentQuery(query, size);\r\n    }\r\n\r\n    nestedAggs = query;\r\n\r\n    for (i = 0; i < target.bucketAggs.length; i++) {\r\n      const aggDef = target.bucketAggs[i];\r\n      const esAgg = {};\r\n\r\n      switch (aggDef.type) {\r\n        case 'date_histogram': {\r\n          esAgg['date_histogram'] = this.getDateHistogramAgg(aggDef);\r\n          break;\r\n        }\r\n        case 'histogram': {\r\n          esAgg['histogram'] = this.getHistogramAgg(aggDef);\r\n          break;\r\n        }\r\n        case 'filters': {\r\n          esAgg['filters'] = { filters: this.getFiltersAgg(aggDef) };\r\n          break;\r\n        }\r\n        case 'terms': {\r\n          this.buildTermsAgg(aggDef, esAgg, target);\r\n          break;\r\n        }\r\n        case 'geohash_grid': {\r\n          esAgg['geohash_grid'] = {\r\n            field: aggDef.field,\r\n            precision: aggDef.settings.precision,\r\n          };\r\n          break;\r\n        }\r\n      }\r\n\r\n      nestedAggs.aggs = nestedAggs.aggs || {};\r\n      nestedAggs.aggs[aggDef.id] = esAgg;\r\n      nestedAggs = esAgg;\r\n    }\r\n\r\n    nestedAggs.aggs = {};\r\n\r\n    for (i = 0; i < target.metrics.length; i++) {\r\n      metric = target.metrics[i];\r\n      if (metric.type === 'count') {\r\n        continue;\r\n      }\r\n\r\n      const aggField = {};\r\n      let metricAgg = null;\r\n\r\n      if (queryDef.isPipelineAgg(metric.type)) {\r\n        if (metric.pipelineAgg && /^\\d*$/.test(metric.pipelineAgg)) {\r\n          metricAgg = { buckets_path: metric.pipelineAgg };\r\n        } else {\r\n          continue;\r\n        }\r\n      } else {\r\n        metricAgg = { field: metric.field };\r\n      }\r\n\r\n      for (const prop in metric.settings) {\r\n        if (metric.settings.hasOwnProperty(prop) && metric.settings[prop] !== null) {\r\n          metricAgg[prop] = metric.settings[prop];\r\n        }\r\n      }\r\n\r\n      aggField[metric.type] = metricAgg;\r\n      nestedAggs.aggs[metric.id] = aggField;\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  getTermsQuery(queryDef) {\r\n    const query: any = {\r\n      size: 0,\r\n      query: {\r\n        bool: {\r\n          filter: [{ range: this.getRangeFilter() }],\r\n        },\r\n      },\r\n    };\r\n\r\n    if (queryDef.query) {\r\n      query.query.bool.filter.push({\r\n        query_string: {\r\n          analyze_wildcard: true,\r\n          query: queryDef.query,\r\n        },\r\n      });\r\n    }\r\n\r\n    let size = 500;\r\n    if (queryDef.size) {\r\n      size = queryDef.size;\r\n    }\r\n\r\n    query.aggs = {\r\n      '1': {\r\n        terms: {\r\n          field: queryDef.field,\r\n          size: size,\r\n          order: {\r\n            _term: 'asc',\r\n          },\r\n        },\r\n      },\r\n    };\r\n    return query;\r\n  }\r\n}\r\n","import moment from 'moment';\r\n\r\nconst intervalMap = {\r\n  Hourly: { startOf: 'hour', amount: 'hours' },\r\n  Daily: { startOf: 'day', amount: 'days' },\r\n  Weekly: { startOf: 'isoWeek', amount: 'weeks' },\r\n  Monthly: { startOf: 'month', amount: 'months' },\r\n  Yearly: { startOf: 'year', amount: 'years' },\r\n};\r\n\r\nexport class IndexPattern {\r\n  constructor(private pattern, private interval: string | null) {}\r\n\r\n  getIndexForToday() {\r\n    if (this.interval) {\r\n      return moment.utc().format(this.pattern);\r\n    } else {\r\n      return this.pattern;\r\n    }\r\n  }\r\n\r\n  getIndexList(from, to) {\r\n    if (!this.interval) {\r\n      return this.pattern;\r\n    }\r\n\r\n    const intervalInfo = intervalMap[this.interval];\r\n    const start = moment(from)\r\n      .utc()\r\n      .startOf(intervalInfo.startOf);\r\n    const endEpoch = moment(to)\r\n      .utc()\r\n      .startOf(intervalInfo.startOf)\r\n      .valueOf();\r\n    const indexList = [];\r\n\r\n    while (start.valueOf() <= endEpoch) {\r\n      indexList.push(start.format(this.pattern));\r\n      start.add(1, intervalInfo.amount);\r\n    }\r\n\r\n    return indexList;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport * as queryDef from './query_def';\r\nimport TableModel from 'app/core/table_model';\r\n\r\nexport class ElasticResponse {\r\n  constructor(private targets, private response) {\r\n    this.targets = targets;\r\n    this.response = response;\r\n  }\r\n\r\n  processMetrics(esAgg, target, seriesList, props) {\r\n    let metric, y, i, newSeries, bucket, value;\r\n\r\n    for (y = 0; y < target.metrics.length; y++) {\r\n      metric = target.metrics[y];\r\n      if (metric.hide) {\r\n        continue;\r\n      }\r\n\r\n      switch (metric.type) {\r\n        case 'count': {\r\n          newSeries = { datapoints: [], metric: 'count', props: props };\r\n          for (i = 0; i < esAgg.buckets.length; i++) {\r\n            bucket = esAgg.buckets[i];\r\n            value = bucket.doc_count;\r\n            newSeries.datapoints.push([value, bucket.key]);\r\n          }\r\n          seriesList.push(newSeries);\r\n          break;\r\n        }\r\n        case 'percentiles': {\r\n          if (esAgg.buckets.length === 0) {\r\n            break;\r\n          }\r\n\r\n          const firstBucket = esAgg.buckets[0];\r\n          const percentiles = firstBucket[metric.id].values;\r\n\r\n          for (const percentileName in percentiles) {\r\n            newSeries = {\r\n              datapoints: [],\r\n              metric: 'p' + percentileName,\r\n              props: props,\r\n              field: metric.field,\r\n            };\r\n\r\n            for (i = 0; i < esAgg.buckets.length; i++) {\r\n              bucket = esAgg.buckets[i];\r\n              const values = bucket[metric.id].values;\r\n              newSeries.datapoints.push([values[percentileName], bucket.key]);\r\n            }\r\n            seriesList.push(newSeries);\r\n          }\r\n\r\n          break;\r\n        }\r\n        case 'extended_stats': {\r\n          for (const statName in metric.meta) {\r\n            if (!metric.meta[statName]) {\r\n              continue;\r\n            }\r\n\r\n            newSeries = {\r\n              datapoints: [],\r\n              metric: statName,\r\n              props: props,\r\n              field: metric.field,\r\n            };\r\n\r\n            for (i = 0; i < esAgg.buckets.length; i++) {\r\n              bucket = esAgg.buckets[i];\r\n              const stats = bucket[metric.id];\r\n\r\n              // add stats that are in nested obj to top level obj\r\n              stats.std_deviation_bounds_upper = stats.std_deviation_bounds.upper;\r\n              stats.std_deviation_bounds_lower = stats.std_deviation_bounds.lower;\r\n\r\n              newSeries.datapoints.push([stats[statName], bucket.key]);\r\n            }\r\n\r\n            seriesList.push(newSeries);\r\n          }\r\n\r\n          break;\r\n        }\r\n        default: {\r\n          newSeries = {\r\n            datapoints: [],\r\n            metric: metric.type,\r\n            field: metric.field,\r\n            props: props,\r\n          };\r\n          for (i = 0; i < esAgg.buckets.length; i++) {\r\n            bucket = esAgg.buckets[i];\r\n\r\n            value = bucket[metric.id];\r\n            if (value !== undefined) {\r\n              if (value.normalized_value) {\r\n                newSeries.datapoints.push([value.normalized_value, bucket.key]);\r\n              } else {\r\n                newSeries.datapoints.push([value.value, bucket.key]);\r\n              }\r\n            }\r\n          }\r\n          seriesList.push(newSeries);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  processAggregationDocs(esAgg, aggDef, target, table, props) {\r\n    // add columns\r\n    if (table.columns.length === 0) {\r\n      for (const propKey of _.keys(props)) {\r\n        table.addColumn({ text: propKey, filterable: true });\r\n      }\r\n      table.addColumn({ text: aggDef.field, filterable: true });\r\n    }\r\n\r\n    // helper func to add values to value array\r\n    const addMetricValue = (values, metricName, value) => {\r\n      table.addColumn({ text: metricName });\r\n      values.push(value);\r\n    };\r\n\r\n    for (const bucket of esAgg.buckets) {\r\n      const values = [];\r\n\r\n      for (const propValues of _.values(props)) {\r\n        values.push(propValues);\r\n      }\r\n\r\n      // add bucket key (value)\r\n      values.push(bucket.key);\r\n\r\n      for (const metric of target.metrics) {\r\n        switch (metric.type) {\r\n          case 'count': {\r\n            addMetricValue(values, this.getMetricName(metric.type), bucket.doc_count);\r\n            break;\r\n          }\r\n          case 'extended_stats': {\r\n            for (const statName in metric.meta) {\r\n              if (!metric.meta[statName]) {\r\n                continue;\r\n              }\r\n\r\n              const stats = bucket[metric.id];\r\n              // add stats that are in nested obj to top level obj\r\n              stats.std_deviation_bounds_upper = stats.std_deviation_bounds.upper;\r\n              stats.std_deviation_bounds_lower = stats.std_deviation_bounds.lower;\r\n\r\n              addMetricValue(values, this.getMetricName(statName), stats[statName]);\r\n            }\r\n            break;\r\n          }\r\n          default: {\r\n            let metricName = this.getMetricName(metric.type);\r\n            const otherMetrics = _.filter(target.metrics, { type: metric.type });\r\n\r\n            // if more of the same metric type include field field name in property\r\n            if (otherMetrics.length > 1) {\r\n              metricName += ' ' + metric.field;\r\n            }\r\n\r\n            addMetricValue(values, metricName, bucket[metric.id].value);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      table.rows.push(values);\r\n    }\r\n  }\r\n\r\n  // This is quite complex\r\n  // need to recurise down the nested buckets to build series\r\n  processBuckets(aggs, target, seriesList, table, props, depth) {\r\n    let bucket, aggDef, esAgg, aggId;\r\n    const maxDepth = target.bucketAggs.length - 1;\r\n\r\n    for (aggId in aggs) {\r\n      aggDef = _.find(target.bucketAggs, { id: aggId });\r\n      esAgg = aggs[aggId];\r\n\r\n      if (!aggDef) {\r\n        continue;\r\n      }\r\n\r\n      if (depth === maxDepth) {\r\n        if (aggDef.type === 'date_histogram') {\r\n          this.processMetrics(esAgg, target, seriesList, props);\r\n        } else {\r\n          this.processAggregationDocs(esAgg, aggDef, target, table, props);\r\n        }\r\n      } else {\r\n        for (const nameIndex in esAgg.buckets) {\r\n          bucket = esAgg.buckets[nameIndex];\r\n          props = _.clone(props);\r\n          if (bucket.key !== void 0) {\r\n            props[aggDef.field] = bucket.key;\r\n          } else {\r\n            props['filter'] = nameIndex;\r\n          }\r\n          if (bucket.key_as_string) {\r\n            props[aggDef.field] = bucket.key_as_string;\r\n          }\r\n          this.processBuckets(bucket, target, seriesList, table, props, depth + 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getMetricName(metric) {\r\n    let metricDef = _.find(queryDef.metricAggTypes, { value: metric });\r\n    if (!metricDef) {\r\n      metricDef = _.find(queryDef.extendedStats, { value: metric });\r\n    }\r\n\r\n    return metricDef ? metricDef.text : metric;\r\n  }\r\n\r\n  private getSeriesName(series, target, metricTypeCount) {\r\n    let metricName = this.getMetricName(series.metric);\r\n\r\n    if (target.alias) {\r\n      const regex = /\\{\\{([\\s\\S]+?)\\}\\}/g;\r\n\r\n      return target.alias.replace(regex, (match, g1, g2) => {\r\n        const group = g1 || g2;\r\n\r\n        if (group.indexOf('term ') === 0) {\r\n          return series.props[group.substring(5)];\r\n        }\r\n        if (series.props[group] !== void 0) {\r\n          return series.props[group];\r\n        }\r\n        if (group === 'metric') {\r\n          return metricName;\r\n        }\r\n        if (group === 'field') {\r\n          return series.field;\r\n        }\r\n\r\n        return match;\r\n      });\r\n    }\r\n\r\n    if (series.field && queryDef.isPipelineAgg(series.metric)) {\r\n      const appliedAgg = _.find(target.metrics, { id: series.field });\r\n      if (appliedAgg) {\r\n        metricName += ' ' + queryDef.describeMetric(appliedAgg);\r\n      } else {\r\n        metricName = 'Unset';\r\n      }\r\n    } else if (series.field) {\r\n      metricName += ' ' + series.field;\r\n    }\r\n\r\n    const propKeys = _.keys(series.props);\r\n    if (propKeys.length === 0) {\r\n      return metricName;\r\n    }\r\n\r\n    let name = '';\r\n    for (const propName in series.props) {\r\n      name += series.props[propName] + ' ';\r\n    }\r\n\r\n    if (metricTypeCount === 1) {\r\n      return name.trim();\r\n    }\r\n\r\n    return name.trim() + ' ' + metricName;\r\n  }\r\n\r\n  nameSeries(seriesList, target) {\r\n    const metricTypeCount = _.uniq(_.map(seriesList, 'metric')).length;\r\n\r\n    for (let i = 0; i < seriesList.length; i++) {\r\n      const series = seriesList[i];\r\n      series.target = this.getSeriesName(series, target, metricTypeCount);\r\n    }\r\n  }\r\n\r\n  processHits(hits, seriesList) {\r\n    const series = {\r\n      target: 'docs',\r\n      type: 'docs',\r\n      datapoints: [],\r\n      total: hits.total,\r\n      filterable: true,\r\n    };\r\n    let propName, hit, doc, i;\r\n\r\n    for (i = 0; i < hits.hits.length; i++) {\r\n      hit = hits.hits[i];\r\n      doc = {\r\n        _id: hit._id,\r\n        _type: hit._type,\r\n        _index: hit._index,\r\n      };\r\n\r\n      if (hit._source) {\r\n        for (propName in hit._source) {\r\n          doc[propName] = hit._source[propName];\r\n        }\r\n      }\r\n\r\n      for (propName in hit.fields) {\r\n        doc[propName] = hit.fields[propName];\r\n      }\r\n      series.datapoints.push(doc);\r\n    }\r\n\r\n    seriesList.push(series);\r\n  }\r\n\r\n  trimDatapoints(aggregations, target) {\r\n    const histogram = _.find(target.bucketAggs, { type: 'date_histogram' });\r\n\r\n    const shouldDropFirstAndLast = histogram && histogram.settings && histogram.settings.trimEdges;\r\n    if (shouldDropFirstAndLast) {\r\n      const trim = histogram.settings.trimEdges;\r\n      for (const prop in aggregations) {\r\n        const points = aggregations[prop];\r\n        if (points.datapoints.length > trim * 2) {\r\n          points.datapoints = points.datapoints.slice(trim, points.datapoints.length - trim);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getErrorFromElasticResponse(response, err) {\r\n    const result: any = {};\r\n    result.data = JSON.stringify(err, null, 4);\r\n    if (err.root_cause && err.root_cause.length > 0 && err.root_cause[0].reason) {\r\n      result.message = err.root_cause[0].reason;\r\n    } else {\r\n      result.message = err.reason || 'Unkown elastic error response';\r\n    }\r\n\r\n    if (response.$$config) {\r\n      result.config = response.$$config;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  getTimeSeries() {\r\n    const seriesList = [];\r\n\r\n    for (let i = 0; i < this.response.responses.length; i++) {\r\n      const response = this.response.responses[i];\r\n      if (response.error) {\r\n        throw this.getErrorFromElasticResponse(this.response, response.error);\r\n      }\r\n\r\n      if (response.hits && response.hits.hits.length > 0) {\r\n        this.processHits(response.hits, seriesList);\r\n      }\r\n\r\n      if (response.aggregations) {\r\n        const aggregations = response.aggregations;\r\n        const target = this.targets[i];\r\n        const tmpSeriesList = [];\r\n        const table = new TableModel();\r\n\r\n        this.processBuckets(aggregations, target, tmpSeriesList, table, {}, 0);\r\n        this.trimDatapoints(tmpSeriesList, target);\r\n        this.nameSeries(tmpSeriesList, target);\r\n\r\n        for (let y = 0; y < tmpSeriesList.length; y++) {\r\n          seriesList.push(tmpSeriesList[y]);\r\n        }\r\n\r\n        if (table.rows.length > 0) {\r\n          seriesList.push(table);\r\n        }\r\n      }\r\n    }\r\n\r\n    return { data: seriesList };\r\n  }\r\n}\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport { ElasticQueryBuilder } from './query_builder';\r\nimport { IndexPattern } from './index_pattern';\r\nimport { ElasticResponse } from './elastic_response';\r\n\r\nexport class ElasticDatasource {\r\n  basicAuth: string;\r\n  withCredentials: boolean;\r\n  url: string;\r\n  name: string;\r\n  index: string;\r\n  timeField: string;\r\n  esVersion: number;\r\n  interval: string;\r\n  maxConcurrentShardRequests: number;\r\n  queryBuilder: ElasticQueryBuilder;\r\n  indexPattern: IndexPattern;\r\n\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private $q, private backendSrv, private templateSrv, private timeSrv) {\r\n    this.basicAuth = instanceSettings.basicAuth;\r\n    this.withCredentials = instanceSettings.withCredentials;\r\n    this.url = instanceSettings.url;\r\n    this.name = instanceSettings.name;\r\n    this.index = instanceSettings.index;\r\n    this.timeField = instanceSettings.jsonData.timeField;\r\n    this.esVersion = instanceSettings.jsonData.esVersion;\r\n    this.indexPattern = new IndexPattern(instanceSettings.index, instanceSettings.jsonData.interval);\r\n    this.interval = instanceSettings.jsonData.timeInterval;\r\n    this.maxConcurrentShardRequests = instanceSettings.jsonData.maxConcurrentShardRequests;\r\n    this.queryBuilder = new ElasticQueryBuilder({\r\n      timeField: this.timeField,\r\n      esVersion: this.esVersion,\r\n    });\r\n  }\r\n\r\n  private request(method, url, data?) {\r\n    const options: any = {\r\n      url: this.url + '/' + url,\r\n      method: method,\r\n      data: data,\r\n    };\r\n\r\n    if (this.basicAuth || this.withCredentials) {\r\n      options.withCredentials = true;\r\n    }\r\n    if (this.basicAuth) {\r\n      options.headers = {\r\n        Authorization: this.basicAuth,\r\n      };\r\n    }\r\n\r\n    return this.backendSrv.datasourceRequest(options);\r\n  }\r\n\r\n  private get(url) {\r\n    const range = this.timeSrv.timeRange();\r\n    const indexList = this.indexPattern.getIndexList(range.from.valueOf(), range.to.valueOf());\r\n    if (_.isArray(indexList) && indexList.length) {\r\n      return this.request('GET', indexList[0] + url).then(results => {\r\n        results.data.$$config = results.config;\r\n        return results.data;\r\n      });\r\n    } else {\r\n      return this.request('GET', this.indexPattern.getIndexForToday() + url).then(results => {\r\n        results.data.$$config = results.config;\r\n        return results.data;\r\n      });\r\n    }\r\n  }\r\n\r\n  private post(url, data) {\r\n    return this.request('POST', url, data)\r\n      .then(results => {\r\n        results.data.$$config = results.config;\r\n        return results.data;\r\n      })\r\n      .catch(err => {\r\n        if (err.data && err.data.error) {\r\n          throw {\r\n            message: 'Elasticsearch error: ' + err.data.error.reason,\r\n            error: err.data.error,\r\n          };\r\n        }\r\n\r\n        throw err;\r\n      });\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    const annotation = options.annotation;\r\n    const timeField = annotation.timeField || '@timestamp';\r\n    const queryString = annotation.query || '*';\r\n    const tagsField = annotation.tagsField || 'tags';\r\n    const textField = annotation.textField || null;\r\n\r\n    const range = {};\r\n    range[timeField] = {\r\n      from: options.range.from.valueOf(),\r\n      to: options.range.to.valueOf(),\r\n      format: 'epoch_millis',\r\n    };\r\n\r\n    const queryInterpolated = this.templateSrv.replace(queryString, {}, 'lucene');\r\n    const query = {\r\n      bool: {\r\n        filter: [\r\n          { range: range },\r\n          {\r\n            query_string: {\r\n              query: queryInterpolated,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    const data = {\r\n      query: query,\r\n      size: 10000,\r\n    };\r\n\r\n    // fields field not supported on ES 5.x\r\n    if (this.esVersion < 5) {\r\n      data['fields'] = [timeField, '_source'];\r\n    }\r\n\r\n    const header: any = {\r\n      search_type: 'query_then_fetch',\r\n      ignore_unavailable: true,\r\n    };\r\n\r\n    // old elastic annotations had index specified on them\r\n    if (annotation.index) {\r\n      header.index = annotation.index;\r\n    } else {\r\n      header.index = this.indexPattern.getIndexList(options.range.from, options.range.to);\r\n    }\r\n\r\n    const payload = angular.toJson(header) + '\\n' + angular.toJson(data) + '\\n';\r\n\r\n    return this.post('_msearch', payload).then(res => {\r\n      const list = [];\r\n      const hits = res.responses[0].hits.hits;\r\n\r\n      const getFieldFromSource = (source, fieldName) => {\r\n        if (!fieldName) {\r\n          return;\r\n        }\r\n\r\n        const fieldNames = fieldName.split('.');\r\n        let fieldValue = source;\r\n\r\n        for (let i = 0; i < fieldNames.length; i++) {\r\n          fieldValue = fieldValue[fieldNames[i]];\r\n          if (!fieldValue) {\r\n            console.log('could not find field in annotation: ', fieldName);\r\n            return '';\r\n          }\r\n        }\r\n\r\n        return fieldValue;\r\n      };\r\n\r\n      for (let i = 0; i < hits.length; i++) {\r\n        const source = hits[i]._source;\r\n        let time = getFieldFromSource(source, timeField);\r\n        if (typeof hits[i].fields !== 'undefined') {\r\n          const fields = hits[i].fields;\r\n          if (_.isString(fields[timeField]) || _.isNumber(fields[timeField])) {\r\n            time = fields[timeField];\r\n          }\r\n        }\r\n\r\n        const event = {\r\n          annotation: annotation,\r\n          time: moment.utc(time).valueOf(),\r\n          text: getFieldFromSource(source, textField),\r\n          tags: getFieldFromSource(source, tagsField),\r\n        };\r\n\r\n        // legacy support for title tield\r\n        if (annotation.titleField) {\r\n          const title = getFieldFromSource(source, annotation.titleField);\r\n          if (title) {\r\n            event.text = title + '\\n' + event.text;\r\n          }\r\n        }\r\n\r\n        if (typeof event.tags === 'string') {\r\n          event.tags = event.tags.split(',');\r\n        }\r\n\r\n        list.push(event);\r\n      }\r\n      return list;\r\n    });\r\n  }\r\n\r\n  testDatasource() {\r\n    this.timeSrv.setTime({ from: 'now-1m', to: 'now' }, true);\r\n    // validate that the index exist and has date field\r\n    return this.getFields({ type: 'date' }).then(\r\n      dateFields => {\r\n        const timeField = _.find(dateFields, { text: this.timeField });\r\n        if (!timeField) {\r\n          return {\r\n            status: 'error',\r\n            message: 'No date field named ' + this.timeField + ' found',\r\n          };\r\n        }\r\n        return { status: 'success', message: 'Index OK. Time field name OK.' };\r\n      },\r\n      err => {\r\n        console.log(err);\r\n        if (err.data && err.data.error) {\r\n          let message = angular.toJson(err.data.error);\r\n          if (err.data.error.reason) {\r\n            message = err.data.error.reason;\r\n          }\r\n          return { status: 'error', message: message };\r\n        } else {\r\n          return { status: 'error', message: err.status };\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  getQueryHeader(searchType, timeFrom, timeTo) {\r\n    const queryHeader: any = {\r\n      search_type: searchType,\r\n      ignore_unavailable: true,\r\n      index: this.indexPattern.getIndexList(timeFrom, timeTo),\r\n    };\r\n    if (this.esVersion >= 56) {\r\n      queryHeader['max_concurrent_shard_requests'] = this.maxConcurrentShardRequests;\r\n    }\r\n    return angular.toJson(queryHeader);\r\n  }\r\n\r\n  query(options) {\r\n    let payload = '';\r\n    let target;\r\n    const sentTargets = [];\r\n\r\n    // add global adhoc filters to timeFilter\r\n    const adhocFilters = this.templateSrv.getAdhocFilters(this.name);\r\n\r\n    for (let i = 0; i < options.targets.length; i++) {\r\n      target = options.targets[i];\r\n      if (target.hide) {\r\n        continue;\r\n      }\r\n\r\n      const queryString = this.templateSrv.replace(target.query || '*', options.scopedVars, 'lucene');\r\n      const queryObj = this.queryBuilder.build(target, adhocFilters, queryString);\r\n      const esQuery = angular.toJson(queryObj);\r\n\r\n      const searchType = queryObj.size === 0 && this.esVersion < 5 ? 'count' : 'query_then_fetch';\r\n      const header = this.getQueryHeader(searchType, options.range.from, options.range.to);\r\n      payload += header + '\\n';\r\n\r\n      payload += esQuery + '\\n';\r\n      sentTargets.push(target);\r\n    }\r\n\r\n    if (sentTargets.length === 0) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    payload = payload.replace(/\\$timeFrom/g, options.range.from.valueOf());\r\n    payload = payload.replace(/\\$timeTo/g, options.range.to.valueOf());\r\n    payload = this.templateSrv.replace(payload, options.scopedVars);\r\n\r\n    return this.post('_msearch', payload).then(res => {\r\n      return new ElasticResponse(sentTargets, res).getTimeSeries();\r\n    });\r\n  }\r\n\r\n  getFields(query) {\r\n    return this.get('/_mapping').then(result => {\r\n      const typeMap = {\r\n        float: 'number',\r\n        double: 'number',\r\n        integer: 'number',\r\n        long: 'number',\r\n        date: 'date',\r\n        string: 'string',\r\n        text: 'string',\r\n        scaled_float: 'number',\r\n        nested: 'nested',\r\n      };\r\n\r\n      function shouldAddField(obj, key, query) {\r\n        if (key[0] === '_') {\r\n          return false;\r\n        }\r\n\r\n        if (!query.type) {\r\n          return true;\r\n        }\r\n\r\n        // equal query type filter, or via typemap translation\r\n        return query.type === obj.type || query.type === typeMap[obj.type];\r\n      }\r\n\r\n      // Store subfield names: [system, process, cpu, total] -> system.process.cpu.total\r\n      const fieldNameParts = [];\r\n      const fields = {};\r\n\r\n      function getFieldsRecursively(obj) {\r\n        for (const key in obj) {\r\n          const subObj = obj[key];\r\n\r\n          // Check mapping field for nested fields\r\n          if (_.isObject(subObj.properties)) {\r\n            fieldNameParts.push(key);\r\n            getFieldsRecursively(subObj.properties);\r\n          }\r\n\r\n          if (_.isObject(subObj.fields)) {\r\n            fieldNameParts.push(key);\r\n            getFieldsRecursively(subObj.fields);\r\n          }\r\n\r\n          if (_.isString(subObj.type)) {\r\n            const fieldName = fieldNameParts.concat(key).join('.');\r\n\r\n            // Hide meta-fields and check field type\r\n            if (shouldAddField(subObj, key, query)) {\r\n              fields[fieldName] = {\r\n                text: fieldName,\r\n                type: subObj.type,\r\n              };\r\n            }\r\n          }\r\n        }\r\n        fieldNameParts.pop();\r\n      }\r\n\r\n      for (const indexName in result) {\r\n        const index = result[indexName];\r\n        if (index && index.mappings) {\r\n          const mappings = index.mappings;\r\n          for (const typeName in mappings) {\r\n            const properties = mappings[typeName].properties;\r\n            getFieldsRecursively(properties);\r\n          }\r\n        }\r\n      }\r\n\r\n      // transform to array\r\n      return _.map(fields, value => {\r\n        return value;\r\n      });\r\n    });\r\n  }\r\n\r\n  getTerms(queryDef) {\r\n    const range = this.timeSrv.timeRange();\r\n    const searchType = this.esVersion >= 5 ? 'query_then_fetch' : 'count';\r\n    const header = this.getQueryHeader(searchType, range.from, range.to);\r\n    let esQuery = angular.toJson(this.queryBuilder.getTermsQuery(queryDef));\r\n\r\n    esQuery = esQuery.replace(/\\$timeFrom/g, range.from.valueOf());\r\n    esQuery = esQuery.replace(/\\$timeTo/g, range.to.valueOf());\r\n    esQuery = header + '\\n' + esQuery + '\\n';\r\n\r\n    return this.post('_msearch?search_type=' + searchType, esQuery).then(res => {\r\n      if (!res.responses[0].aggregations) {\r\n        return [];\r\n      }\r\n\r\n      const buckets = res.responses[0].aggregations['1'].buckets;\r\n      return _.map(buckets, bucket => {\r\n        return {\r\n          text: bucket.key_as_string || bucket.key,\r\n          value: bucket.key,\r\n        };\r\n      });\r\n    });\r\n  }\r\n\r\n  metricFindQuery(query) {\r\n    query = angular.fromJson(query);\r\n    if (!query) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    if (query.find === 'fields') {\r\n      query.field = this.templateSrv.replace(query.field, {}, 'lucene');\r\n      return this.getFields(query);\r\n    }\r\n\r\n    if (query.find === 'terms') {\r\n      query.field = this.templateSrv.replace(query.field, {}, 'lucene');\r\n      query.query = this.templateSrv.replace(query.query || '*', {}, 'lucene');\r\n      return this.getTerms(query);\r\n    }\r\n  }\r\n\r\n  getTagKeys() {\r\n    return this.getFields({});\r\n  }\r\n\r\n  getTagValues(options) {\r\n    return this.getTerms({ field: options.key, query: '*' });\r\n  }\r\n\r\n  targetContainsTemplate(target) {\r\n    if (this.templateSrv.variableExists(target.query) || this.templateSrv.variableExists(target.alias)) {\r\n      return true;\r\n    }\r\n\r\n    for (const bucketAgg of target.bucketAggs) {\r\n      if (this.templateSrv.variableExists(bucketAgg.field) || this.objectContainsTemplate(bucketAgg.settings)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    for (const metric of target.metrics) {\r\n      if (\r\n        this.templateSrv.variableExists(metric.field) ||\r\n        this.objectContainsTemplate(metric.settings) ||\r\n        this.objectContainsTemplate(metric.meta)\r\n      ) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  private isPrimitive(obj) {\r\n    if (obj === null || obj === undefined) {\r\n      return true;\r\n    }\r\n    if (['string', 'number', 'boolean'].some(type => type === typeof true)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  private objectContainsTemplate(obj) {\r\n    if (!obj) {\r\n      return false;\r\n    }\r\n\r\n    for (const key of Object.keys(obj)) {\r\n      if (this.isPrimitive(obj[key])) {\r\n        if (this.templateSrv.variableExists(obj[key])) {\r\n          return true;\r\n        }\r\n      } else if (Array.isArray(obj[key])) {\r\n        for (const item of obj[key]) {\r\n          if (this.objectContainsTemplate(item)) {\r\n            return true;\r\n          }\r\n        }\r\n      } else {\r\n        if (this.objectContainsTemplate(obj[key])) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n}\r\n","import coreModule from 'app/core/core_module';\r\nimport _ from 'lodash';\r\nimport * as queryDef from './query_def';\r\n\r\nexport function elasticBucketAgg() {\r\n  return {\r\n    templateUrl: 'public/app/plugins/datasource/elasticsearch/partials/bucket_agg.html',\r\n    controller: 'ElasticBucketAggCtrl',\r\n    restrict: 'E',\r\n    scope: {\r\n      target: '=',\r\n      index: '=',\r\n      onChange: '&',\r\n      getFields: '&',\r\n    },\r\n  };\r\n}\r\n\r\nexport class ElasticBucketAggCtrl {\r\n  /** @nginject */\r\n  constructor($scope, uiSegmentSrv, $q, $rootScope) {\r\n    const bucketAggs = $scope.target.bucketAggs;\r\n\r\n    $scope.orderByOptions = [];\r\n\r\n    $scope.getBucketAggTypes = () => {\r\n      return queryDef.bucketAggTypes;\r\n    };\r\n\r\n    $scope.getOrderOptions = () => {\r\n      return queryDef.orderOptions;\r\n    };\r\n\r\n    $scope.getSizeOptions = () => {\r\n      return queryDef.sizeOptions;\r\n    };\r\n\r\n    $rootScope.onAppEvent(\r\n      'elastic-query-updated',\r\n      () => {\r\n        $scope.validateModel();\r\n      },\r\n      $scope\r\n    );\r\n\r\n    $scope.init = () => {\r\n      $scope.agg = bucketAggs[$scope.index];\r\n      $scope.validateModel();\r\n    };\r\n\r\n    $scope.onChangeInternal = () => {\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.onTypeChanged = () => {\r\n      $scope.agg.settings = {};\r\n      $scope.showOptions = false;\r\n\r\n      switch ($scope.agg.type) {\r\n        case 'date_histogram':\r\n        case 'histogram':\r\n        case 'terms': {\r\n          delete $scope.agg.query;\r\n          $scope.agg.field = 'select field';\r\n          break;\r\n        }\r\n        case 'filters': {\r\n          delete $scope.agg.field;\r\n          $scope.agg.query = '*';\r\n          break;\r\n        }\r\n        case 'geohash_grid': {\r\n          $scope.agg.settings.precision = 3;\r\n          break;\r\n        }\r\n      }\r\n\r\n      $scope.validateModel();\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.validateModel = () => {\r\n      $scope.index = _.indexOf(bucketAggs, $scope.agg);\r\n      $scope.isFirst = $scope.index === 0;\r\n      $scope.bucketAggCount = bucketAggs.length;\r\n\r\n      let settingsLinkText = '';\r\n      const settings = $scope.agg.settings || {};\r\n\r\n      switch ($scope.agg.type) {\r\n        case 'terms': {\r\n          settings.order = settings.order || 'desc';\r\n          settings.size = settings.size || '10';\r\n          settings.min_doc_count = settings.min_doc_count || 1;\r\n          settings.orderBy = settings.orderBy || '_term';\r\n\r\n          if (settings.size !== '0') {\r\n            settingsLinkText = queryDef.describeOrder(settings.order) + ' ' + settings.size + ', ';\r\n          }\r\n\r\n          if (settings.min_doc_count > 0) {\r\n            settingsLinkText += 'Min Doc Count: ' + settings.min_doc_count + ', ';\r\n          }\r\n\r\n          settingsLinkText += 'Order by: ' + queryDef.describeOrderBy(settings.orderBy, $scope.target);\r\n\r\n          if (settings.size === '0') {\r\n            settingsLinkText += ' (' + settings.order + ')';\r\n          }\r\n\r\n          break;\r\n        }\r\n        case 'filters': {\r\n          settings.filters = settings.filters || [{ query: '*' }];\r\n          settingsLinkText = _.reduce(\r\n            settings.filters,\r\n            (memo, value, index) => {\r\n              memo += 'Q' + (index + 1) + '  = ' + value.query + ' ';\r\n              return memo;\r\n            },\r\n            ''\r\n          );\r\n          if (settingsLinkText.length > 50) {\r\n            settingsLinkText = settingsLinkText.substr(0, 50) + '...';\r\n          }\r\n          settingsLinkText = 'Filter Queries (' + settings.filters.length + ')';\r\n          break;\r\n        }\r\n        case 'date_histogram': {\r\n          settings.interval = settings.interval || 'auto';\r\n          settings.min_doc_count = settings.min_doc_count || 0;\r\n          $scope.agg.field = $scope.target.timeField;\r\n          settingsLinkText = 'Interval: ' + settings.interval;\r\n\r\n          if (settings.min_doc_count > 0) {\r\n            settingsLinkText += ', Min Doc Count: ' + settings.min_doc_count;\r\n          }\r\n\r\n          if (settings.trimEdges === undefined || settings.trimEdges < 0) {\r\n            settings.trimEdges = 0;\r\n          }\r\n\r\n          if (settings.trimEdges && settings.trimEdges > 0) {\r\n            settingsLinkText += ', Trim edges: ' + settings.trimEdges;\r\n          }\r\n          break;\r\n        }\r\n        case 'histogram': {\r\n          settings.interval = settings.interval || 1000;\r\n          settings.min_doc_count = _.defaultTo(settings.min_doc_count, 1);\r\n          settingsLinkText = 'Interval: ' + settings.interval;\r\n\r\n          if (settings.min_doc_count > 0) {\r\n            settingsLinkText += ', Min Doc Count: ' + settings.min_doc_count;\r\n          }\r\n          break;\r\n        }\r\n        case 'geohash_grid': {\r\n          // limit precision to 7\r\n          settings.precision = Math.max(Math.min(settings.precision, 7), 1);\r\n          settingsLinkText = 'Precision: ' + settings.precision;\r\n          break;\r\n        }\r\n      }\r\n\r\n      $scope.settingsLinkText = settingsLinkText;\r\n      $scope.agg.settings = settings;\r\n      return true;\r\n    };\r\n\r\n    $scope.addFiltersQuery = () => {\r\n      $scope.agg.settings.filters.push({ query: '*' });\r\n    };\r\n\r\n    $scope.removeFiltersQuery = filter => {\r\n      $scope.agg.settings.filters = _.without($scope.agg.settings.filters, filter);\r\n    };\r\n\r\n    $scope.toggleOptions = () => {\r\n      $scope.showOptions = !$scope.showOptions;\r\n    };\r\n\r\n    $scope.getOrderByOptions = () => {\r\n      return queryDef.getOrderByOptions($scope.target);\r\n    };\r\n\r\n    $scope.getFieldsInternal = () => {\r\n      if ($scope.agg.type === 'date_histogram') {\r\n        return $scope.getFields({ $fieldType: 'date' });\r\n      } else {\r\n        return $scope.getFields();\r\n      }\r\n    };\r\n\r\n    $scope.getIntervalOptions = () => {\r\n      return $q.when(uiSegmentSrv.transformToSegments(true, 'interval')(queryDef.intervalOptions));\r\n    };\r\n\r\n    $scope.addBucketAgg = () => {\r\n      // if last is date histogram add it before\r\n      const lastBucket = bucketAggs[bucketAggs.length - 1];\r\n      let addIndex = bucketAggs.length - 1;\r\n\r\n      if (lastBucket && lastBucket.type === 'date_histogram') {\r\n        addIndex -= 1;\r\n      }\r\n\r\n      const id = _.reduce(\r\n        $scope.target.bucketAggs.concat($scope.target.metrics),\r\n        (max, val) => {\r\n          return parseInt(val.id, 10) > max ? parseInt(val.id, 10) : max;\r\n        },\r\n        0\r\n      );\r\n\r\n      bucketAggs.splice(addIndex, 0, { type: 'terms', field: 'select field', id: (id + 1).toString(), fake: true });\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.removeBucketAgg = () => {\r\n      bucketAggs.splice($scope.index, 1);\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\ncoreModule.directive('elasticBucketAgg', elasticBucketAgg);\r\ncoreModule.controller('ElasticBucketAggCtrl', ElasticBucketAggCtrl);\r\n","import coreModule from 'app/core/core_module';\r\nimport _ from 'lodash';\r\nimport * as queryDef from './query_def';\r\n\r\nexport function elasticMetricAgg() {\r\n  return {\r\n    templateUrl: 'public/app/plugins/datasource/elasticsearch/partials/metric_agg.html',\r\n    controller: 'ElasticMetricAggCtrl',\r\n    restrict: 'E',\r\n    scope: {\r\n      target: '=',\r\n      index: '=',\r\n      onChange: '&',\r\n      getFields: '&',\r\n      esVersion: '=',\r\n    },\r\n  };\r\n}\r\n\r\nexport class ElasticMetricAggCtrl {\r\n  constructor($scope, uiSegmentSrv, $q, $rootScope) {\r\n    const metricAggs = $scope.target.metrics;\r\n    $scope.metricAggTypes = queryDef.getMetricAggTypes($scope.esVersion);\r\n    $scope.extendedStats = queryDef.extendedStats;\r\n    $scope.pipelineAggOptions = [];\r\n    $scope.modelSettingsValues = {};\r\n\r\n    $scope.init = () => {\r\n      $scope.agg = metricAggs[$scope.index];\r\n      $scope.validateModel();\r\n      $scope.updatePipelineAggOptions();\r\n    };\r\n\r\n    $scope.updatePipelineAggOptions = () => {\r\n      $scope.pipelineAggOptions = queryDef.getPipelineAggOptions($scope.target);\r\n    };\r\n\r\n    $rootScope.onAppEvent(\r\n      'elastic-query-updated',\r\n      () => {\r\n        $scope.index = _.indexOf(metricAggs, $scope.agg);\r\n        $scope.updatePipelineAggOptions();\r\n        $scope.validateModel();\r\n      },\r\n      $scope\r\n    );\r\n\r\n    $scope.validateModel = () => {\r\n      $scope.isFirst = $scope.index === 0;\r\n      $scope.isSingle = metricAggs.length === 1;\r\n      $scope.settingsLinkText = '';\r\n      $scope.aggDef = _.find($scope.metricAggTypes, { value: $scope.agg.type });\r\n\r\n      if (queryDef.isPipelineAgg($scope.agg.type)) {\r\n        $scope.agg.pipelineAgg = $scope.agg.pipelineAgg || 'select metric';\r\n        $scope.agg.field = $scope.agg.pipelineAgg;\r\n\r\n        const pipelineOptions = queryDef.getPipelineOptions($scope.agg);\r\n        if (pipelineOptions.length > 0) {\r\n          _.each(pipelineOptions, opt => {\r\n            $scope.agg.settings[opt.text] = $scope.agg.settings[opt.text] || opt.default;\r\n          });\r\n          $scope.settingsLinkText = 'Options';\r\n        }\r\n      } else if (!$scope.agg.field) {\r\n        $scope.agg.field = 'select field';\r\n      }\r\n      switch ($scope.agg.type) {\r\n        case 'cardinality': {\r\n          const precisionThreshold = $scope.agg.settings.precision_threshold || '';\r\n          $scope.settingsLinkText = 'Precision threshold: ' + precisionThreshold;\r\n          break;\r\n        }\r\n        case 'percentiles': {\r\n          $scope.agg.settings.percents = $scope.agg.settings.percents || [25, 50, 75, 95, 99];\r\n          $scope.settingsLinkText = 'Values: ' + $scope.agg.settings.percents.join(',');\r\n          break;\r\n        }\r\n        case 'extended_stats': {\r\n          if (_.keys($scope.agg.meta).length === 0) {\r\n            $scope.agg.meta.std_deviation_bounds_lower = true;\r\n            $scope.agg.meta.std_deviation_bounds_upper = true;\r\n          }\r\n\r\n          const stats = _.reduce(\r\n            $scope.agg.meta,\r\n            (memo, val, key) => {\r\n              if (val) {\r\n                const def = _.find($scope.extendedStats, { value: key });\r\n                memo.push(def.text);\r\n              }\r\n              return memo;\r\n            },\r\n            []\r\n          );\r\n\r\n          $scope.settingsLinkText = 'Stats: ' + stats.join(', ');\r\n          break;\r\n        }\r\n        case 'moving_avg': {\r\n          $scope.movingAvgModelTypes = queryDef.movingAvgModelOptions;\r\n          $scope.modelSettings = queryDef.getMovingAvgSettings($scope.agg.settings.model, true);\r\n          $scope.updateMovingAvgModelSettings();\r\n          break;\r\n        }\r\n        case 'raw_document': {\r\n          $scope.agg.settings.size = $scope.agg.settings.size || 500;\r\n          $scope.settingsLinkText = 'Size: ' + $scope.agg.settings.size;\r\n          $scope.target.metrics.splice(0, $scope.target.metrics.length, $scope.agg);\r\n\r\n          $scope.target.bucketAggs = [];\r\n          break;\r\n        }\r\n      }\r\n      if ($scope.aggDef.supportsInlineScript) {\r\n        // I know this stores the inline script twice\r\n        // but having it like this simplifes the query_builder\r\n        const inlineScript = $scope.agg.inlineScript;\r\n        if (inlineScript) {\r\n          $scope.agg.settings.script = { inline: inlineScript };\r\n        } else {\r\n          delete $scope.agg.settings.script;\r\n        }\r\n\r\n        if ($scope.settingsLinkText === '') {\r\n          $scope.settingsLinkText = 'Options';\r\n        }\r\n      }\r\n    };\r\n\r\n    $scope.toggleOptions = () => {\r\n      $scope.showOptions = !$scope.showOptions;\r\n      $scope.updatePipelineAggOptions();\r\n    };\r\n\r\n    $scope.onChangeInternal = () => {\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.updateMovingAvgModelSettings = () => {\r\n      const modelSettingsKeys = [];\r\n      const modelSettings = queryDef.getMovingAvgSettings($scope.agg.settings.model, false);\r\n      for (let i = 0; i < modelSettings.length; i++) {\r\n        modelSettingsKeys.push(modelSettings[i].value);\r\n      }\r\n\r\n      for (const key in $scope.agg.settings.settings) {\r\n        if ($scope.agg.settings.settings[key] === null || modelSettingsKeys.indexOf(key) === -1) {\r\n          delete $scope.agg.settings.settings[key];\r\n        }\r\n      }\r\n    };\r\n\r\n    $scope.onChangeClearInternal = () => {\r\n      delete $scope.agg.settings.minimize;\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.onTypeChange = () => {\r\n      $scope.agg.settings = {};\r\n      $scope.agg.meta = {};\r\n      $scope.showOptions = false;\r\n      $scope.updatePipelineAggOptions();\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.getFieldsInternal = () => {\r\n      if ($scope.agg.type === 'cardinality') {\r\n        return $scope.getFields();\r\n      }\r\n      return $scope.getFields({ $fieldType: 'number' });\r\n    };\r\n\r\n    $scope.addMetricAgg = () => {\r\n      const addIndex = metricAggs.length;\r\n\r\n      const id = _.reduce(\r\n        $scope.target.bucketAggs.concat($scope.target.metrics),\r\n        (max, val) => {\r\n          return parseInt(val.id, 10) > max ? parseInt(val.id, 10) : max;\r\n        },\r\n        0\r\n      );\r\n\r\n      metricAggs.splice(addIndex, 0, { type: 'count', field: 'select field', id: (id + 1).toString() });\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.removeMetricAgg = () => {\r\n      metricAggs.splice($scope.index, 1);\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.toggleShowMetric = () => {\r\n      $scope.agg.hide = !$scope.agg.hide;\r\n      if (!$scope.agg.hide) {\r\n        delete $scope.agg.hide;\r\n      }\r\n      $scope.onChange();\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\ncoreModule.directive('elasticMetricAgg', elasticMetricAgg);\r\ncoreModule.controller('ElasticMetricAggCtrl', ElasticMetricAggCtrl);\r\n","import './bucket_agg';\r\nimport './metric_agg';\r\n\r\nimport angular from 'angular';\r\nimport _ from 'lodash';\r\nimport * as queryDef from './query_def';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\n\r\nexport class ElasticQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n\r\n  esVersion: any;\r\n  rawQueryOld: string;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private $rootScope, private uiSegmentSrv) {\r\n    super($scope, $injector);\r\n\r\n    this.esVersion = this.datasource.esVersion;\r\n    this.queryUpdated();\r\n  }\r\n\r\n  getFields(type) {\r\n    const jsonStr = angular.toJson({ find: 'fields', type: type });\r\n    return this.datasource\r\n      .metricFindQuery(jsonStr)\r\n      .then(this.uiSegmentSrv.transformToSegments(false))\r\n      .catch(this.handleQueryError.bind(this));\r\n  }\r\n\r\n  queryUpdated() {\r\n    const newJson = angular.toJson(this.datasource.queryBuilder.build(this.target), true);\r\n    if (this.rawQueryOld && newJson !== this.rawQueryOld) {\r\n      this.refresh();\r\n    }\r\n\r\n    this.rawQueryOld = newJson;\r\n    this.$rootScope.appEvent('elastic-query-updated');\r\n  }\r\n\r\n  getCollapsedText() {\r\n    const metricAggs = this.target.metrics;\r\n    const bucketAggs = this.target.bucketAggs;\r\n    const metricAggTypes = queryDef.getMetricAggTypes(this.esVersion);\r\n    const bucketAggTypes = queryDef.bucketAggTypes;\r\n    let text = '';\r\n\r\n    if (this.target.query) {\r\n      text += 'Query: ' + this.target.query + ', ';\r\n    }\r\n\r\n    text += 'Metrics: ';\r\n\r\n    _.each(metricAggs, (metric, index) => {\r\n      const aggDef = _.find(metricAggTypes, { value: metric.type });\r\n      text += aggDef.text + '(';\r\n      if (aggDef.requiresField) {\r\n        text += metric.field;\r\n      }\r\n      text += '), ';\r\n    });\r\n\r\n    _.each(bucketAggs, (bucketAgg, index) => {\r\n      if (index === 0) {\r\n        text += ' Group by: ';\r\n      }\r\n\r\n      const aggDef = _.find(bucketAggTypes, { value: bucketAgg.type });\r\n      text += aggDef.text + '(';\r\n      if (aggDef.requiresField) {\r\n        text += bucketAgg.field;\r\n      }\r\n      text += '), ';\r\n    });\r\n\r\n    if (this.target.alias) {\r\n      text += 'Alias: ' + this.target.alias;\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  handleQueryError(err) {\r\n    this.error = err.message || 'Failed to issue metric query';\r\n    return [];\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport class ElasticConfigCtrl {\r\n  static templateUrl = 'public/app/plugins/datasource/elasticsearch/partials/config.html';\r\n  current: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope) {\r\n    this.current.jsonData.timeField = this.current.jsonData.timeField || '@timestamp';\r\n    this.current.jsonData.esVersion = this.current.jsonData.esVersion || 5;\r\n    this.current.jsonData.maxConcurrentShardRequests = this.current.jsonData.maxConcurrentShardRequests || 256;\r\n  }\r\n\r\n  indexPatternTypes = [\r\n    { name: 'No pattern', value: undefined },\r\n    { name: 'Hourly', value: 'Hourly', example: '[logstash-]YYYY.MM.DD.HH' },\r\n    { name: 'Daily', value: 'Daily', example: '[logstash-]YYYY.MM.DD' },\r\n    { name: 'Weekly', value: 'Weekly', example: '[logstash-]GGGG.WW' },\r\n    { name: 'Monthly', value: 'Monthly', example: '[logstash-]YYYY.MM' },\r\n    { name: 'Yearly', value: 'Yearly', example: '[logstash-]YYYY' },\r\n  ];\r\n\r\n  esVersions = [{ name: '2.x', value: 2 }, { name: '5.x', value: 5 }, { name: '5.6+', value: 56 }];\r\n\r\n  indexPatternTypeChanged() {\r\n    const def = _.find(this.indexPatternTypes, {\r\n      value: this.current.jsonData.interval,\r\n    });\r\n    this.current.database = def.example || 'es-index-name';\r\n  }\r\n}\r\n","import { ElasticDatasource } from './datasource';\r\nimport { ElasticQueryCtrl } from './query_ctrl';\r\nimport { ElasticConfigCtrl } from './config_ctrl';\r\n\r\nclass ElasticAnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n}\r\n\r\nexport {\r\n  ElasticDatasource as Datasource,\r\n  ElasticQueryCtrl as QueryCtrl,\r\n  ElasticConfigCtrl as ConfigCtrl,\r\n  ElasticAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport * as dateMath from 'app/core/utils/datemath';\r\n\r\nexport default class OpenTsDatasource {\r\n  type: any;\r\n  url: any;\r\n  name: any;\r\n  withCredentials: any;\r\n  basicAuth: any;\r\n  tsdbVersion: any;\r\n  tsdbResolution: any;\r\n  tagKeys: any;\r\n\r\n  aggregatorsPromise: any;\r\n  filterTypesPromise: any;\r\n\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private $q, private backendSrv, private templateSrv) {\r\n    this.type = 'opentsdb';\r\n    this.url = instanceSettings.url;\r\n    this.name = instanceSettings.name;\r\n    this.withCredentials = instanceSettings.withCredentials;\r\n    this.basicAuth = instanceSettings.basicAuth;\r\n    instanceSettings.jsonData = instanceSettings.jsonData || {};\r\n    this.tsdbVersion = instanceSettings.jsonData.tsdbVersion || 1;\r\n    this.tsdbResolution = instanceSettings.jsonData.tsdbResolution || 1;\r\n    this.tagKeys = {};\r\n\r\n    this.aggregatorsPromise = null;\r\n    this.filterTypesPromise = null;\r\n  }\r\n\r\n  // Called once per panel (graph)\r\n  query(options) {\r\n    const start = this.convertToTSDBTime(options.rangeRaw.from, false);\r\n    const end = this.convertToTSDBTime(options.rangeRaw.to, true);\r\n    const qs = [];\r\n\r\n    _.each(options.targets, target => {\r\n      if (!target.metric) {\r\n        return;\r\n      }\r\n      qs.push(this.convertTargetToQuery(target, options, this.tsdbVersion));\r\n    });\r\n\r\n    const queries = _.compact(qs);\r\n\r\n    // No valid targets, return the empty result to save a round trip.\r\n    if (_.isEmpty(queries)) {\r\n      const d = this.$q.defer();\r\n      d.resolve({ data: [] });\r\n      return d.promise;\r\n    }\r\n\r\n    const groupByTags = {};\r\n    _.each(queries, query => {\r\n      if (query.filters && query.filters.length > 0) {\r\n        _.each(query.filters, val => {\r\n          groupByTags[val.tagk] = true;\r\n        });\r\n      } else {\r\n        _.each(query.tags, (val, key) => {\r\n          groupByTags[key] = true;\r\n        });\r\n      }\r\n    });\r\n\r\n    options.targets = _.filter(options.targets, query => {\r\n      return query.hide !== true;\r\n    });\r\n\r\n    return this.performTimeSeriesQuery(queries, start, end).then(response => {\r\n      const metricToTargetMapping = this.mapMetricsToTargets(response.data, options, this.tsdbVersion);\r\n      const result = _.map(response.data, (metricData, index) => {\r\n        index = metricToTargetMapping[index];\r\n        if (index === -1) {\r\n          index = 0;\r\n        }\r\n        this._saveTagKeys(metricData);\r\n\r\n        return this.transformMetricData(metricData, groupByTags, options.targets[index], options, this.tsdbResolution);\r\n      });\r\n      return { data: result };\r\n    });\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    const start = this.convertToTSDBTime(options.rangeRaw.from, false);\r\n    const end = this.convertToTSDBTime(options.rangeRaw.to, true);\r\n    const qs = [];\r\n    const eventList = [];\r\n\r\n    qs.push({ aggregator: 'sum', metric: options.annotation.target });\r\n\r\n    const queries = _.compact(qs);\r\n\r\n    return this.performTimeSeriesQuery(queries, start, end).then(results => {\r\n      if (results.data[0]) {\r\n        let annotationObject = results.data[0].annotations;\r\n        if (options.annotation.isGlobal) {\r\n          annotationObject = results.data[0].globalAnnotations;\r\n        }\r\n        if (annotationObject) {\r\n          _.each(annotationObject, annotation => {\r\n            const event = {\r\n              text: annotation.description,\r\n              time: Math.floor(annotation.startTime) * 1000,\r\n              annotation: options.annotation,\r\n            };\r\n\r\n            eventList.push(event);\r\n          });\r\n        }\r\n      }\r\n      return eventList;\r\n    });\r\n  }\r\n\r\n  targetContainsTemplate(target) {\r\n    if (target.filters && target.filters.length > 0) {\r\n      for (let i = 0; i < target.filters.length; i++) {\r\n        if (this.templateSrv.variableExists(target.filters[i].filter)) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (target.tags && Object.keys(target.tags).length > 0) {\r\n      for (const tagKey in target.tags) {\r\n        if (this.templateSrv.variableExists(target.tags[tagKey])) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  performTimeSeriesQuery(queries, start, end) {\r\n    let msResolution = false;\r\n    if (this.tsdbResolution === 2) {\r\n      msResolution = true;\r\n    }\r\n    const reqBody: any = {\r\n      start: start,\r\n      queries: queries,\r\n      msResolution: msResolution,\r\n      globalAnnotations: true,\r\n    };\r\n    if (this.tsdbVersion === 3) {\r\n      reqBody.showQuery = true;\r\n    }\r\n\r\n    // Relative queries (e.g. last hour) don't include an end time\r\n    if (end) {\r\n      reqBody.end = end;\r\n    }\r\n\r\n    const options = {\r\n      method: 'POST',\r\n      url: this.url + '/api/query',\r\n      data: reqBody,\r\n    };\r\n\r\n    this._addCredentialOptions(options);\r\n    return this.backendSrv.datasourceRequest(options);\r\n  }\r\n\r\n  suggestTagKeys(metric) {\r\n    return this.$q.when(this.tagKeys[metric] || []);\r\n  }\r\n\r\n  _saveTagKeys(metricData) {\r\n    const tagKeys = Object.keys(metricData.tags);\r\n    _.each(metricData.aggregateTags, tag => {\r\n      tagKeys.push(tag);\r\n    });\r\n\r\n    this.tagKeys[metricData.metric] = tagKeys;\r\n  }\r\n\r\n  _performSuggestQuery(query, type) {\r\n    return this._get('/api/suggest', { type: type, q: query, max: 1000 }).then(result => {\r\n      return result.data;\r\n    });\r\n  }\r\n\r\n  _performMetricKeyValueLookup(metric, keys) {\r\n    if (!metric || !keys) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    const keysArray = keys.split(',').map(key => {\r\n      return key.trim();\r\n    });\r\n    const key = keysArray[0];\r\n    let keysQuery = key + '=*';\r\n\r\n    if (keysArray.length > 1) {\r\n      keysQuery += ',' + keysArray.splice(1).join(',');\r\n    }\r\n\r\n    const m = metric + '{' + keysQuery + '}';\r\n\r\n    return this._get('/api/search/lookup', { m: m, limit: 3000 }).then(result => {\r\n      result = result.data.results;\r\n      const tagvs = [];\r\n      _.each(result, r => {\r\n        if (tagvs.indexOf(r.tags[key]) === -1) {\r\n          tagvs.push(r.tags[key]);\r\n        }\r\n      });\r\n      return tagvs;\r\n    });\r\n  }\r\n\r\n  _performMetricKeyLookup(metric) {\r\n    if (!metric) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    return this._get('/api/search/lookup', { m: metric, limit: 1000 }).then(result => {\r\n      result = result.data.results;\r\n      const tagks = [];\r\n      _.each(result, r => {\r\n        _.each(r.tags, (tagv, tagk) => {\r\n          if (tagks.indexOf(tagk) === -1) {\r\n            tagks.push(tagk);\r\n          }\r\n        });\r\n      });\r\n      return tagks;\r\n    });\r\n  }\r\n\r\n  _get(relativeUrl, params?) {\r\n    const options = {\r\n      method: 'GET',\r\n      url: this.url + relativeUrl,\r\n      params: params,\r\n    };\r\n\r\n    this._addCredentialOptions(options);\r\n\r\n    return this.backendSrv.datasourceRequest(options);\r\n  }\r\n\r\n  _addCredentialOptions(options) {\r\n    if (this.basicAuth || this.withCredentials) {\r\n      options.withCredentials = true;\r\n    }\r\n    if (this.basicAuth) {\r\n      options.headers = { Authorization: this.basicAuth };\r\n    }\r\n  }\r\n\r\n  metricFindQuery(query) {\r\n    if (!query) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    let interpolated;\r\n    try {\r\n      interpolated = this.templateSrv.replace(query, {}, 'distributed');\r\n    } catch (err) {\r\n      return this.$q.reject(err);\r\n    }\r\n\r\n    const responseTransform = result => {\r\n      return _.map(result, value => {\r\n        return { text: value };\r\n      });\r\n    };\r\n\r\n    const metricsRegex = /metrics\\((.*)\\)/;\r\n    const tagNamesRegex = /tag_names\\((.*)\\)/;\r\n    const tagValuesRegex = /tag_values\\((.*?),\\s?(.*)\\)/;\r\n    const tagNamesSuggestRegex = /suggest_tagk\\((.*)\\)/;\r\n    const tagValuesSuggestRegex = /suggest_tagv\\((.*)\\)/;\r\n\r\n    const metricsQuery = interpolated.match(metricsRegex);\r\n    if (metricsQuery) {\r\n      return this._performSuggestQuery(metricsQuery[1], 'metrics').then(responseTransform);\r\n    }\r\n\r\n    const tagNamesQuery = interpolated.match(tagNamesRegex);\r\n    if (tagNamesQuery) {\r\n      return this._performMetricKeyLookup(tagNamesQuery[1]).then(responseTransform);\r\n    }\r\n\r\n    const tagValuesQuery = interpolated.match(tagValuesRegex);\r\n    if (tagValuesQuery) {\r\n      return this._performMetricKeyValueLookup(tagValuesQuery[1], tagValuesQuery[2]).then(responseTransform);\r\n    }\r\n\r\n    const tagNamesSuggestQuery = interpolated.match(tagNamesSuggestRegex);\r\n    if (tagNamesSuggestQuery) {\r\n      return this._performSuggestQuery(tagNamesSuggestQuery[1], 'tagk').then(responseTransform);\r\n    }\r\n\r\n    const tagValuesSuggestQuery = interpolated.match(tagValuesSuggestRegex);\r\n    if (tagValuesSuggestQuery) {\r\n      return this._performSuggestQuery(tagValuesSuggestQuery[1], 'tagv').then(responseTransform);\r\n    }\r\n\r\n    return this.$q.when([]);\r\n  }\r\n\r\n  testDatasource() {\r\n    return this._performSuggestQuery('cpu', 'metrics').then(() => {\r\n      return { status: 'success', message: 'Data source is working' };\r\n    });\r\n  }\r\n\r\n  getAggregators() {\r\n    if (this.aggregatorsPromise) {\r\n      return this.aggregatorsPromise;\r\n    }\r\n\r\n    this.aggregatorsPromise = this._get('/api/aggregators').then(result => {\r\n      if (result.data && _.isArray(result.data)) {\r\n        return result.data.sort();\r\n      }\r\n      return [];\r\n    });\r\n    return this.aggregatorsPromise;\r\n  }\r\n\r\n  getFilterTypes() {\r\n    if (this.filterTypesPromise) {\r\n      return this.filterTypesPromise;\r\n    }\r\n\r\n    this.filterTypesPromise = this._get('/api/config/filters').then(result => {\r\n      if (result.data) {\r\n        return Object.keys(result.data).sort();\r\n      }\r\n      return [];\r\n    });\r\n    return this.filterTypesPromise;\r\n  }\r\n\r\n  transformMetricData(md, groupByTags, target, options, tsdbResolution) {\r\n    const metricLabel = this.createMetricLabel(md, target, groupByTags, options);\r\n    const dps = [];\r\n\r\n    // TSDB returns datapoints has a hash of ts => value.\r\n    // Can't use _.pairs(invert()) because it stringifies keys/values\r\n    _.each(md.dps, (v, k) => {\r\n      if (tsdbResolution === 2) {\r\n        dps.push([v, k * 1]);\r\n      } else {\r\n        dps.push([v, k * 1000]);\r\n      }\r\n    });\r\n\r\n    return { target: metricLabel, datapoints: dps };\r\n  }\r\n\r\n  createMetricLabel(md, target, groupByTags, options) {\r\n    if (target.alias) {\r\n      const scopedVars = _.clone(options.scopedVars || {});\r\n      _.each(md.tags, (value, key) => {\r\n        scopedVars['tag_' + key] = { value: value };\r\n      });\r\n      return this.templateSrv.replace(target.alias, scopedVars);\r\n    }\r\n\r\n    let label = md.metric;\r\n    const tagData = [];\r\n\r\n    if (!_.isEmpty(md.tags)) {\r\n      _.each(_.toPairs(md.tags), tag => {\r\n        if (_.has(groupByTags, tag[0])) {\r\n          tagData.push(tag[0] + '=' + tag[1]);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (!_.isEmpty(tagData)) {\r\n      label += '{' + tagData.join(', ') + '}';\r\n    }\r\n\r\n    return label;\r\n  }\r\n\r\n  convertTargetToQuery(target, options, tsdbVersion) {\r\n    if (!target.metric || target.hide) {\r\n      return null;\r\n    }\r\n\r\n    const query: any = {\r\n      metric: this.templateSrv.replace(target.metric, options.scopedVars, 'pipe'),\r\n      aggregator: 'avg',\r\n    };\r\n\r\n    if (target.aggregator) {\r\n      query.aggregator = this.templateSrv.replace(target.aggregator);\r\n    }\r\n\r\n    if (target.shouldComputeRate) {\r\n      query.rate = true;\r\n      query.rateOptions = {\r\n        counter: !!target.isCounter,\r\n      };\r\n\r\n      if (target.counterMax && target.counterMax.length) {\r\n        query.rateOptions.counterMax = parseInt(target.counterMax, 10);\r\n      }\r\n\r\n      if (target.counterResetValue && target.counterResetValue.length) {\r\n        query.rateOptions.resetValue = parseInt(target.counterResetValue, 10);\r\n      }\r\n\r\n      if (tsdbVersion >= 2) {\r\n        query.rateOptions.dropResets =\r\n          !query.rateOptions.counterMax && (!query.rateOptions.ResetValue || query.rateOptions.ResetValue === 0);\r\n      }\r\n    }\r\n\r\n    if (!target.disableDownsampling) {\r\n      let interval = this.templateSrv.replace(target.downsampleInterval || options.interval);\r\n\r\n      if (interval.match(/\\.[0-9]+s/)) {\r\n        interval = parseFloat(interval) * 1000 + 'ms';\r\n      }\r\n\r\n      query.downsample = interval + '-' + target.downsampleAggregator;\r\n\r\n      if (target.downsampleFillPolicy && target.downsampleFillPolicy !== 'none') {\r\n        query.downsample += '-' + target.downsampleFillPolicy;\r\n      }\r\n    }\r\n\r\n    if (target.filters && target.filters.length > 0) {\r\n      query.filters = angular.copy(target.filters);\r\n      if (query.filters) {\r\n        for (const filterKey in query.filters) {\r\n          query.filters[filterKey].filter = this.templateSrv.replace(\r\n            query.filters[filterKey].filter,\r\n            options.scopedVars,\r\n            'pipe'\r\n          );\r\n        }\r\n      }\r\n    } else {\r\n      query.tags = angular.copy(target.tags);\r\n      if (query.tags) {\r\n        for (const tagKey in query.tags) {\r\n          query.tags[tagKey] = this.templateSrv.replace(query.tags[tagKey], options.scopedVars, 'pipe');\r\n        }\r\n      }\r\n    }\r\n\r\n    if (target.explicitTags) {\r\n      query.explicitTags = true;\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  mapMetricsToTargets(metrics, options, tsdbVersion) {\r\n    let interpolatedTagValue, arrTagV;\r\n    return _.map(metrics, metricData => {\r\n      if (tsdbVersion === 3) {\r\n        return metricData.query.index;\r\n      } else {\r\n        return _.findIndex(options.targets, target => {\r\n          if (target.filters && target.filters.length > 0) {\r\n            return target.metric === metricData.metric;\r\n          } else {\r\n            return (\r\n              target.metric === metricData.metric &&\r\n              _.every(target.tags, (tagV, tagK) => {\r\n                interpolatedTagValue = this.templateSrv.replace(tagV, options.scopedVars, 'pipe');\r\n                arrTagV = interpolatedTagValue.split('|');\r\n                return _.includes(arrTagV, metricData.tags[tagK]) || interpolatedTagValue === '*';\r\n              })\r\n            );\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  convertToTSDBTime(date, roundUp) {\r\n    if (date === 'now') {\r\n      return null;\r\n    }\r\n\r\n    date = dateMath.parse(date, roundUp);\r\n    return date.valueOf();\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\n\r\nexport class OpenTsQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n  aggregators: any;\r\n  fillPolicies: any;\r\n  filterTypes: any;\r\n  tsdbVersion: any;\r\n  aggregator: any;\r\n  downsampleInterval: any;\r\n  downsampleAggregator: any;\r\n  downsampleFillPolicy: any;\r\n  errors: any;\r\n  suggestMetrics: any;\r\n  suggestTagKeys: any;\r\n  suggestTagValues: any;\r\n  addTagMode: boolean;\r\n  addFilterMode: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector) {\r\n    super($scope, $injector);\r\n\r\n    this.errors = this.validateTarget();\r\n    this.aggregators = ['avg', 'sum', 'min', 'max', 'dev', 'zimsum', 'mimmin', 'mimmax'];\r\n    this.fillPolicies = ['none', 'nan', 'null', 'zero'];\r\n    this.filterTypes = [\r\n      'wildcard',\r\n      'iliteral_or',\r\n      'not_iliteral_or',\r\n      'not_literal_or',\r\n      'iwildcard',\r\n      'literal_or',\r\n      'regexp',\r\n    ];\r\n\r\n    this.tsdbVersion = this.datasource.tsdbVersion;\r\n\r\n    if (!this.target.aggregator) {\r\n      this.target.aggregator = 'sum';\r\n    }\r\n\r\n    if (!this.target.downsampleAggregator) {\r\n      this.target.downsampleAggregator = 'avg';\r\n    }\r\n\r\n    if (!this.target.downsampleFillPolicy) {\r\n      this.target.downsampleFillPolicy = 'none';\r\n    }\r\n\r\n    this.datasource.getAggregators().then(aggs => {\r\n      if (aggs.length !== 0) {\r\n        this.aggregators = aggs;\r\n      }\r\n    });\r\n\r\n    this.datasource.getFilterTypes().then(filterTypes => {\r\n      if (filterTypes.length !== 0) {\r\n        this.filterTypes = filterTypes;\r\n      }\r\n    });\r\n\r\n    // needs to be defined here as it is called from typeahead\r\n    this.suggestMetrics = (query, callback) => {\r\n      this.datasource\r\n        .metricFindQuery('metrics(' + query + ')')\r\n        .then(this.getTextValues)\r\n        .then(callback);\r\n    };\r\n\r\n    this.suggestTagKeys = (query, callback) => {\r\n      this.datasource.suggestTagKeys(this.target.metric).then(callback);\r\n    };\r\n\r\n    this.suggestTagValues = (query, callback) => {\r\n      this.datasource\r\n        .metricFindQuery('suggest_tagv(' + query + ')')\r\n        .then(this.getTextValues)\r\n        .then(callback);\r\n    };\r\n  }\r\n\r\n  targetBlur() {\r\n    this.errors = this.validateTarget();\r\n    this.refresh();\r\n  }\r\n\r\n  getTextValues(metricFindResult) {\r\n    return _.map(metricFindResult, value => {\r\n      return value.text;\r\n    });\r\n  }\r\n\r\n  addTag() {\r\n    if (this.target.filters && this.target.filters.length > 0) {\r\n      this.errors.tags = 'Please remove filters to use tags, tags and filters are mutually exclusive.';\r\n    }\r\n\r\n    if (!this.addTagMode) {\r\n      this.addTagMode = true;\r\n      return;\r\n    }\r\n\r\n    if (!this.target.tags) {\r\n      this.target.tags = {};\r\n    }\r\n\r\n    this.errors = this.validateTarget();\r\n\r\n    if (!this.errors.tags) {\r\n      this.target.tags[this.target.currentTagKey] = this.target.currentTagValue;\r\n      this.target.currentTagKey = '';\r\n      this.target.currentTagValue = '';\r\n      this.targetBlur();\r\n    }\r\n\r\n    this.addTagMode = false;\r\n  }\r\n\r\n  removeTag(key) {\r\n    delete this.target.tags[key];\r\n    this.targetBlur();\r\n  }\r\n\r\n  editTag(key, value) {\r\n    this.removeTag(key);\r\n    this.target.currentTagKey = key;\r\n    this.target.currentTagValue = value;\r\n    this.addTag();\r\n  }\r\n\r\n  closeAddTagMode() {\r\n    this.addTagMode = false;\r\n    return;\r\n  }\r\n\r\n  addFilter() {\r\n    if (this.target.tags && _.size(this.target.tags) > 0) {\r\n      this.errors.filters = 'Please remove tags to use filters, tags and filters are mutually exclusive.';\r\n    }\r\n\r\n    if (!this.addFilterMode) {\r\n      this.addFilterMode = true;\r\n      return;\r\n    }\r\n\r\n    if (!this.target.filters) {\r\n      this.target.filters = [];\r\n    }\r\n\r\n    if (!this.target.currentFilterType) {\r\n      this.target.currentFilterType = 'iliteral_or';\r\n    }\r\n\r\n    if (!this.target.currentFilterGroupBy) {\r\n      this.target.currentFilterGroupBy = false;\r\n    }\r\n\r\n    this.errors = this.validateTarget();\r\n\r\n    if (!this.errors.filters) {\r\n      const currentFilter = {\r\n        type: this.target.currentFilterType,\r\n        tagk: this.target.currentFilterKey,\r\n        filter: this.target.currentFilterValue,\r\n        groupBy: this.target.currentFilterGroupBy,\r\n      };\r\n      this.target.filters.push(currentFilter);\r\n      this.target.currentFilterType = 'literal_or';\r\n      this.target.currentFilterKey = '';\r\n      this.target.currentFilterValue = '';\r\n      this.target.currentFilterGroupBy = false;\r\n      this.targetBlur();\r\n    }\r\n\r\n    this.addFilterMode = false;\r\n  }\r\n\r\n  removeFilter(index) {\r\n    this.target.filters.splice(index, 1);\r\n    this.targetBlur();\r\n  }\r\n\r\n  editFilter(fil, index) {\r\n    this.removeFilter(index);\r\n    this.target.currentFilterKey = fil.tagk;\r\n    this.target.currentFilterValue = fil.filter;\r\n    this.target.currentFilterType = fil.type;\r\n    this.target.currentFilterGroupBy = fil.groupBy;\r\n    this.addFilter();\r\n  }\r\n\r\n  closeAddFilterMode() {\r\n    this.addFilterMode = false;\r\n    return;\r\n  }\r\n\r\n  validateTarget() {\r\n    const errs: any = {};\r\n\r\n    if (this.target.shouldDownsample) {\r\n      try {\r\n        if (this.target.downsampleInterval) {\r\n          kbn.describe_interval(this.target.downsampleInterval);\r\n        } else {\r\n          errs.downsampleInterval = \"You must supply a downsample interval (e.g. '1m' or '1h').\";\r\n        }\r\n      } catch (err) {\r\n        errs.downsampleInterval = err.message;\r\n      }\r\n    }\r\n\r\n    if (this.target.tags && _.has(this.target.tags, this.target.currentTagKey)) {\r\n      errs.tags = \"Duplicate tag key '\" + this.target.currentTagKey + \"'.\";\r\n    }\r\n\r\n    return errs;\r\n  }\r\n}\r\n","export class OpenTsConfigCtrl {\r\n  static templateUrl = 'public/app/plugins/datasource/opentsdb/partials/config.html';\r\n  current: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope) {\r\n    this.current.jsonData = this.current.jsonData || {};\r\n    this.current.jsonData.tsdbVersion = this.current.jsonData.tsdbVersion || 1;\r\n    this.current.jsonData.tsdbResolution = this.current.jsonData.tsdbResolution || 1;\r\n  }\r\n\r\n  tsdbVersions = [{ name: '<=2.1', value: 1 }, { name: '==2.2', value: 2 }, { name: '==2.3', value: 3 }];\r\n\r\n  tsdbResolutions = [{ name: 'second', value: 1 }, { name: 'millisecond', value: 2 }];\r\n}\r\n","import OpenTsDatasource from './datasource';\r\nimport { OpenTsQueryCtrl } from './query_ctrl';\r\nimport { OpenTsConfigCtrl } from './config_ctrl';\r\n\r\nclass AnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n}\r\n\r\nexport {\r\n  OpenTsDatasource as Datasource,\r\n  OpenTsQueryCtrl as QueryCtrl,\r\n  OpenTsConfigCtrl as ConfigCtrl,\r\n  AnnotationsQueryCtrl,\r\n};\r\n","import _ from 'lodash';\r\n\r\nclass GrafanaDatasource {\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private $q, private templateSrv) {}\r\n\r\n  query(options) {\r\n    return this.backendSrv\r\n      .get('/api/tsdb/testdata/random-walk', {\r\n        from: options.range.from.valueOf(),\r\n        to: options.range.to.valueOf(),\r\n        intervalMs: options.intervalMs,\r\n        maxDataPoints: options.maxDataPoints,\r\n      })\r\n      .then(res => {\r\n        const data = [];\r\n\r\n        if (res.results) {\r\n          _.forEach(res.results, queryRes => {\r\n            for (const series of queryRes.series) {\r\n              data.push({\r\n                target: series.name,\r\n                datapoints: series.points,\r\n              });\r\n            }\r\n          });\r\n        }\r\n\r\n        return { data: data };\r\n      });\r\n  }\r\n\r\n  metricFindQuery(options) {\r\n    return this.$q.when({ data: [] });\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    const params: any = {\r\n      from: options.range.from.valueOf(),\r\n      to: options.range.to.valueOf(),\r\n      limit: options.annotation.limit,\r\n      tags: options.annotation.tags,\r\n      matchAny: options.annotation.matchAny,\r\n    };\r\n\r\n    if (options.annotation.type === 'dashboard') {\r\n      // if no dashboard id yet return\r\n      if (!options.dashboard.id) {\r\n        return this.$q.when([]);\r\n      }\r\n      // filter by dashboard id\r\n      params.dashboardId = options.dashboard.id;\r\n      // remove tags filter if any\r\n      delete params.tags;\r\n    } else {\r\n      // require at least one tag\r\n      if (!_.isArray(options.annotation.tags) || options.annotation.tags.length === 0) {\r\n        return this.$q.when([]);\r\n      }\r\n      const tags = [];\r\n      for (const t of params.tags) {\r\n        const renderedValues = this.templateSrv.replace(t, {}, 'pipe');\r\n        for (const tt of renderedValues.split('|')) {\r\n          tags.push(tt);\r\n        }\r\n      }\r\n      params.tags = tags;\r\n    }\r\n\r\n    return this.backendSrv.get('/api/annotations', params);\r\n  }\r\n}\r\n\r\nexport { GrafanaDatasource };\r\n","import { GrafanaDatasource } from './datasource';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\n\r\nclass GrafanaQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n}\r\n\r\nclass GrafanaAnnotationsQueryCtrl {\r\n  annotation: any;\r\n\r\n  types = [{ text: 'Dashboard', value: 'dashboard' }, { text: 'Tags', value: 'tags' }];\r\n\r\n  constructor() {\r\n    this.annotation.type = this.annotation.type || 'tags';\r\n    this.annotation.limit = this.annotation.limit || 100;\r\n  }\r\n\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n}\r\n\r\nexport {\r\n  GrafanaDatasource,\r\n  GrafanaDatasource as Datasource,\r\n  GrafanaQueryCtrl as QueryCtrl,\r\n  GrafanaAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","import _ from 'lodash';\r\nimport TableModel from 'app/core/table_model';\r\n\r\nexport default class InfluxSeries {\r\n  series: any;\r\n  alias: any;\r\n  annotation: any;\r\n\r\n  constructor(options) {\r\n    this.series = options.series;\r\n    this.alias = options.alias;\r\n    this.annotation = options.annotation;\r\n  }\r\n\r\n  getTimeSeries() {\r\n    const output = [];\r\n    let i, j;\r\n\r\n    if (this.series.length === 0) {\r\n      return output;\r\n    }\r\n\r\n    _.each(this.series, series => {\r\n      const columns = series.columns.length;\r\n      const tags = _.map(series.tags, (value, key) => {\r\n        return key + ': ' + value;\r\n      });\r\n\r\n      for (j = 1; j < columns; j++) {\r\n        let seriesName = series.name;\r\n        const columnName = series.columns[j];\r\n        if (columnName !== 'value') {\r\n          seriesName = seriesName + '.' + columnName;\r\n        }\r\n\r\n        if (this.alias) {\r\n          seriesName = this._getSeriesName(series, j);\r\n        } else if (series.tags) {\r\n          seriesName = seriesName + ' {' + tags.join(', ') + '}';\r\n        }\r\n\r\n        const datapoints = [];\r\n        if (series.values) {\r\n          for (i = 0; i < series.values.length; i++) {\r\n            datapoints[i] = [series.values[i][j], series.values[i][0]];\r\n          }\r\n        }\r\n\r\n        output.push({ target: seriesName, datapoints: datapoints });\r\n      }\r\n    });\r\n\r\n    return output;\r\n  }\r\n\r\n  _getSeriesName(series, index) {\r\n    const regex = /\\$(\\w+)|\\[\\[([\\s\\S]+?)\\]\\]/g;\r\n    const segments = series.name.split('.');\r\n\r\n    return this.alias.replace(regex, (match, g1, g2) => {\r\n      const group = g1 || g2;\r\n      const segIndex = parseInt(group, 10);\r\n\r\n      if (group === 'm' || group === 'measurement') {\r\n        return series.name;\r\n      }\r\n      if (group === 'col') {\r\n        return series.columns[index];\r\n      }\r\n      if (!isNaN(segIndex)) {\r\n        return segments[segIndex];\r\n      }\r\n      if (group.indexOf('tag_') !== 0) {\r\n        return match;\r\n      }\r\n\r\n      const tag = group.replace('tag_', '');\r\n      if (!series.tags) {\r\n        return match;\r\n      }\r\n      return series.tags[tag];\r\n    });\r\n  }\r\n\r\n  getAnnotations() {\r\n    const list = [];\r\n\r\n    _.each(this.series, series => {\r\n      let titleCol = null;\r\n      let timeCol = null;\r\n      const tagsCol = [];\r\n      let textCol = null;\r\n\r\n      _.each(series.columns, (column, index) => {\r\n        if (column === 'time') {\r\n          timeCol = index;\r\n          return;\r\n        }\r\n        if (column === 'sequence_number') {\r\n          return;\r\n        }\r\n        if (column === this.annotation.titleColumn) {\r\n          titleCol = index;\r\n          return;\r\n        }\r\n        if (_.includes((this.annotation.tagsColumn || '').replace(' ', '').split(','), column)) {\r\n          tagsCol.push(index);\r\n          return;\r\n        }\r\n        if (column === this.annotation.textColumn) {\r\n          textCol = index;\r\n          return;\r\n        }\r\n        // legacy case\r\n        if (!titleCol && textCol !== index) {\r\n          titleCol = index;\r\n        }\r\n      });\r\n\r\n      _.each(series.values, value => {\r\n        const data = {\r\n          annotation: this.annotation,\r\n          time: +new Date(value[timeCol]),\r\n          title: value[titleCol],\r\n          // Remove empty values, then split in different tags for comma separated values\r\n          tags: _.flatten(\r\n            tagsCol\r\n              .filter(t => {\r\n                return value[t];\r\n              })\r\n              .map(t => {\r\n                return value[t].split(',');\r\n              })\r\n          ),\r\n          text: value[textCol],\r\n        };\r\n\r\n        list.push(data);\r\n      });\r\n    });\r\n\r\n    return list;\r\n  }\r\n\r\n  getTable() {\r\n    const table = new TableModel();\r\n    let i, j;\r\n\r\n    if (this.series.length === 0) {\r\n      return table;\r\n    }\r\n\r\n    _.each(this.series, (series, seriesIndex) => {\r\n      if (seriesIndex === 0) {\r\n        j = 0;\r\n        // Check that the first column is indeed 'time'\r\n        if (series.columns[0] === 'time') {\r\n          // Push this now before the tags and with the right type\r\n          table.columns.push({ text: 'Time', type: 'time' });\r\n          j++;\r\n        }\r\n        _.each(_.keys(series.tags), key => {\r\n          table.columns.push({ text: key });\r\n        });\r\n        for (; j < series.columns.length; j++) {\r\n          table.columns.push({ text: series.columns[j] });\r\n        }\r\n      }\r\n\r\n      if (series.values) {\r\n        for (i = 0; i < series.values.length; i++) {\r\n          const values = series.values[i];\r\n          const reordered = [values[0]];\r\n          if (series.tags) {\r\n            for (const key in series.tags) {\r\n              if (series.tags.hasOwnProperty(key)) {\r\n                reordered.push(series.tags[key]);\r\n              }\r\n            }\r\n          }\r\n          for (j = 1; j < values.length; j++) {\r\n            reordered.push(values[j]);\r\n          }\r\n          table.rows.push(reordered);\r\n        }\r\n      }\r\n    });\r\n\r\n    return table;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport { QueryPartDef, QueryPart, functionRenderer, suffixRenderer } from 'app/core/components/query_part/query_part';\r\n\r\nconst index = [];\r\nconst categories = {\r\n  Aggregations: [],\r\n  Selectors: [],\r\n  Transformations: [],\r\n  Predictors: [],\r\n  Math: [],\r\n  Aliasing: [],\r\n  Fields: [],\r\n};\r\n\r\nfunction createPart(part): any {\r\n  const def = index[part.type];\r\n  if (!def) {\r\n    throw { message: 'Could not find query part ' + part.type };\r\n  }\r\n\r\n  return new QueryPart(part, def);\r\n}\r\n\r\nfunction register(options: any) {\r\n  index[options.type] = new QueryPartDef(options);\r\n  options.category.push(index[options.type]);\r\n}\r\n\r\nconst groupByTimeFunctions = [];\r\n\r\nfunction aliasRenderer(part, innerExpr) {\r\n  return innerExpr + ' AS ' + '\"' + part.params[0] + '\"';\r\n}\r\n\r\nfunction fieldRenderer(part, innerExpr) {\r\n  if (part.params[0] === '*') {\r\n    return '*';\r\n  }\r\n  return '\"' + part.params[0] + '\"';\r\n}\r\n\r\nfunction replaceAggregationAddStrategy(selectParts, partModel) {\r\n  // look for existing aggregation\r\n  for (let i = 0; i < selectParts.length; i++) {\r\n    const part = selectParts[i];\r\n    if (part.def.category === categories.Aggregations) {\r\n      if (part.def.type === partModel.def.type) {\r\n        return;\r\n      }\r\n      // count distinct is allowed\r\n      if (part.def.type === 'count' && partModel.def.type === 'distinct') {\r\n        break;\r\n      }\r\n      // remove next aggregation if distinct was replaced\r\n      if (part.def.type === 'distinct') {\r\n        const morePartsAvailable = selectParts.length >= i + 2;\r\n        if (partModel.def.type !== 'count' && morePartsAvailable) {\r\n          const nextPart = selectParts[i + 1];\r\n          if (nextPart.def.category === categories.Aggregations) {\r\n            selectParts.splice(i + 1, 1);\r\n          }\r\n        } else if (partModel.def.type === 'count') {\r\n          if (!morePartsAvailable || selectParts[i + 1].def.type !== 'count') {\r\n            selectParts.splice(i + 1, 0, partModel);\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      selectParts[i] = partModel;\r\n      return;\r\n    }\r\n    if (part.def.category === categories.Selectors) {\r\n      selectParts[i] = partModel;\r\n      return;\r\n    }\r\n  }\r\n\r\n  selectParts.splice(1, 0, partModel);\r\n}\r\n\r\nfunction addTransformationStrategy(selectParts, partModel) {\r\n  let i;\r\n  // look for index to add transformation\r\n  for (i = 0; i < selectParts.length; i++) {\r\n    const part = selectParts[i];\r\n    if (part.def.category === categories.Math || part.def.category === categories.Aliasing) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  selectParts.splice(i, 0, partModel);\r\n}\r\n\r\nfunction addMathStrategy(selectParts, partModel) {\r\n  const partCount = selectParts.length;\r\n  if (partCount > 0) {\r\n    // if last is math, replace it\r\n    if (selectParts[partCount - 1].def.type === 'math') {\r\n      selectParts[partCount - 1] = partModel;\r\n      return;\r\n    }\r\n    // if next to last is math, replace it\r\n    if (partCount > 1 && selectParts[partCount - 2].def.type === 'math') {\r\n      selectParts[partCount - 2] = partModel;\r\n      return;\r\n    } else if (selectParts[partCount - 1].def.type === 'alias') {\r\n      // if last is alias add it before\r\n      selectParts.splice(partCount - 1, 0, partModel);\r\n      return;\r\n    }\r\n  }\r\n  selectParts.push(partModel);\r\n}\r\n\r\nfunction addAliasStrategy(selectParts, partModel) {\r\n  const partCount = selectParts.length;\r\n  if (partCount > 0) {\r\n    // if last is alias, replace it\r\n    if (selectParts[partCount - 1].def.type === 'alias') {\r\n      selectParts[partCount - 1] = partModel;\r\n      return;\r\n    }\r\n  }\r\n  selectParts.push(partModel);\r\n}\r\n\r\nfunction addFieldStrategy(selectParts, partModel, query) {\r\n  // copy all parts\r\n  const parts = _.map(selectParts, (part: any) => {\r\n    return createPart({ type: part.def.type, params: _.clone(part.params) });\r\n  });\r\n\r\n  query.selectModels.push(parts);\r\n}\r\n\r\nregister({\r\n  type: 'field',\r\n  addStrategy: addFieldStrategy,\r\n  category: categories.Fields,\r\n  params: [{ type: 'field', dynamicLookup: true }],\r\n  defaultParams: ['value'],\r\n  renderer: fieldRenderer,\r\n});\r\n\r\n// Aggregations\r\nregister({\r\n  type: 'count',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Aggregations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'distinct',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Aggregations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'integral',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Aggregations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'mean',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Aggregations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'median',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Aggregations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'mode',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Aggregations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'sum',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Aggregations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\n// transformations\r\n\r\nregister({\r\n  type: 'derivative',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Transformations,\r\n  params: [\r\n    {\r\n      name: 'duration',\r\n      type: 'interval',\r\n      options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h'],\r\n    },\r\n  ],\r\n  defaultParams: ['10s'],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'spread',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Transformations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'non_negative_derivative',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Transformations,\r\n  params: [\r\n    {\r\n      name: 'duration',\r\n      type: 'interval',\r\n      options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h'],\r\n    },\r\n  ],\r\n  defaultParams: ['10s'],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'difference',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Transformations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'non_negative_difference',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Transformations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'moving_average',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Transformations,\r\n  params: [{ name: 'window', type: 'int', options: [5, 10, 20, 30, 40] }],\r\n  defaultParams: [10],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'cumulative_sum',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Transformations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'stddev',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Transformations,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'time',\r\n  category: groupByTimeFunctions,\r\n  params: [\r\n    {\r\n      name: 'interval',\r\n      type: 'time',\r\n      options: ['$__interval', '1s', '10s', '1m', '5m', '10m', '15m', '1h'],\r\n    },\r\n  ],\r\n  defaultParams: ['$__interval'],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'fill',\r\n  category: groupByTimeFunctions,\r\n  params: [\r\n    {\r\n      name: 'fill',\r\n      type: 'string',\r\n      options: ['none', 'null', '0', 'previous', 'linear'],\r\n    },\r\n  ],\r\n  defaultParams: ['null'],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'elapsed',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Transformations,\r\n  params: [\r\n    {\r\n      name: 'duration',\r\n      type: 'interval',\r\n      options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h'],\r\n    },\r\n  ],\r\n  defaultParams: ['10s'],\r\n  renderer: functionRenderer,\r\n});\r\n\r\n// predictions\r\nregister({\r\n  type: 'holt_winters',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Predictors,\r\n  params: [\r\n    { name: 'number', type: 'int', options: [5, 10, 20, 30, 40] },\r\n    { name: 'season', type: 'int', options: [0, 1, 2, 5, 10] },\r\n  ],\r\n  defaultParams: [10, 2],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'holt_winters_with_fit',\r\n  addStrategy: addTransformationStrategy,\r\n  category: categories.Predictors,\r\n  params: [\r\n    { name: 'number', type: 'int', options: [5, 10, 20, 30, 40] },\r\n    { name: 'season', type: 'int', options: [0, 1, 2, 5, 10] },\r\n  ],\r\n  defaultParams: [10, 2],\r\n  renderer: functionRenderer,\r\n});\r\n\r\n// Selectors\r\nregister({\r\n  type: 'bottom',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Selectors,\r\n  params: [{ name: 'count', type: 'int' }],\r\n  defaultParams: [3],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'first',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Selectors,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'last',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Selectors,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'max',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Selectors,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'min',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Selectors,\r\n  params: [],\r\n  defaultParams: [],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'percentile',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Selectors,\r\n  params: [{ name: 'nth', type: 'int' }],\r\n  defaultParams: [95],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'top',\r\n  addStrategy: replaceAggregationAddStrategy,\r\n  category: categories.Selectors,\r\n  params: [{ name: 'count', type: 'int' }],\r\n  defaultParams: [3],\r\n  renderer: functionRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'tag',\r\n  category: groupByTimeFunctions,\r\n  params: [{ name: 'tag', type: 'string', dynamicLookup: true }],\r\n  defaultParams: ['tag'],\r\n  renderer: fieldRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'math',\r\n  addStrategy: addMathStrategy,\r\n  category: categories.Math,\r\n  params: [{ name: 'expr', type: 'string' }],\r\n  defaultParams: [' / 100'],\r\n  renderer: suffixRenderer,\r\n});\r\n\r\nregister({\r\n  type: 'alias',\r\n  addStrategy: addAliasStrategy,\r\n  category: categories.Aliasing,\r\n  params: [{ name: 'name', type: 'string', quote: 'double' }],\r\n  defaultParams: ['alias'],\r\n  renderMode: 'suffix',\r\n  renderer: aliasRenderer,\r\n});\r\n\r\nexport default {\r\n  create: createPart,\r\n  getCategories: () => {\r\n    return categories;\r\n  },\r\n  replaceAggregationAdd: replaceAggregationAddStrategy,\r\n};\r\n","import _ from 'lodash';\r\nimport queryPart from './query_part';\r\nimport kbn from 'app/core/utils/kbn';\r\n\r\nexport default class InfluxQuery {\r\n  target: any;\r\n  selectModels: any[];\r\n  queryBuilder: any;\r\n  groupByParts: any;\r\n  templateSrv: any;\r\n  scopedVars: any;\r\n\r\n  /** @ngInject */\r\n  constructor(target, templateSrv?, scopedVars?) {\r\n    this.target = target;\r\n    this.templateSrv = templateSrv;\r\n    this.scopedVars = scopedVars;\r\n\r\n    target.policy = target.policy || 'default';\r\n    target.resultFormat = target.resultFormat || 'time_series';\r\n    target.orderByTime = target.orderByTime || 'ASC';\r\n    target.tags = target.tags || [];\r\n    target.groupBy = target.groupBy || [{ type: 'time', params: ['$__interval'] }, { type: 'fill', params: ['null'] }];\r\n    target.select = target.select || [[{ type: 'field', params: ['value'] }, { type: 'mean', params: [] }]];\r\n\r\n    this.updateProjection();\r\n  }\r\n\r\n  updateProjection() {\r\n    this.selectModels = _.map(this.target.select, (parts: any) => {\r\n      return _.map(parts, queryPart.create);\r\n    });\r\n    this.groupByParts = _.map(this.target.groupBy, queryPart.create);\r\n  }\r\n\r\n  updatePersistedParts() {\r\n    this.target.select = _.map(this.selectModels, selectParts => {\r\n      return _.map(selectParts, (part: any) => {\r\n        return { type: part.def.type, params: part.params };\r\n      });\r\n    });\r\n  }\r\n\r\n  hasGroupByTime() {\r\n    return _.find(this.target.groupBy, (g: any) => g.type === 'time');\r\n  }\r\n\r\n  hasFill() {\r\n    return _.find(this.target.groupBy, (g: any) => g.type === 'fill');\r\n  }\r\n\r\n  addGroupBy(value) {\r\n    const stringParts = value.match(/^(\\w+)\\((.*)\\)$/);\r\n    const typePart = stringParts[1];\r\n    const arg = stringParts[2];\r\n    const partModel = queryPart.create({ type: typePart, params: [arg] });\r\n    const partCount = this.target.groupBy.length;\r\n\r\n    if (partCount === 0) {\r\n      this.target.groupBy.push(partModel.part);\r\n    } else if (typePart === 'time') {\r\n      this.target.groupBy.splice(0, 0, partModel.part);\r\n    } else if (typePart === 'tag') {\r\n      if (this.target.groupBy[partCount - 1].type === 'fill') {\r\n        this.target.groupBy.splice(partCount - 1, 0, partModel.part);\r\n      } else {\r\n        this.target.groupBy.push(partModel.part);\r\n      }\r\n    } else {\r\n      this.target.groupBy.push(partModel.part);\r\n    }\r\n\r\n    this.updateProjection();\r\n  }\r\n\r\n  removeGroupByPart(part, index) {\r\n    const categories = queryPart.getCategories();\r\n\r\n    if (part.def.type === 'time') {\r\n      // remove fill\r\n      this.target.groupBy = _.filter(this.target.groupBy, (g: any) => g.type !== 'fill');\r\n      // remove aggregations\r\n      this.target.select = _.map(this.target.select, (s: any) => {\r\n        return _.filter(s, (part: any) => {\r\n          const partModel = queryPart.create(part);\r\n          if (partModel.def.category === categories.Aggregations) {\r\n            return false;\r\n          }\r\n          if (partModel.def.category === categories.Selectors) {\r\n            return false;\r\n          }\r\n          return true;\r\n        });\r\n      });\r\n    }\r\n\r\n    this.target.groupBy.splice(index, 1);\r\n    this.updateProjection();\r\n  }\r\n\r\n  removeSelect(index: number) {\r\n    this.target.select.splice(index, 1);\r\n    this.updateProjection();\r\n  }\r\n\r\n  removeSelectPart(selectParts, part) {\r\n    // if we remove the field remove the whole statement\r\n    if (part.def.type === 'field') {\r\n      if (this.selectModels.length > 1) {\r\n        const modelsIndex = _.indexOf(this.selectModels, selectParts);\r\n        this.selectModels.splice(modelsIndex, 1);\r\n      }\r\n    } else {\r\n      const partIndex = _.indexOf(selectParts, part);\r\n      selectParts.splice(partIndex, 1);\r\n    }\r\n\r\n    this.updatePersistedParts();\r\n  }\r\n\r\n  addSelectPart(selectParts, type) {\r\n    const partModel = queryPart.create({ type: type });\r\n    partModel.def.addStrategy(selectParts, partModel, this);\r\n    this.updatePersistedParts();\r\n  }\r\n\r\n  private renderTagCondition(tag, index, interpolate) {\r\n    let str = '';\r\n    let operator = tag.operator;\r\n    let value = tag.value;\r\n    if (index > 0) {\r\n      str = (tag.condition || 'AND') + ' ';\r\n    }\r\n\r\n    if (!operator) {\r\n      if (/^\\/.*\\/$/.test(value)) {\r\n        operator = '=~';\r\n      } else {\r\n        operator = '=';\r\n      }\r\n    }\r\n\r\n    // quote value unless regex\r\n    if (operator !== '=~' && operator !== '!~') {\r\n      if (interpolate) {\r\n        value = this.templateSrv.replace(value, this.scopedVars);\r\n      }\r\n      if (operator !== '>' && operator !== '<') {\r\n        value = \"'\" + value.replace(/\\\\/g, '\\\\\\\\') + \"'\";\r\n      }\r\n    } else if (interpolate) {\r\n      value = this.templateSrv.replace(value, this.scopedVars, 'regex');\r\n    }\r\n\r\n    return str + '\"' + tag.key + '\" ' + operator + ' ' + value;\r\n  }\r\n\r\n  getMeasurementAndPolicy(interpolate) {\r\n    let policy = this.target.policy;\r\n    let measurement = this.target.measurement || 'measurement';\r\n\r\n    if (!measurement.match('^/.*/$')) {\r\n      measurement = '\"' + measurement + '\"';\r\n    } else if (interpolate) {\r\n      measurement = this.templateSrv.replace(measurement, this.scopedVars, 'regex');\r\n    }\r\n\r\n    if (policy !== 'default') {\r\n      policy = '\"' + this.target.policy + '\".';\r\n    } else {\r\n      policy = '';\r\n    }\r\n\r\n    return policy + measurement;\r\n  }\r\n\r\n  interpolateQueryStr(value, variable, defaultFormatFn) {\r\n    // if no multi or include all do not regexEscape\r\n    if (!variable.multi && !variable.includeAll) {\r\n      return value;\r\n    }\r\n\r\n    if (typeof value === 'string') {\r\n      return kbn.regexEscape(value);\r\n    }\r\n\r\n    const escapedValues = _.map(value, kbn.regexEscape);\r\n    return '(' + escapedValues.join('|') + ')';\r\n  }\r\n\r\n  render(interpolate?) {\r\n    const target = this.target;\r\n\r\n    if (target.rawQuery) {\r\n      if (interpolate) {\r\n        return this.templateSrv.replace(target.query, this.scopedVars, this.interpolateQueryStr);\r\n      } else {\r\n        return target.query;\r\n      }\r\n    }\r\n\r\n    let query = 'SELECT ';\r\n    let i, y;\r\n    for (i = 0; i < this.selectModels.length; i++) {\r\n      const parts = this.selectModels[i];\r\n      let selectText = '';\r\n      for (y = 0; y < parts.length; y++) {\r\n        const part = parts[y];\r\n        selectText = part.render(selectText);\r\n      }\r\n\r\n      if (i > 0) {\r\n        query += ', ';\r\n      }\r\n      query += selectText;\r\n    }\r\n\r\n    query += ' FROM ' + this.getMeasurementAndPolicy(interpolate) + ' WHERE ';\r\n    const conditions = _.map(target.tags, (tag, index) => {\r\n      return this.renderTagCondition(tag, index, interpolate);\r\n    });\r\n\r\n    if (conditions.length > 0) {\r\n      query += '(' + conditions.join(' ') + ') AND ';\r\n    }\r\n\r\n    query += '$timeFilter';\r\n\r\n    let groupBySection = '';\r\n    for (i = 0; i < this.groupByParts.length; i++) {\r\n      const part = this.groupByParts[i];\r\n      if (i > 0) {\r\n        // for some reason fill has no separator\r\n        groupBySection += part.def.type === 'fill' ? ' ' : ', ';\r\n      }\r\n      groupBySection += part.render('');\r\n    }\r\n\r\n    if (groupBySection.length) {\r\n      query += ' GROUP BY ' + groupBySection;\r\n    }\r\n\r\n    if (target.fill) {\r\n      query += ' fill(' + target.fill + ')';\r\n    }\r\n\r\n    if (target.orderByTime === 'DESC') {\r\n      query += ' ORDER BY time DESC';\r\n    }\r\n\r\n    if (target.limit) {\r\n      query += ' LIMIT ' + target.limit;\r\n    }\r\n\r\n    if (target.slimit) {\r\n      query += ' SLIMIT ' + target.slimit;\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  renderAdhocFilters(filters) {\r\n    const conditions = _.map(filters, (tag, index) => {\r\n      return this.renderTagCondition(tag, index, false);\r\n    });\r\n    return conditions.join(' ');\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nfunction renderTagCondition(tag, index) {\r\n  let str = '';\r\n  let operator = tag.operator;\r\n  let value = tag.value;\r\n  if (index > 0) {\r\n    str = (tag.condition || 'AND') + ' ';\r\n  }\r\n\r\n  if (!operator) {\r\n    if (/^\\/.*\\/$/.test(tag.value)) {\r\n      operator = '=~';\r\n    } else {\r\n      operator = '=';\r\n    }\r\n  }\r\n\r\n  // quote value unless regex or number\r\n  if (operator !== '=~' && operator !== '!~' && isNaN(+value)) {\r\n    value = \"'\" + value + \"'\";\r\n  }\r\n\r\n  return str + '\"' + tag.key + '\" ' + operator + ' ' + value;\r\n}\r\n\r\nexport class InfluxQueryBuilder {\r\n  constructor(private target, private database?) {}\r\n\r\n  buildExploreQuery(type: string, withKey?: string, withMeasurementFilter?: string) {\r\n    let query;\r\n    let measurement;\r\n    let policy;\r\n\r\n    if (type === 'TAG_KEYS') {\r\n      query = 'SHOW TAG KEYS';\r\n      measurement = this.target.measurement;\r\n      policy = this.target.policy;\r\n    } else if (type === 'TAG_VALUES') {\r\n      query = 'SHOW TAG VALUES';\r\n      measurement = this.target.measurement;\r\n      policy = this.target.policy;\r\n    } else if (type === 'MEASUREMENTS') {\r\n      query = 'SHOW MEASUREMENTS';\r\n      if (withMeasurementFilter) {\r\n        query += ' WITH MEASUREMENT =~ /' + withMeasurementFilter + '/';\r\n      }\r\n    } else if (type === 'FIELDS') {\r\n      measurement = this.target.measurement;\r\n      policy = this.target.policy;\r\n\r\n      if (!measurement.match('^/.*/')) {\r\n        measurement = '\"' + measurement + '\"';\r\n\r\n        if (policy && policy !== 'default') {\r\n          policy = '\"' + policy + '\"';\r\n          measurement = policy + '.' + measurement;\r\n        }\r\n      }\r\n\r\n      return 'SHOW FIELD KEYS FROM ' + measurement;\r\n    } else if (type === 'RETENTION POLICIES') {\r\n      query = 'SHOW RETENTION POLICIES on \"' + this.database + '\"';\r\n      return query;\r\n    }\r\n\r\n    if (measurement) {\r\n      if (!measurement.match('^/.*/') && !measurement.match(/^merge\\(.*\\)/)) {\r\n        measurement = '\"' + measurement + '\"';\r\n      }\r\n\r\n      if (policy && policy !== 'default') {\r\n        policy = '\"' + policy + '\"';\r\n        measurement = policy + '.' + measurement;\r\n      }\r\n\r\n      query += ' FROM ' + measurement;\r\n    }\r\n\r\n    if (withKey) {\r\n      query += ' WITH KEY = \"' + withKey + '\"';\r\n    }\r\n\r\n    if (this.target.tags && this.target.tags.length > 0) {\r\n      const whereConditions = _.reduce(\r\n        this.target.tags,\r\n        (memo, tag) => {\r\n          // do not add a condition for the key we want to explore for\r\n          if (tag.key === withKey) {\r\n            return memo;\r\n          }\r\n          memo.push(renderTagCondition(tag, memo.length));\r\n          return memo;\r\n        },\r\n        []\r\n      );\r\n\r\n      if (whereConditions.length > 0) {\r\n        query += ' WHERE ' + whereConditions.join(' ');\r\n      }\r\n    }\r\n    if (type === 'MEASUREMENTS') {\r\n      query += ' LIMIT 100';\r\n      //Solve issue #2524 by limiting the number of measurements returned\r\n      //LIMIT must be after WITH MEASUREMENT and WHERE clauses\r\n      //This also could be used for TAG KEYS and TAG VALUES, if desired\r\n    }\r\n    return query;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport default class ResponseParser {\r\n  parse(query, results) {\r\n    if (!results || results.results.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const influxResults = results.results[0];\r\n    if (!influxResults.series) {\r\n      return [];\r\n    }\r\n\r\n    const normalizedQuery = query.toLowerCase();\r\n    const isValueFirst =\r\n      normalizedQuery.indexOf('show field keys') >= 0 || normalizedQuery.indexOf('show retention policies') >= 0;\r\n\r\n    const res = {};\r\n    _.each(influxResults.series, serie => {\r\n      _.each(serie.values, value => {\r\n        if (_.isArray(value)) {\r\n          // In general, there are 2 possible shapes for the returned value.\r\n          // The first one is a two-element array,\r\n          // where the first element is somewhat a metadata value:\r\n          // the tag name for SHOW TAG VALUES queries,\r\n          // the time field for SELECT queries, etc.\r\n          // The second shape is an one-element array,\r\n          // that is containing an immediate value.\r\n          // For example, SHOW FIELD KEYS queries return such shape.\r\n          // Note, pre-0.11 versions return\r\n          // the second shape for SHOW TAG VALUES queries\r\n          // (while the newer versions—first).\r\n\r\n          if (isValueFirst) {\r\n            addUnique(res, value[0]);\r\n          } else if (value[1] !== undefined) {\r\n            addUnique(res, value[1]);\r\n          } else {\r\n            addUnique(res, value[0]);\r\n          }\r\n        } else {\r\n          addUnique(res, value);\r\n        }\r\n      });\r\n    });\r\n\r\n    return _.map(res, value => {\r\n      return { text: value.toString() };\r\n    });\r\n  }\r\n}\r\n\r\nfunction addUnique(arr, value) {\r\n  arr[value] = value;\r\n}\r\n","import _ from 'lodash';\r\n\r\nimport * as dateMath from 'app/core/utils/datemath';\r\nimport InfluxSeries from './influx_series';\r\nimport InfluxQuery from './influx_query';\r\nimport ResponseParser from './response_parser';\r\nimport { InfluxQueryBuilder } from './query_builder';\r\n\r\nexport default class InfluxDatasource {\r\n  type: string;\r\n  urls: any;\r\n  username: string;\r\n  password: string;\r\n  name: string;\r\n  database: any;\r\n  basicAuth: any;\r\n  withCredentials: any;\r\n  interval: any;\r\n  responseParser: any;\r\n\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private $q, private backendSrv, private templateSrv) {\r\n    this.type = 'influxdb';\r\n    this.urls = _.map(instanceSettings.url.split(','), url => {\r\n      return url.trim();\r\n    });\r\n\r\n    this.username = instanceSettings.username;\r\n    this.password = instanceSettings.password;\r\n    this.name = instanceSettings.name;\r\n    this.database = instanceSettings.database;\r\n    this.basicAuth = instanceSettings.basicAuth;\r\n    this.withCredentials = instanceSettings.withCredentials;\r\n    this.interval = (instanceSettings.jsonData || {}).timeInterval;\r\n    this.responseParser = new ResponseParser();\r\n  }\r\n\r\n  query(options) {\r\n    let timeFilter = this.getTimeFilter(options);\r\n    const scopedVars = options.scopedVars;\r\n    const targets = _.cloneDeep(options.targets);\r\n    const queryTargets = [];\r\n    let queryModel;\r\n    let i, y;\r\n\r\n    let allQueries = _.map(targets, target => {\r\n      if (target.hide) {\r\n        return '';\r\n      }\r\n\r\n      queryTargets.push(target);\r\n\r\n      // backward compatibility\r\n      scopedVars.interval = scopedVars.__interval;\r\n\r\n      queryModel = new InfluxQuery(target, this.templateSrv, scopedVars);\r\n      return queryModel.render(true);\r\n    }).reduce((acc, current) => {\r\n      if (current !== '') {\r\n        acc += ';' + current;\r\n      }\r\n      return acc;\r\n    });\r\n\r\n    if (allQueries === '') {\r\n      return this.$q.when({ data: [] });\r\n    }\r\n\r\n    // add global adhoc filters to timeFilter\r\n    const adhocFilters = this.templateSrv.getAdhocFilters(this.name);\r\n    if (adhocFilters.length > 0) {\r\n      timeFilter += ' AND ' + queryModel.renderAdhocFilters(adhocFilters);\r\n    }\r\n\r\n    // replace grafana variables\r\n    scopedVars.timeFilter = { value: timeFilter };\r\n\r\n    // replace templated variables\r\n    allQueries = this.templateSrv.replace(allQueries, scopedVars);\r\n\r\n    return this._seriesQuery(allQueries, options).then((data): any => {\r\n      if (!data || !data.results) {\r\n        return [];\r\n      }\r\n\r\n      const seriesList = [];\r\n      for (i = 0; i < data.results.length; i++) {\r\n        const result = data.results[i];\r\n        if (!result || !result.series) {\r\n          continue;\r\n        }\r\n\r\n        const target = queryTargets[i];\r\n        let alias = target.alias;\r\n        if (alias) {\r\n          alias = this.templateSrv.replace(target.alias, options.scopedVars);\r\n        }\r\n\r\n        const influxSeries = new InfluxSeries({\r\n          series: data.results[i].series,\r\n          alias: alias,\r\n        });\r\n\r\n        switch (target.resultFormat) {\r\n          case 'table': {\r\n            seriesList.push(influxSeries.getTable());\r\n            break;\r\n          }\r\n          default: {\r\n            const timeSeries = influxSeries.getTimeSeries();\r\n            for (y = 0; y < timeSeries.length; y++) {\r\n              seriesList.push(timeSeries[y]);\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return { data: seriesList };\r\n    });\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    if (!options.annotation.query) {\r\n      return this.$q.reject({\r\n        message: 'Query missing in annotation definition',\r\n      });\r\n    }\r\n\r\n    const timeFilter = this.getTimeFilter({ rangeRaw: options.rangeRaw });\r\n    let query = options.annotation.query.replace('$timeFilter', timeFilter);\r\n    query = this.templateSrv.replace(query, null, 'regex');\r\n\r\n    return this._seriesQuery(query, options).then(data => {\r\n      if (!data || !data.results || !data.results[0]) {\r\n        throw { message: 'No results in response from InfluxDB' };\r\n      }\r\n      return new InfluxSeries({\r\n        series: data.results[0].series,\r\n        annotation: options.annotation,\r\n      }).getAnnotations();\r\n    });\r\n  }\r\n\r\n  targetContainsTemplate(target) {\r\n    for (const group of target.groupBy) {\r\n      for (const param of group.params) {\r\n        if (this.templateSrv.variableExists(param)) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (const i in target.tags) {\r\n      if (this.templateSrv.variableExists(target.tags[i].value)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  metricFindQuery(query: string, options?: any) {\r\n    const interpolated = this.templateSrv.replace(query, null, 'regex');\r\n\r\n    return this._seriesQuery(interpolated, options).then(_.curry(this.responseParser.parse)(query));\r\n  }\r\n\r\n  getTagKeys(options) {\r\n    const queryBuilder = new InfluxQueryBuilder({ measurement: '', tags: [] }, this.database);\r\n    const query = queryBuilder.buildExploreQuery('TAG_KEYS');\r\n    return this.metricFindQuery(query, options);\r\n  }\r\n\r\n  getTagValues(options) {\r\n    const queryBuilder = new InfluxQueryBuilder({ measurement: '', tags: [] }, this.database);\r\n    const query = queryBuilder.buildExploreQuery('TAG_VALUES', options.key);\r\n    return this.metricFindQuery(query, options);\r\n  }\r\n\r\n  _seriesQuery(query: string, options?: any) {\r\n    if (!query) {\r\n      return this.$q.when({ results: [] });\r\n    }\r\n\r\n    if (options && options.range) {\r\n      const timeFilter = this.getTimeFilter({ rangeRaw: options.range });\r\n      query = query.replace('$timeFilter', timeFilter);\r\n    }\r\n\r\n    return this._influxRequest('GET', '/query', { q: query, epoch: 'ms' }, options);\r\n  }\r\n\r\n  serializeParams(params) {\r\n    if (!params) {\r\n      return '';\r\n    }\r\n\r\n    return _.reduce(\r\n      params,\r\n      (memo, value, key) => {\r\n        if (value === null || value === undefined) {\r\n          return memo;\r\n        }\r\n        memo.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\r\n        return memo;\r\n      },\r\n      []\r\n    ).join('&');\r\n  }\r\n\r\n  testDatasource() {\r\n    const queryBuilder = new InfluxQueryBuilder({ measurement: '', tags: [] }, this.database);\r\n    const query = queryBuilder.buildExploreQuery('RETENTION POLICIES');\r\n\r\n    return this._seriesQuery(query)\r\n      .then(res => {\r\n        const error = _.get(res, 'results[0].error');\r\n        if (error) {\r\n          return { status: 'error', message: error };\r\n        }\r\n        return { status: 'success', message: 'Data source is working' };\r\n      })\r\n      .catch(err => {\r\n        return { status: 'error', message: err.message };\r\n      });\r\n  }\r\n\r\n  _influxRequest(method: string, url: string, data: any, options?: any) {\r\n    const currentUrl = this.urls.shift();\r\n    this.urls.push(currentUrl);\r\n\r\n    const params: any = {};\r\n\r\n    if (this.username) {\r\n      params.u = this.username;\r\n      params.p = this.password;\r\n    }\r\n\r\n    if (options && options.database) {\r\n      params.db = options.database;\r\n    } else if (this.database) {\r\n      params.db = this.database;\r\n    }\r\n\r\n    if (method === 'GET') {\r\n      _.extend(params, data);\r\n      data = null;\r\n    }\r\n\r\n    const req: any = {\r\n      method: method,\r\n      url: currentUrl + url,\r\n      params: params,\r\n      data: data,\r\n      precision: 'ms',\r\n      inspect: { type: 'influxdb' },\r\n      paramSerializer: this.serializeParams,\r\n    };\r\n\r\n    req.headers = req.headers || {};\r\n    if (this.basicAuth || this.withCredentials) {\r\n      req.withCredentials = true;\r\n    }\r\n    if (this.basicAuth) {\r\n      req.headers.Authorization = this.basicAuth;\r\n    }\r\n\r\n    return this.backendSrv.datasourceRequest(req).then(\r\n      result => {\r\n        return result.data;\r\n      },\r\n      err => {\r\n        if (err.status !== 0 || err.status >= 300) {\r\n          if (err.data && err.data.error) {\r\n            throw {\r\n              message: 'InfluxDB Error: ' + err.data.error,\r\n              data: err.data,\r\n              config: err.config,\r\n            };\r\n          } else {\r\n            throw {\r\n              message: 'Network Error: ' + err.statusText + '(' + err.status + ')',\r\n              data: err.data,\r\n              config: err.config,\r\n            };\r\n          }\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  getTimeFilter(options) {\r\n    const from = this.getInfluxTime(options.rangeRaw.from, false);\r\n    const until = this.getInfluxTime(options.rangeRaw.to, true);\r\n    const fromIsAbsolute = from[from.length - 1] === 'ms';\r\n\r\n    if (until === 'now()' && !fromIsAbsolute) {\r\n      return 'time >= ' + from;\r\n    }\r\n\r\n    return 'time >= ' + from + ' and time <= ' + until;\r\n  }\r\n\r\n  getInfluxTime(date, roundUp) {\r\n    if (_.isString(date)) {\r\n      if (date === 'now') {\r\n        return 'now()';\r\n      }\r\n\r\n      const parts = /^now-(\\d+)([d|h|m|s])$/.exec(date);\r\n      if (parts) {\r\n        const amount = parseInt(parts[1], 10);\r\n        const unit = parts[2];\r\n        return 'now() - ' + amount + unit;\r\n      }\r\n      date = dateMath.parse(date, roundUp);\r\n    }\r\n\r\n    return date.valueOf() + 'ms';\r\n  }\r\n}\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport { InfluxQueryBuilder } from './query_builder';\r\nimport InfluxQuery from './influx_query';\r\nimport queryPart from './query_part';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\n\r\nexport class InfluxQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n\r\n  queryModel: InfluxQuery;\r\n  queryBuilder: any;\r\n  groupBySegment: any;\r\n  resultFormats: any[];\r\n  orderByTime: any[];\r\n  policySegment: any;\r\n  tagSegments: any[];\r\n  selectMenu: any;\r\n  measurementSegment: any;\r\n  removeTagFilterSegment: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private templateSrv, private $q, private uiSegmentSrv) {\r\n    super($scope, $injector);\r\n    this.target = this.target;\r\n    this.queryModel = new InfluxQuery(this.target, templateSrv, this.panel.scopedVars);\r\n    this.queryBuilder = new InfluxQueryBuilder(this.target, this.datasource.database);\r\n    this.groupBySegment = this.uiSegmentSrv.newPlusButton();\r\n    this.resultFormats = [{ text: 'Time series', value: 'time_series' }, { text: 'Table', value: 'table' }];\r\n    this.policySegment = uiSegmentSrv.newSegment(this.target.policy);\r\n\r\n    if (!this.target.measurement) {\r\n      this.measurementSegment = uiSegmentSrv.newSelectMeasurement();\r\n    } else {\r\n      this.measurementSegment = uiSegmentSrv.newSegment(this.target.measurement);\r\n    }\r\n\r\n    this.tagSegments = [];\r\n    for (const tag of this.target.tags) {\r\n      if (!tag.operator) {\r\n        if (/^\\/.*\\/$/.test(tag.value)) {\r\n          tag.operator = '=~';\r\n        } else {\r\n          tag.operator = '=';\r\n        }\r\n      }\r\n\r\n      if (tag.condition) {\r\n        this.tagSegments.push(uiSegmentSrv.newCondition(tag.condition));\r\n      }\r\n\r\n      this.tagSegments.push(uiSegmentSrv.newKey(tag.key));\r\n      this.tagSegments.push(uiSegmentSrv.newOperator(tag.operator));\r\n      this.tagSegments.push(uiSegmentSrv.newKeyValue(tag.value));\r\n    }\r\n\r\n    this.fixTagSegments();\r\n    this.buildSelectMenu();\r\n    this.removeTagFilterSegment = uiSegmentSrv.newSegment({\r\n      fake: true,\r\n      value: '-- remove tag filter --',\r\n    });\r\n  }\r\n\r\n  removeOrderByTime() {\r\n    this.target.orderByTime = 'ASC';\r\n  }\r\n\r\n  buildSelectMenu() {\r\n    const categories = queryPart.getCategories();\r\n    this.selectMenu = _.reduce(\r\n      categories,\r\n      (memo, cat, key) => {\r\n        const menu = {\r\n          text: key,\r\n          submenu: cat.map(item => {\r\n            return { text: item.type, value: item.type };\r\n          }),\r\n        };\r\n        memo.push(menu);\r\n        return memo;\r\n      },\r\n      []\r\n    );\r\n  }\r\n\r\n  getGroupByOptions() {\r\n    const query = this.queryBuilder.buildExploreQuery('TAG_KEYS');\r\n\r\n    return this.datasource\r\n      .metricFindQuery(query)\r\n      .then(tags => {\r\n        const options = [];\r\n        if (!this.queryModel.hasFill()) {\r\n          options.push(this.uiSegmentSrv.newSegment({ value: 'fill(null)' }));\r\n        }\r\n        if (!this.target.limit) {\r\n          options.push(this.uiSegmentSrv.newSegment({ value: 'LIMIT' }));\r\n        }\r\n        if (!this.target.slimit) {\r\n          options.push(this.uiSegmentSrv.newSegment({ value: 'SLIMIT' }));\r\n        }\r\n        if (this.target.orderByTime === 'ASC') {\r\n          options.push(this.uiSegmentSrv.newSegment({ value: 'ORDER BY time DESC' }));\r\n        }\r\n        if (!this.queryModel.hasGroupByTime()) {\r\n          options.push(this.uiSegmentSrv.newSegment({ value: 'time($interval)' }));\r\n        }\r\n        for (const tag of tags) {\r\n          options.push(this.uiSegmentSrv.newSegment({ value: 'tag(' + tag.text + ')' }));\r\n        }\r\n        return options;\r\n      })\r\n      .catch(this.handleQueryError.bind(this));\r\n  }\r\n\r\n  groupByAction() {\r\n    switch (this.groupBySegment.value) {\r\n      case 'LIMIT': {\r\n        this.target.limit = 10;\r\n        break;\r\n      }\r\n      case 'SLIMIT': {\r\n        this.target.slimit = 10;\r\n        break;\r\n      }\r\n      case 'ORDER BY time DESC': {\r\n        this.target.orderByTime = 'DESC';\r\n        break;\r\n      }\r\n      default: {\r\n        this.queryModel.addGroupBy(this.groupBySegment.value);\r\n      }\r\n    }\r\n\r\n    const plusButton = this.uiSegmentSrv.newPlusButton();\r\n    this.groupBySegment.value = plusButton.value;\r\n    this.groupBySegment.html = plusButton.html;\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  addSelectPart(selectParts, cat, subitem) {\r\n    this.queryModel.addSelectPart(selectParts, subitem.value);\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  handleSelectPartEvent(selectParts, part, evt) {\r\n    switch (evt.name) {\r\n      case 'get-param-options': {\r\n        const fieldsQuery = this.queryBuilder.buildExploreQuery('FIELDS');\r\n        return this.datasource\r\n          .metricFindQuery(fieldsQuery)\r\n          .then(this.transformToSegments(true))\r\n          .catch(this.handleQueryError.bind(this));\r\n      }\r\n      case 'part-param-changed': {\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'action': {\r\n        this.queryModel.removeSelectPart(selectParts, part);\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'get-part-actions': {\r\n        return this.$q.when([{ text: 'Remove', value: 'remove-part' }]);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleGroupByPartEvent(part, index, evt) {\r\n    switch (evt.name) {\r\n      case 'get-param-options': {\r\n        const tagsQuery = this.queryBuilder.buildExploreQuery('TAG_KEYS');\r\n        return this.datasource\r\n          .metricFindQuery(tagsQuery)\r\n          .then(this.transformToSegments(true))\r\n          .catch(this.handleQueryError.bind(this));\r\n      }\r\n      case 'part-param-changed': {\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'action': {\r\n        this.queryModel.removeGroupByPart(part, index);\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'get-part-actions': {\r\n        return this.$q.when([{ text: 'Remove', value: 'remove-part' }]);\r\n      }\r\n    }\r\n  }\r\n\r\n  fixTagSegments() {\r\n    const count = this.tagSegments.length;\r\n    const lastSegment = this.tagSegments[Math.max(count - 1, 0)];\r\n\r\n    if (!lastSegment || lastSegment.type !== 'plus-button') {\r\n      this.tagSegments.push(this.uiSegmentSrv.newPlusButton());\r\n    }\r\n  }\r\n\r\n  measurementChanged() {\r\n    this.target.measurement = this.measurementSegment.value;\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  getPolicySegments() {\r\n    const policiesQuery = this.queryBuilder.buildExploreQuery('RETENTION POLICIES');\r\n    return this.datasource\r\n      .metricFindQuery(policiesQuery)\r\n      .then(this.transformToSegments(false))\r\n      .catch(this.handleQueryError.bind(this));\r\n  }\r\n\r\n  policyChanged() {\r\n    this.target.policy = this.policySegment.value;\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  toggleEditorMode() {\r\n    try {\r\n      this.target.query = this.queryModel.render(false);\r\n    } catch (err) {\r\n      console.log('query render error');\r\n    }\r\n    this.target.rawQuery = !this.target.rawQuery;\r\n  }\r\n\r\n  getMeasurements(measurementFilter) {\r\n    const query = this.queryBuilder.buildExploreQuery('MEASUREMENTS', undefined, measurementFilter);\r\n    return this.datasource\r\n      .metricFindQuery(query)\r\n      .then(this.transformToSegments(true))\r\n      .catch(this.handleQueryError.bind(this));\r\n  }\r\n\r\n  handleQueryError(err) {\r\n    this.error = err.message || 'Failed to issue metric query';\r\n    return [];\r\n  }\r\n\r\n  transformToSegments(addTemplateVars) {\r\n    return results => {\r\n      const segments = _.map(results, segment => {\r\n        return this.uiSegmentSrv.newSegment({\r\n          value: segment.text,\r\n          expandable: segment.expandable,\r\n        });\r\n      });\r\n\r\n      if (addTemplateVars) {\r\n        for (const variable of this.templateSrv.variables) {\r\n          segments.unshift(\r\n            this.uiSegmentSrv.newSegment({\r\n              type: 'value',\r\n              value: '/^$' + variable.name + '$/',\r\n              expandable: true,\r\n            })\r\n          );\r\n        }\r\n      }\r\n\r\n      return segments;\r\n    };\r\n  }\r\n\r\n  getTagsOrValues(segment, index) {\r\n    if (segment.type === 'condition') {\r\n      return this.$q.when([this.uiSegmentSrv.newSegment('AND'), this.uiSegmentSrv.newSegment('OR')]);\r\n    }\r\n    if (segment.type === 'operator') {\r\n      const nextValue = this.tagSegments[index + 1].value;\r\n      if (/^\\/.*\\/$/.test(nextValue)) {\r\n        return this.$q.when(this.uiSegmentSrv.newOperators(['=~', '!~']));\r\n      } else {\r\n        return this.$q.when(this.uiSegmentSrv.newOperators(['=', '!=', '<>', '<', '>']));\r\n      }\r\n    }\r\n\r\n    let query, addTemplateVars;\r\n    if (segment.type === 'key' || segment.type === 'plus-button') {\r\n      query = this.queryBuilder.buildExploreQuery('TAG_KEYS');\r\n      addTemplateVars = false;\r\n    } else if (segment.type === 'value') {\r\n      query = this.queryBuilder.buildExploreQuery('TAG_VALUES', this.tagSegments[index - 2].value);\r\n      addTemplateVars = true;\r\n    }\r\n\r\n    return this.datasource\r\n      .metricFindQuery(query)\r\n      .then(this.transformToSegments(addTemplateVars))\r\n      .then(results => {\r\n        if (segment.type === 'key') {\r\n          results.splice(0, 0, angular.copy(this.removeTagFilterSegment));\r\n        }\r\n        return results;\r\n      })\r\n      .catch(this.handleQueryError.bind(this));\r\n  }\r\n\r\n  getFieldSegments() {\r\n    const fieldsQuery = this.queryBuilder.buildExploreQuery('FIELDS');\r\n    return this.datasource\r\n      .metricFindQuery(fieldsQuery)\r\n      .then(this.transformToSegments(false))\r\n      .catch(this.handleQueryError);\r\n  }\r\n\r\n  tagSegmentUpdated(segment, index) {\r\n    this.tagSegments[index] = segment;\r\n\r\n    // handle remove tag condition\r\n    if (segment.value === this.removeTagFilterSegment.value) {\r\n      this.tagSegments.splice(index, 3);\r\n      if (this.tagSegments.length === 0) {\r\n        this.tagSegments.push(this.uiSegmentSrv.newPlusButton());\r\n      } else if (this.tagSegments.length > 2) {\r\n        this.tagSegments.splice(Math.max(index - 1, 0), 1);\r\n        if (this.tagSegments[this.tagSegments.length - 1].type !== 'plus-button') {\r\n          this.tagSegments.push(this.uiSegmentSrv.newPlusButton());\r\n        }\r\n      }\r\n    } else {\r\n      if (segment.type === 'plus-button') {\r\n        if (index > 2) {\r\n          this.tagSegments.splice(index, 0, this.uiSegmentSrv.newCondition('AND'));\r\n        }\r\n        this.tagSegments.push(this.uiSegmentSrv.newOperator('='));\r\n        this.tagSegments.push(this.uiSegmentSrv.newFake('select tag value', 'value', 'query-segment-value'));\r\n        segment.type = 'key';\r\n        segment.cssClass = 'query-segment-key';\r\n      }\r\n\r\n      if (index + 1 === this.tagSegments.length) {\r\n        this.tagSegments.push(this.uiSegmentSrv.newPlusButton());\r\n      }\r\n    }\r\n\r\n    this.rebuildTargetTagConditions();\r\n  }\r\n\r\n  rebuildTargetTagConditions() {\r\n    const tags = [];\r\n    let tagIndex = 0;\r\n    let tagOperator = '';\r\n\r\n    _.each(this.tagSegments, (segment2, index) => {\r\n      if (segment2.type === 'key') {\r\n        if (tags.length === 0) {\r\n          tags.push({});\r\n        }\r\n        tags[tagIndex].key = segment2.value;\r\n      } else if (segment2.type === 'value') {\r\n        tagOperator = this.getTagValueOperator(segment2.value, tags[tagIndex].operator);\r\n        if (tagOperator) {\r\n          this.tagSegments[index - 1] = this.uiSegmentSrv.newOperator(tagOperator);\r\n          tags[tagIndex].operator = tagOperator;\r\n        }\r\n        tags[tagIndex].value = segment2.value;\r\n      } else if (segment2.type === 'condition') {\r\n        tags.push({ condition: segment2.value });\r\n        tagIndex += 1;\r\n      } else if (segment2.type === 'operator') {\r\n        tags[tagIndex].operator = segment2.value;\r\n      }\r\n    });\r\n\r\n    this.target.tags = tags;\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  getTagValueOperator(tagValue, tagOperator): string {\r\n    if (tagOperator !== '=~' && tagOperator !== '!~' && /^\\/.*\\/$/.test(tagValue)) {\r\n      return '=~';\r\n    } else if ((tagOperator === '=~' || tagOperator === '!~') && /^(?!\\/.*\\/$)/.test(tagValue)) {\r\n      return '=';\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getCollapsedText() {\r\n    return this.queryModel.render(false);\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nimport * as dateMath from 'app/core/utils/datemath';\r\n\r\nimport { processStreams } from './result_transformer';\r\n\r\nconst DEFAULT_LIMIT = 100;\r\n\r\nconst DEFAULT_QUERY_PARAMS = {\r\n  direction: 'BACKWARD',\r\n  limit: DEFAULT_LIMIT,\r\n  regexp: '',\r\n  query: '',\r\n};\r\n\r\nconst QUERY_REGEXP = /({\\w+=\"[^\"]+\"})?\\s*(\\w[^{]+)?\\s*({\\w+=\"[^\"]+\"})?/;\r\nexport function parseQuery(input: string) {\r\n  const match = input.match(QUERY_REGEXP);\r\n  let query = '';\r\n  let regexp = '';\r\n\r\n  if (match) {\r\n    if (match[1]) {\r\n      query = match[1];\r\n    }\r\n    if (match[2]) {\r\n      regexp = match[2].trim();\r\n    }\r\n    if (match[3]) {\r\n      if (match[1]) {\r\n        query = `${match[1].slice(0, -1)},${match[3].slice(1)}`;\r\n      } else {\r\n        query = match[3];\r\n      }\r\n    }\r\n  }\r\n\r\n  return { query, regexp };\r\n}\r\n\r\nfunction serializeParams(data: any) {\r\n  return Object.keys(data)\r\n    .map(k => {\r\n      const v = data[k];\r\n      return encodeURIComponent(k) + '=' + encodeURIComponent(v);\r\n    })\r\n    .join('&');\r\n}\r\n\r\nexport default class LoggingDatasource {\r\n  /** @ngInject */\r\n  constructor(private instanceSettings, private backendSrv, private templateSrv) {}\r\n\r\n  _request(apiUrl: string, data?, options?: any) {\r\n    const baseUrl = this.instanceSettings.url;\r\n    const params = data ? serializeParams(data) : '';\r\n    const url = `${baseUrl}${apiUrl}?${params}`;\r\n    const req = {\r\n      ...options,\r\n      url,\r\n    };\r\n    return this.backendSrv.datasourceRequest(req);\r\n  }\r\n\r\n  prepareQueryTarget(target, options) {\r\n    const interpolated = this.templateSrv.replace(target.expr);\r\n    const start = this.getTime(options.range.from, false);\r\n    const end = this.getTime(options.range.to, true);\r\n    return {\r\n      ...DEFAULT_QUERY_PARAMS,\r\n      ...parseQuery(interpolated),\r\n      start,\r\n      end,\r\n    };\r\n  }\r\n\r\n  query(options) {\r\n    const queryTargets = options.targets\r\n      .filter(target => target.expr)\r\n      .map(target => this.prepareQueryTarget(target, options));\r\n    if (queryTargets.length === 0) {\r\n      return Promise.resolve({ data: [] });\r\n    }\r\n\r\n    const queries = queryTargets.map(target => this._request('/api/prom/query', target));\r\n\r\n    return Promise.all(queries).then((results: any[]) => {\r\n      // Flatten streams from multiple queries\r\n      const allStreams = results.reduce((acc, response, i) => {\r\n        const streams = response.data.streams || [];\r\n        // Inject search for match highlighting\r\n        const search = queryTargets[i].regexp;\r\n        streams.forEach(s => {\r\n          s.search = search;\r\n        });\r\n        return [...acc, ...streams];\r\n      }, []);\r\n      const model = processStreams(allStreams, DEFAULT_LIMIT);\r\n      return { data: model };\r\n    });\r\n  }\r\n\r\n  metadataRequest(url) {\r\n    // HACK to get label values for {job=|}, will be replaced when implementing LoggingQueryField\r\n    const apiUrl = url.replace('v1', 'prom');\r\n    return this._request(apiUrl, { silent: true }).then(res => {\r\n      const data = { data: { data: res.data.values || [] } };\r\n      return data;\r\n    });\r\n  }\r\n\r\n  getTime(date, roundUp) {\r\n    if (_.isString(date)) {\r\n      date = dateMath.parse(date, roundUp);\r\n    }\r\n    return Math.ceil(date.valueOf() * 1e6);\r\n  }\r\n\r\n  testDatasource() {\r\n    return this._request('/api/prom/label')\r\n      .then(res => {\r\n        if (res && res.data && res.data.values && res.data.values.length > 0) {\r\n          return { status: 'success', message: 'Data source connected and labels found.' };\r\n        }\r\n        return {\r\n          status: 'error',\r\n          message: 'Data source connected, but no labels received. Verify that logging is configured properly.',\r\n        };\r\n      })\r\n      .catch(err => {\r\n        return { status: 'error', message: err.message };\r\n      });\r\n  }\r\n}\r\n","import InfluxDatasource from './datasource';\r\nimport { InfluxQueryCtrl } from './query_ctrl';\r\n\r\nclass InfluxConfigCtrl {\r\n  static templateUrl = 'partials/config.html';\r\n}\r\n\r\nclass InfluxAnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n}\r\n\r\nexport {\r\n  InfluxDatasource as Datasource,\r\n  InfluxQueryCtrl as QueryCtrl,\r\n  InfluxConfigCtrl as ConfigCtrl,\r\n  InfluxAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","export enum LogLevel {\r\n  crit = 'crit',\r\n  warn = 'warn',\r\n  err = 'error',\r\n  error = 'error',\r\n  info = 'info',\r\n  debug = 'debug',\r\n  trace = 'trace',\r\n}\r\n\r\nexport interface LogSearchMatch {\r\n  start: number;\r\n  length: number;\r\n  text: string;\r\n}\r\n\r\nexport interface LogRow {\r\n  key: string;\r\n  entry: string;\r\n  logLevel: LogLevel;\r\n  timestamp: string;\r\n  timeFromNow: string;\r\n  timeLocal: string;\r\n  searchWords?: string[];\r\n}\r\n\r\nexport interface LogsModel {\r\n  rows: LogRow[];\r\n}\r\n","import _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nimport { LogLevel, LogsModel, LogRow } from 'app/core/logs_model';\r\n\r\nexport function getLogLevel(line: string): LogLevel {\r\n  if (!line) {\r\n    return undefined;\r\n  }\r\n  let level: LogLevel;\r\n  Object.keys(LogLevel).forEach(key => {\r\n    if (!level) {\r\n      const regexp = new RegExp(`\\\\b${key}\\\\b`, 'i');\r\n      if (regexp.test(line)) {\r\n        level = LogLevel[key];\r\n      }\r\n    }\r\n  });\r\n  return level;\r\n}\r\n\r\nexport function processEntry(entry: { line: string; timestamp: string }, stream): LogRow {\r\n  const { line, timestamp } = entry;\r\n  const { labels } = stream;\r\n  const key = `EK${timestamp}${labels}`;\r\n  const time = moment(timestamp);\r\n  const timeFromNow = time.fromNow();\r\n  const timeLocal = time.format('YYYY-MM-DD HH:mm:ss');\r\n  const logLevel = getLogLevel(line);\r\n\r\n  return {\r\n    key,\r\n    logLevel,\r\n    timeFromNow,\r\n    timeLocal,\r\n    entry: line,\r\n    searchWords: [stream.search],\r\n    timestamp: timestamp,\r\n  };\r\n}\r\n\r\nexport function processStreams(streams, limit?: number): LogsModel {\r\n  const combinedEntries = streams.reduce((acc, stream) => {\r\n    return [...acc, ...stream.entries.map(entry => processEntry(entry, stream))];\r\n  }, []);\r\n  const sortedEntries = _.chain(combinedEntries)\r\n    .sortBy('timestamp')\r\n    .reverse()\r\n    .slice(0, limit || combinedEntries.length)\r\n    .value();\r\n  return { rows: sortedEntries };\r\n}\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\n\r\nclass MixedDatasource {\r\n  /** @ngInject */\r\n  constructor(private $q, private datasourceSrv) {}\r\n\r\n  query(options) {\r\n    const sets = _.groupBy(options.targets, 'datasource');\r\n    const promises = _.map(sets, targets => {\r\n      const dsName = targets[0].datasource;\r\n      if (dsName === '-- Mixed --') {\r\n        return this.$q([]);\r\n      }\r\n\r\n      return this.datasourceSrv.get(dsName).then(ds => {\r\n        const opt = angular.copy(options);\r\n        opt.targets = targets;\r\n        return ds.query(opt);\r\n      });\r\n    });\r\n\r\n    return this.$q.all(promises).then(results => {\r\n      return { data: _.flatten(_.map(results, 'data')) };\r\n    });\r\n  }\r\n}\r\n\r\nexport { MixedDatasource, MixedDatasource as Datasource };\r\n","import _ from 'lodash';\r\n\r\nexport default class ResponseParser {\r\n  constructor(private $q) {}\r\n\r\n  processQueryResult(res) {\r\n    const data = [];\r\n\r\n    if (!res.data.results) {\r\n      return { data: data };\r\n    }\r\n\r\n    for (const key in res.data.results) {\r\n      const queryRes = res.data.results[key];\r\n\r\n      if (queryRes.series) {\r\n        for (const series of queryRes.series) {\r\n          data.push({\r\n            target: series.name,\r\n            datapoints: series.points,\r\n            refId: queryRes.refId,\r\n            meta: queryRes.meta,\r\n          });\r\n        }\r\n      }\r\n\r\n      if (queryRes.tables) {\r\n        for (const table of queryRes.tables) {\r\n          table.type = 'table';\r\n          table.refId = queryRes.refId;\r\n          table.meta = queryRes.meta;\r\n          data.push(table);\r\n        }\r\n      }\r\n    }\r\n\r\n    return { data: data };\r\n  }\r\n\r\n  parseMetricFindQueryResult(refId, results) {\r\n    if (!results || results.data.length === 0 || results.data.results[refId].meta.rowCount === 0) {\r\n      return [];\r\n    }\r\n\r\n    const columns = results.data.results[refId].tables[0].columns;\r\n    const rows = results.data.results[refId].tables[0].rows;\r\n    const textColIndex = this.findColIndex(columns, '__text');\r\n    const valueColIndex = this.findColIndex(columns, '__value');\r\n\r\n    if (columns.length === 2 && textColIndex !== -1 && valueColIndex !== -1) {\r\n      return this.transformToKeyValueList(rows, textColIndex, valueColIndex);\r\n    }\r\n\r\n    return this.transformToSimpleList(rows);\r\n  }\r\n\r\n  transformToKeyValueList(rows, textColIndex, valueColIndex) {\r\n    const res = [];\r\n\r\n    for (let i = 0; i < rows.length; i++) {\r\n      if (!this.containsKey(res, rows[i][textColIndex])) {\r\n        res.push({\r\n          text: rows[i][textColIndex],\r\n          value: rows[i][valueColIndex],\r\n        });\r\n      }\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  transformToSimpleList(rows) {\r\n    const res = [];\r\n\r\n    for (let i = 0; i < rows.length; i++) {\r\n      for (let j = 0; j < rows[i].length; j++) {\r\n        const value = rows[i][j];\r\n        if (res.indexOf(value) === -1) {\r\n          res.push(value);\r\n        }\r\n      }\r\n    }\r\n\r\n    return _.map(res, value => {\r\n      return { text: value };\r\n    });\r\n  }\r\n\r\n  findColIndex(columns, colName) {\r\n    for (let i = 0; i < columns.length; i++) {\r\n      if (columns[i].text === colName) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  containsKey(res, key) {\r\n    for (let i = 0; i < res.length; i++) {\r\n      if (res[i].text === key) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  transformAnnotationResponse(options, data) {\r\n    const table = data.data.results[options.annotation.name].tables[0];\r\n\r\n    let timeColumnIndex = -1;\r\n    let textColumnIndex = -1;\r\n    let tagsColumnIndex = -1;\r\n\r\n    for (let i = 0; i < table.columns.length; i++) {\r\n      if (table.columns[i].text === 'time_sec' || table.columns[i].text === 'time') {\r\n        timeColumnIndex = i;\r\n      } else if (table.columns[i].text === 'title') {\r\n        return this.$q.reject({\r\n          message: 'The title column for annotations is deprecated, now only a column named text is returned',\r\n        });\r\n      } else if (table.columns[i].text === 'text') {\r\n        textColumnIndex = i;\r\n      } else if (table.columns[i].text === 'tags') {\r\n        tagsColumnIndex = i;\r\n      }\r\n    }\r\n\r\n    if (timeColumnIndex === -1) {\r\n      return this.$q.reject({\r\n        message: 'Missing mandatory time column (with time_sec column alias) in annotation query.',\r\n      });\r\n    }\r\n\r\n    const list = [];\r\n    for (let i = 0; i < table.rows.length; i++) {\r\n      const row = table.rows[i];\r\n      list.push({\r\n        annotation: options.annotation,\r\n        time: Math.floor(row[timeColumnIndex]),\r\n        text: row[textColumnIndex] ? row[textColumnIndex].toString() : '',\r\n        tags: row[tagsColumnIndex] ? row[tagsColumnIndex].trim().split(/\\s*,\\s*/) : [],\r\n      });\r\n    }\r\n\r\n    return list;\r\n  }\r\n}\r\n","import Datasource from './datasource';\r\n\r\nexport class LoggingConfigCtrl {\r\n  static templateUrl = 'partials/config.html';\r\n}\r\n\r\nexport { Datasource, LoggingConfigCtrl as ConfigCtrl };\r\n","import { MixedDatasource } from './datasource';\r\nexport { MixedDatasource, MixedDatasource as Datasource };\r\n","import _ from 'lodash';\r\nimport ResponseParser from './response_parser';\r\n\r\nexport class MysqlDatasource {\r\n  id: any;\r\n  name: any;\r\n  responseParser: ResponseParser;\r\n  interval: string;\r\n\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private backendSrv, private $q, private templateSrv) {\r\n    this.name = instanceSettings.name;\r\n    this.id = instanceSettings.id;\r\n    this.responseParser = new ResponseParser(this.$q);\r\n    this.interval = (instanceSettings.jsonData || {}).timeInterval;\r\n  }\r\n\r\n  interpolateVariable(value, variable) {\r\n    if (typeof value === 'string') {\r\n      if (variable.multi || variable.includeAll) {\r\n        return \"'\" + value.replace(/'/g, `''`) + \"'\";\r\n      } else {\r\n        return value;\r\n      }\r\n    }\r\n\r\n    if (typeof value === 'number') {\r\n      return value;\r\n    }\r\n\r\n    const quotedValues = _.map(value, val => {\r\n      if (typeof value === 'number') {\r\n        return value;\r\n      }\r\n\r\n      return \"'\" + val.replace(/'/g, `''`) + \"'\";\r\n    });\r\n    return quotedValues.join(',');\r\n  }\r\n\r\n  query(options) {\r\n    const queries = _.filter(options.targets, item => {\r\n      return item.hide !== true;\r\n    }).map(item => {\r\n      return {\r\n        refId: item.refId,\r\n        intervalMs: options.intervalMs,\r\n        maxDataPoints: options.maxDataPoints,\r\n        datasourceId: this.id,\r\n        rawSql: this.templateSrv.replace(item.rawSql, options.scopedVars, this.interpolateVariable),\r\n        format: item.format,\r\n      };\r\n    });\r\n\r\n    if (queries.length === 0) {\r\n      return this.$q.when({ data: [] });\r\n    }\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: {\r\n          from: options.range.from.valueOf().toString(),\r\n          to: options.range.to.valueOf().toString(),\r\n          queries: queries,\r\n        },\r\n      })\r\n      .then(this.responseParser.processQueryResult);\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    if (!options.annotation.rawQuery) {\r\n      return this.$q.reject({\r\n        message: 'Query missing in annotation definition',\r\n      });\r\n    }\r\n\r\n    const query = {\r\n      refId: options.annotation.name,\r\n      datasourceId: this.id,\r\n      rawSql: this.templateSrv.replace(options.annotation.rawQuery, options.scopedVars, this.interpolateVariable),\r\n      format: 'table',\r\n    };\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: {\r\n          from: options.range.from.valueOf().toString(),\r\n          to: options.range.to.valueOf().toString(),\r\n          queries: [query],\r\n        },\r\n      })\r\n      .then(data => this.responseParser.transformAnnotationResponse(options, data));\r\n  }\r\n\r\n  metricFindQuery(query, optionalOptions) {\r\n    let refId = 'tempvar';\r\n    if (optionalOptions && optionalOptions.variable && optionalOptions.variable.name) {\r\n      refId = optionalOptions.variable.name;\r\n    }\r\n\r\n    const interpolatedQuery = {\r\n      refId: refId,\r\n      datasourceId: this.id,\r\n      rawSql: this.templateSrv.replace(query, {}, this.interpolateVariable),\r\n      format: 'table',\r\n    };\r\n\r\n    const data = {\r\n      queries: [interpolatedQuery],\r\n    };\r\n\r\n    if (optionalOptions && optionalOptions.range && optionalOptions.range.from) {\r\n      data['from'] = optionalOptions.range.from.valueOf().toString();\r\n    }\r\n    if (optionalOptions && optionalOptions.range && optionalOptions.range.to) {\r\n      data['to'] = optionalOptions.range.to.valueOf().toString();\r\n    }\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: data,\r\n      })\r\n      .then(data => this.responseParser.parseMetricFindQueryResult(refId, data));\r\n  }\r\n\r\n  testDatasource() {\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: {\r\n          from: '5m',\r\n          to: 'now',\r\n          queries: [\r\n            {\r\n              refId: 'A',\r\n              intervalMs: 1,\r\n              maxDataPoints: 1,\r\n              datasourceId: this.id,\r\n              rawSql: 'SELECT 1',\r\n              format: 'table',\r\n            },\r\n          ],\r\n        },\r\n      })\r\n      .then(res => {\r\n        return { status: 'success', message: 'Database Connection OK' };\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        if (err.data && err.data.message) {\r\n          return { status: 'error', message: err.data.message };\r\n        } else {\r\n          return { status: 'error', message: err.status };\r\n        }\r\n      });\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\n\r\nexport interface MysqlQuery {\r\n  refId: string;\r\n  format: string;\r\n  alias: string;\r\n  rawSql: string;\r\n}\r\n\r\nexport interface QueryMeta {\r\n  sql: string;\r\n}\r\n\r\nconst defaultQuery = `SELECT\r\n  UNIX_TIMESTAMP(<time_column>) as time_sec,\r\n  <value column> as value,\r\n  <series name column> as metric\r\nFROM <table name>\r\nWHERE $__timeFilter(time_column)\r\nORDER BY <time_column> ASC\r\n`;\r\n\r\nexport class MysqlQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n\r\n  showLastQuerySQL: boolean;\r\n  formats: any[];\r\n  target: MysqlQuery;\r\n  lastQueryMeta: QueryMeta;\r\n  lastQueryError: string;\r\n  showHelp: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector) {\r\n    super($scope, $injector);\r\n\r\n    this.target.format = this.target.format || 'time_series';\r\n    this.target.alias = '';\r\n    this.formats = [{ text: 'Time series', value: 'time_series' }, { text: 'Table', value: 'table' }];\r\n\r\n    if (!this.target.rawSql) {\r\n      // special handling when in table panel\r\n      if (this.panelCtrl.panel.type === 'table') {\r\n        this.target.format = 'table';\r\n        this.target.rawSql = 'SELECT 1';\r\n      } else {\r\n        this.target.rawSql = defaultQuery;\r\n      }\r\n    }\r\n\r\n    this.panelCtrl.events.on('data-received', this.onDataReceived.bind(this), $scope);\r\n    this.panelCtrl.events.on('data-error', this.onDataError.bind(this), $scope);\r\n  }\r\n\r\n  onDataReceived(dataList) {\r\n    this.lastQueryMeta = null;\r\n    this.lastQueryError = null;\r\n\r\n    const anySeriesFromQuery = _.find(dataList, { refId: this.target.refId });\r\n    if (anySeriesFromQuery) {\r\n      this.lastQueryMeta = anySeriesFromQuery.meta;\r\n    }\r\n  }\r\n\r\n  onDataError(err) {\r\n    if (err.data && err.data.results) {\r\n      const queryRes = err.data.results[this.target.refId];\r\n      if (queryRes) {\r\n        this.lastQueryMeta = queryRes.meta;\r\n        this.lastQueryError = queryRes.error;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { MysqlDatasource } from './datasource';\r\nimport { MysqlQueryCtrl } from './query_ctrl';\r\n\r\nclass MysqlConfigCtrl {\r\n  static templateUrl = 'partials/config.html';\r\n}\r\n\r\nconst defaultQuery = `SELECT\r\n    UNIX_TIMESTAMP(<time_column>) as time_sec,\r\n    <text_column> as text,\r\n    <tags_column> as tags\r\n  FROM <table name>\r\n  WHERE $__timeFilter(time_column)\r\n  ORDER BY <time_column> ASC\r\n  LIMIT 100\r\n  `;\r\n\r\nclass MysqlAnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n\r\n  annotation: any;\r\n\r\n  /** @ngInject */\r\n  constructor() {\r\n    this.annotation.rawQuery = this.annotation.rawQuery || defaultQuery;\r\n  }\r\n}\r\n\r\nexport {\r\n  MysqlDatasource,\r\n  MysqlDatasource as Datasource,\r\n  MysqlQueryCtrl as QueryCtrl,\r\n  MysqlConfigCtrl as ConfigCtrl,\r\n  MysqlAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","import _ from 'lodash';\r\n\r\nexport default class ResponseParser {\r\n  constructor(private $q) {}\r\n\r\n  processQueryResult(res) {\r\n    const data = [];\r\n\r\n    if (!res.data.results) {\r\n      return { data: data };\r\n    }\r\n\r\n    for (const key in res.data.results) {\r\n      const queryRes = res.data.results[key];\r\n\r\n      if (queryRes.series) {\r\n        for (const series of queryRes.series) {\r\n          data.push({\r\n            target: series.name,\r\n            datapoints: series.points,\r\n            refId: queryRes.refId,\r\n            meta: queryRes.meta,\r\n          });\r\n        }\r\n      }\r\n\r\n      if (queryRes.tables) {\r\n        for (const table of queryRes.tables) {\r\n          table.type = 'table';\r\n          table.refId = queryRes.refId;\r\n          table.meta = queryRes.meta;\r\n          data.push(table);\r\n        }\r\n      }\r\n    }\r\n\r\n    return { data: data };\r\n  }\r\n\r\n  parseMetricFindQueryResult(refId, results) {\r\n    if (!results || results.data.length === 0 || results.data.results[refId].meta.rowCount === 0) {\r\n      return [];\r\n    }\r\n\r\n    const columns = results.data.results[refId].tables[0].columns;\r\n    const rows = results.data.results[refId].tables[0].rows;\r\n    const textColIndex = this.findColIndex(columns, '__text');\r\n    const valueColIndex = this.findColIndex(columns, '__value');\r\n\r\n    if (columns.length === 2 && textColIndex !== -1 && valueColIndex !== -1) {\r\n      return this.transformToKeyValueList(rows, textColIndex, valueColIndex);\r\n    }\r\n\r\n    return this.transformToSimpleList(rows);\r\n  }\r\n\r\n  transformToKeyValueList(rows, textColIndex, valueColIndex) {\r\n    const res = [];\r\n\r\n    for (let i = 0; i < rows.length; i++) {\r\n      if (!this.containsKey(res, rows[i][textColIndex])) {\r\n        res.push({\r\n          text: rows[i][textColIndex],\r\n          value: rows[i][valueColIndex],\r\n        });\r\n      }\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  transformToSimpleList(rows) {\r\n    const res = [];\r\n\r\n    for (let i = 0; i < rows.length; i++) {\r\n      for (let j = 0; j < rows[i].length; j++) {\r\n        const value = rows[i][j];\r\n        if (res.indexOf(value) === -1) {\r\n          res.push(value);\r\n        }\r\n      }\r\n    }\r\n\r\n    return _.map(res, value => {\r\n      return { text: value };\r\n    });\r\n  }\r\n\r\n  findColIndex(columns, colName) {\r\n    for (let i = 0; i < columns.length; i++) {\r\n      if (columns[i].text === colName) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  containsKey(res, key) {\r\n    for (let i = 0; i < res.length; i++) {\r\n      if (res[i].text === key) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  transformAnnotationResponse(options, data) {\r\n    const table = data.data.results[options.annotation.name].tables[0];\r\n\r\n    let timeColumnIndex = -1;\r\n    const titleColumnIndex = -1;\r\n    let textColumnIndex = -1;\r\n    let tagsColumnIndex = -1;\r\n\r\n    for (let i = 0; i < table.columns.length; i++) {\r\n      if (table.columns[i].text === 'time') {\r\n        timeColumnIndex = i;\r\n      } else if (table.columns[i].text === 'text') {\r\n        textColumnIndex = i;\r\n      } else if (table.columns[i].text === 'tags') {\r\n        tagsColumnIndex = i;\r\n      }\r\n    }\r\n\r\n    if (timeColumnIndex === -1) {\r\n      return this.$q.reject({\r\n        message: 'Missing mandatory time column in annotation query.',\r\n      });\r\n    }\r\n\r\n    const list = [];\r\n    for (let i = 0; i < table.rows.length; i++) {\r\n      const row = table.rows[i];\r\n      list.push({\r\n        annotation: options.annotation,\r\n        time: Math.floor(row[timeColumnIndex]),\r\n        title: row[titleColumnIndex],\r\n        text: row[textColumnIndex],\r\n        tags: row[tagsColumnIndex] ? row[tagsColumnIndex].trim().split(/\\s*,\\s*/) : [],\r\n      });\r\n    }\r\n\r\n    return list;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport default class PostgresQuery {\r\n  target: any;\r\n  templateSrv: any;\r\n  scopedVars: any;\r\n\r\n  /** @ngInject */\r\n  constructor(target, templateSrv?, scopedVars?) {\r\n    this.target = target;\r\n    this.templateSrv = templateSrv;\r\n    this.scopedVars = scopedVars;\r\n\r\n    target.format = target.format || 'time_series';\r\n    target.timeColumn = target.timeColumn || 'time';\r\n    target.metricColumn = target.metricColumn || 'none';\r\n\r\n    target.group = target.group || [];\r\n    target.where = target.where || [{ type: 'macro', name: '$__timeFilter', params: [] }];\r\n    target.select = target.select || [[{ type: 'column', params: ['value'] }]];\r\n\r\n    // handle pre query gui panels gracefully\r\n    if (!('rawQuery' in this.target)) {\r\n      if ('rawSql' in target) {\r\n        // pre query gui panel\r\n        target.rawQuery = true;\r\n      } else {\r\n        // new panel\r\n        target.rawQuery = false;\r\n      }\r\n    }\r\n\r\n    // give interpolateQueryStr access to this\r\n    this.interpolateQueryStr = this.interpolateQueryStr.bind(this);\r\n  }\r\n\r\n  // remove identifier quoting from identifier to use in metadata queries\r\n  unquoteIdentifier(value) {\r\n    if (value[0] === '\"' && value[value.length - 1] === '\"') {\r\n      return value.substring(1, value.length - 1).replace(/\"\"/g, '\"');\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n\r\n  quoteIdentifier(value) {\r\n    return '\"' + String(value).replace(/\"/g, '\"\"') + '\"';\r\n  }\r\n\r\n  quoteLiteral(value) {\r\n    return \"'\" + String(value).replace(/'/g, \"''\") + \"'\";\r\n  }\r\n\r\n  escapeLiteral(value) {\r\n    return String(value).replace(/'/g, \"''\");\r\n  }\r\n\r\n  hasTimeGroup() {\r\n    return _.find(this.target.group, (g: any) => g.type === 'time');\r\n  }\r\n\r\n  hasMetricColumn() {\r\n    return this.target.metricColumn !== 'none';\r\n  }\r\n\r\n  interpolateQueryStr(value, variable, defaultFormatFn) {\r\n    // if no multi or include all do not regexEscape\r\n    if (!variable.multi && !variable.includeAll) {\r\n      return this.escapeLiteral(value);\r\n    }\r\n\r\n    if (typeof value === 'string') {\r\n      return this.quoteLiteral(value);\r\n    }\r\n\r\n    const escapedValues = _.map(value, this.quoteLiteral);\r\n    return escapedValues.join(',');\r\n  }\r\n\r\n  render(interpolate?) {\r\n    const target = this.target;\r\n\r\n    // new query with no table set yet\r\n    if (!this.target.rawQuery && !('table' in this.target)) {\r\n      return '';\r\n    }\r\n\r\n    if (!target.rawQuery) {\r\n      target.rawSql = this.buildQuery();\r\n    }\r\n\r\n    if (interpolate) {\r\n      return this.templateSrv.replace(target.rawSql, this.scopedVars, this.interpolateQueryStr);\r\n    } else {\r\n      return target.rawSql;\r\n    }\r\n  }\r\n\r\n  hasUnixEpochTimecolumn() {\r\n    return ['int4', 'int8', 'float4', 'float8', 'numeric'].indexOf(this.target.timeColumnType) > -1;\r\n  }\r\n\r\n  buildTimeColumn(alias = true) {\r\n    const timeGroup = this.hasTimeGroup();\r\n    let query;\r\n    let macro = '$__timeGroup';\r\n\r\n    if (timeGroup) {\r\n      let args;\r\n      if (timeGroup.params.length > 1 && timeGroup.params[1] !== 'none') {\r\n        args = timeGroup.params.join(',');\r\n      } else {\r\n        args = timeGroup.params[0];\r\n      }\r\n      if (this.hasUnixEpochTimecolumn()) {\r\n        macro = '$__unixEpochGroup';\r\n      }\r\n      if (alias) {\r\n        macro += 'Alias';\r\n      }\r\n      query = macro + '(' + this.target.timeColumn + ',' + args + ')';\r\n    } else {\r\n      query = this.target.timeColumn;\r\n      if (alias) {\r\n        query += ' AS \"time\"';\r\n      }\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  buildMetricColumn() {\r\n    if (this.hasMetricColumn()) {\r\n      return this.target.metricColumn + ' AS metric';\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  buildValueColumns() {\r\n    let query = '';\r\n    for (const column of this.target.select) {\r\n      query += ',\\n  ' + this.buildValueColumn(column);\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  buildValueColumn(column) {\r\n    let query = '';\r\n\r\n    const columnName = _.find(column, (g: any) => g.type === 'column');\r\n    query = columnName.params[0];\r\n\r\n    const aggregate = _.find(column, (g: any) => g.type === 'aggregate' || g.type === 'percentile');\r\n    const windows = _.find(column, (g: any) => g.type === 'window' || g.type === 'moving_window');\r\n\r\n    if (aggregate) {\r\n      const func = aggregate.params[0];\r\n      switch (aggregate.type) {\r\n        case 'aggregate':\r\n          if (func === 'first' || func === 'last') {\r\n            query = func + '(' + query + ',' + this.target.timeColumn + ')';\r\n          } else {\r\n            query = func + '(' + query + ')';\r\n          }\r\n          break;\r\n        case 'percentile':\r\n          query = func + '(' + aggregate.params[1] + ') WITHIN GROUP (ORDER BY ' + query + ')';\r\n          break;\r\n      }\r\n    }\r\n\r\n    if (windows) {\r\n      const overParts = [];\r\n      if (this.hasMetricColumn()) {\r\n        overParts.push('PARTITION BY ' + this.target.metricColumn);\r\n      }\r\n      overParts.push('ORDER BY ' + this.buildTimeColumn(false));\r\n\r\n      const over = overParts.join(' ');\r\n      let curr: string;\r\n      let prev: string;\r\n      switch (windows.type) {\r\n        case 'window':\r\n          switch (windows.params[0]) {\r\n            case 'increase':\r\n              curr = query;\r\n              prev = 'lag(' + curr + ') OVER (' + over + ')';\r\n              query = '(CASE WHEN ' + curr + ' >= ' + prev + ' THEN ' + curr + ' - ' + prev;\r\n              query += ' WHEN ' + prev + ' IS NULL THEN NULL ELSE ' + curr + ' END)';\r\n              break;\r\n            case 'rate':\r\n              let timeColumn = this.target.timeColumn;\r\n              if (aggregate) {\r\n                timeColumn = 'min(' + timeColumn + ')';\r\n              }\r\n\r\n              curr = query;\r\n              prev = 'lag(' + curr + ') OVER (' + over + ')';\r\n              query = '(CASE WHEN ' + curr + ' >= ' + prev + ' THEN ' + curr + ' - ' + prev;\r\n              query += ' WHEN ' + prev + ' IS NULL THEN NULL ELSE ' + curr + ' END)';\r\n              query += '/extract(epoch from ' + timeColumn + ' - lag(' + timeColumn + ') OVER (' + over + '))';\r\n              break;\r\n            default:\r\n              query = windows.params[0] + '(' + query + ') OVER (' + over + ')';\r\n              break;\r\n          }\r\n          break;\r\n        case 'moving_window':\r\n          query = windows.params[0] + '(' + query + ') OVER (' + over + ' ROWS ' + windows.params[1] + ' PRECEDING)';\r\n          break;\r\n      }\r\n    }\r\n\r\n    const alias = _.find(column, (g: any) => g.type === 'alias');\r\n    if (alias) {\r\n      query += ' AS ' + this.quoteIdentifier(alias.params[0]);\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  buildWhereClause() {\r\n    let query = '';\r\n    const conditions = _.map(this.target.where, (tag, index) => {\r\n      switch (tag.type) {\r\n        case 'macro':\r\n          return tag.name + '(' + this.target.timeColumn + ')';\r\n          break;\r\n        case 'expression':\r\n          return tag.params.join(' ');\r\n          break;\r\n      }\r\n    });\r\n\r\n    if (conditions.length > 0) {\r\n      query = '\\nWHERE\\n  ' + conditions.join(' AND\\n  ');\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  buildGroupClause() {\r\n    let query = '';\r\n    let groupSection = '';\r\n\r\n    for (let i = 0; i < this.target.group.length; i++) {\r\n      const part = this.target.group[i];\r\n      if (i > 0) {\r\n        groupSection += ', ';\r\n      }\r\n      if (part.type === 'time') {\r\n        groupSection += '1';\r\n      } else {\r\n        groupSection += part.params[0];\r\n      }\r\n    }\r\n\r\n    if (groupSection.length) {\r\n      query = '\\nGROUP BY ' + groupSection;\r\n      if (this.hasMetricColumn()) {\r\n        query += ',2';\r\n      }\r\n    }\r\n    return query;\r\n  }\r\n\r\n  buildQuery() {\r\n    let query = 'SELECT';\r\n\r\n    query += '\\n  ' + this.buildTimeColumn();\r\n    if (this.hasMetricColumn()) {\r\n      query += ',\\n  ' + this.buildMetricColumn();\r\n    }\r\n    query += this.buildValueColumns();\r\n\r\n    query += '\\nFROM ' + this.target.table;\r\n\r\n    query += this.buildWhereClause();\r\n    query += this.buildGroupClause();\r\n\r\n    query += '\\nORDER BY 1';\r\n    if (this.hasMetricColumn()) {\r\n      query += ',2';\r\n    }\r\n\r\n    return query;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport ResponseParser from './response_parser';\r\nimport PostgresQuery from 'app/plugins/datasource/postgres/postgres_query';\r\n\r\nexport class PostgresDatasource {\r\n  id: any;\r\n  name: any;\r\n  jsonData: any;\r\n  responseParser: ResponseParser;\r\n  queryModel: PostgresQuery;\r\n  interval: string;\r\n\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private backendSrv, private $q, private templateSrv, private timeSrv) {\r\n    this.name = instanceSettings.name;\r\n    this.id = instanceSettings.id;\r\n    this.jsonData = instanceSettings.jsonData;\r\n    this.responseParser = new ResponseParser(this.$q);\r\n    this.queryModel = new PostgresQuery({});\r\n    this.interval = (instanceSettings.jsonData || {}).timeInterval;\r\n  }\r\n\r\n  interpolateVariable = (value, variable) => {\r\n    if (typeof value === 'string') {\r\n      if (variable.multi || variable.includeAll) {\r\n        return this.queryModel.quoteLiteral(value);\r\n      } else {\r\n        return value;\r\n      }\r\n    }\r\n\r\n    if (typeof value === 'number') {\r\n      return value;\r\n    }\r\n\r\n    const quotedValues = _.map(value, v => {\r\n      return this.queryModel.quoteLiteral(v);\r\n    });\r\n    return quotedValues.join(',');\r\n  };\r\n\r\n  query(options) {\r\n    const queries = _.filter(options.targets, target => {\r\n      return target.hide !== true;\r\n    }).map(target => {\r\n      const queryModel = new PostgresQuery(target, this.templateSrv, options.scopedVars);\r\n\r\n      return {\r\n        refId: target.refId,\r\n        intervalMs: options.intervalMs,\r\n        maxDataPoints: options.maxDataPoints,\r\n        datasourceId: this.id,\r\n        rawSql: queryModel.render(this.interpolateVariable),\r\n        format: target.format,\r\n      };\r\n    });\r\n\r\n    if (queries.length === 0) {\r\n      return this.$q.when({ data: [] });\r\n    }\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: {\r\n          from: options.range.from.valueOf().toString(),\r\n          to: options.range.to.valueOf().toString(),\r\n          queries: queries,\r\n        },\r\n      })\r\n      .then(this.responseParser.processQueryResult);\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    if (!options.annotation.rawQuery) {\r\n      return this.$q.reject({\r\n        message: 'Query missing in annotation definition',\r\n      });\r\n    }\r\n\r\n    const query = {\r\n      refId: options.annotation.name,\r\n      datasourceId: this.id,\r\n      rawSql: this.templateSrv.replace(options.annotation.rawQuery, options.scopedVars, this.interpolateVariable),\r\n      format: 'table',\r\n    };\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: {\r\n          from: options.range.from.valueOf().toString(),\r\n          to: options.range.to.valueOf().toString(),\r\n          queries: [query],\r\n        },\r\n      })\r\n      .then(data => this.responseParser.transformAnnotationResponse(options, data));\r\n  }\r\n\r\n  metricFindQuery(query, optionalOptions) {\r\n    let refId = 'tempvar';\r\n    if (optionalOptions && optionalOptions.variable && optionalOptions.variable.name) {\r\n      refId = optionalOptions.variable.name;\r\n    }\r\n\r\n    const interpolatedQuery = {\r\n      refId: refId,\r\n      datasourceId: this.id,\r\n      rawSql: this.templateSrv.replace(query, {}, this.interpolateVariable),\r\n      format: 'table',\r\n    };\r\n\r\n    const range = this.timeSrv.timeRange();\r\n    const data = {\r\n      queries: [interpolatedQuery],\r\n      from: range.from.valueOf().toString(),\r\n      to: range.to.valueOf().toString(),\r\n    };\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: data,\r\n      })\r\n      .then(data => this.responseParser.parseMetricFindQueryResult(refId, data));\r\n  }\r\n\r\n  getVersion() {\r\n    return this.metricFindQuery(\"SELECT current_setting('server_version_num')::int/100\", {});\r\n  }\r\n\r\n  getTimescaleDBVersion() {\r\n    return this.metricFindQuery(\"SELECT extversion FROM pg_extension WHERE extname = 'timescaledb'\", {});\r\n  }\r\n\r\n  testDatasource() {\r\n    return this.metricFindQuery('SELECT 1', {})\r\n      .then(res => {\r\n        return { status: 'success', message: 'Database Connection OK' };\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        if (err.data && err.data.message) {\r\n          return { status: 'error', message: err.data.message };\r\n        } else {\r\n          return { status: 'error', message: err.status };\r\n        }\r\n      });\r\n  }\r\n}\r\n","export class PostgresMetaQuery {\r\n  constructor(private target, private queryModel) {}\r\n\r\n  getOperators(datatype: string) {\r\n    switch (datatype) {\r\n      case 'float4':\r\n      case 'float8': {\r\n        return ['=', '!=', '<', '<=', '>', '>='];\r\n      }\r\n      case 'text':\r\n      case 'varchar':\r\n      case 'char': {\r\n        return ['=', '!=', '<', '<=', '>', '>=', 'IN', 'NOT IN', 'LIKE', 'NOT LIKE', '~', '~*', '!~', '!~*'];\r\n      }\r\n      default: {\r\n        return ['=', '!=', '<', '<=', '>', '>=', 'IN', 'NOT IN'];\r\n      }\r\n    }\r\n  }\r\n\r\n  // quote identifier as literal to use in metadata queries\r\n  quoteIdentAsLiteral(value) {\r\n    return this.queryModel.quoteLiteral(this.queryModel.unquoteIdentifier(value));\r\n  }\r\n\r\n  findMetricTable() {\r\n    // query that returns first table found that has a timestamp(tz) column and a float column\r\n    let query = `\r\nSELECT\r\n\tquote_ident(table_name) as table_name,\r\n\t( SELECT\r\n\t    quote_ident(column_name) as column_name\r\n\t  FROM information_schema.columns c\r\n    WHERE\r\n      c.table_schema = t.table_schema AND\r\n      c.table_name = t.table_name AND\r\n      udt_name IN ('timestamptz','timestamp')\r\n    ORDER BY ordinal_position LIMIT 1\r\n  ) AS time_column,\r\n  ( SELECT\r\n      quote_ident(column_name) AS column_name\r\n    FROM information_schema.columns c\r\n    WHERE\r\n      c.table_schema = t.table_schema AND\r\n      c.table_name = t.table_name AND\r\n      udt_name='float8'\r\n    ORDER BY ordinal_position LIMIT 1\r\n  ) AS value_column\r\nFROM information_schema.tables t\r\nWHERE `;\r\n    query += this.buildSchemaConstraint();\r\n    query += ` AND\r\n  EXISTS\r\n  ( SELECT 1\r\n    FROM information_schema.columns c\r\n    WHERE\r\n      c.table_schema = t.table_schema AND\r\n      c.table_name = t.table_name AND\r\n      udt_name IN ('timestamptz','timestamp')\r\n  ) AND\r\n  EXISTS\r\n  ( SELECT 1\r\n    FROM information_schema.columns c\r\n    WHERE\r\n      c.table_schema = t.table_schema AND\r\n      c.table_name = t.table_name AND\r\n      udt_name='float8'\r\n  )\r\nLIMIT 1\r\n;`;\r\n    return query;\r\n  }\r\n\r\n  buildSchemaConstraint() {\r\n    const query = `\r\ntable_schema IN (\r\n  SELECT\r\n    CASE WHEN trim(s[i]) = '\"$user\"' THEN user ELSE trim(s[i]) END\r\n  FROM\r\n    generate_series(\r\n      array_lower(string_to_array(current_setting('search_path'),','),1),\r\n      array_upper(string_to_array(current_setting('search_path'),','),1)\r\n    ) as i,\r\n    string_to_array(current_setting('search_path'),',') s\r\n)`;\r\n    return query;\r\n  }\r\n\r\n  buildTableConstraint(table: string) {\r\n    let query = '';\r\n\r\n    // check for schema qualified table\r\n    if (table.includes('.')) {\r\n      const parts = table.split('.');\r\n      query = 'table_schema = ' + this.quoteIdentAsLiteral(parts[0]);\r\n      query += ' AND table_name = ' + this.quoteIdentAsLiteral(parts[1]);\r\n      return query;\r\n    } else {\r\n      query = this.buildSchemaConstraint();\r\n      query += ' AND table_name = ' + this.quoteIdentAsLiteral(table);\r\n\r\n      return query;\r\n    }\r\n  }\r\n\r\n  buildTableQuery() {\r\n    let query = 'SELECT quote_ident(table_name) FROM information_schema.tables WHERE ';\r\n    query += this.buildSchemaConstraint();\r\n    query += ' ORDER BY table_name';\r\n    return query;\r\n  }\r\n\r\n  buildColumnQuery(type?: string) {\r\n    let query = 'SELECT quote_ident(column_name) FROM information_schema.columns WHERE ';\r\n    query += this.buildTableConstraint(this.target.table);\r\n\r\n    switch (type) {\r\n      case 'time': {\r\n        query +=\r\n          \" AND data_type IN ('timestamp without time zone','timestamp with time zone','bigint','integer','double precision','real')\";\r\n        break;\r\n      }\r\n      case 'metric': {\r\n        query += \" AND data_type IN ('text','character','character varying')\";\r\n        break;\r\n      }\r\n      case 'value': {\r\n        query += \" AND data_type IN ('bigint','integer','double precision','real')\";\r\n        query += ' AND column_name <> ' + this.quoteIdentAsLiteral(this.target.timeColumn);\r\n        break;\r\n      }\r\n      case 'group': {\r\n        query += \" AND data_type IN ('text','character','character varying')\";\r\n        break;\r\n      }\r\n    }\r\n\r\n    query += ' ORDER BY column_name';\r\n\r\n    return query;\r\n  }\r\n\r\n  buildValueQuery(column: string) {\r\n    let query = 'SELECT DISTINCT quote_literal(' + column + ')';\r\n    query += ' FROM ' + this.target.table;\r\n    query += ' WHERE $__timeFilter(' + this.target.timeColumn + ')';\r\n    query += ' AND ' + column + ' IS NOT NULL';\r\n    query += ' ORDER BY 1 LIMIT 100';\r\n    return query;\r\n  }\r\n\r\n  buildDatatypeQuery(column: string) {\r\n    let query = 'SELECT udt_name FROM information_schema.columns WHERE ';\r\n    query += this.buildSchemaConstraint();\r\n    query += ' AND table_name = ' + this.quoteIdentAsLiteral(this.target.table);\r\n    query += ' AND column_name = ' + this.quoteIdentAsLiteral(column);\r\n    return query;\r\n  }\r\n\r\n  buildAggregateQuery() {\r\n    let query = 'SELECT DISTINCT proname FROM pg_aggregate ';\r\n    query += 'INNER JOIN pg_proc ON pg_aggregate.aggfnoid = pg_proc.oid ';\r\n    query += 'INNER JOIN pg_type ON pg_type.oid=pg_proc.prorettype ';\r\n    query += \"WHERE pronargs=1 AND typname IN ('float8') AND aggkind='n' ORDER BY 1\";\r\n    return query;\r\n  }\r\n}\r\n","import { SqlPartDef, SqlPart } from 'app/core/components/sql_part/sql_part';\r\n\r\nconst index = [];\r\n\r\nfunction createPart(part): any {\r\n  const def = index[part.type];\r\n  if (!def) {\r\n    return null;\r\n  }\r\n\r\n  return new SqlPart(part, def);\r\n}\r\n\r\nfunction register(options: any) {\r\n  index[options.type] = new SqlPartDef(options);\r\n}\r\n\r\nregister({\r\n  type: 'column',\r\n  style: 'label',\r\n  params: [{ type: 'column', dynamicLookup: true }],\r\n  defaultParams: ['value'],\r\n});\r\n\r\nregister({\r\n  type: 'expression',\r\n  style: 'expression',\r\n  label: 'Expr:',\r\n  params: [\r\n    { name: 'left', type: 'string', dynamicLookup: true },\r\n    { name: 'op', type: 'string', dynamicLookup: true },\r\n    { name: 'right', type: 'string', dynamicLookup: true },\r\n  ],\r\n  defaultParams: ['value', '=', 'value'],\r\n});\r\n\r\nregister({\r\n  type: 'macro',\r\n  style: 'label',\r\n  label: 'Macro:',\r\n  params: [],\r\n  defaultParams: [],\r\n});\r\n\r\nregister({\r\n  type: 'aggregate',\r\n  style: 'label',\r\n  params: [\r\n    {\r\n      name: 'name',\r\n      type: 'string',\r\n      options: ['avg', 'count', 'min', 'max', 'sum', 'stddev', 'variance'],\r\n    },\r\n  ],\r\n  defaultParams: ['avg'],\r\n});\r\n\r\nregister({\r\n  type: 'percentile',\r\n  label: 'Aggregate:',\r\n  style: 'label',\r\n  params: [\r\n    {\r\n      name: 'name',\r\n      type: 'string',\r\n      options: ['percentile_cont', 'percentile_disc'],\r\n    },\r\n    {\r\n      name: 'fraction',\r\n      type: 'number',\r\n      options: ['0.5', '0.75', '0.9', '0.95', '0.99'],\r\n    },\r\n  ],\r\n  defaultParams: ['percentile_cont', '0.95'],\r\n});\r\n\r\nregister({\r\n  type: 'alias',\r\n  style: 'label',\r\n  params: [{ name: 'name', type: 'string', quote: 'double' }],\r\n  defaultParams: ['alias'],\r\n});\r\n\r\nregister({\r\n  type: 'time',\r\n  style: 'function',\r\n  label: 'time',\r\n  params: [\r\n    {\r\n      name: 'interval',\r\n      type: 'interval',\r\n      options: ['$__interval', '1s', '10s', '1m', '5m', '10m', '15m', '1h'],\r\n    },\r\n    {\r\n      name: 'fill',\r\n      type: 'string',\r\n      options: ['none', 'NULL', 'previous', '0'],\r\n    },\r\n  ],\r\n  defaultParams: ['$__interval', 'none'],\r\n});\r\n\r\nregister({\r\n  type: 'window',\r\n  style: 'label',\r\n  params: [\r\n    {\r\n      name: 'function',\r\n      type: 'string',\r\n      options: ['increase', 'rate', 'sum'],\r\n    },\r\n  ],\r\n  defaultParams: ['increase'],\r\n});\r\n\r\nregister({\r\n  type: 'moving_window',\r\n  style: 'label',\r\n  label: 'Moving Window:',\r\n  params: [\r\n    {\r\n      name: 'function',\r\n      type: 'string',\r\n      options: ['avg'],\r\n    },\r\n    {\r\n      name: 'window_size',\r\n      type: 'number',\r\n      options: ['3', '5', '7', '10', '20'],\r\n    },\r\n  ],\r\n  defaultParams: ['avg', '5'],\r\n});\r\n\r\nexport default {\r\n  create: createPart,\r\n};\r\n","import _ from 'lodash';\r\n\r\nexport class SqlPartDef {\r\n  type: string;\r\n  style: string;\r\n  label: string;\r\n  params: any[];\r\n  defaultParams: any[];\r\n  wrapOpen: string;\r\n  wrapClose: string;\r\n  separator: string;\r\n\r\n  constructor(options: any) {\r\n    this.type = options.type;\r\n    if (options.label) {\r\n      this.label = options.label;\r\n    } else {\r\n      this.label = this.type[0].toUpperCase() + this.type.substring(1) + ':';\r\n    }\r\n    this.style = options.style;\r\n    if (this.style === 'function') {\r\n      this.wrapOpen = '(';\r\n      this.wrapClose = ')';\r\n      this.separator = ', ';\r\n    } else {\r\n      this.wrapOpen = ' ';\r\n      this.wrapClose = ' ';\r\n      this.separator = ' ';\r\n    }\r\n    this.params = options.params;\r\n    this.defaultParams = options.defaultParams;\r\n  }\r\n}\r\n\r\nexport class SqlPart {\r\n  part: any;\r\n  def: SqlPartDef;\r\n  params: any[];\r\n  label: string;\r\n  name: string;\r\n  datatype: string;\r\n\r\n  constructor(part: any, def: any) {\r\n    this.part = part;\r\n    this.def = def;\r\n    if (!this.def) {\r\n      throw { message: 'Could not find sql part ' + part.type };\r\n    }\r\n\r\n    this.datatype = part.datatype;\r\n\r\n    if (part.name) {\r\n      this.name = part.name;\r\n      this.label = def.label + ' ' + part.name;\r\n    } else {\r\n      this.name = '';\r\n      this.label = def.label;\r\n    }\r\n\r\n    part.params = part.params || _.clone(this.def.defaultParams);\r\n    this.params = part.params;\r\n  }\r\n\r\n  updateParam(strValue, index) {\r\n    // handle optional parameters\r\n    if (strValue === '' && this.def.params[index].optional) {\r\n      this.params.splice(index, 1);\r\n    } else {\r\n      this.params[index] = strValue;\r\n    }\r\n\r\n    this.part.params = this.params;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport appEvents from 'app/core/app_events';\r\nimport { PostgresMetaQuery } from './meta_query';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\nimport { SqlPart } from 'app/core/components/sql_part/sql_part';\r\nimport PostgresQuery from './postgres_query';\r\nimport sqlPart from './sql_part';\r\n\r\nexport interface QueryMeta {\r\n  sql: string;\r\n}\r\n\r\nconst defaultQuery = `SELECT\r\n  $__time(time_column),\r\n  value1\r\nFROM\r\n  metric_table\r\nWHERE\r\n  $__timeFilter(time_column)\r\n`;\r\n\r\nexport class PostgresQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n\r\n  showLastQuerySQL: boolean;\r\n  formats: any[];\r\n  queryModel: PostgresQuery;\r\n  metaBuilder: PostgresMetaQuery;\r\n  lastQueryMeta: QueryMeta;\r\n  lastQueryError: string;\r\n  showHelp: boolean;\r\n  tableSegment: any;\r\n  whereAdd: any;\r\n  timeColumnSegment: any;\r\n  metricColumnSegment: any;\r\n  selectMenu: any[];\r\n  selectParts: SqlPart[][];\r\n  groupParts: SqlPart[];\r\n  whereParts: SqlPart[];\r\n  groupAdd: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private templateSrv, private $q, private uiSegmentSrv) {\r\n    super($scope, $injector);\r\n    this.target = this.target;\r\n    this.queryModel = new PostgresQuery(this.target, templateSrv, this.panel.scopedVars);\r\n    this.metaBuilder = new PostgresMetaQuery(this.target, this.queryModel);\r\n    this.updateProjection();\r\n\r\n    this.formats = [{ text: 'Time series', value: 'time_series' }, { text: 'Table', value: 'table' }];\r\n\r\n    if (!this.target.rawSql) {\r\n      // special handling when in table panel\r\n      if (this.panelCtrl.panel.type === 'table') {\r\n        this.target.format = 'table';\r\n        this.target.rawSql = 'SELECT 1';\r\n        this.target.rawQuery = true;\r\n      } else {\r\n        this.target.rawSql = defaultQuery;\r\n        this.datasource.metricFindQuery(this.metaBuilder.findMetricTable()).then(result => {\r\n          if (result.length > 0) {\r\n            this.target.table = result[0].text;\r\n            let segment = this.uiSegmentSrv.newSegment(this.target.table);\r\n            this.tableSegment.html = segment.html;\r\n            this.tableSegment.value = segment.value;\r\n\r\n            this.target.timeColumn = result[1].text;\r\n            segment = this.uiSegmentSrv.newSegment(this.target.timeColumn);\r\n            this.timeColumnSegment.html = segment.html;\r\n            this.timeColumnSegment.value = segment.value;\r\n\r\n            this.target.timeColumnType = 'timestamp';\r\n            this.target.select = [[{ type: 'column', params: [result[2].text] }]];\r\n            this.updateProjection();\r\n            this.panelCtrl.refresh();\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    if (!this.target.table) {\r\n      this.tableSegment = uiSegmentSrv.newSegment({ value: 'select table', fake: true });\r\n    } else {\r\n      this.tableSegment = uiSegmentSrv.newSegment(this.target.table);\r\n    }\r\n\r\n    this.timeColumnSegment = uiSegmentSrv.newSegment(this.target.timeColumn);\r\n    this.metricColumnSegment = uiSegmentSrv.newSegment(this.target.metricColumn);\r\n\r\n    this.buildSelectMenu();\r\n    this.whereAdd = this.uiSegmentSrv.newPlusButton();\r\n    this.groupAdd = this.uiSegmentSrv.newPlusButton();\r\n\r\n    this.panelCtrl.events.on('data-received', this.onDataReceived.bind(this), $scope);\r\n    this.panelCtrl.events.on('data-error', this.onDataError.bind(this), $scope);\r\n  }\r\n\r\n  updateProjection() {\r\n    this.selectParts = _.map(this.target.select, (parts: any) => {\r\n      return _.map(parts, sqlPart.create).filter(n => n);\r\n    });\r\n    this.whereParts = _.map(this.target.where, sqlPart.create).filter(n => n);\r\n    this.groupParts = _.map(this.target.group, sqlPart.create).filter(n => n);\r\n  }\r\n\r\n  updatePersistedParts() {\r\n    this.target.select = _.map(this.selectParts, selectParts => {\r\n      return _.map(selectParts, (part: any) => {\r\n        return { type: part.def.type, datatype: part.datatype, params: part.params };\r\n      });\r\n    });\r\n    this.target.where = _.map(this.whereParts, (part: any) => {\r\n      return { type: part.def.type, datatype: part.datatype, name: part.name, params: part.params };\r\n    });\r\n    this.target.group = _.map(this.groupParts, (part: any) => {\r\n      return { type: part.def.type, datatype: part.datatype, params: part.params };\r\n    });\r\n  }\r\n\r\n  buildSelectMenu() {\r\n    this.selectMenu = [];\r\n    const aggregates = {\r\n      text: 'Aggregate Functions',\r\n      value: 'aggregate',\r\n      submenu: [\r\n        { text: 'Average', value: 'avg' },\r\n        { text: 'Count', value: 'count' },\r\n        { text: 'Maximum', value: 'max' },\r\n        { text: 'Minimum', value: 'min' },\r\n        { text: 'Sum', value: 'sum' },\r\n        { text: 'Standard deviation', value: 'stddev' },\r\n        { text: 'Variance', value: 'variance' },\r\n      ],\r\n    };\r\n\r\n    // first and last aggregate are timescaledb specific\r\n    if (this.datasource.jsonData.timescaledb === true) {\r\n      aggregates.submenu.push({ text: 'First', value: 'first' });\r\n      aggregates.submenu.push({ text: 'Last', value: 'last' });\r\n    }\r\n\r\n    this.selectMenu.push(aggregates);\r\n\r\n    // ordered set aggregates require postgres 9.4+\r\n    if (this.datasource.jsonData.postgresVersion >= 904) {\r\n      const aggregates2 = {\r\n        text: 'Ordered-Set Aggregate Functions',\r\n        value: 'percentile',\r\n        submenu: [\r\n          { text: 'Percentile (continuous)', value: 'percentile_cont' },\r\n          { text: 'Percentile (discrete)', value: 'percentile_disc' },\r\n        ],\r\n      };\r\n      this.selectMenu.push(aggregates2);\r\n    }\r\n\r\n    const windows = {\r\n      text: 'Window Functions',\r\n      value: 'window',\r\n      submenu: [\r\n        { text: 'Increase', value: 'increase' },\r\n        { text: 'Rate', value: 'rate' },\r\n        { text: 'Sum', value: 'sum' },\r\n        { text: 'Moving Average', value: 'avg', type: 'moving_window' },\r\n      ],\r\n    };\r\n    this.selectMenu.push(windows);\r\n\r\n    this.selectMenu.push({ text: 'Alias', value: 'alias' });\r\n    this.selectMenu.push({ text: 'Column', value: 'column' });\r\n  }\r\n\r\n  toggleEditorMode() {\r\n    if (this.target.rawQuery) {\r\n      appEvents.emit('confirm-modal', {\r\n        title: 'Warning',\r\n        text2: 'Switching to query builder may overwrite your raw SQL.',\r\n        icon: 'fa-exclamation',\r\n        yesText: 'Switch',\r\n        onConfirm: () => {\r\n          this.target.rawQuery = !this.target.rawQuery;\r\n        },\r\n      });\r\n    } else {\r\n      this.target.rawQuery = !this.target.rawQuery;\r\n    }\r\n  }\r\n\r\n  resetPlusButton(button) {\r\n    const plusButton = this.uiSegmentSrv.newPlusButton();\r\n    button.html = plusButton.html;\r\n    button.value = plusButton.value;\r\n  }\r\n\r\n  getTableSegments() {\r\n    return this.datasource\r\n      .metricFindQuery(this.metaBuilder.buildTableQuery())\r\n      .then(this.transformToSegments({}))\r\n      .catch(this.handleQueryError.bind(this));\r\n  }\r\n\r\n  tableChanged() {\r\n    this.target.table = this.tableSegment.value;\r\n    this.target.where = [];\r\n    this.target.group = [];\r\n    this.updateProjection();\r\n\r\n    const segment = this.uiSegmentSrv.newSegment('none');\r\n    this.metricColumnSegment.html = segment.html;\r\n    this.metricColumnSegment.value = segment.value;\r\n    this.target.metricColumn = 'none';\r\n\r\n    const task1 = this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery('time')).then(result => {\r\n      // check if time column is still valid\r\n      if (result.length > 0 && !_.find(result, (r: any) => r.text === this.target.timeColumn)) {\r\n        const segment = this.uiSegmentSrv.newSegment(result[0].text);\r\n        this.timeColumnSegment.html = segment.html;\r\n        this.timeColumnSegment.value = segment.value;\r\n      }\r\n      return this.timeColumnChanged(false);\r\n    });\r\n    const task2 = this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery('value')).then(result => {\r\n      if (result.length > 0) {\r\n        this.target.select = [[{ type: 'column', params: [result[0].text] }]];\r\n        this.updateProjection();\r\n      }\r\n    });\r\n\r\n    this.$q.all([task1, task2]).then(() => {\r\n      this.panelCtrl.refresh();\r\n    });\r\n  }\r\n\r\n  getTimeColumnSegments() {\r\n    return this.datasource\r\n      .metricFindQuery(this.metaBuilder.buildColumnQuery('time'))\r\n      .then(this.transformToSegments({}))\r\n      .catch(this.handleQueryError.bind(this));\r\n  }\r\n\r\n  timeColumnChanged(refresh?: boolean) {\r\n    this.target.timeColumn = this.timeColumnSegment.value;\r\n    return this.datasource.metricFindQuery(this.metaBuilder.buildDatatypeQuery(this.target.timeColumn)).then(result => {\r\n      if (result.length === 1) {\r\n        if (this.target.timeColumnType !== result[0].text) {\r\n          this.target.timeColumnType = result[0].text;\r\n        }\r\n        let partModel;\r\n        if (this.queryModel.hasUnixEpochTimecolumn()) {\r\n          partModel = sqlPart.create({ type: 'macro', name: '$__unixEpochFilter', params: [] });\r\n        } else {\r\n          partModel = sqlPart.create({ type: 'macro', name: '$__timeFilter', params: [] });\r\n        }\r\n\r\n        if (this.whereParts.length >= 1 && this.whereParts[0].def.type === 'macro') {\r\n          // replace current macro\r\n          this.whereParts[0] = partModel;\r\n        } else {\r\n          this.whereParts.splice(0, 0, partModel);\r\n        }\r\n      }\r\n\r\n      this.updatePersistedParts();\r\n      if (refresh !== false) {\r\n        this.panelCtrl.refresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  getMetricColumnSegments() {\r\n    return this.datasource\r\n      .metricFindQuery(this.metaBuilder.buildColumnQuery('metric'))\r\n      .then(this.transformToSegments({ addNone: true }))\r\n      .catch(this.handleQueryError.bind(this));\r\n  }\r\n\r\n  metricColumnChanged() {\r\n    this.target.metricColumn = this.metricColumnSegment.value;\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  onDataReceived(dataList) {\r\n    this.lastQueryMeta = null;\r\n    this.lastQueryError = null;\r\n\r\n    const anySeriesFromQuery = _.find(dataList, { refId: this.target.refId });\r\n    if (anySeriesFromQuery) {\r\n      this.lastQueryMeta = anySeriesFromQuery.meta;\r\n    }\r\n  }\r\n\r\n  onDataError(err) {\r\n    if (err.data && err.data.results) {\r\n      const queryRes = err.data.results[this.target.refId];\r\n      if (queryRes) {\r\n        this.lastQueryMeta = queryRes.meta;\r\n        this.lastQueryError = queryRes.error;\r\n      }\r\n    }\r\n  }\r\n\r\n  transformToSegments(config) {\r\n    return results => {\r\n      const segments = _.map(results, segment => {\r\n        return this.uiSegmentSrv.newSegment({\r\n          value: segment.text,\r\n          expandable: segment.expandable,\r\n        });\r\n      });\r\n\r\n      if (config.addTemplateVars) {\r\n        for (const variable of this.templateSrv.variables) {\r\n          let value;\r\n          value = '$' + variable.name;\r\n          if (config.templateQuoter && variable.multi === false) {\r\n            value = config.templateQuoter(value);\r\n          }\r\n\r\n          segments.unshift(\r\n            this.uiSegmentSrv.newSegment({\r\n              type: 'template',\r\n              value: value,\r\n              expandable: true,\r\n            })\r\n          );\r\n        }\r\n      }\r\n\r\n      if (config.addNone) {\r\n        segments.unshift(this.uiSegmentSrv.newSegment({ type: 'template', value: 'none', expandable: true }));\r\n      }\r\n\r\n      return segments;\r\n    };\r\n  }\r\n\r\n  findAggregateIndex(selectParts) {\r\n    return _.findIndex(selectParts, (p: any) => p.def.type === 'aggregate' || p.def.type === 'percentile');\r\n  }\r\n\r\n  findWindowIndex(selectParts) {\r\n    return _.findIndex(selectParts, (p: any) => p.def.type === 'window' || p.def.type === 'moving_window');\r\n  }\r\n\r\n  addSelectPart(selectParts, item, subItem) {\r\n    let partType = item.value;\r\n    if (subItem && subItem.type) {\r\n      partType = subItem.type;\r\n    }\r\n    let partModel = sqlPart.create({ type: partType });\r\n    if (subItem) {\r\n      partModel.params[0] = subItem.value;\r\n    }\r\n    let addAlias = false;\r\n\r\n    switch (partType) {\r\n      case 'column':\r\n        const parts = _.map(selectParts, (part: any) => {\r\n          return sqlPart.create({ type: part.def.type, params: _.clone(part.params) });\r\n        });\r\n        this.selectParts.push(parts);\r\n        break;\r\n      case 'percentile':\r\n      case 'aggregate':\r\n        // add group by if no group by yet\r\n        if (this.target.group.length === 0) {\r\n          this.addGroup('time', '$__interval');\r\n        }\r\n        const aggIndex = this.findAggregateIndex(selectParts);\r\n        if (aggIndex !== -1) {\r\n          // replace current aggregation\r\n          selectParts[aggIndex] = partModel;\r\n        } else {\r\n          selectParts.splice(1, 0, partModel);\r\n        }\r\n        if (!_.find(selectParts, (p: any) => p.def.type === 'alias')) {\r\n          addAlias = true;\r\n        }\r\n        break;\r\n      case 'moving_window':\r\n      case 'window':\r\n        const windowIndex = this.findWindowIndex(selectParts);\r\n        if (windowIndex !== -1) {\r\n          // replace current window function\r\n          selectParts[windowIndex] = partModel;\r\n        } else {\r\n          const aggIndex = this.findAggregateIndex(selectParts);\r\n          if (aggIndex !== -1) {\r\n            selectParts.splice(aggIndex + 1, 0, partModel);\r\n          } else {\r\n            selectParts.splice(1, 0, partModel);\r\n          }\r\n        }\r\n        if (!_.find(selectParts, (p: any) => p.def.type === 'alias')) {\r\n          addAlias = true;\r\n        }\r\n        break;\r\n      case 'alias':\r\n        addAlias = true;\r\n        break;\r\n    }\r\n\r\n    if (addAlias) {\r\n      // set initial alias name to column name\r\n      partModel = sqlPart.create({ type: 'alias', params: [selectParts[0].params[0].replace(/\"/g, '')] });\r\n      if (selectParts[selectParts.length - 1].def.type === 'alias') {\r\n        selectParts[selectParts.length - 1] = partModel;\r\n      } else {\r\n        selectParts.push(partModel);\r\n      }\r\n    }\r\n\r\n    this.updatePersistedParts();\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  removeSelectPart(selectParts, part) {\r\n    if (part.def.type === 'column') {\r\n      // remove all parts of column unless its last column\r\n      if (this.selectParts.length > 1) {\r\n        const modelsIndex = _.indexOf(this.selectParts, selectParts);\r\n        this.selectParts.splice(modelsIndex, 1);\r\n      }\r\n    } else {\r\n      const partIndex = _.indexOf(selectParts, part);\r\n      selectParts.splice(partIndex, 1);\r\n    }\r\n\r\n    this.updatePersistedParts();\r\n  }\r\n\r\n  handleSelectPartEvent(selectParts, part, evt) {\r\n    switch (evt.name) {\r\n      case 'get-param-options': {\r\n        switch (part.def.type) {\r\n          case 'aggregate':\r\n            return this.datasource\r\n              .metricFindQuery(this.metaBuilder.buildAggregateQuery())\r\n              .then(this.transformToSegments({}))\r\n              .catch(this.handleQueryError.bind(this));\r\n          case 'column':\r\n            return this.datasource\r\n              .metricFindQuery(this.metaBuilder.buildColumnQuery('value'))\r\n              .then(this.transformToSegments({}))\r\n              .catch(this.handleQueryError.bind(this));\r\n        }\r\n      }\r\n      case 'part-param-changed': {\r\n        this.updatePersistedParts();\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'action': {\r\n        this.removeSelectPart(selectParts, part);\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'get-part-actions': {\r\n        return this.$q.when([{ text: 'Remove', value: 'remove-part' }]);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleGroupPartEvent(part, index, evt) {\r\n    switch (evt.name) {\r\n      case 'get-param-options': {\r\n        return this.datasource\r\n          .metricFindQuery(this.metaBuilder.buildColumnQuery())\r\n          .then(this.transformToSegments({}))\r\n          .catch(this.handleQueryError.bind(this));\r\n      }\r\n      case 'part-param-changed': {\r\n        this.updatePersistedParts();\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'action': {\r\n        this.removeGroup(part, index);\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'get-part-actions': {\r\n        return this.$q.when([{ text: 'Remove', value: 'remove-part' }]);\r\n      }\r\n    }\r\n  }\r\n\r\n  addGroup(partType, value) {\r\n    let params = [value];\r\n    if (partType === 'time') {\r\n      params = ['$__interval', 'none'];\r\n    }\r\n    const partModel = sqlPart.create({ type: partType, params: params });\r\n\r\n    if (partType === 'time') {\r\n      // put timeGroup at start\r\n      this.groupParts.splice(0, 0, partModel);\r\n    } else {\r\n      this.groupParts.push(partModel);\r\n    }\r\n\r\n    // add aggregates when adding group by\r\n    for (const selectParts of this.selectParts) {\r\n      if (!selectParts.some(part => part.def.type === 'aggregate')) {\r\n        const aggregate = sqlPart.create({ type: 'aggregate', params: ['avg'] });\r\n        selectParts.splice(1, 0, aggregate);\r\n        if (!selectParts.some(part => part.def.type === 'alias')) {\r\n          const alias = sqlPart.create({ type: 'alias', params: [selectParts[0].part.params[0]] });\r\n          selectParts.push(alias);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.updatePersistedParts();\r\n  }\r\n\r\n  removeGroup(part, index) {\r\n    if (part.def.type === 'time') {\r\n      // remove aggregations\r\n      this.selectParts = _.map(this.selectParts, (s: any) => {\r\n        return _.filter(s, (part: any) => {\r\n          if (part.def.type === 'aggregate' || part.def.type === 'percentile') {\r\n            return false;\r\n          }\r\n          return true;\r\n        });\r\n      });\r\n    }\r\n\r\n    this.groupParts.splice(index, 1);\r\n    this.updatePersistedParts();\r\n  }\r\n\r\n  handleWherePartEvent(whereParts, part, evt, index) {\r\n    switch (evt.name) {\r\n      case 'get-param-options': {\r\n        switch (evt.param.name) {\r\n          case 'left':\r\n            return this.datasource\r\n              .metricFindQuery(this.metaBuilder.buildColumnQuery())\r\n              .then(this.transformToSegments({}))\r\n              .catch(this.handleQueryError.bind(this));\r\n          case 'right':\r\n            if (['int4', 'int8', 'float4', 'float8', 'timestamp', 'timestamptz'].indexOf(part.datatype) > -1) {\r\n              // don't do value lookups for numerical fields\r\n              return this.$q.when([]);\r\n            } else {\r\n              return this.datasource\r\n                .metricFindQuery(this.metaBuilder.buildValueQuery(part.params[0]))\r\n                .then(\r\n                  this.transformToSegments({\r\n                    addTemplateVars: true,\r\n                    templateQuoter: (v: string) => {\r\n                      return this.queryModel.quoteLiteral(v);\r\n                    },\r\n                  })\r\n                )\r\n                .catch(this.handleQueryError.bind(this));\r\n            }\r\n          case 'op':\r\n            return this.$q.when(this.uiSegmentSrv.newOperators(this.metaBuilder.getOperators(part.datatype)));\r\n          default:\r\n            return this.$q.when([]);\r\n        }\r\n      }\r\n      case 'part-param-changed': {\r\n        this.updatePersistedParts();\r\n        this.datasource.metricFindQuery(this.metaBuilder.buildDatatypeQuery(part.params[0])).then((d: any) => {\r\n          if (d.length === 1) {\r\n            part.datatype = d[0].text;\r\n          }\r\n        });\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'action': {\r\n        // remove element\r\n        whereParts.splice(index, 1);\r\n        this.updatePersistedParts();\r\n        this.panelCtrl.refresh();\r\n        break;\r\n      }\r\n      case 'get-part-actions': {\r\n        return this.$q.when([{ text: 'Remove', value: 'remove-part' }]);\r\n      }\r\n    }\r\n  }\r\n\r\n  getWhereOptions() {\r\n    const options = [];\r\n    if (this.queryModel.hasUnixEpochTimecolumn()) {\r\n      options.push(this.uiSegmentSrv.newSegment({ type: 'macro', value: '$__unixEpochFilter' }));\r\n    } else {\r\n      options.push(this.uiSegmentSrv.newSegment({ type: 'macro', value: '$__timeFilter' }));\r\n    }\r\n    options.push(this.uiSegmentSrv.newSegment({ type: 'expression', value: 'Expression' }));\r\n    return this.$q.when(options);\r\n  }\r\n\r\n  addWhereAction(part, index) {\r\n    switch (this.whereAdd.type) {\r\n      case 'macro': {\r\n        const partModel = sqlPart.create({ type: 'macro', name: this.whereAdd.value, params: [] });\r\n        if (this.whereParts.length >= 1 && this.whereParts[0].def.type === 'macro') {\r\n          // replace current macro\r\n          this.whereParts[0] = partModel;\r\n        } else {\r\n          this.whereParts.splice(0, 0, partModel);\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        this.whereParts.push(sqlPart.create({ type: 'expression', params: ['value', '=', 'value'] }));\r\n      }\r\n    }\r\n\r\n    this.updatePersistedParts();\r\n    this.resetPlusButton(this.whereAdd);\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  getGroupOptions() {\r\n    return this.datasource\r\n      .metricFindQuery(this.metaBuilder.buildColumnQuery('group'))\r\n      .then(tags => {\r\n        const options = [];\r\n        if (!this.queryModel.hasTimeGroup()) {\r\n          options.push(this.uiSegmentSrv.newSegment({ type: 'time', value: 'time($__interval,none)' }));\r\n        }\r\n        for (const tag of tags) {\r\n          options.push(this.uiSegmentSrv.newSegment({ type: 'column', value: tag.text }));\r\n        }\r\n        return options;\r\n      })\r\n      .catch(this.handleQueryError.bind(this));\r\n  }\r\n\r\n  addGroupAction() {\r\n    switch (this.groupAdd.value) {\r\n      default: {\r\n        this.addGroup(this.groupAdd.type, this.groupAdd.value);\r\n      }\r\n    }\r\n\r\n    this.resetPlusButton(this.groupAdd);\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  handleQueryError(err) {\r\n    this.error = err.message || 'Failed to issue metric query';\r\n    return [];\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport class PostgresConfigCtrl {\r\n  static templateUrl = 'partials/config.html';\r\n\r\n  current: any;\r\n  datasourceSrv: any;\r\n  showTimescaleDBHelp: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, datasourceSrv) {\r\n    this.datasourceSrv = datasourceSrv;\r\n    this.current.jsonData.sslmode = this.current.jsonData.sslmode || 'verify-full';\r\n    this.current.jsonData.postgresVersion = this.current.jsonData.postgresVersion || 903;\r\n    this.showTimescaleDBHelp = false;\r\n    this.autoDetectFeatures();\r\n  }\r\n\r\n  autoDetectFeatures() {\r\n    if (!this.current.id) {\r\n      return;\r\n    }\r\n\r\n    this.datasourceSrv.loadDatasource(this.current.name).then(ds => {\r\n      return ds.getVersion().then(version => {\r\n        version = Number(version[0].text);\r\n\r\n        // timescaledb is only available for 9.6+\r\n        if (version >= 906) {\r\n          ds.getTimescaleDBVersion().then(version => {\r\n            if (version.length === 1) {\r\n              this.current.jsonData.timescaledb = true;\r\n            }\r\n          });\r\n        }\r\n\r\n        const major = Math.trunc(version / 100);\r\n        const minor = version % 100;\r\n        let name = String(major);\r\n        if (version < 1000) {\r\n          name = String(major) + '.' + String(minor);\r\n        }\r\n        if (!_.find(this.postgresVersions, (p: any) => p.value === version)) {\r\n          this.postgresVersions.push({ name: name, value: version });\r\n        }\r\n        this.current.jsonData.postgresVersion = version;\r\n      });\r\n    });\r\n  }\r\n\r\n  toggleTimescaleDBHelp() {\r\n    this.showTimescaleDBHelp = !this.showTimescaleDBHelp;\r\n  }\r\n\r\n  // the value portion is derived from postgres server_version_num/100\r\n  postgresVersions = [\r\n    { name: '9.3', value: 903 },\r\n    { name: '9.4', value: 904 },\r\n    { name: '9.5', value: 905 },\r\n    { name: '9.6', value: 906 },\r\n    { name: '10', value: 1000 },\r\n  ];\r\n}\r\n","import { PostgresDatasource } from './datasource';\r\nimport { PostgresQueryCtrl } from './query_ctrl';\r\nimport { PostgresConfigCtrl } from './config_ctrl';\r\n\r\nconst defaultQuery = `SELECT\r\n  extract(epoch from time_column) AS time,\r\n  text_column as text,\r\n  tags_column as tags\r\nFROM\r\n  metric_table\r\nWHERE\r\n  $__timeFilter(time_column)\r\n`;\r\n\r\nclass PostgresAnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n\r\n  annotation: any;\r\n\r\n  /** @ngInject */\r\n  constructor() {\r\n    this.annotation.rawQuery = this.annotation.rawQuery || defaultQuery;\r\n  }\r\n}\r\n\r\nexport {\r\n  PostgresDatasource,\r\n  PostgresDatasource as Datasource,\r\n  PostgresQueryCtrl as QueryCtrl,\r\n  PostgresConfigCtrl as ConfigCtrl,\r\n  PostgresAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","import _ from 'lodash';\r\n\r\nexport default class PrometheusMetricFindQuery {\r\n  datasource: any;\r\n  query: any;\r\n  range: any;\r\n\r\n  constructor(datasource, query, timeSrv) {\r\n    this.datasource = datasource;\r\n    this.query = query;\r\n    this.range = timeSrv.timeRange();\r\n  }\r\n\r\n  process() {\r\n    const labelValuesRegex = /^label_values\\((?:(.+),\\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\\)\\s*$/;\r\n    const metricNamesRegex = /^metrics\\((.+)\\)\\s*$/;\r\n    const queryResultRegex = /^query_result\\((.+)\\)\\s*$/;\r\n\r\n    const labelValuesQuery = this.query.match(labelValuesRegex);\r\n    if (labelValuesQuery) {\r\n      if (labelValuesQuery[1]) {\r\n        return this.labelValuesQuery(labelValuesQuery[2], labelValuesQuery[1]);\r\n      } else {\r\n        return this.labelValuesQuery(labelValuesQuery[2], null);\r\n      }\r\n    }\r\n\r\n    const metricNamesQuery = this.query.match(metricNamesRegex);\r\n    if (metricNamesQuery) {\r\n      return this.metricNameQuery(metricNamesQuery[1]);\r\n    }\r\n\r\n    const queryResultQuery = this.query.match(queryResultRegex);\r\n    if (queryResultQuery) {\r\n      return this.queryResultQuery(queryResultQuery[1]);\r\n    }\r\n\r\n    // if query contains full metric name, return metric name and label list\r\n    return this.metricNameAndLabelsQuery(this.query);\r\n  }\r\n\r\n  labelValuesQuery(label, metric) {\r\n    let url;\r\n\r\n    if (!metric) {\r\n      // return label values globally\r\n      url = '/api/v1/label/' + label + '/values';\r\n\r\n      return this.datasource.metadataRequest(url).then(result => {\r\n        return _.map(result.data.data, value => {\r\n          return { text: value };\r\n        });\r\n      });\r\n    } else {\r\n      const start = this.datasource.getPrometheusTime(this.range.from, false);\r\n      const end = this.datasource.getPrometheusTime(this.range.to, true);\r\n      url = '/api/v1/series?match[]=' + encodeURIComponent(metric) + '&start=' + start + '&end=' + end;\r\n\r\n      return this.datasource.metadataRequest(url).then(result => {\r\n        const _labels = _.map(result.data.data, metric => {\r\n          return metric[label] || '';\r\n        }).filter(label => {\r\n          return label !== '';\r\n        });\r\n\r\n        return _.uniq(_labels).map(metric => {\r\n          return {\r\n            text: metric,\r\n            expandable: true,\r\n          };\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  metricNameQuery(metricFilterPattern) {\r\n    const url = '/api/v1/label/__name__/values';\r\n\r\n    return this.datasource.metadataRequest(url).then(result => {\r\n      return _.chain(result.data.data)\r\n        .filter(metricName => {\r\n          const r = new RegExp(metricFilterPattern);\r\n          return r.test(metricName);\r\n        })\r\n        .map(matchedMetricName => {\r\n          return {\r\n            text: matchedMetricName,\r\n            expandable: true,\r\n          };\r\n        })\r\n        .value();\r\n    });\r\n  }\r\n\r\n  queryResultQuery(query) {\r\n    const end = this.datasource.getPrometheusTime(this.range.to, true);\r\n    return this.datasource.performInstantQuery({ expr: query }, end).then(result => {\r\n      return _.map(result.data.data.result, metricData => {\r\n        let text = metricData.metric.__name__ || '';\r\n        delete metricData.metric.__name__;\r\n        text +=\r\n          '{' +\r\n          _.map(metricData.metric, (v, k) => {\r\n            return k + '=\"' + v + '\"';\r\n          }).join(',') +\r\n          '}';\r\n        text += ' ' + metricData.value[1] + ' ' + metricData.value[0] * 1000;\r\n\r\n        return {\r\n          text: text,\r\n          expandable: true,\r\n        };\r\n      });\r\n    });\r\n  }\r\n\r\n  metricNameAndLabelsQuery(query) {\r\n    const start = this.datasource.getPrometheusTime(this.range.from, false);\r\n    const end = this.datasource.getPrometheusTime(this.range.to, true);\r\n    const url = '/api/v1/series?match[]=' + encodeURIComponent(query) + '&start=' + start + '&end=' + end;\r\n\r\n    const self = this;\r\n    return this.datasource.metadataRequest(url).then(result => {\r\n      return _.map(result.data.data, metric => {\r\n        return {\r\n          text: self.datasource.getOriginalMetricName(metric),\r\n          expandable: true,\r\n        };\r\n      });\r\n    });\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport TableModel from 'app/core/table_model';\r\n\r\nexport class ResultTransformer {\r\n  constructor(private templateSrv) {}\r\n\r\n  transform(response: any, options: any): any[] {\r\n    const prometheusResult = response.data.data.result;\r\n\r\n    if (options.format === 'table') {\r\n      return [this.transformMetricDataToTable(prometheusResult, options.responseListLength, options.refId)];\r\n    } else if (options.format === 'heatmap') {\r\n      let seriesList = [];\r\n      prometheusResult.sort(sortSeriesByLabel);\r\n      for (const metricData of prometheusResult) {\r\n        seriesList.push(this.transformMetricData(metricData, options, options.start, options.end));\r\n      }\r\n      seriesList = this.transformToHistogramOverTime(seriesList);\r\n      return seriesList;\r\n    } else {\r\n      const seriesList = [];\r\n      for (const metricData of prometheusResult) {\r\n        if (response.data.data.resultType === 'matrix') {\r\n          seriesList.push(this.transformMetricData(metricData, options, options.start, options.end));\r\n        } else if (response.data.data.resultType === 'vector') {\r\n          seriesList.push(this.transformInstantMetricData(metricData, options));\r\n        }\r\n      }\r\n      return seriesList;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  transformMetricData(metricData, options, start, end) {\r\n    const dps = [];\r\n    let metricLabel = null;\r\n\r\n    metricLabel = this.createMetricLabel(metricData.metric, options);\r\n\r\n    const stepMs = parseInt(options.step, 10) * 1000;\r\n    let baseTimestamp = start * 1000;\r\n\r\n    if (metricData.values === undefined) {\r\n      throw new Error('Prometheus heatmap error: data should be a time series');\r\n    }\r\n\r\n    for (const value of metricData.values) {\r\n      let dpValue = parseFloat(value[1]);\r\n      if (_.isNaN(dpValue)) {\r\n        dpValue = null;\r\n      }\r\n\r\n      const timestamp = parseFloat(value[0]) * 1000;\r\n      for (let t = baseTimestamp; t < timestamp; t += stepMs) {\r\n        dps.push([null, t]);\r\n      }\r\n      baseTimestamp = timestamp + stepMs;\r\n      dps.push([dpValue, timestamp]);\r\n    }\r\n\r\n    const endTimestamp = end * 1000;\r\n    for (let t = baseTimestamp; t <= endTimestamp; t += stepMs) {\r\n      dps.push([null, t]);\r\n    }\r\n\r\n    return {\r\n      datapoints: dps,\r\n      query: options.query,\r\n      responseIndex: options.responseIndex,\r\n      target: metricLabel,\r\n    };\r\n  }\r\n\r\n  transformMetricDataToTable(md, resultCount: number, refId: string) {\r\n    const table = new TableModel();\r\n    let i, j;\r\n    const metricLabels = {};\r\n\r\n    if (md.length === 0) {\r\n      return table;\r\n    }\r\n\r\n    // Collect all labels across all metrics\r\n    _.each(md, series => {\r\n      for (const label in series.metric) {\r\n        if (!metricLabels.hasOwnProperty(label)) {\r\n          metricLabels[label] = 1;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Sort metric labels, create columns for them and record their index\r\n    const sortedLabels = _.keys(metricLabels).sort();\r\n    table.columns.push({ text: 'Time', type: 'time' });\r\n    _.each(sortedLabels, (label, labelIndex) => {\r\n      metricLabels[label] = labelIndex + 1;\r\n      table.columns.push({ text: label, filterable: !label.startsWith('__') });\r\n    });\r\n    const valueText = resultCount > 1 ? `Value #${refId}` : 'Value';\r\n    table.columns.push({ text: valueText });\r\n\r\n    // Populate rows, set value to empty string when label not present.\r\n    _.each(md, series => {\r\n      if (series.value) {\r\n        series.values = [series.value];\r\n      }\r\n      if (series.values) {\r\n        for (i = 0; i < series.values.length; i++) {\r\n          const values = series.values[i];\r\n          const reordered: any = [values[0] * 1000];\r\n          if (series.metric) {\r\n            for (j = 0; j < sortedLabels.length; j++) {\r\n              const label = sortedLabels[j];\r\n              if (series.metric.hasOwnProperty(label)) {\r\n                reordered.push(series.metric[label]);\r\n              } else {\r\n                reordered.push('');\r\n              }\r\n            }\r\n          }\r\n          reordered.push(parseFloat(values[1]));\r\n          table.rows.push(reordered);\r\n        }\r\n      }\r\n    });\r\n\r\n    return table;\r\n  }\r\n\r\n  transformInstantMetricData(md, options) {\r\n    const dps = [];\r\n    let metricLabel = null;\r\n    metricLabel = this.createMetricLabel(md.metric, options);\r\n    dps.push([parseFloat(md.value[1]), md.value[0] * 1000]);\r\n    return { target: metricLabel, datapoints: dps, labels: md.metric };\r\n  }\r\n\r\n  createMetricLabel(labelData, options) {\r\n    let label = '';\r\n    if (_.isUndefined(options) || _.isEmpty(options.legendFormat)) {\r\n      label = this.getOriginalMetricName(labelData);\r\n    } else {\r\n      label = this.renderTemplate(this.templateSrv.replace(options.legendFormat), labelData);\r\n    }\r\n    if (!label || label === '{}') {\r\n      label = options.query;\r\n    }\r\n    return label;\r\n  }\r\n\r\n  renderTemplate(aliasPattern, aliasData) {\r\n    const aliasRegex = /\\{\\{\\s*(.+?)\\s*\\}\\}/g;\r\n    return aliasPattern.replace(aliasRegex, (match, g1) => {\r\n      if (aliasData[g1]) {\r\n        return aliasData[g1];\r\n      }\r\n      return g1;\r\n    });\r\n  }\r\n\r\n  getOriginalMetricName(labelData) {\r\n    const metricName = labelData.__name__ || '';\r\n    delete labelData.__name__;\r\n    const labelPart = _.map(_.toPairs(labelData), label => {\r\n      return label[0] + '=\"' + label[1] + '\"';\r\n    }).join(',');\r\n    return metricName + '{' + labelPart + '}';\r\n  }\r\n\r\n  transformToHistogramOverTime(seriesList) {\r\n    /*      t1 = timestamp1, t2 = timestamp2 etc.\r\n            t1  t2  t3          t1  t2  t3\r\n    le10    10  10  0     =>    10  10  0\r\n    le20    20  10  30    =>    10  0   30\r\n    le30    30  10  35    =>    10  0   5\r\n    */\r\n    for (let i = seriesList.length - 1; i > 0; i--) {\r\n      const topSeries = seriesList[i].datapoints;\r\n      const bottomSeries = seriesList[i - 1].datapoints;\r\n      if (!topSeries || !bottomSeries) {\r\n        throw new Error('Prometheus heatmap transform error: data should be a time series');\r\n      }\r\n\r\n      for (let j = 0; j < topSeries.length; j++) {\r\n        const bottomPoint = bottomSeries[j] || [0];\r\n        topSeries[j][0] -= bottomPoint[0];\r\n      }\r\n    }\r\n\r\n    return seriesList;\r\n  }\r\n}\r\n\r\nfunction sortSeriesByLabel(s1, s2): number {\r\n  let le1, le2;\r\n\r\n  try {\r\n    // fail if not integer. might happen with bad queries\r\n    le1 = parseHistogramLabel(s1.metric.le);\r\n    le2 = parseHistogramLabel(s2.metric.le);\r\n  } catch (err) {\r\n    console.log(err);\r\n    return 0;\r\n  }\r\n\r\n  if (le1 > le2) {\r\n    return 1;\r\n  }\r\n\r\n  if (le1 < le2) {\r\n    return -1;\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\nfunction parseHistogramLabel(le: string): number {\r\n  if (le === '+Inf') {\r\n    return +Infinity;\r\n  }\r\n  return Number(le);\r\n}\r\n","import _ from 'lodash';\r\n\r\nconst keywords = 'by|without|on|ignoring|group_left|group_right';\r\n\r\n// Duplicate from mode-prometheus.js, which can't be used in tests due to global ace not being loaded.\r\nconst builtInWords = [\r\n  keywords,\r\n  'count|count_values|min|max|avg|sum|stddev|stdvar|bottomk|topk|quantile',\r\n  'true|false|null|__name__|job',\r\n  'abs|absent|ceil|changes|clamp_max|clamp_min|count_scalar|day_of_month|day_of_week|days_in_month|delta|deriv',\r\n  'drop_common_labels|exp|floor|histogram_quantile|holt_winters|hour|idelta|increase|irate|label_replace|ln|log2',\r\n  'log10|minute|month|predict_linear|rate|resets|round|scalar|sort|sort_desc|sqrt|time|vector|year|avg_over_time',\r\n  'min_over_time|max_over_time|sum_over_time|count_over_time|quantile_over_time|stddev_over_time|stdvar_over_time',\r\n]\r\n  .join('|')\r\n  .split('|');\r\n\r\nconst metricNameRegexp = /([A-Za-z:][\\w:]*)\\b(?![\\(\\]{=!\",])/g;\r\nconst selectorRegexp = /{([^{]*)}/g;\r\n\r\n// addLabelToQuery('foo', 'bar', 'baz') => 'foo{bar=\"baz\"}'\r\nexport function addLabelToQuery(query: string, key: string, value: string, operator?: string): string {\r\n  if (!key || !value) {\r\n    throw new Error('Need label to add to query.');\r\n  }\r\n\r\n  // Add empty selectors to bare metric names\r\n  let previousWord;\r\n  query = query.replace(metricNameRegexp, (match, word, offset) => {\r\n    const insideSelector = isPositionInsideChars(query, offset, '{', '}');\r\n    // Handle \"sum by (key) (metric)\"\r\n    const previousWordIsKeyWord = previousWord && keywords.split('|').indexOf(previousWord) > -1;\r\n    previousWord = word;\r\n    if (!insideSelector && !previousWordIsKeyWord && builtInWords.indexOf(word) === -1) {\r\n      return `${word}{}`;\r\n    }\r\n    return word;\r\n  });\r\n\r\n  // Adding label to existing selectors\r\n  let match = selectorRegexp.exec(query);\r\n  const parts = [];\r\n  let lastIndex = 0;\r\n  let suffix = '';\r\n\r\n  while (match) {\r\n    const prefix = query.slice(lastIndex, match.index);\r\n    const selector = match[1];\r\n    const selectorWithLabel = addLabelToSelector(selector, key, value, operator);\r\n    lastIndex = match.index + match[1].length + 2;\r\n    suffix = query.slice(match.index + match[0].length);\r\n    parts.push(prefix, '{', selectorWithLabel, '}');\r\n    match = selectorRegexp.exec(query);\r\n  }\r\n\r\n  parts.push(suffix);\r\n  return parts.join('');\r\n}\r\n\r\nconst labelRegexp = /(\\w+)\\s*(=|!=|=~|!~)\\s*(\"[^\"]*\")/g;\r\n\r\nfunction addLabelToSelector(selector: string, labelKey: string, labelValue: string, labelOperator?: string) {\r\n  const parsedLabels = [];\r\n\r\n  // Split selector into labels\r\n  if (selector) {\r\n    let match = labelRegexp.exec(selector);\r\n    while (match) {\r\n      parsedLabels.push({ key: match[1], operator: match[2], value: match[3] });\r\n      match = labelRegexp.exec(selector);\r\n    }\r\n  }\r\n\r\n  // Add new label\r\n  const operatorForLabelKey = labelOperator || '=';\r\n  parsedLabels.push({ key: labelKey, operator: operatorForLabelKey, value: `\"${labelValue}\"` });\r\n\r\n  // Sort labels by key and put them together\r\n  return _.chain(parsedLabels)\r\n    .uniqWith(_.isEqual)\r\n    .compact()\r\n    .sortBy('key')\r\n    .map(({ key, operator, value }) => `${key}${operator}${value}`)\r\n    .value()\r\n    .join(',');\r\n}\r\n\r\nfunction isPositionInsideChars(text: string, position: number, openChar: string, closeChar: string) {\r\n  const nextSelectorStart = text.slice(position).indexOf(openChar);\r\n  const nextSelectorEnd = text.slice(position).indexOf(closeChar);\r\n  return nextSelectorEnd > -1 && (nextSelectorStart === -1 || nextSelectorStart > nextSelectorEnd);\r\n}\r\n\r\nexport default addLabelToQuery;\r\n","import _ from 'lodash';\r\n\r\nexport function getQueryHints(series: any[], datasource?: any): any[] {\r\n  const hints = series.map((s, i) => {\r\n    const query: string = s.query;\r\n    const index: number = s.responseIndex;\r\n    if (query === undefined || index === undefined) {\r\n      return null;\r\n    }\r\n\r\n    // ..._bucket metric needs a histogram_quantile()\r\n    const histogramMetric = query.trim().match(/^\\w+_bucket$/);\r\n    if (histogramMetric) {\r\n      const label = 'Time series has buckets, you probably wanted a histogram.';\r\n      return {\r\n        index,\r\n        label,\r\n        fix: {\r\n          label: 'Fix by adding histogram_quantile().',\r\n          action: {\r\n            type: 'ADD_HISTOGRAM_QUANTILE',\r\n            query,\r\n            index,\r\n          },\r\n        },\r\n      };\r\n    }\r\n\r\n    // Check for monotony\r\n    const datapoints: number[][] = s.datapoints;\r\n    if (query.indexOf('rate(') === -1 && datapoints.length > 1) {\r\n      let increasing = false;\r\n      const nonNullData = datapoints.filter(dp => dp[0] !== null);\r\n      const monotonic = nonNullData.every((dp, index) => {\r\n        if (index === 0) {\r\n          return true;\r\n        }\r\n        increasing = increasing || dp[0] > nonNullData[index - 1][0];\r\n        // monotonic?\r\n        return dp[0] >= nonNullData[index - 1][0];\r\n      });\r\n      if (increasing && monotonic) {\r\n        const simpleMetric = query.trim().match(/^\\w+$/);\r\n        let label = 'Time series is monotonously increasing.';\r\n        let fix;\r\n        if (simpleMetric) {\r\n          fix = {\r\n            label: 'Fix by adding rate().',\r\n            action: {\r\n              type: 'ADD_RATE',\r\n              query,\r\n              index,\r\n            },\r\n          };\r\n        } else {\r\n          label = `${label} Try applying a rate() function.`;\r\n        }\r\n        return {\r\n          label,\r\n          index,\r\n          fix,\r\n        };\r\n      }\r\n    }\r\n\r\n    // Check for recording rules expansion\r\n    if (datasource && datasource.ruleMappings) {\r\n      const mapping = datasource.ruleMappings;\r\n      const mappingForQuery = Object.keys(mapping).reduce((acc, ruleName) => {\r\n        if (query.search(ruleName) > -1) {\r\n          return {\r\n            ...acc,\r\n            [ruleName]: mapping[ruleName],\r\n          };\r\n        }\r\n        return acc;\r\n      }, {});\r\n      if (_.size(mappingForQuery) > 0) {\r\n        const label = 'Query contains recording rules.';\r\n        return {\r\n          label,\r\n          index,\r\n          fix: {\r\n            label: 'Expand rules',\r\n            action: {\r\n              type: 'EXPAND_RULES',\r\n              query,\r\n              index,\r\n              mapping: mappingForQuery,\r\n            },\r\n          },\r\n        };\r\n      }\r\n    }\r\n\r\n    // No hint found\r\n    return null;\r\n  });\r\n  return hints;\r\n}\r\n","import _ from 'lodash';\r\n\r\nimport $ from 'jquery';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport * as dateMath from 'app/core/utils/datemath';\r\nimport PrometheusMetricFindQuery from './metric_find_query';\r\nimport { ResultTransformer } from './result_transformer';\r\nimport { BackendSrv } from 'app/core/services/backend_srv';\r\n\r\nimport addLabelToQuery from './add_label_to_query';\r\nimport { getQueryHints } from './query_hints';\r\n\r\nexport function alignRange(start, end, step) {\r\n  const alignedEnd = Math.ceil(end / step) * step;\r\n  const alignedStart = Math.floor(start / step) * step;\r\n  return {\r\n    end: alignedEnd,\r\n    start: alignedStart,\r\n  };\r\n}\r\n\r\nexport function extractRuleMappingFromGroups(groups: any[]) {\r\n  return groups.reduce(\r\n    (mapping, group) =>\r\n      group.rules.filter(rule => rule.type === 'recording').reduce(\r\n        (acc, rule) => ({\r\n          ...acc,\r\n          [rule.name]: rule.query,\r\n        }),\r\n        mapping\r\n      ),\r\n    {}\r\n  );\r\n}\r\n\r\nexport function prometheusRegularEscape(value) {\r\n  if (typeof value === 'string') {\r\n    return value.replace(/'/g, \"\\\\\\\\'\");\r\n  }\r\n  return value;\r\n}\r\n\r\nexport function prometheusSpecialRegexEscape(value) {\r\n  if (typeof value === 'string') {\r\n    return prometheusRegularEscape(value.replace(/\\\\/g, '\\\\\\\\\\\\\\\\').replace(/[$^*{}\\[\\]+?.()]/g, '\\\\\\\\$&'));\r\n  }\r\n  return value;\r\n}\r\n\r\nexport class PrometheusDatasource {\r\n  type: string;\r\n  editorSrc: string;\r\n  name: string;\r\n  ruleMappings: { [index: string]: string };\r\n  url: string;\r\n  directUrl: string;\r\n  basicAuth: any;\r\n  withCredentials: any;\r\n  metricsNameCache: any;\r\n  interval: string;\r\n  queryTimeout: string;\r\n  httpMethod: string;\r\n  resultTransformer: ResultTransformer;\r\n\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private $q, private backendSrv: BackendSrv, private templateSrv, private timeSrv) {\r\n    this.type = 'prometheus';\r\n    this.editorSrc = 'app/features/prometheus/partials/query.editor.html';\r\n    this.name = instanceSettings.name;\r\n    this.url = instanceSettings.url;\r\n    this.directUrl = instanceSettings.directUrl;\r\n    this.basicAuth = instanceSettings.basicAuth;\r\n    this.withCredentials = instanceSettings.withCredentials;\r\n    this.interval = instanceSettings.jsonData.timeInterval || '15s';\r\n    this.queryTimeout = instanceSettings.jsonData.queryTimeout;\r\n    this.httpMethod = instanceSettings.jsonData.httpMethod || 'GET';\r\n    this.resultTransformer = new ResultTransformer(templateSrv);\r\n    this.ruleMappings = {};\r\n  }\r\n\r\n  init() {\r\n    this.loadRules();\r\n  }\r\n\r\n  _request(url, data?, options?: any) {\r\n    options = _.defaults(options || {}, {\r\n      url: this.url + url,\r\n      method: this.httpMethod,\r\n    });\r\n\r\n    if (options.method === 'GET') {\r\n      if (!_.isEmpty(data)) {\r\n        options.url =\r\n          options.url +\r\n          '?' +\r\n          _.map(data, (v, k) => {\r\n            return encodeURIComponent(k) + '=' + encodeURIComponent(v);\r\n          }).join('&');\r\n      }\r\n    } else {\r\n      options.headers = {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      };\r\n      options.transformRequest = data => {\r\n        return $.param(data);\r\n      };\r\n      options.data = data;\r\n    }\r\n\r\n    if (this.basicAuth || this.withCredentials) {\r\n      options.withCredentials = true;\r\n    }\r\n\r\n    if (this.basicAuth) {\r\n      options.headers = {\r\n        Authorization: this.basicAuth,\r\n      };\r\n    }\r\n\r\n    return this.backendSrv.datasourceRequest(options);\r\n  }\r\n\r\n  // Use this for tab completion features, wont publish response to other components\r\n  metadataRequest(url) {\r\n    return this._request(url, null, { method: 'GET', silent: true });\r\n  }\r\n\r\n  interpolateQueryExpr(value, variable, defaultFormatFn) {\r\n    // if no multi or include all do not regexEscape\r\n    if (!variable.multi && !variable.includeAll) {\r\n      return prometheusRegularEscape(value);\r\n    }\r\n\r\n    if (typeof value === 'string') {\r\n      return prometheusSpecialRegexEscape(value);\r\n    }\r\n\r\n    const escapedValues = _.map(value, prometheusSpecialRegexEscape);\r\n    return escapedValues.join('|');\r\n  }\r\n\r\n  targetContainsTemplate(target) {\r\n    return this.templateSrv.variableExists(target.expr);\r\n  }\r\n\r\n  query(options) {\r\n    const start = this.getPrometheusTime(options.range.from, false);\r\n    const end = this.getPrometheusTime(options.range.to, true);\r\n\r\n    const queries = [];\r\n    const activeTargets = [];\r\n\r\n    options = _.clone(options);\r\n\r\n    for (const target of options.targets) {\r\n      if (!target.expr || target.hide) {\r\n        continue;\r\n      }\r\n\r\n      activeTargets.push(target);\r\n      queries.push(this.createQuery(target, options, start, end));\r\n    }\r\n\r\n    // No valid targets, return the empty result to save a round trip.\r\n    if (_.isEmpty(queries)) {\r\n      return this.$q.when({ data: [] });\r\n    }\r\n\r\n    const allQueryPromise = _.map(queries, query => {\r\n      if (!query.instant) {\r\n        return this.performTimeSeriesQuery(query, query.start, query.end);\r\n      } else {\r\n        return this.performInstantQuery(query, end);\r\n      }\r\n    });\r\n\r\n    return this.$q.all(allQueryPromise).then(responseList => {\r\n      let result = [];\r\n      let hints = [];\r\n\r\n      _.each(responseList, (response, index) => {\r\n        if (response.status === 'error') {\r\n          const error = {\r\n            index,\r\n            ...response.error,\r\n          };\r\n          throw error;\r\n        }\r\n\r\n        // Keeping original start/end for transformers\r\n        const transformerOptions = {\r\n          format: activeTargets[index].format,\r\n          step: queries[index].step,\r\n          legendFormat: activeTargets[index].legendFormat,\r\n          start: queries[index].start,\r\n          end: queries[index].end,\r\n          query: queries[index].expr,\r\n          responseListLength: responseList.length,\r\n          responseIndex: index,\r\n          refId: activeTargets[index].refId,\r\n        };\r\n        const series = this.resultTransformer.transform(response, transformerOptions);\r\n        result = [...result, ...series];\r\n\r\n        if (queries[index].hinting) {\r\n          const queryHints = getQueryHints(series, this);\r\n          hints = [...hints, ...queryHints];\r\n        }\r\n      });\r\n\r\n      return { data: result, hints };\r\n    });\r\n  }\r\n\r\n  createQuery(target, options, start, end) {\r\n    const query: any = {\r\n      hinting: target.hinting,\r\n      instant: target.instant,\r\n    };\r\n    const range = Math.ceil(end - start);\r\n\r\n    let interval = kbn.interval_to_seconds(options.interval);\r\n    // Minimum interval (\"Min step\"), if specified for the query. or same as interval otherwise\r\n    const minInterval = kbn.interval_to_seconds(\r\n      this.templateSrv.replace(target.interval, options.scopedVars) || options.interval\r\n    );\r\n    const intervalFactor = target.intervalFactor || 1;\r\n    // Adjust the interval to take into account any specified minimum and interval factor plus Prometheus limits\r\n    const adjustedInterval = this.adjustInterval(interval, minInterval, range, intervalFactor);\r\n    let scopedVars = { ...options.scopedVars, ...this.getRangeScopedVars() };\r\n    // If the interval was adjusted, make a shallow copy of scopedVars with updated interval vars\r\n    if (interval !== adjustedInterval) {\r\n      interval = adjustedInterval;\r\n      scopedVars = Object.assign({}, options.scopedVars, {\r\n        __interval: { text: interval + 's', value: interval + 's' },\r\n        __interval_ms: { text: interval * 1000, value: interval * 1000 },\r\n        ...this.getRangeScopedVars(),\r\n      });\r\n    }\r\n    query.step = interval;\r\n\r\n    let expr = target.expr;\r\n\r\n    // Apply adhoc filters\r\n    const adhocFilters = this.templateSrv.getAdhocFilters(this.name);\r\n    expr = adhocFilters.reduce((acc, filter) => {\r\n      const { key, operator } = filter;\r\n      let { value } = filter;\r\n      if (operator === '=~' || operator === '!~') {\r\n        value = prometheusSpecialRegexEscape(value);\r\n      }\r\n      return addLabelToQuery(acc, key, value, operator);\r\n    }, expr);\r\n\r\n    // Only replace vars in expression after having (possibly) updated interval vars\r\n    query.expr = this.templateSrv.replace(expr, scopedVars, this.interpolateQueryExpr);\r\n    query.requestId = options.panelId + target.refId;\r\n\r\n    // Align query interval with step\r\n    const adjusted = alignRange(start, end, query.step);\r\n    query.start = adjusted.start;\r\n    query.end = adjusted.end;\r\n\r\n    return query;\r\n  }\r\n\r\n  adjustInterval(interval, minInterval, range, intervalFactor) {\r\n    // Prometheus will drop queries that might return more than 11000 data points.\r\n    // Calibrate interval if it is too small.\r\n    if (interval !== 0 && range / intervalFactor / interval > 11000) {\r\n      interval = Math.ceil(range / intervalFactor / 11000);\r\n    }\r\n    return Math.max(interval * intervalFactor, minInterval, 1);\r\n  }\r\n\r\n  performTimeSeriesQuery(query, start, end) {\r\n    if (start > end) {\r\n      throw { message: 'Invalid time range' };\r\n    }\r\n\r\n    const url = '/api/v1/query_range';\r\n    const data = {\r\n      query: query.expr,\r\n      start: start,\r\n      end: end,\r\n      step: query.step,\r\n    };\r\n    if (this.queryTimeout) {\r\n      data['timeout'] = this.queryTimeout;\r\n    }\r\n    return this._request(url, data, { requestId: query.requestId });\r\n  }\r\n\r\n  performInstantQuery(query, time) {\r\n    const url = '/api/v1/query';\r\n    const data = {\r\n      query: query.expr,\r\n      time: time,\r\n    };\r\n    if (this.queryTimeout) {\r\n      data['timeout'] = this.queryTimeout;\r\n    }\r\n    return this._request(url, data, { requestId: query.requestId });\r\n  }\r\n\r\n  performSuggestQuery(query, cache = false) {\r\n    const url = '/api/v1/label/__name__/values';\r\n\r\n    if (cache && this.metricsNameCache && this.metricsNameCache.expire > Date.now()) {\r\n      return this.$q.when(\r\n        _.filter(this.metricsNameCache.data, metricName => {\r\n          return metricName.indexOf(query) !== 1;\r\n        })\r\n      );\r\n    }\r\n\r\n    return this.metadataRequest(url).then(result => {\r\n      this.metricsNameCache = {\r\n        data: result.data.data,\r\n        expire: Date.now() + 60 * 1000,\r\n      };\r\n      return _.filter(result.data.data, metricName => {\r\n        return metricName.indexOf(query) !== 1;\r\n      });\r\n    });\r\n  }\r\n\r\n  metricFindQuery(query) {\r\n    if (!query) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    const scopedVars = {\r\n      __interval: { text: this.interval, value: this.interval },\r\n      __interval_ms: { text: kbn.interval_to_ms(this.interval), value: kbn.interval_to_ms(this.interval) },\r\n      ...this.getRangeScopedVars(),\r\n    };\r\n    const interpolated = this.templateSrv.replace(query, scopedVars, this.interpolateQueryExpr);\r\n    const metricFindQuery = new PrometheusMetricFindQuery(this, interpolated, this.timeSrv);\r\n    return metricFindQuery.process();\r\n  }\r\n\r\n  getRangeScopedVars() {\r\n    const range = this.timeSrv.timeRange();\r\n    const msRange = range.to.diff(range.from);\r\n    const sRange = Math.round(msRange / 1000);\r\n    const regularRange = kbn.secondsToHms(msRange / 1000);\r\n    return {\r\n      __range_ms: { text: msRange, value: msRange },\r\n      __range_s: { text: sRange, value: sRange },\r\n      __range: { text: regularRange, value: regularRange },\r\n    };\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    const annotation = options.annotation;\r\n    const expr = annotation.expr || '';\r\n    let tagKeys = annotation.tagKeys || '';\r\n    const titleFormat = annotation.titleFormat || '';\r\n    const textFormat = annotation.textFormat || '';\r\n\r\n    if (!expr) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    const step = annotation.step || '60s';\r\n    const start = this.getPrometheusTime(options.range.from, false);\r\n    const end = this.getPrometheusTime(options.range.to, true);\r\n    // Unsetting min interval\r\n    const queryOptions = {\r\n      ...options,\r\n      interval: '0s',\r\n    };\r\n    const query = this.createQuery({ expr, interval: step }, queryOptions, start, end);\r\n\r\n    const self = this;\r\n    return this.performTimeSeriesQuery(query, query.start, query.end).then(results => {\r\n      const eventList = [];\r\n      tagKeys = tagKeys.split(',');\r\n\r\n      _.each(results.data.data.result, series => {\r\n        const tags = _.chain(series.metric)\r\n          .filter((v, k) => {\r\n            return _.includes(tagKeys, k);\r\n          })\r\n          .value();\r\n\r\n        for (const value of series.values) {\r\n          const valueIsTrue = value[1] === '1'; // e.g. ALERTS\r\n          if (valueIsTrue || annotation.useValueForTime) {\r\n            const event = {\r\n              annotation: annotation,\r\n              title: self.resultTransformer.renderTemplate(titleFormat, series.metric),\r\n              tags: tags,\r\n              text: self.resultTransformer.renderTemplate(textFormat, series.metric),\r\n            };\r\n\r\n            if (annotation.useValueForTime) {\r\n              event['time'] = Math.floor(parseFloat(value[1]));\r\n            } else {\r\n              event['time'] = Math.floor(parseFloat(value[0])) * 1000;\r\n            }\r\n\r\n            eventList.push(event);\r\n          }\r\n        }\r\n      });\r\n\r\n      return eventList;\r\n    });\r\n  }\r\n\r\n  testDatasource() {\r\n    const now = new Date().getTime();\r\n    return this.performInstantQuery({ expr: '1+1' }, now / 1000).then(response => {\r\n      if (response.data.status === 'success') {\r\n        return { status: 'success', message: 'Data source is working' };\r\n      } else {\r\n        return { status: 'error', message: response.error };\r\n      }\r\n    });\r\n  }\r\n\r\n  getExploreState(targets: any[]) {\r\n    let state = {};\r\n    if (targets && targets.length > 0) {\r\n      const queries = targets.map(t => ({\r\n        query: this.templateSrv.replace(t.expr, {}, this.interpolateQueryExpr),\r\n        format: t.format,\r\n      }));\r\n      state = {\r\n        ...state,\r\n        queries,\r\n        datasource: this.name,\r\n      };\r\n    }\r\n    return state;\r\n  }\r\n\r\n  loadRules() {\r\n    this.metadataRequest('/api/v1/rules')\r\n      .then(res => res.data || res.json())\r\n      .then(body => {\r\n        const groups = _.get(body, ['data', 'groups']);\r\n        if (groups) {\r\n          this.ruleMappings = extractRuleMappingFromGroups(groups);\r\n        }\r\n      })\r\n      .catch(e => {\r\n        console.log('Rules API is experimental. Ignore next error.');\r\n        console.error(e);\r\n      });\r\n  }\r\n\r\n  modifyQuery(query: string, action: any): string {\r\n    switch (action.type) {\r\n      case 'ADD_FILTER': {\r\n        return addLabelToQuery(query, action.key, action.value);\r\n      }\r\n      case 'ADD_HISTOGRAM_QUANTILE': {\r\n        return `histogram_quantile(0.95, sum(rate(${query}[5m])) by (le))`;\r\n      }\r\n      case 'ADD_RATE': {\r\n        return `rate(${query}[5m])`;\r\n      }\r\n      case 'EXPAND_RULES': {\r\n        const mapping = action.mapping;\r\n        if (mapping) {\r\n          const ruleNames = Object.keys(mapping);\r\n          const rulesRegex = new RegExp(`(\\\\s|^)(${ruleNames.join('|')})(\\\\s|$|\\\\()`, 'ig');\r\n          return query.replace(rulesRegex, (match, pre, name, post) => mapping[name]);\r\n        }\r\n      }\r\n      default:\r\n        return query;\r\n    }\r\n  }\r\n\r\n  getPrometheusTime(date, roundUp) {\r\n    if (_.isString(date)) {\r\n      date = dateMath.parse(date, roundUp);\r\n    }\r\n    return Math.ceil(date.valueOf() / 1000);\r\n  }\r\n\r\n  getTimeRange(): { start: number; end: number } {\r\n    const range = this.timeSrv.timeRange();\r\n    return {\r\n      start: this.getPrometheusTime(range.from, false),\r\n      end: this.getPrometheusTime(range.to, true),\r\n    };\r\n  }\r\n\r\n  getOriginalMetricName(labelData) {\r\n    return this.resultTransformer.getOriginalMetricName(labelData);\r\n  }\r\n}\r\n","import { PrometheusDatasource } from './datasource';\r\nimport _ from 'lodash';\r\n\r\nexport class PromCompleter {\r\n  labelQueryCache: any;\r\n  labelNameCache: any;\r\n  labelValueCache: any;\r\n  templateVariableCompletions: any;\r\n\r\n  identifierRegexps = [/\\[/, /[a-zA-Z0-9_:]/];\r\n\r\n  constructor(private datasource: PrometheusDatasource, private templateSrv) {\r\n    this.labelQueryCache = {};\r\n    this.labelNameCache = {};\r\n    this.labelValueCache = {};\r\n    this.templateVariableCompletions = this.templateSrv.variables.map(variable => {\r\n      return {\r\n        caption: '$' + variable.name,\r\n        value: '$' + variable.name,\r\n        meta: 'variable',\r\n        score: Number.MAX_VALUE,\r\n      };\r\n    });\r\n  }\r\n\r\n  getCompletions(editor, session, pos, prefix, callback) {\r\n    const wrappedCallback = (err, completions) => {\r\n      completions = completions.concat(this.templateVariableCompletions);\r\n      return callback(err, completions);\r\n    };\r\n\r\n    const token = session.getTokenAt(pos.row, pos.column);\r\n\r\n    switch (token.type) {\r\n      case 'entity.name.tag.label-matcher':\r\n        this.getCompletionsForLabelMatcherName(session, pos).then(completions => {\r\n          wrappedCallback(null, completions);\r\n        });\r\n        return;\r\n      case 'string.quoted.label-matcher':\r\n        this.getCompletionsForLabelMatcherValue(session, pos).then(completions => {\r\n          wrappedCallback(null, completions);\r\n        });\r\n        return;\r\n      case 'entity.name.tag.label-list-matcher':\r\n        this.getCompletionsForBinaryOperator(session, pos).then(completions => {\r\n          wrappedCallback(null, completions);\r\n        });\r\n        return;\r\n    }\r\n\r\n    if (token.type === 'paren.lparen' && token.value === '[') {\r\n      const vectors = [];\r\n      for (const unit of ['s', 'm', 'h']) {\r\n        for (const value of [1, 5, 10, 30]) {\r\n          vectors.push({\r\n            caption: value + unit,\r\n            value: '[' + value + unit,\r\n            meta: 'range vector',\r\n          });\r\n        }\r\n      }\r\n\r\n      vectors.unshift({\r\n        caption: '$__interval_ms',\r\n        value: '[$__interval_ms',\r\n        meta: 'range vector',\r\n      });\r\n\r\n      vectors.unshift({\r\n        caption: '$__interval',\r\n        value: '[$__interval',\r\n        meta: 'range vector',\r\n      });\r\n\r\n      wrappedCallback(null, vectors);\r\n      return;\r\n    }\r\n\r\n    const query = prefix;\r\n\r\n    return this.datasource.performSuggestQuery(query, true).then(metricNames => {\r\n      wrappedCallback(\r\n        null,\r\n        metricNames.map(name => {\r\n          let value = name;\r\n          if (prefix === '(') {\r\n            value = '(' + name;\r\n          }\r\n\r\n          return {\r\n            caption: name,\r\n            value: value,\r\n            meta: 'metric',\r\n          };\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  getCompletionsForLabelMatcherName(session, pos) {\r\n    const metricName = this.findMetricName(session, pos.row, pos.column);\r\n    if (!metricName) {\r\n      return Promise.resolve(this.transformToCompletions(['__name__', 'instance', 'job'], 'label name'));\r\n    }\r\n\r\n    if (this.labelNameCache[metricName]) {\r\n      return Promise.resolve(this.labelNameCache[metricName]);\r\n    }\r\n\r\n    return this.getLabelNameAndValueForExpression(metricName, 'metricName').then(result => {\r\n      const labelNames = this.transformToCompletions(\r\n        _.uniq(\r\n          _.flatten(\r\n            result.map(r => {\r\n              return Object.keys(r);\r\n            })\r\n          )\r\n        ),\r\n        'label name'\r\n      );\r\n      this.labelNameCache[metricName] = labelNames;\r\n      return Promise.resolve(labelNames);\r\n    });\r\n  }\r\n\r\n  getCompletionsForLabelMatcherValue(session, pos) {\r\n    const metricName = this.findMetricName(session, pos.row, pos.column);\r\n    if (!metricName) {\r\n      return Promise.resolve([]);\r\n    }\r\n\r\n    const labelNameToken = this.findToken(\r\n      session,\r\n      pos.row,\r\n      pos.column,\r\n      'entity.name.tag.label-matcher',\r\n      null,\r\n      'paren.lparen.label-matcher'\r\n    );\r\n    if (!labelNameToken) {\r\n      return Promise.resolve([]);\r\n    }\r\n    const labelName = labelNameToken.value;\r\n\r\n    if (this.labelValueCache[metricName] && this.labelValueCache[metricName][labelName]) {\r\n      return Promise.resolve(this.labelValueCache[metricName][labelName]);\r\n    }\r\n\r\n    return this.getLabelNameAndValueForExpression(metricName, 'metricName').then(result => {\r\n      const labelValues = this.transformToCompletions(\r\n        _.uniq(\r\n          result.map(r => {\r\n            return r[labelName];\r\n          })\r\n        ),\r\n        'label value'\r\n      );\r\n      this.labelValueCache[metricName] = this.labelValueCache[metricName] || {};\r\n      this.labelValueCache[metricName][labelName] = labelValues;\r\n      return Promise.resolve(labelValues);\r\n    });\r\n  }\r\n\r\n  getCompletionsForBinaryOperator(session, pos) {\r\n    const keywordOperatorToken = this.findToken(session, pos.row, pos.column, 'keyword.control', null, 'identifier');\r\n    if (!keywordOperatorToken) {\r\n      return Promise.resolve([]);\r\n    }\r\n    let rparenToken, expr;\r\n    switch (keywordOperatorToken.value) {\r\n      case 'by':\r\n      case 'without':\r\n        rparenToken = this.findToken(\r\n          session,\r\n          keywordOperatorToken.row,\r\n          keywordOperatorToken.column,\r\n          'paren.rparen',\r\n          null,\r\n          'identifier'\r\n        );\r\n        if (!rparenToken) {\r\n          return Promise.resolve([]);\r\n        }\r\n        expr = this.findExpressionMatchedParen(session, rparenToken.row, rparenToken.column);\r\n        if (expr === '') {\r\n          return Promise.resolve([]);\r\n        }\r\n        return this.getLabelNameAndValueForExpression(expr, 'expression').then(result => {\r\n          const labelNames = this.transformToCompletions(\r\n            _.uniq(\r\n              _.flatten(\r\n                result.map(r => {\r\n                  return Object.keys(r);\r\n                })\r\n              )\r\n            ),\r\n            'label name'\r\n          );\r\n          this.labelNameCache[expr] = labelNames;\r\n          return labelNames;\r\n        });\r\n      case 'on':\r\n      case 'ignoring':\r\n      case 'group_left':\r\n      case 'group_right':\r\n        const binaryOperatorToken = this.findToken(\r\n          session,\r\n          keywordOperatorToken.row,\r\n          keywordOperatorToken.column,\r\n          'keyword.operator.binary',\r\n          null,\r\n          'identifier'\r\n        );\r\n        if (!binaryOperatorToken) {\r\n          return Promise.resolve([]);\r\n        }\r\n        rparenToken = this.findToken(\r\n          session,\r\n          binaryOperatorToken.row,\r\n          binaryOperatorToken.column,\r\n          'paren.rparen',\r\n          null,\r\n          'identifier'\r\n        );\r\n        if (rparenToken) {\r\n          expr = this.findExpressionMatchedParen(session, rparenToken.row, rparenToken.column);\r\n          if (expr === '') {\r\n            return Promise.resolve([]);\r\n          }\r\n          return this.getLabelNameAndValueForExpression(expr, 'expression').then(result => {\r\n            const labelNames = this.transformToCompletions(\r\n              _.uniq(\r\n                _.flatten(\r\n                  result.map(r => {\r\n                    return Object.keys(r);\r\n                  })\r\n                )\r\n              ),\r\n              'label name'\r\n            );\r\n            this.labelNameCache[expr] = labelNames;\r\n            return labelNames;\r\n          });\r\n        } else {\r\n          const metricName = this.findMetricName(session, binaryOperatorToken.row, binaryOperatorToken.column);\r\n          return this.getLabelNameAndValueForExpression(metricName, 'metricName').then(result => {\r\n            const labelNames = this.transformToCompletions(\r\n              _.uniq(\r\n                _.flatten(\r\n                  result.map(r => {\r\n                    return Object.keys(r);\r\n                  })\r\n                )\r\n              ),\r\n              'label name'\r\n            );\r\n            this.labelNameCache[metricName] = labelNames;\r\n            return Promise.resolve(labelNames);\r\n          });\r\n        }\r\n    }\r\n\r\n    return Promise.resolve([]);\r\n  }\r\n\r\n  getLabelNameAndValueForExpression(expr: string, type: string): Promise<any> {\r\n    if (this.labelQueryCache[expr]) {\r\n      return Promise.resolve(this.labelQueryCache[expr]);\r\n    }\r\n    let query = expr;\r\n    if (type === 'metricName') {\r\n      let op = '=~';\r\n      if (/[a-zA-Z_:][a-zA-Z0-9_:]*/.test(expr)) {\r\n        op = '=';\r\n      }\r\n      query = '{__name__' + op + '\"' + expr + '\"}';\r\n    }\r\n    const { start, end } = this.datasource.getTimeRange();\r\n    const url = '/api/v1/series?match[]=' + encodeURIComponent(query) + '&start=' + start + '&end=' + end;\r\n    return this.datasource.metadataRequest(url).then(response => {\r\n      this.labelQueryCache[expr] = response.data.data;\r\n      return response.data.data;\r\n    });\r\n  }\r\n\r\n  transformToCompletions(words, meta) {\r\n    return words.map(name => {\r\n      return {\r\n        caption: name,\r\n        value: name,\r\n        meta: meta,\r\n        score: Number.MAX_VALUE,\r\n      };\r\n    });\r\n  }\r\n\r\n  findMetricName(session, row, column) {\r\n    let metricName = '';\r\n\r\n    let tokens;\r\n    const nameLabelNameToken = this.findToken(\r\n      session,\r\n      row,\r\n      column,\r\n      'entity.name.tag.label-matcher',\r\n      '__name__',\r\n      'paren.lparen.label-matcher'\r\n    );\r\n    if (nameLabelNameToken) {\r\n      tokens = session.getTokens(nameLabelNameToken.row);\r\n      const nameLabelValueToken = tokens[nameLabelNameToken.index + 2];\r\n      if (nameLabelValueToken && nameLabelValueToken.type === 'string.quoted.label-matcher') {\r\n        metricName = nameLabelValueToken.value.slice(1, -1); // cut begin/end quotation\r\n      }\r\n    } else {\r\n      const metricNameToken = this.findToken(session, row, column, 'identifier', null, null);\r\n      if (metricNameToken) {\r\n        tokens = session.getTokens(metricNameToken.row);\r\n        metricName = metricNameToken.value;\r\n      }\r\n    }\r\n\r\n    return metricName;\r\n  }\r\n\r\n  findToken(session, row, column, target, value, guard) {\r\n    let tokens, idx;\r\n    // find index and get column of previous token\r\n    for (let r = row; r >= 0; r--) {\r\n      let c;\r\n      tokens = session.getTokens(r);\r\n      if (r === row) {\r\n        // current row\r\n        c = 0;\r\n        for (idx = 0; idx < tokens.length; idx++) {\r\n          const nc = c + tokens[idx].value.length;\r\n          if (nc >= column) {\r\n            break;\r\n          }\r\n          c = nc;\r\n        }\r\n      } else {\r\n        idx = tokens.length - 1;\r\n        c =\r\n          _.sum(\r\n            tokens.map(t => {\r\n              return t.value.length;\r\n            })\r\n          ) - tokens[tokens.length - 1].value.length;\r\n      }\r\n\r\n      for (; idx >= 0; idx--) {\r\n        if (tokens[idx].type === guard) {\r\n          return null;\r\n        }\r\n\r\n        if (tokens[idx].type === target && (!value || tokens[idx].value === value)) {\r\n          tokens[idx].row = r;\r\n          tokens[idx].column = c;\r\n          tokens[idx].index = idx;\r\n          return tokens[idx];\r\n        }\r\n        c -= tokens[idx].value.length;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  findExpressionMatchedParen(session, row, column) {\r\n    let tokens, idx;\r\n    let deep = 1;\r\n    let expression = ')';\r\n    for (let r = row; r >= 0; r--) {\r\n      tokens = session.getTokens(r);\r\n      if (r === row) {\r\n        // current row\r\n        let c = 0;\r\n        for (idx = 0; idx < tokens.length; idx++) {\r\n          c += tokens[idx].value.length;\r\n          if (c >= column) {\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        idx = tokens.length - 1;\r\n      }\r\n\r\n      for (; idx >= 0; idx--) {\r\n        expression = tokens[idx].value + expression;\r\n        if (tokens[idx].type === 'paren.rparen') {\r\n          deep++;\r\n        } else if (tokens[idx].type === 'paren.lparen') {\r\n          deep--;\r\n          if (deep === 0) {\r\n            return expression;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return expression;\r\n  }\r\n}\r\n","import { PrometheusDatasource } from './datasource';\r\nimport { PrometheusQueryCtrl } from './query_ctrl';\r\nimport { PrometheusConfigCtrl } from './config_ctrl';\r\n\r\nclass PrometheusAnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n}\r\n\r\nexport {\r\n  PrometheusDatasource as Datasource,\r\n  PrometheusQueryCtrl as QueryCtrl,\r\n  PrometheusConfigCtrl as ConfigCtrl,\r\n  PrometheusAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\nimport { PromCompleter } from './completer';\r\nimport './mode-prometheus';\r\nimport './snippets/prometheus';\r\n\r\nclass PrometheusQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n\r\n  metric: any;\r\n  resolutions: any;\r\n  formats: any;\r\n  instant: any;\r\n  oldTarget: any;\r\n  suggestMetrics: any;\r\n  getMetricsAutocomplete: any;\r\n  linkToPrometheus: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private templateSrv) {\r\n    super($scope, $injector);\r\n\r\n    const target = this.target;\r\n    target.expr = target.expr || '';\r\n    target.intervalFactor = target.intervalFactor || 1;\r\n    target.format = target.format || this.getDefaultFormat();\r\n\r\n    this.metric = '';\r\n    this.resolutions = _.map([1, 2, 3, 4, 5, 10], f => {\r\n      return { factor: f, label: '1/' + f };\r\n    });\r\n\r\n    this.formats = [\r\n      { text: 'Time series', value: 'time_series' },\r\n      { text: 'Table', value: 'table' },\r\n      { text: 'Heatmap', value: 'heatmap' },\r\n    ];\r\n\r\n    this.instant = false;\r\n\r\n    this.updateLink();\r\n  }\r\n\r\n  getCompleter(query) {\r\n    return new PromCompleter(this.datasource, this.templateSrv);\r\n  }\r\n\r\n  getDefaultFormat() {\r\n    if (this.panelCtrl.panel.type === 'table') {\r\n      return 'table';\r\n    } else if (this.panelCtrl.panel.type === 'heatmap') {\r\n      return 'heatmap';\r\n    }\r\n\r\n    return 'time_series';\r\n  }\r\n\r\n  refreshMetricData() {\r\n    if (!_.isEqual(this.oldTarget, this.target)) {\r\n      this.oldTarget = angular.copy(this.target);\r\n      this.panelCtrl.refresh();\r\n      this.updateLink();\r\n    }\r\n  }\r\n\r\n  updateLink() {\r\n    const range = this.panelCtrl.range;\r\n    if (!range) {\r\n      return;\r\n    }\r\n\r\n    const rangeDiff = Math.ceil((range.to.valueOf() - range.from.valueOf()) / 1000);\r\n    const endTime = range.to.utc().format('YYYY-MM-DD HH:mm');\r\n    const expr = {\r\n      'g0.expr': this.templateSrv.replace(\r\n        this.target.expr,\r\n        this.panelCtrl.panel.scopedVars,\r\n        this.datasource.interpolateQueryExpr\r\n      ),\r\n      'g0.range_input': rangeDiff + 's',\r\n      'g0.end_input': endTime,\r\n      'g0.step_input': this.target.step,\r\n      'g0.stacked': this.panelCtrl.panel.stack ? 1 : 0,\r\n      'g0.tab': 0,\r\n    };\r\n    const args = _.map(expr, (v, k) => {\r\n      return k + '=' + encodeURIComponent(v);\r\n    }).join('&');\r\n    this.linkToPrometheus = this.datasource.directUrl + '/graph?' + args;\r\n  }\r\n\r\n  getCollapsedText() {\r\n    return this.target.expr;\r\n  }\r\n}\r\n\r\nexport { PrometheusQueryCtrl };\r\n","export class PrometheusConfigCtrl {\r\n  static templateUrl = 'public/app/plugins/datasource/prometheus/partials/config.html';\r\n  current: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope) {\r\n    this.current.jsonData.httpMethod = this.current.jsonData.httpMethod || 'GET';\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport default class ResponseParser {\r\n  constructor(private $q) {}\r\n\r\n  processQueryResult(res) {\r\n    const data = [];\r\n\r\n    if (!res.data.results) {\r\n      return { data: data };\r\n    }\r\n\r\n    for (const key in res.data.results) {\r\n      const queryRes = res.data.results[key];\r\n\r\n      if (queryRes.series) {\r\n        for (const series of queryRes.series) {\r\n          data.push({\r\n            target: series.name,\r\n            datapoints: series.points,\r\n            refId: queryRes.refId,\r\n            meta: queryRes.meta,\r\n          });\r\n        }\r\n      }\r\n\r\n      if (queryRes.tables) {\r\n        for (const table of queryRes.tables) {\r\n          table.type = 'table';\r\n          table.refId = queryRes.refId;\r\n          table.meta = queryRes.meta;\r\n          data.push(table);\r\n        }\r\n      }\r\n    }\r\n\r\n    return { data: data };\r\n  }\r\n\r\n  parseMetricFindQueryResult(refId, results) {\r\n    if (!results || results.data.length === 0 || results.data.results[refId].meta.rowCount === 0) {\r\n      return [];\r\n    }\r\n\r\n    const columns = results.data.results[refId].tables[0].columns;\r\n    const rows = results.data.results[refId].tables[0].rows;\r\n    const textColIndex = this.findColIndex(columns, '__text');\r\n    const valueColIndex = this.findColIndex(columns, '__value');\r\n\r\n    if (columns.length === 2 && textColIndex !== -1 && valueColIndex !== -1) {\r\n      return this.transformToKeyValueList(rows, textColIndex, valueColIndex);\r\n    }\r\n\r\n    return this.transformToSimpleList(rows);\r\n  }\r\n\r\n  transformToKeyValueList(rows, textColIndex, valueColIndex) {\r\n    const res = [];\r\n\r\n    for (let i = 0; i < rows.length; i++) {\r\n      if (!this.containsKey(res, rows[i][textColIndex])) {\r\n        res.push({ text: rows[i][textColIndex], value: rows[i][valueColIndex] });\r\n      }\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  transformToSimpleList(rows) {\r\n    const res = [];\r\n\r\n    for (let i = 0; i < rows.length; i++) {\r\n      for (let j = 0; j < rows[i].length; j++) {\r\n        const value = rows[i][j];\r\n        if (res.indexOf(value) === -1) {\r\n          res.push(value);\r\n        }\r\n      }\r\n    }\r\n\r\n    return _.map(res, value => {\r\n      return { text: value };\r\n    });\r\n  }\r\n\r\n  findColIndex(columns, colName) {\r\n    for (let i = 0; i < columns.length; i++) {\r\n      if (columns[i].text === colName) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  containsKey(res, key) {\r\n    for (let i = 0; i < res.length; i++) {\r\n      if (res[i].text === key) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  transformAnnotationResponse(options, data) {\r\n    const table = data.data.results[options.annotation.name].tables[0];\r\n\r\n    let timeColumnIndex = -1;\r\n    let textColumnIndex = -1;\r\n    let tagsColumnIndex = -1;\r\n\r\n    for (let i = 0; i < table.columns.length; i++) {\r\n      if (table.columns[i].text === 'time') {\r\n        timeColumnIndex = i;\r\n      } else if (table.columns[i].text === 'text') {\r\n        textColumnIndex = i;\r\n      } else if (table.columns[i].text === 'tags') {\r\n        tagsColumnIndex = i;\r\n      }\r\n    }\r\n\r\n    if (timeColumnIndex === -1) {\r\n      return this.$q.reject({ message: 'Missing mandatory time column (with time column alias) in annotation query.' });\r\n    }\r\n\r\n    const list = [];\r\n    for (let i = 0; i < table.rows.length; i++) {\r\n      const row = table.rows[i];\r\n      list.push({\r\n        annotation: options.annotation,\r\n        time: Math.floor(row[timeColumnIndex]),\r\n        text: row[textColumnIndex],\r\n        tags: row[tagsColumnIndex] ? row[tagsColumnIndex].trim().split(/\\s*,\\s*/) : [],\r\n      });\r\n    }\r\n\r\n    return list;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport ResponseParser from './response_parser';\r\n\r\nexport class MssqlDatasource {\r\n  id: any;\r\n  name: any;\r\n  responseParser: ResponseParser;\r\n  interval: string;\r\n\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private backendSrv, private $q, private templateSrv) {\r\n    this.name = instanceSettings.name;\r\n    this.id = instanceSettings.id;\r\n    this.responseParser = new ResponseParser(this.$q);\r\n    this.interval = (instanceSettings.jsonData || {}).timeInterval;\r\n  }\r\n\r\n  interpolateVariable(value, variable) {\r\n    if (typeof value === 'string') {\r\n      if (variable.multi || variable.includeAll) {\r\n        return \"'\" + value.replace(/'/g, `''`) + \"'\";\r\n      } else {\r\n        return value;\r\n      }\r\n    }\r\n\r\n    if (typeof value === 'number') {\r\n      return value;\r\n    }\r\n\r\n    const quotedValues = _.map(value, val => {\r\n      if (typeof value === 'number') {\r\n        return value;\r\n      }\r\n\r\n      return \"'\" + val.replace(/'/g, `''`) + \"'\";\r\n    });\r\n    return quotedValues.join(',');\r\n  }\r\n\r\n  query(options) {\r\n    const queries = _.filter(options.targets, item => {\r\n      return item.hide !== true;\r\n    }).map(item => {\r\n      return {\r\n        refId: item.refId,\r\n        intervalMs: options.intervalMs,\r\n        maxDataPoints: options.maxDataPoints,\r\n        datasourceId: this.id,\r\n        rawSql: this.templateSrv.replace(item.rawSql, options.scopedVars, this.interpolateVariable),\r\n        format: item.format,\r\n      };\r\n    });\r\n\r\n    if (queries.length === 0) {\r\n      return this.$q.when({ data: [] });\r\n    }\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: {\r\n          from: options.range.from.valueOf().toString(),\r\n          to: options.range.to.valueOf().toString(),\r\n          queries: queries,\r\n        },\r\n      })\r\n      .then(this.responseParser.processQueryResult);\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    if (!options.annotation.rawQuery) {\r\n      return this.$q.reject({ message: 'Query missing in annotation definition' });\r\n    }\r\n\r\n    const query = {\r\n      refId: options.annotation.name,\r\n      datasourceId: this.id,\r\n      rawSql: this.templateSrv.replace(options.annotation.rawQuery, options.scopedVars, this.interpolateVariable),\r\n      format: 'table',\r\n    };\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: {\r\n          from: options.range.from.valueOf().toString(),\r\n          to: options.range.to.valueOf().toString(),\r\n          queries: [query],\r\n        },\r\n      })\r\n      .then(data => this.responseParser.transformAnnotationResponse(options, data));\r\n  }\r\n\r\n  metricFindQuery(query, optionalOptions) {\r\n    let refId = 'tempvar';\r\n    if (optionalOptions && optionalOptions.variable && optionalOptions.variable.name) {\r\n      refId = optionalOptions.variable.name;\r\n    }\r\n\r\n    const interpolatedQuery = {\r\n      refId: refId,\r\n      datasourceId: this.id,\r\n      rawSql: this.templateSrv.replace(query, {}, this.interpolateVariable),\r\n      format: 'table',\r\n    };\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: {\r\n          queries: [interpolatedQuery],\r\n        },\r\n      })\r\n      .then(data => this.responseParser.parseMetricFindQueryResult(refId, data));\r\n  }\r\n\r\n  testDatasource() {\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: '/api/tsdb/query',\r\n        method: 'POST',\r\n        data: {\r\n          from: '5m',\r\n          to: 'now',\r\n          queries: [\r\n            {\r\n              refId: 'A',\r\n              intervalMs: 1,\r\n              maxDataPoints: 1,\r\n              datasourceId: this.id,\r\n              rawSql: 'SELECT 1',\r\n              format: 'table',\r\n            },\r\n          ],\r\n        },\r\n      })\r\n      .then(res => {\r\n        return { status: 'success', message: 'Database Connection OK' };\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        if (err.data && err.data.message) {\r\n          return { status: 'error', message: err.data.message };\r\n        } else {\r\n          return { status: 'error', message: err.status };\r\n        }\r\n      });\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\n\r\nexport interface MssqlQuery {\r\n  refId: string;\r\n  format: string;\r\n  alias: string;\r\n  rawSql: string;\r\n}\r\n\r\nexport interface QueryMeta {\r\n  sql: string;\r\n}\r\n\r\nconst defaultQuery = `SELECT\r\n  $__timeEpoch(<time_column>),\r\n  <value column> as value,\r\n  <series name column> as metric\r\nFROM\r\n  <table name>\r\nWHERE\r\n  $__timeFilter(time_column)\r\nORDER BY\r\n  <time_column> ASC`;\r\n\r\nexport class MssqlQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n\r\n  showLastQuerySQL: boolean;\r\n  formats: any[];\r\n  target: MssqlQuery;\r\n  lastQueryMeta: QueryMeta;\r\n  lastQueryError: string;\r\n  showHelp: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector) {\r\n    super($scope, $injector);\r\n\r\n    this.target.format = this.target.format || 'time_series';\r\n    this.target.alias = '';\r\n    this.formats = [{ text: 'Time series', value: 'time_series' }, { text: 'Table', value: 'table' }];\r\n\r\n    if (!this.target.rawSql) {\r\n      // special handling when in table panel\r\n      if (this.panelCtrl.panel.type === 'table') {\r\n        this.target.format = 'table';\r\n        this.target.rawSql = 'SELECT 1';\r\n      } else {\r\n        this.target.rawSql = defaultQuery;\r\n      }\r\n    }\r\n\r\n    this.panelCtrl.events.on('data-received', this.onDataReceived.bind(this), $scope);\r\n    this.panelCtrl.events.on('data-error', this.onDataError.bind(this), $scope);\r\n  }\r\n\r\n  onDataReceived(dataList) {\r\n    this.lastQueryMeta = null;\r\n    this.lastQueryError = null;\r\n\r\n    const anySeriesFromQuery = _.find(dataList, { refId: this.target.refId });\r\n    if (anySeriesFromQuery) {\r\n      this.lastQueryMeta = anySeriesFromQuery.meta;\r\n    }\r\n  }\r\n\r\n  onDataError(err) {\r\n    if (err.data && err.data.results) {\r\n      const queryRes = err.data.results[this.target.refId];\r\n      if (queryRes) {\r\n        this.lastQueryMeta = queryRes.meta;\r\n        this.lastQueryError = queryRes.error;\r\n      }\r\n    }\r\n  }\r\n}\r\n","export class MssqlConfigCtrl {\r\n  static templateUrl = 'partials/config.html';\r\n\r\n  current: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope) {\r\n    this.current.jsonData.encrypt = this.current.jsonData.encrypt || 'false';\r\n  }\r\n}\r\n","import { MssqlDatasource } from './datasource';\r\nimport { MssqlQueryCtrl } from './query_ctrl';\r\nimport { MssqlConfigCtrl } from './config_ctrl';\r\n\r\nconst defaultQuery = `SELECT\r\n    <time_column> as time,\r\n    <text_column> as text,\r\n    <tags_column> as tags\r\n  FROM\r\n    <table name>\r\n  WHERE\r\n    $__timeFilter(time_column)\r\n  ORDER BY\r\n    <time_column> ASC`;\r\n\r\nclass MssqlAnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n\r\n  annotation: any;\r\n\r\n  /** @ngInject */\r\n  constructor() {\r\n    this.annotation.rawQuery = this.annotation.rawQuery || defaultQuery;\r\n  }\r\n}\r\n\r\nexport {\r\n  MssqlDatasource,\r\n  MssqlDatasource as Datasource,\r\n  MssqlQueryCtrl as QueryCtrl,\r\n  MssqlConfigCtrl as ConfigCtrl,\r\n  MssqlAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","import _ from 'lodash';\r\nimport TableModel from 'app/core/table_model';\r\n\r\nclass TestDataDatasource {\r\n  id: any;\r\n\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private backendSrv, private $q) {\r\n    this.id = instanceSettings.id;\r\n  }\r\n\r\n  query(options) {\r\n    const queries = _.filter(options.targets, item => {\r\n      return item.hide !== true;\r\n    }).map(item => {\r\n      return {\r\n        refId: item.refId,\r\n        scenarioId: item.scenarioId,\r\n        intervalMs: options.intervalMs,\r\n        maxDataPoints: options.maxDataPoints,\r\n        stringInput: item.stringInput,\r\n        points: item.points,\r\n        alias: item.alias,\r\n        datasourceId: this.id,\r\n      };\r\n    });\r\n\r\n    if (queries.length === 0) {\r\n      return this.$q.when({ data: [] });\r\n    }\r\n\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        method: 'POST',\r\n        url: '/api/tsdb/query',\r\n        data: {\r\n          from: options.range.from.valueOf().toString(),\r\n          to: options.range.to.valueOf().toString(),\r\n          queries: queries,\r\n        },\r\n      })\r\n      .then(res => {\r\n        const data = [];\r\n\r\n        if (res.data.results) {\r\n          _.forEach(res.data.results, queryRes => {\r\n            if (queryRes.tables) {\r\n              for (const table of queryRes.tables) {\r\n                const model = new TableModel();\r\n                model.rows = table.rows;\r\n                model.columns = table.columns;\r\n\r\n                data.push(model);\r\n              }\r\n            }\r\n            for (const series of queryRes.series) {\r\n              data.push({\r\n                target: series.name,\r\n                datapoints: series.points,\r\n              });\r\n            }\r\n          });\r\n        }\r\n\r\n        return { data: data };\r\n      });\r\n  }\r\n\r\n  annotationQuery(options) {\r\n    let timeWalker = options.range.from.valueOf();\r\n    const to = options.range.to.valueOf();\r\n    const events = [];\r\n    const eventCount = 10;\r\n    const step = (to - timeWalker) / eventCount;\r\n\r\n    for (let i = 0; i < eventCount; i++) {\r\n      events.push({\r\n        annotation: options.annotation,\r\n        time: timeWalker,\r\n        text: 'This is the text, <a href=\"https://grafana.com\">Grafana.com</a>',\r\n        tags: ['text', 'server'],\r\n      });\r\n      timeWalker += step;\r\n    }\r\n    return this.$q.when(events);\r\n  }\r\n}\r\n\r\nexport { TestDataDatasource };\r\n","import _ from 'lodash';\r\n\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\nimport moment from 'moment';\r\n\r\nexport class TestDataQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n\r\n  scenarioList: any;\r\n  scenario: any;\r\n  newPointValue: number;\r\n  newPointTime: any;\r\n  selectedPoint: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private backendSrv) {\r\n    super($scope, $injector);\r\n\r\n    this.target.scenarioId = this.target.scenarioId || 'random_walk';\r\n    this.scenarioList = [];\r\n    this.newPointTime = moment();\r\n    this.selectedPoint = { text: 'Select point', value: null };\r\n  }\r\n\r\n  getPoints() {\r\n    return _.map(this.target.points, (point, index) => {\r\n      return {\r\n        text: moment(point[1]).format('MMMM Do YYYY, H:mm:ss') + ' : ' + point[0],\r\n        value: index,\r\n      };\r\n    });\r\n  }\r\n\r\n  pointSelected(option) {\r\n    this.selectedPoint = option;\r\n  }\r\n\r\n  deletePoint() {\r\n    this.target.points.splice(this.selectedPoint.value, 1);\r\n    this.selectedPoint = { text: 'Select point', value: null };\r\n    this.refresh();\r\n  }\r\n\r\n  addPoint() {\r\n    this.target.points = this.target.points || [];\r\n    this.target.points.push([this.newPointValue, this.newPointTime.valueOf()]);\r\n    this.target.points = _.sortBy(this.target.points, p => p[1]);\r\n    this.refresh();\r\n  }\r\n\r\n  $onInit() {\r\n    return this.backendSrv.get('/api/tsdb/testdata/scenarios').then(res => {\r\n      this.scenarioList = res;\r\n      this.scenario = _.find(this.scenarioList, { id: this.target.scenarioId });\r\n    });\r\n  }\r\n\r\n  scenarioChanged() {\r\n    this.scenario = _.find(this.scenarioList, { id: this.target.scenarioId });\r\n    this.target.stringInput = this.scenario.stringInput;\r\n\r\n    if (this.target.scenarioId === 'manual_entry') {\r\n      this.target.points = this.target.points || [];\r\n    } else {\r\n      delete this.target.points;\r\n    }\r\n\r\n    this.refresh();\r\n  }\r\n}\r\n","export enum MetricKind {\r\n  METRIC_KIND_UNSPECIFIED = 'METRIC_KIND_UNSPECIFIED',\r\n  GAUGE = 'GAUGE',\r\n  DELTA = 'DELTA',\r\n  CUMULATIVE = 'CUMULATIVE',\r\n}\r\n\r\nexport enum ValueTypes {\r\n  VALUE_TYPE_UNSPECIFIED = 'VALUE_TYPE_UNSPECIFIED',\r\n  BOOL = 'BOOL',\r\n  INT64 = 'INT64',\r\n  DOUBLE = 'DOUBLE',\r\n  STRING = 'STRING',\r\n  DISTRIBUTION = 'DISTRIBUTION',\r\n  MONEY = 'MONEY',\r\n}\r\n\r\nexport const alignOptions = [\r\n  {\r\n    text: 'delta',\r\n    value: 'ALIGN_DELTA',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.CUMULATIVE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'rate',\r\n    value: 'ALIGN_RATE',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.CUMULATIVE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'interpolate',\r\n    value: 'ALIGN_INTERPOLATE',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.GAUGE],\r\n  },\r\n  {\r\n    text: 'next older',\r\n    value: 'ALIGN_NEXT_OLDER',\r\n    valueTypes: [\r\n      ValueTypes.INT64,\r\n      ValueTypes.DOUBLE,\r\n      ValueTypes.MONEY,\r\n      ValueTypes.DISTRIBUTION,\r\n      ValueTypes.STRING,\r\n      ValueTypes.VALUE_TYPE_UNSPECIFIED,\r\n      ValueTypes.BOOL,\r\n    ],\r\n    metricKinds: [MetricKind.GAUGE],\r\n  },\r\n  {\r\n    text: 'min',\r\n    value: 'ALIGN_MIN',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'max',\r\n    value: 'ALIGN_MAX',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'mean',\r\n    value: 'ALIGN_MEAN',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'count',\r\n    value: 'ALIGN_COUNT',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.BOOL],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'sum',\r\n    value: 'ALIGN_SUM',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'stddev',\r\n    value: 'ALIGN_STDDEV',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'count true',\r\n    value: 'ALIGN_COUNT_TRUE',\r\n    valueTypes: [ValueTypes.BOOL],\r\n    metricKinds: [MetricKind.GAUGE],\r\n  },\r\n  {\r\n    text: 'count false',\r\n    value: 'ALIGN_COUNT_FALSE',\r\n    valueTypes: [ValueTypes.BOOL],\r\n    metricKinds: [MetricKind.GAUGE],\r\n  },\r\n  {\r\n    text: 'fraction true',\r\n    value: 'ALIGN_FRACTION_TRUE',\r\n    valueTypes: [ValueTypes.BOOL],\r\n    metricKinds: [MetricKind.GAUGE],\r\n  },\r\n  {\r\n    text: 'percentile 99',\r\n    value: 'ALIGN_PERCENTILE_99',\r\n    valueTypes: [ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'percentile 95',\r\n    value: 'ALIGN_PERCENTILE_95',\r\n    valueTypes: [ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'percentile 50',\r\n    value: 'ALIGN_PERCENTILE_50',\r\n    valueTypes: [ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'percentile 05',\r\n    value: 'ALIGN_PERCENTILE_05',\r\n    valueTypes: [ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'percent change',\r\n    value: 'ALIGN_PERCENT_CHANGE',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n];\r\n\r\nexport const aggOptions = [\r\n  {\r\n    text: 'none',\r\n    value: 'REDUCE_NONE',\r\n    valueTypes: [\r\n      ValueTypes.INT64,\r\n      ValueTypes.DOUBLE,\r\n      ValueTypes.MONEY,\r\n      ValueTypes.DISTRIBUTION,\r\n      ValueTypes.BOOL,\r\n      ValueTypes.STRING,\r\n    ],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\r\n  },\r\n  {\r\n    text: 'mean',\r\n    value: 'REDUCE_MEAN',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'min',\r\n    value: 'REDUCE_MIN',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'max',\r\n    value: 'REDUCE_MAX',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'sum',\r\n    value: 'REDUCE_SUM',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'std. dev.',\r\n    value: 'REDUCE_STDDEV',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'count',\r\n    value: 'REDUCE_COUNT',\r\n    valueTypes: [\r\n      ValueTypes.INT64,\r\n      ValueTypes.DOUBLE,\r\n      ValueTypes.MONEY,\r\n      ValueTypes.DISTRIBUTION,\r\n      ValueTypes.BOOL,\r\n      ValueTypes.STRING,\r\n    ],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'count true',\r\n    value: 'REDUCE_COUNT_TRUE',\r\n    valueTypes: [ValueTypes.BOOL],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: 'count false',\r\n    value: 'REDUCE_COUNT_FALSE',\r\n    valueTypes: [ValueTypes.BOOL],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: '99th percentile',\r\n    value: 'REDUCE_PERCENTILE_99',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: '95th percentile',\r\n    value: 'REDUCE_PERCENTILE_95',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: '50th percentile',\r\n    value: 'REDUCE_PERCENTILE_50',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n  {\r\n    text: '5th percentile',\r\n    value: 'REDUCE_PERCENTILE_05',\r\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\r\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\r\n  },\r\n];\r\n\r\nexport const alignmentPeriods = [\r\n  { text: 'grafana auto', value: 'grafana-auto' },\r\n  { text: 'stackdriver auto', value: 'stackdriver-auto' },\r\n  { text: '1m', value: '+60s' },\r\n  { text: '5m', value: '+300s' },\r\n  { text: '30m', value: '+1800s' },\r\n  { text: '1h', value: '+3600s' },\r\n  { text: '6h', value: '+21600s' },\r\n  { text: '1d', value: '+86400s' },\r\n  { text: '1w', value: '+604800s' },\r\n];\r\n\r\nexport const stackdriverUnitMappings = {\r\n  bit: 'bits',\r\n  By: 'bytes',\r\n  s: 's',\r\n  min: 'm',\r\n  h: 'h',\r\n  d: 'd',\r\n  us: 'µs',\r\n  ms: 'ms',\r\n  ns: 'ns',\r\n  percent: 'percent',\r\n  MiBy: 'mbytes',\r\n  'By/s': 'Bps',\r\n  GBy: 'decgbytes',\r\n};\r\n","import { TestDataDatasource } from './datasource';\r\nimport { TestDataQueryCtrl } from './query_ctrl';\r\n\r\nclass TestDataAnnotationsQueryCtrl {\r\n  annotation: any;\r\n\r\n  constructor() {}\r\n\r\n  static template = '<h2>Annotation scenario</h2>';\r\n}\r\n\r\nexport {\r\n  TestDataDatasource,\r\n  TestDataDatasource as Datasource,\r\n  TestDataQueryCtrl as QueryCtrl,\r\n  TestDataAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","import { stackdriverUnitMappings } from './constants';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport default class StackdriverDatasource {\r\n  id: number;\r\n  url: string;\r\n  baseUrl: string;\r\n  projectName: string;\r\n\r\n  /** @ngInject */\r\n  constructor(instanceSettings, private backendSrv, private templateSrv, private timeSrv) {\r\n    this.baseUrl = `/stackdriver/`;\r\n    this.url = instanceSettings.url;\r\n    this.doRequest = this.doRequest;\r\n    this.id = instanceSettings.id;\r\n    this.projectName = instanceSettings.jsonData.defaultProject || '';\r\n  }\r\n\r\n  async getTimeSeries(options) {\r\n    const queries = options.targets\r\n      .filter(target => {\r\n        return !target.hide && target.metricType;\r\n      })\r\n      .map(t => {\r\n        if (!t.hasOwnProperty('aggregation')) {\r\n          t.aggregation = {\r\n            crossSeriesReducer: 'REDUCE_MEAN',\r\n            groupBys: [],\r\n          };\r\n        }\r\n        return {\r\n          refId: t.refId,\r\n          intervalMs: options.intervalMs,\r\n          datasourceId: this.id,\r\n          metricType: this.templateSrv.replace(t.metricType, options.scopedVars || {}),\r\n          primaryAggregation: this.templateSrv.replace(t.aggregation.crossSeriesReducer, options.scopedVars || {}),\r\n          perSeriesAligner: this.templateSrv.replace(t.aggregation.perSeriesAligner, options.scopedVars || {}),\r\n          alignmentPeriod: this.templateSrv.replace(t.aggregation.alignmentPeriod, options.scopedVars || {}),\r\n          groupBys: this.interpolateGroupBys(t.aggregation.groupBys, options.scopedVars),\r\n          view: t.view || 'FULL',\r\n          filters: (t.filters || []).map(f => {\r\n            return this.templateSrv.replace(f, options.scopedVars || {});\r\n          }),\r\n          aliasBy: this.templateSrv.replace(t.aliasBy, options.scopedVars || {}),\r\n          type: 'timeSeriesQuery',\r\n        };\r\n      });\r\n\r\n    const { data } = await this.backendSrv.datasourceRequest({\r\n      url: '/api/tsdb/query',\r\n      method: 'POST',\r\n      data: {\r\n        from: options.range.from.valueOf().toString(),\r\n        to: options.range.to.valueOf().toString(),\r\n        queries,\r\n      },\r\n    });\r\n    return data;\r\n  }\r\n\r\n  async getLabels(metricType, refId) {\r\n    return await this.getTimeSeries({\r\n      targets: [\r\n        {\r\n          refId: refId,\r\n          datasourceId: this.id,\r\n          metricType: this.templateSrv.replace(metricType),\r\n          aggregation: {\r\n            crossSeriesReducer: 'REDUCE_NONE',\r\n          },\r\n          view: 'HEADERS',\r\n        },\r\n      ],\r\n      range: this.timeSrv.timeRange(),\r\n    });\r\n  }\r\n\r\n  interpolateGroupBys(groupBys: string[], scopedVars): string[] {\r\n    let interpolatedGroupBys = [];\r\n    (groupBys || []).forEach(gb => {\r\n      const interpolated = this.templateSrv.replace(gb, scopedVars || {}, 'csv').split(',');\r\n      if (Array.isArray(interpolated)) {\r\n        interpolatedGroupBys = interpolatedGroupBys.concat(interpolated);\r\n      } else {\r\n        interpolatedGroupBys.push(interpolated);\r\n      }\r\n    });\r\n    return interpolatedGroupBys;\r\n  }\r\n\r\n  resolvePanelUnitFromTargets(targets: any[]) {\r\n    let unit;\r\n    if (targets.length > 0 && targets.every(t => t.unit === targets[0].unit)) {\r\n      if (stackdriverUnitMappings.hasOwnProperty(targets[0].unit)) {\r\n        unit = stackdriverUnitMappings[targets[0].unit];\r\n      }\r\n    }\r\n    return unit;\r\n  }\r\n\r\n  async query(options) {\r\n    const result = [];\r\n    const data = await this.getTimeSeries(options);\r\n    if (data.results) {\r\n      Object['values'](data.results).forEach(queryRes => {\r\n        if (!queryRes.series) {\r\n          return;\r\n        }\r\n\r\n        const unit = this.resolvePanelUnitFromTargets(options.targets);\r\n        queryRes.series.forEach(series => {\r\n          let timeSerie: any = {\r\n            target: series.name,\r\n            datapoints: series.points,\r\n            refId: queryRes.refId,\r\n            meta: queryRes.meta,\r\n          };\r\n          if (unit) {\r\n            timeSerie = { ...timeSerie, unit };\r\n          }\r\n          result.push(timeSerie);\r\n        });\r\n      });\r\n    }\r\n\r\n    return { data: result };\r\n  }\r\n\r\n  async annotationQuery(options) {\r\n    const annotation = options.annotation;\r\n    const queries = [\r\n      {\r\n        refId: 'annotationQuery',\r\n        datasourceId: this.id,\r\n        metricType: this.templateSrv.replace(annotation.target.metricType, options.scopedVars || {}),\r\n        primaryAggregation: 'REDUCE_NONE',\r\n        perSeriesAligner: 'ALIGN_NONE',\r\n        title: this.templateSrv.replace(annotation.target.title, options.scopedVars || {}),\r\n        text: this.templateSrv.replace(annotation.target.text, options.scopedVars || {}),\r\n        tags: this.templateSrv.replace(annotation.target.tags, options.scopedVars || {}),\r\n        view: 'FULL',\r\n        filters: (annotation.target.filters || []).map(f => {\r\n          return this.templateSrv.replace(f, options.scopedVars || {});\r\n        }),\r\n        type: 'annotationQuery',\r\n      },\r\n    ];\r\n\r\n    const { data } = await this.backendSrv.datasourceRequest({\r\n      url: '/api/tsdb/query',\r\n      method: 'POST',\r\n      data: {\r\n        from: options.range.from.valueOf().toString(),\r\n        to: options.range.to.valueOf().toString(),\r\n        queries,\r\n      },\r\n    });\r\n\r\n    const results = data.results['annotationQuery'].tables[0].rows.map(v => {\r\n      return {\r\n        annotation: annotation,\r\n        time: Date.parse(v[0]),\r\n        title: v[1],\r\n        tags: [],\r\n        text: v[3],\r\n      };\r\n    });\r\n\r\n    return results;\r\n  }\r\n\r\n  metricFindQuery(query) {\r\n    throw new Error('Template variables support is not yet imlemented');\r\n  }\r\n\r\n  testDatasource() {\r\n    const path = `v3/projects/${this.projectName}/metricDescriptors`;\r\n    return this.doRequest(`${this.baseUrl}${path}`)\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return {\r\n            status: 'success',\r\n            message: 'Successfully queried the Stackdriver API.',\r\n            title: 'Success',\r\n          };\r\n        }\r\n\r\n        return {\r\n          status: 'error',\r\n          message: 'Returned http status code ' + response.status,\r\n        };\r\n      })\r\n      .catch(error => {\r\n        let message = 'Stackdriver: ';\r\n        message += error.statusText ? error.statusText + ': ' : '';\r\n\r\n        if (error.data && error.data.error && error.data.error.code) {\r\n          // 400, 401\r\n          message += error.data.error.code + '. ' + error.data.error.message;\r\n        } else {\r\n          message += 'Cannot connect to Stackdriver API';\r\n        }\r\n        return {\r\n          status: 'error',\r\n          message: message,\r\n        };\r\n      });\r\n  }\r\n\r\n  async getProjects() {\r\n    const response = await this.doRequest(`/cloudresourcemanager/v1/projects`);\r\n    return response.data.projects.map(p => ({ id: p.projectId, name: p.name }));\r\n  }\r\n\r\n  async getDefaultProject() {\r\n    try {\r\n      const projects = await this.getProjects();\r\n      if (projects && projects.length > 0) {\r\n        const test = projects.filter(p => p.id === this.projectName)[0];\r\n        return test;\r\n      } else {\r\n        throw new Error('No projects found');\r\n      }\r\n    } catch (error) {\r\n      let message = 'Projects cannot be fetched: ';\r\n      message += error.statusText ? error.statusText + ': ' : '';\r\n      if (error && error.data && error.data.error && error.data.error.message) {\r\n        if (error.data.error.code === 403) {\r\n          message += `\r\n            A list of projects could not be fetched from the Google Cloud Resource Manager API.\r\n            You might need to enable it first:\r\n            https://console.developers.google.com/apis/library/cloudresourcemanager.googleapis.com`;\r\n        } else {\r\n          message += error.data.error.code + '. ' + error.data.error.message;\r\n        }\r\n      } else {\r\n        message += 'Cannot connect to Stackdriver API';\r\n      }\r\n      appEvents.emit('ds-request-error', message);\r\n    }\r\n  }\r\n\r\n  async getMetricTypes(projectId: string) {\r\n    try {\r\n      const metricsApiPath = `v3/projects/${projectId}/metricDescriptors`;\r\n      const { data } = await this.doRequest(`${this.baseUrl}${metricsApiPath}`);\r\n\r\n      const metrics = data.metricDescriptors.map(m => {\r\n        const [service] = m.type.split('/');\r\n        const [serviceShortName] = service.split('.');\r\n        m.service = service;\r\n        m.serviceShortName = serviceShortName;\r\n        m.displayName = m.displayName || m.type;\r\n        return m;\r\n      });\r\n\r\n      return metrics;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  async doRequest(url, maxRetries = 1) {\r\n    return this.backendSrv\r\n      .datasourceRequest({\r\n        url: this.url + url,\r\n        method: 'GET',\r\n      })\r\n      .catch(error => {\r\n        if (maxRetries > 0) {\r\n          return this.doRequest(url, maxRetries - 1);\r\n        }\r\n\r\n        throw error;\r\n      });\r\n  }\r\n}\r\n","export const DefaultRemoveFilterValue = '-- remove filter --';\r\nexport const DefaultFilterValue = 'select value';\r\n\r\nexport class FilterSegments {\r\n  filterSegments: any[];\r\n  removeSegment: any;\r\n\r\n  constructor(private uiSegmentSrv, private target, private getFilterKeysFunc, private getFilterValuesFunc) {}\r\n\r\n  buildSegmentModel() {\r\n    this.removeSegment = this.uiSegmentSrv.newSegment({ fake: true, value: DefaultRemoveFilterValue });\r\n\r\n    this.filterSegments = [];\r\n    this.target.filters.forEach((f, index) => {\r\n      switch (index % 4) {\r\n        case 0:\r\n          this.filterSegments.push(this.uiSegmentSrv.newKey(f));\r\n          break;\r\n        case 1:\r\n          this.filterSegments.push(this.uiSegmentSrv.newOperator(f));\r\n          break;\r\n        case 2:\r\n          this.filterSegments.push(this.uiSegmentSrv.newKeyValue(f));\r\n          break;\r\n        case 3:\r\n          this.filterSegments.push(this.uiSegmentSrv.newCondition(f));\r\n          break;\r\n      }\r\n    });\r\n    this.ensurePlusButton(this.filterSegments);\r\n  }\r\n\r\n  async getFilters(segment, index, hasNoFilterKeys) {\r\n    if (segment.type === 'condition') {\r\n      return [this.uiSegmentSrv.newSegment('AND')];\r\n    }\r\n\r\n    if (segment.type === 'operator') {\r\n      return this.uiSegmentSrv.newOperators(['=', '!=', '=~', '!=~']);\r\n    }\r\n\r\n    if (segment.type === 'key' || segment.type === 'plus-button') {\r\n      if (hasNoFilterKeys && segment.value && segment.value !== DefaultRemoveFilterValue) {\r\n        this.removeSegment.value = DefaultRemoveFilterValue;\r\n        return Promise.resolve([this.removeSegment]);\r\n      } else {\r\n        return this.getFilterKeysFunc();\r\n      }\r\n    }\r\n\r\n    if (segment.type === 'value') {\r\n      const filterValues = this.getFilterValuesFunc(index);\r\n\r\n      if (filterValues.length > 0) {\r\n        return this.getValuesForFilterKey(filterValues);\r\n      }\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  getValuesForFilterKey(labels: any[]) {\r\n    const filterValues = labels.map(l => {\r\n      return this.uiSegmentSrv.newSegment({\r\n        value: `${l}`,\r\n        expandable: false,\r\n      });\r\n    });\r\n\r\n    return filterValues;\r\n  }\r\n\r\n  addNewFilterSegments(segment, index) {\r\n    if (index > 2) {\r\n      this.filterSegments.splice(index, 0, this.uiSegmentSrv.newCondition('AND'));\r\n    }\r\n    segment.type = 'key';\r\n    this.filterSegments.push(this.uiSegmentSrv.newOperator('='));\r\n    this.filterSegments.push(this.uiSegmentSrv.newFake(DefaultFilterValue, 'value', 'query-segment-value'));\r\n  }\r\n\r\n  removeFilterSegment(index) {\r\n    this.filterSegments.splice(index, 3);\r\n    // remove trailing condition\r\n    if (index > 2 && this.filterSegments[index - 1].type === 'condition') {\r\n      this.filterSegments.splice(index - 1, 1);\r\n    }\r\n\r\n    // remove condition if it is first segment\r\n    if (index === 0 && this.filterSegments.length > 0 && this.filterSegments[0].type === 'condition') {\r\n      this.filterSegments.splice(0, 1);\r\n    }\r\n  }\r\n\r\n  ensurePlusButton(segments) {\r\n    const count = segments.length;\r\n    const lastSegment = segments[Math.max(count - 1, 0)];\r\n\r\n    if (!lastSegment || lastSegment.type !== 'plus-button') {\r\n      segments.push(this.uiSegmentSrv.newPlusButton());\r\n    }\r\n  }\r\n\r\n  filterSegmentUpdated(segment, index) {\r\n    if (segment.type === 'plus-button') {\r\n      this.addNewFilterSegments(segment, index);\r\n    } else if (segment.type === 'key' && segment.value === DefaultRemoveFilterValue) {\r\n      this.removeFilterSegment(index);\r\n      this.ensurePlusButton(this.filterSegments);\r\n    } else if (segment.type === 'value' && segment.value !== DefaultFilterValue) {\r\n      this.ensurePlusButton(this.filterSegments);\r\n    }\r\n\r\n    return this.filterSegments.filter(s => s.type !== 'plus-button').map(seg => seg.value);\r\n  }\r\n}\r\n","import coreModule from 'app/core/core_module';\r\nimport _ from 'lodash';\r\nimport * as options from './constants';\r\nimport kbn from 'app/core/utils/kbn';\r\n\r\nexport class StackdriverAggregation {\r\n  constructor() {\r\n    return {\r\n      templateUrl: 'public/app/plugins/datasource/stackdriver/partials/query.aggregation.html',\r\n      controller: 'StackdriverAggregationCtrl',\r\n      restrict: 'E',\r\n      scope: {\r\n        target: '=',\r\n        alignmentPeriod: '<',\r\n        refresh: '&',\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport class StackdriverAggregationCtrl {\r\n  alignmentPeriods: any[];\r\n  aggOptions: any[];\r\n  alignOptions: any[];\r\n  target: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope) {\r\n    this.$scope.ctrl = this;\r\n    this.target = $scope.target;\r\n    this.alignmentPeriods = options.alignmentPeriods;\r\n    this.aggOptions = options.aggOptions;\r\n    this.alignOptions = options.alignOptions;\r\n    this.setAggOptions();\r\n    this.setAlignOptions();\r\n    const self = this;\r\n    $scope.$on('metricTypeChanged', () => {\r\n      self.setAggOptions();\r\n      self.setAlignOptions();\r\n    });\r\n  }\r\n\r\n  setAlignOptions() {\r\n    this.alignOptions = !this.target.valueType\r\n      ? []\r\n      : options.alignOptions.filter(i => {\r\n          return (\r\n            i.valueTypes.indexOf(this.target.valueType) !== -1 && i.metricKinds.indexOf(this.target.metricKind) !== -1\r\n          );\r\n        });\r\n    if (!this.alignOptions.find(o => o.value === this.target.aggregation.perSeriesAligner)) {\r\n      this.target.aggregation.perSeriesAligner = this.alignOptions.length > 0 ? this.alignOptions[0].value : '';\r\n    }\r\n  }\r\n\r\n  setAggOptions() {\r\n    this.aggOptions = !this.target.metricKind\r\n      ? []\r\n      : options.aggOptions.filter(i => {\r\n          return (\r\n            i.valueTypes.indexOf(this.target.valueType) !== -1 && i.metricKinds.indexOf(this.target.metricKind) !== -1\r\n          );\r\n        });\r\n\r\n    if (!this.aggOptions.find(o => o.value === this.target.aggregation.crossSeriesReducer)) {\r\n      this.deselectAggregationOption('REDUCE_NONE');\r\n    }\r\n\r\n    if (this.target.aggregation.groupBys.length > 0) {\r\n      this.aggOptions = this.aggOptions.filter(o => o.value !== 'REDUCE_NONE');\r\n      this.deselectAggregationOption('REDUCE_NONE');\r\n    }\r\n  }\r\n\r\n  formatAlignmentText() {\r\n    const selectedAlignment = this.alignOptions.find(ap => ap.value === this.target.aggregation.perSeriesAligner);\r\n    return `${kbn.secondsToHms(this.$scope.alignmentPeriod)} interval (${selectedAlignment.text})`;\r\n  }\r\n\r\n  deselectAggregationOption(notValidOptionValue: string) {\r\n    const newValue = this.aggOptions.find(o => o.value !== notValidOptionValue);\r\n    this.target.aggregation.crossSeriesReducer = newValue ? newValue.value : '';\r\n  }\r\n}\r\n\r\ncoreModule.directive('stackdriverAggregation', StackdriverAggregation);\r\ncoreModule.controller('StackdriverAggregationCtrl', StackdriverAggregationCtrl);\r\n","import coreModule from 'app/core/core_module';\r\nimport _ from 'lodash';\r\nimport { FilterSegments, DefaultRemoveFilterValue } from './filter_segments';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class StackdriverFilter {\r\n  /** @ngInject */\r\n  constructor() {\r\n    return {\r\n      templateUrl: 'public/app/plugins/datasource/stackdriver/partials/query.filter.html',\r\n      controller: 'StackdriverFilterCtrl',\r\n      controllerAs: 'ctrl',\r\n      restrict: 'E',\r\n      scope: {\r\n        target: '=',\r\n        datasource: '=',\r\n        refresh: '&',\r\n        defaultDropdownValue: '<',\r\n        defaultServiceValue: '<',\r\n        hideGroupBys: '<',\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport class StackdriverFilterCtrl {\r\n  metricLabels: { [key: string]: string[] };\r\n  resourceLabels: { [key: string]: string[] };\r\n\r\n  defaultRemoveGroupByValue = '-- remove group by --';\r\n  loadLabelsPromise: Promise<any>;\r\n\r\n  service: string;\r\n  metricType: string;\r\n  metricDescriptors: any[];\r\n  metrics: any[];\r\n  services: any[];\r\n  groupBySegments: any[];\r\n  filterSegments: FilterSegments;\r\n  removeSegment: any;\r\n  target: any;\r\n  datasource: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope, private uiSegmentSrv, private templateSrv, private $rootScope) {\r\n    this.datasource = $scope.datasource;\r\n    this.target = $scope.target;\r\n    this.metricType = $scope.defaultDropdownValue;\r\n    this.service = $scope.defaultServiceValue;\r\n\r\n    this.metricDescriptors = [];\r\n    this.metrics = [];\r\n    this.services = [];\r\n\r\n    this.getCurrentProject()\r\n      .then(this.loadMetricDescriptors.bind(this))\r\n      .then(this.getLabels.bind(this));\r\n\r\n    this.initSegments($scope.hideGroupBys);\r\n  }\r\n\r\n  initSegments(hideGroupBys: boolean) {\r\n    if (!hideGroupBys) {\r\n      this.groupBySegments = this.target.aggregation.groupBys.map(groupBy => {\r\n        return this.uiSegmentSrv.getSegmentForValue(groupBy);\r\n      });\r\n      this.ensurePlusButton(this.groupBySegments);\r\n    }\r\n\r\n    this.removeSegment = this.uiSegmentSrv.newSegment({ fake: true, value: '-- remove group by --' });\r\n\r\n    this.filterSegments = new FilterSegments(\r\n      this.uiSegmentSrv,\r\n      this.target,\r\n      this.getGroupBys.bind(this, null, null, DefaultRemoveFilterValue, false),\r\n      this.getFilterValues.bind(this)\r\n    );\r\n    this.filterSegments.buildSegmentModel();\r\n  }\r\n\r\n  async getCurrentProject() {\r\n    this.target.project = await this.datasource.getDefaultProject();\r\n  }\r\n\r\n  async loadMetricDescriptors() {\r\n    if (this.target.project.id !== 'default') {\r\n      this.metricDescriptors = await this.datasource.getMetricTypes(this.target.project.id);\r\n      this.services = this.getServicesList();\r\n      this.metrics = this.getMetricsList();\r\n      return this.metricDescriptors;\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  getServicesList() {\r\n    const defaultValue = { value: this.$scope.defaultServiceValue, text: this.$scope.defaultServiceValue };\r\n    const services = this.metricDescriptors.map(m => {\r\n      return {\r\n        value: m.service,\r\n        text: m.serviceShortName,\r\n      };\r\n    });\r\n\r\n    if (services.find(m => m.value === this.target.service)) {\r\n      this.service = this.target.service;\r\n    }\r\n\r\n    return services.length > 0 ? [defaultValue, ..._.uniqBy(services, 'value')] : [];\r\n  }\r\n\r\n  getMetricsList() {\r\n    const metrics = this.metricDescriptors.map(m => {\r\n      return {\r\n        service: m.service,\r\n        value: m.type,\r\n        serviceShortName: m.serviceShortName,\r\n        text: m.displayName,\r\n        title: m.description,\r\n      };\r\n    });\r\n\r\n    let result;\r\n    if (this.target.service === this.$scope.defaultServiceValue) {\r\n      result = metrics.map(m => ({ ...m, text: `${m.service} - ${m.text}` }));\r\n    } else {\r\n      result = metrics.filter(m => m.service === this.target.service);\r\n    }\r\n\r\n    if (result.find(m => m.value === this.target.metricType)) {\r\n      this.metricType = this.target.metricType;\r\n    } else if (result.length > 0) {\r\n      this.metricType = this.target.metricType = result[0].value;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  async getLabels() {\r\n    this.loadLabelsPromise = new Promise(async resolve => {\r\n      try {\r\n        const data = await this.datasource.getLabels(this.target.metricType, this.target.refId);\r\n        this.metricLabels = data.results[this.target.refId].meta.metricLabels;\r\n        this.resourceLabels = data.results[this.target.refId].meta.resourceLabels;\r\n        resolve();\r\n      } catch (error) {\r\n        if (error.data && error.data.message) {\r\n          console.log(error.data.message);\r\n        } else {\r\n          console.log(error);\r\n        }\r\n        appEvents.emit('alert-error', ['Error', 'Error loading metric labels for ' + this.target.metricType]);\r\n        resolve();\r\n      }\r\n    });\r\n  }\r\n\r\n  onServiceChange() {\r\n    this.target.service = this.service;\r\n    this.metrics = this.getMetricsList();\r\n    this.setMetricType();\r\n    this.getLabels();\r\n    if (!this.metrics.find(m => m.value === this.target.metricType)) {\r\n      this.target.metricType = this.$scope.defaultDropdownValue;\r\n    } else {\r\n      this.$scope.refresh();\r\n    }\r\n  }\r\n\r\n  async onMetricTypeChange() {\r\n    this.setMetricType();\r\n    this.$scope.refresh();\r\n    this.getLabels();\r\n  }\r\n\r\n  setMetricType() {\r\n    this.target.metricType = this.metricType;\r\n    const { valueType, metricKind, unit } = this.metricDescriptors.find(m => m.type === this.target.metricType);\r\n    this.target.unit = unit;\r\n    this.target.valueType = valueType;\r\n    this.target.metricKind = metricKind;\r\n    this.$rootScope.$broadcast('metricTypeChanged');\r\n  }\r\n\r\n  async getGroupBys(segment, index, removeText?: string, removeUsed = true) {\r\n    await this.loadLabelsPromise;\r\n\r\n    const metricLabels = Object.keys(this.metricLabels || {})\r\n      .filter(ml => {\r\n        if (!removeUsed) {\r\n          return true;\r\n        }\r\n        return this.target.aggregation.groupBys.indexOf('metric.label.' + ml) === -1;\r\n      })\r\n      .map(l => {\r\n        return this.uiSegmentSrv.newSegment({\r\n          value: `metric.label.${l}`,\r\n          expandable: false,\r\n        });\r\n      });\r\n\r\n    const resourceLabels = Object.keys(this.resourceLabels || {})\r\n      .filter(ml => {\r\n        if (!removeUsed) {\r\n          return true;\r\n        }\r\n\r\n        return this.target.aggregation.groupBys.indexOf('resource.label.' + ml) === -1;\r\n      })\r\n      .map(l => {\r\n        return this.uiSegmentSrv.newSegment({\r\n          value: `resource.label.${l}`,\r\n          expandable: false,\r\n        });\r\n      });\r\n\r\n    const noValueOrPlusButton = !segment || segment.type === 'plus-button';\r\n    if (noValueOrPlusButton && metricLabels.length === 0 && resourceLabels.length === 0) {\r\n      return Promise.resolve([]);\r\n    }\r\n\r\n    this.removeSegment.value = removeText || this.defaultRemoveGroupByValue;\r\n    return Promise.resolve([...metricLabels, ...resourceLabels, this.removeSegment]);\r\n  }\r\n\r\n  groupByChanged(segment, index) {\r\n    if (segment.value === this.removeSegment.value) {\r\n      this.groupBySegments.splice(index, 1);\r\n    } else {\r\n      segment.type = 'value';\r\n    }\r\n\r\n    const reducer = (memo, seg) => {\r\n      if (!seg.fake) {\r\n        memo.push(seg.value);\r\n      }\r\n      return memo;\r\n    };\r\n\r\n    this.target.aggregation.groupBys = this.groupBySegments.reduce(reducer, []);\r\n    this.ensurePlusButton(this.groupBySegments);\r\n    this.$rootScope.$broadcast('metricTypeChanged');\r\n    this.$scope.refresh();\r\n  }\r\n\r\n  async getFilters(segment, index) {\r\n    const hasNoFilterKeys = this.metricLabels && Object.keys(this.metricLabels).length === 0;\r\n    return this.filterSegments.getFilters(segment, index, hasNoFilterKeys);\r\n  }\r\n\r\n  getFilterValues(index) {\r\n    const filterKey = this.templateSrv.replace(this.filterSegments.filterSegments[index - 2].value);\r\n    if (!filterKey || !this.metricLabels || Object.keys(this.metricLabels).length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const shortKey = filterKey.substring(filterKey.indexOf('.label.') + 7);\r\n\r\n    if (filterKey.startsWith('metric.label.') && this.metricLabels.hasOwnProperty(shortKey)) {\r\n      return this.metricLabels[shortKey];\r\n    }\r\n\r\n    if (filterKey.startsWith('resource.label.') && this.resourceLabels.hasOwnProperty(shortKey)) {\r\n      return this.resourceLabels[shortKey];\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  filterSegmentUpdated(segment, index) {\r\n    this.target.filters = this.filterSegments.filterSegmentUpdated(segment, index);\r\n    this.$scope.refresh();\r\n  }\r\n\r\n  ensurePlusButton(segments) {\r\n    const count = segments.length;\r\n    const lastSegment = segments[Math.max(count - 1, 0)];\r\n\r\n    if (!lastSegment || lastSegment.type !== 'plus-button') {\r\n      segments.push(this.uiSegmentSrv.newPlusButton());\r\n    }\r\n  }\r\n}\r\n\r\ncoreModule.directive('stackdriverFilter', StackdriverFilter);\r\ncoreModule.controller('StackdriverFilterCtrl', StackdriverFilterCtrl);\r\n","import _ from 'lodash';\r\nimport { QueryCtrl } from 'app/plugins/sdk';\r\nimport './query_aggregation_ctrl';\r\nimport './query_filter_ctrl';\r\n\r\nexport interface QueryMeta {\r\n  alignmentPeriod: string;\r\n  rawQuery: string;\r\n  rawQueryString: string;\r\n  metricLabels: { [key: string]: string[] };\r\n  resourceLabels: { [key: string]: string[] };\r\n}\r\n\r\nexport class StackdriverQueryCtrl extends QueryCtrl {\r\n  static templateUrl = 'partials/query.editor.html';\r\n  target: {\r\n    project: {\r\n      id: string;\r\n      name: string;\r\n    };\r\n    unit: string;\r\n    metricType: string;\r\n    service: string;\r\n    refId: string;\r\n    aggregation: {\r\n      crossSeriesReducer: string;\r\n      alignmentPeriod: string;\r\n      perSeriesAligner: string;\r\n      groupBys: string[];\r\n    };\r\n    filters: string[];\r\n    aliasBy: string;\r\n    metricKind: any;\r\n    valueType: any;\r\n  };\r\n\r\n  defaultDropdownValue = 'Select Metric';\r\n  defaultServiceValue = 'All Services';\r\n\r\n  defaults = {\r\n    project: {\r\n      id: 'default',\r\n      name: 'loading project...',\r\n    },\r\n    metricType: this.defaultDropdownValue,\r\n    service: this.defaultServiceValue,\r\n    metric: '',\r\n    unit: '',\r\n    aggregation: {\r\n      crossSeriesReducer: 'REDUCE_MEAN',\r\n      alignmentPeriod: 'stackdriver-auto',\r\n      perSeriesAligner: 'ALIGN_MEAN',\r\n      groupBys: [],\r\n    },\r\n    filters: [],\r\n    showAggregationOptions: false,\r\n    aliasBy: '',\r\n    metricKind: '',\r\n    valueType: '',\r\n  };\r\n\r\n  showHelp: boolean;\r\n  showLastQuery: boolean;\r\n  lastQueryMeta: QueryMeta;\r\n  lastQueryError?: string;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector) {\r\n    super($scope, $injector);\r\n    _.defaultsDeep(this.target, this.defaults);\r\n\r\n    this.panelCtrl.events.on('data-received', this.onDataReceived.bind(this), $scope);\r\n    this.panelCtrl.events.on('data-error', this.onDataError.bind(this), $scope);\r\n  }\r\n\r\n  onDataReceived(dataList) {\r\n    this.lastQueryError = null;\r\n    this.lastQueryMeta = null;\r\n\r\n    const anySeriesFromQuery: any = _.find(dataList, { refId: this.target.refId });\r\n    if (anySeriesFromQuery) {\r\n      this.lastQueryMeta = anySeriesFromQuery.meta;\r\n      this.lastQueryMeta.rawQueryString = decodeURIComponent(this.lastQueryMeta.rawQuery);\r\n    }\r\n  }\r\n\r\n  onDataError(err) {\r\n    if (err.data && err.data.results) {\r\n      const queryRes = err.data.results[this.target.refId];\r\n      if (queryRes && queryRes.error) {\r\n        this.lastQueryMeta = queryRes.meta;\r\n        this.lastQueryMeta.rawQueryString = decodeURIComponent(this.lastQueryMeta.rawQuery);\r\n\r\n        let jsonBody;\r\n        try {\r\n          jsonBody = JSON.parse(queryRes.error);\r\n        } catch {\r\n          this.lastQueryError = queryRes.error;\r\n        }\r\n\r\n        this.lastQueryError = jsonBody.error.message;\r\n      }\r\n    }\r\n    console.error(err);\r\n  }\r\n}\r\n","export class StackdriverConfigCtrl {\r\n  static templateUrl = 'public/app/plugins/datasource/stackdriver/partials/config.html';\r\n  datasourceSrv: any;\r\n  current: any;\r\n  jsonText: string;\r\n  validationErrors: string[] = [];\r\n  inputDataValid: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(datasourceSrv) {\r\n    this.datasourceSrv = datasourceSrv;\r\n    this.current.jsonData = this.current.jsonData || {};\r\n    this.current.secureJsonData = this.current.secureJsonData || {};\r\n    this.current.secureJsonFields = this.current.secureJsonFields || {};\r\n  }\r\n\r\n  save(jwt) {\r\n    this.current.secureJsonData.privateKey = jwt.private_key;\r\n    this.current.jsonData.tokenUri = jwt.token_uri;\r\n    this.current.jsonData.clientEmail = jwt.client_email;\r\n    this.current.jsonData.defaultProject = jwt.project_id;\r\n  }\r\n\r\n  validateJwt(jwt) {\r\n    this.resetValidationMessages();\r\n    if (!jwt.private_key || jwt.private_key.length === 0) {\r\n      this.validationErrors.push('Private key field missing in JWT file.');\r\n    }\r\n\r\n    if (!jwt.token_uri || jwt.token_uri.length === 0) {\r\n      this.validationErrors.push('Token URI field missing in JWT file.');\r\n    }\r\n\r\n    if (!jwt.client_email || jwt.client_email.length === 0) {\r\n      this.validationErrors.push('Client Email field missing in JWT file.');\r\n    }\r\n\r\n    if (this.validationErrors.length === 0) {\r\n      this.inputDataValid = true;\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  onUpload(json) {\r\n    this.jsonText = '';\r\n    if (this.validateJwt(json)) {\r\n      this.save(json);\r\n    }\r\n  }\r\n\r\n  onPasteJwt(e) {\r\n    try {\r\n      const json = JSON.parse(e.originalEvent.clipboardData.getData('text/plain') || this.jsonText);\r\n      if (this.validateJwt(json)) {\r\n        this.save(json);\r\n      }\r\n    } catch (error) {\r\n      this.resetValidationMessages();\r\n      this.validationErrors.push(`Invalid json: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  resetValidationMessages() {\r\n    this.validationErrors = [];\r\n    this.inputDataValid = false;\r\n    this.jsonText = '';\r\n\r\n    this.current.jsonData = {};\r\n    this.current.secureJsonData = {};\r\n    this.current.secureJsonFields = {};\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport './query_filter_ctrl';\r\n\r\nexport class StackdriverAnnotationsQueryCtrl {\r\n  static templateUrl = 'partials/annotations.editor.html';\r\n  annotation: any;\r\n  datasource: any;\r\n\r\n  defaultDropdownValue = 'Select Metric';\r\n  defaultServiceValue = 'All Services';\r\n\r\n  defaults = {\r\n    project: {\r\n      id: 'default',\r\n      name: 'loading project...',\r\n    },\r\n    metricType: this.defaultDropdownValue,\r\n    service: this.defaultServiceValue,\r\n    metric: '',\r\n    filters: [],\r\n    metricKind: '',\r\n    valueType: '',\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor() {\r\n    this.annotation.target = this.annotation.target || {};\r\n    this.annotation.target.refId = 'annotationQuery';\r\n    _.defaultsDeep(this.annotation.target, this.defaults);\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport { PanelCtrl } from 'app/plugins/sdk';\r\nimport Remarkable from 'remarkable';\r\n\r\nexport class TextPanelCtrl extends PanelCtrl {\r\n  static templateUrl = `public/app/plugins/panel/text/module.html`;\r\n  static scrollable = true;\r\n\r\n  remarkable: any;\r\n  content: string;\r\n  // Set and populate defaults\r\n  panelDefaults = {\r\n    mode: 'markdown', // 'html', 'markdown', 'text'\r\n    content: '# title',\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private templateSrv, private $sce) {\r\n    super($scope, $injector);\r\n\r\n    _.defaults(this.panel, this.panelDefaults);\r\n\r\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n    this.events.on('refresh', this.onRefresh.bind(this));\r\n    this.events.on('render', this.onRender.bind(this));\r\n\r\n    $scope.$watch(\r\n      'ctrl.panel.content',\r\n      _.throttle(() => {\r\n        this.render();\r\n      }, 1000)\r\n    );\r\n  }\r\n\r\n  onInitEditMode() {\r\n    this.addEditorTab('Options', 'public/app/plugins/panel/text/editor.html');\r\n    this.editorTabIndex = 1;\r\n\r\n    if (this.panel.mode === 'text') {\r\n      this.panel.mode = 'markdown';\r\n    }\r\n  }\r\n\r\n  onRefresh() {\r\n    this.render();\r\n  }\r\n\r\n  onRender() {\r\n    if (this.panel.mode === 'markdown') {\r\n      this.renderMarkdown(this.panel.content);\r\n    } else if (this.panel.mode === 'html') {\r\n      this.updateContent(this.panel.content);\r\n    }\r\n    this.renderingCompleted();\r\n  }\r\n\r\n  renderText(content) {\r\n    content = content\r\n      .replace(/&/g, '&amp;')\r\n      .replace(/>/g, '&gt;')\r\n      .replace(/</g, '&lt;')\r\n      .replace(/\\n/g, '<br/>');\r\n    this.updateContent(content);\r\n  }\r\n\r\n  renderMarkdown(content) {\r\n    if (!this.remarkable) {\r\n      this.remarkable = new Remarkable();\r\n    }\r\n\r\n    this.$scope.$applyAsync(() => {\r\n      this.updateContent(this.remarkable.render(content));\r\n    });\r\n  }\r\n\r\n  updateContent(html) {\r\n    try {\r\n      this.content = this.$sce.trustAsHtml(this.templateSrv.replace(html, this.panel.scopedVars));\r\n    } catch (e) {\r\n      console.log('Text panel error: ', e);\r\n      this.content = this.$sce.trustAsHtml(html);\r\n    }\r\n  }\r\n}\r\n\r\nexport { TextPanelCtrl as PanelCtrl };\r\n","import StackdriverDatasource from './datasource';\r\nimport { StackdriverQueryCtrl } from './query_ctrl';\r\nimport { StackdriverConfigCtrl } from './config_ctrl';\r\nimport { StackdriverAnnotationsQueryCtrl } from './annotations_query_ctrl';\r\n\r\nexport {\r\n  StackdriverDatasource as Datasource,\r\n  StackdriverQueryCtrl as QueryCtrl,\r\n  StackdriverConfigCtrl as ConfigCtrl,\r\n  StackdriverAnnotationsQueryCtrl as AnnotationsQueryCtrl,\r\n};\r\n","import React, { PureComponent } from 'react';\r\nimport { PanelProps } from 'app/types';\r\n\r\nexport class Text2 extends PureComponent<PanelProps> {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return <h2>Text Panel!</h2>;\r\n  }\r\n}\r\n\r\nexport { Text2 as PanelComponent };\r\n","// Libraries\r\nimport $ from 'jquery';\r\nimport React, { PureComponent } from 'react';\r\nimport { withSize } from 'react-sizeme';\r\nimport 'vendor/flot/jquery.flot';\r\nimport 'vendor/flot/jquery.flot.time';\r\n\r\n// Types\r\nimport { TimeRange, TimeSeriesVMs } from 'app/types';\r\n\r\n// Copied from graph.ts\r\nfunction time_format(ticks, min, max) {\r\n  if (min && max && ticks) {\r\n    const range = max - min;\r\n    const secPerTick = range / ticks / 1000;\r\n    const oneDay = 86400000;\r\n    const oneYear = 31536000000;\r\n\r\n    if (secPerTick <= 45) {\r\n      return '%H:%M:%S';\r\n    }\r\n    if (secPerTick <= 7200 || range <= oneDay) {\r\n      return '%H:%M';\r\n    }\r\n    if (secPerTick <= 80000) {\r\n      return '%m/%d %H:%M';\r\n    }\r\n    if (secPerTick <= 2419200 || range <= oneYear) {\r\n      return '%m/%d';\r\n    }\r\n    return '%Y-%m';\r\n  }\r\n\r\n  return '%H:%M';\r\n}\r\n\r\nconst FLOT_OPTIONS = {\r\n  legend: {\r\n    show: false,\r\n  },\r\n  series: {\r\n    lines: {\r\n      linewidth: 1,\r\n      zero: false,\r\n    },\r\n    shadowSize: 0,\r\n  },\r\n  grid: {\r\n    minBorderMargin: 0,\r\n    markings: [],\r\n    backgroundColor: null,\r\n    borderWidth: 0,\r\n    // hoverable: true,\r\n    clickable: true,\r\n    color: '#a1a1a1',\r\n    margin: { left: 0, right: 0 },\r\n    labelMarginX: 0,\r\n  },\r\n};\r\n\r\ninterface GraphProps {\r\n  timeSeries: TimeSeriesVMs;\r\n  timeRange: TimeRange;\r\n  size?: { width: number; height: number };\r\n}\r\n\r\nexport class Graph extends PureComponent<GraphProps> {\r\n  element: any;\r\n\r\n  componentDidUpdate(prevProps: GraphProps) {\r\n    if (\r\n      prevProps.timeSeries !== this.props.timeSeries ||\r\n      prevProps.timeRange !== this.props.timeRange ||\r\n      prevProps.size !== this.props.size\r\n    ) {\r\n      this.draw();\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.draw();\r\n  }\r\n\r\n  draw() {\r\n    const { size, timeSeries, timeRange } = this.props;\r\n\r\n    if (!size) {\r\n      return;\r\n    }\r\n\r\n    const ticks = (size.width || 0) / 100;\r\n    const min = timeRange.from.valueOf();\r\n    const max = timeRange.to.valueOf();\r\n\r\n    const dynamicOptions = {\r\n      xaxis: {\r\n        mode: 'time',\r\n        min: min,\r\n        max: max,\r\n        label: 'Datetime',\r\n        ticks: ticks,\r\n        timeformat: time_format(ticks, min, max),\r\n      },\r\n    };\r\n\r\n    const options = {\r\n      ...FLOT_OPTIONS,\r\n      ...dynamicOptions,\r\n    };\r\n\r\n    console.log('plot', timeSeries, options);\r\n    $.plot(this.element, timeSeries, options);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"graph-panel\">\r\n        <div className=\"graph-panel__chart\" ref={e => (this.element = e)} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSize()(Graph);\r\n","// Libraries\r\nimport _ from 'lodash';\r\n\r\n// Utils\r\nimport colors from 'app/core/utils/colors';\r\n\r\n// Types\r\nimport { TimeSeries, TimeSeriesVMs, NullValueMode } from 'app/types';\r\n\r\ninterface Options {\r\n  timeSeries: TimeSeries[];\r\n  nullValueMode: NullValueMode;\r\n}\r\n\r\nexport function getTimeSeriesVMs({ timeSeries, nullValueMode }: Options): TimeSeriesVMs {\r\n  const vmSeries = timeSeries.map((item, index) => {\r\n    const colorIndex = index % colors.length;\r\n    const label = item.target;\r\n    const result = [];\r\n\r\n    // stat defaults\r\n    let total = 0;\r\n    let max = -Number.MAX_VALUE;\r\n    let min = Number.MAX_VALUE;\r\n    let logmin = Number.MAX_VALUE;\r\n    let avg = null;\r\n    let current = null;\r\n    let first = null;\r\n    let delta = 0;\r\n    let diff = null;\r\n    let range = null;\r\n    let timeStep = Number.MAX_VALUE;\r\n    let allIsNull = true;\r\n    let allIsZero = true;\r\n\r\n    const ignoreNulls = nullValueMode === NullValueMode.Ignore;\r\n    const nullAsZero = nullValueMode === NullValueMode.AsZero;\r\n\r\n    let currentTime;\r\n    let currentValue;\r\n    let nonNulls = 0;\r\n    let previousTime;\r\n    let previousValue = 0;\r\n    let previousDeltaUp = true;\r\n\r\n    for (let i = 0; i < item.datapoints.length; i++) {\r\n      currentValue = item.datapoints[i][0];\r\n      currentTime = item.datapoints[i][1];\r\n\r\n      // Due to missing values we could have different timeStep all along the series\r\n      // so we have to find the minimum one (could occur with aggregators such as ZimSum)\r\n      if (previousTime !== undefined) {\r\n        const currentStep = currentTime - previousTime;\r\n        if (currentStep < timeStep) {\r\n          timeStep = currentStep;\r\n        }\r\n      }\r\n\r\n      previousTime = currentTime;\r\n\r\n      if (currentValue === null) {\r\n        if (ignoreNulls) {\r\n          continue;\r\n        }\r\n        if (nullAsZero) {\r\n          currentValue = 0;\r\n        }\r\n      }\r\n\r\n      if (currentValue !== null) {\r\n        if (_.isNumber(currentValue)) {\r\n          total += currentValue;\r\n          allIsNull = false;\r\n          nonNulls++;\r\n        }\r\n\r\n        if (currentValue > max) {\r\n          max = currentValue;\r\n        }\r\n\r\n        if (currentValue < min) {\r\n          min = currentValue;\r\n        }\r\n\r\n        if (first === null) {\r\n          first = currentValue;\r\n        } else {\r\n          if (previousValue > currentValue) {\r\n            // counter reset\r\n            previousDeltaUp = false;\r\n            if (i === item.datapoints.length - 1) {\r\n              // reset on last\r\n              delta += currentValue;\r\n            }\r\n          } else {\r\n            if (previousDeltaUp) {\r\n              delta += currentValue - previousValue; // normal increment\r\n            } else {\r\n              delta += currentValue; // account for counter reset\r\n            }\r\n            previousDeltaUp = true;\r\n          }\r\n        }\r\n        previousValue = currentValue;\r\n\r\n        if (currentValue < logmin && currentValue > 0) {\r\n          logmin = currentValue;\r\n        }\r\n\r\n        if (currentValue !== 0) {\r\n          allIsZero = false;\r\n        }\r\n      }\r\n\r\n      result.push([currentTime, currentValue]);\r\n    }\r\n\r\n    if (max === -Number.MAX_VALUE) {\r\n      max = null;\r\n    }\r\n\r\n    if (min === Number.MAX_VALUE) {\r\n      min = null;\r\n    }\r\n\r\n    if (result.length && !allIsNull) {\r\n      avg = total / nonNulls;\r\n      current = result[result.length - 1][1];\r\n      if (current === null && result.length > 1) {\r\n        current = result[result.length - 2][1];\r\n      }\r\n    }\r\n\r\n    if (max !== null && min !== null) {\r\n      range = max - min;\r\n    }\r\n\r\n    if (current !== null && first !== null) {\r\n      diff = current - first;\r\n    }\r\n\r\n    const count = result.length;\r\n\r\n    return {\r\n      data: result,\r\n      label: label,\r\n      color: colors[colorIndex],\r\n      stats: {\r\n        total,\r\n        min,\r\n        max,\r\n        current,\r\n        logmin,\r\n        avg,\r\n        diff,\r\n        delta,\r\n        timeStep,\r\n        range,\r\n        count,\r\n        first,\r\n        allIsZero,\r\n        allIsNull,\r\n      },\r\n    };\r\n  });\r\n\r\n  return vmSeries;\r\n}\r\n","import angular from 'angular';\r\nimport $ from 'jquery';\r\nimport _ from 'lodash';\r\nimport Drop from 'tether-drop';\r\n\r\n/** @ngInject */\r\nexport function createAnnotationToolip(element, event, plot) {\r\n  const injector = angular.element(document).injector();\r\n  const content = document.createElement('div');\r\n  content.innerHTML = '<annotation-tooltip event=\"event\" on-edit=\"onEdit()\"></annotation-tooltip>';\r\n\r\n  injector.invoke([\r\n    '$compile',\r\n    '$rootScope',\r\n    ($compile, $rootScope) => {\r\n      const eventManager = plot.getOptions().events.manager;\r\n      const tmpScope = $rootScope.$new(true);\r\n      tmpScope.event = event;\r\n      tmpScope.onEdit = () => {\r\n        eventManager.editEvent(event);\r\n      };\r\n\r\n      $compile(content)(tmpScope);\r\n      tmpScope.$digest();\r\n      tmpScope.$destroy();\r\n\r\n      const drop = new Drop({\r\n        target: element[0],\r\n        content: content,\r\n        position: 'bottom center',\r\n        classes: 'drop-popover drop-popover--annotation',\r\n        openOn: 'hover',\r\n        hoverCloseDelay: 200,\r\n        tetherOptions: {\r\n          constraints: [{ to: 'window', pin: true, attachment: 'both' }],\r\n        },\r\n      });\r\n\r\n      drop.open();\r\n\r\n      drop.on('close', () => {\r\n        setTimeout(() => {\r\n          drop.destroy();\r\n        });\r\n      });\r\n    },\r\n  ]);\r\n}\r\n\r\nlet markerElementToAttachTo = null;\r\n\r\n/** @ngInject */\r\nexport function createEditPopover(element, event, plot) {\r\n  const eventManager = plot.getOptions().events.manager;\r\n  if (eventManager.editorOpen) {\r\n    // update marker element to attach to (needed in case of legend on the right\r\n    // when there is a double render pass and the inital marker element is removed)\r\n    markerElementToAttachTo = element;\r\n    return;\r\n  }\r\n\r\n  // mark as openend\r\n  eventManager.editorOpened();\r\n  // set marker elment to attache to\r\n  markerElementToAttachTo = element;\r\n\r\n  // wait for element to be attached and positioned\r\n  setTimeout(() => {\r\n    const injector = angular.element(document).injector();\r\n    const content = document.createElement('div');\r\n    content.innerHTML = '<event-editor panel-ctrl=\"panelCtrl\" event=\"event\" close=\"close()\"></event-editor>';\r\n\r\n    injector.invoke([\r\n      '$compile',\r\n      '$rootScope',\r\n      ($compile, $rootScope) => {\r\n        const scope = $rootScope.$new(true);\r\n        let drop;\r\n\r\n        scope.event = event;\r\n        scope.panelCtrl = eventManager.panelCtrl;\r\n        scope.close = () => {\r\n          drop.close();\r\n        };\r\n\r\n        $compile(content)(scope);\r\n        scope.$digest();\r\n\r\n        drop = new Drop({\r\n          target: markerElementToAttachTo[0],\r\n          content: content,\r\n          position: 'bottom center',\r\n          classes: 'drop-popover drop-popover--form',\r\n          openOn: 'click',\r\n          tetherOptions: {\r\n            constraints: [{ to: 'window', pin: true, attachment: 'both' }],\r\n          },\r\n        });\r\n\r\n        drop.open();\r\n        eventManager.editorOpened();\r\n\r\n        drop.on('close', () => {\r\n          // need timeout here in order call drop.destroy\r\n          setTimeout(() => {\r\n            eventManager.editorClosed();\r\n            scope.$destroy();\r\n            drop.destroy();\r\n          });\r\n        });\r\n      },\r\n    ]);\r\n  }, 100);\r\n}\r\n\r\n/*\r\n * jquery.flot.events\r\n *\r\n * description: Flot plugin for adding events/markers to the plot\r\n * version: 0.2.5\r\n * authors:\r\n *    Alexander Wunschik <alex@wunschik.net>\r\n *    Joel Oughton <joeloughton@gmail.com>\r\n *    Nicolas Joseph <www.nicolasjoseph.com>\r\n *\r\n * website: https://github.com/mojoaxel/flot-events\r\n *\r\n * released under MIT License and GPLv2+\r\n */\r\n\r\n/**\r\n * A class that allows for the drawing an remove of some object\r\n */\r\nexport class DrawableEvent {\r\n  _object: any;\r\n  _drawFunc: any;\r\n  _clearFunc: any;\r\n  _moveFunc: any;\r\n  _position: any;\r\n  _width: any;\r\n  _height: any;\r\n\r\n  /** @ngInject */\r\n  constructor(object, drawFunc, clearFunc, moveFunc, left, top, width, height) {\r\n    this._object = object;\r\n    this._drawFunc = drawFunc;\r\n    this._clearFunc = clearFunc;\r\n    this._moveFunc = moveFunc;\r\n    this._position = { left: left, top: top };\r\n    this._width = width;\r\n    this._height = height;\r\n  }\r\n\r\n  width() {\r\n    return this._width;\r\n  }\r\n  height() {\r\n    return this._height;\r\n  }\r\n  position() {\r\n    return this._position;\r\n  }\r\n  draw() {\r\n    this._drawFunc(this._object);\r\n  }\r\n  clear() {\r\n    this._clearFunc(this._object);\r\n  }\r\n  getObject() {\r\n    return this._object;\r\n  }\r\n  moveTo(position) {\r\n    this._position = position;\r\n    this._moveFunc(this._object, this._position);\r\n  }\r\n}\r\n\r\n/**\r\n * Event class that stores options (eventType, min, max, title, description) and the object to draw.\r\n */\r\nexport class VisualEvent {\r\n  _parent: any;\r\n  _options: any;\r\n  _drawableEvent: any;\r\n  _hidden: any;\r\n\r\n  /** @ngInject */\r\n  constructor(options, drawableEvent) {\r\n    this._options = options;\r\n    this._drawableEvent = drawableEvent;\r\n    this._hidden = false;\r\n  }\r\n\r\n  visual() {\r\n    return this._drawableEvent;\r\n  }\r\n  getOptions() {\r\n    return this._options;\r\n  }\r\n  getParent() {\r\n    return this._parent;\r\n  }\r\n  isHidden() {\r\n    return this._hidden;\r\n  }\r\n  hide() {\r\n    this._hidden = true;\r\n  }\r\n  unhide() {\r\n    this._hidden = false;\r\n  }\r\n}\r\n\r\n/**\r\n * A Class that handles the event-markers inside the given plot\r\n */\r\nexport class EventMarkers {\r\n  _events: any;\r\n  _types: any;\r\n  _plot: any;\r\n  eventsEnabled: any;\r\n\r\n  /** @ngInject */\r\n  constructor(plot) {\r\n    this._events = [];\r\n    this._types = [];\r\n    this._plot = plot;\r\n    this.eventsEnabled = false;\r\n  }\r\n\r\n  getEvents() {\r\n    return this._events;\r\n  }\r\n\r\n  setTypes(types) {\r\n    return (this._types = types);\r\n  }\r\n\r\n  /**\r\n   * create internal objects for the given events\r\n   */\r\n  setupEvents(events) {\r\n    const parts = _.partition(events, 'isRegion');\r\n    const regions = parts[0];\r\n    events = parts[1];\r\n\r\n    $.each(events, (index, event) => {\r\n      const ve = new VisualEvent(event, this._buildDiv(event));\r\n      this._events.push(ve);\r\n    });\r\n\r\n    $.each(regions, (index, event) => {\r\n      const vre = new VisualEvent(event, this._buildRegDiv(event));\r\n      this._events.push(vre);\r\n    });\r\n\r\n    this._events.sort((a, b) => {\r\n      const ao = a.getOptions(),\r\n        bo = b.getOptions();\r\n      if (ao.min > bo.min) {\r\n        return 1;\r\n      }\r\n      if (ao.min < bo.min) {\r\n        return -1;\r\n      }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * draw the events to the plot\r\n   */\r\n  drawEvents() {\r\n    // var o = this._plot.getPlotOffset();\r\n\r\n    $.each(this._events, (index, event) => {\r\n      // check event is inside the graph range\r\n      if (this._insidePlot(event.getOptions().min) && !event.isHidden()) {\r\n        event.visual().draw();\r\n      } else {\r\n        event\r\n          .visual()\r\n          .getObject()\r\n          .hide();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * update the position of the event-markers (e.g. after scrolling or zooming)\r\n   */\r\n  updateEvents() {\r\n    const o = this._plot.getPlotOffset();\r\n    let left;\r\n    let top;\r\n    const xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\r\n\r\n    $.each(this._events, (index, event) => {\r\n      top = o.top + this._plot.height() - event.visual().height();\r\n      left = xaxis.p2c(event.getOptions().min) + o.left - event.visual().width() / 2;\r\n      event.visual().moveTo({ top: top, left: left });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * remove all events from the plot\r\n   */\r\n  _clearEvents() {\r\n    $.each(this._events, (index, val) => {\r\n      val.visual().clear();\r\n    });\r\n    this._events = [];\r\n  }\r\n\r\n  /**\r\n   * create a DOM element for the given event\r\n   */\r\n  _buildDiv(event) {\r\n    const that = this;\r\n\r\n    const container = this._plot.getPlaceholder();\r\n    const o = this._plot.getPlotOffset();\r\n    const xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\r\n    let top, left, color, markerSize, markerShow, lineStyle, lineWidth;\r\n    let markerTooltip;\r\n\r\n    // map the eventType to a types object\r\n    const eventTypeId = event.eventType;\r\n\r\n    if (this._types === null || !this._types[eventTypeId] || !this._types[eventTypeId].color) {\r\n      color = '#666';\r\n    } else {\r\n      color = this._types[eventTypeId].color;\r\n    }\r\n\r\n    if (this._types === null || !this._types[eventTypeId] || !this._types[eventTypeId].markerSize) {\r\n      markerSize = 8; //default marker size\r\n    } else {\r\n      markerSize = this._types[eventTypeId].markerSize;\r\n    }\r\n\r\n    if (this._types === null || !this._types[eventTypeId] || this._types[eventTypeId].markerShow === undefined) {\r\n      markerShow = true;\r\n    } else {\r\n      markerShow = this._types[eventTypeId].markerShow;\r\n    }\r\n\r\n    if (this._types === null || !this._types[eventTypeId] || this._types[eventTypeId].markerTooltip === undefined) {\r\n      markerTooltip = true;\r\n    } else {\r\n      markerTooltip = this._types[eventTypeId].markerTooltip;\r\n    }\r\n\r\n    if (this._types == null || !this._types[eventTypeId] || !this._types[eventTypeId].lineStyle) {\r\n      lineStyle = 'dashed'; //default line style\r\n    } else {\r\n      lineStyle = this._types[eventTypeId].lineStyle.toLowerCase();\r\n    }\r\n\r\n    if (this._types == null || !this._types[eventTypeId] || this._types[eventTypeId].lineWidth === undefined) {\r\n      lineWidth = 1; //default line width\r\n    } else {\r\n      lineWidth = this._types[eventTypeId].lineWidth;\r\n    }\r\n\r\n    let topOffset = xaxis.options.eventSectionHeight || 0;\r\n    topOffset = topOffset / 3;\r\n\r\n    top = o.top + this._plot.height() + topOffset;\r\n    left = xaxis.p2c(event.min) + o.left;\r\n\r\n    const line = $('<div class=\"events_line flot-temp-elem\"></div>')\r\n      .css({\r\n        position: 'absolute',\r\n        opacity: 0.8,\r\n        left: left + 'px',\r\n        top: 8,\r\n        width: lineWidth + 'px',\r\n        height: this._plot.height() + topOffset * 0.8,\r\n        'border-left-width': lineWidth + 'px',\r\n        'border-left-style': lineStyle,\r\n        'border-left-color': color,\r\n        color: color,\r\n      })\r\n      .appendTo(container);\r\n\r\n    if (markerShow) {\r\n      const marker = $('<div class=\"events_marker\"></div>').css({\r\n        position: 'absolute',\r\n        left: -markerSize - Math.round(lineWidth / 2) + 'px',\r\n        'font-size': 0,\r\n        'line-height': 0,\r\n        width: 0,\r\n        height: 0,\r\n        'border-left': markerSize + 'px solid transparent',\r\n        'border-right': markerSize + 'px solid transparent',\r\n      });\r\n\r\n      marker.appendTo(line);\r\n\r\n      if (\r\n        this._types[eventTypeId] &&\r\n        this._types[eventTypeId].position &&\r\n        this._types[eventTypeId].position.toUpperCase() === 'BOTTOM'\r\n      ) {\r\n        marker.css({\r\n          top: top - markerSize - 8 + 'px',\r\n          'border-top': 'none',\r\n          'border-bottom': markerSize + 'px solid ' + color,\r\n        });\r\n      } else {\r\n        marker.css({\r\n          top: '0px',\r\n          'border-top': markerSize + 'px solid ' + color,\r\n          'border-bottom': 'none',\r\n        });\r\n      }\r\n\r\n      marker.data({\r\n        event: event,\r\n      });\r\n\r\n      const mouseenter = function(this: any) {\r\n        createAnnotationToolip(marker, $(this).data('event'), that._plot);\r\n      };\r\n\r\n      if (event.editModel) {\r\n        createEditPopover(marker, event.editModel, that._plot);\r\n      }\r\n\r\n      const mouseleave = () => {\r\n        that._plot.clearSelection();\r\n      };\r\n\r\n      if (markerTooltip) {\r\n        marker.css({ cursor: 'help' });\r\n        marker.hover(mouseenter, mouseleave);\r\n      }\r\n    }\r\n\r\n    const drawableEvent = new DrawableEvent(\r\n      line,\r\n      function drawFunc(obj) {\r\n        obj.show();\r\n      },\r\n      obj => {\r\n        obj.remove();\r\n      },\r\n      (obj, position) => {\r\n        obj.css({\r\n          top: position.top,\r\n          left: position.left,\r\n        });\r\n      },\r\n      left,\r\n      top,\r\n      line.width(),\r\n      line.height()\r\n    );\r\n\r\n    return drawableEvent;\r\n  }\r\n\r\n  /**\r\n   * create a DOM element for the given region\r\n   */\r\n  _buildRegDiv(event) {\r\n    const that = this;\r\n\r\n    const container = this._plot.getPlaceholder();\r\n    const o = this._plot.getPlotOffset();\r\n    const xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\r\n    let top, left, lineWidth, regionWidth, lineStyle, color, markerTooltip;\r\n\r\n    // map the eventType to a types object\r\n    const eventTypeId = event.eventType;\r\n\r\n    if (this._types === null || !this._types[eventTypeId] || !this._types[eventTypeId].color) {\r\n      color = '#666';\r\n    } else {\r\n      color = this._types[eventTypeId].color;\r\n    }\r\n\r\n    if (this._types === null || !this._types[eventTypeId] || this._types[eventTypeId].markerTooltip === undefined) {\r\n      markerTooltip = true;\r\n    } else {\r\n      markerTooltip = this._types[eventTypeId].markerTooltip;\r\n    }\r\n\r\n    if (this._types == null || !this._types[eventTypeId] || this._types[eventTypeId].lineWidth === undefined) {\r\n      lineWidth = 1; //default line width\r\n    } else {\r\n      lineWidth = this._types[eventTypeId].lineWidth;\r\n    }\r\n\r\n    if (this._types == null || !this._types[eventTypeId] || !this._types[eventTypeId].lineStyle) {\r\n      lineStyle = 'dashed'; //default line style\r\n    } else {\r\n      lineStyle = this._types[eventTypeId].lineStyle.toLowerCase();\r\n    }\r\n\r\n    const topOffset = 2;\r\n    top = o.top + this._plot.height() + topOffset;\r\n\r\n    const timeFrom = Math.min(event.min, event.timeEnd);\r\n    const timeTo = Math.max(event.min, event.timeEnd);\r\n    left = xaxis.p2c(timeFrom) + o.left;\r\n    const right = xaxis.p2c(timeTo) + o.left;\r\n    regionWidth = right - left;\r\n\r\n    _.each([left, right], position => {\r\n      const line = $('<div class=\"events_line flot-temp-elem\"></div>').css({\r\n        position: 'absolute',\r\n        opacity: 0.8,\r\n        left: position + 'px',\r\n        top: 8,\r\n        width: lineWidth + 'px',\r\n        height: this._plot.height() + topOffset,\r\n        'border-left-width': lineWidth + 'px',\r\n        'border-left-style': lineStyle,\r\n        'border-left-color': color,\r\n        color: color,\r\n      });\r\n      line.appendTo(container);\r\n    });\r\n\r\n    const region = $('<div class=\"events_marker region_marker flot-temp-elem\"></div>').css({\r\n      position: 'absolute',\r\n      opacity: 0.5,\r\n      left: left + 'px',\r\n      top: top,\r\n      width: Math.round(regionWidth + lineWidth) + 'px',\r\n      height: '0.5rem',\r\n      'border-left-color': color,\r\n      color: color,\r\n      'background-color': color,\r\n    });\r\n    region.appendTo(container);\r\n\r\n    region.data({\r\n      event: event,\r\n    });\r\n\r\n    const mouseenter = function(this: any) {\r\n      createAnnotationToolip(region, $(this).data('event'), that._plot);\r\n    };\r\n\r\n    if (event.editModel) {\r\n      createEditPopover(region, event.editModel, that._plot);\r\n    }\r\n\r\n    const mouseleave = () => {\r\n      that._plot.clearSelection();\r\n    };\r\n\r\n    if (markerTooltip) {\r\n      region.css({ cursor: 'help' });\r\n      region.hover(mouseenter, mouseleave);\r\n    }\r\n\r\n    const drawableEvent = new DrawableEvent(\r\n      region,\r\n      function drawFunc(obj) {\r\n        obj.show();\r\n      },\r\n      obj => {\r\n        obj.remove();\r\n      },\r\n      (obj, position) => {\r\n        obj.css({\r\n          top: position.top,\r\n          left: position.left,\r\n        });\r\n      },\r\n      left,\r\n      top,\r\n      region.width(),\r\n      region.height()\r\n    );\r\n\r\n    return drawableEvent;\r\n  }\r\n\r\n  /**\r\n   * check if the event is inside visible range\r\n   */\r\n  _insidePlot(x) {\r\n    const xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\r\n    const xc = xaxis.p2c(x);\r\n    return xc > 0 && xc < xaxis.p2c(xaxis.max);\r\n  }\r\n}\r\n\r\n/**\r\n * initialize the plugin for the given plot\r\n */\r\n\r\n/** @ngInject */\r\nexport function init(this: any, plot) {\r\n  /*jshint validthis:true */\r\n  const that = this;\r\n  const eventMarkers = new EventMarkers(plot);\r\n\r\n  plot.getEvents = () => {\r\n    return eventMarkers._events;\r\n  };\r\n\r\n  plot.hideEvents = () => {\r\n    $.each(eventMarkers._events, (index, event) => {\r\n      event\r\n        .visual()\r\n        .getObject()\r\n        .hide();\r\n    });\r\n  };\r\n\r\n  plot.showEvents = () => {\r\n    plot.hideEvents();\r\n    $.each(eventMarkers._events, (index, event) => {\r\n      event.hide();\r\n    });\r\n\r\n    that.eventMarkers.drawEvents();\r\n  };\r\n\r\n  // change events on an existing plot\r\n  plot.setEvents = events => {\r\n    if (eventMarkers.eventsEnabled) {\r\n      eventMarkers.setupEvents(events);\r\n    }\r\n  };\r\n\r\n  plot.hooks.processOptions.push((plot, options) => {\r\n    // enable the plugin\r\n    if (options.events.data != null) {\r\n      eventMarkers.eventsEnabled = true;\r\n    }\r\n  });\r\n\r\n  plot.hooks.draw.push(plot => {\r\n    const options = plot.getOptions();\r\n\r\n    if (eventMarkers.eventsEnabled) {\r\n      // check for first run\r\n      if (eventMarkers.getEvents().length < 1) {\r\n        eventMarkers.setTypes(options.events.types);\r\n        eventMarkers.setupEvents(options.events.data);\r\n      } else {\r\n        eventMarkers.updateEvents();\r\n      }\r\n    }\r\n\r\n    eventMarkers.drawEvents();\r\n  });\r\n}\r\n\r\nconst defaultOptions = {\r\n  events: {\r\n    data: null,\r\n    types: null,\r\n    xaxis: 1,\r\n    position: 'BOTTOM',\r\n  },\r\n};\r\n\r\n$.plot.plugins.push({\r\n  init: init,\r\n  options: defaultOptions,\r\n  name: 'events',\r\n  version: '0.2.5',\r\n});\r\n","// Libraries\r\nimport _ from 'lodash';\r\nimport React, { PureComponent } from 'react';\r\n\r\n// Components\r\nimport Graph from 'app/viz/Graph';\r\nimport { getTimeSeriesVMs } from 'app/viz/state/timeSeries';\r\n\r\n// Types\r\nimport { PanelProps, NullValueMode } from 'app/types';\r\n\r\ninterface Options {\r\n  showBars: boolean;\r\n}\r\n\r\ninterface Props extends PanelProps {\r\n  options: Options;\r\n}\r\n\r\nexport class Graph2 extends PureComponent<Props> {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { timeSeries, timeRange } = this.props;\r\n\r\n    const vmSeries = getTimeSeriesVMs({\r\n      timeSeries: timeSeries,\r\n      nullValueMode: NullValueMode.Ignore,\r\n    });\r\n\r\n    return <Graph timeSeries={vmSeries} timeRange={timeRange} />;\r\n  }\r\n}\r\n\r\nexport class TextOptions extends PureComponent<any> {\r\n  render() {\r\n    return <p>Text2 Options component</p>;\r\n  }\r\n}\r\n\r\nexport { Graph2 as PanelComponent, TextOptions as PanelOptions };\r\n","import $ from 'jquery';\r\nimport { appEvents } from 'app/core/core';\r\n\r\nexport default function GraphTooltip(this: any, elem, dashboard, scope, getSeriesFn) {\r\n  const self = this;\r\n  const ctrl = scope.ctrl;\r\n  const panel = ctrl.panel;\r\n\r\n  const $tooltip = $('<div class=\"graph-tooltip\">');\r\n\r\n  this.destroy = () => {\r\n    $tooltip.remove();\r\n  };\r\n\r\n  this.findHoverIndexFromDataPoints = (posX, series, last) => {\r\n    const ps = series.datapoints.pointsize;\r\n    const initial = last * ps;\r\n    const len = series.datapoints.points.length;\r\n    let j;\r\n    for (j = initial; j < len; j += ps) {\r\n      // Special case of a non stepped line, highlight the very last point just before a null point\r\n      if (\r\n        (!series.lines.steps && series.datapoints.points[initial] != null && series.datapoints.points[j] == null) ||\r\n        //normal case\r\n        series.datapoints.points[j] > posX\r\n      ) {\r\n        return Math.max(j - ps, 0) / ps;\r\n      }\r\n    }\r\n    return j / ps - 1;\r\n  };\r\n\r\n  this.findHoverIndexFromData = (posX, series) => {\r\n    let lower = 0;\r\n    let upper = series.data.length - 1;\r\n    let middle;\r\n    while (true) {\r\n      if (lower > upper) {\r\n        return Math.max(upper, 0);\r\n      }\r\n      middle = Math.floor((lower + upper) / 2);\r\n      if (series.data[middle][0] === posX) {\r\n        return middle;\r\n      } else if (series.data[middle][0] < posX) {\r\n        lower = middle + 1;\r\n      } else {\r\n        upper = middle - 1;\r\n      }\r\n    }\r\n  };\r\n\r\n  this.renderAndShow = (absoluteTime, innerHtml, pos, xMode) => {\r\n    if (xMode === 'time') {\r\n      innerHtml = '<div class=\"graph-tooltip-time\">' + absoluteTime + '</div>' + innerHtml;\r\n    }\r\n    $tooltip.html(innerHtml).place_tt(pos.pageX + 20, pos.pageY);\r\n  };\r\n\r\n  this.getMultiSeriesPlotHoverInfo = function(seriesList, pos) {\r\n    let value, i, series, hoverIndex, hoverDistance, pointTime, yaxis;\r\n    // 3 sub-arrays, 1st for hidden series, 2nd for left yaxis, 3rd for right yaxis.\r\n    let results: any = [[], [], []];\r\n\r\n    //now we know the current X (j) position for X and Y values\r\n    let lastValue = 0; //needed for stacked values\r\n\r\n    let minDistance, minTime;\r\n\r\n    for (i = 0; i < seriesList.length; i++) {\r\n      series = seriesList[i];\r\n\r\n      if (!series.data.length || (panel.legend.hideEmpty && series.allIsNull)) {\r\n        // Init value so that it does not brake series sorting\r\n        results[0].push({ hidden: true, value: 0 });\r\n        continue;\r\n      }\r\n\r\n      if (!series.data.length || (panel.legend.hideZero && series.allIsZero)) {\r\n        // Init value so that it does not brake series sorting\r\n        results[0].push({ hidden: true, value: 0 });\r\n        continue;\r\n      }\r\n\r\n      if (series.hideTooltip) {\r\n        results[0].push({ hidden: true, value: 0 });\r\n        continue;\r\n      }\r\n\r\n      hoverIndex = this.findHoverIndexFromData(pos.x, series);\r\n      hoverDistance = pos.x - series.data[hoverIndex][0];\r\n      pointTime = series.data[hoverIndex][0];\r\n\r\n      // Take the closest point before the cursor, or if it does not exist, the closest after\r\n      if (\r\n        !minDistance ||\r\n        (hoverDistance >= 0 && (hoverDistance < minDistance || minDistance < 0)) ||\r\n        (hoverDistance < 0 && hoverDistance > minDistance)\r\n      ) {\r\n        minDistance = hoverDistance;\r\n        minTime = pointTime;\r\n      }\r\n\r\n      if (series.stack) {\r\n        if (panel.tooltip.value_type === 'individual') {\r\n          value = series.data[hoverIndex][1];\r\n        } else if (!series.stack) {\r\n          value = series.data[hoverIndex][1];\r\n        } else {\r\n          lastValue += series.data[hoverIndex][1];\r\n          value = lastValue;\r\n        }\r\n      } else {\r\n        value = series.data[hoverIndex][1];\r\n      }\r\n\r\n      // Highlighting multiple Points depending on the plot type\r\n      if (series.lines.steps || series.stack) {\r\n        // stacked and steppedLine plots can have series with different length.\r\n        // Stacked series can increase its length on each new stacked serie if null points found,\r\n        // to speed the index search we begin always on the last found hoverIndex.\r\n        hoverIndex = this.findHoverIndexFromDataPoints(pos.x, series, hoverIndex);\r\n      }\r\n\r\n      // Be sure we have a yaxis so that it does not brake series sorting\r\n      yaxis = 0;\r\n      if (series.yaxis) {\r\n        yaxis = series.yaxis.n;\r\n      }\r\n\r\n      results[yaxis].push({\r\n        value: value,\r\n        hoverIndex: hoverIndex,\r\n        color: series.color,\r\n        label: series.aliasEscaped,\r\n        time: pointTime,\r\n        distance: hoverDistance,\r\n        index: i,\r\n      });\r\n    }\r\n\r\n    // Contat the 3 sub-arrays\r\n    results = results[0].concat(results[1], results[2]);\r\n\r\n    // Time of the point closer to pointer\r\n    results.time = minTime;\r\n\r\n    return results;\r\n  };\r\n\r\n  elem.mouseleave(() => {\r\n    if (panel.tooltip.shared) {\r\n      const plot = elem.data().plot;\r\n      if (plot) {\r\n        $tooltip.detach();\r\n        plot.unhighlight();\r\n      }\r\n    }\r\n    appEvents.emit('graph-hover-clear');\r\n  });\r\n\r\n  elem.bind('plothover', (event, pos, item) => {\r\n    self.show(pos, item);\r\n\r\n    // broadcast to other graph panels that we are hovering!\r\n    pos.panelRelY = (pos.pageY - elem.offset().top) / elem.height();\r\n    appEvents.emit('graph-hover', { pos: pos, panel: panel });\r\n  });\r\n\r\n  elem.bind('plotclick', (event, pos, item) => {\r\n    appEvents.emit('graph-click', { pos: pos, panel: panel, item: item });\r\n  });\r\n\r\n  this.clear = plot => {\r\n    $tooltip.detach();\r\n    plot.clearCrosshair();\r\n    plot.unhighlight();\r\n  };\r\n\r\n  this.show = (pos, item) => {\r\n    const plot = elem.data().plot;\r\n    const plotData = plot.getData();\r\n    const xAxes = plot.getXAxes();\r\n    const xMode = xAxes[0].options.mode;\r\n    const seriesList = getSeriesFn();\r\n    let allSeriesMode = panel.tooltip.shared;\r\n    let group, value, absoluteTime, hoverInfo, i, series, seriesHtml, tooltipFormat;\r\n\r\n    // if panelRelY is defined another panel wants us to show a tooltip\r\n    // get pageX from position on x axis and pageY from relative position in original panel\r\n    if (pos.panelRelY) {\r\n      const pointOffset = plot.pointOffset({ x: pos.x });\r\n      if (Number.isNaN(pointOffset.left) || pointOffset.left < 0 || pointOffset.left > elem.width()) {\r\n        self.clear(plot);\r\n        return;\r\n      }\r\n      pos.pageX = elem.offset().left + pointOffset.left;\r\n      pos.pageY = elem.offset().top + elem.height() * pos.panelRelY;\r\n      const isVisible =\r\n        pos.pageY >= $(window).scrollTop() && pos.pageY <= $(window).innerHeight() + $(window).scrollTop();\r\n      if (!isVisible) {\r\n        self.clear(plot);\r\n        return;\r\n      }\r\n      plot.setCrosshair(pos);\r\n      allSeriesMode = true;\r\n\r\n      if (dashboard.sharedCrosshairModeOnly()) {\r\n        // if only crosshair mode we are done\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (seriesList.length === 0) {\r\n      return;\r\n    }\r\n\r\n    if (seriesList[0].hasMsResolution) {\r\n      tooltipFormat = 'YYYY-MM-DD HH:mm:ss.SSS';\r\n    } else {\r\n      tooltipFormat = 'YYYY-MM-DD HH:mm:ss';\r\n    }\r\n\r\n    if (allSeriesMode) {\r\n      plot.unhighlight();\r\n\r\n      const seriesHoverInfo = self.getMultiSeriesPlotHoverInfo(plotData, pos);\r\n\r\n      seriesHtml = '';\r\n\r\n      absoluteTime = dashboard.formatDate(seriesHoverInfo.time, tooltipFormat);\r\n\r\n      // Dynamically reorder the hovercard for the current time point if the\r\n      // option is enabled.\r\n      if (panel.tooltip.sort === 2) {\r\n        seriesHoverInfo.sort((a, b) => {\r\n          return b.value - a.value;\r\n        });\r\n      } else if (panel.tooltip.sort === 1) {\r\n        seriesHoverInfo.sort((a, b) => {\r\n          return a.value - b.value;\r\n        });\r\n      }\r\n\r\n      for (i = 0; i < seriesHoverInfo.length; i++) {\r\n        hoverInfo = seriesHoverInfo[i];\r\n\r\n        if (hoverInfo.hidden) {\r\n          continue;\r\n        }\r\n\r\n        let highlightClass = '';\r\n        if (item && hoverInfo.index === item.seriesIndex) {\r\n          highlightClass = 'graph-tooltip-list-item--highlight';\r\n        }\r\n\r\n        series = seriesList[hoverInfo.index];\r\n\r\n        value = series.formatValue(hoverInfo.value);\r\n\r\n        seriesHtml +=\r\n          '<div class=\"graph-tooltip-list-item ' + highlightClass + '\"><div class=\"graph-tooltip-series-name\">';\r\n        seriesHtml +=\r\n          '<i class=\"fa fa-minus\" style=\"color:' + hoverInfo.color + ';\"></i> ' + hoverInfo.label + ':</div>';\r\n        seriesHtml += '<div class=\"graph-tooltip-value\">' + value + '</div></div>';\r\n        plot.highlight(hoverInfo.index, hoverInfo.hoverIndex);\r\n      }\r\n\r\n      self.renderAndShow(absoluteTime, seriesHtml, pos, xMode);\r\n    } else if (item) {\r\n      // single series tooltip\r\n      series = seriesList[item.seriesIndex];\r\n      group = '<div class=\"graph-tooltip-list-item\"><div class=\"graph-tooltip-series-name\">';\r\n      group +=\r\n        '<i class=\"fa fa-minus\" style=\"color:' + item.series.color + ';\"></i> ' + series.aliasEscaped + ':</div>';\r\n\r\n      if (panel.stack && panel.tooltip.value_type === 'individual') {\r\n        value = item.datapoint[1] - item.datapoint[2];\r\n      } else {\r\n        value = item.datapoint[1];\r\n      }\r\n\r\n      value = series.formatValue(value);\r\n\r\n      absoluteTime = dashboard.formatDate(item.datapoint[0], tooltipFormat);\r\n\r\n      group += '<div class=\"graph-tooltip-value\">' + value + '</div>';\r\n\r\n      self.renderAndShow(absoluteTime, group, pos, xMode);\r\n    } else {\r\n      // no hit\r\n      $tooltip.detach();\r\n    }\r\n  };\r\n}\r\n","import 'vendor/flot/jquery.flot';\r\nimport $ from 'jquery';\r\nimport _ from 'lodash';\r\n\r\nexport class ThresholdManager {\r\n  plot: any;\r\n  placeholder: any;\r\n  height: any;\r\n  thresholds: any;\r\n  needsCleanup: boolean;\r\n  hasSecondYAxis: any;\r\n\r\n  constructor(private panelCtrl) {}\r\n\r\n  getHandleHtml(handleIndex, model, valueStr) {\r\n    let stateClass = model.colorMode;\r\n    if (model.colorMode === 'custom') {\r\n      stateClass = 'critical';\r\n    }\r\n\r\n    return `\r\n    <div class=\"alert-handle-wrapper alert-handle-wrapper--T${handleIndex}\">\r\n      <div class=\"alert-handle-line alert-handle-line--${stateClass}\">\r\n      </div>\r\n      <div class=\"alert-handle\" data-handle-index=\"${handleIndex}\">\r\n        <i class=\"icon-gf icon-gf-${stateClass} alert-state-${stateClass}\"></i>\r\n        <span class=\"alert-handle-value\">${valueStr}<i class=\"alert-handle-grip\"></i></span>\r\n      </div>\r\n    </div>`;\r\n  }\r\n\r\n  initDragging(evt) {\r\n    const handleElem = $(evt.currentTarget).parents('.alert-handle-wrapper');\r\n    const handleIndex = $(evt.currentTarget).data('handleIndex');\r\n\r\n    let lastY = null;\r\n    let posTop;\r\n    const plot = this.plot;\r\n    const panelCtrl = this.panelCtrl;\r\n    const model = this.thresholds[handleIndex];\r\n\r\n    function dragging(evt) {\r\n      if (lastY === null) {\r\n        lastY = evt.clientY;\r\n      } else {\r\n        const diff = evt.clientY - lastY;\r\n        posTop = posTop + diff;\r\n        lastY = evt.clientY;\r\n        handleElem.css({ top: posTop + diff });\r\n      }\r\n    }\r\n\r\n    function stopped() {\r\n      // calculate graph level\r\n      let graphValue = plot.c2p({ left: 0, top: posTop }).y;\r\n      graphValue = parseInt(graphValue.toFixed(0), 10);\r\n      model.value = graphValue;\r\n\r\n      handleElem.off('mousemove', dragging);\r\n      handleElem.off('mouseup', dragging);\r\n      handleElem.off('mouseleave', dragging);\r\n\r\n      // trigger digest and render\r\n      panelCtrl.$scope.$apply(() => {\r\n        panelCtrl.render();\r\n        panelCtrl.events.emit('threshold-changed', {\r\n          threshold: model,\r\n          handleIndex: handleIndex,\r\n        });\r\n      });\r\n    }\r\n\r\n    lastY = null;\r\n    posTop = handleElem.position().top;\r\n\r\n    handleElem.on('mousemove', dragging);\r\n    handleElem.on('mouseup', stopped);\r\n    handleElem.on('mouseleave', stopped);\r\n  }\r\n\r\n  cleanUp() {\r\n    this.placeholder.find('.alert-handle-wrapper').remove();\r\n    this.needsCleanup = false;\r\n  }\r\n\r\n  renderHandle(handleIndex, defaultHandleTopPos) {\r\n    const model = this.thresholds[handleIndex];\r\n    const value = model.value;\r\n    let valueStr = value;\r\n    let handleTopPos = 0;\r\n\r\n    // handle no value\r\n    if (!_.isNumber(value)) {\r\n      valueStr = '';\r\n      handleTopPos = defaultHandleTopPos;\r\n    } else {\r\n      const valueCanvasPos = this.plot.p2c({ x: 0, y: value });\r\n      handleTopPos = Math.round(Math.min(Math.max(valueCanvasPos.top, 0), this.height) - 6);\r\n    }\r\n\r\n    const handleElem = $(this.getHandleHtml(handleIndex, model, valueStr));\r\n    this.placeholder.append(handleElem);\r\n\r\n    handleElem.toggleClass('alert-handle-wrapper--no-value', valueStr === '');\r\n    handleElem.css({ top: handleTopPos });\r\n  }\r\n\r\n  shouldDrawHandles() {\r\n    return !this.hasSecondYAxis && this.panelCtrl.editingThresholds && this.panelCtrl.panel.thresholds.length > 0;\r\n  }\r\n\r\n  prepare(elem, data) {\r\n    this.hasSecondYAxis = false;\r\n    for (let i = 0; i < data.length; i++) {\r\n      if (data[i].yaxis > 1) {\r\n        this.hasSecondYAxis = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (this.shouldDrawHandles()) {\r\n      const thresholdMargin = this.panelCtrl.panel.thresholds.length > 1 ? '220px' : '110px';\r\n      elem.css('margin-right', thresholdMargin);\r\n    } else if (this.needsCleanup) {\r\n      elem.css('margin-right', '0');\r\n    }\r\n  }\r\n\r\n  draw(plot) {\r\n    this.thresholds = this.panelCtrl.panel.thresholds;\r\n    this.plot = plot;\r\n    this.placeholder = plot.getPlaceholder();\r\n\r\n    if (this.needsCleanup) {\r\n      this.cleanUp();\r\n    }\r\n\r\n    if (!this.shouldDrawHandles()) {\r\n      return;\r\n    }\r\n\r\n    this.height = plot.height();\r\n\r\n    if (this.thresholds.length > 0) {\r\n      this.renderHandle(0, 10);\r\n    }\r\n    if (this.thresholds.length > 1) {\r\n      this.renderHandle(1, this.height - 30);\r\n    }\r\n\r\n    this.placeholder.off('mousedown', '.alert-handle');\r\n    this.placeholder.on('mousedown', '.alert-handle', this.initDragging.bind(this));\r\n    this.needsCleanup = true;\r\n  }\r\n\r\n  addFlotOptions(options, panel) {\r\n    if (!panel.thresholds || panel.thresholds.length === 0) {\r\n      return;\r\n    }\r\n\r\n    let gtLimit = Infinity;\r\n    let ltLimit = -Infinity;\r\n    let i, threshold, other;\r\n\r\n    for (i = 0; i < panel.thresholds.length; i++) {\r\n      threshold = panel.thresholds[i];\r\n      if (!_.isNumber(threshold.value)) {\r\n        continue;\r\n      }\r\n\r\n      let limit;\r\n      switch (threshold.op) {\r\n        case 'gt': {\r\n          limit = gtLimit;\r\n          // if next threshold is less then op and greater value, then use that as limit\r\n          if (panel.thresholds.length > i + 1) {\r\n            other = panel.thresholds[i + 1];\r\n            if (other.value > threshold.value) {\r\n              limit = other.value;\r\n              ltLimit = limit;\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 'lt': {\r\n          limit = ltLimit;\r\n          // if next threshold is less then op and greater value, then use that as limit\r\n          if (panel.thresholds.length > i + 1) {\r\n            other = panel.thresholds[i + 1];\r\n            if (other.value < threshold.value) {\r\n              limit = other.value;\r\n              gtLimit = limit;\r\n            }\r\n          }\r\n          break;\r\n        }\r\n      }\r\n\r\n      let fillColor, lineColor;\r\n      switch (threshold.colorMode) {\r\n        case 'critical': {\r\n          fillColor = 'rgba(234, 112, 112, 0.12)';\r\n          lineColor = 'rgba(237, 46, 24, 0.60)';\r\n          break;\r\n        }\r\n        case 'warning': {\r\n          fillColor = 'rgba(235, 138, 14, 0.12)';\r\n          lineColor = 'rgba(247, 149, 32, 0.60)';\r\n          break;\r\n        }\r\n        case 'ok': {\r\n          fillColor = 'rgba(11, 237, 50, 0.090)';\r\n          lineColor = 'rgba(6,163,69, 0.60)';\r\n          break;\r\n        }\r\n        case 'custom': {\r\n          fillColor = threshold.fillColor;\r\n          lineColor = threshold.lineColor;\r\n          break;\r\n        }\r\n      }\r\n\r\n      // fill\r\n      if (threshold.fill) {\r\n        if (threshold.yaxis === 'right' && this.hasSecondYAxis) {\r\n          options.grid.markings.push({\r\n            y2axis: { from: threshold.value, to: limit },\r\n            color: fillColor,\r\n          });\r\n        } else {\r\n          options.grid.markings.push({\r\n            yaxis: { from: threshold.value, to: limit },\r\n            color: fillColor,\r\n          });\r\n        }\r\n      }\r\n      if (threshold.line) {\r\n        if (threshold.yaxis === 'right' && this.hasSecondYAxis) {\r\n          options.grid.markings.push({\r\n            y2axis: { from: threshold.value, to: threshold.value },\r\n            color: lineColor,\r\n          });\r\n        } else {\r\n          options.grid.markings.push({\r\n            yaxis: { from: threshold.value, to: threshold.value },\r\n            color: lineColor,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nexport class AnnotationsEditorCtrl {\r\n  mode: any;\r\n  datasources: any;\r\n  annotations: any;\r\n  currentAnnotation: any;\r\n  currentDatasource: any;\r\n  currentIsNew: any;\r\n\r\n  annotationDefaults: any = {\r\n    name: '',\r\n    datasource: null,\r\n    iconColor: 'rgba(255, 96, 96, 1)',\r\n    enable: true,\r\n    showIn: 0,\r\n    hide: false,\r\n  };\r\n\r\n  showOptions: any = [{ text: 'All Panels', value: 0 }, { text: 'Specific Panels', value: 1 }];\r\n\r\n  /** @ngInject */\r\n  constructor($scope, private datasourceSrv) {\r\n    $scope.ctrl = this;\r\n\r\n    this.mode = 'list';\r\n    this.datasources = datasourceSrv.getAnnotationSources();\r\n    this.annotations = $scope.dashboard.annotations.list;\r\n    this.reset();\r\n\r\n    this.onColorChange = this.onColorChange.bind(this);\r\n  }\r\n\r\n  datasourceChanged() {\r\n    return this.datasourceSrv.get(this.currentAnnotation.datasource).then(ds => {\r\n      this.currentDatasource = ds;\r\n    });\r\n  }\r\n\r\n  edit(annotation) {\r\n    this.currentAnnotation = annotation;\r\n    this.currentAnnotation.showIn = this.currentAnnotation.showIn || 0;\r\n    this.currentIsNew = false;\r\n    this.datasourceChanged();\r\n    this.mode = 'edit';\r\n    $('.tooltip.in').remove();\r\n  }\r\n\r\n  reset() {\r\n    this.currentAnnotation = angular.copy(this.annotationDefaults);\r\n    this.currentAnnotation.datasource = this.datasources[0].name;\r\n    this.currentIsNew = true;\r\n    this.datasourceChanged();\r\n  }\r\n\r\n  update() {\r\n    this.reset();\r\n    this.mode = 'list';\r\n  }\r\n\r\n  setupNew() {\r\n    this.mode = 'new';\r\n    this.reset();\r\n  }\r\n\r\n  backToList() {\r\n    this.mode = 'list';\r\n  }\r\n\r\n  move(index, dir) {\r\n    _.move(this.annotations, index, index + dir);\r\n  }\r\n\r\n  add() {\r\n    this.annotations.push(this.currentAnnotation);\r\n    this.reset();\r\n    this.mode = 'list';\r\n  }\r\n\r\n  removeAnnotation(annotation) {\r\n    const index = _.indexOf(this.annotations, annotation);\r\n    this.annotations.splice(index, 1);\r\n  }\r\n\r\n  onColorChange(newColor) {\r\n    this.currentAnnotation.iconColor = newColor;\r\n  }\r\n}\r\n\r\ncoreModule.controller('AnnotationsEditorCtrl', AnnotationsEditorCtrl);\r\n","import _ from 'lodash';\r\n\r\n/**\r\n * This function converts annotation events into set\r\n * of single events and regions (event consist of two)\r\n * @param annotations\r\n * @param options\r\n */\r\nexport function makeRegions(annotations, options) {\r\n  const [regionEvents, singleEvents] = _.partition(annotations, 'regionId');\r\n  const regions = getRegions(regionEvents, options.range);\r\n  annotations = _.concat(regions, singleEvents);\r\n  return annotations;\r\n}\r\n\r\nfunction getRegions(events, range) {\r\n  const regionEvents = _.filter(events, event => {\r\n    return event.regionId;\r\n  });\r\n  let regions = _.groupBy(regionEvents, 'regionId');\r\n  regions = _.compact(\r\n    _.map(regions, regionEvents => {\r\n      const regionObj = _.head(regionEvents);\r\n      if (regionEvents && regionEvents.length > 1) {\r\n        regionObj.timeEnd = regionEvents[1].time;\r\n        regionObj.isRegion = true;\r\n        return regionObj;\r\n      } else {\r\n        if (regionEvents && regionEvents.length) {\r\n          // Don't change proper region object\r\n          if (!regionObj.time || !regionObj.timeEnd) {\r\n            // This is cut region\r\n            if (isStartOfRegion(regionObj)) {\r\n              regionObj.timeEnd = range.to.valueOf() - 1;\r\n            } else {\r\n              // Start time = null\r\n              regionObj.timeEnd = regionObj.time;\r\n              regionObj.time = range.from.valueOf() + 1;\r\n            }\r\n            regionObj.isRegion = true;\r\n          }\r\n\r\n          return regionObj;\r\n        }\r\n      }\r\n    })\r\n  );\r\n\r\n  return regions;\r\n}\r\n\r\nfunction isStartOfRegion(event): boolean {\r\n  return event.id && event.id === event.regionId;\r\n}\r\n\r\nexport function dedupAnnotations(annotations) {\r\n  let dedup = [];\r\n\r\n  // Split events by annotationId property existence\r\n  const events = _.partition(annotations, 'id');\r\n\r\n  const eventsById = _.groupBy(events[0], 'id');\r\n  dedup = _.map(eventsById, eventGroup => {\r\n    if (eventGroup.length > 1 && !_.every(eventGroup, isPanelAlert)) {\r\n      // Get first non-panel alert\r\n      return _.find(eventGroup, event => {\r\n        return event.eventType !== 'panel-alert';\r\n      });\r\n    } else {\r\n      return _.head(eventGroup);\r\n    }\r\n  });\r\n\r\n  dedup = _.concat(dedup, events[1]);\r\n  return dedup;\r\n}\r\n\r\nfunction isPanelAlert(event) {\r\n  return event.eventType === 'panel-alert';\r\n}\r\n","import './editor_ctrl';\r\n\r\nimport angular from 'angular';\r\nimport _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport { makeRegions, dedupAnnotations } from './events_processing';\r\n\r\nexport class AnnotationsSrv {\r\n  globalAnnotationsPromise: any;\r\n  alertStatesPromise: any;\r\n  datasourcePromises: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $rootScope, private $q, private datasourceSrv, private backendSrv, private timeSrv) {\r\n    $rootScope.onAppEvent('refresh', this.clearCache.bind(this), $rootScope);\r\n    $rootScope.onAppEvent('dashboard-initialized', this.clearCache.bind(this), $rootScope);\r\n  }\r\n\r\n  clearCache() {\r\n    this.globalAnnotationsPromise = null;\r\n    this.alertStatesPromise = null;\r\n    this.datasourcePromises = null;\r\n  }\r\n\r\n  getAnnotations(options) {\r\n    return this.$q\r\n      .all([this.getGlobalAnnotations(options), this.getAlertStates(options)])\r\n      .then(results => {\r\n        // combine the annotations and flatten results\r\n        let annotations = _.flattenDeep(results[0]);\r\n\r\n        // filter out annotations that do not belong to requesting panel\r\n        annotations = _.filter(annotations, item => {\r\n          // if event has panel id and query is of type dashboard then panel and requesting panel id must match\r\n          if (item.panelId && item.source.type === 'dashboard') {\r\n            return item.panelId === options.panel.id;\r\n          }\r\n          return true;\r\n        });\r\n\r\n        annotations = dedupAnnotations(annotations);\r\n        annotations = makeRegions(annotations, options);\r\n\r\n        // look for alert state for this panel\r\n        const alertState = _.find(results[1], { panelId: options.panel.id });\r\n\r\n        return {\r\n          annotations: annotations,\r\n          alertState: alertState,\r\n        };\r\n      })\r\n      .catch(err => {\r\n        if (!err.message && err.data && err.data.message) {\r\n          err.message = err.data.message;\r\n        }\r\n        console.log('AnnotationSrv.query error', err);\r\n        this.$rootScope.appEvent('alert-error', ['Annotation Query Failed', err.message || err]);\r\n        return [];\r\n      });\r\n  }\r\n\r\n  getAlertStates(options) {\r\n    if (!options.dashboard.id) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    // ignore if no alerts\r\n    if (options.panel && !options.panel.alert) {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    if (options.range.raw.to !== 'now') {\r\n      return this.$q.when([]);\r\n    }\r\n\r\n    if (this.alertStatesPromise) {\r\n      return this.alertStatesPromise;\r\n    }\r\n\r\n    this.alertStatesPromise = this.backendSrv.get('/api/alerts/states-for-dashboard', {\r\n      dashboardId: options.dashboard.id,\r\n    });\r\n    return this.alertStatesPromise;\r\n  }\r\n\r\n  getGlobalAnnotations(options) {\r\n    const dashboard = options.dashboard;\r\n\r\n    if (this.globalAnnotationsPromise) {\r\n      return this.globalAnnotationsPromise;\r\n    }\r\n\r\n    const range = this.timeSrv.timeRange();\r\n    const promises = [];\r\n    const dsPromises = [];\r\n\r\n    for (const annotation of dashboard.annotations.list) {\r\n      if (!annotation.enable) {\r\n        continue;\r\n      }\r\n\r\n      if (annotation.snapshotData) {\r\n        return this.translateQueryResult(annotation, annotation.snapshotData);\r\n      }\r\n      const datasourcePromise = this.datasourceSrv.get(annotation.datasource);\r\n      dsPromises.push(datasourcePromise);\r\n      promises.push(\r\n        datasourcePromise\r\n          .then(datasource => {\r\n            // issue query against data source\r\n            return datasource.annotationQuery({\r\n              range: range,\r\n              rangeRaw: range.raw,\r\n              annotation: annotation,\r\n              dashboard: dashboard,\r\n            });\r\n          })\r\n          .then(results => {\r\n            // store response in annotation object if this is a snapshot call\r\n            if (dashboard.snapshot) {\r\n              annotation.snapshotData = angular.copy(results);\r\n            }\r\n            // translate result\r\n            return this.translateQueryResult(annotation, results);\r\n          })\r\n      );\r\n    }\r\n    this.datasourcePromises = this.$q.all(dsPromises);\r\n    this.globalAnnotationsPromise = this.$q.all(promises);\r\n    return this.globalAnnotationsPromise;\r\n  }\r\n\r\n  saveAnnotationEvent(annotation) {\r\n    this.globalAnnotationsPromise = null;\r\n    return this.backendSrv.post('/api/annotations', annotation);\r\n  }\r\n\r\n  updateAnnotationEvent(annotation) {\r\n    this.globalAnnotationsPromise = null;\r\n    return this.backendSrv.put(`/api/annotations/${annotation.id}`, annotation);\r\n  }\r\n\r\n  deleteAnnotationEvent(annotation) {\r\n    this.globalAnnotationsPromise = null;\r\n    let deleteUrl = `/api/annotations/${annotation.id}`;\r\n    if (annotation.isRegion) {\r\n      deleteUrl = `/api/annotations/region/${annotation.regionId}`;\r\n    }\r\n\r\n    return this.backendSrv.delete(deleteUrl);\r\n  }\r\n\r\n  translateQueryResult(annotation, results) {\r\n    // if annotation has snapshotData\r\n    // make clone and remove it\r\n    if (annotation.snapshotData) {\r\n      annotation = angular.copy(annotation);\r\n      delete annotation.snapshotData;\r\n    }\r\n\r\n    for (const item of results) {\r\n      item.source = annotation;\r\n    }\r\n    return results;\r\n  }\r\n}\r\n\r\ncoreModule.service('annotationsSrv', AnnotationsSrv);\r\n","import _ from 'lodash';\r\nimport moment from 'moment';\r\nimport { coreModule } from 'app/core/core';\r\nimport { MetricsPanelCtrl } from 'app/plugins/sdk';\r\nimport { AnnotationEvent } from './event';\r\n\r\nexport class EventEditorCtrl {\r\n  panelCtrl: MetricsPanelCtrl;\r\n  event: AnnotationEvent;\r\n  timeRange: { from: number; to: number };\r\n  form: any;\r\n  close: any;\r\n  timeFormated: string;\r\n\r\n  /** @ngInject */\r\n  constructor(private annotationsSrv) {\r\n    this.event.panelId = this.panelCtrl.panel.id;\r\n    this.event.dashboardId = this.panelCtrl.dashboard.id;\r\n\r\n    // Annotations query returns time as Unix timestamp in milliseconds\r\n    this.event.time = tryEpochToMoment(this.event.time);\r\n    if (this.event.isRegion) {\r\n      this.event.timeEnd = tryEpochToMoment(this.event.timeEnd);\r\n    }\r\n\r\n    this.timeFormated = this.panelCtrl.dashboard.formatDate(this.event.time);\r\n  }\r\n\r\n  save() {\r\n    if (!this.form.$valid) {\r\n      return;\r\n    }\r\n\r\n    const saveModel = _.cloneDeep(this.event);\r\n    saveModel.time = saveModel.time.valueOf();\r\n    saveModel.timeEnd = 0;\r\n\r\n    if (saveModel.isRegion) {\r\n      saveModel.timeEnd = this.event.timeEnd.valueOf();\r\n\r\n      if (saveModel.timeEnd < saveModel.time) {\r\n        console.log('invalid time');\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (saveModel.id) {\r\n      this.annotationsSrv\r\n        .updateAnnotationEvent(saveModel)\r\n        .then(() => {\r\n          this.panelCtrl.refresh();\r\n          this.close();\r\n        })\r\n        .catch(() => {\r\n          this.panelCtrl.refresh();\r\n          this.close();\r\n        });\r\n    } else {\r\n      this.annotationsSrv\r\n        .saveAnnotationEvent(saveModel)\r\n        .then(() => {\r\n          this.panelCtrl.refresh();\r\n          this.close();\r\n        })\r\n        .catch(() => {\r\n          this.panelCtrl.refresh();\r\n          this.close();\r\n        });\r\n    }\r\n  }\r\n\r\n  delete() {\r\n    return this.annotationsSrv\r\n      .deleteAnnotationEvent(this.event)\r\n      .then(() => {\r\n        this.panelCtrl.refresh();\r\n        this.close();\r\n      })\r\n      .catch(() => {\r\n        this.panelCtrl.refresh();\r\n        this.close();\r\n      });\r\n  }\r\n}\r\n\r\nfunction tryEpochToMoment(timestamp) {\r\n  if (timestamp && _.isNumber(timestamp)) {\r\n    const epoch = Number(timestamp);\r\n    return moment(epoch);\r\n  } else {\r\n    return timestamp;\r\n  }\r\n}\r\n\r\nexport function eventEditor() {\r\n  return {\r\n    restrict: 'E',\r\n    controller: EventEditorCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    templateUrl: 'public/app/features/annotations/partials/event_editor.html',\r\n    scope: {\r\n      panelCtrl: '=',\r\n      event: '=',\r\n      close: '&',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('eventEditor', eventEditor);\r\n","export class AnnotationEvent {\r\n  dashboardId: number;\r\n  panelId: number;\r\n  userId: number;\r\n  time: any;\r\n  timeEnd: any;\r\n  isRegion: boolean;\r\n  text: string;\r\n  type: string;\r\n  tags: string;\r\n}\r\n","import _ from 'lodash';\r\nimport moment from 'moment';\r\nimport tinycolor from 'tinycolor2';\r\nimport { MetricsPanelCtrl } from 'app/plugins/sdk';\r\nimport { AnnotationEvent } from './event';\r\nimport {\r\n  OK_COLOR,\r\n  ALERTING_COLOR,\r\n  NO_DATA_COLOR,\r\n  DEFAULT_ANNOTATION_COLOR,\r\n  REGION_FILL_ALPHA,\r\n} from 'app/core/utils/colors';\r\n\r\nexport class EventManager {\r\n  event: AnnotationEvent;\r\n  editorOpen: boolean;\r\n\r\n  constructor(private panelCtrl: MetricsPanelCtrl) {}\r\n\r\n  editorClosed() {\r\n    this.event = null;\r\n    this.editorOpen = false;\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  editorOpened() {\r\n    this.editorOpen = true;\r\n  }\r\n\r\n  updateTime(range) {\r\n    if (!this.event) {\r\n      this.event = new AnnotationEvent();\r\n      this.event.dashboardId = this.panelCtrl.dashboard.id;\r\n      this.event.panelId = this.panelCtrl.panel.id;\r\n    }\r\n\r\n    // update time\r\n    this.event.time = moment(range.from);\r\n    this.event.isRegion = false;\r\n    if (range.to) {\r\n      this.event.timeEnd = moment(range.to);\r\n      this.event.isRegion = true;\r\n    }\r\n\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  editEvent(event, elem?) {\r\n    this.event = event;\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  addFlotEvents(annotations, flotOptions) {\r\n    if (!this.event && annotations.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const types = {\r\n      $__alerting: {\r\n        color: ALERTING_COLOR,\r\n        position: 'BOTTOM',\r\n        markerSize: 5,\r\n      },\r\n      $__ok: {\r\n        color: OK_COLOR,\r\n        position: 'BOTTOM',\r\n        markerSize: 5,\r\n      },\r\n      $__no_data: {\r\n        color: NO_DATA_COLOR,\r\n        position: 'BOTTOM',\r\n        markerSize: 5,\r\n      },\r\n      $__editing: {\r\n        color: DEFAULT_ANNOTATION_COLOR,\r\n        position: 'BOTTOM',\r\n        markerSize: 5,\r\n      },\r\n    };\r\n\r\n    if (this.event) {\r\n      if (this.event.isRegion) {\r\n        annotations = [\r\n          {\r\n            isRegion: true,\r\n            min: this.event.time.valueOf(),\r\n            timeEnd: this.event.timeEnd.valueOf(),\r\n            text: this.event.text,\r\n            eventType: '$__editing',\r\n            editModel: this.event,\r\n          },\r\n        ];\r\n      } else {\r\n        annotations = [\r\n          {\r\n            min: this.event.time.valueOf(),\r\n            text: this.event.text,\r\n            editModel: this.event,\r\n            eventType: '$__editing',\r\n          },\r\n        ];\r\n      }\r\n    } else {\r\n      // annotations from query\r\n      for (let i = 0; i < annotations.length; i++) {\r\n        const item = annotations[i];\r\n\r\n        // add properties used by jquery flot events\r\n        item.min = item.time;\r\n        item.max = item.time;\r\n        item.eventType = item.source.name;\r\n\r\n        if (item.newState) {\r\n          item.eventType = '$__' + item.newState;\r\n          continue;\r\n        }\r\n\r\n        if (!types[item.source.name]) {\r\n          types[item.source.name] = {\r\n            color: item.source.iconColor,\r\n            position: 'BOTTOM',\r\n            markerSize: 5,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    const regions = getRegions(annotations);\r\n    addRegionMarking(regions, flotOptions);\r\n\r\n    const eventSectionHeight = 20;\r\n    const eventSectionMargin = 7;\r\n    flotOptions.grid.eventSectionHeight = eventSectionMargin;\r\n    flotOptions.xaxis.eventSectionHeight = eventSectionHeight;\r\n\r\n    flotOptions.events = {\r\n      levels: _.keys(types).length + 1,\r\n      data: annotations,\r\n      types: types,\r\n      manager: this,\r\n    };\r\n  }\r\n}\r\n\r\nfunction getRegions(events) {\r\n  return _.filter(events, 'isRegion');\r\n}\r\n\r\nfunction addRegionMarking(regions, flotOptions) {\r\n  const markings = flotOptions.grid.markings;\r\n  const defaultColor = DEFAULT_ANNOTATION_COLOR;\r\n  let fillColor;\r\n\r\n  _.each(regions, region => {\r\n    if (region.source) {\r\n      fillColor = region.source.iconColor || defaultColor;\r\n    } else {\r\n      fillColor = defaultColor;\r\n    }\r\n\r\n    fillColor = addAlphaToRGB(fillColor, REGION_FILL_ALPHA);\r\n    markings.push({\r\n      xaxis: { from: region.min, to: region.timeEnd },\r\n      color: fillColor,\r\n    });\r\n  });\r\n}\r\n\r\nfunction addAlphaToRGB(colorString: string, alpha: number): string {\r\n  const color = tinycolor(colorString);\r\n  if (color.isValid()) {\r\n    color.setAlpha(alpha);\r\n    return color.toRgbString();\r\n  } else {\r\n    return colorString;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport coreModule from 'app/core/core_module';\r\nimport alertDef from '../alerting/state/alertDef';\r\n\r\n/** @ngInject */\r\nexport function annotationTooltipDirective($sanitize, dashboardSrv, contextSrv, $compile) {\r\n  function sanitizeString(str) {\r\n    try {\r\n      return $sanitize(str);\r\n    } catch (err) {\r\n      console.log('Could not sanitize annotation string, html escaping instead');\r\n      return _.escape(str);\r\n    }\r\n  }\r\n\r\n  return {\r\n    restrict: 'E',\r\n    scope: {\r\n      event: '=',\r\n      onEdit: '&',\r\n    },\r\n    link: (scope, element) => {\r\n      const event = scope.event;\r\n      let title = event.title;\r\n      let text = event.text;\r\n      const dashboard = dashboardSrv.getCurrent();\r\n\r\n      let tooltip = '<div class=\"graph-annotation\">';\r\n      let titleStateClass = '';\r\n\r\n      if (event.alertId) {\r\n        const stateModel = alertDef.getStateDisplayModel(event.newState);\r\n        titleStateClass = stateModel.stateClass;\r\n        title = `<i class=\"icon-gf ${stateModel.iconClass}\"></i> ${stateModel.text}`;\r\n        text = alertDef.getAlertAnnotationInfo(event);\r\n        if (event.text) {\r\n          text = text + '<br />' + event.text;\r\n        }\r\n      } else if (title) {\r\n        text = title + '<br />' + (_.isString(text) ? text : '');\r\n        title = '';\r\n      }\r\n\r\n      let header = `<div class=\"graph-annotation__header\">`;\r\n      if (event.login) {\r\n        header += `<div class=\"graph-annotation__user\" bs-tooltip=\"'Created by ${event.login}'\"><img src=\"${\r\n          event.avatarUrl\r\n        }\" /></div>`;\r\n      }\r\n      header += `\r\n          <span class=\"graph-annotation__title ${titleStateClass}\">${sanitizeString(title)}</span>\r\n          <span class=\"graph-annotation__time\">${dashboard.formatDate(event.min)}</span>\r\n      `;\r\n\r\n      // Show edit icon only for users with at least Editor role\r\n      if (event.id && dashboard.meta.canEdit) {\r\n        header += `\r\n          <span class=\"pointer graph-annotation__edit-icon\" ng-click=\"onEdit()\">\r\n            <i class=\"fa fa-pencil-square\"></i>\r\n          </span>\r\n        `;\r\n      }\r\n\r\n      header += `</div>`;\r\n      tooltip += header;\r\n      tooltip += '<div class=\"graph-annotation__body\">';\r\n\r\n      if (text) {\r\n        tooltip += '<div>' + sanitizeString(text.replace(/\\n/g, '<br>')) + '</div>';\r\n      }\r\n\r\n      const tags = event.tags;\r\n\r\n      if (tags && tags.length) {\r\n        scope.tags = tags;\r\n        tooltip +=\r\n          '<span class=\"label label-tag small\" ng-repeat=\"tag in tags\" tag-color-from-name=\"tag\">{{tag}}</span><br/>';\r\n      }\r\n\r\n      tooltip += '</div>';\r\n      tooltip += '</div>';\r\n\r\n      const $tooltip = $(tooltip);\r\n      $tooltip.appendTo(element);\r\n\r\n      $compile(element.contents())(scope);\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('annotationTooltip', annotationTooltipDirective);\r\n","import _ from 'lodash';\r\nimport TimeSeries from 'app/core/time_series2';\r\n\r\n/**\r\n * Convert series into array of series values.\r\n * @param data Array of series\r\n */\r\nexport function getSeriesValues(dataList: TimeSeries[]): number[] {\r\n  const VALUE_INDEX = 0;\r\n  const values = [];\r\n\r\n  // Count histogam stats\r\n  for (let i = 0; i < dataList.length; i++) {\r\n    const series = dataList[i];\r\n    const datapoints = series.datapoints;\r\n    for (let j = 0; j < datapoints.length; j++) {\r\n      if (datapoints[j][VALUE_INDEX] !== null) {\r\n        values.push(datapoints[j][VALUE_INDEX]);\r\n      }\r\n    }\r\n  }\r\n\r\n  return values;\r\n}\r\n\r\n/**\r\n * Convert array of values into timeseries-like histogram:\r\n * [[val_1, count_1], [val_2, count_2], ..., [val_n, count_n]]\r\n * @param values\r\n * @param bucketSize\r\n */\r\nexport function convertValuesToHistogram(values: number[], bucketSize: number, min: number, max: number): any[] {\r\n  const histogram = {};\r\n\r\n  const minBound = getBucketBound(min, bucketSize);\r\n  const maxBound = getBucketBound(max, bucketSize);\r\n  let bound = minBound;\r\n  let n = 0;\r\n  while (bound <= maxBound) {\r\n    histogram[bound] = 0;\r\n    bound = minBound + bucketSize * n;\r\n    n++;\r\n  }\r\n\r\n  for (let i = 0; i < values.length; i++) {\r\n    const bound = getBucketBound(values[i], bucketSize);\r\n    histogram[bound] = histogram[bound] + 1;\r\n  }\r\n\r\n  const histogamSeries = _.map(histogram, (count, bound) => {\r\n    return [Number(bound), count];\r\n  });\r\n\r\n  // Sort by Y axis values\r\n  return _.sortBy(histogamSeries, point => point[0]);\r\n}\r\n\r\n/**\r\n * Convert series into array of histogram data.\r\n * @param data Array of series\r\n * @param bucketSize\r\n */\r\nexport function convertToHistogramData(\r\n  data: any,\r\n  bucketSize: number,\r\n  hiddenSeries: any,\r\n  min: number,\r\n  max: number\r\n): any[] {\r\n  return data.map(series => {\r\n    const values = getSeriesValues([series]);\r\n    series.histogram = true;\r\n    if (!hiddenSeries[series.alias]) {\r\n      const histogram = convertValuesToHistogram(values, bucketSize, min, max);\r\n      series.data = histogram;\r\n    } else {\r\n      series.data = [];\r\n    }\r\n    return series;\r\n  });\r\n}\r\n\r\nfunction getBucketBound(value: number, bucketSize: number): number {\r\n  return Math.floor(value / bucketSize) * bucketSize;\r\n}\r\n","import { AnnotationsSrv } from './annotations_srv';\r\nimport { eventEditor } from './event_editor';\r\nimport { EventManager } from './event_manager';\r\nimport { AnnotationEvent } from './event';\r\nimport { annotationTooltipDirective } from './annotation_tooltip';\r\n\r\nexport { AnnotationsSrv, eventEditor, EventManager, AnnotationEvent, annotationTooltipDirective };\r\n","import _ from 'lodash';\r\n\r\n/**\r\n * To align two Y axes by Y level\r\n * @param yAxes data [{min: min_y1, min: max_y1}, {min: min_y2, max: max_y2}]\r\n * @param level Y level\r\n */\r\nexport function alignYLevel(yAxes, level) {\r\n  if (isNaN(level) || !checkCorrectAxis(yAxes)) {\r\n    return;\r\n  }\r\n\r\n  const [yLeft, yRight] = yAxes;\r\n  moveLevelToZero(yLeft, yRight, level);\r\n\r\n  expandStuckValues(yLeft, yRight);\r\n\r\n  // one of graphs on zero\r\n  const zero = yLeft.min === 0 || yRight.min === 0 || yLeft.max === 0 || yRight.max === 0;\r\n\r\n  const oneSide = checkOneSide(yLeft, yRight);\r\n\r\n  if (zero && oneSide) {\r\n    yLeft.min = yLeft.max > 0 ? 0 : yLeft.min;\r\n    yLeft.max = yLeft.max > 0 ? yLeft.max : 0;\r\n    yRight.min = yRight.max > 0 ? 0 : yRight.min;\r\n    yRight.max = yRight.max > 0 ? yRight.max : 0;\r\n  } else {\r\n    if (checkOppositeSides(yLeft, yRight)) {\r\n      if (yLeft.min >= 0) {\r\n        yLeft.min = -yLeft.max;\r\n        yRight.max = -yRight.min;\r\n      } else {\r\n        yLeft.max = -yLeft.min;\r\n        yRight.min = -yRight.max;\r\n      }\r\n    } else {\r\n      const rate = getRate(yLeft, yRight);\r\n\r\n      if (oneSide) {\r\n        // all graphs above the Y level\r\n        if (yLeft.min > 0) {\r\n          yLeft.min = yLeft.max / rate;\r\n          yRight.min = yRight.max / rate;\r\n        } else {\r\n          yLeft.max = yLeft.min / rate;\r\n          yRight.max = yRight.min / rate;\r\n        }\r\n      } else {\r\n        if (checkTwoCross(yLeft, yRight)) {\r\n          yLeft.min = yRight.min ? yRight.min * rate : yLeft.min;\r\n          yRight.min = yLeft.min ? yLeft.min / rate : yRight.min;\r\n          yLeft.max = yRight.max ? yRight.max * rate : yLeft.max;\r\n          yRight.max = yLeft.max ? yLeft.max / rate : yRight.max;\r\n        } else {\r\n          yLeft.min = yLeft.min > 0 ? yRight.min * rate : yLeft.min;\r\n          yRight.min = yRight.min > 0 ? yLeft.min / rate : yRight.min;\r\n          yLeft.max = yLeft.max < 0 ? yRight.max * rate : yLeft.max;\r\n          yRight.max = yRight.max < 0 ? yLeft.max / rate : yRight.max;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  restoreLevelFromZero(yLeft, yRight, level);\r\n}\r\n\r\nfunction expandStuckValues(yLeft, yRight) {\r\n  // wide Y min and max using increased wideFactor\r\n  const wideFactor = 0.25;\r\n  if (yLeft.max === yLeft.min) {\r\n    yLeft.min -= wideFactor;\r\n    yLeft.max += wideFactor;\r\n  }\r\n  if (yRight.max === yRight.min) {\r\n    yRight.min -= wideFactor;\r\n    yRight.max += wideFactor;\r\n  }\r\n}\r\n\r\nfunction moveLevelToZero(yLeft, yRight, level) {\r\n  if (level !== 0) {\r\n    yLeft.min -= level;\r\n    yLeft.max -= level;\r\n    yRight.min -= level;\r\n    yRight.max -= level;\r\n  }\r\n}\r\n\r\nfunction restoreLevelFromZero(yLeft, yRight, level) {\r\n  if (level !== 0) {\r\n    yLeft.min += level;\r\n    yLeft.max += level;\r\n    yRight.min += level;\r\n    yRight.max += level;\r\n  }\r\n}\r\n\r\nfunction checkCorrectAxis(axis) {\r\n  return axis.length === 2 && checkCorrectAxes(axis[0]) && checkCorrectAxes(axis[1]);\r\n}\r\n\r\nfunction checkCorrectAxes(axes) {\r\n  return 'min' in axes && 'max' in axes;\r\n}\r\n\r\nfunction checkOneSide(yLeft, yRight) {\r\n  // on the one hand with respect to zero\r\n  return (yLeft.min >= 0 && yRight.min >= 0) || (yLeft.max <= 0 && yRight.max <= 0);\r\n}\r\n\r\nfunction checkTwoCross(yLeft, yRight) {\r\n  // both across zero\r\n  return yLeft.min <= 0 && yLeft.max >= 0 && yRight.min <= 0 && yRight.max >= 0;\r\n}\r\n\r\nfunction checkOppositeSides(yLeft, yRight) {\r\n  // on the opposite sides with respect to zero\r\n  return (yLeft.min >= 0 && yRight.max <= 0) || (yLeft.max <= 0 && yRight.min >= 0);\r\n}\r\n\r\nfunction getRate(yLeft, yRight) {\r\n  let rateLeft, rateRight, rate;\r\n  if (checkTwoCross(yLeft, yRight)) {\r\n    rateLeft = yRight.min ? yLeft.min / yRight.min : 0;\r\n    rateRight = yRight.max ? yLeft.max / yRight.max : 0;\r\n  } else {\r\n    if (checkOneSide(yLeft, yRight)) {\r\n      const absLeftMin = Math.abs(yLeft.min);\r\n      const absLeftMax = Math.abs(yLeft.max);\r\n      const absRightMin = Math.abs(yRight.min);\r\n      const absRightMax = Math.abs(yRight.max);\r\n      const upLeft = _.max([absLeftMin, absLeftMax]);\r\n      const downLeft = _.min([absLeftMin, absLeftMax]);\r\n      const upRight = _.max([absRightMin, absRightMax]);\r\n      const downRight = _.min([absRightMin, absRightMax]);\r\n\r\n      rateLeft = downLeft ? upLeft / downLeft : upLeft;\r\n      rateRight = downRight ? upRight / downRight : upRight;\r\n    } else {\r\n      if (yLeft.min > 0 || yRight.min > 0) {\r\n        rateLeft = yLeft.max / yRight.max;\r\n        rateRight = 0;\r\n      } else {\r\n        rateLeft = 0;\r\n        rateRight = yLeft.min / yRight.min;\r\n      }\r\n    }\r\n  }\r\n\r\n  rate = rateLeft > rateRight ? rateLeft : rateRight;\r\n\r\n  return rate;\r\n}\r\n","import 'vendor/flot/jquery.flot';\r\nimport 'vendor/flot/jquery.flot.selection';\r\nimport 'vendor/flot/jquery.flot.time';\r\nimport 'vendor/flot/jquery.flot.stack';\r\nimport 'vendor/flot/jquery.flot.stackpercent';\r\nimport 'vendor/flot/jquery.flot.fillbelow';\r\nimport 'vendor/flot/jquery.flot.crosshair';\r\nimport 'vendor/flot/jquery.flot.dashes';\r\nimport './jquery.flot.events';\r\n\r\nimport $ from 'jquery';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport { tickStep } from 'app/core/utils/ticks';\r\nimport { appEvents, coreModule, updateLegendValues } from 'app/core/core';\r\nimport GraphTooltip from './graph_tooltip';\r\nimport { ThresholdManager } from './threshold_manager';\r\nimport { EventManager } from 'app/features/annotations/all';\r\nimport { convertToHistogramData } from './histogram';\r\nimport { alignYLevel } from './align_yaxes';\r\nimport config from 'app/core/config';\r\n\r\nimport { GraphCtrl } from './module';\r\n\r\nclass GraphElement {\r\n  ctrl: GraphCtrl;\r\n  tooltip: any;\r\n  dashboard: any;\r\n  annotations: object[];\r\n  panel: any;\r\n  plot: any;\r\n  sortedSeries: any[];\r\n  data: any[];\r\n  panelWidth: number;\r\n  eventManager: EventManager;\r\n  thresholdManager: ThresholdManager;\r\n\r\n  constructor(private scope, private elem, private timeSrv) {\r\n    this.ctrl = scope.ctrl;\r\n    this.dashboard = this.ctrl.dashboard;\r\n    this.panel = this.ctrl.panel;\r\n    this.annotations = [];\r\n\r\n    this.panelWidth = 0;\r\n    this.eventManager = new EventManager(this.ctrl);\r\n    this.thresholdManager = new ThresholdManager(this.ctrl);\r\n    this.tooltip = new GraphTooltip(this.elem, this.ctrl.dashboard, this.scope, () => {\r\n      return this.sortedSeries;\r\n    });\r\n\r\n    // panel events\r\n    this.ctrl.events.on('panel-teardown', this.onPanelteardown.bind(this));\r\n\r\n    /**\r\n     * Split graph rendering into two parts.\r\n     * First, calculate series stats in buildFlotPairs() function. Then legend rendering started\r\n     * (see ctrl.events.on('render') in legend.ts).\r\n     * When legend is rendered it emits 'legend-rendering-complete' and graph rendered.\r\n     */\r\n    this.ctrl.events.on('render', this.onRender.bind(this));\r\n    this.ctrl.events.on('legend-rendering-complete', this.onLegendRenderingComplete.bind(this));\r\n\r\n    // global events\r\n    appEvents.on('graph-hover', this.onGraphHover.bind(this), scope);\r\n\r\n    appEvents.on('graph-hover-clear', this.onGraphHoverClear.bind(this), scope);\r\n\r\n    this.elem.bind('plotselected', this.onPlotSelected.bind(this));\r\n\r\n    this.elem.bind('plotclick', this.onPlotClick.bind(this));\r\n    scope.$on('$destroy', this.onScopeDestroy.bind(this));\r\n  }\r\n\r\n  onRender(renderData) {\r\n    this.data = renderData || this.data;\r\n    if (!this.data) {\r\n      return;\r\n    }\r\n    this.annotations = this.ctrl.annotations || [];\r\n    this.buildFlotPairs(this.data);\r\n    const graphHeight = this.elem.height();\r\n    updateLegendValues(this.data, this.panel, graphHeight);\r\n\r\n    this.ctrl.events.emit('render-legend');\r\n  }\r\n\r\n  onGraphHover(evt) {\r\n    // ignore other graph hover events if shared tooltip is disabled\r\n    if (!this.dashboard.sharedTooltipModeEnabled()) {\r\n      return;\r\n    }\r\n\r\n    // ignore if we are the emitter\r\n    if (!this.plot || evt.panel.id === this.panel.id || this.ctrl.otherPanelInFullscreenMode()) {\r\n      return;\r\n    }\r\n\r\n    this.tooltip.show(evt.pos);\r\n  }\r\n\r\n  onPanelteardown() {\r\n    this.thresholdManager = null;\r\n\r\n    if (this.plot) {\r\n      this.plot.destroy();\r\n      this.plot = null;\r\n    }\r\n  }\r\n\r\n  onLegendRenderingComplete() {\r\n    this.render_panel();\r\n  }\r\n\r\n  onGraphHoverClear(event, info) {\r\n    if (this.plot) {\r\n      this.tooltip.clear(this.plot);\r\n    }\r\n  }\r\n\r\n  onPlotSelected(event, ranges) {\r\n    if (this.panel.xaxis.mode !== 'time') {\r\n      // Skip if panel in histogram or series mode\r\n      this.plot.clearSelection();\r\n      return;\r\n    }\r\n\r\n    if ((ranges.ctrlKey || ranges.metaKey) && (this.dashboard.meta.canEdit || this.dashboard.meta.canMakeEditable)) {\r\n      // Add annotation\r\n      setTimeout(() => {\r\n        this.eventManager.updateTime(ranges.xaxis);\r\n      }, 100);\r\n    } else {\r\n      this.scope.$apply(() => {\r\n        this.timeSrv.setTime({\r\n          from: moment.utc(ranges.xaxis.from),\r\n          to: moment.utc(ranges.xaxis.to),\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  onPlotClick(event, pos, item) {\r\n    if (this.panel.xaxis.mode !== 'time') {\r\n      // Skip if panel in histogram or series mode\r\n      return;\r\n    }\r\n\r\n    if ((pos.ctrlKey || pos.metaKey) && (this.dashboard.meta.canEdit || this.dashboard.meta.canMakeEditable)) {\r\n      // Skip if range selected (added in \"plotselected\" event handler)\r\n      const isRangeSelection = pos.x !== pos.x1;\r\n      if (!isRangeSelection) {\r\n        setTimeout(() => {\r\n          this.eventManager.updateTime({ from: pos.x, to: null });\r\n        }, 100);\r\n      }\r\n    }\r\n  }\r\n\r\n  onScopeDestroy() {\r\n    this.tooltip.destroy();\r\n    this.elem.off();\r\n    this.elem.remove();\r\n  }\r\n\r\n  shouldAbortRender() {\r\n    if (!this.data) {\r\n      return true;\r\n    }\r\n\r\n    if (this.panelWidth === 0) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  drawHook(plot) {\r\n    // add left axis labels\r\n    if (this.panel.yaxes[0].label && this.panel.yaxes[0].show) {\r\n      $(\"<div class='axisLabel left-yaxis-label flot-temp-elem'></div>\")\r\n        .text(this.panel.yaxes[0].label)\r\n        .appendTo(this.elem);\r\n    }\r\n\r\n    // add right axis labels\r\n    if (this.panel.yaxes[1].label && this.panel.yaxes[1].show) {\r\n      $(\"<div class='axisLabel right-yaxis-label flot-temp-elem'></div>\")\r\n        .text(this.panel.yaxes[1].label)\r\n        .appendTo(this.elem);\r\n    }\r\n\r\n    if (this.ctrl.dataWarning) {\r\n      $(`<div class=\"datapoints-warning flot-temp-elem\">${this.ctrl.dataWarning.title}</div>`).appendTo(this.elem);\r\n    }\r\n\r\n    this.thresholdManager.draw(plot);\r\n  }\r\n\r\n  processOffsetHook(plot, gridMargin) {\r\n    const left = this.panel.yaxes[0];\r\n    const right = this.panel.yaxes[1];\r\n    if (left.show && left.label) {\r\n      gridMargin.left = 20;\r\n    }\r\n    if (right.show && right.label) {\r\n      gridMargin.right = 20;\r\n    }\r\n\r\n    // apply y-axis min/max options\r\n    const yaxis = plot.getYAxes();\r\n    for (let i = 0; i < yaxis.length; i++) {\r\n      const axis = yaxis[i];\r\n      const panelOptions = this.panel.yaxes[i];\r\n      axis.options.max = axis.options.max !== null ? axis.options.max : panelOptions.max;\r\n      axis.options.min = axis.options.min !== null ? axis.options.min : panelOptions.min;\r\n    }\r\n  }\r\n\r\n  processRangeHook(plot) {\r\n    const yAxes = plot.getYAxes();\r\n    const align = this.panel.yaxis.align || false;\r\n\r\n    if (yAxes.length > 1 && align === true) {\r\n      const level = this.panel.yaxis.alignLevel || 0;\r\n      alignYLevel(yAxes, parseFloat(level));\r\n    }\r\n  }\r\n\r\n  // Series could have different timeSteps,\r\n  // let's find the smallest one so that bars are correctly rendered.\r\n  // In addition, only take series which are rendered as bars for this.\r\n  getMinTimeStepOfSeries(data) {\r\n    let min = Number.MAX_VALUE;\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n      if (!data[i].stats.timeStep) {\r\n        continue;\r\n      }\r\n      if (this.panel.bars) {\r\n        if (data[i].bars && data[i].bars.show === false) {\r\n          continue;\r\n        }\r\n      } else {\r\n        if (typeof data[i].bars === 'undefined' || typeof data[i].bars.show === 'undefined' || !data[i].bars.show) {\r\n          continue;\r\n        }\r\n      }\r\n\r\n      if (data[i].stats.timeStep < min) {\r\n        min = data[i].stats.timeStep;\r\n      }\r\n    }\r\n\r\n    return min;\r\n  }\r\n\r\n  // Function for rendering panel\r\n  render_panel() {\r\n    this.panelWidth = this.elem.width();\r\n    if (this.shouldAbortRender()) {\r\n      return;\r\n    }\r\n\r\n    // give space to alert editing\r\n    this.thresholdManager.prepare(this.elem, this.data);\r\n\r\n    // un-check dashes if lines are unchecked\r\n    this.panel.dashes = this.panel.lines ? this.panel.dashes : false;\r\n\r\n    // Populate element\r\n    const options: any = this.buildFlotOptions(this.panel);\r\n    this.prepareXAxis(options, this.panel);\r\n    this.configureYAxisOptions(this.data, options);\r\n    this.thresholdManager.addFlotOptions(options, this.panel);\r\n    this.eventManager.addFlotEvents(this.annotations, options);\r\n\r\n    this.sortedSeries = this.sortSeries(this.data, this.panel);\r\n    this.callPlot(options, true);\r\n  }\r\n\r\n  buildFlotPairs(data) {\r\n    for (let i = 0; i < data.length; i++) {\r\n      const series = data[i];\r\n      series.data = series.getFlotPairs(series.nullPointMode || this.panel.nullPointMode);\r\n\r\n      // if hidden remove points and disable stack\r\n      if (this.ctrl.hiddenSeries[series.alias]) {\r\n        series.data = [];\r\n        series.stack = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  prepareXAxis(options, panel) {\r\n    switch (panel.xaxis.mode) {\r\n      case 'series': {\r\n        options.series.bars.barWidth = 0.7;\r\n        options.series.bars.align = 'center';\r\n\r\n        for (let i = 0; i < this.data.length; i++) {\r\n          const series = this.data[i];\r\n          series.data = [[i + 1, series.stats[panel.xaxis.values[0]]]];\r\n        }\r\n\r\n        this.addXSeriesAxis(options);\r\n        break;\r\n      }\r\n      case 'histogram': {\r\n        let bucketSize: number;\r\n\r\n        if (this.data.length) {\r\n          const histMin = _.min(_.map(this.data, s => s.stats.min));\r\n          const histMax = _.max(_.map(this.data, s => s.stats.max));\r\n          const ticks = panel.xaxis.buckets || this.panelWidth / 50;\r\n          bucketSize = tickStep(histMin, histMax, ticks);\r\n          options.series.bars.barWidth = bucketSize * 0.8;\r\n          this.data = convertToHistogramData(this.data, bucketSize, this.ctrl.hiddenSeries, histMin, histMax);\r\n        } else {\r\n          bucketSize = 0;\r\n        }\r\n\r\n        this.addXHistogramAxis(options, bucketSize);\r\n        break;\r\n      }\r\n      case 'table': {\r\n        options.series.bars.barWidth = 0.7;\r\n        options.series.bars.align = 'center';\r\n        this.addXTableAxis(options);\r\n        break;\r\n      }\r\n      default: {\r\n        options.series.bars.barWidth = this.getMinTimeStepOfSeries(this.data) / 1.5;\r\n        this.addTimeAxis(options);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  callPlot(options, incrementRenderCounter) {\r\n    try {\r\n      this.plot = $.plot(this.elem, this.sortedSeries, options);\r\n      if (this.ctrl.renderError) {\r\n        delete this.ctrl.error;\r\n        delete this.ctrl.inspector;\r\n      }\r\n    } catch (e) {\r\n      console.log('flotcharts error', e);\r\n      this.ctrl.error = e.message || 'Render Error';\r\n      this.ctrl.renderError = true;\r\n      this.ctrl.inspector = { error: e };\r\n    }\r\n\r\n    if (incrementRenderCounter) {\r\n      this.ctrl.renderingCompleted();\r\n    }\r\n  }\r\n\r\n  buildFlotOptions(panel) {\r\n    let gridColor = '#c8c8c8';\r\n    if (config.bootData.user.lightTheme === true) {\r\n      gridColor = '#a1a1a1';\r\n    }\r\n    const stack = panel.stack ? true : null;\r\n    const options = {\r\n      hooks: {\r\n        draw: [this.drawHook.bind(this)],\r\n        processOffset: [this.processOffsetHook.bind(this)],\r\n        processRange: [this.processRangeHook.bind(this)],\r\n      },\r\n      legend: { show: false },\r\n      series: {\r\n        stackpercent: panel.stack ? panel.percentage : false,\r\n        stack: panel.percentage ? null : stack,\r\n        lines: {\r\n          show: panel.lines,\r\n          zero: false,\r\n          fill: this.translateFillOption(panel.fill),\r\n          lineWidth: panel.dashes ? 0 : panel.linewidth,\r\n          steps: panel.steppedLine,\r\n        },\r\n        dashes: {\r\n          show: panel.dashes,\r\n          lineWidth: panel.linewidth,\r\n          dashLength: [panel.dashLength, panel.spaceLength],\r\n        },\r\n        bars: {\r\n          show: panel.bars,\r\n          fill: 1,\r\n          barWidth: 1,\r\n          zero: false,\r\n          lineWidth: 0,\r\n        },\r\n        points: {\r\n          show: panel.points,\r\n          fill: 1,\r\n          fillColor: false,\r\n          radius: panel.points ? panel.pointradius : 2,\r\n        },\r\n        shadowSize: 0,\r\n      },\r\n      yaxes: [],\r\n      xaxis: {},\r\n      grid: {\r\n        minBorderMargin: 0,\r\n        markings: [],\r\n        backgroundColor: null,\r\n        borderWidth: 0,\r\n        hoverable: true,\r\n        clickable: true,\r\n        color: gridColor,\r\n        margin: { left: 0, right: 0 },\r\n        labelMarginX: 0,\r\n      },\r\n      selection: {\r\n        mode: 'x',\r\n        color: '#666',\r\n      },\r\n      crosshair: {\r\n        mode: 'x',\r\n      },\r\n    };\r\n    return options;\r\n  }\r\n\r\n  sortSeries(series, panel) {\r\n    const sortBy = panel.legend.sort;\r\n    const sortOrder = panel.legend.sortDesc;\r\n    const haveSortBy = sortBy !== null && sortBy !== undefined;\r\n    const haveSortOrder = sortOrder !== null && sortOrder !== undefined;\r\n    const shouldSortBy = panel.stack && haveSortBy && haveSortOrder;\r\n    const sortDesc = panel.legend.sortDesc === true ? -1 : 1;\r\n\r\n    if (shouldSortBy) {\r\n      return _.sortBy(series, s => s.stats[sortBy] * sortDesc);\r\n    } else {\r\n      return _.sortBy(series, s => s.zindex);\r\n    }\r\n  }\r\n\r\n  translateFillOption(fill) {\r\n    if (this.panel.percentage && this.panel.stack) {\r\n      return fill === 0 ? 0.001 : fill / 10;\r\n    } else {\r\n      return fill / 10;\r\n    }\r\n  }\r\n\r\n  addTimeAxis(options) {\r\n    const ticks = this.panelWidth / 100;\r\n    const min = _.isUndefined(this.ctrl.range.from) ? null : this.ctrl.range.from.valueOf();\r\n    const max = _.isUndefined(this.ctrl.range.to) ? null : this.ctrl.range.to.valueOf();\r\n\r\n    options.xaxis = {\r\n      timezone: this.dashboard.getTimezone(),\r\n      show: this.panel.xaxis.show,\r\n      mode: 'time',\r\n      min: min,\r\n      max: max,\r\n      label: 'Datetime',\r\n      ticks: ticks,\r\n      timeformat: this.time_format(ticks, min, max),\r\n    };\r\n  }\r\n\r\n  addXSeriesAxis(options) {\r\n    const ticks = _.map(this.data, (series, index) => {\r\n      return [index + 1, series.alias];\r\n    });\r\n\r\n    options.xaxis = {\r\n      timezone: this.dashboard.getTimezone(),\r\n      show: this.panel.xaxis.show,\r\n      mode: null,\r\n      min: 0,\r\n      max: ticks.length + 1,\r\n      label: 'Datetime',\r\n      ticks: ticks,\r\n    };\r\n  }\r\n\r\n  addXHistogramAxis(options, bucketSize) {\r\n    let ticks, min, max;\r\n    const defaultTicks = this.panelWidth / 50;\r\n\r\n    if (this.data.length && bucketSize) {\r\n      const tickValues = [];\r\n      for (const d of this.data) {\r\n        for (const point of d.data) {\r\n          tickValues[point[0]] = true;\r\n        }\r\n      }\r\n      ticks = Object.keys(tickValues).map(v => Number(v));\r\n      min = _.min(ticks);\r\n      max = _.max(ticks);\r\n\r\n      // Adjust tick step\r\n      let tickStep = bucketSize;\r\n      let ticksNum = Math.floor((max - min) / tickStep);\r\n      while (ticksNum > defaultTicks) {\r\n        tickStep = tickStep * 2;\r\n        ticksNum = Math.ceil((max - min) / tickStep);\r\n      }\r\n\r\n      // Expand ticks for pretty view\r\n      min = Math.floor(min / tickStep) * tickStep;\r\n      // 1.01 is 101% - ensure we have enough space for last bar\r\n      max = Math.ceil(max * 1.01 / tickStep) * tickStep;\r\n\r\n      ticks = [];\r\n      for (let i = min; i <= max; i += tickStep) {\r\n        ticks.push(i);\r\n      }\r\n    } else {\r\n      // Set defaults if no data\r\n      ticks = defaultTicks / 2;\r\n      min = 0;\r\n      max = 1;\r\n    }\r\n\r\n    options.xaxis = {\r\n      timezone: this.dashboard.getTimezone(),\r\n      show: this.panel.xaxis.show,\r\n      mode: null,\r\n      min: min,\r\n      max: max,\r\n      label: 'Histogram',\r\n      ticks: ticks,\r\n    };\r\n\r\n    // Use 'short' format for histogram values\r\n    this.configureAxisMode(options.xaxis, 'short');\r\n  }\r\n\r\n  addXTableAxis(options) {\r\n    let ticks = _.map(this.data, (series, seriesIndex) => {\r\n      return _.map(series.datapoints, (point, pointIndex) => {\r\n        const tickIndex = seriesIndex * series.datapoints.length + pointIndex;\r\n        return [tickIndex + 1, point[1]];\r\n      });\r\n    });\r\n    ticks = _.flatten(ticks, true);\r\n\r\n    options.xaxis = {\r\n      timezone: this.dashboard.getTimezone(),\r\n      show: this.panel.xaxis.show,\r\n      mode: null,\r\n      min: 0,\r\n      max: ticks.length + 1,\r\n      label: 'Datetime',\r\n      ticks: ticks,\r\n    };\r\n  }\r\n\r\n  configureYAxisOptions(data, options) {\r\n    const defaults = {\r\n      position: 'left',\r\n      show: this.panel.yaxes[0].show,\r\n      index: 1,\r\n      logBase: this.panel.yaxes[0].logBase || 1,\r\n      min: this.parseNumber(this.panel.yaxes[0].min),\r\n      max: this.parseNumber(this.panel.yaxes[0].max),\r\n      tickDecimals: this.panel.yaxes[0].decimals,\r\n    };\r\n\r\n    options.yaxes.push(defaults);\r\n\r\n    if (_.find(data, { yaxis: 2 })) {\r\n      const secondY = _.clone(defaults);\r\n      secondY.index = 2;\r\n      secondY.show = this.panel.yaxes[1].show;\r\n      secondY.logBase = this.panel.yaxes[1].logBase || 1;\r\n      secondY.position = 'right';\r\n      secondY.min = this.parseNumber(this.panel.yaxes[1].min);\r\n      secondY.max = this.parseNumber(this.panel.yaxes[1].max);\r\n      secondY.tickDecimals = this.panel.yaxes[1].decimals;\r\n      options.yaxes.push(secondY);\r\n\r\n      this.applyLogScale(options.yaxes[1], data);\r\n      this.configureAxisMode(\r\n        options.yaxes[1],\r\n        this.panel.percentage && this.panel.stack ? 'percent' : this.panel.yaxes[1].format\r\n      );\r\n    }\r\n    this.applyLogScale(options.yaxes[0], data);\r\n    this.configureAxisMode(\r\n      options.yaxes[0],\r\n      this.panel.percentage && this.panel.stack ? 'percent' : this.panel.yaxes[0].format\r\n    );\r\n  }\r\n\r\n  parseNumber(value: any) {\r\n    if (value === null || typeof value === 'undefined') {\r\n      return null;\r\n    }\r\n\r\n    return _.toNumber(value);\r\n  }\r\n\r\n  applyLogScale(axis, data) {\r\n    if (axis.logBase === 1) {\r\n      return;\r\n    }\r\n\r\n    const minSetToZero = axis.min === 0;\r\n\r\n    if (axis.min < Number.MIN_VALUE) {\r\n      axis.min = null;\r\n    }\r\n    if (axis.max < Number.MIN_VALUE) {\r\n      axis.max = null;\r\n    }\r\n\r\n    let series, i;\r\n    let max = axis.max,\r\n      min = axis.min;\r\n\r\n    for (i = 0; i < data.length; i++) {\r\n      series = data[i];\r\n      if (series.yaxis === axis.index) {\r\n        if (!max || max < series.stats.max) {\r\n          max = series.stats.max;\r\n        }\r\n        if (!min || min > series.stats.logmin) {\r\n          min = series.stats.logmin;\r\n        }\r\n      }\r\n    }\r\n\r\n    axis.transform = v => {\r\n      return v < Number.MIN_VALUE ? null : Math.log(v) / Math.log(axis.logBase);\r\n    };\r\n    axis.inverseTransform = v => {\r\n      return Math.pow(axis.logBase, v);\r\n    };\r\n\r\n    if (!max && !min) {\r\n      max = axis.inverseTransform(+2);\r\n      min = axis.inverseTransform(-2);\r\n    } else if (!max) {\r\n      max = min * axis.inverseTransform(+4);\r\n    } else if (!min) {\r\n      min = max * axis.inverseTransform(-4);\r\n    }\r\n\r\n    if (axis.min) {\r\n      min = axis.inverseTransform(Math.ceil(axis.transform(axis.min)));\r\n    } else {\r\n      min = axis.min = axis.inverseTransform(Math.floor(axis.transform(min)));\r\n    }\r\n    if (axis.max) {\r\n      max = axis.inverseTransform(Math.floor(axis.transform(axis.max)));\r\n    } else {\r\n      max = axis.max = axis.inverseTransform(Math.ceil(axis.transform(max)));\r\n    }\r\n\r\n    if (!min || min < Number.MIN_VALUE || !max || max < Number.MIN_VALUE) {\r\n      return;\r\n    }\r\n\r\n    if (Number.isFinite(min) && Number.isFinite(max)) {\r\n      if (minSetToZero) {\r\n        axis.min = 0.1;\r\n        min = 1;\r\n      }\r\n\r\n      axis.ticks = this.generateTicksForLogScaleYAxis(min, max, axis.logBase);\r\n      if (minSetToZero) {\r\n        axis.ticks.unshift(0.1);\r\n      }\r\n      if (axis.ticks[axis.ticks.length - 1] > axis.max) {\r\n        axis.max = axis.ticks[axis.ticks.length - 1];\r\n      }\r\n    } else {\r\n      axis.ticks = [1, 2];\r\n      delete axis.min;\r\n      delete axis.max;\r\n    }\r\n  }\r\n\r\n  generateTicksForLogScaleYAxis(min, max, logBase) {\r\n    let ticks = [];\r\n\r\n    let nextTick;\r\n    for (nextTick = min; nextTick <= max; nextTick *= logBase) {\r\n      ticks.push(nextTick);\r\n    }\r\n\r\n    const maxNumTicks = Math.ceil(this.ctrl.height / 25);\r\n    const numTicks = ticks.length;\r\n    if (numTicks > maxNumTicks) {\r\n      const factor = Math.ceil(numTicks / maxNumTicks) * logBase;\r\n      ticks = [];\r\n\r\n      for (nextTick = min; nextTick <= max * factor; nextTick *= factor) {\r\n        ticks.push(nextTick);\r\n      }\r\n    }\r\n\r\n    return ticks;\r\n  }\r\n\r\n  configureAxisMode(axis, format) {\r\n    axis.tickFormatter = (val, axis) => {\r\n      if (!kbn.valueFormats[format]) {\r\n        throw new Error(`Unit '${format}' is not supported`);\r\n      }\r\n      return kbn.valueFormats[format](val, axis.tickDecimals, axis.scaledDecimals);\r\n    };\r\n  }\r\n\r\n  time_format(ticks, min, max) {\r\n    if (min && max && ticks) {\r\n      const range = max - min;\r\n      const secPerTick = range / ticks / 1000;\r\n      // Need have 10 milisecond margin on the day range\r\n      // As sometimes last 24 hour dashboard evaluates to more than 86400000\r\n      const oneDay = 86400010;\r\n      const oneYear = 31536000000;\r\n\r\n      if (secPerTick <= 45) {\r\n        return '%H:%M:%S';\r\n      }\r\n      if (secPerTick <= 7200 || range <= oneDay) {\r\n        return '%H:%M';\r\n      }\r\n      if (secPerTick <= 80000) {\r\n        return '%m/%d %H:%M';\r\n      }\r\n      if (secPerTick <= 2419200 || range <= oneYear) {\r\n        return '%m/%d';\r\n      }\r\n      return '%Y-%m';\r\n    }\r\n\r\n    return '%H:%M';\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nfunction graphDirective(timeSrv, popoverSrv, contextSrv) {\r\n  return {\r\n    restrict: 'A',\r\n    template: '',\r\n    link: (scope, elem) => {\r\n      return new GraphElement(scope, elem, timeSrv);\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('grafanaGraph', graphDirective);\r\nexport { GraphElement, graphDirective };\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport baron from 'baron';\r\nimport coreModule from 'app/core/core_module';\r\n\r\ncoreModule.directive('graphLegend', (popoverSrv, $timeout) => {\r\n  return {\r\n    link: (scope, elem) => {\r\n      let firstRender = true;\r\n      const ctrl = scope.ctrl;\r\n      const panel = ctrl.panel;\r\n      let data;\r\n      let seriesList;\r\n      let i;\r\n      let legendScrollbar;\r\n      const legendRightDefaultWidth = 10;\r\n      const legendElem = elem.parent();\r\n\r\n      scope.$on('$destroy', () => {\r\n        destroyScrollbar();\r\n      });\r\n\r\n      ctrl.events.on('render-legend', () => {\r\n        data = ctrl.seriesList;\r\n        if (data) {\r\n          render();\r\n        }\r\n        ctrl.events.emit('legend-rendering-complete');\r\n      });\r\n\r\n      function getSeriesIndexForElement(el) {\r\n        return el.parents('[data-series-index]').data('series-index');\r\n      }\r\n\r\n      function openColorSelector(e) {\r\n        // if we clicked inside poup container ignore click\r\n        if ($(e.target).parents('.popover').length) {\r\n          return;\r\n        }\r\n\r\n        const el = $(e.currentTarget).find('.fa-minus');\r\n        const index = getSeriesIndexForElement(el);\r\n        const series = seriesList[index];\r\n\r\n        $timeout(() => {\r\n          popoverSrv.show({\r\n            element: el[0],\r\n            position: 'bottom left',\r\n            targetAttachment: 'top left',\r\n            template:\r\n              '<series-color-picker series=\"series\" onToggleAxis=\"toggleAxis\" onColorChange=\"colorSelected\">' +\r\n              '</series-color-picker>',\r\n            openOn: 'hover',\r\n            model: {\r\n              series: series,\r\n              toggleAxis: () => {\r\n                ctrl.toggleAxis(series);\r\n              },\r\n              colorSelected: color => {\r\n                ctrl.changeSeriesColor(series, color);\r\n              },\r\n            },\r\n          });\r\n        });\r\n      }\r\n\r\n      function toggleSeries(e) {\r\n        const el = $(e.currentTarget);\r\n        const index = getSeriesIndexForElement(el);\r\n        const seriesInfo = seriesList[index];\r\n        const scrollPosition = legendScrollbar.scroller.scrollTop;\r\n        ctrl.toggleSeries(seriesInfo, e);\r\n        legendScrollbar.scroller.scrollTop = scrollPosition;\r\n      }\r\n\r\n      function sortLegend(e) {\r\n        const el = $(e.currentTarget);\r\n        const stat = el.data('stat');\r\n\r\n        if (stat !== panel.legend.sort) {\r\n          panel.legend.sortDesc = null;\r\n        }\r\n\r\n        // if already sort ascending, disable sorting\r\n        if (panel.legend.sortDesc === false) {\r\n          panel.legend.sort = null;\r\n          panel.legend.sortDesc = null;\r\n          ctrl.render();\r\n          return;\r\n        }\r\n\r\n        panel.legend.sortDesc = !panel.legend.sortDesc;\r\n        panel.legend.sort = stat;\r\n        ctrl.render();\r\n      }\r\n\r\n      function getTableHeaderHtml(statName) {\r\n        if (!panel.legend[statName]) {\r\n          return '';\r\n        }\r\n        let html = '<th class=\"pointer\" data-stat=\"' + statName + '\">' + statName;\r\n\r\n        if (panel.legend.sort === statName) {\r\n          const cssClass = panel.legend.sortDesc ? 'fa fa-caret-down' : 'fa fa-caret-up';\r\n          html += ' <span class=\"' + cssClass + '\"></span>';\r\n        }\r\n\r\n        return html + '</th>';\r\n      }\r\n\r\n      function render() {\r\n        const legendWidth = legendElem.width();\r\n        if (!ctrl.panel.legend.show) {\r\n          elem.empty();\r\n          firstRender = true;\r\n          return;\r\n        }\r\n\r\n        if (firstRender) {\r\n          elem.on('click', '.graph-legend-icon', openColorSelector);\r\n          elem.on('click', '.graph-legend-alias', toggleSeries);\r\n          elem.on('click', 'th', sortLegend);\r\n          firstRender = false;\r\n        }\r\n\r\n        seriesList = data;\r\n\r\n        elem.empty();\r\n\r\n        // Set min-width if side style and there is a value, otherwise remove the CSS property\r\n        // Set width so it works with IE11\r\n        const width: any = panel.legend.rightSide && panel.legend.sideWidth ? panel.legend.sideWidth + 'px' : '';\r\n        const ieWidth: any = panel.legend.rightSide && panel.legend.sideWidth ? panel.legend.sideWidth - 1 + 'px' : '';\r\n        legendElem.css('min-width', width);\r\n        legendElem.css('width', ieWidth);\r\n\r\n        elem.toggleClass('graph-legend-table', panel.legend.alignAsTable === true);\r\n\r\n        let tableHeaderElem;\r\n        if (panel.legend.alignAsTable) {\r\n          let header = '<tr>';\r\n          header += '<th colspan=\"2\" style=\"text-align:left\"></th>';\r\n          if (panel.legend.values) {\r\n            header += getTableHeaderHtml('min');\r\n            header += getTableHeaderHtml('max');\r\n            header += getTableHeaderHtml('avg');\r\n            header += getTableHeaderHtml('current');\r\n            header += getTableHeaderHtml('total');\r\n          }\r\n          header += '</tr>';\r\n          tableHeaderElem = $(header);\r\n        }\r\n\r\n        if (panel.legend.sort) {\r\n          seriesList = _.sortBy(seriesList, series => {\r\n            let sort = series.stats[panel.legend.sort];\r\n            if (sort === null) {\r\n              sort = -Infinity;\r\n            }\r\n            return sort;\r\n          });\r\n          if (panel.legend.sortDesc) {\r\n            seriesList = seriesList.reverse();\r\n          }\r\n        }\r\n\r\n        // render first time for getting proper legend height\r\n        if (!panel.legend.rightSide || (panel.legend.rightSide && legendWidth !== legendRightDefaultWidth)) {\r\n          renderLegendElement(tableHeaderElem);\r\n          elem.empty();\r\n        }\r\n\r\n        renderLegendElement(tableHeaderElem);\r\n      }\r\n\r\n      function renderSeriesLegendElements() {\r\n        const seriesElements = [];\r\n        for (i = 0; i < seriesList.length; i++) {\r\n          const series = seriesList[i];\r\n\r\n          if (series.hideFromLegend(panel.legend)) {\r\n            continue;\r\n          }\r\n\r\n          let html = '<div class=\"graph-legend-series';\r\n\r\n          if (series.yaxis === 2) {\r\n            html += ' graph-legend-series--right-y';\r\n          }\r\n          if (ctrl.hiddenSeries[series.alias]) {\r\n            html += ' graph-legend-series-hidden';\r\n          }\r\n          html += '\" data-series-index=\"' + i + '\">';\r\n          html += '<div class=\"graph-legend-icon\">';\r\n          html += '<i class=\"fa fa-minus pointer\" style=\"color:' + series.color + '\"></i>';\r\n          html += '</div>';\r\n\r\n          html +=\r\n            '<a class=\"graph-legend-alias pointer\" title=\"' + series.aliasEscaped + '\">' + series.aliasEscaped + '</a>';\r\n\r\n          if (panel.legend.values) {\r\n            const avg = series.formatValue(series.stats.avg);\r\n            const current = series.formatValue(series.stats.current);\r\n            const min = series.formatValue(series.stats.min);\r\n            const max = series.formatValue(series.stats.max);\r\n            const total = series.formatValue(series.stats.total);\r\n\r\n            if (panel.legend.min) {\r\n              html += '<div class=\"graph-legend-value min\">' + min + '</div>';\r\n            }\r\n            if (panel.legend.max) {\r\n              html += '<div class=\"graph-legend-value max\">' + max + '</div>';\r\n            }\r\n            if (panel.legend.avg) {\r\n              html += '<div class=\"graph-legend-value avg\">' + avg + '</div>';\r\n            }\r\n            if (panel.legend.current) {\r\n              html += '<div class=\"graph-legend-value current\">' + current + '</div>';\r\n            }\r\n            if (panel.legend.total) {\r\n              html += '<div class=\"graph-legend-value total\">' + total + '</div>';\r\n            }\r\n          }\r\n\r\n          html += '</div>';\r\n          seriesElements.push($(html));\r\n        }\r\n        return seriesElements;\r\n      }\r\n\r\n      function renderLegendElement(tableHeaderElem) {\r\n        const legendWidth = elem.width();\r\n\r\n        const seriesElements = renderSeriesLegendElements();\r\n\r\n        if (panel.legend.alignAsTable) {\r\n          const tbodyElem = $('<tbody></tbody>');\r\n          tbodyElem.append(tableHeaderElem);\r\n          tbodyElem.append(seriesElements);\r\n          elem.append(tbodyElem);\r\n          tbodyElem.wrap('<div class=\"graph-legend-scroll\"></div>');\r\n        } else {\r\n          elem.append('<div class=\"graph-legend-scroll\"></div>');\r\n          elem.find('.graph-legend-scroll').append(seriesElements);\r\n        }\r\n\r\n        if (!panel.legend.rightSide || (panel.legend.rightSide && legendWidth !== legendRightDefaultWidth)) {\r\n          addScrollbar();\r\n        } else {\r\n          destroyScrollbar();\r\n        }\r\n      }\r\n\r\n      function addScrollbar() {\r\n        const scrollRootClass = 'baron baron__root';\r\n        const scrollerClass = 'baron__scroller';\r\n        const scrollBarHTML = `\r\n          <div class=\"baron__track\">\r\n            <div class=\"baron__bar\"></div>\r\n          </div>\r\n        `;\r\n\r\n        const scrollRoot = elem;\r\n        const scroller = elem.find('.graph-legend-scroll');\r\n\r\n        // clear existing scroll bar track to prevent duplication\r\n        scrollRoot.find('.baron__track').remove();\r\n\r\n        scrollRoot.addClass(scrollRootClass);\r\n        $(scrollBarHTML).appendTo(scrollRoot);\r\n        scroller.addClass(scrollerClass);\r\n\r\n        const scrollbarParams = {\r\n          root: scrollRoot[0],\r\n          scroller: scroller[0],\r\n          bar: '.baron__bar',\r\n          track: '.baron__track',\r\n          barOnCls: '_scrollbar',\r\n          scrollingCls: '_scrolling',\r\n        };\r\n\r\n        if (!legendScrollbar) {\r\n          legendScrollbar = baron(scrollbarParams);\r\n        } else {\r\n          destroyScrollbar();\r\n          legendScrollbar = baron(scrollbarParams);\r\n        }\r\n\r\n        // #11830 - compensates for Firefox scrollbar calculation error in the baron framework\r\n        scroller[0].style.marginRight = '-' + (scroller[0].offsetWidth - scroller[0].clientWidth) + 'px';\r\n\r\n        legendScrollbar.scroll();\r\n      }\r\n\r\n      function destroyScrollbar() {\r\n        if (legendScrollbar) {\r\n          legendScrollbar.dispose();\r\n          legendScrollbar = undefined;\r\n        }\r\n      }\r\n    },\r\n  };\r\n});\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\n\r\n/** @ngInject */\r\nexport function SeriesOverridesCtrl($scope, $element, popoverSrv) {\r\n  $scope.overrideMenu = [];\r\n  $scope.currentOverrides = [];\r\n  $scope.override = $scope.override || {};\r\n\r\n  $scope.addOverrideOption = (name, propertyName, values) => {\r\n    const option = {\r\n      text: name,\r\n      propertyName: propertyName,\r\n      index: $scope.overrideMenu.lenght,\r\n      values: values,\r\n      submenu: _.map(values, value => {\r\n        return { text: String(value), value: value };\r\n      }),\r\n    };\r\n\r\n    $scope.overrideMenu.push(option);\r\n  };\r\n\r\n  $scope.setOverride = (item, subItem) => {\r\n    // handle color overrides\r\n    if (item.propertyName === 'color') {\r\n      $scope.openColorSelector($scope.override['color']);\r\n      return;\r\n    }\r\n\r\n    $scope.override[item.propertyName] = subItem.value;\r\n\r\n    // automatically disable lines for this series and the fill below to series\r\n    // can be removed by the user if they still want lines\r\n    if (item.propertyName === 'fillBelowTo') {\r\n      $scope.override['lines'] = false;\r\n      $scope.ctrl.addSeriesOverride({ alias: subItem.value, lines: false });\r\n    }\r\n\r\n    $scope.updateCurrentOverrides();\r\n    $scope.ctrl.render();\r\n  };\r\n\r\n  $scope.colorSelected = color => {\r\n    $scope.override['color'] = color;\r\n    $scope.updateCurrentOverrides();\r\n    $scope.ctrl.render();\r\n  };\r\n\r\n  $scope.openColorSelector = color => {\r\n    const fakeSeries = { color: color };\r\n    popoverSrv.show({\r\n      element: $element.find('.dropdown')[0],\r\n      position: 'top center',\r\n      openOn: 'click',\r\n      template: '<series-color-picker series=\"series\" onColorChange=\"colorSelected\" />',\r\n      model: {\r\n        autoClose: true,\r\n        colorSelected: $scope.colorSelected,\r\n        series: fakeSeries,\r\n      },\r\n      onClose: () => {\r\n        $scope.ctrl.render();\r\n      },\r\n    });\r\n  };\r\n\r\n  $scope.removeOverride = option => {\r\n    delete $scope.override[option.propertyName];\r\n    $scope.updateCurrentOverrides();\r\n    $scope.ctrl.refresh();\r\n  };\r\n\r\n  $scope.getSeriesNames = () => {\r\n    return _.map($scope.ctrl.seriesList, series => {\r\n      return series.alias;\r\n    });\r\n  };\r\n\r\n  $scope.updateCurrentOverrides = () => {\r\n    $scope.currentOverrides = [];\r\n    _.each($scope.overrideMenu, option => {\r\n      const value = $scope.override[option.propertyName];\r\n      if (_.isUndefined(value)) {\r\n        return;\r\n      }\r\n      $scope.currentOverrides.push({\r\n        name: option.text,\r\n        propertyName: option.propertyName,\r\n        value: String(value),\r\n      });\r\n    });\r\n  };\r\n\r\n  $scope.addOverrideOption('Bars', 'bars', [true, false]);\r\n  $scope.addOverrideOption('Lines', 'lines', [true, false]);\r\n  $scope.addOverrideOption('Line fill', 'fill', [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\r\n  $scope.addOverrideOption('Line width', 'linewidth', [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\r\n  $scope.addOverrideOption('Null point mode', 'nullPointMode', ['connected', 'null', 'null as zero']);\r\n  $scope.addOverrideOption('Fill below to', 'fillBelowTo', $scope.getSeriesNames());\r\n  $scope.addOverrideOption('Staircase line', 'steppedLine', [true, false]);\r\n  $scope.addOverrideOption('Dashes', 'dashes', [true, false]);\r\n  $scope.addOverrideOption('Dash Length', 'dashLength', [\r\n    1,\r\n    2,\r\n    3,\r\n    4,\r\n    5,\r\n    6,\r\n    7,\r\n    8,\r\n    9,\r\n    10,\r\n    11,\r\n    12,\r\n    13,\r\n    14,\r\n    15,\r\n    16,\r\n    17,\r\n    18,\r\n    19,\r\n    20,\r\n  ]);\r\n  $scope.addOverrideOption('Dash Space', 'spaceLength', [\r\n    1,\r\n    2,\r\n    3,\r\n    4,\r\n    5,\r\n    6,\r\n    7,\r\n    8,\r\n    9,\r\n    10,\r\n    11,\r\n    12,\r\n    13,\r\n    14,\r\n    15,\r\n    16,\r\n    17,\r\n    18,\r\n    19,\r\n    20,\r\n  ]);\r\n  $scope.addOverrideOption('Points', 'points', [true, false]);\r\n  $scope.addOverrideOption('Points Radius', 'pointradius', [1, 2, 3, 4, 5]);\r\n  $scope.addOverrideOption('Stack', 'stack', [true, false, 'A', 'B', 'C', 'D']);\r\n  $scope.addOverrideOption('Color', 'color', ['change']);\r\n  $scope.addOverrideOption('Y-axis', 'yaxis', [1, 2]);\r\n  $scope.addOverrideOption('Z-index', 'zindex', [-3, -2, -1, 0, 1, 2, 3]);\r\n  $scope.addOverrideOption('Transform', 'transform', ['negative-Y']);\r\n  $scope.addOverrideOption('Legend', 'legend', [true, false]);\r\n  $scope.addOverrideOption('Hide in tooltip', 'hideTooltip', [true, false]);\r\n  $scope.updateCurrentOverrides();\r\n}\r\n\r\ncoreModule.controller('SeriesOverridesCtrl', SeriesOverridesCtrl);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nexport class ThresholdFormCtrl {\r\n  panelCtrl: any;\r\n  panel: any;\r\n  disabled: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor($scope) {\r\n    this.panel = this.panelCtrl.panel;\r\n\r\n    if (this.panel.alert) {\r\n      this.disabled = true;\r\n    }\r\n\r\n    const unbindDestroy = $scope.$on('$destroy', () => {\r\n      this.panelCtrl.editingThresholds = false;\r\n      this.panelCtrl.render();\r\n      unbindDestroy();\r\n    });\r\n\r\n    this.panelCtrl.editingThresholds = true;\r\n  }\r\n\r\n  addThreshold() {\r\n    this.panel.thresholds.push({\r\n      value: undefined,\r\n      colorMode: 'critical',\r\n      op: 'gt',\r\n      fill: true,\r\n      line: true,\r\n      yaxis: 'left',\r\n    });\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  removeThreshold(index) {\r\n    this.panel.thresholds.splice(index, 1);\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  render() {\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  onFillColorChange(index) {\r\n    return newColor => {\r\n      this.panel.thresholds[index].fillColor = newColor;\r\n      this.render();\r\n    };\r\n  }\r\n\r\n  onLineColorChange(index) {\r\n    return newColor => {\r\n      this.panel.thresholds[index].lineColor = newColor;\r\n      this.render();\r\n    };\r\n  }\r\n}\r\n\r\nconst template = `\r\n<div class=\"gf-form-group\">\r\n  <h5>Thresholds</h5>\r\n  <p class=\"muted\" ng-show=\"ctrl.disabled\">\r\n    Visual thresholds options <strong>disabled.</strong>\r\n    Visit the Alert tab update your thresholds. <br>\r\n    To re-enable thresholds, the alert rule must be deleted from this panel.\r\n  </p>\r\n  <div ng-class=\"{'thresholds-form-disabled': ctrl.disabled}\">\r\n    <div class=\"gf-form-inline\" ng-repeat=\"threshold in ctrl.panel.thresholds\">\r\n      <div class=\"gf-form\">\r\n        <label class=\"gf-form-label\">T{{$index+1}}</label>\r\n      </div>\r\n\r\n      <div class=\"gf-form\">\r\n        <div class=\"gf-form-select-wrapper\">\r\n          <select class=\"gf-form-input\" ng-model=\"threshold.op\"\r\n                  ng-options=\"f for f in ['gt', 'lt']\" ng-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\"></select>\r\n        </div>\r\n        <input type=\"number\" ng-model=\"threshold.value\" class=\"gf-form-input width-8\"\r\n               ng-change=\"ctrl.render()\" placeholder=\"value\" ng-disabled=\"ctrl.disabled\">\r\n      </div>\r\n\r\n      <div class=\"gf-form\">\r\n        <label class=\"gf-form-label\">Color</label>\r\n        <div class=\"gf-form-select-wrapper\">\r\n          <select class=\"gf-form-input\" ng-model=\"threshold.colorMode\"\r\n                  ng-options=\"f for f in ['custom', 'critical', 'warning', 'ok']\" ng-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\">\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <gf-form-switch class=\"gf-form\" label=\"Fill\" checked=\"threshold.fill\"\r\n                      on-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\"></gf-form-switch>\r\n\r\n      <div class=\"gf-form\" ng-if=\"threshold.fill && threshold.colorMode === 'custom'\">\r\n        <label class=\"gf-form-label\">Fill color</label>\r\n        <span class=\"gf-form-label\">\r\n          <color-picker color=\"threshold.fillColor\" onChange=\"ctrl.onFillColorChange($index)\"></color-picker>\r\n        </span>\r\n      </div>\r\n\r\n      <gf-form-switch class=\"gf-form\" label=\"Line\" checked=\"threshold.line\"\r\n                      on-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\"></gf-form-switch>\r\n\r\n      <div class=\"gf-form\" ng-if=\"threshold.line && threshold.colorMode === 'custom'\">\r\n        <label class=\"gf-form-label\">Line color</label>\r\n        <span class=\"gf-form-label\">\r\n          <color-picker color=\"threshold.lineColor\" onChange=\"ctrl.onLineColorChange($index)\"></color-picker>\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"gf-form\">\r\n        <label class=\"gf-form-label\">Y-Axis</label>\r\n        <div class=\"gf-form-select-wrapper\">\r\n          <select class=\"gf-form-input\" ng-model=\"threshold.yaxis\"\r\n                  ng-init=\"threshold.yaxis = threshold.yaxis === 'left' || threshold.yaxis === 'right' ? threshold.yaxis : 'left'\"\r\n                  ng-options=\"f for f in ['left', 'right']\" ng-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\">\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"gf-form\">\r\n        <label class=\"gf-form-label\">\r\n          <a class=\"pointer\" ng-click=\"ctrl.removeThreshold($index)\" ng-disabled=\"ctrl.disabled\">\r\n            <i class=\"fa fa-trash\"></i>\r\n          </a>\r\n        </label>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"gf-form-button-row\">\r\n      <button class=\"btn btn-inverse\" ng-click=\"ctrl.addThreshold()\" ng-disabled=\"ctrl.disabled\">\r\n        <i class=\"fa fa-plus\"></i>&nbsp;Add Threshold\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n`;\r\n\r\ncoreModule.directive('graphThresholdForm', () => {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    controller: ThresholdFormCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      panelCtrl: '=',\r\n    },\r\n  };\r\n});\r\n","const template = `\r\n<div class=\"graph-panel\" ng-class=\"{'graph-panel--legend-right': ctrl.panel.legend.rightSide}\">\r\n  <div class=\"graph-panel__chart\" grafana-graph ng-dblclick=\"ctrl.zoomOut()\">\r\n  </div>\r\n\r\n  <div class=\"graph-legend\">\r\n    <div class=\"graph-legend-content\" graph-legend></div>\r\n  </div>\r\n</div>\r\n`;\r\n\r\nexport default template;\r\n","import _ from 'lodash';\r\nimport TimeSeries from 'app/core/time_series2';\r\nimport colors from 'app/core/utils/colors';\r\n\r\nexport class DataProcessor {\r\n  constructor(private panel) {}\r\n\r\n  getSeriesList(options) {\r\n    if (!options.dataList || options.dataList.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // auto detect xaxis mode\r\n    let firstItem;\r\n    if (options.dataList && options.dataList.length > 0) {\r\n      firstItem = options.dataList[0];\r\n      const autoDetectMode = this.getAutoDetectXAxisMode(firstItem);\r\n      if (this.panel.xaxis.mode !== autoDetectMode) {\r\n        this.panel.xaxis.mode = autoDetectMode;\r\n        this.setPanelDefaultsForNewXAxisMode();\r\n      }\r\n    }\r\n\r\n    switch (this.panel.xaxis.mode) {\r\n      case 'series':\r\n      case 'time': {\r\n        return options.dataList.map((item, index) => {\r\n          return this.timeSeriesHandler(item, index, options);\r\n        });\r\n      }\r\n      case 'histogram': {\r\n        let histogramDataList;\r\n        if (this.panel.stack) {\r\n          histogramDataList = options.dataList;\r\n        } else {\r\n          histogramDataList = [\r\n            {\r\n              target: 'count',\r\n              datapoints: _.concat([], _.flatten(_.map(options.dataList, 'datapoints'))),\r\n            },\r\n          ];\r\n        }\r\n        return histogramDataList.map((item, index) => {\r\n          return this.timeSeriesHandler(item, index, options);\r\n        });\r\n      }\r\n      case 'field': {\r\n        return this.customHandler(firstItem);\r\n      }\r\n    }\r\n  }\r\n\r\n  getAutoDetectXAxisMode(firstItem) {\r\n    switch (firstItem.type) {\r\n      case 'docs':\r\n        return 'field';\r\n      case 'table':\r\n        return 'field';\r\n      default: {\r\n        if (this.panel.xaxis.mode === 'series') {\r\n          return 'series';\r\n        }\r\n        if (this.panel.xaxis.mode === 'histogram') {\r\n          return 'histogram';\r\n        }\r\n        return 'time';\r\n      }\r\n    }\r\n  }\r\n\r\n  setPanelDefaultsForNewXAxisMode() {\r\n    switch (this.panel.xaxis.mode) {\r\n      case 'time': {\r\n        this.panel.bars = false;\r\n        this.panel.lines = true;\r\n        this.panel.points = false;\r\n        this.panel.legend.show = true;\r\n        this.panel.tooltip.shared = true;\r\n        this.panel.xaxis.values = [];\r\n        break;\r\n      }\r\n      case 'series': {\r\n        this.panel.bars = true;\r\n        this.panel.lines = false;\r\n        this.panel.points = false;\r\n        this.panel.stack = false;\r\n        this.panel.legend.show = false;\r\n        this.panel.tooltip.shared = false;\r\n        this.panel.xaxis.values = ['total'];\r\n        break;\r\n      }\r\n      case 'histogram': {\r\n        this.panel.bars = true;\r\n        this.panel.lines = false;\r\n        this.panel.points = false;\r\n        this.panel.stack = false;\r\n        this.panel.legend.show = false;\r\n        this.panel.tooltip.shared = false;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  timeSeriesHandler(seriesData, index, options) {\r\n    const datapoints = seriesData.datapoints || [];\r\n    const alias = seriesData.target;\r\n\r\n    const colorIndex = index % colors.length;\r\n    const color = this.panel.aliasColors[alias] || colors[colorIndex];\r\n\r\n    const series = new TimeSeries({\r\n      datapoints: datapoints,\r\n      alias: alias,\r\n      color: color,\r\n      unit: seriesData.unit,\r\n    });\r\n\r\n    if (datapoints && datapoints.length > 0) {\r\n      const last = datapoints[datapoints.length - 1][1];\r\n      const from = options.range.from;\r\n      if (last - from < -10000) {\r\n        series.isOutsideRange = true;\r\n      }\r\n    }\r\n\r\n    return series;\r\n  }\r\n\r\n  customHandler(dataItem) {\r\n    const nameField = this.panel.xaxis.name;\r\n    if (!nameField) {\r\n      throw {\r\n        message: 'No field name specified to use for x-axis, check your axes settings',\r\n      };\r\n    }\r\n    return [];\r\n  }\r\n\r\n  validateXAxisSeriesValue() {\r\n    switch (this.panel.xaxis.mode) {\r\n      case 'series': {\r\n        if (this.panel.xaxis.values.length === 0) {\r\n          this.panel.xaxis.values = ['total'];\r\n          return;\r\n        }\r\n\r\n        const validOptions = this.getXAxisValueOptions({});\r\n        const found = _.find(validOptions, { value: this.panel.xaxis.values[0] });\r\n        if (!found) {\r\n          this.panel.xaxis.values = ['total'];\r\n        }\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  getDataFieldNames(dataList, onlyNumbers) {\r\n    if (dataList.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const fields = [];\r\n    const firstItem = dataList[0];\r\n    const fieldParts = [];\r\n\r\n    function getPropertiesRecursive(obj) {\r\n      _.forEach(obj, (value, key) => {\r\n        if (_.isObject(value)) {\r\n          fieldParts.push(key);\r\n          getPropertiesRecursive(value);\r\n        } else {\r\n          if (!onlyNumbers || _.isNumber(value)) {\r\n            const field = fieldParts.concat(key).join('.');\r\n            fields.push(field);\r\n          }\r\n        }\r\n      });\r\n      fieldParts.pop();\r\n    }\r\n\r\n    if (firstItem.type === 'docs') {\r\n      if (firstItem.datapoints.length === 0) {\r\n        return [];\r\n      }\r\n      getPropertiesRecursive(firstItem.datapoints[0]);\r\n    }\r\n\r\n    return fields;\r\n  }\r\n\r\n  getXAxisValueOptions(options) {\r\n    switch (this.panel.xaxis.mode) {\r\n      case 'series': {\r\n        return [\r\n          { text: 'Avg', value: 'avg' },\r\n          { text: 'Min', value: 'min' },\r\n          { text: 'Max', value: 'max' },\r\n          { text: 'Total', value: 'total' },\r\n          { text: 'Count', value: 'count' },\r\n        ];\r\n      }\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  pluckDeep(obj: any, property: string) {\r\n    const propertyParts = property.split('.');\r\n    let value = obj;\r\n    for (let i = 0; i < propertyParts.length; ++i) {\r\n      if (value[propertyParts[i]]) {\r\n        value = value[propertyParts[i]];\r\n      } else {\r\n        return undefined;\r\n      }\r\n    }\r\n    return value;\r\n  }\r\n}\r\n","import kbn from 'app/core/utils/kbn';\r\n\r\nexport class AxesEditorCtrl {\r\n  panel: any;\r\n  panelCtrl: any;\r\n  unitFormats: any;\r\n  logScales: any;\r\n  xAxisModes: any;\r\n  xAxisStatOptions: any;\r\n  xNameSegment: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope, private $q) {\r\n    this.panelCtrl = $scope.ctrl;\r\n    this.panel = this.panelCtrl.panel;\r\n    this.$scope.ctrl = this;\r\n\r\n    this.unitFormats = kbn.getUnitFormats();\r\n\r\n    this.logScales = {\r\n      linear: 1,\r\n      'log (base 2)': 2,\r\n      'log (base 10)': 10,\r\n      'log (base 32)': 32,\r\n      'log (base 1024)': 1024,\r\n    };\r\n\r\n    this.xAxisModes = {\r\n      Time: 'time',\r\n      Series: 'series',\r\n      Histogram: 'histogram',\r\n      // 'Data field': 'field',\r\n    };\r\n\r\n    this.xAxisStatOptions = [\r\n      { text: 'Avg', value: 'avg' },\r\n      { text: 'Min', value: 'min' },\r\n      { text: 'Max', value: 'max' },\r\n      { text: 'Total', value: 'total' },\r\n      { text: 'Count', value: 'count' },\r\n      { text: 'Current', value: 'current' },\r\n    ];\r\n\r\n    if (this.panel.xaxis.mode === 'custom') {\r\n      if (!this.panel.xaxis.name) {\r\n        this.panel.xaxis.name = 'specify field';\r\n      }\r\n    }\r\n  }\r\n\r\n  setUnitFormat(axis, subItem) {\r\n    axis.format = subItem.value;\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  render() {\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  xAxisModeChanged() {\r\n    this.panelCtrl.processor.setPanelDefaultsForNewXAxisMode();\r\n    this.panelCtrl.onDataReceived(this.panelCtrl.dataList);\r\n  }\r\n\r\n  xAxisValueChanged() {\r\n    this.panelCtrl.onDataReceived(this.panelCtrl.dataList);\r\n  }\r\n\r\n  getDataFieldNames(onlyNumbers) {\r\n    const props = this.panelCtrl.processor.getDataFieldNames(this.panelCtrl.dataList, onlyNumbers);\r\n    const items = props.map(prop => {\r\n      return { text: prop, value: prop };\r\n    });\r\n\r\n    return this.$q.when(items);\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function axesEditorComponent() {\r\n  'use strict';\r\n  return {\r\n    restrict: 'E',\r\n    scope: true,\r\n    templateUrl: 'public/app/plugins/panel/graph/axes_editor.html',\r\n    controller: AxesEditorCtrl,\r\n  };\r\n}\r\n","import './graph';\r\nimport './legend';\r\nimport './series_overrides_ctrl';\r\nimport './thresholds_form';\r\n\r\nimport template from './template';\r\nimport _ from 'lodash';\r\nimport config from 'app/core/config';\r\nimport { MetricsPanelCtrl, alertTab } from 'app/plugins/sdk';\r\nimport { DataProcessor } from './data_processor';\r\nimport { axesEditorComponent } from './axes_editor';\r\n\r\nclass GraphCtrl extends MetricsPanelCtrl {\r\n  static template = template;\r\n\r\n  renderError: boolean;\r\n  hiddenSeries: any = {};\r\n  seriesList: any = [];\r\n  dataList: any = [];\r\n  annotations: any = [];\r\n  alertState: any;\r\n\r\n  annotationsPromise: any;\r\n  dataWarning: any;\r\n  colors: any = [];\r\n  subTabIndex: number;\r\n  processor: DataProcessor;\r\n\r\n  panelDefaults = {\r\n    // datasource name, null = default datasource\r\n    datasource: null,\r\n    // sets client side (flot) or native graphite png renderer (png)\r\n    renderer: 'flot',\r\n    yaxes: [\r\n      {\r\n        label: null,\r\n        show: true,\r\n        logBase: 1,\r\n        min: null,\r\n        max: null,\r\n        format: 'short',\r\n      },\r\n      {\r\n        label: null,\r\n        show: true,\r\n        logBase: 1,\r\n        min: null,\r\n        max: null,\r\n        format: 'short',\r\n      },\r\n    ],\r\n    xaxis: {\r\n      show: true,\r\n      mode: 'time',\r\n      name: null,\r\n      values: [],\r\n      buckets: null,\r\n    },\r\n    yaxis: {\r\n      align: false,\r\n      alignLevel: null,\r\n    },\r\n    // show/hide lines\r\n    lines: true,\r\n    // fill factor\r\n    fill: 1,\r\n    // line width in pixels\r\n    linewidth: 1,\r\n    // show/hide dashed line\r\n    dashes: false,\r\n    // length of a dash\r\n    dashLength: 10,\r\n    // length of space between two dashes\r\n    spaceLength: 10,\r\n    // show hide points\r\n    points: false,\r\n    // point radius in pixels\r\n    pointradius: 5,\r\n    // show hide bars\r\n    bars: false,\r\n    // enable/disable stacking\r\n    stack: false,\r\n    // stack percentage mode\r\n    percentage: false,\r\n    // legend options\r\n    legend: {\r\n      show: true, // disable/enable legend\r\n      values: false, // disable/enable legend values\r\n      min: false,\r\n      max: false,\r\n      current: false,\r\n      total: false,\r\n      avg: false,\r\n    },\r\n    // how null points should be handled\r\n    nullPointMode: 'null',\r\n    // staircase line mode\r\n    steppedLine: false,\r\n    // tooltip options\r\n    tooltip: {\r\n      value_type: 'individual',\r\n      shared: true,\r\n      sort: 0,\r\n    },\r\n    // time overrides\r\n    timeFrom: null,\r\n    timeShift: null,\r\n    // metric queries\r\n    targets: [{}],\r\n    // series color overrides\r\n    aliasColors: {},\r\n    // other style overrides\r\n    seriesOverrides: [],\r\n    thresholds: [],\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private annotationsSrv) {\r\n    super($scope, $injector);\r\n\r\n    _.defaults(this.panel, this.panelDefaults);\r\n    _.defaults(this.panel.tooltip, this.panelDefaults.tooltip);\r\n    _.defaults(this.panel.legend, this.panelDefaults.legend);\r\n    _.defaults(this.panel.xaxis, this.panelDefaults.xaxis);\r\n\r\n    this.processor = new DataProcessor(this.panel);\r\n\r\n    this.events.on('render', this.onRender.bind(this));\r\n    this.events.on('data-received', this.onDataReceived.bind(this));\r\n    this.events.on('data-error', this.onDataError.bind(this));\r\n    this.events.on('data-snapshot-load', this.onDataSnapshotLoad.bind(this));\r\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n    this.events.on('init-panel-actions', this.onInitPanelActions.bind(this));\r\n  }\r\n\r\n  onInitEditMode() {\r\n    this.addEditorTab('Display', 'public/app/plugins/panel/graph/tab_display.html', 4);\r\n    this.addEditorTab('Axes', axesEditorComponent, 2);\r\n    this.addEditorTab('Legend', 'public/app/plugins/panel/graph/tab_legend.html', 3);\r\n\r\n    if (config.alertingEnabled) {\r\n      this.addEditorTab('Alert', alertTab, 5);\r\n    }\r\n\r\n    this.subTabIndex = 0;\r\n  }\r\n\r\n  onInitPanelActions(actions) {\r\n    actions.push({ text: 'Export CSV', click: 'ctrl.exportCsv()' });\r\n    actions.push({ text: 'Toggle legend', click: 'ctrl.toggleLegend()' });\r\n  }\r\n\r\n  issueQueries(datasource) {\r\n    this.annotationsPromise = this.annotationsSrv.getAnnotations({\r\n      dashboard: this.dashboard,\r\n      panel: this.panel,\r\n      range: this.range,\r\n    });\r\n\r\n    /* Wait for annotationSrv requests to get datasources to\r\n     * resolve before issuing queries. This allows the annotations\r\n     * service to fire annotations queries before graph queries\r\n     * (but not wait for completion). This resolves\r\n     * issue 11806.\r\n     */\r\n    return this.annotationsSrv.datasourcePromises.then(r => {\r\n      return super.issueQueries(datasource);\r\n    });\r\n  }\r\n\r\n  zoomOut(evt) {\r\n    this.publishAppEvent('zoom-out', 2);\r\n  }\r\n\r\n  onDataSnapshotLoad(snapshotData) {\r\n    this.annotationsPromise = this.annotationsSrv.getAnnotations({\r\n      dashboard: this.dashboard,\r\n      panel: this.panel,\r\n      range: this.range,\r\n    });\r\n    this.onDataReceived(snapshotData);\r\n  }\r\n\r\n  onDataError(err) {\r\n    this.seriesList = [];\r\n    this.annotations = [];\r\n    this.render([]);\r\n  }\r\n\r\n  onDataReceived(dataList) {\r\n    this.dataList = dataList;\r\n    this.seriesList = this.processor.getSeriesList({\r\n      dataList: dataList,\r\n      range: this.range,\r\n    });\r\n\r\n    this.dataWarning = null;\r\n    const datapointsCount = this.seriesList.reduce((prev, series) => {\r\n      return prev + series.datapoints.length;\r\n    }, 0);\r\n\r\n    if (datapointsCount === 0) {\r\n      this.dataWarning = {\r\n        title: 'No data points',\r\n        tip: 'No datapoints returned from data query',\r\n      };\r\n    } else {\r\n      for (const series of this.seriesList) {\r\n        if (series.isOutsideRange) {\r\n          this.dataWarning = {\r\n            title: 'Data points outside time range',\r\n            tip: 'Can be caused by timezone mismatch or missing time filter in query',\r\n          };\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.annotationsPromise.then(\r\n      result => {\r\n        this.loading = false;\r\n        this.alertState = result.alertState;\r\n        this.annotations = result.annotations;\r\n        this.render(this.seriesList);\r\n      },\r\n      () => {\r\n        this.loading = false;\r\n        this.render(this.seriesList);\r\n      }\r\n    );\r\n  }\r\n\r\n  onRender() {\r\n    if (!this.seriesList) {\r\n      return;\r\n    }\r\n\r\n    for (const series of this.seriesList) {\r\n      series.applySeriesOverrides(this.panel.seriesOverrides);\r\n\r\n      if (series.unit) {\r\n        this.panel.yaxes[series.yaxis - 1].format = series.unit;\r\n      }\r\n    }\r\n  }\r\n\r\n  changeSeriesColor(series, color) {\r\n    series.setColor(color);\r\n    this.panel.aliasColors[series.alias] = series.color;\r\n    this.render();\r\n  }\r\n\r\n  toggleSeries(serie, event) {\r\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\r\n      if (this.hiddenSeries[serie.alias]) {\r\n        delete this.hiddenSeries[serie.alias];\r\n      } else {\r\n        this.hiddenSeries[serie.alias] = true;\r\n      }\r\n    } else {\r\n      this.toggleSeriesExclusiveMode(serie);\r\n    }\r\n    this.render();\r\n  }\r\n\r\n  toggleSeriesExclusiveMode(serie) {\r\n    const hidden = this.hiddenSeries;\r\n\r\n    if (hidden[serie.alias]) {\r\n      delete hidden[serie.alias];\r\n    }\r\n\r\n    // check if every other series is hidden\r\n    const alreadyExclusive = _.every(this.seriesList, value => {\r\n      if (value.alias === serie.alias) {\r\n        return true;\r\n      }\r\n\r\n      return hidden[value.alias];\r\n    });\r\n\r\n    if (alreadyExclusive) {\r\n      // remove all hidden series\r\n      _.each(this.seriesList, value => {\r\n        delete this.hiddenSeries[value.alias];\r\n      });\r\n    } else {\r\n      // hide all but this serie\r\n      _.each(this.seriesList, value => {\r\n        if (value.alias === serie.alias) {\r\n          return;\r\n        }\r\n\r\n        this.hiddenSeries[value.alias] = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  toggleAxis(info) {\r\n    let override = _.find(this.panel.seriesOverrides, { alias: info.alias });\r\n    if (!override) {\r\n      override = { alias: info.alias };\r\n      this.panel.seriesOverrides.push(override);\r\n    }\r\n    info.yaxis = override.yaxis = info.yaxis === 2 ? 1 : 2;\r\n    this.render();\r\n  }\r\n\r\n  addSeriesOverride(override) {\r\n    this.panel.seriesOverrides.push(override || {});\r\n  }\r\n\r\n  removeSeriesOverride(override) {\r\n    this.panel.seriesOverrides = _.without(this.panel.seriesOverrides, override);\r\n    this.render();\r\n  }\r\n\r\n  toggleLegend() {\r\n    this.panel.legend.show = !this.panel.legend.show;\r\n    this.refresh();\r\n  }\r\n\r\n  legendValuesOptionChanged() {\r\n    const legend = this.panel.legend;\r\n    legend.values = legend.min || legend.max || legend.avg || legend.current || legend.total;\r\n    this.render();\r\n  }\r\n\r\n  exportCsv() {\r\n    const scope = this.$scope.$new(true);\r\n    scope.seriesList = this.seriesList;\r\n    this.publishAppEvent('show-modal', {\r\n      templateHtml: '<export-data-modal data=\"seriesList\"></export-data-modal>',\r\n      scope,\r\n      modalClass: 'modal--narrow',\r\n    });\r\n  }\r\n}\r\n\r\nexport { GraphCtrl, GraphCtrl as PanelCtrl };\r\n","import _ from 'lodash';\r\nimport { PanelCtrl } from 'app/plugins/sdk';\r\nimport impressionSrv from 'app/core/services/impression_srv';\r\n\r\nclass DashListCtrl extends PanelCtrl {\r\n  static templateUrl = 'module.html';\r\n  static scrollable = true;\r\n\r\n  groups: any[];\r\n  modes: any[];\r\n\r\n  panelDefaults = {\r\n    query: '',\r\n    limit: 10,\r\n    tags: [],\r\n    recent: false,\r\n    search: false,\r\n    starred: true,\r\n    headings: true,\r\n    folderId: null,\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private backendSrv, private dashboardSrv) {\r\n    super($scope, $injector);\r\n    _.defaults(this.panel, this.panelDefaults);\r\n\r\n    if (this.panel.tag) {\r\n      this.panel.tags = [this.panel.tag];\r\n      delete this.panel.tag;\r\n    }\r\n\r\n    this.events.on('refresh', this.onRefresh.bind(this));\r\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n\r\n    this.groups = [\r\n      { list: [], show: false, header: 'Starred dashboards' },\r\n      { list: [], show: false, header: 'Recently viewed dashboards' },\r\n      { list: [], show: false, header: 'Search' },\r\n    ];\r\n\r\n    // update capability\r\n    if (this.panel.mode) {\r\n      if (this.panel.mode === 'starred') {\r\n        this.panel.starred = true;\r\n        this.panel.headings = false;\r\n      }\r\n      if (this.panel.mode === 'recently viewed') {\r\n        this.panel.recent = true;\r\n        this.panel.starred = false;\r\n        this.panel.headings = false;\r\n      }\r\n      if (this.panel.mode === 'search') {\r\n        this.panel.search = true;\r\n        this.panel.starred = false;\r\n        this.panel.headings = false;\r\n      }\r\n      delete this.panel.mode;\r\n    }\r\n  }\r\n\r\n  onInitEditMode() {\r\n    this.editorTabIndex = 1;\r\n    this.modes = ['starred', 'search', 'recently viewed'];\r\n    this.addEditorTab('Options', 'public/app/plugins/panel/dashlist/editor.html');\r\n  }\r\n\r\n  onRefresh() {\r\n    const promises = [];\r\n\r\n    promises.push(this.getRecentDashboards());\r\n    promises.push(this.getStarred());\r\n    promises.push(this.getSearch());\r\n\r\n    return Promise.all(promises).then(this.renderingCompleted.bind(this));\r\n  }\r\n\r\n  getSearch() {\r\n    this.groups[2].show = this.panel.search;\r\n    if (!this.panel.search) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    const params = {\r\n      limit: this.panel.limit,\r\n      query: this.panel.query,\r\n      tag: this.panel.tags,\r\n      folderIds: this.panel.folderId,\r\n      type: 'dash-db',\r\n    };\r\n\r\n    return this.backendSrv.search(params).then(result => {\r\n      this.groups[2].list = result;\r\n    });\r\n  }\r\n\r\n  getStarred() {\r\n    this.groups[0].show = this.panel.starred;\r\n    if (!this.panel.starred) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    const params = { limit: this.panel.limit, starred: 'true' };\r\n    return this.backendSrv.search(params).then(result => {\r\n      this.groups[0].list = result;\r\n    });\r\n  }\r\n\r\n  starDashboard(dash, evt) {\r\n    this.dashboardSrv.starDashboard(dash.id, dash.isStarred).then(newState => {\r\n      dash.isStarred = newState;\r\n    });\r\n\r\n    if (evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n  }\r\n\r\n  getRecentDashboards() {\r\n    this.groups[1].show = this.panel.recent;\r\n    if (!this.panel.recent) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    const dashIds = _.take(impressionSrv.getDashboardOpened(), this.panel.limit);\r\n    return this.backendSrv.search({ dashboardIds: dashIds, limit: this.panel.limit }).then(result => {\r\n      this.groups[1].list = dashIds\r\n        .map(orderId => {\r\n          return _.find(result, dashboard => {\r\n            return dashboard.id === orderId;\r\n          });\r\n        })\r\n        .filter(el => {\r\n          return el !== undefined;\r\n        });\r\n    });\r\n  }\r\n\r\n  onFolderChange(folder: any) {\r\n    this.panel.folderId = folder.id;\r\n    this.refresh();\r\n  }\r\n}\r\n\r\nexport { DashListCtrl, DashListCtrl as PanelCtrl };\r\n","import _ from 'lodash';\r\nimport { PanelCtrl } from '../../../features/panel/panel_ctrl';\r\n\r\nclass PluginListCtrl extends PanelCtrl {\r\n  static templateUrl = 'module.html';\r\n  static scrollable = true;\r\n\r\n  pluginList: any[];\r\n  viewModel: any;\r\n\r\n  // Set and populate defaults\r\n  panelDefaults = {};\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private backendSrv) {\r\n    super($scope, $injector);\r\n\r\n    _.defaults(this.panel, this.panelDefaults);\r\n\r\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n    this.pluginList = [];\r\n    this.viewModel = [\r\n      { header: 'Installed Apps', list: [], type: 'app' },\r\n      { header: 'Installed Panels', list: [], type: 'panel' },\r\n      { header: 'Installed Datasources', list: [], type: 'datasource' },\r\n    ];\r\n\r\n    this.update();\r\n  }\r\n\r\n  onInitEditMode() {\r\n    this.editorTabIndex = 1;\r\n    this.addEditorTab('Options', 'public/app/plugins/panel/pluginlist/editor.html');\r\n  }\r\n\r\n  gotoPlugin(plugin, evt) {\r\n    if (evt) {\r\n      evt.stopPropagation();\r\n    }\r\n    this.$location.url(`plugins/${plugin.id}/edit`);\r\n  }\r\n\r\n  updateAvailable(plugin, $event) {\r\n    $event.stopPropagation();\r\n    $event.preventDefault();\r\n\r\n    const modalScope = this.$scope.$new(true);\r\n    modalScope.plugin = plugin;\r\n\r\n    this.publishAppEvent('show-modal', {\r\n      src: 'public/app/features/plugins/partials/update_instructions.html',\r\n      scope: modalScope,\r\n    });\r\n  }\r\n\r\n  update() {\r\n    this.backendSrv.get('api/plugins', { embedded: 0, core: 0 }).then(plugins => {\r\n      this.pluginList = plugins;\r\n      this.viewModel[0].list = _.filter(plugins, { type: 'app' });\r\n      this.viewModel[1].list = _.filter(plugins, { type: 'panel' });\r\n      this.viewModel[2].list = _.filter(plugins, { type: 'datasource' });\r\n\r\n      for (const plugin of this.pluginList) {\r\n        if (plugin.hasUpdate) {\r\n          plugin.state = 'has-update';\r\n        } else if (!plugin.enabled) {\r\n          plugin.state = 'not-enabled';\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { PluginListCtrl, PluginListCtrl as PanelCtrl };\r\n","import _ from 'lodash';\r\nimport moment from 'moment';\r\nimport alertDef from '../../../features/alerting/state/alertDef';\r\nimport { PanelCtrl } from 'app/plugins/sdk';\r\n\r\nimport * as dateMath from 'app/core/utils/datemath';\r\n\r\nclass AlertListPanel extends PanelCtrl {\r\n  static templateUrl = 'module.html';\r\n  static scrollable = true;\r\n\r\n  showOptions = [{ text: 'Current state', value: 'current' }, { text: 'Recent state changes', value: 'changes' }];\r\n\r\n  sortOrderOptions = [\r\n    { text: 'Alphabetical (asc)', value: 1 },\r\n    { text: 'Alphabetical (desc)', value: 2 },\r\n    { text: 'Importance', value: 3 },\r\n  ];\r\n\r\n  stateFilter: any = {};\r\n  currentAlerts: any = [];\r\n  alertHistory: any = [];\r\n  noAlertsMessage: string;\r\n\r\n  // Set and populate defaults\r\n  panelDefaults = {\r\n    show: 'current',\r\n    limit: 10,\r\n    stateFilter: [],\r\n    onlyAlertsOnDashboard: false,\r\n    sortOrder: 1,\r\n    dashboardFilter: '',\r\n    nameFilter: '',\r\n    folderId: null,\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private backendSrv) {\r\n    super($scope, $injector);\r\n    _.defaults(this.panel, this.panelDefaults);\r\n\r\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n    this.events.on('refresh', this.onRefresh.bind(this));\r\n\r\n    for (const key in this.panel.stateFilter) {\r\n      this.stateFilter[this.panel.stateFilter[key]] = true;\r\n    }\r\n  }\r\n\r\n  sortResult(alerts) {\r\n    if (this.panel.sortOrder === 3) {\r\n      return _.sortBy(alerts, a => {\r\n        return alertDef.alertStateSortScore[a.state];\r\n      });\r\n    }\r\n\r\n    const result = _.sortBy(alerts, a => {\r\n      return a.name.toLowerCase();\r\n    });\r\n    if (this.panel.sortOrder === 2) {\r\n      result.reverse();\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  updateStateFilter() {\r\n    const result = [];\r\n\r\n    for (const key in this.stateFilter) {\r\n      if (this.stateFilter[key]) {\r\n        result.push(key);\r\n      }\r\n    }\r\n\r\n    this.panel.stateFilter = result;\r\n    this.onRefresh();\r\n  }\r\n\r\n  onRefresh() {\r\n    let getAlertsPromise;\r\n\r\n    if (this.panel.show === 'current') {\r\n      getAlertsPromise = this.getCurrentAlertState();\r\n    }\r\n\r\n    if (this.panel.show === 'changes') {\r\n      getAlertsPromise = this.getStateChanges();\r\n    }\r\n\r\n    getAlertsPromise.then(() => {\r\n      this.renderingCompleted();\r\n    });\r\n  }\r\n\r\n  onFolderChange(folder: any) {\r\n    this.panel.folderId = folder.id;\r\n    this.refresh();\r\n  }\r\n\r\n  getStateChanges() {\r\n    const params: any = {\r\n      limit: this.panel.limit,\r\n      type: 'alert',\r\n      newState: this.panel.stateFilter,\r\n    };\r\n\r\n    if (this.panel.onlyAlertsOnDashboard) {\r\n      params.dashboardId = this.dashboard.id;\r\n    }\r\n\r\n    params.from = dateMath.parse(this.dashboard.time.from).unix() * 1000;\r\n    params.to = dateMath.parse(this.dashboard.time.to).unix() * 1000;\r\n\r\n    return this.backendSrv.get(`/api/annotations`, params).then(res => {\r\n      this.alertHistory = _.map(res, al => {\r\n        al.time = this.dashboard.formatDate(al.time, 'MMM D, YYYY HH:mm:ss');\r\n        al.stateModel = alertDef.getStateDisplayModel(al.newState);\r\n        al.info = alertDef.getAlertAnnotationInfo(al);\r\n        return al;\r\n      });\r\n\r\n      this.noAlertsMessage = this.alertHistory.length === 0 ? 'No alerts in current time range' : '';\r\n\r\n      return this.alertHistory;\r\n    });\r\n  }\r\n\r\n  getCurrentAlertState() {\r\n    const params: any = {\r\n      state: this.panel.stateFilter,\r\n    };\r\n\r\n    if (this.panel.nameFilter) {\r\n      params.query = this.panel.nameFilter;\r\n    }\r\n\r\n    if (this.panel.folderId >= 0) {\r\n      params.folderId = this.panel.folderId;\r\n    }\r\n\r\n    if (this.panel.dashboardFilter) {\r\n      params.dashboardQuery = this.panel.dashboardFilter;\r\n    }\r\n\r\n    if (this.panel.onlyAlertsOnDashboard) {\r\n      params.dashboardId = this.dashboard.id;\r\n    }\r\n\r\n    if (this.panel.dashboardTags) {\r\n      params.dashboardTag = this.panel.dashboardTags;\r\n    }\r\n\r\n    return this.backendSrv.get(`/api/alerts`, params).then(res => {\r\n      this.currentAlerts = this.sortResult(\r\n        _.map(res, al => {\r\n          al.stateModel = alertDef.getStateDisplayModel(al.state);\r\n          al.newStateDateAgo = moment(al.newStateDate)\r\n            .locale('en')\r\n            .fromNow(true);\r\n          return al;\r\n        })\r\n      );\r\n      if (this.currentAlerts.length > this.panel.limit) {\r\n        this.currentAlerts = this.currentAlerts.slice(0, this.panel.limit);\r\n      }\r\n      this.noAlertsMessage = this.currentAlerts.length === 0 ? 'No alerts' : '';\r\n\r\n      return this.currentAlerts;\r\n    });\r\n  }\r\n\r\n  onInitEditMode() {\r\n    this.addEditorTab('Options', 'public/app/plugins/panel/alertlist/editor.html');\r\n  }\r\n}\r\n\r\nexport { AlertListPanel, AlertListPanel as PanelCtrl };\r\n","import * as d3 from 'd3';\r\nimport * as d3ScaleChromatic from 'd3-scale-chromatic';\r\n\r\nexport function getColorScale(colorScheme: any, lightTheme: boolean, maxValue: number, minValue = 0): (d: any) => any {\r\n  const colorInterpolator = d3ScaleChromatic[colorScheme.value];\r\n  const colorScaleInverted = colorScheme.invert === 'always' || colorScheme.invert === (lightTheme ? 'light' : 'dark');\r\n\r\n  const start = colorScaleInverted ? maxValue : minValue;\r\n  const end = colorScaleInverted ? minValue : maxValue;\r\n\r\n  return d3.scaleSequential(colorInterpolator).domain([start, end]);\r\n}\r\n\r\nexport function getOpacityScale(options, maxValue, minValue = 0) {\r\n  let legendOpacityScale;\r\n  if (options.colorScale === 'linear') {\r\n    legendOpacityScale = d3\r\n      .scaleLinear()\r\n      .domain([minValue, maxValue])\r\n      .range([0, 1]);\r\n  } else if (options.colorScale === 'sqrt') {\r\n    legendOpacityScale = d3\r\n      .scalePow()\r\n      .exponent(options.exponent)\r\n      .domain([minValue, maxValue])\r\n      .range([0, 1]);\r\n  }\r\n  return legendOpacityScale;\r\n}\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport * as d3 from 'd3';\r\nimport { contextSrv } from 'app/core/core';\r\nimport { tickStep } from 'app/core/utils/ticks';\r\nimport { getColorScale, getOpacityScale } from './color_scale';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nconst LEGEND_HEIGHT_PX = 6;\r\nconst LEGEND_WIDTH_PX = 100;\r\nconst LEGEND_TICK_SIZE = 0;\r\nconst LEGEND_VALUE_MARGIN = 0;\r\n\r\n/**\r\n * Color legend for heatmap editor.\r\n */\r\ncoreModule.directive('colorLegend', () => {\r\n  return {\r\n    restrict: 'E',\r\n    template: '<div class=\"heatmap-color-legend\"><svg width=\"16.5rem\" height=\"24px\"></svg></div>',\r\n    link: (scope, elem, attrs) => {\r\n      const ctrl = scope.ctrl;\r\n      const panel = scope.ctrl.panel;\r\n\r\n      render();\r\n\r\n      ctrl.events.on('render', () => {\r\n        render();\r\n      });\r\n\r\n      function render() {\r\n        const legendElem = $(elem).find('svg');\r\n        const legendWidth = Math.floor(legendElem.outerWidth());\r\n\r\n        if (panel.color.mode === 'spectrum') {\r\n          const colorScheme = _.find(ctrl.colorSchemes, {\r\n            value: panel.color.colorScheme,\r\n          });\r\n          const colorScale = getColorScale(colorScheme, contextSrv.user.lightTheme, legendWidth);\r\n          drawSimpleColorLegend(elem, colorScale);\r\n        } else if (panel.color.mode === 'opacity') {\r\n          const colorOptions = panel.color;\r\n          drawSimpleOpacityLegend(elem, colorOptions);\r\n        }\r\n      }\r\n    },\r\n  };\r\n});\r\n\r\n/**\r\n * Heatmap legend with scale values.\r\n */\r\ncoreModule.directive('heatmapLegend', () => {\r\n  return {\r\n    restrict: 'E',\r\n    template: `<div class=\"heatmap-color-legend\"><svg width=\"${LEGEND_WIDTH_PX}px\" height=\"${LEGEND_HEIGHT_PX}px\"></svg></div>`,\r\n    link: (scope, elem, attrs) => {\r\n      const ctrl = scope.ctrl;\r\n      const panel = scope.ctrl.panel;\r\n\r\n      render();\r\n      ctrl.events.on('render', () => {\r\n        render();\r\n      });\r\n\r\n      function render() {\r\n        clearLegend(elem);\r\n        if (!_.isEmpty(ctrl.data) && !_.isEmpty(ctrl.data.cards)) {\r\n          const rangeFrom = 0;\r\n          const rangeTo = ctrl.data.cardStats.max;\r\n          const maxValue = panel.color.max || rangeTo;\r\n          const minValue = panel.color.min || 0;\r\n\r\n          if (panel.color.mode === 'spectrum') {\r\n            const colorScheme = _.find(ctrl.colorSchemes, {\r\n              value: panel.color.colorScheme,\r\n            });\r\n            drawColorLegend(elem, colorScheme, rangeFrom, rangeTo, maxValue, minValue);\r\n          } else if (panel.color.mode === 'opacity') {\r\n            const colorOptions = panel.color;\r\n            drawOpacityLegend(elem, colorOptions, rangeFrom, rangeTo, maxValue, minValue);\r\n          }\r\n        }\r\n      }\r\n    },\r\n  };\r\n});\r\n\r\nfunction drawColorLegend(elem, colorScheme, rangeFrom, rangeTo, maxValue, minValue) {\r\n  const legendElem = $(elem).find('svg');\r\n  const legend = d3.select(legendElem.get(0));\r\n  clearLegend(elem);\r\n\r\n  const legendWidth = Math.floor(legendElem.outerWidth()) - 30;\r\n  const legendHeight = legendElem.attr('height');\r\n\r\n  let rangeStep = 1;\r\n  if (rangeTo - rangeFrom > legendWidth) {\r\n    rangeStep = Math.floor((rangeTo - rangeFrom) / legendWidth);\r\n  }\r\n  const widthFactor = legendWidth / (rangeTo - rangeFrom);\r\n  const valuesRange = d3.range(rangeFrom, rangeTo, rangeStep);\r\n\r\n  const colorScale = getColorScale(colorScheme, contextSrv.user.lightTheme, maxValue, minValue);\r\n  legend\r\n    .selectAll('.heatmap-color-legend-rect')\r\n    .data(valuesRange)\r\n    .enter()\r\n    .append('rect')\r\n    .attr('x', d => d * widthFactor)\r\n    .attr('y', 0)\r\n    .attr('width', rangeStep * widthFactor + 1) // Overlap rectangles to prevent gaps\r\n    .attr('height', legendHeight)\r\n    .attr('stroke-width', 0)\r\n    .attr('fill', d => colorScale(d));\r\n\r\n  drawLegendValues(elem, colorScale, rangeFrom, rangeTo, maxValue, minValue, legendWidth);\r\n}\r\n\r\nfunction drawOpacityLegend(elem, options, rangeFrom, rangeTo, maxValue, minValue) {\r\n  const legendElem = $(elem).find('svg');\r\n  const legend = d3.select(legendElem.get(0));\r\n  clearLegend(elem);\r\n\r\n  const legendWidth = Math.floor(legendElem.outerWidth()) - 30;\r\n  const legendHeight = legendElem.attr('height');\r\n\r\n  let rangeStep = 1;\r\n  if (rangeTo - rangeFrom > legendWidth) {\r\n    rangeStep = Math.floor((rangeTo - rangeFrom) / legendWidth);\r\n  }\r\n  const widthFactor = legendWidth / (rangeTo - rangeFrom);\r\n  const valuesRange = d3.range(rangeFrom, rangeTo, rangeStep);\r\n\r\n  const opacityScale = getOpacityScale(options, maxValue, minValue);\r\n  legend\r\n    .selectAll('.heatmap-opacity-legend-rect')\r\n    .data(valuesRange)\r\n    .enter()\r\n    .append('rect')\r\n    .attr('x', d => d * widthFactor)\r\n    .attr('y', 0)\r\n    .attr('width', rangeStep * widthFactor)\r\n    .attr('height', legendHeight)\r\n    .attr('stroke-width', 0)\r\n    .attr('fill', options.cardColor)\r\n    .style('opacity', d => opacityScale(d));\r\n\r\n  drawLegendValues(elem, opacityScale, rangeFrom, rangeTo, maxValue, minValue, legendWidth);\r\n}\r\n\r\nfunction drawLegendValues(elem, colorScale, rangeFrom, rangeTo, maxValue, minValue, legendWidth) {\r\n  const legendElem = $(elem).find('svg');\r\n  const legend = d3.select(legendElem.get(0));\r\n\r\n  if (legendWidth <= 0 || legendElem.get(0).childNodes.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const legendValueScale = d3\r\n    .scaleLinear()\r\n    .domain([0, rangeTo])\r\n    .range([0, legendWidth]);\r\n\r\n  const ticks = buildLegendTicks(0, rangeTo, maxValue, minValue);\r\n  const xAxis = d3\r\n    .axisBottom(legendValueScale)\r\n    .tickValues(ticks)\r\n    .tickSize(LEGEND_TICK_SIZE);\r\n\r\n  const colorRect = legendElem.find(':first-child');\r\n  const posY = getSvgElemHeight(legendElem) + LEGEND_VALUE_MARGIN;\r\n  const posX = getSvgElemX(colorRect);\r\n\r\n  d3\r\n    .select(legendElem.get(0))\r\n    .append('g')\r\n    .attr('class', 'axis')\r\n    .attr('transform', 'translate(' + posX + ',' + posY + ')')\r\n    .call(xAxis);\r\n\r\n  legend\r\n    .select('.axis')\r\n    .select('.domain')\r\n    .remove();\r\n}\r\n\r\nfunction drawSimpleColorLegend(elem, colorScale) {\r\n  const legendElem = $(elem).find('svg');\r\n  clearLegend(elem);\r\n\r\n  const legendWidth = Math.floor(legendElem.outerWidth());\r\n  const legendHeight = legendElem.attr('height');\r\n\r\n  if (legendWidth) {\r\n    const valuesNumber = Math.floor(legendWidth / 2);\r\n    const rangeStep = Math.floor(legendWidth / valuesNumber);\r\n    const valuesRange = d3.range(0, legendWidth, rangeStep);\r\n\r\n    const legend = d3.select(legendElem.get(0));\r\n    const legendRects = legend.selectAll('.heatmap-color-legend-rect').data(valuesRange);\r\n\r\n    legendRects\r\n      .enter()\r\n      .append('rect')\r\n      .attr('x', d => d)\r\n      .attr('y', 0)\r\n      .attr('width', rangeStep + 1) // Overlap rectangles to prevent gaps\r\n      .attr('height', legendHeight)\r\n      .attr('stroke-width', 0)\r\n      .attr('fill', d => colorScale(d));\r\n  }\r\n}\r\n\r\nfunction drawSimpleOpacityLegend(elem, options) {\r\n  const legendElem = $(elem).find('svg');\r\n  clearLegend(elem);\r\n\r\n  const legend = d3.select(legendElem.get(0));\r\n  const legendWidth = Math.floor(legendElem.outerWidth());\r\n  const legendHeight = legendElem.attr('height');\r\n\r\n  if (legendWidth) {\r\n    let legendOpacityScale;\r\n    if (options.colorScale === 'linear') {\r\n      legendOpacityScale = d3\r\n        .scaleLinear()\r\n        .domain([0, legendWidth])\r\n        .range([0, 1]);\r\n    } else if (options.colorScale === 'sqrt') {\r\n      legendOpacityScale = d3\r\n        .scalePow()\r\n        .exponent(options.exponent)\r\n        .domain([0, legendWidth])\r\n        .range([0, 1]);\r\n    }\r\n\r\n    const rangeStep = 10;\r\n    const valuesRange = d3.range(0, legendWidth, rangeStep);\r\n    const legendRects = legend.selectAll('.heatmap-opacity-legend-rect').data(valuesRange);\r\n\r\n    legendRects\r\n      .enter()\r\n      .append('rect')\r\n      .attr('x', d => d)\r\n      .attr('y', 0)\r\n      .attr('width', rangeStep)\r\n      .attr('height', legendHeight)\r\n      .attr('stroke-width', 0)\r\n      .attr('fill', options.cardColor)\r\n      .style('opacity', d => legendOpacityScale(d));\r\n  }\r\n}\r\n\r\nfunction clearLegend(elem) {\r\n  const legendElem = $(elem).find('svg');\r\n  legendElem.empty();\r\n}\r\n\r\nfunction getSvgElemX(elem) {\r\n  const svgElem = elem.get(0);\r\n  if (svgElem && svgElem.x && svgElem.x.baseVal) {\r\n    return svgElem.x.baseVal.value;\r\n  } else {\r\n    return 0;\r\n  }\r\n}\r\n\r\nfunction getSvgElemHeight(elem) {\r\n  const svgElem = elem.get(0);\r\n  if (svgElem && svgElem.height && svgElem.height.baseVal) {\r\n    return svgElem.height.baseVal.value;\r\n  } else {\r\n    return 0;\r\n  }\r\n}\r\n\r\nfunction buildLegendTicks(rangeFrom, rangeTo, maxValue, minValue) {\r\n  const range = rangeTo - rangeFrom;\r\n  const tickStepSize = tickStep(rangeFrom, rangeTo, 3);\r\n  const ticksNum = Math.round(range / tickStepSize);\r\n  let ticks = [];\r\n\r\n  for (let i = 0; i < ticksNum; i++) {\r\n    const current = tickStepSize * i;\r\n    // Add user-defined min and max if it had been set\r\n    if (isValueCloseTo(minValue, current, tickStepSize)) {\r\n      ticks.push(minValue);\r\n      continue;\r\n    } else if (minValue < current) {\r\n      ticks.push(minValue);\r\n    }\r\n    if (isValueCloseTo(maxValue, current, tickStepSize)) {\r\n      ticks.push(maxValue);\r\n      continue;\r\n    } else if (maxValue < current) {\r\n      ticks.push(maxValue);\r\n    }\r\n    ticks.push(tickStepSize * i);\r\n  }\r\n  if (!isValueCloseTo(maxValue, rangeTo, tickStepSize)) {\r\n    ticks.push(maxValue);\r\n  }\r\n  ticks.push(rangeTo);\r\n  ticks = _.sortBy(_.uniq(ticks));\r\n  return ticks;\r\n}\r\n\r\nfunction isValueCloseTo(val, valueTo, step) {\r\n  const diff = Math.abs(val - valueTo);\r\n  return diff < step * 0.3;\r\n}\r\n","import _ from 'lodash';\r\n\r\nconst VALUE_INDEX = 0;\r\nconst TIME_INDEX = 1;\r\n\r\ninterface XBucket {\r\n  x: number;\r\n  buckets: any;\r\n}\r\n\r\ninterface YBucket {\r\n  y: number;\r\n  values: number[];\r\n}\r\n\r\n/**\r\n * Convert histogram represented by the list of series to heatmap object.\r\n * @param seriesList List of time series\r\n */\r\nfunction histogramToHeatmap(seriesList) {\r\n  const heatmap = {};\r\n\r\n  for (let i = 0; i < seriesList.length; i++) {\r\n    const series = seriesList[i];\r\n    const bound = i;\r\n    if (isNaN(bound)) {\r\n      return heatmap;\r\n    }\r\n\r\n    for (const point of series.datapoints) {\r\n      const count = point[VALUE_INDEX];\r\n      const time = point[TIME_INDEX];\r\n\r\n      if (!_.isNumber(count)) {\r\n        continue;\r\n      }\r\n\r\n      let bucket = heatmap[time];\r\n      if (!bucket) {\r\n        bucket = heatmap[time] = { x: time, buckets: {} };\r\n      }\r\n\r\n      bucket.buckets[bound] = {\r\n        y: bound,\r\n        count: count,\r\n        bounds: {\r\n          top: null,\r\n          bottom: bound,\r\n        },\r\n        values: [],\r\n        points: [],\r\n      };\r\n    }\r\n  }\r\n\r\n  return heatmap;\r\n}\r\n\r\n/**\r\n * Sort series representing histogram by label value.\r\n */\r\nfunction sortSeriesByLabel(s1, s2) {\r\n  let label1, label2;\r\n\r\n  try {\r\n    // fail if not integer. might happen with bad queries\r\n    label1 = parseHistogramLabel(s1.label);\r\n    label2 = parseHistogramLabel(s2.label);\r\n  } catch (err) {\r\n    console.log(err.message || err);\r\n    return 0;\r\n  }\r\n\r\n  if (label1 > label2) {\r\n    return 1;\r\n  }\r\n\r\n  if (label1 < label2) {\r\n    return -1;\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\nfunction parseHistogramLabel(label: string): number {\r\n  if (label === '+Inf' || label === 'inf') {\r\n    return +Infinity;\r\n  }\r\n  const value = Number(label);\r\n  if (isNaN(value)) {\r\n    throw new Error(`Error parsing histogram label: ${label} is not a number`);\r\n  }\r\n  return value;\r\n}\r\n\r\n/**\r\n * Convert buckets into linear array of \"cards\" - objects, represented heatmap elements.\r\n * @param  {Object} buckets\r\n * @return {Array}          Array of \"card\" objects\r\n */\r\nfunction convertToCards(buckets) {\r\n  let min = 0,\r\n    max = 0;\r\n  const cards = [];\r\n  _.forEach(buckets, xBucket => {\r\n    _.forEach(xBucket.buckets, yBucket => {\r\n      const card = {\r\n        x: xBucket.x,\r\n        y: yBucket.y,\r\n        yBounds: yBucket.bounds,\r\n        values: yBucket.values,\r\n        count: yBucket.count,\r\n      };\r\n      cards.push(card);\r\n\r\n      if (cards.length === 1) {\r\n        min = yBucket.count;\r\n        max = yBucket.count;\r\n      }\r\n\r\n      min = yBucket.count < min ? yBucket.count : min;\r\n      max = yBucket.count > max ? yBucket.count : max;\r\n    });\r\n  });\r\n\r\n  const cardStats = { min, max };\r\n  return { cards, cardStats };\r\n}\r\n\r\n/**\r\n * Special method for log scales. When series converted into buckets with log scale,\r\n * for simplification, 0 values are converted into 0, not into -Infinity. On the other hand, we mean\r\n * that all values less than series minimum, is 0 values, and we create special \"minimum\" bucket for\r\n * that values (actually, there're no values less than minimum, so this bucket is empty).\r\n *  8-16|    | ** |    |  * |  **|\r\n *   4-8|  * |*  *|*   |** *| *  |\r\n *   2-4| * *|    | ***|    |*   |\r\n *   1-2|*   |    |    |    |    | This bucket contains minimum series value\r\n * 0.5-1|____|____|____|____|____| This bucket should be displayed as 0 on graph\r\n *     0|____|____|____|____|____| This bucket is for 0 values (should actually be -Infinity)\r\n * So we should merge two bottom buckets into one (0-value bucket).\r\n *\r\n * @param  {Object} buckets  Heatmap buckets\r\n * @param  {Number} minValue Minimum series value\r\n * @return {Object}          Transformed buckets\r\n */\r\nfunction mergeZeroBuckets(buckets, minValue) {\r\n  _.forEach(buckets, xBucket => {\r\n    const yBuckets = xBucket.buckets;\r\n\r\n    const emptyBucket = {\r\n      bounds: { bottom: 0, top: 0 },\r\n      values: [],\r\n      points: [],\r\n      count: 0,\r\n    };\r\n\r\n    const nullBucket = yBuckets[0] || emptyBucket;\r\n    const minBucket = yBuckets[minValue] || emptyBucket;\r\n\r\n    const newBucket = {\r\n      y: 0,\r\n      bounds: { bottom: minValue, top: minBucket.bounds.top || minValue },\r\n      values: [],\r\n      points: [],\r\n      count: 0,\r\n    };\r\n\r\n    newBucket.points = nullBucket.points.concat(minBucket.points);\r\n    newBucket.values = nullBucket.values.concat(minBucket.values);\r\n    newBucket.count = newBucket.values.length;\r\n\r\n    if (newBucket.count === 0) {\r\n      return;\r\n    }\r\n\r\n    delete yBuckets[minValue];\r\n    yBuckets[0] = newBucket;\r\n  });\r\n\r\n  return buckets;\r\n}\r\n\r\n/**\r\n * Convert set of time series into heatmap buckets\r\n * @return {Object}    Heatmap object:\r\n * {\r\n *   xBucketBound_1: {\r\n *     x: xBucketBound_1,\r\n *     buckets: {\r\n *       yBucketBound_1: {\r\n *         y: yBucketBound_1,\r\n *         bounds: {bottom, top}\r\n *         values: [val_1, val_2, ..., val_K],\r\n *         points: [[val_Y, val_X, series_name], ..., [...]],\r\n *         seriesStat: {seriesName_1: val_1, seriesName_2: val_2}\r\n *       },\r\n *       ...\r\n *       yBucketBound_M: {}\r\n *     },\r\n *     values: [val_1, val_2, ..., val_K],\r\n *     points: [\r\n *       [val_Y, val_X, series_name], (point_1)\r\n *       ...\r\n *       [...] (point_K)\r\n *     ]\r\n *   },\r\n *   xBucketBound_2: {},\r\n *   ...\r\n *   xBucketBound_N: {}\r\n * }\r\n */\r\nfunction convertToHeatMap(seriesList, yBucketSize, xBucketSize, logBase = 1) {\r\n  const heatmap = {};\r\n\r\n  for (const series of seriesList) {\r\n    const datapoints = series.datapoints;\r\n    const seriesName = series.label;\r\n\r\n    // Slice series into X axis buckets\r\n    // |    | ** |    |  * |  **|\r\n    // |  * |*  *|*   |** *| *  |\r\n    // |** *|    | ***|    |*   |\r\n    // |____|____|____|____|____|_\r\n    //\r\n    _.forEach(datapoints, point => {\r\n      const bucketBound = getBucketBound(point[TIME_INDEX], xBucketSize);\r\n      pushToXBuckets(heatmap, point, bucketBound, seriesName);\r\n    });\r\n  }\r\n\r\n  // Slice X axis buckets into Y (value) buckets\r\n  // |  **|     |2|,\r\n  // | *  | --\\ |1|,\r\n  // |*   | --/ |1|,\r\n  // |____|     |0|\r\n  //\r\n  _.forEach(heatmap, xBucket => {\r\n    if (logBase !== 1) {\r\n      xBucket.buckets = convertToLogScaleValueBuckets(xBucket, yBucketSize, logBase);\r\n    } else {\r\n      xBucket.buckets = convertToValueBuckets(xBucket, yBucketSize);\r\n    }\r\n  });\r\n\r\n  return heatmap;\r\n}\r\n\r\nfunction pushToXBuckets(buckets, point, bucketNum, seriesName) {\r\n  const value = point[VALUE_INDEX];\r\n  if (value === null || value === undefined || isNaN(value)) {\r\n    return;\r\n  }\r\n\r\n  // Add series name to point for future identification\r\n  const pointExt = _.concat(point, seriesName);\r\n\r\n  if (buckets[bucketNum] && buckets[bucketNum].values) {\r\n    buckets[bucketNum].values.push(value);\r\n    buckets[bucketNum].points.push(pointExt);\r\n  } else {\r\n    buckets[bucketNum] = {\r\n      x: bucketNum,\r\n      values: [value],\r\n      points: [pointExt],\r\n    };\r\n  }\r\n}\r\n\r\nfunction pushToYBuckets(buckets, bucketNum, value, point, bounds) {\r\n  let count = 1;\r\n  // Use the 3rd argument as scale/count\r\n  if (point.length > 3) {\r\n    count = parseInt(point[2], 10);\r\n  }\r\n  if (buckets[bucketNum]) {\r\n    buckets[bucketNum].values.push(value);\r\n    buckets[bucketNum].points.push(point);\r\n    buckets[bucketNum].count += count;\r\n  } else {\r\n    buckets[bucketNum] = {\r\n      y: bucketNum,\r\n      bounds: bounds,\r\n      values: [value],\r\n      points: [point],\r\n      count: count,\r\n    };\r\n  }\r\n}\r\n\r\nfunction getValueBucketBound(value, yBucketSize, logBase) {\r\n  if (logBase === 1) {\r\n    return getBucketBound(value, yBucketSize);\r\n  } else {\r\n    return getLogScaleBucketBound(value, yBucketSize, logBase);\r\n  }\r\n}\r\n\r\n/**\r\n * Find bucket for given value (for linear scale)\r\n */\r\nfunction getBucketBounds(value, bucketSize) {\r\n  let bottom, top;\r\n  bottom = Math.floor(value / bucketSize) * bucketSize;\r\n  top = (Math.floor(value / bucketSize) + 1) * bucketSize;\r\n\r\n  return { bottom, top };\r\n}\r\n\r\nfunction getBucketBound(value, bucketSize) {\r\n  const bounds = getBucketBounds(value, bucketSize);\r\n  return bounds.bottom;\r\n}\r\n\r\nfunction convertToValueBuckets(xBucket, bucketSize) {\r\n  const values = xBucket.values;\r\n  const points = xBucket.points;\r\n  const buckets = {};\r\n\r\n  _.forEach(values, (val, index) => {\r\n    const bounds = getBucketBounds(val, bucketSize);\r\n    const bucketNum = bounds.bottom;\r\n    pushToYBuckets(buckets, bucketNum, val, points[index], bounds);\r\n  });\r\n\r\n  return buckets;\r\n}\r\n\r\n/**\r\n * Find bucket for given value (for log scales)\r\n */\r\nfunction getLogScaleBucketBounds(value, yBucketSplitFactor, logBase) {\r\n  let top, bottom;\r\n  if (value === 0) {\r\n    return { bottom: 0, top: 0 };\r\n  }\r\n\r\n  const valueLog = logp(value, logBase);\r\n  let pow, powTop;\r\n  if (yBucketSplitFactor === 1 || !yBucketSplitFactor) {\r\n    pow = Math.floor(valueLog);\r\n    powTop = pow + 1;\r\n  } else {\r\n    const additionalBucketSize = 1 / yBucketSplitFactor;\r\n    let additionalLog = valueLog - Math.floor(valueLog);\r\n    additionalLog = Math.floor(additionalLog / additionalBucketSize) * additionalBucketSize;\r\n    pow = Math.floor(valueLog) + additionalLog;\r\n    powTop = pow + additionalBucketSize;\r\n  }\r\n  bottom = Math.pow(logBase, pow);\r\n  top = Math.pow(logBase, powTop);\r\n\r\n  return { bottom, top };\r\n}\r\n\r\nfunction getLogScaleBucketBound(value, yBucketSplitFactor, logBase) {\r\n  const bounds = getLogScaleBucketBounds(value, yBucketSplitFactor, logBase);\r\n  return bounds.bottom;\r\n}\r\n\r\nfunction convertToLogScaleValueBuckets(xBucket, yBucketSplitFactor, logBase) {\r\n  const values = xBucket.values;\r\n  const points = xBucket.points;\r\n\r\n  const buckets = {};\r\n  _.forEach(values, (val, index) => {\r\n    const bounds = getLogScaleBucketBounds(val, yBucketSplitFactor, logBase);\r\n    const bucketNum = bounds.bottom;\r\n    pushToYBuckets(buckets, bucketNum, val, points[index], bounds);\r\n  });\r\n\r\n  return buckets;\r\n}\r\n\r\n/**\r\n * Logarithm for custom base\r\n * @param value\r\n * @param base logarithm base\r\n */\r\nfunction logp(value, base) {\r\n  return Math.log(value) / Math.log(base);\r\n}\r\n\r\n/**\r\n * Calculate size of Y bucket from given buckets bounds.\r\n * @param bounds Array of Y buckets bounds\r\n * @param logBase Logarithm base\r\n */\r\nfunction calculateBucketSize(bounds: number[], logBase = 1): number {\r\n  let bucketSize = Infinity;\r\n\r\n  if (bounds.length === 0) {\r\n    return 0;\r\n  } else if (bounds.length === 1) {\r\n    return bounds[0];\r\n  } else {\r\n    bounds = _.sortBy(bounds);\r\n    for (let i = 1; i < bounds.length; i++) {\r\n      const distance = getDistance(bounds[i], bounds[i - 1], logBase);\r\n      bucketSize = distance < bucketSize ? distance : bucketSize;\r\n    }\r\n  }\r\n\r\n  return bucketSize;\r\n}\r\n\r\n/**\r\n * Calculate distance between two numbers in given scale (linear or logarithmic).\r\n * @param a\r\n * @param b\r\n * @param logBase\r\n */\r\nfunction getDistance(a: number, b: number, logBase = 1): number {\r\n  if (logBase === 1) {\r\n    // Linear distance\r\n    return Math.abs(b - a);\r\n  } else {\r\n    // logarithmic distance\r\n    const ratio = Math.max(a, b) / Math.min(a, b);\r\n    return logp(ratio, logBase);\r\n  }\r\n}\r\n\r\n/**\r\n * Compare two heatmap data objects\r\n * @param objA\r\n * @param objB\r\n */\r\nfunction isHeatmapDataEqual(objA: any, objB: any): boolean {\r\n  let isEql = !emptyXOR(objA, objB);\r\n\r\n  _.forEach(objA, (xBucket: XBucket, x) => {\r\n    if (objB[x]) {\r\n      if (emptyXOR(xBucket.buckets, objB[x].buckets)) {\r\n        isEql = false;\r\n        return false;\r\n      }\r\n\r\n      _.forEach(xBucket.buckets, (yBucket: YBucket, y) => {\r\n        if (objB[x].buckets && objB[x].buckets[y]) {\r\n          if (objB[x].buckets[y].values) {\r\n            isEql = _.isEqual(_.sortBy(yBucket.values), _.sortBy(objB[x].buckets[y].values));\r\n            if (!isEql) {\r\n              return false;\r\n            } else {\r\n              return true;\r\n            }\r\n          } else {\r\n            isEql = false;\r\n            return false;\r\n          }\r\n        } else {\r\n          isEql = false;\r\n          return false;\r\n        }\r\n      });\r\n\r\n      if (!isEql) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else {\r\n      isEql = false;\r\n      return false;\r\n    }\r\n  });\r\n\r\n  return isEql;\r\n}\r\n\r\nfunction emptyXOR(foo: any, bar: any): boolean {\r\n  return (_.isEmpty(foo) || _.isEmpty(bar)) && !(_.isEmpty(foo) && _.isEmpty(bar));\r\n}\r\n\r\nexport {\r\n  convertToHeatMap,\r\n  histogramToHeatmap,\r\n  convertToCards,\r\n  mergeZeroBuckets,\r\n  getValueBucketBound,\r\n  isHeatmapDataEqual,\r\n  calculateBucketSize,\r\n  sortSeriesByLabel,\r\n};\r\n","import kbn from 'app/core/utils/kbn';\r\n\r\nexport class AxesEditorCtrl {\r\n  panel: any;\r\n  panelCtrl: any;\r\n  unitFormats: any;\r\n  logScales: any;\r\n  dataFormats: any;\r\n  yBucketBoundModes: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, uiSegmentSrv) {\r\n    $scope.editor = this;\r\n    this.panelCtrl = $scope.ctrl;\r\n    this.panel = this.panelCtrl.panel;\r\n    this.unitFormats = kbn.getUnitFormats();\r\n\r\n    this.logScales = {\r\n      linear: 1,\r\n      'log (base 2)': 2,\r\n      'log (base 10)': 10,\r\n      'log (base 32)': 32,\r\n      'log (base 1024)': 1024,\r\n    };\r\n\r\n    this.dataFormats = {\r\n      'Time series': 'timeseries',\r\n      'Time series buckets': 'tsbuckets',\r\n    };\r\n\r\n    this.yBucketBoundModes = {\r\n      Auto: 'auto',\r\n      Upper: 'upper',\r\n      Lower: 'lower',\r\n    };\r\n  }\r\n\r\n  setUnitFormat(subItem) {\r\n    this.panel.yAxis.format = subItem.value;\r\n    this.panelCtrl.render();\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function axesEditor() {\r\n  'use strict';\r\n  return {\r\n    restrict: 'E',\r\n    scope: true,\r\n    templateUrl: 'public/app/plugins/panel/heatmap/partials/axes_editor.html',\r\n    controller: AxesEditorCtrl,\r\n  };\r\n}\r\n","export class HeatmapDisplayEditorCtrl {\r\n  panel: any;\r\n  panelCtrl: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope) {\r\n    $scope.editor = this;\r\n    this.panelCtrl = $scope.ctrl;\r\n    this.panel = this.panelCtrl.panel;\r\n\r\n    this.panelCtrl.render();\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function heatmapDisplayEditor() {\r\n  'use strict';\r\n  return {\r\n    restrict: 'E',\r\n    scope: true,\r\n    templateUrl: 'public/app/plugins/panel/heatmap/partials/display_editor.html',\r\n    controller: HeatmapDisplayEditorCtrl,\r\n  };\r\n}\r\n","import * as d3 from 'd3';\r\nimport $ from 'jquery';\r\nimport _ from 'lodash';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport { getValueBucketBound } from './heatmap_data_converter';\r\n\r\nconst TOOLTIP_PADDING_X = 30;\r\nconst TOOLTIP_PADDING_Y = 5;\r\nconst HISTOGRAM_WIDTH = 160;\r\nconst HISTOGRAM_HEIGHT = 40;\r\n\r\nexport class HeatmapTooltip {\r\n  tooltip: any;\r\n  scope: any;\r\n  dashboard: any;\r\n  panelCtrl: any;\r\n  panel: any;\r\n  heatmapPanel: any;\r\n  mouseOverBucket: boolean;\r\n  originalFillColor: any;\r\n\r\n  constructor(elem, scope) {\r\n    this.scope = scope;\r\n    this.dashboard = scope.ctrl.dashboard;\r\n    this.panelCtrl = scope.ctrl;\r\n    this.panel = scope.ctrl.panel;\r\n    this.heatmapPanel = elem;\r\n    this.mouseOverBucket = false;\r\n    this.originalFillColor = null;\r\n\r\n    elem.on('mouseleave', this.onMouseLeave.bind(this));\r\n  }\r\n\r\n  onMouseLeave() {\r\n    this.destroy();\r\n  }\r\n\r\n  onMouseMove(e) {\r\n    if (!this.panel.tooltip.show) {\r\n      return;\r\n    }\r\n\r\n    this.move(e);\r\n  }\r\n\r\n  add() {\r\n    this.tooltip = d3\r\n      .select('body')\r\n      .append('div')\r\n      .attr('class', 'heatmap-tooltip graph-tooltip grafana-tooltip');\r\n  }\r\n\r\n  destroy() {\r\n    if (this.tooltip) {\r\n      this.tooltip.remove();\r\n    }\r\n\r\n    this.tooltip = null;\r\n  }\r\n\r\n  show(pos, data) {\r\n    if (!this.panel.tooltip.show || !data) {\r\n      return;\r\n    }\r\n    // shared tooltip mode\r\n    if (pos.panelRelY) {\r\n      return;\r\n    }\r\n\r\n    const { xBucketIndex, yBucketIndex } = this.getBucketIndexes(pos, data);\r\n\r\n    if (!data.buckets[xBucketIndex]) {\r\n      this.destroy();\r\n      return;\r\n    }\r\n\r\n    if (!this.tooltip) {\r\n      this.add();\r\n    }\r\n\r\n    let boundBottom, boundTop, valuesNumber;\r\n    const xData = data.buckets[xBucketIndex];\r\n    // Search in special 'zero' bucket also\r\n    const yData = _.find(xData.buckets, (bucket, bucketIndex) => {\r\n      return bucket.bounds.bottom === yBucketIndex || bucketIndex === yBucketIndex.toString();\r\n    });\r\n\r\n    const tooltipTimeFormat = 'YYYY-MM-DD HH:mm:ss';\r\n    const time = this.dashboard.formatDate(xData.x, tooltipTimeFormat);\r\n\r\n    // Decimals override. Code from panel/graph/graph.ts\r\n    let countValueFormatter, bucketBoundFormatter;\r\n    if (_.isNumber(this.panel.tooltipDecimals)) {\r\n      countValueFormatter = this.countValueFormatter(this.panel.tooltipDecimals, null);\r\n      bucketBoundFormatter = this.panelCtrl.tickValueFormatter(this.panelCtrl.decimals, null);\r\n    } else {\r\n      // auto decimals\r\n      // legend and tooltip gets one more decimal precision\r\n      // than graph legend ticks\r\n      const decimals = (this.panelCtrl.decimals || -1) + 1;\r\n      countValueFormatter = this.countValueFormatter(decimals, this.panelCtrl.scaledDecimals + 2);\r\n      bucketBoundFormatter = this.panelCtrl.tickValueFormatter(decimals, this.panelCtrl.scaledDecimals + 2);\r\n    }\r\n\r\n    let tooltipHtml = `<div class=\"graph-tooltip-time\">${time}</div>\r\n      <div class=\"heatmap-histogram\"></div>`;\r\n\r\n    if (yData) {\r\n      if (yData.bounds) {\r\n        if (data.tsBuckets) {\r\n          // Use Y-axis labels\r\n          const tickFormatter = valIndex => {\r\n            return data.tsBucketsFormatted ? data.tsBucketsFormatted[valIndex] : data.tsBuckets[valIndex];\r\n          };\r\n\r\n          boundBottom = tickFormatter(yBucketIndex);\r\n          boundTop = yBucketIndex < data.tsBuckets.length - 1 ? tickFormatter(yBucketIndex + 1) : '';\r\n        } else {\r\n          // Display 0 if bucket is a special 'zero' bucket\r\n          const bottom = yData.y ? yData.bounds.bottom : 0;\r\n          boundBottom = bucketBoundFormatter(bottom);\r\n          boundTop = bucketBoundFormatter(yData.bounds.top);\r\n        }\r\n        valuesNumber = countValueFormatter(yData.count);\r\n        tooltipHtml += `<div>\r\n          bucket: <b>${boundBottom} - ${boundTop}</b> <br>\r\n          count: <b>${valuesNumber}</b> <br>\r\n        </div>`;\r\n      } else {\r\n        // currently no bounds for pre bucketed data\r\n        tooltipHtml += `<div>count: <b>${yData.count}</b><br></div>`;\r\n      }\r\n    } else {\r\n      if (!this.panel.tooltip.showHistogram) {\r\n        this.destroy();\r\n        return;\r\n      }\r\n      boundBottom = yBucketIndex;\r\n      boundTop = '';\r\n      valuesNumber = 0;\r\n    }\r\n\r\n    this.tooltip.html(tooltipHtml);\r\n\r\n    if (this.panel.tooltip.showHistogram) {\r\n      this.addHistogram(xData);\r\n    }\r\n\r\n    this.move(pos);\r\n  }\r\n\r\n  getBucketIndexes(pos, data) {\r\n    const xBucketIndex = this.getXBucketIndex(pos.x, data);\r\n    const yBucketIndex = this.getYBucketIndex(pos.y, data);\r\n    return { xBucketIndex, yBucketIndex };\r\n  }\r\n\r\n  getXBucketIndex(x, data) {\r\n    // First try to find X bucket by checking x pos is in the\r\n    // [bucket.x, bucket.x + xBucketSize] interval\r\n    const xBucket = _.find(data.buckets, bucket => {\r\n      return x > bucket.x && x - bucket.x <= data.xBucketSize;\r\n    });\r\n    return xBucket ? xBucket.x : getValueBucketBound(x, data.xBucketSize, 1);\r\n  }\r\n\r\n  getYBucketIndex(y, data) {\r\n    if (data.tsBuckets) {\r\n      return Math.floor(y);\r\n    }\r\n    const yBucketIndex = getValueBucketBound(y, data.yBucketSize, this.panel.yAxis.logBase);\r\n    return yBucketIndex;\r\n  }\r\n\r\n  getSharedTooltipPos(pos) {\r\n    // get pageX from position on x axis and pageY from relative position in original panel\r\n    pos.pageX = this.heatmapPanel.offset().left + this.scope.xScale(pos.x);\r\n    pos.pageY = this.heatmapPanel.offset().top + this.scope.chartHeight * pos.panelRelY;\r\n    return pos;\r\n  }\r\n\r\n  addHistogram(data) {\r\n    const xBucket = this.scope.ctrl.data.buckets[data.x];\r\n    const yBucketSize = this.scope.ctrl.data.yBucketSize;\r\n    let min, max, ticks;\r\n    if (this.scope.ctrl.data.tsBuckets) {\r\n      min = 0;\r\n      max = this.scope.ctrl.data.tsBuckets.length - 1;\r\n      ticks = this.scope.ctrl.data.tsBuckets.length;\r\n    } else {\r\n      min = this.scope.ctrl.data.yAxis.min;\r\n      max = this.scope.ctrl.data.yAxis.max;\r\n      ticks = this.scope.ctrl.data.yAxis.ticks;\r\n    }\r\n    let histogramData = _.map(xBucket.buckets, bucket => {\r\n      const count = bucket.count !== undefined ? bucket.count : bucket.values.length;\r\n      return [bucket.bounds.bottom, count];\r\n    });\r\n    histogramData = _.filter(histogramData, d => {\r\n      return d[0] >= min && d[0] <= max;\r\n    });\r\n\r\n    const scale = this.scope.yScale.copy();\r\n    const histXScale = scale.domain([min, max]).range([0, HISTOGRAM_WIDTH]);\r\n\r\n    let barWidth;\r\n    if (this.panel.yAxis.logBase === 1) {\r\n      barWidth = Math.floor(HISTOGRAM_WIDTH / (max - min) * yBucketSize * 0.9);\r\n    } else {\r\n      const barNumberFactor = yBucketSize ? yBucketSize : 1;\r\n      barWidth = Math.floor(HISTOGRAM_WIDTH / ticks / barNumberFactor * 0.9);\r\n    }\r\n    barWidth = Math.max(barWidth, 1);\r\n\r\n    // Normalize histogram Y axis\r\n    const histogramDomain = _.reduce(_.map(histogramData, d => d[1]), (sum, val) => sum + val, 0);\r\n    const histYScale = d3\r\n      .scaleLinear()\r\n      .domain([0, histogramDomain])\r\n      .range([0, HISTOGRAM_HEIGHT]);\r\n\r\n    const histogram = this.tooltip\r\n      .select('.heatmap-histogram')\r\n      .append('svg')\r\n      .attr('width', HISTOGRAM_WIDTH)\r\n      .attr('height', HISTOGRAM_HEIGHT);\r\n\r\n    histogram\r\n      .selectAll('.bar')\r\n      .data(histogramData)\r\n      .enter()\r\n      .append('rect')\r\n      .attr('x', d => {\r\n        return histXScale(d[0]);\r\n      })\r\n      .attr('width', barWidth)\r\n      .attr('y', d => {\r\n        return HISTOGRAM_HEIGHT - histYScale(d[1]);\r\n      })\r\n      .attr('height', d => {\r\n        return histYScale(d[1]);\r\n      });\r\n  }\r\n\r\n  move(pos) {\r\n    if (!this.tooltip) {\r\n      return;\r\n    }\r\n\r\n    const elem = $(this.tooltip.node())[0];\r\n    const tooltipWidth = elem.clientWidth;\r\n    const tooltipHeight = elem.clientHeight;\r\n\r\n    let left = pos.pageX + TOOLTIP_PADDING_X;\r\n    let top = pos.pageY + TOOLTIP_PADDING_Y;\r\n\r\n    if (pos.pageX + tooltipWidth + 40 > window.innerWidth) {\r\n      left = pos.pageX - tooltipWidth - TOOLTIP_PADDING_X;\r\n    }\r\n\r\n    if (pos.pageY - window.pageYOffset + tooltipHeight + 20 > window.innerHeight) {\r\n      top = pos.pageY - tooltipHeight - TOOLTIP_PADDING_Y;\r\n    }\r\n\r\n    return this.tooltip.style('left', left + 'px').style('top', top + 'px');\r\n  }\r\n\r\n  countValueFormatter(decimals, scaledDecimals = null) {\r\n    const format = 'short';\r\n    return value => {\r\n      return kbn.valueFormats[format](value, decimals, scaledDecimals);\r\n    };\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport moment from 'moment';\r\nimport * as d3 from 'd3';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport { appEvents, contextSrv } from 'app/core/core';\r\nimport * as ticksUtils from 'app/core/utils/ticks';\r\nimport { HeatmapTooltip } from './heatmap_tooltip';\r\nimport { mergeZeroBuckets } from './heatmap_data_converter';\r\nimport { getColorScale, getOpacityScale } from './color_scale';\r\n\r\nconst MIN_CARD_SIZE = 1,\r\n  CARD_PADDING = 1,\r\n  CARD_ROUND = 0,\r\n  DATA_RANGE_WIDING_FACTOR = 1.2,\r\n  DEFAULT_X_TICK_SIZE_PX = 100,\r\n  DEFAULT_Y_TICK_SIZE_PX = 50,\r\n  X_AXIS_TICK_PADDING = 10,\r\n  Y_AXIS_TICK_PADDING = 5,\r\n  MIN_SELECTION_WIDTH = 2;\r\n\r\nexport default function rendering(scope, elem, attrs, ctrl) {\r\n  return new HeatmapRenderer(scope, elem, attrs, ctrl);\r\n}\r\nexport class HeatmapRenderer {\r\n  width: number;\r\n  height: number;\r\n  yScale: any;\r\n  xScale: any;\r\n  chartWidth: number;\r\n  chartHeight: number;\r\n  chartTop: number;\r\n  chartBottom: number;\r\n  yAxisWidth: number;\r\n  xAxisHeight: number;\r\n  cardPadding: number;\r\n  cardRound: number;\r\n  cardWidth: number;\r\n  cardHeight: number;\r\n  colorScale: any;\r\n  opacityScale: any;\r\n  mouseUpHandler: any;\r\n  data: any;\r\n  panel: any;\r\n  $heatmap: any;\r\n  tooltip: HeatmapTooltip;\r\n  heatmap: any;\r\n  timeRange: any;\r\n\r\n  selection: any;\r\n  padding: any;\r\n  margin: any;\r\n  dataRangeWidingFactor: number;\r\n  constructor(private scope, private elem, attrs, private ctrl) {\r\n    // $heatmap is JQuery object, but heatmap is D3\r\n    this.$heatmap = this.elem.find('.heatmap-panel');\r\n    this.tooltip = new HeatmapTooltip(this.$heatmap, this.scope);\r\n\r\n    this.selection = {\r\n      active: false,\r\n      x1: -1,\r\n      x2: -1,\r\n    };\r\n\r\n    this.padding = { left: 0, right: 0, top: 0, bottom: 0 };\r\n    this.margin = { left: 25, right: 15, top: 10, bottom: 20 };\r\n    this.dataRangeWidingFactor = DATA_RANGE_WIDING_FACTOR;\r\n\r\n    this.ctrl.events.on('render', this.onRender.bind(this));\r\n\r\n    this.ctrl.tickValueFormatter = this.tickValueFormatter.bind(this);\r\n\r\n    /////////////////////////////\r\n    // Selection and crosshair //\r\n    /////////////////////////////\r\n\r\n    // Shared crosshair and tooltip\r\n    appEvents.on('graph-hover', this.onGraphHover.bind(this), this.scope);\r\n\r\n    appEvents.on('graph-hover-clear', this.onGraphHoverClear.bind(this), this.scope);\r\n\r\n    // Register selection listeners\r\n    this.$heatmap.on('mousedown', this.onMouseDown.bind(this));\r\n    this.$heatmap.on('mousemove', this.onMouseMove.bind(this));\r\n    this.$heatmap.on('mouseleave', this.onMouseLeave.bind(this));\r\n  }\r\n\r\n  onGraphHoverClear() {\r\n    this.clearCrosshair();\r\n  }\r\n\r\n  onGraphHover(event) {\r\n    this.drawSharedCrosshair(event.pos);\r\n  }\r\n\r\n  onRender() {\r\n    this.render();\r\n    this.ctrl.renderingCompleted();\r\n  }\r\n\r\n  setElementHeight() {\r\n    try {\r\n      let height = this.ctrl.height || this.panel.height || this.ctrl.row.height;\r\n      if (_.isString(height)) {\r\n        height = parseInt(height.replace('px', ''), 10);\r\n      }\r\n\r\n      height -= this.panel.legend.show ? 28 : 11; // bottom padding and space for legend\r\n\r\n      this.$heatmap.css('height', height + 'px');\r\n\r\n      return true;\r\n    } catch (e) {\r\n      // IE throws errors sometimes\r\n      return false;\r\n    }\r\n  }\r\n\r\n  getYAxisWidth(elem) {\r\n    const axisText = elem.selectAll('.axis-y text').nodes();\r\n    const maxTextWidth = _.max(\r\n      _.map(axisText, text => {\r\n        // Use SVG getBBox method\r\n        return text.getBBox().width;\r\n      })\r\n    );\r\n\r\n    return maxTextWidth;\r\n  }\r\n\r\n  getXAxisHeight(elem) {\r\n    const axisLine = elem.select('.axis-x line');\r\n    if (!axisLine.empty()) {\r\n      const axisLinePosition = parseFloat(elem.select('.axis-x line').attr('y2'));\r\n      const canvasWidth = parseFloat(elem.attr('height'));\r\n      return canvasWidth - axisLinePosition;\r\n    } else {\r\n      // Default height\r\n      return 30;\r\n    }\r\n  }\r\n\r\n  addXAxis() {\r\n    this.scope.xScale = this.xScale = d3\r\n      .scaleTime()\r\n      .domain([this.timeRange.from, this.timeRange.to])\r\n      .range([0, this.chartWidth]);\r\n\r\n    const ticks = this.chartWidth / DEFAULT_X_TICK_SIZE_PX;\r\n    const grafanaTimeFormatter = ticksUtils.grafanaTimeFormat(ticks, this.timeRange.from, this.timeRange.to);\r\n    let timeFormat;\r\n    const dashboardTimeZone = this.ctrl.dashboard.getTimezone();\r\n    if (dashboardTimeZone === 'utc') {\r\n      timeFormat = d3.utcFormat(grafanaTimeFormatter);\r\n    } else {\r\n      timeFormat = d3.timeFormat(grafanaTimeFormatter);\r\n    }\r\n\r\n    const xAxis = d3\r\n      .axisBottom(this.xScale)\r\n      .ticks(ticks)\r\n      .tickFormat(timeFormat)\r\n      .tickPadding(X_AXIS_TICK_PADDING)\r\n      .tickSize(this.chartHeight);\r\n\r\n    const posY = this.margin.top;\r\n    const posX = this.yAxisWidth;\r\n    this.heatmap\r\n      .append('g')\r\n      .attr('class', 'axis axis-x')\r\n      .attr('transform', 'translate(' + posX + ',' + posY + ')')\r\n      .call(xAxis);\r\n\r\n    // Remove horizontal line in the top of axis labels (called domain in d3)\r\n    this.heatmap\r\n      .select('.axis-x')\r\n      .select('.domain')\r\n      .remove();\r\n  }\r\n\r\n  addYAxis() {\r\n    let ticks = Math.ceil(this.chartHeight / DEFAULT_Y_TICK_SIZE_PX);\r\n    let tickInterval = ticksUtils.tickStep(this.data.heatmapStats.min, this.data.heatmapStats.max, ticks);\r\n    let { yMin, yMax } = this.wideYAxisRange(this.data.heatmapStats.min, this.data.heatmapStats.max, tickInterval);\r\n\r\n    // Rewrite min and max if it have been set explicitly\r\n    yMin = this.panel.yAxis.min !== null ? this.panel.yAxis.min : yMin;\r\n    yMax = this.panel.yAxis.max !== null ? this.panel.yAxis.max : yMax;\r\n\r\n    // Adjust ticks after Y range widening\r\n    tickInterval = ticksUtils.tickStep(yMin, yMax, ticks);\r\n    ticks = Math.ceil((yMax - yMin) / tickInterval);\r\n\r\n    const decimalsAuto = ticksUtils.getPrecision(tickInterval);\r\n    let decimals = this.panel.yAxis.decimals === null ? decimalsAuto : this.panel.yAxis.decimals;\r\n    // Calculate scaledDecimals for log scales using tick size (as in jquery.flot.js)\r\n    const flotTickSize = ticksUtils.getFlotTickSize(yMin, yMax, ticks, decimalsAuto);\r\n    const scaledDecimals = ticksUtils.getScaledDecimals(decimals, flotTickSize);\r\n    this.ctrl.decimals = decimals;\r\n    this.ctrl.scaledDecimals = scaledDecimals;\r\n\r\n    // Set default Y min and max if no data\r\n    if (_.isEmpty(this.data.buckets)) {\r\n      yMax = 1;\r\n      yMin = -1;\r\n      ticks = 3;\r\n      decimals = 1;\r\n    }\r\n\r\n    this.data.yAxis = {\r\n      min: yMin,\r\n      max: yMax,\r\n      ticks: ticks,\r\n    };\r\n\r\n    this.scope.yScale = this.yScale = d3\r\n      .scaleLinear()\r\n      .domain([yMin, yMax])\r\n      .range([this.chartHeight, 0]);\r\n\r\n    const yAxis = d3\r\n      .axisLeft(this.yScale)\r\n      .ticks(ticks)\r\n      .tickFormat(this.tickValueFormatter(decimals, scaledDecimals))\r\n      .tickSizeInner(0 - this.width)\r\n      .tickSizeOuter(0)\r\n      .tickPadding(Y_AXIS_TICK_PADDING);\r\n\r\n    this.heatmap\r\n      .append('g')\r\n      .attr('class', 'axis axis-y')\r\n      .call(yAxis);\r\n\r\n    // Calculate Y axis width first, then move axis into visible area\r\n    const posY = this.margin.top;\r\n    const posX = this.getYAxisWidth(this.heatmap) + Y_AXIS_TICK_PADDING;\r\n    this.heatmap.select('.axis-y').attr('transform', 'translate(' + posX + ',' + posY + ')');\r\n\r\n    // Remove vertical line in the right of axis labels (called domain in d3)\r\n    this.heatmap\r\n      .select('.axis-y')\r\n      .select('.domain')\r\n      .remove();\r\n  }\r\n\r\n  // Wide Y values range and anjust to bucket size\r\n  wideYAxisRange(min, max, tickInterval) {\r\n    const yWiding = (max * (this.dataRangeWidingFactor - 1) - min * (this.dataRangeWidingFactor - 1)) / 2;\r\n    let yMin, yMax;\r\n\r\n    if (tickInterval === 0) {\r\n      yMax = max * this.dataRangeWidingFactor;\r\n      yMin = min - min * (this.dataRangeWidingFactor - 1);\r\n      tickInterval = (yMax - yMin) / 2;\r\n    } else {\r\n      yMax = Math.ceil((max + yWiding) / tickInterval) * tickInterval;\r\n      yMin = Math.floor((min - yWiding) / tickInterval) * tickInterval;\r\n    }\r\n\r\n    // Don't wide axis below 0 if all values are positive\r\n    if (min >= 0 && yMin < 0) {\r\n      yMin = 0;\r\n    }\r\n\r\n    return { yMin, yMax };\r\n  }\r\n\r\n  addLogYAxis() {\r\n    const logBase = this.panel.yAxis.logBase;\r\n    let { yMin, yMax } = this.adjustLogRange(this.data.heatmapStats.minLog, this.data.heatmapStats.max, logBase);\r\n\r\n    yMin =\r\n      this.panel.yAxis.min && this.panel.yAxis.min !== '0' ? this.adjustLogMin(this.panel.yAxis.min, logBase) : yMin;\r\n    yMax = this.panel.yAxis.max !== null ? this.adjustLogMax(this.panel.yAxis.max, logBase) : yMax;\r\n\r\n    // Set default Y min and max if no data\r\n    if (_.isEmpty(this.data.buckets)) {\r\n      yMax = Math.pow(logBase, 2);\r\n      yMin = 1;\r\n    }\r\n\r\n    this.scope.yScale = this.yScale = d3\r\n      .scaleLog()\r\n      .base(this.panel.yAxis.logBase)\r\n      .domain([yMin, yMax])\r\n      .range([this.chartHeight, 0]);\r\n\r\n    const domain = this.yScale.domain();\r\n    const tickValues = this.logScaleTickValues(domain, logBase);\r\n\r\n    const decimalsAuto = ticksUtils.getPrecision(yMin);\r\n    const decimals = this.panel.yAxis.decimals || decimalsAuto;\r\n\r\n    // Calculate scaledDecimals for log scales using tick size (as in jquery.flot.js)\r\n    const flotTickSize = ticksUtils.getFlotTickSize(yMin, yMax, tickValues.length, decimalsAuto);\r\n    const scaledDecimals = ticksUtils.getScaledDecimals(decimals, flotTickSize);\r\n    this.ctrl.decimals = decimals;\r\n    this.ctrl.scaledDecimals = scaledDecimals;\r\n\r\n    this.data.yAxis = {\r\n      min: yMin,\r\n      max: yMax,\r\n      ticks: tickValues.length,\r\n    };\r\n\r\n    const yAxis = d3\r\n      .axisLeft(this.yScale)\r\n      .tickValues(tickValues)\r\n      .tickFormat(this.tickValueFormatter(decimals, scaledDecimals))\r\n      .tickSizeInner(0 - this.width)\r\n      .tickSizeOuter(0)\r\n      .tickPadding(Y_AXIS_TICK_PADDING);\r\n\r\n    this.heatmap\r\n      .append('g')\r\n      .attr('class', 'axis axis-y')\r\n      .call(yAxis);\r\n\r\n    // Calculate Y axis width first, then move axis into visible area\r\n    const posY = this.margin.top;\r\n    const posX = this.getYAxisWidth(this.heatmap) + Y_AXIS_TICK_PADDING;\r\n    this.heatmap.select('.axis-y').attr('transform', 'translate(' + posX + ',' + posY + ')');\r\n\r\n    // Set first tick as pseudo 0\r\n    if (yMin < 1) {\r\n      this.heatmap\r\n        .select('.axis-y')\r\n        .select('.tick text')\r\n        .text('0');\r\n    }\r\n\r\n    // Remove vertical line in the right of axis labels (called domain in d3)\r\n    this.heatmap\r\n      .select('.axis-y')\r\n      .select('.domain')\r\n      .remove();\r\n  }\r\n\r\n  addYAxisFromBuckets() {\r\n    const tsBuckets = this.data.tsBuckets;\r\n\r\n    this.scope.yScale = this.yScale = d3\r\n      .scaleLinear()\r\n      .domain([0, tsBuckets.length - 1])\r\n      .range([this.chartHeight, 0]);\r\n\r\n    const tickValues = _.map(tsBuckets, (b, i) => i);\r\n    const decimalsAuto = _.max(_.map(tsBuckets, ticksUtils.getStringPrecision));\r\n    const decimals = this.panel.yAxis.decimals === null ? decimalsAuto : this.panel.yAxis.decimals;\r\n    this.ctrl.decimals = decimals;\r\n\r\n    const tickValueFormatter = this.tickValueFormatter.bind(this);\r\n    function tickFormatter(valIndex) {\r\n      let valueFormatted = tsBuckets[valIndex];\r\n      if (!_.isNaN(_.toNumber(valueFormatted)) && valueFormatted !== '') {\r\n        // Try to format numeric tick labels\r\n        valueFormatted = tickValueFormatter(decimals)(_.toNumber(valueFormatted));\r\n      }\r\n      return valueFormatted;\r\n    }\r\n\r\n    const tsBucketsFormatted = _.map(tsBuckets, (v, i) => tickFormatter(i));\r\n    this.data.tsBucketsFormatted = tsBucketsFormatted;\r\n\r\n    const yAxis = d3\r\n      .axisLeft(this.yScale)\r\n      .tickValues(tickValues)\r\n      .tickFormat(tickFormatter)\r\n      .tickSizeInner(0 - this.width)\r\n      .tickSizeOuter(0)\r\n      .tickPadding(Y_AXIS_TICK_PADDING);\r\n\r\n    this.heatmap\r\n      .append('g')\r\n      .attr('class', 'axis axis-y')\r\n      .call(yAxis);\r\n\r\n    // Calculate Y axis width first, then move axis into visible area\r\n    const posY = this.margin.top;\r\n    const posX = this.getYAxisWidth(this.heatmap) + Y_AXIS_TICK_PADDING;\r\n    this.heatmap.select('.axis-y').attr('transform', 'translate(' + posX + ',' + posY + ')');\r\n\r\n    // Remove vertical line in the right of axis labels (called domain in d3)\r\n    this.heatmap\r\n      .select('.axis-y')\r\n      .select('.domain')\r\n      .remove();\r\n  }\r\n\r\n  // Adjust data range to log base\r\n  adjustLogRange(min, max, logBase) {\r\n    let yMin, yMax;\r\n\r\n    yMin = this.data.heatmapStats.minLog;\r\n    if (this.data.heatmapStats.minLog > 1 || !this.data.heatmapStats.minLog) {\r\n      yMin = 1;\r\n    } else {\r\n      yMin = this.adjustLogMin(this.data.heatmapStats.minLog, logBase);\r\n    }\r\n\r\n    // Adjust max Y value to log base\r\n    yMax = this.adjustLogMax(this.data.heatmapStats.max, logBase);\r\n\r\n    return { yMin, yMax };\r\n  }\r\n\r\n  adjustLogMax(max, base) {\r\n    return Math.pow(base, Math.ceil(ticksUtils.logp(max, base)));\r\n  }\r\n\r\n  adjustLogMin(min, base) {\r\n    return Math.pow(base, Math.floor(ticksUtils.logp(min, base)));\r\n  }\r\n\r\n  logScaleTickValues(domain, base) {\r\n    const domainMin = domain[0];\r\n    const domainMax = domain[1];\r\n    const tickValues = [];\r\n\r\n    if (domainMin < 1) {\r\n      const underOneTicks = Math.floor(ticksUtils.logp(domainMin, base));\r\n      for (let i = underOneTicks; i < 0; i++) {\r\n        const tickValue = Math.pow(base, i);\r\n        tickValues.push(tickValue);\r\n      }\r\n    }\r\n\r\n    const ticks = Math.ceil(ticksUtils.logp(domainMax, base));\r\n    for (let i = 0; i <= ticks; i++) {\r\n      const tickValue = Math.pow(base, i);\r\n      tickValues.push(tickValue);\r\n    }\r\n\r\n    return tickValues;\r\n  }\r\n\r\n  tickValueFormatter(decimals, scaledDecimals = null) {\r\n    const format = this.panel.yAxis.format;\r\n    return value => {\r\n      try {\r\n        return format !== 'none' ? kbn.valueFormats[format](value, decimals, scaledDecimals) : value;\r\n      } catch (err) {\r\n        console.error(err.message || err);\r\n        return value;\r\n      }\r\n    };\r\n  }\r\n\r\n  fixYAxisTickSize() {\r\n    this.heatmap\r\n      .select('.axis-y')\r\n      .selectAll('.tick line')\r\n      .attr('x2', this.chartWidth);\r\n  }\r\n\r\n  addAxes() {\r\n    this.chartHeight = this.height - this.margin.top - this.margin.bottom;\r\n    this.chartTop = this.margin.top;\r\n    this.chartBottom = this.chartTop + this.chartHeight;\r\n    if (this.panel.dataFormat === 'tsbuckets') {\r\n      this.addYAxisFromBuckets();\r\n    } else {\r\n      if (this.panel.yAxis.logBase === 1) {\r\n        this.addYAxis();\r\n      } else {\r\n        this.addLogYAxis();\r\n      }\r\n    }\r\n\r\n    this.yAxisWidth = this.getYAxisWidth(this.heatmap) + Y_AXIS_TICK_PADDING;\r\n    this.chartWidth = this.width - this.yAxisWidth - this.margin.right;\r\n    this.fixYAxisTickSize();\r\n\r\n    this.addXAxis();\r\n    this.xAxisHeight = this.getXAxisHeight(this.heatmap);\r\n\r\n    if (!this.panel.yAxis.show) {\r\n      this.heatmap\r\n        .select('.axis-y')\r\n        .selectAll('line')\r\n        .style('opacity', 0);\r\n    }\r\n\r\n    if (!this.panel.xAxis.show) {\r\n      this.heatmap\r\n        .select('.axis-x')\r\n        .selectAll('line')\r\n        .style('opacity', 0);\r\n    }\r\n  }\r\n\r\n  addHeatmapCanvas() {\r\n    const heatmapElem = this.$heatmap[0];\r\n\r\n    this.width = Math.floor(this.$heatmap.width()) - this.padding.right;\r\n    this.height = Math.floor(this.$heatmap.height()) - this.padding.bottom;\r\n\r\n    this.cardPadding = this.panel.cards.cardPadding !== null ? this.panel.cards.cardPadding : CARD_PADDING;\r\n    this.cardRound = this.panel.cards.cardRound !== null ? this.panel.cards.cardRound : CARD_ROUND;\r\n\r\n    if (this.heatmap) {\r\n      this.heatmap.remove();\r\n    }\r\n\r\n    this.heatmap = d3\r\n      .select(heatmapElem)\r\n      .append('svg')\r\n      .attr('width', this.width)\r\n      .attr('height', this.height);\r\n  }\r\n\r\n  addHeatmap() {\r\n    this.addHeatmapCanvas();\r\n    this.addAxes();\r\n\r\n    if (this.panel.yAxis.logBase !== 1 && this.panel.dataFormat !== 'tsbuckets') {\r\n      const logBase = this.panel.yAxis.logBase;\r\n      const domain = this.yScale.domain();\r\n      const tickValues = this.logScaleTickValues(domain, logBase);\r\n      this.data.buckets = mergeZeroBuckets(this.data.buckets, _.min(tickValues));\r\n    }\r\n\r\n    const cardsData = this.data.cards;\r\n    const maxValueAuto = this.data.cardStats.max;\r\n    const maxValue = this.panel.color.max || maxValueAuto;\r\n    const minValue = this.panel.color.min || 0;\r\n\r\n    const colorScheme = _.find(this.ctrl.colorSchemes, {\r\n      value: this.panel.color.colorScheme,\r\n    });\r\n    this.colorScale = getColorScale(colorScheme, contextSrv.user.lightTheme, maxValue, minValue);\r\n    this.opacityScale = getOpacityScale(this.panel.color, maxValue);\r\n    this.setCardSize();\r\n\r\n    let cards = this.heatmap.selectAll('.heatmap-card').data(cardsData);\r\n    cards.append('title');\r\n    cards = cards\r\n      .enter()\r\n      .append('rect')\r\n      .attr('x', this.getCardX.bind(this))\r\n      .attr('width', this.getCardWidth.bind(this))\r\n      .attr('y', this.getCardY.bind(this))\r\n      .attr('height', this.getCardHeight.bind(this))\r\n      .attr('rx', this.cardRound)\r\n      .attr('ry', this.cardRound)\r\n      .attr('class', 'bordered heatmap-card')\r\n      .style('fill', this.getCardColor.bind(this))\r\n      .style('stroke', this.getCardColor.bind(this))\r\n      .style('stroke-width', 0)\r\n      .style('opacity', this.getCardOpacity.bind(this));\r\n\r\n    const $cards = this.$heatmap.find('.heatmap-card');\r\n    $cards\r\n      .on('mouseenter', event => {\r\n        this.tooltip.mouseOverBucket = true;\r\n        this.highlightCard(event);\r\n      })\r\n      .on('mouseleave', event => {\r\n        this.tooltip.mouseOverBucket = false;\r\n        this.resetCardHighLight(event);\r\n      });\r\n  }\r\n\r\n  highlightCard(event) {\r\n    const color = d3.select(event.target).style('fill');\r\n    const highlightColor = d3.color(color).darker(2);\r\n    const strokeColor = d3.color(color).brighter(4);\r\n    const currentCard = d3.select(event.target);\r\n    this.tooltip.originalFillColor = color;\r\n    currentCard\r\n      .style('fill', highlightColor.toString())\r\n      .style('stroke', strokeColor.toString())\r\n      .style('stroke-width', 1);\r\n  }\r\n\r\n  resetCardHighLight(event) {\r\n    d3\r\n      .select(event.target)\r\n      .style('fill', this.tooltip.originalFillColor)\r\n      .style('stroke', this.tooltip.originalFillColor)\r\n      .style('stroke-width', 0);\r\n  }\r\n\r\n  setCardSize() {\r\n    const xGridSize = Math.floor(this.xScale(this.data.xBucketSize) - this.xScale(0));\r\n    let yGridSize = Math.floor(this.yScale(this.yScale.invert(0) - this.data.yBucketSize));\r\n\r\n    if (this.panel.yAxis.logBase !== 1) {\r\n      const base = this.panel.yAxis.logBase;\r\n      const splitFactor = this.data.yBucketSize || 1;\r\n      yGridSize = Math.floor((this.yScale(1) - this.yScale(base)) / splitFactor);\r\n    }\r\n\r\n    this.cardWidth = xGridSize - this.cardPadding * 2;\r\n    this.cardHeight = yGridSize ? yGridSize - this.cardPadding * 2 : 0;\r\n  }\r\n\r\n  getCardX(d) {\r\n    let x;\r\n    if (this.xScale(d.x) < 0) {\r\n      // Cut card left to prevent overlay\r\n      x = this.yAxisWidth + this.cardPadding;\r\n    } else {\r\n      x = this.xScale(d.x) + this.yAxisWidth + this.cardPadding;\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n  getCardWidth(d) {\r\n    let w;\r\n    if (this.xScale(d.x) < 0) {\r\n      // Cut card left to prevent overlay\r\n      const cuttedWidth = this.xScale(d.x) + this.cardWidth;\r\n      w = cuttedWidth > 0 ? cuttedWidth : 0;\r\n    } else if (this.xScale(d.x) + this.cardWidth > this.chartWidth) {\r\n      // Cut card right to prevent overlay\r\n      w = this.chartWidth - this.xScale(d.x) - this.cardPadding;\r\n    } else {\r\n      w = this.cardWidth;\r\n    }\r\n\r\n    // Card width should be MIN_CARD_SIZE at least\r\n    w = Math.max(w, MIN_CARD_SIZE);\r\n    return w;\r\n  }\r\n\r\n  getCardY(d) {\r\n    let y = this.yScale(d.y) + this.chartTop - this.cardHeight - this.cardPadding;\r\n    if (this.panel.yAxis.logBase !== 1 && d.y === 0) {\r\n      y = this.chartBottom - this.cardHeight - this.cardPadding;\r\n    } else {\r\n      if (y < this.chartTop) {\r\n        y = this.chartTop;\r\n      }\r\n    }\r\n\r\n    return y;\r\n  }\r\n\r\n  getCardHeight(d) {\r\n    const y = this.yScale(d.y) + this.chartTop - this.cardHeight - this.cardPadding;\r\n    let h = this.cardHeight;\r\n\r\n    if (this.panel.yAxis.logBase !== 1 && d.y === 0) {\r\n      return this.cardHeight;\r\n    }\r\n\r\n    // Cut card height to prevent overlay\r\n    if (y < this.chartTop) {\r\n      h = this.yScale(d.y) - this.cardPadding;\r\n    } else if (this.yScale(d.y) > this.chartBottom) {\r\n      h = this.chartBottom - y;\r\n    } else if (y + this.cardHeight > this.chartBottom) {\r\n      h = this.chartBottom - y;\r\n    }\r\n\r\n    // Height can't be more than chart height\r\n    h = Math.min(h, this.chartHeight);\r\n    // Card height should be MIN_CARD_SIZE at least\r\n    h = Math.max(h, MIN_CARD_SIZE);\r\n\r\n    return h;\r\n  }\r\n\r\n  getCardColor(d) {\r\n    if (this.panel.color.mode === 'opacity') {\r\n      return this.panel.color.cardColor;\r\n    } else {\r\n      return this.colorScale(d.count);\r\n    }\r\n  }\r\n\r\n  getCardOpacity(d) {\r\n    if (this.panel.color.mode === 'opacity') {\r\n      return this.opacityScale(d.count);\r\n    } else {\r\n      return 1;\r\n    }\r\n  }\r\n\r\n  getEventOffset(event) {\r\n    const elemOffset = this.$heatmap.offset();\r\n    const x = Math.floor(event.clientX - elemOffset.left);\r\n    const y = Math.floor(event.clientY - elemOffset.top);\r\n    return { x, y };\r\n  }\r\n\r\n  onMouseDown(event) {\r\n    const offset = this.getEventOffset(event);\r\n    this.selection.active = true;\r\n    this.selection.x1 = offset.x;\r\n\r\n    this.mouseUpHandler = () => {\r\n      this.onMouseUp();\r\n    };\r\n\r\n    $(document).one('mouseup', this.mouseUpHandler.bind(this));\r\n  }\r\n\r\n  onMouseUp() {\r\n    $(document).unbind('mouseup', this.mouseUpHandler.bind(this));\r\n    this.mouseUpHandler = null;\r\n    this.selection.active = false;\r\n\r\n    const selectionRange = Math.abs(this.selection.x2 - this.selection.x1);\r\n    if (this.selection.x2 >= 0 && selectionRange > MIN_SELECTION_WIDTH) {\r\n      const timeFrom = this.xScale.invert(Math.min(this.selection.x1, this.selection.x2) - this.yAxisWidth);\r\n      const timeTo = this.xScale.invert(Math.max(this.selection.x1, this.selection.x2) - this.yAxisWidth);\r\n\r\n      this.ctrl.timeSrv.setTime({\r\n        from: moment.utc(timeFrom),\r\n        to: moment.utc(timeTo),\r\n      });\r\n    }\r\n\r\n    this.clearSelection();\r\n  }\r\n\r\n  onMouseLeave() {\r\n    appEvents.emit('graph-hover-clear');\r\n    this.clearCrosshair();\r\n  }\r\n\r\n  onMouseMove(event) {\r\n    if (!this.heatmap) {\r\n      return;\r\n    }\r\n\r\n    const offset = this.getEventOffset(event);\r\n    if (this.selection.active) {\r\n      // Clear crosshair and tooltip\r\n      this.clearCrosshair();\r\n      this.tooltip.destroy();\r\n\r\n      this.selection.x2 = this.limitSelection(offset.x);\r\n      this.drawSelection(this.selection.x1, this.selection.x2);\r\n    } else {\r\n      const pos = this.getEventPos(event, offset);\r\n      this.drawCrosshair(offset.x);\r\n      this.tooltip.show(pos, this.data);\r\n      this.emitGraphHoverEvent(pos);\r\n    }\r\n  }\r\n\r\n  getEventPos(event, offset) {\r\n    const x = this.xScale.invert(offset.x - this.yAxisWidth).valueOf();\r\n    const y = this.yScale.invert(offset.y - this.chartTop);\r\n    const pos = {\r\n      pageX: event.pageX,\r\n      pageY: event.pageY,\r\n      x: x,\r\n      x1: x,\r\n      y: y,\r\n      y1: y,\r\n      panelRelY: null,\r\n      offset,\r\n    };\r\n\r\n    return pos;\r\n  }\r\n\r\n  emitGraphHoverEvent(pos) {\r\n    // Set minimum offset to prevent showing legend from another panel\r\n    pos.panelRelY = Math.max(pos.offset.y / this.height, 0.001);\r\n    // broadcast to other graph panels that we are hovering\r\n    appEvents.emit('graph-hover', { pos: pos, panel: this.panel });\r\n  }\r\n\r\n  limitSelection(x2) {\r\n    x2 = Math.max(x2, this.yAxisWidth);\r\n    x2 = Math.min(x2, this.chartWidth + this.yAxisWidth);\r\n    return x2;\r\n  }\r\n\r\n  drawSelection(posX1, posX2) {\r\n    if (this.heatmap) {\r\n      this.heatmap.selectAll('.heatmap-selection').remove();\r\n      const selectionX = Math.min(posX1, posX2);\r\n      const selectionWidth = Math.abs(posX1 - posX2);\r\n\r\n      if (selectionWidth > MIN_SELECTION_WIDTH) {\r\n        this.heatmap\r\n          .append('rect')\r\n          .attr('class', 'heatmap-selection')\r\n          .attr('x', selectionX)\r\n          .attr('width', selectionWidth)\r\n          .attr('y', this.chartTop)\r\n          .attr('height', this.chartHeight);\r\n      }\r\n    }\r\n  }\r\n\r\n  clearSelection() {\r\n    this.selection.x1 = -1;\r\n    this.selection.x2 = -1;\r\n\r\n    if (this.heatmap) {\r\n      this.heatmap.selectAll('.heatmap-selection').remove();\r\n    }\r\n  }\r\n\r\n  drawCrosshair(position) {\r\n    if (this.heatmap) {\r\n      this.heatmap.selectAll('.heatmap-crosshair').remove();\r\n\r\n      let posX = position;\r\n      posX = Math.max(posX, this.yAxisWidth);\r\n      posX = Math.min(posX, this.chartWidth + this.yAxisWidth);\r\n\r\n      this.heatmap\r\n        .append('g')\r\n        .attr('class', 'heatmap-crosshair')\r\n        .attr('transform', 'translate(' + posX + ',0)')\r\n        .append('line')\r\n        .attr('x1', 1)\r\n        .attr('y1', this.chartTop)\r\n        .attr('x2', 1)\r\n        .attr('y2', this.chartBottom)\r\n        .attr('stroke-width', 1);\r\n    }\r\n  }\r\n\r\n  drawSharedCrosshair(pos) {\r\n    if (this.heatmap && this.ctrl.dashboard.graphTooltip !== 0) {\r\n      const posX = this.xScale(pos.x) + this.yAxisWidth;\r\n      this.drawCrosshair(posX);\r\n    }\r\n  }\r\n\r\n  clearCrosshair() {\r\n    if (this.heatmap) {\r\n      this.heatmap.selectAll('.heatmap-crosshair').remove();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.data = this.ctrl.data;\r\n    this.panel = this.ctrl.panel;\r\n    this.timeRange = this.ctrl.range;\r\n\r\n    if (!this.setElementHeight() || !this.data) {\r\n      return;\r\n    }\r\n\r\n    // Draw default axes and return if no data\r\n    if (_.isEmpty(this.data.buckets)) {\r\n      this.addHeatmapCanvas();\r\n      this.addAxes();\r\n      return;\r\n    }\r\n\r\n    this.addHeatmap();\r\n    this.scope.yAxisWidth = this.yAxisWidth;\r\n    this.scope.xAxisHeight = this.xAxisHeight;\r\n    this.scope.chartHeight = this.chartHeight;\r\n    this.scope.chartWidth = this.chartWidth;\r\n    this.scope.chartTop = this.chartTop;\r\n  }\r\n}\r\n","import { MetricsPanelCtrl } from 'app/plugins/sdk';\r\nimport _ from 'lodash';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport TimeSeries from 'app/core/time_series2';\r\nimport { axesEditor } from './axes_editor';\r\nimport { heatmapDisplayEditor } from './display_editor';\r\nimport rendering from './rendering';\r\nimport {\r\n  convertToHeatMap,\r\n  convertToCards,\r\n  histogramToHeatmap,\r\n  calculateBucketSize,\r\n  sortSeriesByLabel,\r\n} from './heatmap_data_converter';\r\n\r\nconst X_BUCKET_NUMBER_DEFAULT = 30;\r\nconst Y_BUCKET_NUMBER_DEFAULT = 10;\r\n\r\nconst panelDefaults = {\r\n  heatmap: {},\r\n  cards: {\r\n    cardPadding: null,\r\n    cardRound: null,\r\n  },\r\n  color: {\r\n    mode: 'spectrum',\r\n    cardColor: '#b4ff00',\r\n    colorScale: 'sqrt',\r\n    exponent: 0.5,\r\n    colorScheme: 'interpolateOranges',\r\n  },\r\n  legend: {\r\n    show: false,\r\n  },\r\n  dataFormat: 'timeseries',\r\n  yBucketBound: 'auto',\r\n  xAxis: {\r\n    show: true,\r\n  },\r\n  yAxis: {\r\n    show: true,\r\n    format: 'short',\r\n    decimals: null,\r\n    logBase: 1,\r\n    splitFactor: null,\r\n    min: null,\r\n    max: null,\r\n  },\r\n  xBucketSize: null,\r\n  xBucketNumber: null,\r\n  yBucketSize: null,\r\n  yBucketNumber: null,\r\n  tooltip: {\r\n    show: true,\r\n    showHistogram: false,\r\n  },\r\n  highlightCards: true,\r\n};\r\n\r\nconst colorModes = ['opacity', 'spectrum'];\r\nconst opacityScales = ['linear', 'sqrt'];\r\n\r\n// Schemes from d3-scale-chromatic\r\n// https://github.com/d3/d3-scale-chromatic\r\nconst colorSchemes = [\r\n  // Diverging\r\n  { name: 'Spectral', value: 'interpolateSpectral', invert: 'always' },\r\n  { name: 'RdYlGn', value: 'interpolateRdYlGn', invert: 'always' },\r\n\r\n  // Sequential (Single Hue)\r\n  { name: 'Blues', value: 'interpolateBlues', invert: 'dark' },\r\n  { name: 'Greens', value: 'interpolateGreens', invert: 'dark' },\r\n  { name: 'Greys', value: 'interpolateGreys', invert: 'dark' },\r\n  { name: 'Oranges', value: 'interpolateOranges', invert: 'dark' },\r\n  { name: 'Purples', value: 'interpolatePurples', invert: 'dark' },\r\n  { name: 'Reds', value: 'interpolateReds', invert: 'dark' },\r\n\r\n  // Sequential (Multi-Hue)\r\n  { name: 'Viridis', value: 'interpolateViridis', invert: 'light' },\r\n  { name: 'Magma', value: 'interpolateMagma', invert: 'light' },\r\n  { name: 'Inferno', value: 'interpolateInferno', invert: 'light' },\r\n  { name: 'Plasma', value: 'interpolatePlasma', invert: 'light' },\r\n  { name: 'Warm', value: 'interpolateWarm', invert: 'light' },\r\n  { name: 'Cool', value: 'interpolateCool', invert: 'light' },\r\n  { name: 'Cubehelix', value: 'interpolateCubehelixDefault', invert: 'light' },\r\n  { name: 'BuGn', value: 'interpolateBuGn', invert: 'dark' },\r\n  { name: 'BuPu', value: 'interpolateBuPu', invert: 'dark' },\r\n  { name: 'GnBu', value: 'interpolateGnBu', invert: 'dark' },\r\n  { name: 'OrRd', value: 'interpolateOrRd', invert: 'dark' },\r\n  { name: 'PuBuGn', value: 'interpolatePuBuGn', invert: 'dark' },\r\n  { name: 'PuBu', value: 'interpolatePuBu', invert: 'dark' },\r\n  { name: 'PuRd', value: 'interpolatePuRd', invert: 'dark' },\r\n  { name: 'RdPu', value: 'interpolateRdPu', invert: 'dark' },\r\n  { name: 'YlGnBu', value: 'interpolateYlGnBu', invert: 'dark' },\r\n  { name: 'YlGn', value: 'interpolateYlGn', invert: 'dark' },\r\n  { name: 'YlOrBr', value: 'interpolateYlOrBr', invert: 'dark' },\r\n  { name: 'YlOrRd', value: 'interpolateYlOrRd', invert: 'dark' },\r\n];\r\n\r\nconst dsSupportHistogramSort = ['prometheus', 'elasticsearch'];\r\n\r\nexport class HeatmapCtrl extends MetricsPanelCtrl {\r\n  static templateUrl = 'module.html';\r\n\r\n  opacityScales: any = [];\r\n  colorModes: any = [];\r\n  colorSchemes: any = [];\r\n  selectionActivated: boolean;\r\n  unitFormats: any;\r\n  data: any;\r\n  series: any;\r\n  timeSrv: any;\r\n  dataWarning: any;\r\n  decimals: number;\r\n  scaledDecimals: number;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, timeSrv) {\r\n    super($scope, $injector);\r\n    this.timeSrv = timeSrv;\r\n    this.selectionActivated = false;\r\n\r\n    _.defaultsDeep(this.panel, panelDefaults);\r\n    this.opacityScales = opacityScales;\r\n    this.colorModes = colorModes;\r\n    this.colorSchemes = colorSchemes;\r\n\r\n    // Bind grafana panel events\r\n    this.events.on('render', this.onRender.bind(this));\r\n    this.events.on('data-received', this.onDataReceived.bind(this));\r\n    this.events.on('data-error', this.onDataError.bind(this));\r\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\r\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n\r\n    this.onCardColorChange = this.onCardColorChange.bind(this);\r\n  }\r\n\r\n  onInitEditMode() {\r\n    this.addEditorTab('Axes', axesEditor, 2);\r\n    this.addEditorTab('Display', heatmapDisplayEditor, 3);\r\n    this.unitFormats = kbn.getUnitFormats();\r\n  }\r\n\r\n  zoomOut(evt) {\r\n    this.publishAppEvent('zoom-out', 2);\r\n  }\r\n\r\n  onRender() {\r\n    if (!this.range) {\r\n      return;\r\n    }\r\n\r\n    if (this.panel.dataFormat === 'tsbuckets') {\r\n      this.convertHistogramToHeatmapData();\r\n    } else {\r\n      this.convertTimeSeriesToHeatmapData();\r\n    }\r\n  }\r\n\r\n  convertTimeSeriesToHeatmapData() {\r\n    let xBucketSize, yBucketSize, bucketsData, heatmapStats;\r\n    const logBase = this.panel.yAxis.logBase;\r\n\r\n    const xBucketNumber = this.panel.xBucketNumber || X_BUCKET_NUMBER_DEFAULT;\r\n    const xBucketSizeByNumber = Math.floor((this.range.to - this.range.from) / xBucketNumber);\r\n\r\n    // Parse X bucket size (number or interval)\r\n    const isIntervalString = kbn.interval_regex.test(this.panel.xBucketSize);\r\n    if (isIntervalString) {\r\n      xBucketSize = kbn.interval_to_ms(this.panel.xBucketSize);\r\n    } else if (\r\n      isNaN(Number(this.panel.xBucketSize)) ||\r\n      this.panel.xBucketSize === '' ||\r\n      this.panel.xBucketSize === null\r\n    ) {\r\n      xBucketSize = xBucketSizeByNumber;\r\n    } else {\r\n      xBucketSize = Number(this.panel.xBucketSize);\r\n    }\r\n\r\n    // Calculate Y bucket size\r\n    heatmapStats = this.parseSeries(this.series);\r\n    const yBucketNumber = this.panel.yBucketNumber || Y_BUCKET_NUMBER_DEFAULT;\r\n    if (logBase !== 1) {\r\n      yBucketSize = this.panel.yAxis.splitFactor;\r\n    } else {\r\n      if (heatmapStats.max === heatmapStats.min) {\r\n        if (heatmapStats.max) {\r\n          yBucketSize = heatmapStats.max / Y_BUCKET_NUMBER_DEFAULT;\r\n        } else {\r\n          yBucketSize = 1;\r\n        }\r\n      } else {\r\n        yBucketSize = (heatmapStats.max - heatmapStats.min) / yBucketNumber;\r\n      }\r\n      yBucketSize = this.panel.yBucketSize || yBucketSize;\r\n    }\r\n\r\n    bucketsData = convertToHeatMap(this.series, yBucketSize, xBucketSize, logBase);\r\n\r\n    // Set default Y range if no data\r\n    if (!heatmapStats.min && !heatmapStats.max) {\r\n      heatmapStats = { min: -1, max: 1, minLog: 1 };\r\n      yBucketSize = 1;\r\n    }\r\n\r\n    const { cards, cardStats } = convertToCards(bucketsData);\r\n\r\n    this.data = {\r\n      buckets: bucketsData,\r\n      heatmapStats: heatmapStats,\r\n      xBucketSize: xBucketSize,\r\n      yBucketSize: yBucketSize,\r\n      cards: cards,\r\n      cardStats: cardStats,\r\n    };\r\n  }\r\n\r\n  convertHistogramToHeatmapData() {\r\n    const panelDatasource = this.getPanelDataSourceType();\r\n    let xBucketSize, yBucketSize, bucketsData, tsBuckets;\r\n\r\n    // Try to sort series by bucket bound, if datasource doesn't do it.\r\n    if (!_.includes(dsSupportHistogramSort, panelDatasource)) {\r\n      this.series.sort(sortSeriesByLabel);\r\n    }\r\n\r\n    // Convert histogram to heatmap. Each histogram bucket represented by the series which name is\r\n    // a top (or bottom, depends of datasource) bucket bound. Further, these values will be used as X axis labels.\r\n    bucketsData = histogramToHeatmap(this.series);\r\n\r\n    tsBuckets = _.map(this.series, 'label');\r\n    const yBucketBound = this.panel.yBucketBound;\r\n    if ((panelDatasource === 'prometheus' && yBucketBound !== 'lower') || yBucketBound === 'upper') {\r\n      // Prometheus labels are upper inclusive bounds, so add empty bottom bucket label.\r\n      tsBuckets = [''].concat(tsBuckets);\r\n    } else {\r\n      // Elasticsearch uses labels as lower bucket bounds, so add empty top bucket label.\r\n      // Use this as a default mode as well.\r\n      tsBuckets.push('');\r\n    }\r\n\r\n    // Calculate bucket size based on heatmap data\r\n    const xBucketBoundSet = _.map(_.keys(bucketsData), key => Number(key));\r\n    xBucketSize = calculateBucketSize(xBucketBoundSet);\r\n    // Always let yBucketSize=1 in 'tsbuckets' mode\r\n    yBucketSize = 1;\r\n\r\n    const { cards, cardStats } = convertToCards(bucketsData);\r\n\r\n    this.data = {\r\n      buckets: bucketsData,\r\n      xBucketSize: xBucketSize,\r\n      yBucketSize: yBucketSize,\r\n      tsBuckets: tsBuckets,\r\n      cards: cards,\r\n      cardStats: cardStats,\r\n    };\r\n  }\r\n\r\n  getPanelDataSourceType() {\r\n    if (this.datasource.meta && this.datasource.meta.id) {\r\n      return this.datasource.meta.id;\r\n    } else {\r\n      return 'unknown';\r\n    }\r\n  }\r\n\r\n  onDataReceived(dataList) {\r\n    this.series = dataList.map(this.seriesHandler.bind(this));\r\n\r\n    this.dataWarning = null;\r\n    const datapointsCount = _.reduce(\r\n      this.series,\r\n      (sum, series) => {\r\n        return sum + series.datapoints.length;\r\n      },\r\n      0\r\n    );\r\n\r\n    if (datapointsCount === 0) {\r\n      this.dataWarning = {\r\n        title: 'No data points',\r\n        tip: 'No datapoints returned from data query',\r\n      };\r\n    } else {\r\n      for (const series of this.series) {\r\n        if (series.isOutsideRange) {\r\n          this.dataWarning = {\r\n            title: 'Data points outside time range',\r\n            tip: 'Can be caused by timezone mismatch or missing time filter in query',\r\n          };\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.render();\r\n  }\r\n\r\n  onDataError() {\r\n    this.series = [];\r\n    this.render();\r\n  }\r\n\r\n  onCardColorChange(newColor) {\r\n    this.panel.color.cardColor = newColor;\r\n    this.render();\r\n  }\r\n\r\n  seriesHandler(seriesData) {\r\n    if (seriesData.datapoints === undefined) {\r\n      throw new Error('Heatmap error: data should be a time series');\r\n    }\r\n\r\n    const series = new TimeSeries({\r\n      datapoints: seriesData.datapoints,\r\n      alias: seriesData.target,\r\n    });\r\n\r\n    series.flotpairs = series.getFlotPairs(this.panel.nullPointMode);\r\n\r\n    const datapoints = seriesData.datapoints || [];\r\n    if (datapoints && datapoints.length > 0) {\r\n      const last = datapoints[datapoints.length - 1][1];\r\n      const from = this.range.from;\r\n      if (last - from < -10000) {\r\n        series.isOutsideRange = true;\r\n      }\r\n    }\r\n\r\n    return series;\r\n  }\r\n\r\n  parseSeries(series) {\r\n    const min = _.min(_.map(series, s => s.stats.min));\r\n    const minLog = _.min(_.map(series, s => s.stats.logmin));\r\n    const max = _.max(_.map(series, s => s.stats.max));\r\n\r\n    return {\r\n      max: max,\r\n      min: min,\r\n      minLog: minLog,\r\n    };\r\n  }\r\n\r\n  parseHistogramSeries(series) {\r\n    const bounds = _.map(series, s => Number(s.alias));\r\n    const min = _.min(bounds);\r\n    const minLog = _.min(bounds);\r\n    const max = _.max(bounds);\r\n\r\n    return {\r\n      max: max,\r\n      min: min,\r\n      minLog: minLog,\r\n    };\r\n  }\r\n\r\n  link(scope, elem, attrs, ctrl) {\r\n    rendering(scope, elem, attrs, ctrl);\r\n  }\r\n}\r\n","import './color_legend';\r\nimport { HeatmapCtrl } from './heatmap_ctrl';\r\n\r\nexport { HeatmapCtrl as PanelCtrl };\r\n","import _ from 'lodash';\r\nimport flatten from '../../../core/utils/flatten';\r\nimport TimeSeries from '../../../core/time_series2';\r\nimport TableModel from '../../../core/table_model';\r\n\r\nconst transformers = {};\r\n\r\ntransformers['timeseries_to_rows'] = {\r\n  description: 'Time series to rows',\r\n  getColumns: () => {\r\n    return [];\r\n  },\r\n  transform: (data, panel, model) => {\r\n    model.columns = [{ text: 'Time', type: 'date' }, { text: 'Metric' }, { text: 'Value' }];\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n      const series = data[i];\r\n      for (let y = 0; y < series.datapoints.length; y++) {\r\n        const dp = series.datapoints[y];\r\n        model.rows.push([dp[1], series.target, dp[0]]);\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\ntransformers['timeseries_to_columns'] = {\r\n  description: 'Time series to columns',\r\n  getColumns: () => {\r\n    return [];\r\n  },\r\n  transform: (data, panel, model) => {\r\n    model.columns.push({ text: 'Time', type: 'date' });\r\n\r\n    // group by time\r\n    const points = {};\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n      const series = data[i];\r\n      model.columns.push({ text: series.target });\r\n\r\n      for (let y = 0; y < series.datapoints.length; y++) {\r\n        const dp = series.datapoints[y];\r\n        const timeKey = dp[1].toString();\r\n\r\n        if (!points[timeKey]) {\r\n          points[timeKey] = { time: dp[1] };\r\n          points[timeKey][i] = dp[0];\r\n        } else {\r\n          points[timeKey][i] = dp[0];\r\n        }\r\n      }\r\n    }\r\n\r\n    for (const time in points) {\r\n      const point = points[time];\r\n      const values = [point.time];\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        const value = point[i];\r\n        values.push(value);\r\n      }\r\n\r\n      model.rows.push(values);\r\n    }\r\n  },\r\n};\r\n\r\ntransformers['timeseries_aggregations'] = {\r\n  description: 'Time series aggregations',\r\n  getColumns: () => {\r\n    return [\r\n      { text: 'Avg', value: 'avg' },\r\n      { text: 'Min', value: 'min' },\r\n      { text: 'Max', value: 'max' },\r\n      { text: 'Total', value: 'total' },\r\n      { text: 'Current', value: 'current' },\r\n      { text: 'Count', value: 'count' },\r\n    ];\r\n  },\r\n  transform: (data, panel, model) => {\r\n    let i, y;\r\n    model.columns.push({ text: 'Metric' });\r\n\r\n    for (i = 0; i < panel.columns.length; i++) {\r\n      model.columns.push({ text: panel.columns[i].text });\r\n    }\r\n\r\n    for (i = 0; i < data.length; i++) {\r\n      const series = new TimeSeries({\r\n        datapoints: data[i].datapoints,\r\n        alias: data[i].target,\r\n      });\r\n\r\n      series.getFlotPairs('connected');\r\n      const cells = [series.alias];\r\n\r\n      for (y = 0; y < panel.columns.length; y++) {\r\n        cells.push(series.stats[panel.columns[y].value]);\r\n      }\r\n\r\n      model.rows.push(cells);\r\n    }\r\n  },\r\n};\r\n\r\ntransformers['annotations'] = {\r\n  description: 'Annotations',\r\n  getColumns: () => {\r\n    return [];\r\n  },\r\n  transform: (data, panel, model) => {\r\n    model.columns.push({ text: 'Time', type: 'date' });\r\n    model.columns.push({ text: 'Title' });\r\n    model.columns.push({ text: 'Text' });\r\n    model.columns.push({ text: 'Tags' });\r\n\r\n    if (!data || !data.annotations || data.annotations.length === 0) {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0; i < data.annotations.length; i++) {\r\n      const evt = data.annotations[i];\r\n      model.rows.push([evt.time, evt.title, evt.text, evt.tags]);\r\n    }\r\n  },\r\n};\r\n\r\ntransformers['table'] = {\r\n  description: 'Table',\r\n  getColumns: data => {\r\n    if (!data || data.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Single query returns data columns as is\r\n    if (data.length === 1) {\r\n      return [...data[0].columns];\r\n    }\r\n\r\n    // Track column indexes: name -> index\r\n    const columnNames = {};\r\n\r\n    // Union of all columns\r\n    const columns = data.reduce((acc, series) => {\r\n      series.columns.forEach(col => {\r\n        const { text } = col;\r\n        if (columnNames[text] === undefined) {\r\n          columnNames[text] = acc.length;\r\n          acc.push(col);\r\n        }\r\n      });\r\n      return acc;\r\n    }, []);\r\n\r\n    return columns;\r\n  },\r\n  transform: (data, panel, model) => {\r\n    if (!data || data.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const noTableIndex = _.findIndex(data, d => d.type !== 'table');\r\n    if (noTableIndex > -1) {\r\n      throw {\r\n        message: `Result of query #${String.fromCharCode(\r\n          65 + noTableIndex\r\n        )} is not in table format, try using another transform.`,\r\n      };\r\n    }\r\n\r\n    // Single query returns data columns and rows as is\r\n    if (data.length === 1) {\r\n      model.columns = [...data[0].columns];\r\n      model.rows = [...data[0].rows];\r\n      return;\r\n    }\r\n\r\n    // Track column indexes of union: name -> index\r\n    const columnNames = {};\r\n\r\n    // Union of all non-value columns\r\n    const columnsUnion = data.reduce((acc, series) => {\r\n      series.columns.forEach(col => {\r\n        const { text } = col;\r\n        if (columnNames[text] === undefined) {\r\n          columnNames[text] = acc.length;\r\n          acc.push(col);\r\n        }\r\n      });\r\n      return acc;\r\n    }, []);\r\n\r\n    // Map old column index to union index per series, e.g.,\r\n    // given columnNames {A: 0, B: 1} and\r\n    // data [{columns: [{ text: 'A' }]}, {columns: [{ text: 'B' }]}] => [[0], [1]]\r\n    const columnIndexMapper = data.map(series => series.columns.map(col => columnNames[col.text]));\r\n\r\n    // Flatten rows of all series and adjust new column indexes\r\n    const flattenedRows = data.reduce((acc, series, seriesIndex) => {\r\n      const mapper = columnIndexMapper[seriesIndex];\r\n      series.rows.forEach(row => {\r\n        const alteredRow = [];\r\n        // Shifting entries according to index mapper\r\n        mapper.forEach((to, from) => {\r\n          alteredRow[to] = row[from];\r\n        });\r\n        acc.push(alteredRow);\r\n      });\r\n      return acc;\r\n    }, []);\r\n\r\n    // Returns true if both rows have matching non-empty fields as well as matching\r\n    // indexes where one field is empty and the other is not\r\n    function areRowsMatching(columns, row, otherRow) {\r\n      let foundFieldToMatch = false;\r\n      for (let columnIndex = 0; columnIndex < columns.length; columnIndex++) {\r\n        if (row[columnIndex] !== undefined && otherRow[columnIndex] !== undefined) {\r\n          if (row[columnIndex] !== otherRow[columnIndex]) {\r\n            return false;\r\n          }\r\n        } else if (row[columnIndex] === undefined || otherRow[columnIndex] === undefined) {\r\n          foundFieldToMatch = true;\r\n        }\r\n      }\r\n      return foundFieldToMatch;\r\n    }\r\n\r\n    // Merge rows that have same values for columns\r\n    const mergedRows = {};\r\n    const compactedRows = flattenedRows.reduce((acc, row, rowIndex) => {\r\n      if (!mergedRows[rowIndex]) {\r\n        // Look from current row onwards\r\n        let offset = rowIndex + 1;\r\n        // More than one row can be merged into current row\r\n        while (offset < flattenedRows.length) {\r\n          // Find next row that could be merged\r\n          const match = _.findIndex(flattenedRows, otherRow => areRowsMatching(columnsUnion, row, otherRow), offset);\r\n          if (match > -1) {\r\n            const matchedRow = flattenedRows[match];\r\n            // Merge values from match into current row if there is a gap in the current row\r\n            for (let columnIndex = 0; columnIndex < columnsUnion.length; columnIndex++) {\r\n              if (row[columnIndex] === undefined && matchedRow[columnIndex] !== undefined) {\r\n                row[columnIndex] = matchedRow[columnIndex];\r\n              }\r\n            }\r\n            // Don't visit this row again\r\n            mergedRows[match] = matchedRow;\r\n            // Keep looking for more rows to merge\r\n            offset = match + 1;\r\n          } else {\r\n            // No match found, stop looking\r\n            break;\r\n          }\r\n        }\r\n        acc.push(row);\r\n      }\r\n      return acc;\r\n    }, []);\r\n\r\n    model.columns = columnsUnion;\r\n    model.rows = compactedRows;\r\n  },\r\n};\r\n\r\ntransformers['json'] = {\r\n  description: 'JSON Data',\r\n  getColumns: data => {\r\n    if (!data || data.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const names: any = {};\r\n    for (let i = 0; i < data.length; i++) {\r\n      const series = data[i];\r\n      if (series.type !== 'docs') {\r\n        continue;\r\n      }\r\n\r\n      // only look at 100 docs\r\n      const maxDocs = Math.min(series.datapoints.length, 100);\r\n      for (let y = 0; y < maxDocs; y++) {\r\n        const doc = series.datapoints[y];\r\n        const flattened = flatten(doc, null);\r\n        for (const propName in flattened) {\r\n          names[propName] = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    return _.map(names, (value, key) => {\r\n      return { text: key, value: key };\r\n    });\r\n  },\r\n  transform: (data, panel, model) => {\r\n    let i, y, z;\r\n\r\n    for (const column of panel.columns) {\r\n      const tableCol: any = { text: column.text };\r\n\r\n      // if filterable data then set columns to filterable\r\n      if (data.length > 0 && data[0].filterable) {\r\n        tableCol.filterable = true;\r\n      }\r\n\r\n      model.columns.push(tableCol);\r\n    }\r\n\r\n    if (model.columns.length === 0) {\r\n      model.columns.push({ text: 'JSON' });\r\n    }\r\n\r\n    for (i = 0; i < data.length; i++) {\r\n      const series = data[i];\r\n\r\n      for (y = 0; y < series.datapoints.length; y++) {\r\n        const dp = series.datapoints[y];\r\n        const values = [];\r\n\r\n        if (_.isObject(dp) && panel.columns.length > 0) {\r\n          const flattened = flatten(dp, null);\r\n          for (z = 0; z < panel.columns.length; z++) {\r\n            values.push(flattened[panel.columns[z].value]);\r\n          }\r\n        } else {\r\n          values.push(JSON.stringify(dp));\r\n        }\r\n\r\n        model.rows.push(values);\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\nfunction transformDataToTable(data, panel) {\r\n  const model = new TableModel();\r\n\r\n  if (!data || data.length === 0) {\r\n    return model;\r\n  }\r\n\r\n  const transformer = transformers[panel.transform];\r\n  if (!transformer) {\r\n    throw { message: 'Transformer ' + panel.transform + ' not found' };\r\n  }\r\n\r\n  transformer.transform(data, panel, model);\r\n  return model;\r\n}\r\n\r\nexport { transformers, transformDataToTable };\r\n","import _ from 'lodash';\r\nimport { transformers } from './transformers';\r\n\r\nexport class TablePanelEditorCtrl {\r\n  panel: any;\r\n  panelCtrl: any;\r\n  transformers: any;\r\n  fontSizes: any;\r\n  addColumnSegment: any;\r\n  getColumnNames: any;\r\n  canSetColumns: boolean;\r\n  columnsHelpMessage: string;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, private $q, private uiSegmentSrv) {\r\n    $scope.editor = this;\r\n    this.panelCtrl = $scope.ctrl;\r\n    this.panel = this.panelCtrl.panel;\r\n    this.transformers = transformers;\r\n    this.fontSizes = ['80%', '90%', '100%', '110%', '120%', '130%', '150%', '160%', '180%', '200%', '220%', '250%'];\r\n    this.addColumnSegment = uiSegmentSrv.newPlusButton();\r\n    this.updateTransformHints();\r\n  }\r\n\r\n  updateTransformHints() {\r\n    this.canSetColumns = false;\r\n    this.columnsHelpMessage = '';\r\n\r\n    switch (this.panel.transform) {\r\n      case 'timeseries_aggregations': {\r\n        this.canSetColumns = true;\r\n        break;\r\n      }\r\n      case 'json': {\r\n        this.canSetColumns = true;\r\n        break;\r\n      }\r\n      case 'table': {\r\n        this.columnsHelpMessage = 'Columns and their order are determined by the data query';\r\n      }\r\n    }\r\n  }\r\n\r\n  getColumnOptions() {\r\n    if (!this.panelCtrl.dataRaw) {\r\n      return this.$q.when([]);\r\n    }\r\n    const columns = this.transformers[this.panel.transform].getColumns(this.panelCtrl.dataRaw);\r\n    const segments = _.map(columns, (c: any) => this.uiSegmentSrv.newSegment({ value: c.text }));\r\n    return this.$q.when(segments);\r\n  }\r\n\r\n  addColumn() {\r\n    const columns = transformers[this.panel.transform].getColumns(this.panelCtrl.dataRaw);\r\n    const column = _.find(columns, { text: this.addColumnSegment.value });\r\n\r\n    if (column) {\r\n      this.panel.columns.push(column);\r\n      this.render();\r\n    }\r\n\r\n    const plusButton = this.uiSegmentSrv.newPlusButton();\r\n    this.addColumnSegment.html = plusButton.html;\r\n    this.addColumnSegment.value = plusButton.value;\r\n  }\r\n\r\n  transformChanged() {\r\n    this.panel.columns = [];\r\n    if (this.panel.transform === 'timeseries_aggregations') {\r\n      this.panel.columns.push({ text: 'Avg', value: 'avg' });\r\n    }\r\n\r\n    this.updateTransformHints();\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  removeColumn(column) {\r\n    this.panel.columns = _.without(this.panel.columns, column);\r\n    this.panelCtrl.render();\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function tablePanelEditor($q, uiSegmentSrv) {\r\n  'use strict';\r\n  return {\r\n    restrict: 'E',\r\n    scope: true,\r\n    templateUrl: 'public/app/plugins/panel/table/editor.html',\r\n    controller: TablePanelEditorCtrl,\r\n  };\r\n}\r\n","import _ from 'lodash';\r\nimport kbn from 'app/core/utils/kbn';\r\n\r\nexport class ColumnOptionsCtrl {\r\n  panel: any;\r\n  panelCtrl: any;\r\n  colorModes: any;\r\n  columnStyles: any;\r\n  columnTypes: any;\r\n  fontSizes: any;\r\n  dateFormats: any;\r\n  addColumnSegment: any;\r\n  unitFormats: any;\r\n  getColumnNames: any;\r\n  activeStyleIndex: number;\r\n  mappingTypes: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope) {\r\n    $scope.editor = this;\r\n\r\n    this.activeStyleIndex = 0;\r\n    this.panelCtrl = $scope.ctrl;\r\n    this.panel = this.panelCtrl.panel;\r\n    this.unitFormats = kbn.getUnitFormats();\r\n    this.colorModes = [\r\n      { text: 'Disabled', value: null },\r\n      { text: 'Cell', value: 'cell' },\r\n      { text: 'Value', value: 'value' },\r\n      { text: 'Row', value: 'row' },\r\n    ];\r\n    this.columnTypes = [\r\n      { text: 'Number', value: 'number' },\r\n      { text: 'String', value: 'string' },\r\n      { text: 'Date', value: 'date' },\r\n      { text: 'Hidden', value: 'hidden' },\r\n    ];\r\n    this.fontSizes = ['80%', '90%', '100%', '110%', '120%', '130%', '150%', '160%', '180%', '200%', '220%', '250%'];\r\n    this.dateFormats = [\r\n      { text: 'YYYY-MM-DD HH:mm:ss', value: 'YYYY-MM-DD HH:mm:ss' },\r\n      { text: 'YYYY-MM-DD HH:mm:ss.SSS', value: 'YYYY-MM-DD HH:mm:ss.SSS' },\r\n      { text: 'MM/DD/YY h:mm:ss a', value: 'MM/DD/YY h:mm:ss a' },\r\n      { text: 'MMMM D, YYYY LT', value: 'MMMM D, YYYY LT' },\r\n    ];\r\n    this.mappingTypes = [{ text: 'Value to text', value: 1 }, { text: 'Range to text', value: 2 }];\r\n\r\n    this.getColumnNames = () => {\r\n      if (!this.panelCtrl.table) {\r\n        return [];\r\n      }\r\n      return _.map(this.panelCtrl.table.columns, (col: any) => {\r\n        return col.text;\r\n      });\r\n    };\r\n\r\n    this.onColorChange = this.onColorChange.bind(this);\r\n  }\r\n\r\n  render() {\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  setUnitFormat(column, subItem) {\r\n    column.unit = subItem.value;\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  addColumnStyle() {\r\n    const newStyleRule = {\r\n      unit: 'short',\r\n      type: 'number',\r\n      alias: '',\r\n      decimals: 2,\r\n      colors: ['rgba(245, 54, 54, 0.9)', 'rgba(237, 129, 40, 0.89)', 'rgba(50, 172, 45, 0.97)'],\r\n      colorMode: null,\r\n      pattern: '',\r\n      dateFormat: 'YYYY-MM-DD HH:mm:ss',\r\n      thresholds: [],\r\n      mappingType: 1,\r\n    };\r\n\r\n    const styles = this.panel.styles;\r\n    const stylesCount = styles.length;\r\n    let indexToInsert = stylesCount;\r\n\r\n    // check if last is a catch all rule, then add it before that one\r\n    if (stylesCount > 0) {\r\n      const last = styles[stylesCount - 1];\r\n      if (last.pattern === '/.*/') {\r\n        indexToInsert = stylesCount - 1;\r\n      }\r\n    }\r\n\r\n    styles.splice(indexToInsert, 0, newStyleRule);\r\n    this.activeStyleIndex = indexToInsert;\r\n  }\r\n\r\n  removeColumnStyle(style) {\r\n    this.panel.styles = _.without(this.panel.styles, style);\r\n  }\r\n\r\n  invertColorOrder(index) {\r\n    const ref = this.panel.styles[index].colors;\r\n    const copy = ref[0];\r\n    ref[0] = ref[2];\r\n    ref[2] = copy;\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  onColorChange(styleIndex, colorIndex) {\r\n    return newColor => {\r\n      this.panel.styles[styleIndex].colors[colorIndex] = newColor;\r\n      this.render();\r\n    };\r\n  }\r\n\r\n  addValueMap(style) {\r\n    if (!style.valueMaps) {\r\n      style.valueMaps = [];\r\n    }\r\n    style.valueMaps.push({ value: '', text: '' });\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  removeValueMap(style, index) {\r\n    style.valueMaps.splice(index, 1);\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  addRangeMap(style) {\r\n    if (!style.rangeMaps) {\r\n      style.rangeMaps = [];\r\n    }\r\n    style.rangeMaps.push({ from: '', to: '', text: '' });\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  removeRangeMap(style, index) {\r\n    style.rangeMaps.splice(index, 1);\r\n    this.panelCtrl.render();\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function columnOptionsTab($q, uiSegmentSrv) {\r\n  'use strict';\r\n  return {\r\n    restrict: 'E',\r\n    scope: true,\r\n    templateUrl: 'public/app/plugins/panel/table/column_options.html',\r\n    controller: ColumnOptionsCtrl,\r\n  };\r\n}\r\n","import _ from 'lodash';\r\nimport moment from 'moment';\r\nimport kbn from 'app/core/utils/kbn';\r\n\r\nexport class TableRenderer {\r\n  formatters: any[];\r\n  colorState: any;\r\n\r\n  constructor(private panel, private table, private isUtc, private sanitize, private templateSrv) {\r\n    this.initColumns();\r\n  }\r\n\r\n  setTable(table) {\r\n    this.table = table;\r\n\r\n    this.initColumns();\r\n  }\r\n\r\n  initColumns() {\r\n    this.formatters = [];\r\n    this.colorState = {};\r\n\r\n    for (let colIndex = 0; colIndex < this.table.columns.length; colIndex++) {\r\n      const column = this.table.columns[colIndex];\r\n      column.title = column.text;\r\n\r\n      for (let i = 0; i < this.panel.styles.length; i++) {\r\n        const style = this.panel.styles[i];\r\n\r\n        const regex = kbn.stringToJsRegex(style.pattern);\r\n        if (column.text.match(regex)) {\r\n          column.style = style;\r\n\r\n          if (style.alias) {\r\n            column.title = column.text.replace(regex, style.alias);\r\n          }\r\n\r\n          break;\r\n        }\r\n      }\r\n\r\n      this.formatters[colIndex] = this.createColumnFormatter(column);\r\n    }\r\n  }\r\n\r\n  getColorForValue(value, style) {\r\n    if (!style.thresholds) {\r\n      return null;\r\n    }\r\n    for (let i = style.thresholds.length; i > 0; i--) {\r\n      if (value >= style.thresholds[i - 1]) {\r\n        return style.colors[i];\r\n      }\r\n    }\r\n    return _.first(style.colors);\r\n  }\r\n\r\n  defaultCellFormatter(v, style) {\r\n    if (v === null || v === void 0 || v === undefined) {\r\n      return '';\r\n    }\r\n\r\n    if (_.isArray(v)) {\r\n      v = v.join(', ');\r\n    }\r\n\r\n    if (style && style.sanitize) {\r\n      return this.sanitize(v);\r\n    } else {\r\n      return _.escape(v);\r\n    }\r\n  }\r\n\r\n  createColumnFormatter(column) {\r\n    if (!column.style) {\r\n      return this.defaultCellFormatter;\r\n    }\r\n\r\n    if (column.style.type === 'hidden') {\r\n      return v => {\r\n        return undefined;\r\n      };\r\n    }\r\n\r\n    if (column.style.type === 'date') {\r\n      return v => {\r\n        if (v === undefined || v === null) {\r\n          return '-';\r\n        }\r\n\r\n        if (_.isArray(v)) {\r\n          v = v[0];\r\n        }\r\n        let date = moment(v);\r\n        if (this.isUtc) {\r\n          date = date.utc();\r\n        }\r\n        return date.format(column.style.dateFormat);\r\n      };\r\n    }\r\n\r\n    if (column.style.type === 'string') {\r\n      return v => {\r\n        if (_.isArray(v)) {\r\n          v = v.join(', ');\r\n        }\r\n\r\n        const mappingType = column.style.mappingType || 0;\r\n\r\n        if (mappingType === 1 && column.style.valueMaps) {\r\n          for (let i = 0; i < column.style.valueMaps.length; i++) {\r\n            const map = column.style.valueMaps[i];\r\n\r\n            if (v === null) {\r\n              if (map.value === 'null') {\r\n                return map.text;\r\n              }\r\n              continue;\r\n            }\r\n\r\n            // Allow both numeric and string values to be mapped\r\n            if ((!_.isString(v) && Number(map.value) === Number(v)) || map.value === v) {\r\n              this.setColorState(v, column.style);\r\n              return this.defaultCellFormatter(map.text, column.style);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (mappingType === 2 && column.style.rangeMaps) {\r\n          for (let i = 0; i < column.style.rangeMaps.length; i++) {\r\n            const map = column.style.rangeMaps[i];\r\n\r\n            if (v === null) {\r\n              if (map.from === 'null' && map.to === 'null') {\r\n                return map.text;\r\n              }\r\n              continue;\r\n            }\r\n\r\n            if (Number(map.from) <= Number(v) && Number(map.to) >= Number(v)) {\r\n              this.setColorState(v, column.style);\r\n              return this.defaultCellFormatter(map.text, column.style);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (v === null || v === void 0) {\r\n          return '-';\r\n        }\r\n\r\n        this.setColorState(v, column.style);\r\n        return this.defaultCellFormatter(v, column.style);\r\n      };\r\n    }\r\n\r\n    if (column.style.type === 'number') {\r\n      const valueFormatter = kbn.valueFormats[column.unit || column.style.unit];\r\n\r\n      return v => {\r\n        if (v === null || v === void 0) {\r\n          return '-';\r\n        }\r\n\r\n        if (_.isString(v) || _.isArray(v)) {\r\n          return this.defaultCellFormatter(v, column.style);\r\n        }\r\n\r\n        this.setColorState(v, column.style);\r\n        return valueFormatter(v, column.style.decimals, null);\r\n      };\r\n    }\r\n\r\n    return value => {\r\n      return this.defaultCellFormatter(value, column.style);\r\n    };\r\n  }\r\n\r\n  setColorState(value, style) {\r\n    if (!style.colorMode) {\r\n      return;\r\n    }\r\n\r\n    if (value === null || value === void 0 || _.isArray(value)) {\r\n      return;\r\n    }\r\n\r\n    const numericValue = Number(value);\r\n    if (isNaN(numericValue)) {\r\n      return;\r\n    }\r\n\r\n    this.colorState[style.colorMode] = this.getColorForValue(numericValue, style);\r\n  }\r\n\r\n  renderRowVariables(rowIndex) {\r\n    const scopedVars = {};\r\n    let cellVariable;\r\n    const row = this.table.rows[rowIndex];\r\n    for (let i = 0; i < row.length; i++) {\r\n      cellVariable = `__cell_${i}`;\r\n      scopedVars[cellVariable] = { value: row[i] };\r\n    }\r\n    return scopedVars;\r\n  }\r\n\r\n  formatColumnValue(colIndex, value) {\r\n    return this.formatters[colIndex] ? this.formatters[colIndex](value) : value;\r\n  }\r\n\r\n  renderCell(columnIndex, rowIndex, value, addWidthHack = false) {\r\n    value = this.formatColumnValue(columnIndex, value);\r\n\r\n    const column = this.table.columns[columnIndex];\r\n    let style = '';\r\n    const cellClasses = [];\r\n    let cellClass = '';\r\n\r\n    if (this.colorState.cell) {\r\n      style = ' style=\"background-color:' + this.colorState.cell + '\"';\r\n      cellClasses.push('table-panel-color-cell');\r\n      this.colorState.cell = null;\r\n    } else if (this.colorState.value) {\r\n      style = ' style=\"color:' + this.colorState.value + '\"';\r\n      this.colorState.value = null;\r\n    }\r\n    // because of the fixed table headers css only solution\r\n    // there is an issue if header cell is wider the cell\r\n    // this hack adds header content to cell (not visible)\r\n    let columnHtml = '';\r\n    if (addWidthHack) {\r\n      columnHtml = '<div class=\"table-panel-width-hack\">' + this.table.columns[columnIndex].title + '</div>';\r\n    }\r\n\r\n    if (value === undefined) {\r\n      style = ' style=\"display:none;\"';\r\n      column.hidden = true;\r\n    } else {\r\n      column.hidden = false;\r\n    }\r\n\r\n    if (column.hidden === true) {\r\n      return '';\r\n    }\r\n\r\n    if (column.style && column.style.preserveFormat) {\r\n      cellClasses.push('table-panel-cell-pre');\r\n    }\r\n\r\n    if (column.style && column.style.link) {\r\n      // Render cell as link\r\n      const scopedVars = this.renderRowVariables(rowIndex);\r\n      scopedVars['__cell'] = { value: value };\r\n\r\n      const cellLink = this.templateSrv.replace(column.style.linkUrl, scopedVars, encodeURIComponent);\r\n      const cellLinkTooltip = this.templateSrv.replace(column.style.linkTooltip, scopedVars);\r\n      const cellTarget = column.style.linkTargetBlank ? '_blank' : '';\r\n\r\n      cellClasses.push('table-panel-cell-link');\r\n\r\n      columnHtml += `\r\n        <a href=\"${cellLink}\" target=\"${cellTarget}\" data-link-tooltip data-original-title=\"${cellLinkTooltip}\" data-placement=\"right\"${style}>\r\n          ${value}\r\n        </a>\r\n      `;\r\n    } else {\r\n      columnHtml += value;\r\n    }\r\n\r\n    if (column.filterable) {\r\n      cellClasses.push('table-panel-cell-filterable');\r\n      columnHtml += `\r\n        <a class=\"table-panel-filter-link\" data-link-tooltip data-original-title=\"Filter out value\" data-placement=\"bottom\"\r\n           data-row=\"${rowIndex}\" data-column=\"${columnIndex}\" data-operator=\"!=\">\r\n          <i class=\"fa fa-search-minus\"></i>\r\n        </a>\r\n        <a class=\"table-panel-filter-link\" data-link-tooltip data-original-title=\"Filter for value\" data-placement=\"bottom\"\r\n           data-row=\"${rowIndex}\" data-column=\"${columnIndex}\" data-operator=\"=\">\r\n          <i class=\"fa fa-search-plus\"></i>\r\n        </a>`;\r\n    }\r\n\r\n    if (cellClasses.length) {\r\n      cellClass = ' class=\"' + cellClasses.join(' ') + '\"';\r\n    }\r\n\r\n    columnHtml = '<td' + cellClass + style + '>' + columnHtml + '</td>';\r\n    return columnHtml;\r\n  }\r\n\r\n  render(page) {\r\n    const pageSize = this.panel.pageSize || 100;\r\n    const startPos = page * pageSize;\r\n    const endPos = Math.min(startPos + pageSize, this.table.rows.length);\r\n    let html = '';\r\n    const rowClasses = [];\r\n    let rowClass = '';\r\n\r\n    for (let y = startPos; y < endPos; y++) {\r\n      const row = this.table.rows[y];\r\n      let cellHtml = '';\r\n      let rowStyle = '';\r\n      for (let i = 0; i < this.table.columns.length; i++) {\r\n        cellHtml += this.renderCell(i, y, row[i], y === startPos);\r\n      }\r\n\r\n      if (this.colorState.row) {\r\n        rowStyle = ' style=\"background-color:' + this.colorState.row + '\"';\r\n        rowClasses.push('table-panel-color-row');\r\n        this.colorState.row = null;\r\n      }\r\n\r\n      if (rowClasses.length) {\r\n        rowClass = ' class=\"' + rowClasses.join(' ') + '\"';\r\n      }\r\n\r\n      html += '<tr ' + rowClass + rowStyle + '>' + cellHtml + '</tr>';\r\n    }\r\n\r\n    return html;\r\n  }\r\n\r\n  render_values() {\r\n    const rows = [];\r\n\r\n    for (let y = 0; y < this.table.rows.length; y++) {\r\n      const row = this.table.rows[y];\r\n      const newRow = [];\r\n      for (let i = 0; i < this.table.columns.length; i++) {\r\n        newRow.push(this.formatColumnValue(i, row[i]));\r\n      }\r\n      rows.push(newRow);\r\n    }\r\n    return {\r\n      columns: this.table.columns,\r\n      rows: rows,\r\n    };\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport { MetricsPanelCtrl } from 'app/plugins/sdk';\r\nimport { transformDataToTable } from './transformers';\r\nimport { tablePanelEditor } from './editor';\r\nimport { columnOptionsTab } from './column_options';\r\nimport { TableRenderer } from './renderer';\r\n\r\nclass TablePanelCtrl extends MetricsPanelCtrl {\r\n  static templateUrl = 'module.html';\r\n\r\n  pageIndex: number;\r\n  dataRaw: any;\r\n  table: any;\r\n  renderer: any;\r\n\r\n  panelDefaults = {\r\n    targets: [{}],\r\n    transform: 'timeseries_to_columns',\r\n    pageSize: null,\r\n    showHeader: true,\r\n    styles: [\r\n      {\r\n        type: 'date',\r\n        pattern: 'Time',\r\n        alias: 'Time',\r\n        dateFormat: 'YYYY-MM-DD HH:mm:ss',\r\n      },\r\n      {\r\n        unit: 'short',\r\n        type: 'number',\r\n        alias: '',\r\n        decimals: 2,\r\n        colors: ['rgba(245, 54, 54, 0.9)', 'rgba(237, 129, 40, 0.89)', 'rgba(50, 172, 45, 0.97)'],\r\n        colorMode: null,\r\n        pattern: '/.*/',\r\n        thresholds: [],\r\n      },\r\n    ],\r\n    columns: [],\r\n    scroll: true,\r\n    fontSize: '100%',\r\n    sort: { col: 0, desc: true },\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, templateSrv, private annotationsSrv, private $sanitize, private variableSrv) {\r\n    super($scope, $injector);\r\n\r\n    this.pageIndex = 0;\r\n\r\n    if (this.panel.styles === void 0) {\r\n      this.panel.styles = this.panel.columns;\r\n      this.panel.columns = this.panel.fields;\r\n      delete this.panel.columns;\r\n      delete this.panel.fields;\r\n    }\r\n\r\n    _.defaults(this.panel, this.panelDefaults);\r\n\r\n    this.events.on('data-received', this.onDataReceived.bind(this));\r\n    this.events.on('data-error', this.onDataError.bind(this));\r\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\r\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n    this.events.on('init-panel-actions', this.onInitPanelActions.bind(this));\r\n  }\r\n\r\n  onInitEditMode() {\r\n    this.addEditorTab('Options', tablePanelEditor, 2);\r\n    this.addEditorTab('Column Styles', columnOptionsTab, 3);\r\n  }\r\n\r\n  onInitPanelActions(actions) {\r\n    actions.push({ text: 'Export CSV', click: 'ctrl.exportCsv()' });\r\n  }\r\n\r\n  issueQueries(datasource) {\r\n    this.pageIndex = 0;\r\n\r\n    if (this.panel.transform === 'annotations') {\r\n      this.setTimeQueryStart();\r\n      return this.annotationsSrv\r\n        .getAnnotations({\r\n          dashboard: this.dashboard,\r\n          panel: this.panel,\r\n          range: this.range,\r\n        })\r\n        .then(annotations => {\r\n          return { data: annotations };\r\n        });\r\n    }\r\n\r\n    return super.issueQueries(datasource);\r\n  }\r\n\r\n  onDataError(err) {\r\n    this.dataRaw = [];\r\n    this.render();\r\n  }\r\n\r\n  onDataReceived(dataList) {\r\n    this.dataRaw = dataList;\r\n    this.pageIndex = 0;\r\n\r\n    // automatically correct transform mode based on data\r\n    if (this.dataRaw && this.dataRaw.length) {\r\n      if (this.dataRaw[0].type === 'table') {\r\n        this.panel.transform = 'table';\r\n      } else {\r\n        if (this.dataRaw[0].type === 'docs') {\r\n          this.panel.transform = 'json';\r\n        } else {\r\n          if (this.panel.transform === 'table' || this.panel.transform === 'json') {\r\n            this.panel.transform = 'timeseries_to_rows';\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    this.table = transformDataToTable(this.dataRaw, this.panel);\r\n    this.table.sort(this.panel.sort);\r\n\r\n    this.renderer = new TableRenderer(\r\n      this.panel,\r\n      this.table,\r\n      this.dashboard.isTimezoneUtc(),\r\n      this.$sanitize,\r\n      this.templateSrv\r\n    );\r\n\r\n    return super.render(this.table);\r\n  }\r\n\r\n  toggleColumnSort(col, colIndex) {\r\n    // remove sort flag from current column\r\n    if (this.table.columns[this.panel.sort.col]) {\r\n      this.table.columns[this.panel.sort.col].sort = false;\r\n    }\r\n\r\n    if (this.panel.sort.col === colIndex) {\r\n      if (this.panel.sort.desc) {\r\n        this.panel.sort.desc = false;\r\n      } else {\r\n        this.panel.sort.col = null;\r\n      }\r\n    } else {\r\n      this.panel.sort.col = colIndex;\r\n      this.panel.sort.desc = true;\r\n    }\r\n    this.render();\r\n  }\r\n\r\n  moveQuery(target, direction) {\r\n    super.moveQuery(target, direction);\r\n    super.refresh();\r\n  }\r\n\r\n  exportCsv() {\r\n    const scope = this.$scope.$new(true);\r\n    scope.tableData = this.renderer.render_values();\r\n    scope.panel = 'table';\r\n    this.publishAppEvent('show-modal', {\r\n      templateHtml: '<export-data-modal panel=\"panel\" data=\"tableData\"></export-data-modal>',\r\n      scope,\r\n      modalClass: 'modal--narrow',\r\n    });\r\n  }\r\n\r\n  link(scope, elem, attrs, ctrl: TablePanelCtrl) {\r\n    let data;\r\n    const panel = ctrl.panel;\r\n    let pageCount = 0;\r\n\r\n    function getTableHeight() {\r\n      let panelHeight = ctrl.height;\r\n\r\n      if (pageCount > 1) {\r\n        panelHeight -= 26;\r\n      }\r\n\r\n      return panelHeight - 31 + 'px';\r\n    }\r\n\r\n    function appendTableRows(tbodyElem) {\r\n      ctrl.renderer.setTable(data);\r\n      tbodyElem.empty();\r\n      tbodyElem.html(ctrl.renderer.render(ctrl.pageIndex));\r\n    }\r\n\r\n    function switchPage(e) {\r\n      const el = $(e.currentTarget);\r\n      ctrl.pageIndex = parseInt(el.text(), 10) - 1;\r\n      renderPanel();\r\n    }\r\n\r\n    function appendPaginationControls(footerElem) {\r\n      footerElem.empty();\r\n\r\n      const pageSize = panel.pageSize || 100;\r\n      pageCount = Math.ceil(data.rows.length / pageSize);\r\n      if (pageCount === 1) {\r\n        return;\r\n      }\r\n\r\n      const startPage = Math.max(ctrl.pageIndex - 3, 0);\r\n      const endPage = Math.min(pageCount, startPage + 9);\r\n\r\n      const paginationList = $('<ul></ul>');\r\n\r\n      for (let i = startPage; i < endPage; i++) {\r\n        const activeClass = i === ctrl.pageIndex ? 'active' : '';\r\n        const pageLinkElem = $(\r\n          '<li><a class=\"table-panel-page-link pointer ' + activeClass + '\">' + (i + 1) + '</a></li>'\r\n        );\r\n        paginationList.append(pageLinkElem);\r\n      }\r\n\r\n      footerElem.append(paginationList);\r\n    }\r\n\r\n    function renderPanel() {\r\n      const panelElem = elem.parents('.panel-content');\r\n      const rootElem = elem.find('.table-panel-scroll');\r\n      const tbodyElem = elem.find('tbody');\r\n      const footerElem = elem.find('.table-panel-footer');\r\n\r\n      elem.css({ 'font-size': panel.fontSize });\r\n      panelElem.addClass('table-panel-content');\r\n\r\n      appendTableRows(tbodyElem);\r\n      appendPaginationControls(footerElem);\r\n\r\n      rootElem.css({ 'max-height': panel.scroll ? getTableHeight() : '' });\r\n    }\r\n\r\n    // hook up link tooltips\r\n    elem.tooltip({\r\n      selector: '[data-link-tooltip]',\r\n    });\r\n\r\n    function addFilterClicked(e) {\r\n      const filterData = $(e.currentTarget).data();\r\n      const options = {\r\n        datasource: panel.datasource,\r\n        key: data.columns[filterData.column].text,\r\n        value: data.rows[filterData.row][filterData.column],\r\n        operator: filterData.operator,\r\n      };\r\n\r\n      ctrl.variableSrv.setAdhocFilter(options);\r\n    }\r\n\r\n    elem.on('click', '.table-panel-page-link', switchPage);\r\n    elem.on('click', '.table-panel-filter-link', addFilterClicked);\r\n\r\n    const unbindDestroy = scope.$on('$destroy', () => {\r\n      elem.off('click', '.table-panel-page-link');\r\n      elem.off('click', '.table-panel-filter-link');\r\n      unbindDestroy();\r\n    });\r\n\r\n    ctrl.events.on('render', renderData => {\r\n      data = renderData || data;\r\n      if (data) {\r\n        renderPanel();\r\n      }\r\n      ctrl.renderingCompleted();\r\n    });\r\n  }\r\n}\r\n\r\nexport { TablePanelCtrl, TablePanelCtrl as PanelCtrl };\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport kbn from 'app/core/utils/kbn';\r\n\r\nexport class LinkSrv {\r\n  /** @ngInject */\r\n  constructor(private templateSrv, private timeSrv) {}\r\n\r\n  getLinkUrl(link) {\r\n    const url = this.templateSrv.replace(link.url || '');\r\n    const params = {};\r\n\r\n    if (link.keepTime) {\r\n      const range = this.timeSrv.timeRangeForUrl();\r\n      params['from'] = range.from;\r\n      params['to'] = range.to;\r\n    }\r\n\r\n    if (link.includeVars) {\r\n      this.templateSrv.fillVariableValuesForUrl(params);\r\n    }\r\n\r\n    return this.addParamsToUrl(url, params);\r\n  }\r\n\r\n  addParamsToUrl(url, params) {\r\n    const paramsArray = [];\r\n\r\n    _.each(params, (value, key) => {\r\n      if (value === null) {\r\n        return;\r\n      }\r\n      if (value === true) {\r\n        paramsArray.push(key);\r\n      } else if (_.isArray(value)) {\r\n        _.each(value, instance => {\r\n          paramsArray.push(key + '=' + encodeURIComponent(instance));\r\n        });\r\n      } else {\r\n        paramsArray.push(key + '=' + encodeURIComponent(value));\r\n      }\r\n    });\r\n\r\n    if (paramsArray.length === 0) {\r\n      return url;\r\n    }\r\n\r\n    return this.appendToQueryString(url, paramsArray.join('&'));\r\n  }\r\n\r\n  appendToQueryString(url, stringToAppend) {\r\n    if (!_.isUndefined(stringToAppend) && stringToAppend !== null && stringToAppend !== '') {\r\n      const pos = url.indexOf('?');\r\n      if (pos !== -1) {\r\n        if (url.length - pos > 1) {\r\n          url += '&';\r\n        }\r\n      } else {\r\n        url += '?';\r\n      }\r\n      url += stringToAppend;\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  getAnchorInfo(link) {\r\n    const info: any = {};\r\n    info.href = this.getLinkUrl(link);\r\n    info.title = this.templateSrv.replace(link.title || '');\r\n    return info;\r\n  }\r\n\r\n  getPanelLinkAnchorInfo(link, scopedVars) {\r\n    const info: any = {};\r\n    if (link.type === 'absolute') {\r\n      info.target = link.targetBlank ? '_blank' : '_self';\r\n      info.href = this.templateSrv.replace(link.url || '', scopedVars);\r\n      info.title = this.templateSrv.replace(link.title || '', scopedVars);\r\n    } else if (link.url) {\r\n      info.href = link.url;\r\n      info.title = this.templateSrv.replace(link.title || '', scopedVars);\r\n      info.target = link.targetBlank ? '_blank' : '';\r\n    } else if (link.dashUri) {\r\n      info.href = 'dashboard/' + link.dashUri + '?';\r\n      info.title = this.templateSrv.replace(link.title || '', scopedVars);\r\n      info.target = link.targetBlank ? '_blank' : '';\r\n    } else {\r\n      info.title = this.templateSrv.replace(link.title || '', scopedVars);\r\n      const slug = kbn.slugifyForUrl(link.dashboard || '');\r\n      info.href = 'dashboard/db/' + slug + '?';\r\n    }\r\n\r\n    const params = {};\r\n\r\n    if (link.keepTime) {\r\n      const range = this.timeSrv.timeRangeForUrl();\r\n      params['from'] = range.from;\r\n      params['to'] = range.to;\r\n    }\r\n\r\n    if (link.includeVars) {\r\n      this.templateSrv.fillVariableValuesForUrl(params, scopedVars);\r\n    }\r\n\r\n    info.href = this.addParamsToUrl(info.href, params);\r\n\r\n    if (link.params) {\r\n      info.href = this.appendToQueryString(info.href, this.templateSrv.replace(link.params, scopedVars));\r\n    }\r\n\r\n    return info;\r\n  }\r\n}\r\n\r\nangular.module('grafana.services').service('linkSrv', LinkSrv);\r\n","import _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport 'vendor/flot/jquery.flot';\r\nimport 'vendor/flot/jquery.flot.gauge';\r\nimport 'app/features/dashboard/panellinks/link_srv';\r\n\r\nimport kbn from 'app/core/utils/kbn';\r\nimport config from 'app/core/config';\r\nimport TimeSeries from 'app/core/time_series2';\r\nimport { MetricsPanelCtrl } from 'app/plugins/sdk';\r\n\r\nclass SingleStatCtrl extends MetricsPanelCtrl {\r\n  static templateUrl = 'module.html';\r\n\r\n  dataType = 'timeseries';\r\n  series: any[];\r\n  data: any;\r\n  fontSizes: any[];\r\n  unitFormats: any[];\r\n  invalidGaugeRange: boolean;\r\n  panel: any;\r\n  events: any;\r\n  valueNameOptions: any[] = [\r\n    { value: 'min', text: 'Min' },\r\n    { value: 'max', text: 'Max' },\r\n    { value: 'avg', text: 'Average' },\r\n    { value: 'current', text: 'Current' },\r\n    { value: 'total', text: 'Total' },\r\n    { value: 'name', text: 'Name' },\r\n    { value: 'first', text: 'First' },\r\n    { value: 'delta', text: 'Delta' },\r\n    { value: 'diff', text: 'Difference' },\r\n    { value: 'range', text: 'Range' },\r\n    { value: 'last_time', text: 'Time of last point' },\r\n  ];\r\n  tableColumnOptions: any;\r\n\r\n  // Set and populate defaults\r\n  panelDefaults = {\r\n    links: [],\r\n    datasource: null,\r\n    maxDataPoints: 100,\r\n    interval: null,\r\n    targets: [{}],\r\n    cacheTimeout: null,\r\n    format: 'none',\r\n    prefix: '',\r\n    postfix: '',\r\n    nullText: null,\r\n    valueMaps: [{ value: 'null', op: '=', text: 'N/A' }],\r\n    mappingTypes: [{ name: 'value to text', value: 1 }, { name: 'range to text', value: 2 }],\r\n    rangeMaps: [{ from: 'null', to: 'null', text: 'N/A' }],\r\n    mappingType: 1,\r\n    nullPointMode: 'connected',\r\n    valueName: 'avg',\r\n    prefixFontSize: '50%',\r\n    valueFontSize: '80%',\r\n    postfixFontSize: '50%',\r\n    thresholds: '',\r\n    colorBackground: false,\r\n    colorValue: false,\r\n    colors: ['#299c46', 'rgba(237, 129, 40, 0.89)', '#d44a3a'],\r\n    sparkline: {\r\n      show: false,\r\n      full: false,\r\n      lineColor: 'rgb(31, 120, 193)',\r\n      fillColor: 'rgba(31, 118, 189, 0.18)',\r\n    },\r\n    gauge: {\r\n      show: false,\r\n      minValue: 0,\r\n      maxValue: 100,\r\n      thresholdMarkers: true,\r\n      thresholdLabels: false,\r\n    },\r\n    tableColumn: '',\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private linkSrv) {\r\n    super($scope, $injector);\r\n    _.defaults(this.panel, this.panelDefaults);\r\n\r\n    this.events.on('data-received', this.onDataReceived.bind(this));\r\n    this.events.on('data-error', this.onDataError.bind(this));\r\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\r\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n\r\n    this.onSparklineColorChange = this.onSparklineColorChange.bind(this);\r\n    this.onSparklineFillChange = this.onSparklineFillChange.bind(this);\r\n  }\r\n\r\n  onInitEditMode() {\r\n    this.fontSizes = ['20%', '30%', '50%', '70%', '80%', '100%', '110%', '120%', '150%', '170%', '200%'];\r\n    this.addEditorTab('Options', 'public/app/plugins/panel/singlestat/editor.html', 2);\r\n    this.addEditorTab('Value Mappings', 'public/app/plugins/panel/singlestat/mappings.html', 3);\r\n    this.unitFormats = kbn.getUnitFormats();\r\n  }\r\n\r\n  setUnitFormat(subItem) {\r\n    this.panel.format = subItem.value;\r\n    this.refresh();\r\n  }\r\n\r\n  onDataError(err) {\r\n    this.onDataReceived([]);\r\n  }\r\n\r\n  onDataReceived(dataList) {\r\n    const data: any = {};\r\n    if (dataList.length > 0 && dataList[0].type === 'table') {\r\n      this.dataType = 'table';\r\n      const tableData = dataList.map(this.tableHandler.bind(this));\r\n      this.setTableValues(tableData, data);\r\n    } else {\r\n      this.dataType = 'timeseries';\r\n      this.series = dataList.map(this.seriesHandler.bind(this));\r\n      this.setValues(data);\r\n    }\r\n    this.data = data;\r\n    this.render();\r\n  }\r\n\r\n  seriesHandler(seriesData) {\r\n    const series = new TimeSeries({\r\n      datapoints: seriesData.datapoints || [],\r\n      alias: seriesData.target,\r\n    });\r\n\r\n    series.flotpairs = series.getFlotPairs(this.panel.nullPointMode);\r\n    return series;\r\n  }\r\n\r\n  tableHandler(tableData) {\r\n    const datapoints = [];\r\n    const columnNames = {};\r\n\r\n    tableData.columns.forEach((column, columnIndex) => {\r\n      columnNames[columnIndex] = column.text;\r\n    });\r\n\r\n    this.tableColumnOptions = columnNames;\r\n    if (!_.find(tableData.columns, ['text', this.panel.tableColumn])) {\r\n      this.setTableColumnToSensibleDefault(tableData);\r\n    }\r\n\r\n    tableData.rows.forEach(row => {\r\n      const datapoint = {};\r\n\r\n      row.forEach((value, columnIndex) => {\r\n        const key = columnNames[columnIndex];\r\n        datapoint[key] = value;\r\n      });\r\n\r\n      datapoints.push(datapoint);\r\n    });\r\n\r\n    return datapoints;\r\n  }\r\n\r\n  setTableColumnToSensibleDefault(tableData) {\r\n    if (tableData.columns.length === 1) {\r\n      this.panel.tableColumn = tableData.columns[0].text;\r\n    } else {\r\n      this.panel.tableColumn = _.find(tableData.columns, col => {\r\n        return col.type !== 'time';\r\n      }).text;\r\n    }\r\n  }\r\n\r\n  setTableValues(tableData, data) {\r\n    if (!tableData || tableData.length === 0) {\r\n      return;\r\n    }\r\n\r\n    if (tableData[0].length === 0 || tableData[0][0][this.panel.tableColumn] === undefined) {\r\n      return;\r\n    }\r\n\r\n    const datapoint = tableData[0][0];\r\n    data.value = datapoint[this.panel.tableColumn];\r\n\r\n    if (_.isString(data.value)) {\r\n      data.valueFormatted = _.escape(data.value);\r\n      data.value = 0;\r\n      data.valueRounded = 0;\r\n    } else {\r\n      const decimalInfo = this.getDecimalsForValue(data.value);\r\n      const formatFunc = kbn.valueFormats[this.panel.format];\r\n      data.valueFormatted = formatFunc(\r\n        datapoint[this.panel.tableColumn],\r\n        decimalInfo.decimals,\r\n        decimalInfo.scaledDecimals\r\n      );\r\n      data.valueRounded = kbn.roundValue(data.value, this.panel.decimals || 0);\r\n    }\r\n\r\n    this.setValueMapping(data);\r\n  }\r\n\r\n  canModifyText() {\r\n    return !this.panel.gauge.show;\r\n  }\r\n\r\n  setColoring(options) {\r\n    if (options.background) {\r\n      this.panel.colorValue = false;\r\n      this.panel.colors = ['rgba(71, 212, 59, 0.4)', 'rgba(245, 150, 40, 0.73)', 'rgba(225, 40, 40, 0.59)'];\r\n    } else {\r\n      this.panel.colorBackground = false;\r\n      this.panel.colors = ['rgba(50, 172, 45, 0.97)', 'rgba(237, 129, 40, 0.89)', 'rgba(245, 54, 54, 0.9)'];\r\n    }\r\n    this.render();\r\n  }\r\n\r\n  invertColorOrder() {\r\n    const tmp = this.panel.colors[0];\r\n    this.panel.colors[0] = this.panel.colors[2];\r\n    this.panel.colors[2] = tmp;\r\n    this.render();\r\n  }\r\n\r\n  onColorChange(panelColorIndex) {\r\n    return color => {\r\n      this.panel.colors[panelColorIndex] = color;\r\n      this.render();\r\n    };\r\n  }\r\n\r\n  onSparklineColorChange(newColor) {\r\n    this.panel.sparkline.lineColor = newColor;\r\n    this.render();\r\n  }\r\n\r\n  onSparklineFillChange(newColor) {\r\n    this.panel.sparkline.fillColor = newColor;\r\n    this.render();\r\n  }\r\n\r\n  getDecimalsForValue(value) {\r\n    if (_.isNumber(this.panel.decimals)) {\r\n      return { decimals: this.panel.decimals, scaledDecimals: null };\r\n    }\r\n\r\n    const delta = value / 2;\r\n    let dec = -Math.floor(Math.log(delta) / Math.LN10);\r\n\r\n    const magn = Math.pow(10, -dec);\r\n    const norm = delta / magn; // norm is between 1.0 and 10.0\r\n    let size;\r\n\r\n    if (norm < 1.5) {\r\n      size = 1;\r\n    } else if (norm < 3) {\r\n      size = 2;\r\n      // special case for 2.5, requires an extra decimal\r\n      if (norm > 2.25) {\r\n        size = 2.5;\r\n        ++dec;\r\n      }\r\n    } else if (norm < 7.5) {\r\n      size = 5;\r\n    } else {\r\n      size = 10;\r\n    }\r\n\r\n    size *= magn;\r\n\r\n    // reduce starting decimals if not needed\r\n    if (Math.floor(value) === value) {\r\n      dec = 0;\r\n    }\r\n\r\n    const result: any = {};\r\n    result.decimals = Math.max(0, dec);\r\n    result.scaledDecimals = result.decimals - Math.floor(Math.log(size) / Math.LN10) + 2;\r\n\r\n    return result;\r\n  }\r\n\r\n  setValues(data) {\r\n    data.flotpairs = [];\r\n\r\n    if (this.series.length > 1) {\r\n      const error: any = new Error();\r\n      error.message = 'Multiple Series Error';\r\n      error.data =\r\n        'Metric query returns ' +\r\n        this.series.length +\r\n        ' series. Single Stat Panel expects a single series.\\n\\nResponse:\\n' +\r\n        JSON.stringify(this.series);\r\n      throw error;\r\n    }\r\n\r\n    if (this.series && this.series.length > 0) {\r\n      const lastPoint = _.last(this.series[0].datapoints);\r\n      const lastValue = _.isArray(lastPoint) ? lastPoint[0] : null;\r\n\r\n      if (this.panel.valueName === 'name') {\r\n        data.value = 0;\r\n        data.valueRounded = 0;\r\n        data.valueFormatted = this.series[0].alias;\r\n      } else if (_.isString(lastValue)) {\r\n        data.value = 0;\r\n        data.valueFormatted = _.escape(lastValue);\r\n        data.valueRounded = 0;\r\n      } else if (this.panel.valueName === 'last_time') {\r\n        const formatFunc = kbn.valueFormats[this.panel.format];\r\n        data.value = lastPoint[1];\r\n        data.valueRounded = data.value;\r\n        data.valueFormatted = formatFunc(data.value, this.dashboard.isTimezoneUtc());\r\n      } else {\r\n        data.value = this.series[0].stats[this.panel.valueName];\r\n        data.flotpairs = this.series[0].flotpairs;\r\n\r\n        const decimalInfo = this.getDecimalsForValue(data.value);\r\n        const formatFunc = kbn.valueFormats[this.panel.format];\r\n        data.valueFormatted = formatFunc(data.value, decimalInfo.decimals, decimalInfo.scaledDecimals);\r\n        data.valueRounded = kbn.roundValue(data.value, decimalInfo.decimals);\r\n      }\r\n\r\n      // Add $__name variable for using in prefix or postfix\r\n      data.scopedVars = _.extend({}, this.panel.scopedVars);\r\n      data.scopedVars['__name'] = { value: this.series[0].label };\r\n    }\r\n    this.setValueMapping(data);\r\n  }\r\n\r\n  setValueMapping(data) {\r\n    // check value to text mappings if its enabled\r\n    if (this.panel.mappingType === 1) {\r\n      for (let i = 0; i < this.panel.valueMaps.length; i++) {\r\n        const map = this.panel.valueMaps[i];\r\n        // special null case\r\n        if (map.value === 'null') {\r\n          if (data.value === null || data.value === void 0) {\r\n            data.valueFormatted = map.text;\r\n            return;\r\n          }\r\n          continue;\r\n        }\r\n\r\n        // value/number to text mapping\r\n        const value = parseFloat(map.value);\r\n        if (value === data.valueRounded) {\r\n          data.valueFormatted = map.text;\r\n          return;\r\n        }\r\n      }\r\n    } else if (this.panel.mappingType === 2) {\r\n      for (let i = 0; i < this.panel.rangeMaps.length; i++) {\r\n        const map = this.panel.rangeMaps[i];\r\n        // special null case\r\n        if (map.from === 'null' && map.to === 'null') {\r\n          if (data.value === null || data.value === void 0) {\r\n            data.valueFormatted = map.text;\r\n            return;\r\n          }\r\n          continue;\r\n        }\r\n\r\n        // value/number to range mapping\r\n        const from = parseFloat(map.from);\r\n        const to = parseFloat(map.to);\r\n        if (to >= data.valueRounded && from <= data.valueRounded) {\r\n          data.valueFormatted = map.text;\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (data.value === null || data.value === void 0) {\r\n      data.valueFormatted = 'no value';\r\n    }\r\n  }\r\n\r\n  removeValueMap(map) {\r\n    const index = _.indexOf(this.panel.valueMaps, map);\r\n    this.panel.valueMaps.splice(index, 1);\r\n    this.render();\r\n  }\r\n\r\n  addValueMap() {\r\n    this.panel.valueMaps.push({ value: '', op: '=', text: '' });\r\n  }\r\n\r\n  removeRangeMap(rangeMap) {\r\n    const index = _.indexOf(this.panel.rangeMaps, rangeMap);\r\n    this.panel.rangeMaps.splice(index, 1);\r\n    this.render();\r\n  }\r\n\r\n  addRangeMap() {\r\n    this.panel.rangeMaps.push({ from: '', to: '', text: '' });\r\n  }\r\n\r\n  link(scope, elem, attrs, ctrl) {\r\n    const $location = this.$location;\r\n    const linkSrv = this.linkSrv;\r\n    const $timeout = this.$timeout;\r\n    const panel = ctrl.panel;\r\n    const templateSrv = this.templateSrv;\r\n    let data, linkInfo;\r\n    const $panelContainer = elem.find('.panel-container');\r\n    elem = elem.find('.singlestat-panel');\r\n\r\n    function applyColoringThresholds(value, valueString) {\r\n      const color = getColorForValue(data, value);\r\n      if (color) {\r\n        return '<span style=\"color:' + color + '\">' + valueString + '</span>';\r\n      }\r\n\r\n      return valueString;\r\n    }\r\n\r\n    function getSpan(className, fontSize, value) {\r\n      value = templateSrv.replace(value, data.scopedVars);\r\n      return '<span class=\"' + className + '\" style=\"font-size:' + fontSize + '\">' + value + '</span>';\r\n    }\r\n\r\n    function getBigValueHtml() {\r\n      let body = '<div class=\"singlestat-panel-value-container\">';\r\n\r\n      if (panel.prefix) {\r\n        let prefix = panel.prefix;\r\n        if (panel.colorPrefix) {\r\n          prefix = applyColoringThresholds(data.value, panel.prefix);\r\n        }\r\n        body += getSpan('singlestat-panel-prefix', panel.prefixFontSize, prefix);\r\n      }\r\n\r\n      let value = data.valueFormatted;\r\n      if (panel.colorValue) {\r\n        value = applyColoringThresholds(data.value, value);\r\n      }\r\n      body += getSpan('singlestat-panel-value', panel.valueFontSize, value);\r\n\r\n      if (panel.postfix) {\r\n        let postfix = panel.postfix;\r\n        if (panel.colorPostfix) {\r\n          postfix = applyColoringThresholds(data.value, panel.postfix);\r\n        }\r\n        body += getSpan('singlestat-panel-postfix', panel.postfixFontSize, postfix);\r\n      }\r\n\r\n      body += '</div>';\r\n\r\n      return body;\r\n    }\r\n\r\n    function getValueText() {\r\n      let result = panel.prefix ? templateSrv.replace(panel.prefix, data.scopedVars) : '';\r\n      result += data.valueFormatted;\r\n      result += panel.postfix ? templateSrv.replace(panel.postfix, data.scopedVars) : '';\r\n\r\n      return result;\r\n    }\r\n\r\n    function addGauge() {\r\n      const width = elem.width();\r\n      const height = elem.height();\r\n      // Allow to use a bit more space for wide gauges\r\n      const dimension = Math.min(width, height * 1.3);\r\n\r\n      ctrl.invalidGaugeRange = false;\r\n      if (panel.gauge.minValue > panel.gauge.maxValue) {\r\n        ctrl.invalidGaugeRange = true;\r\n        return;\r\n      }\r\n\r\n      const plotCanvas = $('<div></div>');\r\n      const plotCss = {\r\n        top: '10px',\r\n        margin: 'auto',\r\n        position: 'relative',\r\n        height: height * 0.9 + 'px',\r\n        width: dimension + 'px',\r\n      };\r\n\r\n      plotCanvas.css(plotCss);\r\n\r\n      const thresholds = [];\r\n      for (let i = 0; i < data.thresholds.length; i++) {\r\n        thresholds.push({\r\n          value: data.thresholds[i],\r\n          color: data.colorMap[i],\r\n        });\r\n      }\r\n      thresholds.push({\r\n        value: panel.gauge.maxValue,\r\n        color: data.colorMap[data.colorMap.length - 1],\r\n      });\r\n\r\n      const bgColor = config.bootData.user.lightTheme ? 'rgb(230,230,230)' : 'rgb(38,38,38)';\r\n\r\n      const fontScale = parseInt(panel.valueFontSize, 10) / 100;\r\n      const fontSize = Math.min(dimension / 5, 100) * fontScale;\r\n      // Reduce gauge width if threshold labels enabled\r\n      const gaugeWidthReduceRatio = panel.gauge.thresholdLabels ? 1.5 : 1;\r\n      const gaugeWidth = Math.min(dimension / 6, 60) / gaugeWidthReduceRatio;\r\n      const thresholdMarkersWidth = gaugeWidth / 5;\r\n      const thresholdLabelFontSize = fontSize / 2.5;\r\n\r\n      const options = {\r\n        series: {\r\n          gauges: {\r\n            gauge: {\r\n              min: panel.gauge.minValue,\r\n              max: panel.gauge.maxValue,\r\n              background: { color: bgColor },\r\n              border: { color: null },\r\n              shadow: { show: false },\r\n              width: gaugeWidth,\r\n            },\r\n            frame: { show: false },\r\n            label: { show: false },\r\n            layout: { margin: 0, thresholdWidth: 0 },\r\n            cell: { border: { width: 0 } },\r\n            threshold: {\r\n              values: thresholds,\r\n              label: {\r\n                show: panel.gauge.thresholdLabels,\r\n                margin: thresholdMarkersWidth + 1,\r\n                font: { size: thresholdLabelFontSize },\r\n              },\r\n              show: panel.gauge.thresholdMarkers,\r\n              width: thresholdMarkersWidth,\r\n            },\r\n            value: {\r\n              color: panel.colorValue ? getColorForValue(data, data.valueRounded) : null,\r\n              formatter: () => {\r\n                return getValueText();\r\n              },\r\n              font: {\r\n                size: fontSize,\r\n                family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif',\r\n              },\r\n            },\r\n            show: true,\r\n          },\r\n        },\r\n      };\r\n\r\n      elem.append(plotCanvas);\r\n\r\n      const plotSeries = {\r\n        data: [[0, data.value]],\r\n      };\r\n\r\n      $.plot(plotCanvas, [plotSeries], options);\r\n    }\r\n\r\n    function addSparkline() {\r\n      const width = elem.width() + 20;\r\n      if (width < 30) {\r\n        // element has not gotten it's width yet\r\n        // delay sparkline render\r\n        setTimeout(addSparkline, 30);\r\n        return;\r\n      }\r\n\r\n      const height = ctrl.height;\r\n      const plotCanvas = $('<div></div>');\r\n      const plotCss: any = {};\r\n      plotCss.position = 'absolute';\r\n\r\n      if (panel.sparkline.full) {\r\n        plotCss.bottom = '5px';\r\n        plotCss.left = '-5px';\r\n        plotCss.width = width - 10 + 'px';\r\n        const dynamicHeightMargin = height <= 100 ? 5 : Math.round(height / 100) * 15 + 5;\r\n        plotCss.height = height - dynamicHeightMargin + 'px';\r\n      } else {\r\n        plotCss.bottom = '0px';\r\n        plotCss.left = '-5px';\r\n        plotCss.width = width - 10 + 'px';\r\n        plotCss.height = Math.floor(height * 0.25) + 'px';\r\n      }\r\n\r\n      plotCanvas.css(plotCss);\r\n\r\n      const options = {\r\n        legend: { show: false },\r\n        series: {\r\n          lines: {\r\n            show: true,\r\n            fill: 1,\r\n            zero: false,\r\n            lineWidth: 1,\r\n            fillColor: panel.sparkline.fillColor,\r\n          },\r\n        },\r\n        yaxes: { show: false },\r\n        xaxis: {\r\n          show: false,\r\n          mode: 'time',\r\n          min: ctrl.range.from.valueOf(),\r\n          max: ctrl.range.to.valueOf(),\r\n        },\r\n        grid: { hoverable: false, show: false },\r\n      };\r\n\r\n      elem.append(plotCanvas);\r\n\r\n      const plotSeries = {\r\n        data: data.flotpairs,\r\n        color: panel.sparkline.lineColor,\r\n      };\r\n\r\n      $.plot(plotCanvas, [plotSeries], options);\r\n    }\r\n\r\n    function render() {\r\n      if (!ctrl.data) {\r\n        return;\r\n      }\r\n      data = ctrl.data;\r\n\r\n      // get thresholds\r\n      data.thresholds = panel.thresholds.split(',').map(strVale => {\r\n        return Number(strVale.trim());\r\n      });\r\n      data.colorMap = panel.colors;\r\n\r\n      const body = panel.gauge.show ? '' : getBigValueHtml();\r\n\r\n      if (panel.colorBackground) {\r\n        const color = getColorForValue(data, data.value);\r\n        if (color) {\r\n          $panelContainer.css('background-color', color);\r\n          if (scope.fullscreen) {\r\n            elem.css('background-color', color);\r\n          } else {\r\n            elem.css('background-color', '');\r\n          }\r\n        }\r\n      } else {\r\n        $panelContainer.css('background-color', '');\r\n        elem.css('background-color', '');\r\n      }\r\n\r\n      elem.html(body);\r\n\r\n      if (panel.sparkline.show) {\r\n        addSparkline();\r\n      }\r\n\r\n      if (panel.gauge.show) {\r\n        addGauge();\r\n      }\r\n\r\n      elem.toggleClass('pointer', panel.links.length > 0);\r\n\r\n      if (panel.links.length > 0) {\r\n        linkInfo = linkSrv.getPanelLinkAnchorInfo(panel.links[0], data.scopedVars);\r\n      } else {\r\n        linkInfo = null;\r\n      }\r\n    }\r\n\r\n    function hookupDrilldownLinkTooltip() {\r\n      // drilldown link tooltip\r\n      const drilldownTooltip = $('<div id=\"tooltip\" class=\"\">hello</div>\"');\r\n\r\n      elem.mouseleave(() => {\r\n        if (panel.links.length === 0) {\r\n          return;\r\n        }\r\n        $timeout(() => {\r\n          drilldownTooltip.detach();\r\n        });\r\n      });\r\n\r\n      elem.click(evt => {\r\n        if (!linkInfo) {\r\n          return;\r\n        }\r\n        // ignore title clicks in title\r\n        if ($(evt).parents('.panel-header').length > 0) {\r\n          return;\r\n        }\r\n\r\n        if (linkInfo.target === '_blank') {\r\n          window.open(linkInfo.href, '_blank');\r\n          return;\r\n        }\r\n\r\n        if (linkInfo.href.indexOf('http') === 0) {\r\n          window.location.href = linkInfo.href;\r\n        } else {\r\n          $timeout(() => {\r\n            $location.url(linkInfo.href);\r\n          });\r\n        }\r\n\r\n        drilldownTooltip.detach();\r\n      });\r\n\r\n      elem.mousemove(e => {\r\n        if (!linkInfo) {\r\n          return;\r\n        }\r\n\r\n        drilldownTooltip.text('click to go to: ' + linkInfo.title);\r\n        drilldownTooltip.place_tt(e.pageX, e.pageY - 50);\r\n      });\r\n    }\r\n\r\n    hookupDrilldownLinkTooltip();\r\n\r\n    this.events.on('render', () => {\r\n      render();\r\n      ctrl.renderingCompleted();\r\n    });\r\n  }\r\n}\r\n\r\nfunction getColorForValue(data, value) {\r\n  if (!_.isFinite(value)) {\r\n    return null;\r\n  }\r\n\r\n  for (let i = data.thresholds.length; i > 0; i--) {\r\n    if (value >= data.thresholds[i - 1]) {\r\n      return data.colorMap[i];\r\n    }\r\n  }\r\n\r\n  return _.first(data.colorMap);\r\n}\r\n\r\nexport { SingleStatCtrl, SingleStatCtrl as PanelCtrl, getColorForValue };\r\n","import * as graphitePlugin from 'app/plugins/datasource/graphite/module';\r\nimport * as cloudwatchPlugin from 'app/plugins/datasource/cloudwatch/module';\r\nimport * as elasticsearchPlugin from 'app/plugins/datasource/elasticsearch/module';\r\nimport * as opentsdbPlugin from 'app/plugins/datasource/opentsdb/module';\r\nimport * as grafanaPlugin from 'app/plugins/datasource/grafana/module';\r\nimport * as influxdbPlugin from 'app/plugins/datasource/influxdb/module';\r\nimport * as loggingPlugin from 'app/plugins/datasource/logging/module';\r\nimport * as mixedPlugin from 'app/plugins/datasource/mixed/module';\r\nimport * as mysqlPlugin from 'app/plugins/datasource/mysql/module';\r\nimport * as postgresPlugin from 'app/plugins/datasource/postgres/module';\r\nimport * as prometheusPlugin from 'app/plugins/datasource/prometheus/module';\r\nimport * as mssqlPlugin from 'app/plugins/datasource/mssql/module';\r\nimport * as testDataDSPlugin from 'app/plugins/datasource/testdata/module';\r\nimport * as stackdriverPlugin from 'app/plugins/datasource/stackdriver/module';\r\n\r\nimport * as textPanel from 'app/plugins/panel/text/module';\r\nimport * as text2Panel from 'app/plugins/panel/text2/module';\r\nimport * as graph2Panel from 'app/plugins/panel/graph2/module';\r\nimport * as graphPanel from 'app/plugins/panel/graph/module';\r\nimport * as dashListPanel from 'app/plugins/panel/dashlist/module';\r\nimport * as pluginsListPanel from 'app/plugins/panel/pluginlist/module';\r\nimport * as alertListPanel from 'app/plugins/panel/alertlist/module';\r\nimport * as heatmapPanel from 'app/plugins/panel/heatmap/module';\r\nimport * as tablePanel from 'app/plugins/panel/table/module';\r\nimport * as singlestatPanel from 'app/plugins/panel/singlestat/module';\r\nimport * as gettingStartedPanel from 'app/plugins/panel/gettingstarted/module';\r\n\r\nconst builtInPlugins = {\r\n  'app/plugins/datasource/graphite/module': graphitePlugin,\r\n  'app/plugins/datasource/cloudwatch/module': cloudwatchPlugin,\r\n  'app/plugins/datasource/elasticsearch/module': elasticsearchPlugin,\r\n  'app/plugins/datasource/opentsdb/module': opentsdbPlugin,\r\n  'app/plugins/datasource/grafana/module': grafanaPlugin,\r\n  'app/plugins/datasource/influxdb/module': influxdbPlugin,\r\n  'app/plugins/datasource/logging/module': loggingPlugin,\r\n  'app/plugins/datasource/mixed/module': mixedPlugin,\r\n  'app/plugins/datasource/mysql/module': mysqlPlugin,\r\n  'app/plugins/datasource/postgres/module': postgresPlugin,\r\n  'app/plugins/datasource/mssql/module': mssqlPlugin,\r\n  'app/plugins/datasource/prometheus/module': prometheusPlugin,\r\n  'app/plugins/datasource/testdata/module': testDataDSPlugin,\r\n  'app/plugins/datasource/stackdriver/module': stackdriverPlugin,\r\n\r\n  'app/plugins/panel/text/module': textPanel,\r\n  'app/plugins/panel/text2/module': text2Panel,\r\n  'app/plugins/panel/graph2/module': graph2Panel,\r\n  'app/plugins/panel/graph/module': graphPanel,\r\n  'app/plugins/panel/dashlist/module': dashListPanel,\r\n  'app/plugins/panel/pluginlist/module': pluginsListPanel,\r\n  'app/plugins/panel/alertlist/module': alertListPanel,\r\n  'app/plugins/panel/heatmap/module': heatmapPanel,\r\n  'app/plugins/panel/table/module': tablePanel,\r\n  'app/plugins/panel/singlestat/module': singlestatPanel,\r\n  'app/plugins/panel/gettingstarted/module': gettingStartedPanel,\r\n};\r\n\r\nexport default builtInPlugins;\r\n","import { PanelCtrl } from 'app/plugins/sdk';\r\n\r\nimport { contextSrv } from 'app/core/core';\r\n\r\nclass GettingStartedPanelCtrl extends PanelCtrl {\r\n  static templateUrl = 'public/app/plugins/panel/gettingstarted/module.html';\r\n  checksDone: boolean;\r\n  stepIndex: number;\r\n  steps: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector, private backendSrv, datasourceSrv, private $q) {\r\n    super($scope, $injector);\r\n\r\n    this.stepIndex = 0;\r\n    this.steps = [];\r\n\r\n    this.steps.push({\r\n      title: 'Install Grafana',\r\n      icon: 'icon-gf icon-gf-check',\r\n      href: 'http://docs.grafana.org/',\r\n      target: '_blank',\r\n      note: 'Review the installation docs',\r\n      check: () => $q.when(true),\r\n    });\r\n\r\n    this.steps.push({\r\n      title: 'Create your first data source',\r\n      cta: 'Add data source',\r\n      icon: 'icon-gf icon-gf-datasources',\r\n      href: 'datasources/new?gettingstarted',\r\n      check: () => {\r\n        return $q.when(\r\n          datasourceSrv.getMetricSources().filter(item => {\r\n            return item.meta.builtIn !== true;\r\n          }).length > 0\r\n        );\r\n      },\r\n    });\r\n\r\n    this.steps.push({\r\n      title: 'Create your first dashboard',\r\n      cta: 'New dashboard',\r\n      icon: 'icon-gf icon-gf-dashboard',\r\n      href: 'dashboard/new?gettingstarted',\r\n      check: () => {\r\n        return this.backendSrv.search({ limit: 1 }).then(result => {\r\n          return result.length > 0;\r\n        });\r\n      },\r\n    });\r\n\r\n    this.steps.push({\r\n      title: 'Invite your team',\r\n      cta: 'Add Users',\r\n      icon: 'icon-gf icon-gf-users',\r\n      href: 'org/users?gettingstarted',\r\n      check: () => {\r\n        return this.backendSrv.get('/api/org/users').then(res => {\r\n          return res.length > 1;\r\n        });\r\n      },\r\n    });\r\n\r\n    this.steps.push({\r\n      title: 'Install apps & plugins',\r\n      cta: 'Explore plugin repository',\r\n      icon: 'icon-gf icon-gf-apps',\r\n      href: 'https://grafana.com/plugins?utm_source=grafana_getting_started',\r\n      check: () => {\r\n        return this.backendSrv.get('/api/plugins', { embedded: 0, core: 0 }).then(plugins => {\r\n          return plugins.length > 0;\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n  $onInit() {\r\n    this.stepIndex = -1;\r\n    return this.nextStep().then(res => {\r\n      this.checksDone = true;\r\n    });\r\n  }\r\n\r\n  nextStep() {\r\n    if (this.stepIndex === this.steps.length - 1) {\r\n      return this.$q.when();\r\n    }\r\n\r\n    this.stepIndex += 1;\r\n    const currentStep = this.steps[this.stepIndex];\r\n    return currentStep.check().then(passed => {\r\n      if (passed) {\r\n        currentStep.cssClass = 'completed';\r\n        return this.nextStep();\r\n      }\r\n\r\n      currentStep.cssClass = 'active';\r\n      return this.$q.when();\r\n    });\r\n  }\r\n\r\n  dismiss() {\r\n    this.dashboard.removePanel(this.panel, false);\r\n\r\n    this.backendSrv\r\n      .request({\r\n        method: 'PUT',\r\n        url: '/api/user/helpflags/1',\r\n        showSuccessAlert: false,\r\n      })\r\n      .then(res => {\r\n        contextSrv.user.helpFlags1 = res.helpFlags1;\r\n      });\r\n  }\r\n}\r\n\r\nexport { GettingStartedPanelCtrl, GettingStartedPanelCtrl as PanelCtrl };\r\n","import System from 'systemjs/dist/system.js';\r\nimport _ from 'lodash';\r\nimport * as sdk from 'app/plugins/sdk';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport moment from 'moment';\r\nimport angular from 'angular';\r\nimport jquery from 'jquery';\r\n\r\n// Experimental module exports\r\nimport prismjs from 'prismjs';\r\nimport slate from 'slate';\r\nimport slateReact from 'slate-react';\r\nimport slatePlain from 'slate-plain-serializer';\r\nimport react from 'react';\r\nimport reactDom from 'react-dom';\r\n\r\nimport config from 'app/core/config';\r\nimport TimeSeries from 'app/core/time_series2';\r\nimport TableModel from 'app/core/table_model';\r\nimport { coreModule, appEvents, contextSrv } from 'app/core/core';\r\nimport { PluginExports } from 'app/types/plugins';\r\nimport * as datemath from 'app/core/utils/datemath';\r\nimport * as fileExport from 'app/core/utils/file_export';\r\nimport * as flatten from 'app/core/utils/flatten';\r\nimport * as ticks from 'app/core/utils/ticks';\r\nimport impressionSrv from 'app/core/services/impression_srv';\r\nimport builtInPlugins from './built_in_plugins';\r\nimport * as d3 from 'd3';\r\n\r\n// rxjs\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { Subject } from 'rxjs/Subject';\r\n\r\n// these imports add functions to Observable\r\nimport 'rxjs/add/observable/empty';\r\nimport 'rxjs/add/observable/from';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/combineAll';\r\n\r\n// add cache busting\r\nconst bust = `?_cache=${Date.now()}`;\r\nfunction locate(load) {\r\n  return load.address + bust;\r\n}\r\nSystem.registry.set('plugin-loader', System.newModule({ locate: locate }));\r\n\r\nSystem.config({\r\n  baseURL: 'public',\r\n  defaultExtension: 'js',\r\n  packages: {\r\n    plugins: {\r\n      defaultExtension: 'js',\r\n    },\r\n  },\r\n  map: {\r\n    text: 'vendor/plugin-text/text.js',\r\n    css: 'vendor/plugin-css/css.js',\r\n  },\r\n  meta: {\r\n    '/*': {\r\n      esModule: true,\r\n      authorization: true,\r\n      loader: 'plugin-loader',\r\n    },\r\n  },\r\n});\r\n\r\nfunction exposeToPlugin(name: string, component: any) {\r\n  System.registerDynamic(name, [], true, (require, exports, module) => {\r\n    module.exports = component;\r\n  });\r\n}\r\n\r\nexposeToPlugin('lodash', _);\r\nexposeToPlugin('moment', moment);\r\nexposeToPlugin('jquery', jquery);\r\nexposeToPlugin('angular', angular);\r\nexposeToPlugin('d3', d3);\r\nexposeToPlugin('rxjs/Subject', Subject);\r\nexposeToPlugin('rxjs/Observable', Observable);\r\n\r\n// Experimental modules\r\nexposeToPlugin('prismjs', prismjs);\r\nexposeToPlugin('slate', slate);\r\nexposeToPlugin('slate-react', slateReact);\r\nexposeToPlugin('slate-plain-serializer', slatePlain);\r\nexposeToPlugin('react', react);\r\nexposeToPlugin('react-dom', reactDom);\r\n\r\n// backward compatible path\r\nexposeToPlugin('vendor/npm/rxjs/Rx', {\r\n  Subject: Subject,\r\n  Observable: Observable,\r\n});\r\n\r\nexposeToPlugin('app/features/dashboard/impression_store', {\r\n  impressions: impressionSrv,\r\n  __esModule: true,\r\n});\r\n\r\nexposeToPlugin('app/plugins/sdk', sdk);\r\nexposeToPlugin('app/core/utils/datemath', datemath);\r\nexposeToPlugin('app/core/utils/file_export', fileExport);\r\nexposeToPlugin('app/core/utils/flatten', flatten);\r\nexposeToPlugin('app/core/utils/kbn', kbn);\r\nexposeToPlugin('app/core/utils/ticks', ticks);\r\n\r\nexposeToPlugin('app/core/config', config);\r\nexposeToPlugin('app/core/time_series', TimeSeries);\r\nexposeToPlugin('app/core/time_series2', TimeSeries);\r\nexposeToPlugin('app/core/table_model', TableModel);\r\nexposeToPlugin('app/core/app_events', appEvents);\r\nexposeToPlugin('app/core/core_module', coreModule);\r\nexposeToPlugin('app/core/core', {\r\n  coreModule: coreModule,\r\n  appEvents: appEvents,\r\n  contextSrv: contextSrv,\r\n  __esModule: true,\r\n});\r\n\r\nimport 'vendor/flot/jquery.flot';\r\nimport 'vendor/flot/jquery.flot.selection';\r\nimport 'vendor/flot/jquery.flot.time';\r\nimport 'vendor/flot/jquery.flot.stack';\r\nimport 'vendor/flot/jquery.flot.pie';\r\nimport 'vendor/flot/jquery.flot.stackpercent';\r\nimport 'vendor/flot/jquery.flot.fillbelow';\r\nimport 'vendor/flot/jquery.flot.crosshair';\r\nimport 'vendor/flot/jquery.flot.dashes';\r\nimport 'vendor/flot/jquery.flot.gauge';\r\n\r\nconst flotDeps = [\r\n  'jquery.flot',\r\n  'jquery.flot.pie',\r\n  'jquery.flot.time',\r\n  'jquery.flot.fillbelow',\r\n  'jquery.flot.crosshair',\r\n  'jquery.flot.stack',\r\n  'jquery.flot.selection',\r\n  'jquery.flot.stackpercent',\r\n  'jquery.flot.events',\r\n  'jquery.flot.gauge',\r\n];\r\n\r\nfor (const flotDep of flotDeps) {\r\n  exposeToPlugin(flotDep, { fakeDep: 1 });\r\n}\r\n\r\nexport function importPluginModule(path: string): Promise<PluginExports> {\r\n  const builtIn = builtInPlugins[path];\r\n  if (builtIn) {\r\n    return Promise.resolve(builtIn);\r\n  }\r\n  return System.import(path);\r\n}\r\n\r\nexport function loadPluginCss(options) {\r\n  if (config.bootData.user.lightTheme) {\r\n    System.import(options.light + '!css');\r\n  } else {\r\n    System.import(options.dark + '!css');\r\n  }\r\n}\r\n","// Libraries\r\nimport _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\n\r\n// Utils\r\nimport config from 'app/core/config';\r\nimport { importPluginModule } from './plugin_loader';\r\n\r\n// Types\r\nimport { DataSourceApi } from 'app/types/series';\r\n\r\nexport class DatasourceSrv {\r\n  datasources: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $q, private $injector, private $rootScope, private templateSrv) {\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.datasources = {};\r\n  }\r\n\r\n  get(name?): Promise<DataSourceApi> {\r\n    if (!name) {\r\n      return this.get(config.defaultDatasource);\r\n    }\r\n\r\n    name = this.templateSrv.replace(name);\r\n\r\n    if (name === 'default') {\r\n      return this.get(config.defaultDatasource);\r\n    }\r\n\r\n    if (this.datasources[name]) {\r\n      return this.$q.when(this.datasources[name]);\r\n    }\r\n\r\n    return this.loadDatasource(name);\r\n  }\r\n\r\n  loadDatasource(name) {\r\n    const dsConfig = config.datasources[name];\r\n    if (!dsConfig) {\r\n      return this.$q.reject({ message: 'Datasource named ' + name + ' was not found' });\r\n    }\r\n\r\n    const deferred = this.$q.defer();\r\n    const pluginDef = dsConfig.meta;\r\n\r\n    importPluginModule(pluginDef.module)\r\n      .then(plugin => {\r\n        // check if its in cache now\r\n        if (this.datasources[name]) {\r\n          deferred.resolve(this.datasources[name]);\r\n          return;\r\n        }\r\n\r\n        // plugin module needs to export a constructor function named Datasource\r\n        if (!plugin.Datasource) {\r\n          throw new Error('Plugin module is missing Datasource constructor');\r\n        }\r\n\r\n        const instance = this.$injector.instantiate(plugin.Datasource, { instanceSettings: dsConfig });\r\n        instance.meta = pluginDef;\r\n        instance.name = name;\r\n        this.datasources[name] = instance;\r\n        deferred.resolve(instance);\r\n      })\r\n      .catch(err => {\r\n        this.$rootScope.appEvent('alert-error', [dsConfig.name + ' plugin failed', err.toString()]);\r\n      });\r\n\r\n    return deferred.promise;\r\n  }\r\n\r\n  getAll() {\r\n    return config.datasources;\r\n  }\r\n\r\n  getAnnotationSources() {\r\n    const sources = [];\r\n\r\n    this.addDataSourceVariables(sources);\r\n\r\n    _.each(config.datasources, value => {\r\n      if (value.meta && value.meta.annotations) {\r\n        sources.push(value);\r\n      }\r\n    });\r\n\r\n    return sources;\r\n  }\r\n\r\n  getExploreSources() {\r\n    const { datasources } = config;\r\n    const es = Object.keys(datasources)\r\n      .map(name => datasources[name])\r\n      .filter(ds => ds.meta && ds.meta.explore);\r\n    return _.sortBy(es, ['name']);\r\n  }\r\n\r\n  getMetricSources(options) {\r\n    const metricSources = [];\r\n\r\n    _.each(config.datasources, (value, key) => {\r\n      if (value.meta && value.meta.metrics) {\r\n        let metricSource = { value: key, name: key, meta: value.meta, sort: key };\r\n\r\n        //Make sure grafana and mixed are sorted at the bottom\r\n        if (value.meta.id === 'grafana') {\r\n          metricSource.sort = String.fromCharCode(253);\r\n        } else if (value.meta.id === 'mixed') {\r\n          metricSource.sort = String.fromCharCode(254);\r\n        }\r\n\r\n        metricSources.push(metricSource);\r\n\r\n        if (key === config.defaultDatasource) {\r\n          metricSource = { value: null, name: 'default', meta: value.meta, sort: key };\r\n          metricSources.push(metricSource);\r\n        }\r\n      }\r\n    });\r\n\r\n    if (!options || !options.skipVariables) {\r\n      this.addDataSourceVariables(metricSources);\r\n    }\r\n\r\n    metricSources.sort((a, b) => {\r\n      if (a.sort.toLowerCase() > b.sort.toLowerCase()) {\r\n        return 1;\r\n      }\r\n      if (a.sort.toLowerCase() < b.sort.toLowerCase()) {\r\n        return -1;\r\n      }\r\n      return 0;\r\n    });\r\n\r\n    return metricSources;\r\n  }\r\n\r\n  addDataSourceVariables(list) {\r\n    // look for data source variables\r\n    for (let i = 0; i < this.templateSrv.variables.length; i++) {\r\n      const variable = this.templateSrv.variables[i];\r\n      if (variable.type !== 'datasource') {\r\n        continue;\r\n      }\r\n\r\n      let first = variable.current.value;\r\n      if (first === 'default') {\r\n        first = config.defaultDatasource;\r\n      }\r\n\r\n      const ds = config.datasources[first];\r\n\r\n      if (ds) {\r\n        const key = `$${variable.name}`;\r\n        list.push({\r\n          name: key,\r\n          value: key,\r\n          meta: ds.meta,\r\n          sort: key,\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nlet singleton: DatasourceSrv;\r\n\r\nexport function setDatasourceSrv(srv: DatasourceSrv) {\r\n  singleton = srv;\r\n}\r\n\r\nexport function getDatasourceSrv(): DatasourceSrv {\r\n  return singleton;\r\n}\r\n\r\ncoreModule.service('datasourceSrv', DatasourceSrv);\r\nexport default DatasourceSrv;\r\n","import angular from 'angular';\r\nimport coreModule from 'app/core/core_module';\r\nimport _ from 'lodash';\r\n\r\nexport interface AngularComponent {\r\n  destroy();\r\n}\r\n\r\nexport class AngularLoader {\r\n  /** @ngInject */\r\n  constructor(private $compile, private $rootScope) {}\r\n\r\n  load(elem, scopeProps, template): AngularComponent {\r\n    const scope = this.$rootScope.$new();\r\n\r\n    _.assign(scope, scopeProps);\r\n\r\n    const compiledElem = this.$compile(template)(scope);\r\n    const rootNode = angular.element(elem);\r\n    rootNode.append(compiledElem);\r\n\r\n    return {\r\n      destroy: () => {\r\n        scope.$destroy();\r\n        compiledElem.remove();\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\ncoreModule.service('angularLoader', AngularLoader);\r\n\r\nlet angularLoaderInstance: AngularLoader;\r\n\r\nexport function setAngularLoader(pl: AngularLoader) {\r\n  angularLoaderInstance = pl;\r\n}\r\n\r\n// away to access it from react\r\nexport function getAngularLoader(): AngularLoader {\r\n  return angularLoaderInstance;\r\n}\r\n","import config from 'app/core/config';\r\nimport _ from 'lodash';\r\nimport $ from 'jquery';\r\n\r\nimport coreModule from 'app/core/core_module';\r\nimport { profiler } from 'app/core/profiler';\r\nimport appEvents from 'app/core/app_events';\r\nimport Drop from 'tether-drop';\r\nimport colors from 'app/core/utils/colors';\r\nimport { BackendSrv, setBackendSrv } from 'app/core/services/backend_srv';\r\nimport { TimeSrv, setTimeSrv } from 'app/features/dashboard/time_srv';\r\nimport { DatasourceSrv, setDatasourceSrv } from 'app/features/plugins/datasource_srv';\r\nimport { AngularLoader, setAngularLoader } from 'app/core/services/AngularLoader';\r\nimport { configureStore } from 'app/store/configureStore';\r\n\r\nexport class GrafanaCtrl {\r\n  /** @ngInject */\r\n  constructor(\r\n    $scope,\r\n    alertSrv,\r\n    utilSrv,\r\n    $rootScope,\r\n    $controller,\r\n    contextSrv,\r\n    bridgeSrv,\r\n    backendSrv: BackendSrv,\r\n    timeSrv: TimeSrv,\r\n    datasourceSrv: DatasourceSrv,\r\n    angularLoader: AngularLoader\r\n  ) {\r\n    // make angular loader service available to react components\r\n    setAngularLoader(angularLoader);\r\n    setBackendSrv(backendSrv);\r\n    setDatasourceSrv(datasourceSrv);\r\n    setTimeSrv(timeSrv);\r\n    configureStore();\r\n\r\n    $scope.init = () => {\r\n      $scope.contextSrv = contextSrv;\r\n      $scope.appSubUrl = config.appSubUrl;\r\n      $scope._ = _;\r\n\r\n      profiler.init(config, $rootScope);\r\n      alertSrv.init();\r\n      utilSrv.init();\r\n      bridgeSrv.init();\r\n\r\n      $scope.dashAlerts = alertSrv;\r\n    };\r\n\r\n    $rootScope.colors = colors;\r\n\r\n    $scope.initDashboard = (dashboardData, viewScope) => {\r\n      $scope.appEvent('dashboard-fetch-end', dashboardData);\r\n      $controller('DashboardCtrl', { $scope: viewScope }).init(dashboardData);\r\n    };\r\n\r\n    $rootScope.onAppEvent = function(name, callback, localScope) {\r\n      const unbind = $rootScope.$on(name, callback);\r\n      let callerScope = this;\r\n      if (callerScope.$id === 1 && !localScope) {\r\n        console.log('warning rootScope onAppEvent called without localscope');\r\n      }\r\n      if (localScope) {\r\n        callerScope = localScope;\r\n      }\r\n      callerScope.$on('$destroy', unbind);\r\n    };\r\n\r\n    $rootScope.appEvent = (name, payload) => {\r\n      $rootScope.$emit(name, payload);\r\n      appEvents.emit(name, payload);\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\nfunction setViewModeBodyClass(body, mode, sidemenuOpen: boolean) {\r\n  body.removeClass('view-mode--tv');\r\n  body.removeClass('view-mode--kiosk');\r\n  body.removeClass('view-mode--inactive');\r\n\r\n  switch (mode) {\r\n    case 'tv': {\r\n      body.removeClass('sidemenu-open');\r\n      body.addClass('view-mode--tv');\r\n      break;\r\n    }\r\n    // 1 & true for legacy states\r\n    case 1:\r\n    case true: {\r\n      body.removeClass('sidemenu-open');\r\n      body.addClass('view-mode--kiosk');\r\n      break;\r\n    }\r\n    default: {\r\n      body.toggleClass('sidemenu-open', sidemenuOpen);\r\n    }\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function grafanaAppDirective(playlistSrv, contextSrv, $timeout, $rootScope, $location) {\r\n  return {\r\n    restrict: 'E',\r\n    controller: GrafanaCtrl,\r\n    link: (scope, elem) => {\r\n      let sidemenuOpen;\r\n      const body = $('body');\r\n\r\n      // see https://github.com/zenorocha/clipboard.js/issues/155\r\n      $.fn.modal.Constructor.prototype.enforceFocus = () => {};\r\n\r\n      $('.preloader').remove();\r\n\r\n      sidemenuOpen = scope.contextSrv.sidemenu;\r\n      body.toggleClass('sidemenu-open', sidemenuOpen);\r\n\r\n      appEvents.on('toggle-sidemenu', () => {\r\n        sidemenuOpen = scope.contextSrv.sidemenu;\r\n        body.toggleClass('sidemenu-open');\r\n      });\r\n\r\n      appEvents.on('toggle-sidemenu-mobile', () => {\r\n        body.toggleClass('sidemenu-open--xs');\r\n      });\r\n\r\n      appEvents.on('toggle-sidemenu-hidden', () => {\r\n        body.toggleClass('sidemenu-hidden');\r\n      });\r\n\r\n      scope.$watch(\r\n        () => playlistSrv.isPlaying,\r\n        newValue => {\r\n          elem.toggleClass('view-mode--playlist', newValue === true);\r\n        }\r\n      );\r\n\r\n      // check if we are in server side render\r\n      if (document.cookie.indexOf('renderKey') !== -1) {\r\n        body.addClass('body--phantomjs');\r\n      }\r\n\r\n      // tooltip removal fix\r\n      // manage page classes\r\n      let pageClass;\r\n      scope.$on('$routeChangeSuccess', (evt, data) => {\r\n        if (pageClass) {\r\n          body.removeClass(pageClass);\r\n        }\r\n\r\n        if (data.$$route) {\r\n          pageClass = data.$$route.pageClass;\r\n          if (pageClass) {\r\n            body.addClass(pageClass);\r\n          }\r\n        }\r\n\r\n        // clear body class sidemenu states\r\n        body.removeClass('sidemenu-open--xs');\r\n\r\n        $('#tooltip, .tooltip').remove();\r\n\r\n        // check for kiosk url param\r\n        setViewModeBodyClass(body, data.params.kiosk, sidemenuOpen);\r\n\r\n        // close all drops\r\n        for (const drop of Drop.drops) {\r\n          drop.destroy();\r\n        }\r\n      });\r\n\r\n      // handle kiosk mode\r\n      appEvents.on('toggle-kiosk-mode', options => {\r\n        const search = $location.search();\r\n\r\n        if (options && options.exit) {\r\n          search.kiosk = 1;\r\n        }\r\n\r\n        switch (search.kiosk) {\r\n          case 'tv': {\r\n            search.kiosk = 1;\r\n            appEvents.emit('alert-success', ['Press ESC to exit Kiosk mode']);\r\n            break;\r\n          }\r\n          case 1:\r\n          case true: {\r\n            delete search.kiosk;\r\n            break;\r\n          }\r\n          default: {\r\n            search.kiosk = 'tv';\r\n          }\r\n        }\r\n\r\n        $location.search(search);\r\n        setViewModeBodyClass(body, search.kiosk, sidemenuOpen);\r\n      });\r\n\r\n      // handle in active view state class\r\n      let lastActivity = new Date().getTime();\r\n      let activeUser = true;\r\n      const inActiveTimeLimit = 60 * 5000;\r\n\r\n      function checkForInActiveUser() {\r\n        if (!activeUser) {\r\n          return;\r\n        }\r\n        // only go to activity low mode on dashboard page\r\n        if (!body.hasClass('page-dashboard')) {\r\n          return;\r\n        }\r\n\r\n        if (new Date().getTime() - lastActivity > inActiveTimeLimit) {\r\n          activeUser = false;\r\n          body.addClass('view-mode--inactive');\r\n          body.removeClass('sidemenu-open');\r\n        }\r\n      }\r\n\r\n      function userActivityDetected() {\r\n        lastActivity = new Date().getTime();\r\n        if (!activeUser) {\r\n          activeUser = true;\r\n          body.removeClass('view-mode--inactive');\r\n          body.toggleClass('sidemenu-open', sidemenuOpen);\r\n        }\r\n      }\r\n\r\n      // mouse and keyboard is user activity\r\n      body.mousemove(userActivityDetected);\r\n      body.keydown(userActivityDetected);\r\n      // set useCapture = true to catch event here\r\n      document.addEventListener('wheel', userActivityDetected, { capture: true, passive: true });\r\n      // treat tab change as activity\r\n      document.addEventListener('visibilitychange', userActivityDetected);\r\n\r\n      // check every 2 seconds\r\n      setInterval(checkForInActiveUser, 2000);\r\n\r\n      appEvents.on('toggle-view-mode', () => {\r\n        lastActivity = 0;\r\n        checkForInActiveUser();\r\n      });\r\n\r\n      // handle document clicks that should hide things\r\n      body.click(evt => {\r\n        const target = $(evt.target);\r\n        if (target.parents().length === 0) {\r\n          return;\r\n        }\r\n\r\n        // ensure dropdown menu doesn't impact on z-index\r\n        body.find('.dropdown-menu-open').removeClass('dropdown-menu-open');\r\n\r\n        // for stuff that animates, slides out etc, clicking it needs to\r\n        // hide it right away\r\n        const clickAutoHide = target.closest('[data-click-hide]');\r\n        if (clickAutoHide.length) {\r\n          const clickAutoHideParent = clickAutoHide.parent();\r\n          clickAutoHide.detach();\r\n          setTimeout(() => {\r\n            clickAutoHideParent.append(clickAutoHide);\r\n          }, 100);\r\n        }\r\n\r\n        if (target.parents('.navbar-buttons--playlist').length === 0) {\r\n          playlistSrv.stop();\r\n        }\r\n\r\n        // hide search\r\n        if (body.find('.search-container').length > 0) {\r\n          if (target.parents('.search-results-container, .search-field-wrapper').length === 0) {\r\n            scope.$apply(() => {\r\n              scope.appEvent('hide-dash-search');\r\n            });\r\n          }\r\n        }\r\n\r\n        // hide popovers\r\n        const popover = elem.find('.popover');\r\n        if (popover.length > 0 && target.parents('.graph-legend').length === 0) {\r\n          popover.hide();\r\n        }\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('grafanaApp', grafanaAppDirective);\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport { variableTypes } from './variable';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class VariableEditorCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, datasourceSrv, variableSrv, templateSrv) {\r\n    $scope.variableTypes = variableTypes;\r\n    $scope.ctrl = {};\r\n    $scope.namePattern = /^(?!__).*$/;\r\n    $scope._ = _;\r\n    $scope.optionsLimit = 20;\r\n\r\n    $scope.refreshOptions = [\r\n      { value: 0, text: 'Never' },\r\n      { value: 1, text: 'On Dashboard Load' },\r\n      { value: 2, text: 'On Time Range Change' },\r\n    ];\r\n\r\n    $scope.sortOptions = [\r\n      { value: 0, text: 'Disabled' },\r\n      { value: 1, text: 'Alphabetical (asc)' },\r\n      { value: 2, text: 'Alphabetical (desc)' },\r\n      { value: 3, text: 'Numerical (asc)' },\r\n      { value: 4, text: 'Numerical (desc)' },\r\n      { value: 5, text: 'Alphabetical (case-insensitive, asc)' },\r\n      { value: 6, text: 'Alphabetical (case-insensitive, desc)' },\r\n    ];\r\n\r\n    $scope.hideOptions = [{ value: 0, text: '' }, { value: 1, text: 'Label' }, { value: 2, text: 'Variable' }];\r\n\r\n    $scope.init = () => {\r\n      $scope.mode = 'list';\r\n\r\n      $scope.variables = variableSrv.variables;\r\n      $scope.reset();\r\n\r\n      $scope.$watch('mode', val => {\r\n        if (val === 'new') {\r\n          $scope.reset();\r\n        }\r\n      });\r\n    };\r\n\r\n    $scope.setMode = mode => {\r\n      $scope.mode = mode;\r\n    };\r\n\r\n    $scope.add = () => {\r\n      if ($scope.isValid()) {\r\n        variableSrv.addVariable($scope.current);\r\n        $scope.update();\r\n      }\r\n    };\r\n\r\n    $scope.isValid = () => {\r\n      if (!$scope.ctrl.form.$valid) {\r\n        return false;\r\n      }\r\n\r\n      if (!$scope.current.name.match(/^\\w+$/)) {\r\n        appEvents.emit('alert-warning', ['Validation', 'Only word and digit characters are allowed in variable names']);\r\n        return false;\r\n      }\r\n\r\n      const sameName = _.find($scope.variables, { name: $scope.current.name });\r\n      if (sameName && sameName !== $scope.current) {\r\n        appEvents.emit('alert-warning', ['Validation', 'Variable with the same name already exists']);\r\n        return false;\r\n      }\r\n\r\n      if (\r\n        $scope.current.type === 'query' &&\r\n        $scope.current.query.match(new RegExp('\\\\$' + $scope.current.name + '(/| |$)'))\r\n      ) {\r\n        appEvents.emit('alert-warning', [\r\n          'Validation',\r\n          'Query cannot contain a reference to itself. Variable: $' + $scope.current.name,\r\n        ]);\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    };\r\n\r\n    $scope.validate = () => {\r\n      $scope.infoText = '';\r\n      if ($scope.current.type === 'adhoc' && $scope.current.datasource !== null) {\r\n        $scope.infoText = 'Adhoc filters are applied automatically to all queries that target this datasource';\r\n        datasourceSrv.get($scope.current.datasource).then(ds => {\r\n          if (!ds.getTagKeys) {\r\n            $scope.infoText = 'This datasource does not support adhoc filters yet.';\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    $scope.runQuery = () => {\r\n      $scope.optionsLimit = 20;\r\n      return variableSrv.updateOptions($scope.current).catch(err => {\r\n        if (err.data && err.data.message) {\r\n          err.message = err.data.message;\r\n        }\r\n        appEvents.emit('alert-error', ['Templating', 'Template variables could not be initialized: ' + err.message]);\r\n      });\r\n    };\r\n\r\n    $scope.edit = variable => {\r\n      $scope.current = variable;\r\n      $scope.currentIsNew = false;\r\n      $scope.mode = 'edit';\r\n      $scope.validate();\r\n    };\r\n\r\n    $scope.duplicate = variable => {\r\n      const clone = _.cloneDeep(variable.getSaveModel());\r\n      $scope.current = variableSrv.createVariableFromModel(clone);\r\n      $scope.current.name = 'copy_of_' + variable.name;\r\n      variableSrv.addVariable($scope.current);\r\n    };\r\n\r\n    $scope.update = () => {\r\n      if ($scope.isValid()) {\r\n        $scope.runQuery().then(() => {\r\n          $scope.reset();\r\n          $scope.mode = 'list';\r\n          templateSrv.updateTemplateData();\r\n        });\r\n      }\r\n    };\r\n\r\n    $scope.reset = () => {\r\n      $scope.currentIsNew = true;\r\n      $scope.current = variableSrv.createVariableFromModel({ type: 'query' });\r\n\r\n      // this is done here in case a new data source type variable was added\r\n      $scope.datasources = _.filter(datasourceSrv.getMetricSources(), ds => {\r\n        return !ds.meta.mixed && ds.value !== null;\r\n      });\r\n\r\n      $scope.datasourceTypes = _($scope.datasources)\r\n        .uniqBy('meta.id')\r\n        .map(ds => {\r\n          return { text: ds.meta.name, value: ds.meta.id };\r\n        })\r\n        .value();\r\n    };\r\n\r\n    $scope.typeChanged = function() {\r\n      const old = $scope.current;\r\n      $scope.current = variableSrv.createVariableFromModel({\r\n        type: $scope.current.type,\r\n      });\r\n      $scope.current.name = old.name;\r\n      $scope.current.hide = old.hide;\r\n      $scope.current.label = old.label;\r\n\r\n      const oldIndex = _.indexOf(this.variables, old);\r\n      if (oldIndex !== -1) {\r\n        this.variables[oldIndex] = $scope.current;\r\n      }\r\n\r\n      $scope.validate();\r\n    };\r\n\r\n    $scope.removeVariable = variable => {\r\n      variableSrv.removeVariable(variable);\r\n    };\r\n\r\n    $scope.showMoreOptions = () => {\r\n      $scope.optionsLimit += 20;\r\n    };\r\n  }\r\n}\r\n\r\ncoreModule.controller('VariableEditorCtrl', VariableEditorCtrl);\r\n","import kbn from 'app/core/utils/kbn';\r\nimport _ from 'lodash';\r\n\r\nfunction luceneEscape(value) {\r\n  return value.replace(/([\\!\\*\\+\\-\\=<>\\s\\&\\|\\(\\)\\[\\]\\{\\}\\^\\~\\?\\:\\\\/\"])/g, '\\\\$1');\r\n}\r\n\r\nexport class TemplateSrv {\r\n  variables: any[];\r\n\r\n  /*\r\n   * This regex matches 3 types of variable reference with an optional format specifier\r\n   * \\$(\\w+)                          $var1\r\n   * \\[\\[([\\s\\S]+?)(?::(\\w+))?\\]\\]    [[var2]] or [[var2:fmt2]]\r\n   * \\${(\\w+)(?::(\\w+))?}             ${var3} or ${var3:fmt3}\r\n   */\r\n  private regex = /\\$(\\w+)|\\[\\[([\\s\\S]+?)(?::(\\w+))?\\]\\]|\\${(\\w+)(?::(\\w+))?}/g;\r\n  private index = {};\r\n  private grafanaVariables = {};\r\n  private builtIns = {};\r\n\r\n  constructor() {\r\n    this.builtIns['__interval'] = { text: '1s', value: '1s' };\r\n    this.builtIns['__interval_ms'] = { text: '100', value: '100' };\r\n  }\r\n\r\n  init(variables) {\r\n    this.variables = variables;\r\n    this.updateTemplateData();\r\n  }\r\n\r\n  updateTemplateData() {\r\n    this.index = {};\r\n\r\n    for (let i = 0; i < this.variables.length; i++) {\r\n      const variable = this.variables[i];\r\n\r\n      if (!variable.current || (!variable.current.isNone && !variable.current.value)) {\r\n        continue;\r\n      }\r\n\r\n      this.index[variable.name] = variable;\r\n    }\r\n  }\r\n\r\n  variableInitialized(variable) {\r\n    this.index[variable.name] = variable;\r\n  }\r\n\r\n  getAdhocFilters(datasourceName) {\r\n    let filters = [];\r\n\r\n    if (this.variables) {\r\n      for (let i = 0; i < this.variables.length; i++) {\r\n        const variable = this.variables[i];\r\n        if (variable.type !== 'adhoc') {\r\n          continue;\r\n        }\r\n\r\n        // null is the \"default\" datasource\r\n        if (variable.datasource === null || variable.datasource === datasourceName) {\r\n          filters = filters.concat(variable.filters);\r\n        } else if (variable.datasource.indexOf('$') === 0) {\r\n          if (this.replace(variable.datasource) === datasourceName) {\r\n            filters = filters.concat(variable.filters);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return filters;\r\n  }\r\n\r\n  luceneFormat(value) {\r\n    if (typeof value === 'string') {\r\n      return luceneEscape(value);\r\n    }\r\n    if (value instanceof Array && value.length === 0) {\r\n      return '__empty__';\r\n    }\r\n    const quotedValues = _.map(value, val => {\r\n      return '\"' + luceneEscape(val) + '\"';\r\n    });\r\n    return '(' + quotedValues.join(' OR ') + ')';\r\n  }\r\n\r\n  formatValue(value, format, variable) {\r\n    // for some scopedVars there is no variable\r\n    variable = variable || {};\r\n\r\n    if (typeof format === 'function') {\r\n      return format(value, variable, this.formatValue);\r\n    }\r\n\r\n    switch (format) {\r\n      case 'regex': {\r\n        if (typeof value === 'string') {\r\n          return kbn.regexEscape(value);\r\n        }\r\n\r\n        const escapedValues = _.map(value, kbn.regexEscape);\r\n        if (escapedValues.length === 1) {\r\n          return escapedValues[0];\r\n        }\r\n        return '(' + escapedValues.join('|') + ')';\r\n      }\r\n      case 'lucene': {\r\n        return this.luceneFormat(value);\r\n      }\r\n      case 'pipe': {\r\n        if (typeof value === 'string') {\r\n          return value;\r\n        }\r\n        return value.join('|');\r\n      }\r\n      case 'distributed': {\r\n        if (typeof value === 'string') {\r\n          return value;\r\n        }\r\n        return this.distributeVariable(value, variable.name);\r\n      }\r\n      case 'csv': {\r\n        if (_.isArray(value)) {\r\n          return value.join(',');\r\n        }\r\n        return value;\r\n      }\r\n      default: {\r\n        if (_.isArray(value)) {\r\n          return '{' + value.join(',') + '}';\r\n        }\r\n        return value;\r\n      }\r\n    }\r\n  }\r\n\r\n  setGrafanaVariable(name, value) {\r\n    this.grafanaVariables[name] = value;\r\n  }\r\n\r\n  getVariableName(expression) {\r\n    this.regex.lastIndex = 0;\r\n    const match = this.regex.exec(expression);\r\n    if (!match) {\r\n      return null;\r\n    }\r\n    return match[1] || match[2];\r\n  }\r\n\r\n  variableExists(expression) {\r\n    const name = this.getVariableName(expression);\r\n    return name && this.index[name] !== void 0;\r\n  }\r\n\r\n  highlightVariablesAsHtml(str) {\r\n    if (!str || !_.isString(str)) {\r\n      return str;\r\n    }\r\n\r\n    str = _.escape(str);\r\n    this.regex.lastIndex = 0;\r\n    return str.replace(this.regex, (match, var1, var2, fmt2, var3) => {\r\n      if (this.index[var1 || var2 || var3] || this.builtIns[var1 || var2 || var3]) {\r\n        return '<span class=\"template-variable\">' + match + '</span>';\r\n      }\r\n      return match;\r\n    });\r\n  }\r\n\r\n  getAllValue(variable) {\r\n    if (variable.allValue) {\r\n      return variable.allValue;\r\n    }\r\n    const values = [];\r\n    for (let i = 1; i < variable.options.length; i++) {\r\n      values.push(variable.options[i].value);\r\n    }\r\n    return values;\r\n  }\r\n\r\n  replace(target, scopedVars?, format?) {\r\n    if (!target) {\r\n      return target;\r\n    }\r\n\r\n    let variable, systemValue, value, fmt;\r\n    this.regex.lastIndex = 0;\r\n\r\n    return target.replace(this.regex, (match, var1, var2, fmt2, var3, fmt3) => {\r\n      variable = this.index[var1 || var2 || var3];\r\n      fmt = fmt2 || fmt3 || format;\r\n      if (scopedVars) {\r\n        value = scopedVars[var1 || var2 || var3];\r\n        if (value) {\r\n          return this.formatValue(value.value, fmt, variable);\r\n        }\r\n      }\r\n\r\n      if (!variable) {\r\n        return match;\r\n      }\r\n\r\n      systemValue = this.grafanaVariables[variable.current.value];\r\n      if (systemValue) {\r\n        return this.formatValue(systemValue, fmt, variable);\r\n      }\r\n\r\n      value = variable.current.value;\r\n      if (this.isAllValue(value)) {\r\n        value = this.getAllValue(variable);\r\n        // skip formatting of custom all values\r\n        if (variable.allValue) {\r\n          return this.replace(value);\r\n        }\r\n      }\r\n\r\n      const res = this.formatValue(value, fmt, variable);\r\n      return res;\r\n    });\r\n  }\r\n\r\n  isAllValue(value) {\r\n    return value === '$__all' || (Array.isArray(value) && value[0] === '$__all');\r\n  }\r\n\r\n  replaceWithText(target, scopedVars) {\r\n    if (!target) {\r\n      return target;\r\n    }\r\n\r\n    let variable;\r\n    this.regex.lastIndex = 0;\r\n\r\n    return target.replace(this.regex, (match, var1, var2, fmt2, var3) => {\r\n      if (scopedVars) {\r\n        const option = scopedVars[var1 || var2 || var3];\r\n        if (option) {\r\n          return option.text;\r\n        }\r\n      }\r\n\r\n      variable = this.index[var1 || var2 || var3];\r\n      if (!variable) {\r\n        return match;\r\n      }\r\n\r\n      return this.grafanaVariables[variable.current.value] || variable.current.text;\r\n    });\r\n  }\r\n\r\n  fillVariableValuesForUrl(params, scopedVars) {\r\n    _.each(this.variables, variable => {\r\n      if (scopedVars && scopedVars[variable.name] !== void 0) {\r\n        if (scopedVars[variable.name].skipUrlSync) {\r\n          return;\r\n        }\r\n        params['var-' + variable.name] = scopedVars[variable.name].value;\r\n      } else {\r\n        if (variable.skipUrlSync) {\r\n          return;\r\n        }\r\n        params['var-' + variable.name] = variable.getValueForUrl();\r\n      }\r\n    });\r\n  }\r\n\r\n  distributeVariable(value, variable) {\r\n    value = _.map(value, (val, index) => {\r\n      if (index !== 0) {\r\n        return variable + '=' + val;\r\n      } else {\r\n        return val;\r\n      }\r\n    });\r\n    return value.join(',');\r\n  }\r\n}\r\n\r\nexport default new TemplateSrv();\r\n","export class Edge {\r\n  inputNode: Node;\r\n  outputNode: Node;\r\n\r\n  _linkTo(node, direction) {\r\n    if (direction <= 0) {\r\n      node.inputEdges.push(this);\r\n    }\r\n\r\n    if (direction >= 0) {\r\n      node.outputEdges.push(this);\r\n    }\r\n\r\n    node.edges.push(this);\r\n  }\r\n\r\n  link(inputNode: Node, outputNode: Node) {\r\n    if (!inputNode) {\r\n      throw Error('inputNode is required');\r\n    }\r\n\r\n    if (!outputNode) {\r\n      throw Error('outputNode is required');\r\n    }\r\n\r\n    this.unlink();\r\n    this.inputNode = inputNode;\r\n    this.outputNode = outputNode;\r\n\r\n    this._linkTo(inputNode, 1);\r\n    this._linkTo(outputNode, -1);\r\n    return this;\r\n  }\r\n\r\n  unlink() {\r\n    let pos;\r\n    const inode = this.inputNode;\r\n    const onode = this.outputNode;\r\n\r\n    if (!(inode && onode)) {\r\n      return;\r\n    }\r\n\r\n    pos = inode.edges.indexOf(this);\r\n    if (pos > -1) {\r\n      inode.edges.splice(pos, 1);\r\n    }\r\n\r\n    pos = onode.edges.indexOf(this);\r\n    if (pos > -1) {\r\n      onode.edges.splice(pos, 1);\r\n    }\r\n\r\n    pos = inode.outputEdges.indexOf(this);\r\n    if (pos > -1) {\r\n      inode.outputEdges.splice(pos, 1);\r\n    }\r\n\r\n    pos = onode.inputEdges.indexOf(this);\r\n    if (pos > -1) {\r\n      onode.inputEdges.splice(pos, 1);\r\n    }\r\n\r\n    this.inputNode = null;\r\n    this.outputNode = null;\r\n  }\r\n}\r\n\r\nexport class Node {\r\n  name: string;\r\n  edges: Edge[];\r\n  inputEdges: Edge[];\r\n  outputEdges: Edge[];\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n    this.edges = [];\r\n    this.inputEdges = [];\r\n    this.outputEdges = [];\r\n  }\r\n\r\n  getEdgeFrom(from: string | Node): Edge {\r\n    if (!from) {\r\n      return null;\r\n    }\r\n\r\n    if (typeof from === 'object') {\r\n      return this.inputEdges.find(e => e.inputNode.name === from.name);\r\n    }\r\n\r\n    return this.inputEdges.find(e => e.inputNode.name === from);\r\n  }\r\n\r\n  getEdgeTo(to: string | Node): Edge {\r\n    if (!to) {\r\n      return null;\r\n    }\r\n\r\n    if (typeof to === 'object') {\r\n      return this.outputEdges.find(e => e.outputNode.name === to.name);\r\n    }\r\n\r\n    return this.outputEdges.find(e => e.outputNode.name === to);\r\n  }\r\n\r\n  getOptimizedInputEdges(): Edge[] {\r\n    const toBeRemoved = [];\r\n    this.inputEdges.forEach(e => {\r\n      const inputEdgesNodes = e.inputNode.inputEdges.map(e => e.inputNode);\r\n\r\n      inputEdgesNodes.forEach(n => {\r\n        const edgeToRemove = n.getEdgeTo(this.name);\r\n        if (edgeToRemove) {\r\n          toBeRemoved.push(edgeToRemove);\r\n        }\r\n      });\r\n    });\r\n\r\n    return this.inputEdges.filter(e => toBeRemoved.indexOf(e) === -1);\r\n  }\r\n}\r\n\r\nexport class Graph {\r\n  nodes = {};\r\n\r\n  constructor() {}\r\n\r\n  createNode(name: string): Node {\r\n    const n = new Node(name);\r\n    this.nodes[name] = n;\r\n    return n;\r\n  }\r\n\r\n  createNodes(names: string[]): Node[] {\r\n    const nodes = [];\r\n    names.forEach(name => {\r\n      nodes.push(this.createNode(name));\r\n    });\r\n    return nodes;\r\n  }\r\n\r\n  link(input: string | string[] | Node | Node[], output: string | string[] | Node | Node[]): Edge[] {\r\n    let inputArr = [];\r\n    let outputArr = [];\r\n    const inputNodes = [];\r\n    const outputNodes = [];\r\n\r\n    if (input instanceof Array) {\r\n      inputArr = input;\r\n    } else {\r\n      inputArr = [input];\r\n    }\r\n\r\n    if (output instanceof Array) {\r\n      outputArr = output;\r\n    } else {\r\n      outputArr = [output];\r\n    }\r\n\r\n    for (let n = 0; n < inputArr.length; n++) {\r\n      const i = inputArr[n];\r\n      if (typeof i === 'string') {\r\n        const n = this.getNode(i);\r\n        if (!n) {\r\n          throw Error(`cannot link input node named ${i} since it doesn't exist in graph`);\r\n        }\r\n        inputNodes.push(n);\r\n      } else {\r\n        inputNodes.push(i);\r\n      }\r\n    }\r\n\r\n    for (let n = 0; n < outputArr.length; n++) {\r\n      const i = outputArr[n];\r\n      if (typeof i === 'string') {\r\n        const n = this.getNode(i);\r\n        if (!n) {\r\n          throw Error(`cannot link output node named ${i} since it doesn't exist in graph`);\r\n        }\r\n        outputNodes.push(n);\r\n      } else {\r\n        outputNodes.push(i);\r\n      }\r\n    }\r\n\r\n    const edges = [];\r\n    inputNodes.forEach(input => {\r\n      outputNodes.forEach(output => {\r\n        edges.push(this.createEdge().link(input, output));\r\n      });\r\n    });\r\n    return edges;\r\n  }\r\n\r\n  createEdge(): Edge {\r\n    return new Edge();\r\n  }\r\n\r\n  getNode(name: string): Node {\r\n    return this.nodes[name];\r\n  }\r\n}\r\n\r\nexport const printGraph = (g: Graph) => {\r\n  Object.keys(g.nodes).forEach(name => {\r\n    const n = g.nodes[name];\r\n    let outputEdges = n.outputEdges.map(e => e.outputNode.name).join(', ');\r\n    if (!outputEdges) {\r\n      outputEdges = '<none>';\r\n    }\r\n    let inputEdges = n.inputEdges.map(e => e.inputNode.name).join(', ');\r\n    if (!inputEdges) {\r\n      inputEdges = '<none>';\r\n    }\r\n    console.log(`${n.name}:\\n - links to:   ${outputEdges}\\n - links from: ${inputEdges}`);\r\n  });\r\n};\r\n","// Libaries\r\nimport angular from 'angular';\r\nimport _ from 'lodash';\r\n\r\n// Utils & Services\r\nimport coreModule from 'app/core/core_module';\r\nimport { variableTypes } from './variable';\r\nimport { Graph } from 'app/core/utils/dag';\r\n\r\nexport class VariableSrv {\r\n  dashboard: any;\r\n  variables: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $rootScope, private $q, private $location, private $injector, private templateSrv) {\r\n    $rootScope.$on('template-variable-value-updated', this.updateUrlParamsWithCurrentVariables.bind(this), $rootScope);\r\n  }\r\n\r\n  init(dashboard) {\r\n    this.dashboard = dashboard;\r\n    this.dashboard.events.on('time-range-updated', this.onTimeRangeUpdated.bind(this));\r\n\r\n    // create working class models representing variables\r\n    this.variables = dashboard.templating.list = dashboard.templating.list.map(this.createVariableFromModel.bind(this));\r\n    this.templateSrv.init(this.variables);\r\n\r\n    // init variables\r\n    for (const variable of this.variables) {\r\n      variable.initLock = this.$q.defer();\r\n    }\r\n\r\n    const queryParams = this.$location.search();\r\n    return this.$q\r\n      .all(\r\n        this.variables.map(variable => {\r\n          return this.processVariable(variable, queryParams);\r\n        })\r\n      )\r\n      .then(() => {\r\n        this.templateSrv.updateTemplateData();\r\n      });\r\n  }\r\n\r\n  onTimeRangeUpdated() {\r\n    const promises = this.variables.filter(variable => variable.refresh === 2).map(variable => {\r\n      const previousOptions = variable.options.slice();\r\n\r\n      return variable.updateOptions().then(() => {\r\n        if (angular.toJson(previousOptions) !== angular.toJson(variable.options)) {\r\n          this.$rootScope.$emit('template-variable-value-updated');\r\n        }\r\n      });\r\n    });\r\n\r\n    return this.$q.all(promises).then(() => {\r\n      this.dashboard.startRefresh();\r\n    });\r\n  }\r\n\r\n  processVariable(variable, queryParams) {\r\n    const dependencies = [];\r\n\r\n    for (const otherVariable of this.variables) {\r\n      if (variable.dependsOn(otherVariable)) {\r\n        dependencies.push(otherVariable.initLock.promise);\r\n      }\r\n    }\r\n\r\n    return this.$q\r\n      .all(dependencies)\r\n      .then(() => {\r\n        const urlValue = queryParams['var-' + variable.name];\r\n        if (urlValue !== void 0) {\r\n          return variable.setValueFromUrl(urlValue).then(variable.initLock.resolve);\r\n        }\r\n\r\n        if (variable.refresh === 1 || variable.refresh === 2) {\r\n          return variable.updateOptions().then(variable.initLock.resolve);\r\n        }\r\n\r\n        variable.initLock.resolve();\r\n      })\r\n      .finally(() => {\r\n        this.templateSrv.variableInitialized(variable);\r\n        delete variable.initLock;\r\n      });\r\n  }\r\n\r\n  createVariableFromModel(model) {\r\n    const ctor = variableTypes[model.type].ctor;\r\n    if (!ctor) {\r\n      throw {\r\n        message: 'Unable to find variable constructor for ' + model.type,\r\n      };\r\n    }\r\n\r\n    const variable = this.$injector.instantiate(ctor, { model: model });\r\n    return variable;\r\n  }\r\n\r\n  addVariable(variable) {\r\n    this.variables.push(variable);\r\n    this.templateSrv.updateTemplateData();\r\n    this.dashboard.updateSubmenuVisibility();\r\n  }\r\n\r\n  removeVariable(variable) {\r\n    const index = _.indexOf(this.variables, variable);\r\n    this.variables.splice(index, 1);\r\n    this.templateSrv.updateTemplateData();\r\n    this.dashboard.updateSubmenuVisibility();\r\n  }\r\n\r\n  updateOptions(variable) {\r\n    return variable.updateOptions();\r\n  }\r\n\r\n  variableUpdated(variable, emitChangeEvents?) {\r\n    // if there is a variable lock ignore cascading update because we are in a boot up scenario\r\n    if (variable.initLock) {\r\n      return this.$q.when();\r\n    }\r\n\r\n    const g = this.createGraph();\r\n    const node = g.getNode(variable.name);\r\n    let promises = [];\r\n    if (node) {\r\n      promises = node.getOptimizedInputEdges().map(e => {\r\n        return this.updateOptions(this.variables.find(v => v.name === e.inputNode.name));\r\n      });\r\n    }\r\n\r\n    return this.$q.all(promises).then(() => {\r\n      if (emitChangeEvents) {\r\n        this.$rootScope.$emit('template-variable-value-updated');\r\n        this.dashboard.startRefresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  selectOptionsForCurrentValue(variable) {\r\n    let i, y, value, option;\r\n    const selected: any = [];\r\n\r\n    for (i = 0; i < variable.options.length; i++) {\r\n      option = variable.options[i];\r\n      option.selected = false;\r\n      if (_.isArray(variable.current.value)) {\r\n        for (y = 0; y < variable.current.value.length; y++) {\r\n          value = variable.current.value[y];\r\n          if (option.value === value) {\r\n            option.selected = true;\r\n            selected.push(option);\r\n          }\r\n        }\r\n      } else if (option.value === variable.current.value) {\r\n        option.selected = true;\r\n        selected.push(option);\r\n      }\r\n    }\r\n\r\n    return selected;\r\n  }\r\n\r\n  validateVariableSelectionState(variable) {\r\n    if (!variable.current) {\r\n      variable.current = {};\r\n    }\r\n\r\n    if (_.isArray(variable.current.value)) {\r\n      let selected = this.selectOptionsForCurrentValue(variable);\r\n\r\n      // if none pick first\r\n      if (selected.length === 0) {\r\n        selected = variable.options[0];\r\n      } else {\r\n        selected = {\r\n          value: _.map(selected, val => {\r\n            return val.value;\r\n          }),\r\n          text: _.map(selected, val => {\r\n            return val.text;\r\n          }).join(' + '),\r\n        };\r\n      }\r\n\r\n      return variable.setValue(selected);\r\n    } else {\r\n      const currentOption = _.find(variable.options, {\r\n        text: variable.current.text,\r\n      });\r\n      if (currentOption) {\r\n        return variable.setValue(currentOption);\r\n      } else {\r\n        if (!variable.options.length) {\r\n          return Promise.resolve();\r\n        }\r\n        return variable.setValue(variable.options[0]);\r\n      }\r\n    }\r\n  }\r\n\r\n  setOptionFromUrl(variable, urlValue) {\r\n    let promise = this.$q.when();\r\n\r\n    if (variable.refresh) {\r\n      promise = variable.updateOptions();\r\n    }\r\n\r\n    return promise.then(() => {\r\n      let option = _.find(variable.options, op => {\r\n        return op.text === urlValue || op.value === urlValue;\r\n      });\r\n\r\n      let defaultText = urlValue;\r\n      const defaultValue = urlValue;\r\n\r\n      if (!option && _.isArray(urlValue)) {\r\n        defaultText = [];\r\n\r\n        for (let n = 0; n < urlValue.length; n++) {\r\n          const t = _.find(variable.options, op => {\r\n            return op.value === urlValue[n];\r\n          });\r\n\r\n          if (t) {\r\n            defaultText.push(t.text);\r\n          }\r\n        }\r\n      }\r\n\r\n      option = option || { text: defaultText, value: defaultValue };\r\n      return variable.setValue(option);\r\n    });\r\n  }\r\n\r\n  setOptionAsCurrent(variable, option) {\r\n    variable.current = _.cloneDeep(option);\r\n\r\n    if (_.isArray(variable.current.text)) {\r\n      variable.current.text = variable.current.text.join(' + ');\r\n    }\r\n\r\n    this.selectOptionsForCurrentValue(variable);\r\n    return this.variableUpdated(variable);\r\n  }\r\n\r\n  updateUrlParamsWithCurrentVariables() {\r\n    // update url\r\n    const params = this.$location.search();\r\n\r\n    // remove variable params\r\n    _.each(params, (value, key) => {\r\n      if (key.indexOf('var-') === 0) {\r\n        delete params[key];\r\n      }\r\n    });\r\n\r\n    // add new values\r\n    this.templateSrv.fillVariableValuesForUrl(params);\r\n    // update url\r\n    this.$location.search(params);\r\n  }\r\n\r\n  setAdhocFilter(options) {\r\n    let variable = _.find(this.variables, {\r\n      type: 'adhoc',\r\n      datasource: options.datasource,\r\n    });\r\n    if (!variable) {\r\n      variable = this.createVariableFromModel({\r\n        name: 'Filters',\r\n        type: 'adhoc',\r\n        datasource: options.datasource,\r\n      });\r\n      this.addVariable(variable);\r\n    }\r\n\r\n    const filters = variable.filters;\r\n    let filter = _.find(filters, { key: options.key, value: options.value });\r\n\r\n    if (!filter) {\r\n      filter = { key: options.key, value: options.value };\r\n      filters.push(filter);\r\n    }\r\n\r\n    filter.operator = options.operator;\r\n    this.variableUpdated(variable, true);\r\n  }\r\n\r\n  createGraph() {\r\n    const g = new Graph();\r\n\r\n    this.variables.forEach(v => {\r\n      g.createNode(v.name);\r\n    });\r\n\r\n    this.variables.forEach(v1 => {\r\n      this.variables.forEach(v2 => {\r\n        if (v1 === v2) {\r\n          return;\r\n        }\r\n\r\n        if (v1.dependsOn(v2)) {\r\n          g.link(v1.name, v2.name);\r\n        }\r\n      });\r\n    });\r\n\r\n    return g;\r\n  }\r\n}\r\n\r\ncoreModule.service('variableSrv', VariableSrv);\r\n","import _ from 'lodash';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport { Variable, assignModelProperties, variableTypes } from './variable';\r\n\r\nexport class IntervalVariable implements Variable {\r\n  name: string;\r\n  auto_count: number; // tslint:disable-line variable-name\r\n  auto_min: number; // tslint:disable-line variable-name\r\n  options: any;\r\n  auto: boolean;\r\n  query: string;\r\n  refresh: number;\r\n  current: any;\r\n  skipUrlSync: boolean;\r\n\r\n  defaults = {\r\n    type: 'interval',\r\n    name: '',\r\n    hide: 0,\r\n    label: '',\r\n    refresh: 2,\r\n    options: [],\r\n    current: {},\r\n    query: '1m,10m,30m,1h,6h,12h,1d,7d,14d,30d',\r\n    auto: false,\r\n    auto_min: '10s',\r\n    auto_count: 30,\r\n    skipUrlSync: false,\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor(private model, private timeSrv, private templateSrv, private variableSrv) {\r\n    assignModelProperties(this, model, this.defaults);\r\n    this.refresh = 2;\r\n  }\r\n\r\n  getSaveModel() {\r\n    assignModelProperties(this.model, this, this.defaults);\r\n    return this.model;\r\n  }\r\n\r\n  setValue(option) {\r\n    this.updateAutoValue();\r\n    return this.variableSrv.setOptionAsCurrent(this, option);\r\n  }\r\n\r\n  updateAutoValue() {\r\n    if (!this.auto) {\r\n      return;\r\n    }\r\n\r\n    // add auto option if missing\r\n    if (this.options.length && this.options[0].text !== 'auto') {\r\n      this.options.unshift({\r\n        text: 'auto',\r\n        value: '$__auto_interval_' + this.name,\r\n      });\r\n    }\r\n\r\n    const res = kbn.calculateInterval(this.timeSrv.timeRange(), this.auto_count, this.auto_min);\r\n    this.templateSrv.setGrafanaVariable('$__auto_interval_' + this.name, res.interval);\r\n    // for backward compatibility, to be removed eventually\r\n    this.templateSrv.setGrafanaVariable('$__auto_interval', res.interval);\r\n  }\r\n\r\n  updateOptions() {\r\n    // extract options between quotes and/or comma\r\n    this.options = _.map(this.query.match(/([\"'])(.*?)\\1|\\w+/g), text => {\r\n      text = text.replace(/[\"']+/g, '');\r\n      return { text: text.trim(), value: text.trim() };\r\n    });\r\n\r\n    this.updateAutoValue();\r\n    return this.variableSrv.validateVariableSelectionState(this);\r\n  }\r\n\r\n  dependsOn(variable) {\r\n    return false;\r\n  }\r\n\r\n  setValueFromUrl(urlValue) {\r\n    this.updateAutoValue();\r\n    return this.variableSrv.setOptionFromUrl(this, urlValue);\r\n  }\r\n\r\n  getValueForUrl() {\r\n    return this.current.value;\r\n  }\r\n}\r\n\r\nvariableTypes['interval'] = {\r\n  name: 'Interval',\r\n  ctor: IntervalVariable,\r\n  description: 'Define a timespan interval (ex 1m, 1h, 1d)',\r\n};\r\n","import _ from 'lodash';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport { Variable, containsVariable, assignModelProperties, variableTypes } from './variable';\r\n\r\nfunction getNoneOption() {\r\n  return { text: 'None', value: '', isNone: true };\r\n}\r\n\r\nexport class QueryVariable implements Variable {\r\n  datasource: any;\r\n  query: any;\r\n  regex: any;\r\n  sort: any;\r\n  options: any;\r\n  current: any;\r\n  refresh: number;\r\n  hide: number;\r\n  name: string;\r\n  multi: boolean;\r\n  includeAll: boolean;\r\n  useTags: boolean;\r\n  tagsQuery: string;\r\n  tagValuesQuery: string;\r\n  tags: any[];\r\n  skipUrlSync: boolean;\r\n\r\n  defaults = {\r\n    type: 'query',\r\n    label: null,\r\n    query: '',\r\n    regex: '',\r\n    sort: 0,\r\n    datasource: null,\r\n    refresh: 0,\r\n    hide: 0,\r\n    name: '',\r\n    multi: false,\r\n    includeAll: false,\r\n    allValue: null,\r\n    options: [],\r\n    current: {},\r\n    tags: [],\r\n    useTags: false,\r\n    tagsQuery: '',\r\n    tagValuesQuery: '',\r\n    skipUrlSync: false,\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor(private model, private datasourceSrv, private templateSrv, private variableSrv, private timeSrv) {\r\n    // copy model properties to this instance\r\n    assignModelProperties(this, model, this.defaults);\r\n  }\r\n\r\n  getSaveModel() {\r\n    // copy back model properties to model\r\n    assignModelProperties(this.model, this, this.defaults);\r\n\r\n    // remove options\r\n    if (this.refresh !== 0) {\r\n      this.model.options = [];\r\n    }\r\n\r\n    return this.model;\r\n  }\r\n\r\n  setValue(option) {\r\n    return this.variableSrv.setOptionAsCurrent(this, option);\r\n  }\r\n\r\n  setValueFromUrl(urlValue) {\r\n    return this.variableSrv.setOptionFromUrl(this, urlValue);\r\n  }\r\n\r\n  getValueForUrl() {\r\n    if (this.current.text === 'All') {\r\n      return 'All';\r\n    }\r\n    return this.current.value;\r\n  }\r\n\r\n  updateOptions() {\r\n    return this.datasourceSrv\r\n      .get(this.datasource)\r\n      .then(this.updateOptionsFromMetricFindQuery.bind(this))\r\n      .then(this.updateTags.bind(this))\r\n      .then(this.variableSrv.validateVariableSelectionState.bind(this.variableSrv, this));\r\n  }\r\n\r\n  updateTags(datasource) {\r\n    if (this.useTags) {\r\n      return this.metricFindQuery(datasource, this.tagsQuery).then(results => {\r\n        this.tags = [];\r\n        for (let i = 0; i < results.length; i++) {\r\n          this.tags.push(results[i].text);\r\n        }\r\n        return datasource;\r\n      });\r\n    } else {\r\n      delete this.tags;\r\n    }\r\n\r\n    return datasource;\r\n  }\r\n\r\n  getValuesForTag(tagKey) {\r\n    return this.datasourceSrv.get(this.datasource).then(datasource => {\r\n      const query = this.tagValuesQuery.replace('$tag', tagKey);\r\n      return this.metricFindQuery(datasource, query).then(results => {\r\n        return _.map(results, value => {\r\n          return value.text;\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  updateOptionsFromMetricFindQuery(datasource) {\r\n    return this.metricFindQuery(datasource, this.query).then(results => {\r\n      this.options = this.metricNamesToVariableValues(results);\r\n      if (this.includeAll) {\r\n        this.addAllOption();\r\n      }\r\n      if (!this.options.length) {\r\n        this.options.push(getNoneOption());\r\n      }\r\n      return datasource;\r\n    });\r\n  }\r\n\r\n  metricFindQuery(datasource, query) {\r\n    const options = { range: undefined, variable: this };\r\n\r\n    if (this.refresh === 2) {\r\n      options.range = this.timeSrv.timeRange();\r\n    }\r\n\r\n    return datasource.metricFindQuery(query, options);\r\n  }\r\n\r\n  addAllOption() {\r\n    this.options.unshift({ text: 'All', value: '$__all' });\r\n  }\r\n\r\n  metricNamesToVariableValues(metricNames) {\r\n    let regex, options, i, matches;\r\n    options = [];\r\n\r\n    if (this.regex) {\r\n      regex = kbn.stringToJsRegex(this.templateSrv.replace(this.regex, {}, 'regex'));\r\n    }\r\n    for (i = 0; i < metricNames.length; i++) {\r\n      const item = metricNames[i];\r\n      let text = item.text === undefined || item.text === null ? item.value : item.text;\r\n\r\n      let value = item.value === undefined || item.value === null ? item.text : item.value;\r\n\r\n      if (_.isNumber(value)) {\r\n        value = value.toString();\r\n      }\r\n\r\n      if (_.isNumber(text)) {\r\n        text = text.toString();\r\n      }\r\n\r\n      if (regex) {\r\n        matches = regex.exec(value);\r\n        if (!matches) {\r\n          continue;\r\n        }\r\n        if (matches.length > 1) {\r\n          value = matches[1];\r\n          text = matches[1];\r\n        }\r\n      }\r\n\r\n      options.push({ text: text, value: value });\r\n    }\r\n\r\n    options = _.uniqBy(options, 'value');\r\n    return this.sortVariableValues(options, this.sort);\r\n  }\r\n\r\n  sortVariableValues(options, sortOrder) {\r\n    if (sortOrder === 0) {\r\n      return options;\r\n    }\r\n\r\n    const sortType = Math.ceil(sortOrder / 2);\r\n    const reverseSort = sortOrder % 2 === 0;\r\n\r\n    if (sortType === 1) {\r\n      options = _.sortBy(options, 'text');\r\n    } else if (sortType === 2) {\r\n      options = _.sortBy(options, opt => {\r\n        const matches = opt.text.match(/.*?(\\d+).*/);\r\n        if (!matches || matches.length < 2) {\r\n          return -1;\r\n        } else {\r\n          return parseInt(matches[1], 10);\r\n        }\r\n      });\r\n    } else if (sortType === 3) {\r\n      options = _.sortBy(options, opt => {\r\n        return _.toLower(opt.text);\r\n      });\r\n    }\r\n\r\n    if (reverseSort) {\r\n      options = options.reverse();\r\n    }\r\n\r\n    return options;\r\n  }\r\n\r\n  dependsOn(variable) {\r\n    return containsVariable(this.query, this.datasource, this.regex, variable.name);\r\n  }\r\n}\r\n\r\nvariableTypes['query'] = {\r\n  name: 'Query',\r\n  ctor: QueryVariable,\r\n  description: 'Variable values are fetched from a datasource query',\r\n  supportsMulti: true,\r\n};\r\n","import kbn from 'app/core/utils/kbn';\r\nimport { Variable, containsVariable, assignModelProperties, variableTypes } from './variable';\r\n\r\nexport class DatasourceVariable implements Variable {\r\n  regex: any;\r\n  query: string;\r\n  options: any;\r\n  current: any;\r\n  refresh: any;\r\n  skipUrlSync: boolean;\r\n\r\n  defaults = {\r\n    type: 'datasource',\r\n    name: '',\r\n    hide: 0,\r\n    label: '',\r\n    current: {},\r\n    regex: '',\r\n    options: [],\r\n    query: '',\r\n    refresh: 1,\r\n    skipUrlSync: false,\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor(private model, private datasourceSrv, private variableSrv, private templateSrv) {\r\n    assignModelProperties(this, model, this.defaults);\r\n    this.refresh = 1;\r\n  }\r\n\r\n  getSaveModel() {\r\n    assignModelProperties(this.model, this, this.defaults);\r\n\r\n    // don't persist options\r\n    this.model.options = [];\r\n    return this.model;\r\n  }\r\n\r\n  setValue(option) {\r\n    return this.variableSrv.setOptionAsCurrent(this, option);\r\n  }\r\n\r\n  updateOptions() {\r\n    const options = [];\r\n    const sources = this.datasourceSrv.getMetricSources({ skipVariables: true });\r\n    let regex;\r\n\r\n    if (this.regex) {\r\n      regex = this.templateSrv.replace(this.regex, null, 'regex');\r\n      regex = kbn.stringToJsRegex(regex);\r\n    }\r\n\r\n    for (let i = 0; i < sources.length; i++) {\r\n      const source = sources[i];\r\n      // must match on type\r\n      if (source.meta.id !== this.query) {\r\n        continue;\r\n      }\r\n\r\n      if (regex && !regex.exec(source.name)) {\r\n        continue;\r\n      }\r\n\r\n      options.push({ text: source.name, value: source.name });\r\n    }\r\n\r\n    if (options.length === 0) {\r\n      options.push({ text: 'No data sources found', value: '' });\r\n    }\r\n\r\n    this.options = options;\r\n    return this.variableSrv.validateVariableSelectionState(this);\r\n  }\r\n\r\n  dependsOn(variable) {\r\n    if (this.regex) {\r\n      return containsVariable(this.regex, variable.name);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  setValueFromUrl(urlValue) {\r\n    return this.variableSrv.setOptionFromUrl(this, urlValue);\r\n  }\r\n\r\n  getValueForUrl() {\r\n    return this.current.value;\r\n  }\r\n}\r\n\r\nvariableTypes['datasource'] = {\r\n  name: 'Datasource',\r\n  ctor: DatasourceVariable,\r\n  description: 'Enabled you to dynamically switch the datasource for multiple panels',\r\n};\r\n","import _ from 'lodash';\r\nimport { Variable, assignModelProperties, variableTypes } from './variable';\r\n\r\nexport class CustomVariable implements Variable {\r\n  query: string;\r\n  options: any;\r\n  includeAll: boolean;\r\n  multi: boolean;\r\n  current: any;\r\n  skipUrlSync: boolean;\r\n\r\n  defaults = {\r\n    type: 'custom',\r\n    name: '',\r\n    label: '',\r\n    hide: 0,\r\n    options: [],\r\n    current: {},\r\n    query: '',\r\n    includeAll: false,\r\n    multi: false,\r\n    allValue: null,\r\n    skipUrlSync: false,\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor(private model, private variableSrv) {\r\n    assignModelProperties(this, model, this.defaults);\r\n  }\r\n\r\n  setValue(option) {\r\n    return this.variableSrv.setOptionAsCurrent(this, option);\r\n  }\r\n\r\n  getSaveModel() {\r\n    assignModelProperties(this.model, this, this.defaults);\r\n    return this.model;\r\n  }\r\n\r\n  updateOptions() {\r\n    // extract options in comma separated string\r\n    this.options = _.map(this.query.split(/[,]+/), text => {\r\n      return { text: text.trim(), value: text.trim() };\r\n    });\r\n\r\n    if (this.includeAll) {\r\n      this.addAllOption();\r\n    }\r\n\r\n    return this.variableSrv.validateVariableSelectionState(this);\r\n  }\r\n\r\n  addAllOption() {\r\n    this.options.unshift({ text: 'All', value: '$__all' });\r\n  }\r\n\r\n  dependsOn(variable) {\r\n    return false;\r\n  }\r\n\r\n  setValueFromUrl(urlValue) {\r\n    return this.variableSrv.setOptionFromUrl(this, urlValue);\r\n  }\r\n\r\n  getValueForUrl() {\r\n    if (this.current.text === 'All') {\r\n      return 'All';\r\n    }\r\n    return this.current.value;\r\n  }\r\n}\r\n\r\nvariableTypes['custom'] = {\r\n  name: 'Custom',\r\n  ctor: CustomVariable,\r\n  description: 'Define variable values manually',\r\n  supportsMulti: true,\r\n};\r\n","import { Variable, assignModelProperties, variableTypes } from './variable';\r\n\r\nexport class ConstantVariable implements Variable {\r\n  query: string;\r\n  options: any[];\r\n  current: any;\r\n  skipUrlSync: boolean;\r\n\r\n  defaults = {\r\n    type: 'constant',\r\n    name: '',\r\n    hide: 2,\r\n    label: '',\r\n    query: '',\r\n    current: {},\r\n    options: [],\r\n    skipUrlSync: false,\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor(private model, private variableSrv) {\r\n    assignModelProperties(this, model, this.defaults);\r\n  }\r\n\r\n  getSaveModel() {\r\n    assignModelProperties(this.model, this, this.defaults);\r\n    return this.model;\r\n  }\r\n\r\n  setValue(option) {\r\n    this.variableSrv.setOptionAsCurrent(this, option);\r\n  }\r\n\r\n  updateOptions() {\r\n    this.options = [{ text: this.query.trim(), value: this.query.trim() }];\r\n    this.setValue(this.options[0]);\r\n    return Promise.resolve();\r\n  }\r\n\r\n  dependsOn(variable) {\r\n    return false;\r\n  }\r\n\r\n  setValueFromUrl(urlValue) {\r\n    return this.variableSrv.setOptionFromUrl(this, urlValue);\r\n  }\r\n\r\n  getValueForUrl() {\r\n    return this.current.value;\r\n  }\r\n}\r\n\r\nvariableTypes['constant'] = {\r\n  name: 'Constant',\r\n  ctor: ConstantVariable,\r\n  description: 'Define a hidden constant variable, useful for metric prefixes in dashboards you want to share',\r\n};\r\n","import _ from 'lodash';\r\nimport { Variable, assignModelProperties, variableTypes } from './variable';\r\n\r\nexport class AdhocVariable implements Variable {\r\n  filters: any[];\r\n  skipUrlSync: boolean;\r\n\r\n  defaults = {\r\n    type: 'adhoc',\r\n    name: '',\r\n    label: '',\r\n    hide: 0,\r\n    datasource: null,\r\n    filters: [],\r\n    skipUrlSync: false,\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor(private model) {\r\n    assignModelProperties(this, model, this.defaults);\r\n  }\r\n\r\n  setValue(option) {\r\n    return Promise.resolve();\r\n  }\r\n\r\n  getSaveModel() {\r\n    assignModelProperties(this.model, this, this.defaults);\r\n    return this.model;\r\n  }\r\n\r\n  updateOptions() {\r\n    return Promise.resolve();\r\n  }\r\n\r\n  dependsOn(variable) {\r\n    return false;\r\n  }\r\n\r\n  setValueFromUrl(urlValue) {\r\n    if (!_.isArray(urlValue)) {\r\n      urlValue = [urlValue];\r\n    }\r\n\r\n    this.filters = urlValue.map(item => {\r\n      const values = item.split('|').map(value => {\r\n        return this.unescapeDelimiter(value);\r\n      });\r\n      return {\r\n        key: values[0],\r\n        operator: values[1],\r\n        value: values[2],\r\n      };\r\n    });\r\n\r\n    return Promise.resolve();\r\n  }\r\n\r\n  getValueForUrl() {\r\n    return this.filters.map(filter => {\r\n      return [filter.key, filter.operator, filter.value]\r\n        .map(value => {\r\n          return this.escapeDelimiter(value);\r\n        })\r\n        .join('|');\r\n    });\r\n  }\r\n\r\n  escapeDelimiter(value) {\r\n    return value.replace(/\\|/g, '__gfp__');\r\n  }\r\n\r\n  unescapeDelimiter(value) {\r\n    return value.replace(/__gfp__/g, '|');\r\n  }\r\n\r\n  setFilters(filters: any[]) {\r\n    this.filters = filters;\r\n  }\r\n}\r\n\r\nvariableTypes['adhoc'] = {\r\n  name: 'Ad hoc filters',\r\n  ctor: AdhocVariable,\r\n  description: 'Add key/value filters on the fly',\r\n};\r\n","import { Variable, assignModelProperties, variableTypes } from './variable';\r\n\r\nexport class TextBoxVariable implements Variable {\r\n  query: string;\r\n  current: any;\r\n  options: any[];\r\n  skipUrlSync: boolean;\r\n\r\n  defaults = {\r\n    type: 'textbox',\r\n    name: '',\r\n    hide: 2,\r\n    label: '',\r\n    query: '',\r\n    current: {},\r\n    options: [],\r\n    skipUrlSync: false,\r\n  };\r\n\r\n  /** @ngInject */\r\n  constructor(private model, private variableSrv) {\r\n    assignModelProperties(this, model, this.defaults);\r\n  }\r\n\r\n  getSaveModel() {\r\n    assignModelProperties(this.model, this, this.defaults);\r\n    return this.model;\r\n  }\r\n\r\n  setValue(option) {\r\n    this.variableSrv.setOptionAsCurrent(this, option);\r\n  }\r\n\r\n  updateOptions() {\r\n    this.options = [{ text: this.query.trim(), value: this.query.trim() }];\r\n    this.current = this.options[0];\r\n    return Promise.resolve();\r\n  }\r\n\r\n  dependsOn(variable) {\r\n    return false;\r\n  }\r\n\r\n  setValueFromUrl(urlValue) {\r\n    this.query = urlValue;\r\n    return this.variableSrv.setOptionFromUrl(this, urlValue);\r\n  }\r\n\r\n  getValueForUrl() {\r\n    return this.current.value;\r\n  }\r\n}\r\n\r\nvariableTypes['textbox'] = {\r\n  name: 'Text box',\r\n  ctor: TextBoxVariable,\r\n  description: 'Define a textbox variable, where users can enter any arbitrary string',\r\n};\r\n","import './editor_ctrl';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nimport templateSrv from './template_srv';\r\nimport { VariableSrv } from './variable_srv';\r\nimport { IntervalVariable } from './interval_variable';\r\nimport { QueryVariable } from './query_variable';\r\nimport { DatasourceVariable } from './datasource_variable';\r\nimport { CustomVariable } from './custom_variable';\r\nimport { ConstantVariable } from './constant_variable';\r\nimport { AdhocVariable } from './adhoc_variable';\r\nimport { TextBoxVariable } from './TextBoxVariable';\r\n\r\ncoreModule.factory('templateSrv', () => {\r\n  return templateSrv;\r\n});\r\n\r\nexport {\r\n  VariableSrv,\r\n  IntervalVariable,\r\n  QueryVariable,\r\n  DatasourceVariable,\r\n  CustomVariable,\r\n  ConstantVariable,\r\n  AdhocVariable,\r\n  TextBoxVariable,\r\n};\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport Remarkable from 'remarkable';\r\n\r\nexport class PluginEditCtrl {\r\n  model: any;\r\n  pluginIcon: string;\r\n  pluginId: any;\r\n  includes: any;\r\n  readmeHtml: any;\r\n  includedDatasources: any;\r\n  tab: string;\r\n  navModel: any;\r\n  hasDashboards: any;\r\n  preUpdateHook: () => any;\r\n  postUpdateHook: () => any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope, private $rootScope, private backendSrv, private $sce, private $routeParams, navModelSrv) {\r\n    this.pluginId = $routeParams.pluginId;\r\n    this.preUpdateHook = () => Promise.resolve();\r\n    this.postUpdateHook = () => Promise.resolve();\r\n\r\n    this.init();\r\n  }\r\n\r\n  setNavModel(model) {\r\n    let defaultTab = 'readme';\r\n\r\n    this.navModel = {\r\n      main: {\r\n        img: model.info.logos.large,\r\n        subTitle: model.info.author.name,\r\n        url: '',\r\n        text: model.name,\r\n        breadcrumbs: [{ title: 'Plugins', url: 'plugins' }],\r\n        children: [\r\n          {\r\n            icon: 'fa fa-fw fa-file-text-o',\r\n            id: 'readme',\r\n            text: 'Readme',\r\n            url: `plugins/${this.model.id}/edit?tab=readme`,\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    if (model.type === 'app') {\r\n      this.navModel.main.children.push({\r\n        icon: 'gicon gicon-cog',\r\n        id: 'config',\r\n        text: 'Config',\r\n        url: `plugins/${this.model.id}/edit?tab=config`,\r\n      });\r\n\r\n      const hasDashboards = _.find(model.includes, { type: 'dashboard' });\r\n\r\n      if (hasDashboards) {\r\n        this.navModel.main.children.push({\r\n          icon: 'gicon gicon-dashboard',\r\n          id: 'dashboards',\r\n          text: 'Dashboards',\r\n          url: `plugins/${this.model.id}/edit?tab=dashboards`,\r\n        });\r\n      }\r\n\r\n      defaultTab = 'config';\r\n    }\r\n\r\n    this.tab = this.$routeParams.tab || defaultTab;\r\n\r\n    for (const tab of this.navModel.main.children) {\r\n      if (tab.id === this.tab) {\r\n        tab.active = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  init() {\r\n    return this.backendSrv.get(`/api/plugins/${this.pluginId}/settings`).then(result => {\r\n      this.model = result;\r\n      this.pluginIcon = this.getPluginIcon(this.model.type);\r\n\r\n      this.model.dependencies.plugins.forEach(plug => {\r\n        plug.icon = this.getPluginIcon(plug.type);\r\n      });\r\n\r\n      this.includes = _.map(result.includes, plug => {\r\n        plug.icon = this.getPluginIcon(plug.type);\r\n        return plug;\r\n      });\r\n\r\n      this.setNavModel(this.model);\r\n      return this.initReadme();\r\n    });\r\n  }\r\n\r\n  initReadme() {\r\n    return this.backendSrv.get(`/api/plugins/${this.pluginId}/markdown/readme`).then(res => {\r\n      const md = new Remarkable({\r\n        linkify: true,\r\n      });\r\n      this.readmeHtml = this.$sce.trustAsHtml(md.render(res));\r\n    });\r\n  }\r\n\r\n  getPluginIcon(type) {\r\n    switch (type) {\r\n      case 'datasource':\r\n        return 'icon-gf icon-gf-datasources';\r\n      case 'panel':\r\n        return 'icon-gf icon-gf-panel';\r\n      case 'app':\r\n        return 'icon-gf icon-gf-apps';\r\n      case 'page':\r\n        return 'icon-gf icon-gf-endpoint-tiny';\r\n      case 'dashboard':\r\n        return 'icon-gf icon-gf-dashboard';\r\n      default:\r\n        return 'icon-gf icon-gf-apps';\r\n    }\r\n  }\r\n\r\n  update() {\r\n    this.preUpdateHook()\r\n      .then(() => {\r\n        const updateCmd = _.extend(\r\n          {\r\n            enabled: this.model.enabled,\r\n            pinned: this.model.pinned,\r\n            jsonData: this.model.jsonData,\r\n            secureJsonData: this.model.secureJsonData,\r\n          },\r\n          {}\r\n        );\r\n        return this.backendSrv.post(`/api/plugins/${this.pluginId}/settings`, updateCmd);\r\n      })\r\n      .then(this.postUpdateHook)\r\n      .then(res => {\r\n        window.location.href = window.location.href;\r\n      });\r\n  }\r\n\r\n  importDashboards() {\r\n    return Promise.resolve();\r\n  }\r\n\r\n  setPreUpdateHook(callback: () => any) {\r\n    this.preUpdateHook = callback;\r\n  }\r\n\r\n  setPostUpdateHook(callback: () => any) {\r\n    this.postUpdateHook = callback;\r\n  }\r\n\r\n  updateAvailable() {\r\n    const modalScope = this.$scope.$new(true);\r\n    modalScope.plugin = this.model;\r\n\r\n    this.$rootScope.appEvent('show-modal', {\r\n      src: 'public/app/features/plugins/partials/update_instructions.html',\r\n      scope: modalScope,\r\n    });\r\n  }\r\n\r\n  enable() {\r\n    this.model.enabled = true;\r\n    this.model.pinned = true;\r\n    this.update();\r\n  }\r\n\r\n  disable() {\r\n    this.model.enabled = false;\r\n    this.model.pinned = false;\r\n    this.update();\r\n  }\r\n}\r\n\r\nangular.module('grafana.controllers').controller('PluginEditCtrl', PluginEditCtrl);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\n\r\nconst pluginInfoCache = {};\r\n\r\nexport class AppPageCtrl {\r\n  page: any;\r\n  pluginId: any;\r\n  appModel: any;\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private $routeParams: any, private $rootScope, private navModelSrv) {\r\n    this.pluginId = $routeParams.pluginId;\r\n\r\n    if (pluginInfoCache[this.pluginId]) {\r\n      this.initPage(pluginInfoCache[this.pluginId]);\r\n    } else {\r\n      this.loadPluginInfo();\r\n    }\r\n  }\r\n\r\n  initPage(app) {\r\n    this.appModel = app;\r\n    this.page = _.find(app.includes, { slug: this.$routeParams.slug });\r\n\r\n    pluginInfoCache[this.pluginId] = app;\r\n\r\n    if (!this.page) {\r\n      this.$rootScope.appEvent('alert-error', ['App Page Not Found', '']);\r\n\r\n      this.navModel = this.navModelSrv.getNotFoundNav();\r\n      return;\r\n    }\r\n\r\n    const pluginNav = this.navModelSrv.getNav('plugin-page-' + app.id);\r\n\r\n    this.navModel = {\r\n      main: {\r\n        img: app.info.logos.large,\r\n        subTitle: app.name,\r\n        url: '',\r\n        text: this.page.name,\r\n        breadcrumbs: [{ title: app.name, url: pluginNav.main.url }],\r\n      },\r\n    };\r\n  }\r\n\r\n  loadPluginInfo() {\r\n    this.backendSrv.get(`/api/plugins/${this.pluginId}/settings`).then(app => {\r\n      this.initPage(app);\r\n    });\r\n  }\r\n}\r\n\r\nangular.module('grafana.controllers').controller('AppPageCtrl', AppPageCtrl);\r\n","import _ from 'lodash';\r\nimport { DataSource, PluginMeta, NavModel } from 'app/types';\r\nimport config from 'app/core/config';\r\n\r\nexport function buildNavModel(ds: DataSource, plugin: PluginMeta, currentPage: string): NavModel {\r\n  let title = 'New';\r\n  const subTitle = `Type: ${plugin.name}`;\r\n\r\n  if (ds.id) {\r\n    title = ds.name;\r\n  }\r\n\r\n  const main = {\r\n    img: plugin.info.logos.large,\r\n    id: 'ds-edit-' + plugin.id,\r\n    subTitle: subTitle,\r\n    url: '',\r\n    text: title,\r\n    breadcrumbs: [{ title: 'Data Sources', url: 'datasources' }],\r\n    children: [\r\n      {\r\n        active: currentPage === 'datasource-settings',\r\n        icon: 'fa fa-fw fa-sliders',\r\n        id: 'datasource-settings',\r\n        text: 'Settings',\r\n        url: `datasources/edit/${ds.id}`,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const hasDashboards = _.find(plugin.includes, { type: 'dashboard' }) !== undefined;\r\n  if (hasDashboards && ds.id) {\r\n    main.children.push({\r\n      active: currentPage === 'datasource-dashboards',\r\n      icon: 'fa fa-fw fa-th-large',\r\n      id: 'datasource-dashboards',\r\n      text: 'Dashboards',\r\n      url: `datasources/edit/${ds.id}/dashboards`,\r\n    });\r\n  }\r\n\r\n  if (config.buildInfo.isEnterprise) {\r\n    main.children.push({\r\n      active: currentPage === 'datasource-permissions',\r\n      icon: 'fa fa-fw fa-lock',\r\n      id: 'datasource-permissions',\r\n      text: 'Permissions',\r\n      url: `datasources/edit/${ds.id}/permissions`,\r\n    });\r\n  }\r\n\r\n  return {\r\n    main: main,\r\n    node: _.find(main.children, { active: true }),\r\n  };\r\n}\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class DashImportListCtrl {\r\n  dashboards: any[];\r\n  plugin: any;\r\n  datasource: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, private backendSrv, private $rootScope) {\r\n    this.dashboards = [];\r\n\r\n    backendSrv.get(`/api/plugins/${this.plugin.id}/dashboards`).then(dashboards => {\r\n      this.dashboards = dashboards;\r\n    });\r\n\r\n    appEvents.on('dashboard-list-import-all', this.importAll.bind(this), $scope);\r\n  }\r\n\r\n  importAll(payload) {\r\n    return this.importNext(0)\r\n      .then(() => {\r\n        payload.resolve('All dashboards imported');\r\n      })\r\n      .catch(err => {\r\n        payload.reject(err);\r\n      });\r\n  }\r\n\r\n  importNext(index) {\r\n    return this.import(this.dashboards[index], true).then(() => {\r\n      if (index + 1 < this.dashboards.length) {\r\n        return new Promise(resolve => {\r\n          setTimeout(() => {\r\n            this.importNext(index + 1).then(() => {\r\n              resolve();\r\n            });\r\n          }, 500);\r\n        });\r\n      } else {\r\n        return Promise.resolve();\r\n      }\r\n    });\r\n  }\r\n\r\n  import(dash, overwrite) {\r\n    const installCmd = {\r\n      pluginId: this.plugin.id,\r\n      path: dash.path,\r\n      overwrite: overwrite,\r\n      inputs: [],\r\n    };\r\n\r\n    if (this.datasource) {\r\n      installCmd.inputs.push({\r\n        name: '*',\r\n        type: 'datasource',\r\n        pluginId: this.datasource.type,\r\n        value: this.datasource.name,\r\n      });\r\n    }\r\n\r\n    return this.backendSrv.post(`/api/dashboards/import`, installCmd).then(res => {\r\n      this.$rootScope.appEvent('alert-success', ['Dashboard Imported', dash.title]);\r\n      _.extend(dash, res);\r\n    });\r\n  }\r\n\r\n  remove(dash) {\r\n    this.backendSrv.delete('/api/dashboards/' + dash.importedUri).then(() => {\r\n      this.$rootScope.appEvent('alert-success', ['Dashboard Deleted', dash.title]);\r\n      dash.imported = false;\r\n    });\r\n  }\r\n}\r\n\r\nexport function dashboardImportList() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/plugins/import_list/import_list.html',\r\n    controller: DashImportListCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      plugin: '=',\r\n      datasource: '=',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('dashboardImportList', dashboardImportList);\r\n","import _ from 'lodash';\r\nimport config from 'app/core/config';\r\nimport { coreModule, appEvents } from 'app/core/core';\r\nimport { store } from 'app/store/configureStore';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\nimport { buildNavModel } from './state/navModel';\r\n\r\nlet datasourceTypes = [];\r\n\r\nconst defaults = {\r\n  name: '',\r\n  type: 'graphite',\r\n  url: '',\r\n  access: 'proxy',\r\n  jsonData: {},\r\n  secureJsonFields: {},\r\n  secureJsonData: {},\r\n};\r\n\r\nlet datasourceCreated = false;\r\n\r\nexport class DataSourceEditCtrl {\r\n  isNew: boolean;\r\n  datasources: any[];\r\n  current: any;\r\n  types: any;\r\n  testing: any;\r\n  datasourceMeta: any;\r\n  editForm: any;\r\n  gettingStarted: boolean;\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $q, private backendSrv, private $routeParams, private $location, private datasourceSrv) {\r\n    const state = store.getState();\r\n    this.navModel = getNavModel(state.navIndex, 'datasources');\r\n    this.datasources = [];\r\n\r\n    this.loadDatasourceTypes().then(() => {\r\n      if (this.$routeParams.id) {\r\n        this.getDatasourceById(this.$routeParams.id);\r\n      } else {\r\n        this.initNewDatasourceModel();\r\n      }\r\n    });\r\n  }\r\n\r\n  initNewDatasourceModel() {\r\n    this.isNew = true;\r\n    this.current = _.cloneDeep(defaults);\r\n\r\n    // We are coming from getting started\r\n    if (this.$location.search().gettingstarted) {\r\n      this.gettingStarted = true;\r\n      this.current.isDefault = true;\r\n    }\r\n\r\n    this.typeChanged();\r\n  }\r\n\r\n  loadDatasourceTypes() {\r\n    if (datasourceTypes.length > 0) {\r\n      this.types = datasourceTypes;\r\n      return this.$q.when(null);\r\n    }\r\n\r\n    return this.backendSrv.get('/api/plugins', { enabled: 1, type: 'datasource' }).then(plugins => {\r\n      datasourceTypes = plugins;\r\n      this.types = plugins;\r\n    });\r\n  }\r\n\r\n  getDatasourceById(id) {\r\n    this.backendSrv.get('/api/datasources/' + id).then(ds => {\r\n      this.isNew = false;\r\n      this.current = ds;\r\n\r\n      if (datasourceCreated) {\r\n        datasourceCreated = false;\r\n        this.testDatasource();\r\n      }\r\n\r\n      return this.typeChanged();\r\n    });\r\n  }\r\n\r\n  userChangedType() {\r\n    // reset model but keep name & default flag\r\n    this.current = _.defaults(\r\n      {\r\n        id: this.current.id,\r\n        name: this.current.name,\r\n        isDefault: this.current.isDefault,\r\n        type: this.current.type,\r\n      },\r\n      _.cloneDeep(defaults)\r\n    );\r\n    this.typeChanged();\r\n  }\r\n\r\n  updateNav() {\r\n    this.navModel = buildNavModel(this.current, this.datasourceMeta, 'datasource-settings');\r\n  }\r\n\r\n  typeChanged() {\r\n    return this.backendSrv.get('/api/plugins/' + this.current.type + '/settings').then(pluginInfo => {\r\n      this.datasourceMeta = pluginInfo;\r\n      this.updateNav();\r\n    });\r\n  }\r\n\r\n  updateFrontendSettings() {\r\n    return this.backendSrv.get('/api/frontend/settings').then(settings => {\r\n      config.datasources = settings.datasources;\r\n      config.defaultDatasource = settings.defaultDatasource;\r\n      this.datasourceSrv.init();\r\n    });\r\n  }\r\n\r\n  testDatasource() {\r\n    this.datasourceSrv.get(this.current.name).then(datasource => {\r\n      if (!datasource.testDatasource) {\r\n        return;\r\n      }\r\n\r\n      this.testing = { done: false, status: 'error' };\r\n\r\n      // make test call in no backend cache context\r\n      this.backendSrv\r\n        .withNoBackendCache(() => {\r\n          return datasource\r\n            .testDatasource()\r\n            .then(result => {\r\n              this.testing.message = result.message;\r\n              this.testing.status = result.status;\r\n            })\r\n            .catch(err => {\r\n              if (err.statusText) {\r\n                this.testing.message = 'HTTP Error ' + err.statusText;\r\n              } else {\r\n                this.testing.message = err.message;\r\n              }\r\n            });\r\n        })\r\n        .finally(() => {\r\n          this.testing.done = true;\r\n        });\r\n    });\r\n  }\r\n\r\n  saveChanges() {\r\n    if (!this.editForm.$valid) {\r\n      return;\r\n    }\r\n\r\n    if (this.current.readOnly) {\r\n      return;\r\n    }\r\n\r\n    if (this.current.id) {\r\n      return this.backendSrv.put('/api/datasources/' + this.current.id, this.current).then(result => {\r\n        this.current = result.datasource;\r\n        this.updateNav();\r\n        this.updateFrontendSettings().then(() => {\r\n          this.testDatasource();\r\n        });\r\n      });\r\n    } else {\r\n      return this.backendSrv.post('/api/datasources', this.current).then(result => {\r\n        this.current = result.datasource;\r\n        this.updateFrontendSettings();\r\n\r\n        datasourceCreated = true;\r\n        this.$location.path('datasources/edit/' + result.id);\r\n      });\r\n    }\r\n  }\r\n\r\n  confirmDelete() {\r\n    this.backendSrv.delete('/api/datasources/' + this.current.id).then(() => {\r\n      this.$location.path('datasources');\r\n    });\r\n  }\r\n\r\n  delete(s) {\r\n    appEvents.emit('confirm-modal', {\r\n      title: 'Delete',\r\n      text: 'Are you sure you want to delete this datasource?',\r\n      yesText: 'Delete',\r\n      icon: 'fa-trash',\r\n      onConfirm: () => {\r\n        this.confirmDelete();\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.controller('DataSourceEditCtrl', DataSourceEditCtrl);\r\n\r\ncoreModule.directive('datasourceHttpSettings', () => {\r\n  return {\r\n    scope: {\r\n      current: '=',\r\n      suggestUrl: '@',\r\n      noDirectAccess: '@',\r\n    },\r\n    templateUrl: 'public/app/features/plugins/partials/ds_http_settings.html',\r\n    link: {\r\n      pre: ($scope, elem, attrs) => {\r\n        // do not show access option if direct access is disabled\r\n        $scope.showAccessOption = $scope.noDirectAccess !== 'true';\r\n        $scope.showAccessHelp = false;\r\n        $scope.toggleAccessHelp = () => {\r\n          $scope.showAccessHelp = !$scope.showAccessHelp;\r\n        };\r\n\r\n        $scope.getSuggestUrls = () => {\r\n          return [$scope.suggestUrl];\r\n        };\r\n      },\r\n    },\r\n  };\r\n});\r\n","import { PanelCtrl } from 'app/features/panel/panel_ctrl';\r\n\r\nexport class UnknownPanelCtrl extends PanelCtrl {\r\n  static templateUrl = 'public/app/plugins/panel/unknown/module.html';\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $injector) {\r\n    super($scope, $injector);\r\n  }\r\n}\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\n\r\nimport config from 'app/core/config';\r\nimport coreModule from 'app/core/core_module';\r\nimport { importPluginModule } from './plugin_loader';\r\n\r\nimport { UnknownPanelCtrl } from 'app/plugins/panel/unknown/module';\r\n\r\n/** @ngInject */\r\nfunction pluginDirectiveLoader($compile, datasourceSrv, $rootScope, $q, $http, $templateCache, $timeout) {\r\n  function getTemplate(component) {\r\n    if (component.template) {\r\n      return $q.when(component.template);\r\n    }\r\n    const cached = $templateCache.get(component.templateUrl);\r\n    if (cached) {\r\n      return $q.when(cached);\r\n    }\r\n    return $http.get(component.templateUrl).then(res => {\r\n      return res.data;\r\n    });\r\n  }\r\n\r\n  function relativeTemplateUrlToAbs(templateUrl, baseUrl) {\r\n    if (!templateUrl) {\r\n      return undefined;\r\n    }\r\n    if (templateUrl.indexOf('public') === 0) {\r\n      return templateUrl;\r\n    }\r\n    return baseUrl + '/' + templateUrl;\r\n  }\r\n\r\n  function getPluginComponentDirective(options) {\r\n    // handle relative template urls for plugin templates\r\n    options.Component.templateUrl = relativeTemplateUrlToAbs(options.Component.templateUrl, options.baseUrl);\r\n\r\n    return () => {\r\n      return {\r\n        templateUrl: options.Component.templateUrl,\r\n        template: options.Component.template,\r\n        restrict: 'E',\r\n        controller: options.Component,\r\n        controllerAs: 'ctrl',\r\n        bindToController: true,\r\n        scope: options.bindings,\r\n        link: (scope, elem, attrs, ctrl) => {\r\n          if (ctrl.link) {\r\n            ctrl.link(scope, elem, attrs, ctrl);\r\n          }\r\n          if (ctrl.init) {\r\n            ctrl.init();\r\n          }\r\n        },\r\n      };\r\n    };\r\n  }\r\n\r\n  function loadPanelComponentInfo(scope, attrs) {\r\n    const componentInfo: any = {\r\n      name: 'panel-plugin-' + scope.panel.type,\r\n      bindings: { dashboard: '=', panel: '=', row: '=' },\r\n      attrs: {\r\n        dashboard: 'dashboard',\r\n        panel: 'panel',\r\n        class: 'panel-height-helper',\r\n      },\r\n    };\r\n\r\n    const panelInfo = config.panels[scope.panel.type];\r\n    let panelCtrlPromise = Promise.resolve(UnknownPanelCtrl);\r\n    if (panelInfo) {\r\n      panelCtrlPromise = importPluginModule(panelInfo.module).then(panelModule => {\r\n        return panelModule.PanelCtrl;\r\n      });\r\n    }\r\n\r\n    return panelCtrlPromise.then((PanelCtrl: any) => {\r\n      componentInfo.Component = PanelCtrl;\r\n\r\n      if (!PanelCtrl || PanelCtrl.registered) {\r\n        return componentInfo;\r\n      }\r\n\r\n      if (PanelCtrl.templatePromise) {\r\n        return PanelCtrl.templatePromise.then(res => {\r\n          return componentInfo;\r\n        });\r\n      }\r\n\r\n      if (panelInfo) {\r\n        PanelCtrl.templateUrl = relativeTemplateUrlToAbs(PanelCtrl.templateUrl, panelInfo.baseUrl);\r\n      }\r\n\r\n      PanelCtrl.templatePromise = getTemplate(PanelCtrl).then(template => {\r\n        PanelCtrl.templateUrl = null;\r\n        PanelCtrl.template = `<grafana-panel ctrl=\"ctrl\" class=\"panel-editor-container\">${template}</grafana-panel>`;\r\n        return componentInfo;\r\n      });\r\n\r\n      return PanelCtrl.templatePromise;\r\n    });\r\n  }\r\n\r\n  function getModule(scope, attrs) {\r\n    switch (attrs.type) {\r\n      // QueryCtrl\r\n      case 'query-ctrl': {\r\n        const datasource = scope.target.datasource || scope.ctrl.panel.datasource;\r\n        return datasourceSrv.get(datasource).then(ds => {\r\n          scope.datasource = ds;\r\n\r\n          return importPluginModule(ds.meta.module).then(dsModule => {\r\n            return {\r\n              baseUrl: ds.meta.baseUrl,\r\n              name: 'query-ctrl-' + ds.meta.id,\r\n              bindings: { target: '=', panelCtrl: '=', datasource: '=' },\r\n              attrs: {\r\n                target: 'target',\r\n                'panel-ctrl': 'ctrl.panelCtrl',\r\n                datasource: 'datasource',\r\n              },\r\n              Component: dsModule.QueryCtrl,\r\n            };\r\n          });\r\n        });\r\n      }\r\n      // Annotations\r\n      case 'annotations-query-ctrl': {\r\n        return importPluginModule(scope.ctrl.currentDatasource.meta.module).then(dsModule => {\r\n          return {\r\n            baseUrl: scope.ctrl.currentDatasource.meta.baseUrl,\r\n            name: 'annotations-query-ctrl-' + scope.ctrl.currentDatasource.meta.id,\r\n            bindings: { annotation: '=', datasource: '=' },\r\n            attrs: {\r\n              annotation: 'ctrl.currentAnnotation',\r\n              datasource: 'ctrl.currentDatasource',\r\n            },\r\n            Component: dsModule.AnnotationsQueryCtrl,\r\n          };\r\n        });\r\n      }\r\n      // Datasource ConfigCtrl\r\n      case 'datasource-config-ctrl': {\r\n        const dsMeta = scope.ctrl.datasourceMeta;\r\n        return importPluginModule(dsMeta.module).then((dsModule): any => {\r\n          if (!dsModule.ConfigCtrl) {\r\n            return { notFound: true };\r\n          }\r\n\r\n          return {\r\n            baseUrl: dsMeta.baseUrl,\r\n            name: 'ds-config-' + dsMeta.id,\r\n            bindings: { meta: '=', current: '=' },\r\n            attrs: { meta: 'ctrl.datasourceMeta', current: 'ctrl.current' },\r\n            Component: dsModule.ConfigCtrl,\r\n          };\r\n        });\r\n      }\r\n      // AppConfigCtrl\r\n      case 'app-config-ctrl': {\r\n        const model = scope.ctrl.model;\r\n        return importPluginModule(model.module).then(appModule => {\r\n          return {\r\n            baseUrl: model.baseUrl,\r\n            name: 'app-config-' + model.id,\r\n            bindings: { appModel: '=', appEditCtrl: '=' },\r\n            attrs: { 'app-model': 'ctrl.model', 'app-edit-ctrl': 'ctrl' },\r\n            Component: appModule.ConfigCtrl,\r\n          };\r\n        });\r\n      }\r\n      // App Page\r\n      case 'app-page': {\r\n        const appModel = scope.ctrl.appModel;\r\n        return importPluginModule(appModel.module).then(appModule => {\r\n          return {\r\n            baseUrl: appModel.baseUrl,\r\n            name: 'app-page-' + appModel.id + '-' + scope.ctrl.page.slug,\r\n            bindings: { appModel: '=' },\r\n            attrs: { 'app-model': 'ctrl.appModel' },\r\n            Component: appModule[scope.ctrl.page.component],\r\n          };\r\n        });\r\n      }\r\n      // Panel\r\n      case 'panel': {\r\n        return loadPanelComponentInfo(scope, attrs);\r\n      }\r\n      default: {\r\n        return $q.reject({\r\n          message: 'Could not find component type: ' + attrs.type,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  function appendAndCompile(scope, elem, componentInfo) {\r\n    const child = angular.element(document.createElement(componentInfo.name));\r\n    _.each(componentInfo.attrs, (value, key) => {\r\n      child.attr(key, value);\r\n    });\r\n\r\n    $compile(child)(scope);\r\n    elem.empty();\r\n\r\n    // let a binding digest cycle complete before adding to dom\r\n    setTimeout(() => {\r\n      scope.$applyAsync(() => {\r\n        elem.append(child);\r\n        setTimeout(() => {\r\n          scope.$applyAsync(() => {\r\n            scope.$broadcast('component-did-mount');\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  function registerPluginComponent(scope, elem, attrs, componentInfo) {\r\n    if (componentInfo.notFound) {\r\n      elem.empty();\r\n      return;\r\n    }\r\n\r\n    if (!componentInfo.Component) {\r\n      throw {\r\n        message: 'Failed to find exported plugin component for ' + componentInfo.name,\r\n      };\r\n    }\r\n\r\n    if (!componentInfo.Component.registered) {\r\n      const directiveName = attrs.$normalize(componentInfo.name);\r\n      const directiveFn = getPluginComponentDirective(componentInfo);\r\n      coreModule.directive(directiveName, directiveFn);\r\n      componentInfo.Component.registered = true;\r\n    }\r\n\r\n    appendAndCompile(scope, elem, componentInfo);\r\n  }\r\n\r\n  return {\r\n    restrict: 'E',\r\n    link: (scope, elem, attrs) => {\r\n      getModule(scope, attrs)\r\n        .then(componentInfo => {\r\n          registerPluginComponent(scope, elem, attrs, componentInfo);\r\n        })\r\n        .catch(err => {\r\n          console.log('Plugin component error', err);\r\n        });\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('pluginComponent', pluginDirectiveLoader);\r\n","import './plugin_edit_ctrl';\r\nimport './plugin_page_ctrl';\r\nimport './import_list/import_list';\r\nimport './ds_edit_ctrl';\r\nimport './datasource_srv';\r\nimport './plugin_component';\r\n","import config from 'app/core/config';\r\n\r\nimport coreModule from 'app/core/core_module';\r\nimport { DashboardModel } from './dashboard_model';\r\nimport { PanelModel } from './panel_model';\r\n\r\nexport class DashboardCtrl {\r\n  dashboard: DashboardModel;\r\n  dashboardViewState: any;\r\n  loadedFallbackDashboard: boolean;\r\n  editTab: number;\r\n\r\n  /** @ngInject */\r\n  constructor(\r\n    private $scope,\r\n    private $rootScope,\r\n    private keybindingSrv,\r\n    private timeSrv,\r\n    private variableSrv,\r\n    private alertingSrv,\r\n    private dashboardSrv,\r\n    private unsavedChangesSrv,\r\n    private dashboardViewStateSrv,\r\n    public playlistSrv\r\n  ) {\r\n    // temp hack due to way dashboards are loaded\r\n    // can't use controllerAs on route yet\r\n    $scope.ctrl = this;\r\n\r\n    // TODO: break out settings view to separate view & controller\r\n    this.editTab = 0;\r\n\r\n    // funcs called from React component bindings and needs this binding\r\n    this.getPanelContainer = this.getPanelContainer.bind(this);\r\n  }\r\n\r\n  setupDashboard(data) {\r\n    try {\r\n      this.setupDashboardInternal(data);\r\n    } catch (err) {\r\n      this.onInitFailed(err, 'Dashboard init failed', true);\r\n    }\r\n  }\r\n\r\n  setupDashboardInternal(data) {\r\n    const dashboard = this.dashboardSrv.create(data.dashboard, data.meta);\r\n    this.dashboardSrv.setCurrent(dashboard);\r\n\r\n    // init services\r\n    this.timeSrv.init(dashboard);\r\n    this.alertingSrv.init(dashboard, data.alerts);\r\n\r\n    // template values service needs to initialize completely before\r\n    // the rest of the dashboard can load\r\n    this.variableSrv\r\n      .init(dashboard)\r\n      // template values failes are non fatal\r\n      .catch(this.onInitFailed.bind(this, 'Templating init failed', false))\r\n      // continue\r\n      .finally(() => {\r\n        this.dashboard = dashboard;\r\n        this.dashboard.processRepeats();\r\n        this.dashboard.updateSubmenuVisibility();\r\n        this.dashboard.autoFitPanels(window.innerHeight);\r\n\r\n        this.unsavedChangesSrv.init(dashboard, this.$scope);\r\n\r\n        // TODO refactor ViewStateSrv\r\n        this.$scope.dashboard = dashboard;\r\n        this.dashboardViewState = this.dashboardViewStateSrv.create(this.$scope);\r\n\r\n        this.keybindingSrv.setupDashboardBindings(this.$scope, dashboard);\r\n        this.setWindowTitleAndTheme();\r\n\r\n        this.$scope.appEvent('dashboard-initialized', dashboard);\r\n      })\r\n      .catch(this.onInitFailed.bind(this, 'Dashboard init failed', true));\r\n  }\r\n\r\n  onInitFailed(msg, fatal, err) {\r\n    console.log(msg, err);\r\n\r\n    if (err.data && err.data.message) {\r\n      err.message = err.data.message;\r\n    } else if (!err.message) {\r\n      err = { message: err.toString() };\r\n    }\r\n\r\n    this.$scope.appEvent('alert-error', [msg, err.message]);\r\n\r\n    // protect against  recursive fallbacks\r\n    if (fatal && !this.loadedFallbackDashboard) {\r\n      this.loadedFallbackDashboard = true;\r\n      this.setupDashboard({ dashboard: { title: 'Dashboard Init failed' } });\r\n    }\r\n  }\r\n\r\n  templateVariableUpdated() {\r\n    this.dashboard.processRepeats();\r\n  }\r\n\r\n  setWindowTitleAndTheme() {\r\n    window.document.title = config.windowTitlePrefix + this.dashboard.title;\r\n  }\r\n\r\n  showJsonEditor(evt, options) {\r\n    const editScope = this.$rootScope.$new();\r\n    editScope.object = options.object;\r\n    editScope.updateHandler = options.updateHandler;\r\n    this.$scope.appEvent('show-dash-editor', {\r\n      src: 'public/app/partials/edit_json.html',\r\n      scope: editScope,\r\n    });\r\n  }\r\n\r\n  getDashboard() {\r\n    return this.dashboard;\r\n  }\r\n\r\n  getPanelContainer() {\r\n    return this;\r\n  }\r\n\r\n  onRemovingPanel(evt, options) {\r\n    options = options || {};\r\n    if (!options.panelId) {\r\n      return;\r\n    }\r\n\r\n    const panelInfo = this.dashboard.getPanelInfoById(options.panelId);\r\n    this.removePanel(panelInfo.panel, true);\r\n  }\r\n\r\n  removePanel(panel: PanelModel, ask: boolean) {\r\n    // confirm deletion\r\n    if (ask !== false) {\r\n      let text2, confirmText;\r\n\r\n      if (panel.alert) {\r\n        text2 = 'Panel includes an alert rule, removing panel will also remove alert rule';\r\n        confirmText = 'YES';\r\n      }\r\n\r\n      this.$scope.appEvent('confirm-modal', {\r\n        title: 'Remove Panel',\r\n        text: 'Are you sure you want to remove this panel?',\r\n        text2: text2,\r\n        icon: 'fa-trash',\r\n        confirmText: confirmText,\r\n        yesText: 'Remove',\r\n        onConfirm: () => {\r\n          this.removePanel(panel, false);\r\n        },\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.dashboard.removePanel(panel);\r\n  }\r\n\r\n  onDestroy() {\r\n    if (this.dashboard) {\r\n      this.dashboard.destroy();\r\n    }\r\n  }\r\n\r\n  init(dashboard) {\r\n    this.$scope.onAppEvent('show-json-editor', this.showJsonEditor.bind(this));\r\n    this.$scope.onAppEvent('template-variable-value-updated', this.templateVariableUpdated.bind(this));\r\n    this.$scope.onAppEvent('panel-remove', this.onRemovingPanel.bind(this));\r\n    this.$scope.$on('$destroy', this.onDestroy.bind(this));\r\n    this.setupDashboard(dashboard);\r\n  }\r\n}\r\n\r\ncoreModule.controller('DashboardCtrl', DashboardCtrl);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nexport class AlertingSrv {\r\n  dashboard: any;\r\n  alerts: any[];\r\n\r\n  init(dashboard, alerts) {\r\n    this.dashboard = dashboard;\r\n    this.alerts = alerts || [];\r\n  }\r\n}\r\n\r\ncoreModule.service('alertingSrv', AlertingSrv);\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport { DashboardModel } from '../dashboard_model';\r\n\r\nexport interface HistoryListOpts {\r\n  limit: number;\r\n  start: number;\r\n}\r\n\r\nexport interface RevisionsModel {\r\n  id: number;\r\n  checked: boolean;\r\n  dashboardId: number;\r\n  parentVersion: number;\r\n  version: number;\r\n  created: Date;\r\n  createdBy: string;\r\n  message: string;\r\n}\r\n\r\nexport interface CalculateDiffOptions {\r\n  new: DiffTarget;\r\n  base: DiffTarget;\r\n  diffType: string;\r\n}\r\n\r\nexport interface DiffTarget {\r\n  dashboardId: number;\r\n  version: number;\r\n  unsavedDashboard?: DashboardModel; // when doing diffs against unsaved dashboard version\r\n}\r\n\r\nexport class HistorySrv {\r\n  /** @ngInject */\r\n  constructor(private backendSrv) {}\r\n\r\n  getHistoryList(dashboard: DashboardModel, options: HistoryListOpts) {\r\n    const id = dashboard && dashboard.id ? dashboard.id : void 0;\r\n    return id ? this.backendSrv.get(`api/dashboards/id/${id}/versions`, options) : Promise.resolve([]);\r\n  }\r\n\r\n  calculateDiff(options: CalculateDiffOptions) {\r\n    return this.backendSrv.post('api/dashboards/calculate-diff', options);\r\n  }\r\n\r\n  restoreDashboard(dashboard: DashboardModel, version: number) {\r\n    const id = dashboard && dashboard.id ? dashboard.id : void 0;\r\n    const url = `api/dashboards/id/${id}/restore`;\r\n\r\n    return id && _.isNumber(version) ? this.backendSrv.post(url, { version }) : Promise.resolve({});\r\n  }\r\n}\r\n\r\ncoreModule.service('historySrv', HistorySrv);\r\n","import './history_srv';\r\n\r\nimport _ from 'lodash';\r\nimport angular from 'angular';\r\nimport moment from 'moment';\r\n\r\nimport locationUtil from 'app/core/utils/location_util';\r\nimport { DashboardModel } from '../dashboard_model';\r\nimport { HistoryListOpts, RevisionsModel, CalculateDiffOptions, HistorySrv } from './history_srv';\r\n\r\nexport class HistoryListCtrl {\r\n  appending: boolean;\r\n  dashboard: DashboardModel;\r\n  delta: { basic: string; json: string };\r\n  diff: string;\r\n  limit: number;\r\n  loading: boolean;\r\n  max: number;\r\n  mode: string;\r\n  revisions: RevisionsModel[];\r\n  start: number;\r\n  newInfo: RevisionsModel;\r\n  baseInfo: RevisionsModel;\r\n  canCompare: boolean;\r\n  isNewLatest: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(\r\n    private $route,\r\n    private $rootScope,\r\n    private $location,\r\n    private $q,\r\n    private historySrv: HistorySrv,\r\n    public $scope\r\n  ) {\r\n    this.appending = false;\r\n    this.diff = 'basic';\r\n    this.limit = 10;\r\n    this.loading = false;\r\n    this.max = 2;\r\n    this.mode = 'list';\r\n    this.start = 0;\r\n    this.canCompare = false;\r\n\r\n    this.$rootScope.onAppEvent('dashboard-saved', this.onDashboardSaved.bind(this), $scope);\r\n    this.resetFromSource();\r\n  }\r\n\r\n  onDashboardSaved() {\r\n    this.resetFromSource();\r\n  }\r\n\r\n  switchMode(mode: string) {\r\n    this.mode = mode;\r\n    if (this.mode === 'list') {\r\n      this.reset();\r\n    }\r\n  }\r\n\r\n  dismiss() {\r\n    this.$rootScope.appEvent('hide-dash-editor');\r\n  }\r\n\r\n  addToLog() {\r\n    this.start = this.start + this.limit;\r\n    this.getLog(true);\r\n  }\r\n\r\n  revisionSelectionChanged() {\r\n    const selected = _.filter(this.revisions, { checked: true }).length;\r\n    this.canCompare = selected === 2;\r\n  }\r\n\r\n  formatDate(date) {\r\n    return this.dashboard.formatDate(date);\r\n  }\r\n\r\n  formatBasicDate(date) {\r\n    const now = this.dashboard.timezone === 'browser' ? moment() : moment.utc();\r\n    const then = this.dashboard.timezone === 'browser' ? moment(date) : moment.utc(date);\r\n    return then.from(now);\r\n  }\r\n\r\n  getDiff(diff: string) {\r\n    this.diff = diff;\r\n    this.mode = 'compare';\r\n\r\n    // have it already been fetched?\r\n    if (this.delta[this.diff]) {\r\n      return this.$q.when(this.delta[this.diff]);\r\n    }\r\n\r\n    const selected = _.filter(this.revisions, { checked: true });\r\n\r\n    this.newInfo = selected[0];\r\n    this.baseInfo = selected[1];\r\n    this.isNewLatest = this.newInfo.version === this.dashboard.version;\r\n\r\n    this.loading = true;\r\n    const options: CalculateDiffOptions = {\r\n      new: {\r\n        dashboardId: this.dashboard.id,\r\n        version: this.newInfo.version,\r\n      },\r\n      base: {\r\n        dashboardId: this.dashboard.id,\r\n        version: this.baseInfo.version,\r\n      },\r\n      diffType: diff,\r\n    };\r\n\r\n    return this.historySrv\r\n      .calculateDiff(options)\r\n      .then(response => {\r\n        this.delta[this.diff] = response;\r\n      })\r\n      .catch(() => {\r\n        this.mode = 'list';\r\n      })\r\n      .finally(() => {\r\n        this.loading = false;\r\n      });\r\n  }\r\n\r\n  getLog(append = false) {\r\n    this.loading = !append;\r\n    this.appending = append;\r\n    const options: HistoryListOpts = {\r\n      limit: this.limit,\r\n      start: this.start,\r\n    };\r\n\r\n    return this.historySrv\r\n      .getHistoryList(this.dashboard, options)\r\n      .then(revisions => {\r\n        // set formatted dates & default values\r\n        for (const rev of revisions) {\r\n          rev.createdDateString = this.formatDate(rev.created);\r\n          rev.ageString = this.formatBasicDate(rev.created);\r\n          rev.checked = false;\r\n        }\r\n\r\n        this.revisions = append ? this.revisions.concat(revisions) : revisions;\r\n      })\r\n      .catch(err => {\r\n        this.loading = false;\r\n      })\r\n      .finally(() => {\r\n        this.loading = false;\r\n        this.appending = false;\r\n      });\r\n  }\r\n\r\n  isLastPage() {\r\n    return _.find(this.revisions, rev => rev.version === 1);\r\n  }\r\n\r\n  reset() {\r\n    this.delta = { basic: '', json: '' };\r\n    this.diff = 'basic';\r\n    this.mode = 'list';\r\n    this.revisions = _.map(this.revisions, rev => _.extend({}, rev, { checked: false }));\r\n    this.canCompare = false;\r\n    this.start = 0;\r\n    this.isNewLatest = false;\r\n  }\r\n\r\n  resetFromSource() {\r\n    this.revisions = [];\r\n    return this.getLog().then(this.reset.bind(this));\r\n  }\r\n\r\n  restore(version: number) {\r\n    this.$rootScope.appEvent('confirm-modal', {\r\n      title: 'Restore version',\r\n      text: '',\r\n      text2: `Are you sure you want to restore the dashboard to version ${version}? All unsaved changes will be lost.`,\r\n      icon: 'fa-history',\r\n      yesText: `Yes, restore to version ${version}`,\r\n      onConfirm: this.restoreConfirm.bind(this, version),\r\n    });\r\n  }\r\n\r\n  restoreConfirm(version: number) {\r\n    this.loading = true;\r\n    return this.historySrv\r\n      .restoreDashboard(this.dashboard, version)\r\n      .then(response => {\r\n        this.$location.url(locationUtil.stripBaseFromUrl(response.url)).replace();\r\n        this.$route.reload();\r\n        this.$rootScope.appEvent('alert-success', ['Dashboard restored', 'Restored from version ' + version]);\r\n      })\r\n      .catch(() => {\r\n        this.mode = 'list';\r\n        this.loading = false;\r\n      });\r\n  }\r\n}\r\n\r\nexport function dashboardHistoryDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/history/history.html',\r\n    controller: HistoryListCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      dashboard: '=',\r\n    },\r\n  };\r\n}\r\n\r\nangular.module('grafana.directives').directive('gfDashboardHistory', dashboardHistoryDirective);\r\n","import angular from 'angular';\r\nimport moment from 'moment';\r\nimport _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport * as dateMath from 'app/core/utils/datemath';\r\nimport impressionSrv from 'app/core/services/impression_srv';\r\n\r\nexport class DashboardLoaderSrv {\r\n  /** @ngInject */\r\n  constructor(\r\n    private backendSrv,\r\n    private dashboardSrv,\r\n    private datasourceSrv,\r\n    private $http,\r\n    private $q,\r\n    private $timeout,\r\n    contextSrv,\r\n    private $routeParams,\r\n    private $rootScope\r\n  ) {}\r\n\r\n  _dashboardLoadFailed(title, snapshot?) {\r\n    snapshot = snapshot || false;\r\n    return {\r\n      meta: {\r\n        canStar: false,\r\n        isSnapshot: snapshot,\r\n        canDelete: false,\r\n        canSave: false,\r\n        canEdit: false,\r\n        dashboardNotFound: true,\r\n      },\r\n      dashboard: { title: title },\r\n    };\r\n  }\r\n\r\n  loadDashboard(type, slug, uid) {\r\n    let promise;\r\n\r\n    if (type === 'script') {\r\n      promise = this._loadScriptedDashboard(slug);\r\n    } else if (type === 'snapshot') {\r\n      promise = this.backendSrv.get('/api/snapshots/' + slug).catch(() => {\r\n        return this._dashboardLoadFailed('Snapshot not found', true);\r\n      });\r\n    } else {\r\n      promise = this.backendSrv\r\n        .getDashboardByUid(uid)\r\n        .then(result => {\r\n          if (result.meta.isFolder) {\r\n            this.$rootScope.appEvent('alert-error', ['Dashboard not found']);\r\n            throw new Error('Dashboard not found');\r\n          }\r\n          return result;\r\n        })\r\n        .catch(() => {\r\n          return this._dashboardLoadFailed('Not found', true);\r\n        });\r\n    }\r\n\r\n    promise.then(result => {\r\n      if (result.meta.dashboardNotFound !== true) {\r\n        impressionSrv.addDashboardImpression(result.dashboard.id);\r\n      }\r\n\r\n      return result;\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  _loadScriptedDashboard(file) {\r\n    const url = 'public/dashboards/' + file.replace(/\\.(?!js)/, '/') + '?' + new Date().getTime();\r\n\r\n    return this.$http({ url: url, method: 'GET' })\r\n      .then(this._executeScript.bind(this))\r\n      .then(\r\n        result => {\r\n          return {\r\n            meta: {\r\n              fromScript: true,\r\n              canDelete: false,\r\n              canSave: false,\r\n              canStar: false,\r\n            },\r\n            dashboard: result.data,\r\n          };\r\n        },\r\n        err => {\r\n          console.log('Script dashboard error ' + err);\r\n          this.$rootScope.appEvent('alert-error', [\r\n            'Script Error',\r\n            'Please make sure it exists and returns a valid dashboard',\r\n          ]);\r\n          return this._dashboardLoadFailed('Scripted dashboard');\r\n        }\r\n      );\r\n  }\r\n\r\n  _executeScript(result) {\r\n    const services = {\r\n      dashboardSrv: this.dashboardSrv,\r\n      datasourceSrv: this.datasourceSrv,\r\n      $q: this.$q,\r\n    };\r\n\r\n    /*jshint -W054 */\r\n    const scriptFunc = new Function(\r\n      'ARGS',\r\n      'kbn',\r\n      'dateMath',\r\n      '_',\r\n      'moment',\r\n      'window',\r\n      'document',\r\n      '$',\r\n      'jQuery',\r\n      'services',\r\n      result.data\r\n    );\r\n    const scriptResult = scriptFunc(this.$routeParams, kbn, dateMath, _, moment, window, document, $, $, services);\r\n\r\n    // Handle async dashboard scripts\r\n    if (_.isFunction(scriptResult)) {\r\n      const deferred = this.$q.defer();\r\n      scriptResult(dashboard => {\r\n        this.$timeout(() => {\r\n          deferred.resolve({ data: dashboard });\r\n        });\r\n      });\r\n      return deferred.promise;\r\n    }\r\n\r\n    return { data: scriptResult };\r\n  }\r\n}\r\n\r\nangular.module('grafana.services').service('dashboardLoaderSrv', DashboardLoaderSrv);\r\n","import moment from 'moment';\r\nimport angular from 'angular';\r\nimport { appEvents, NavModel } from 'app/core/core';\r\nimport { DashboardModel } from '../dashboard_model';\r\n\r\nexport class DashNavCtrl {\r\n  dashboard: DashboardModel;\r\n  navModel: NavModel;\r\n  titleTooltip: string;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope, private dashboardSrv, private $location, public playlistSrv) {\r\n    appEvents.on('save-dashboard', this.saveDashboard.bind(this), $scope);\r\n\r\n    if (this.dashboard.meta.isSnapshot) {\r\n      const meta = this.dashboard.meta;\r\n      this.titleTooltip = 'Created: &nbsp;' + moment(meta.created).calendar();\r\n      if (meta.expires) {\r\n        this.titleTooltip += '<br>Expires: &nbsp;' + moment(meta.expires).fromNow() + '<br>';\r\n      }\r\n    }\r\n  }\r\n\r\n  toggleSettings() {\r\n    const search = this.$location.search();\r\n    if (search.editview) {\r\n      delete search.editview;\r\n    } else {\r\n      search.editview = 'settings';\r\n    }\r\n    this.$location.search(search);\r\n  }\r\n\r\n  toggleViewMode() {\r\n    appEvents.emit('toggle-kiosk-mode');\r\n  }\r\n\r\n  close() {\r\n    const search = this.$location.search();\r\n    if (search.editview) {\r\n      delete search.editview;\r\n    } else if (search.fullscreen) {\r\n      delete search.fullscreen;\r\n      delete search.edit;\r\n      delete search.tab;\r\n      delete search.panelId;\r\n    }\r\n    this.$location.search(search);\r\n  }\r\n\r\n  starDashboard() {\r\n    this.dashboardSrv.starDashboard(this.dashboard.id, this.dashboard.meta.isStarred).then(newState => {\r\n      this.dashboard.meta.isStarred = newState;\r\n    });\r\n  }\r\n\r\n  shareDashboard(tabIndex) {\r\n    const modalScope = this.$scope.$new();\r\n    modalScope.tabIndex = tabIndex;\r\n    modalScope.dashboard = this.dashboard;\r\n\r\n    appEvents.emit('show-modal', {\r\n      src: 'public/app/features/dashboard/partials/shareModal.html',\r\n      scope: modalScope,\r\n    });\r\n  }\r\n\r\n  hideTooltip(evt) {\r\n    angular.element(evt.currentTarget).tooltip('hide');\r\n  }\r\n\r\n  saveDashboard() {\r\n    return this.dashboardSrv.saveDashboard();\r\n  }\r\n\r\n  showSearch() {\r\n    appEvents.emit('show-dash-search');\r\n  }\r\n\r\n  addPanel() {\r\n    appEvents.emit('dash-scroll', { animate: true, evt: 0 });\r\n\r\n    if (this.dashboard.panels.length > 0 && this.dashboard.panels[0].type === 'add-panel') {\r\n      return; // Return if the \"Add panel\" exists already\r\n    }\r\n\r\n    this.dashboard.addPanel({\r\n      type: 'add-panel',\r\n      gridPos: { x: 0, y: 0, w: 12, h: 9 },\r\n      title: 'Panel Title',\r\n    });\r\n  }\r\n\r\n  navItemClicked(navItem, evt) {\r\n    if (navItem.clickHandler) {\r\n      navItem.clickHandler();\r\n      evt.preventDefault();\r\n    }\r\n  }\r\n}\r\n\r\nexport function dashNavDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/dashnav/dashnav.html',\r\n    controller: DashNavCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    transclude: true,\r\n    scope: { dashboard: '=' },\r\n  };\r\n}\r\n\r\nangular.module('grafana.directives').directive('dashnav', dashNavDirective);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\n\r\nexport class SubmenuCtrl {\r\n  annotations: any;\r\n  variables: any;\r\n  dashboard: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private variableSrv, private $location) {\r\n    this.annotations = this.dashboard.templating.list;\r\n    this.variables = this.variableSrv.variables;\r\n  }\r\n\r\n  annotationStateChanged() {\r\n    this.dashboard.startRefresh();\r\n  }\r\n\r\n  variableUpdated(variable) {\r\n    this.variableSrv.variableUpdated(variable, true);\r\n  }\r\n\r\n  openEditView(editview) {\r\n    const search = _.extend(this.$location.search(), { editview: editview });\r\n    this.$location.search(search);\r\n  }\r\n}\r\n\r\nexport function submenuDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/submenu/submenu.html',\r\n    controller: SubmenuCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      dashboard: '=',\r\n    },\r\n  };\r\n}\r\n\r\nangular.module('grafana.directives').directive('dashboardSubmenu', submenuDirective);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<div class=\"modal-body\">\r\n\t<div class=\"modal-header\">\r\n\t\t<h2 class=\"modal-header-title\">\r\n\t\t\t<i class=\"fa fa-copy\"></i>\r\n\t\t\t<span class=\"p-l-1\">Save As...</span>\r\n\t\t</h2>\r\n\r\n\t\t<a class=\"modal-header-close\" ng-click=\"ctrl.dismiss();\">\r\n\t\t\t<i class=\"fa fa-remove\"></i>\r\n\t\t</a>\r\n\t</div>\r\n\r\n\t<form name=\"ctrl.saveForm\" class=\"modal-content\" novalidate>\r\n\t\t<div class=\"p-t-2\">\r\n\t\t\t<div class=\"gf-form\">\r\n\t\t\t\t<label class=\"gf-form-label width-7\">New name</label>\r\n\t\t\t\t<input type=\"text\" class=\"gf-form-input\" ng-model=\"ctrl.clone.title\" give-focus=\"true\" required>\r\n\t\t\t</div>\r\n      <div class=\"gf-form\">\r\n        <folder-picker initial-folder-id=\"ctrl.folderId\"\r\n                       on-change=\"ctrl.onFolderChange($folder)\"\r\n                       enter-folder-creation=\"ctrl.onEnterFolderCreation()\"\r\n                       exit-folder-creation=\"ctrl.onExitFolderCreation()\"\r\n                       enable-create-new=\"true\"\r\n                       label-class=\"width-7\">\r\n        </folder-picker>\r\n      </div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"gf-form-button-row text-center\">\r\n\t\t\t<button type=\"submit\" class=\"btn btn-success\" ng-click=\"ctrl.save()\" ng-disabled=\"!ctrl.isValidFolderSelection\">Save</button>\r\n\t\t\t<a class=\"btn-text\" ng-click=\"ctrl.dismiss();\">Cancel</a>\r\n\t\t</div>\r\n\t</form>\r\n</div>\r\n`;\r\n\r\nexport class SaveDashboardAsModalCtrl {\r\n  clone: any;\r\n  folderId: any;\r\n  dismiss: () => void;\r\n  isValidFolderSelection = true;\r\n\r\n  /** @ngInject */\r\n  constructor(private dashboardSrv) {\r\n    const dashboard = this.dashboardSrv.getCurrent();\r\n    this.clone = dashboard.getSaveModelClone();\r\n    this.clone.id = null;\r\n    this.clone.uid = '';\r\n    this.clone.title += ' Copy';\r\n    this.clone.editable = true;\r\n    this.clone.hideControls = false;\r\n    this.folderId = dashboard.meta.folderId;\r\n\r\n    // remove alerts if source dashboard is already persisted\r\n    // do not want to create alert dupes\r\n    if (dashboard.id > 0) {\r\n      this.clone.panels.forEach(panel => {\r\n        if (panel.type === 'graph' && panel.alert) {\r\n          delete panel.thresholds;\r\n        }\r\n        delete panel.alert;\r\n      });\r\n    }\r\n\r\n    delete this.clone.autoUpdate;\r\n  }\r\n\r\n  save() {\r\n    return this.dashboardSrv.save(this.clone, { folderId: this.folderId }).then(this.dismiss);\r\n  }\r\n\r\n  keyDown(evt) {\r\n    if (evt.keyCode === 13) {\r\n      this.save();\r\n    }\r\n  }\r\n\r\n  onFolderChange(folder) {\r\n    this.folderId = folder.id;\r\n  }\r\n\r\n  onEnterFolderCreation() {\r\n    this.isValidFolderSelection = false;\r\n  }\r\n\r\n  onExitFolderCreation() {\r\n    this.isValidFolderSelection = true;\r\n  }\r\n}\r\n\r\nexport function saveDashboardAsDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    controller: SaveDashboardAsModalCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: { dismiss: '&' },\r\n  };\r\n}\r\n\r\ncoreModule.directive('saveDashboardAsModal', saveDashboardAsDirective);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<div class=\"modal-body\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header-title\">\r\n      <i class=\"fa fa-save\"></i>\r\n      <span class=\"p-l-1\">Save changes</span>\r\n    </h2>\r\n\r\n    <a class=\"modal-header-close\" ng-click=\"ctrl.dismiss();\">\r\n      <i class=\"fa fa-remove\"></i>\r\n    </a>\r\n  </div>\r\n\r\n  <form name=\"ctrl.saveForm\" ng-submit=\"ctrl.save()\" class=\"modal-content\" novalidate>\r\n    <div class=\"p-t-1\">\r\n      <div class=\"gf-form-group\" ng-if=\"ctrl.timeChange || ctrl.variableValueChange\">\r\n\t\t    <gf-form-switch class=\"gf-form\"\r\n\t\t\t    label=\"Save current time range\" ng-if=\"ctrl.timeChange\" label-class=\"width-12\" switch-class=\"max-width-6\"\r\n\t\t\t    checked=\"ctrl.saveTimerange\" on-change=\"buildUrl()\">\r\n\t\t    </gf-form-switch>\r\n\t\t    <gf-form-switch class=\"gf-form\"\r\n\t\t\t    label=\"Save current variables\" ng-if=\"ctrl.variableValueChange\" label-class=\"width-12\" switch-class=\"max-width-6\"\r\n\t\t\t    checked=\"ctrl.saveVariables\" on-change=\"buildUrl()\">\r\n\t\t    </gf-form-switch>\r\n\t    </div>\r\n      <div class=\"gf-form\">\r\n        <label class=\"gf-form-hint\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"message\"\r\n            class=\"gf-form-input\"\r\n            placeholder=\"Add a note to describe your changes &hellip;\"\r\n            give-focus=\"true\"\r\n            ng-model=\"ctrl.message\"\r\n            ng-model-options=\"{allowInvalid: true}\"\r\n            ng-maxlength=\"this.max\"\r\n            maxlength=\"64\"\r\n            autocomplete=\"off\" />\r\n          <small class=\"gf-form-hint-text muted\" ng-cloak>\r\n            <span ng-class=\"{'text-error': ctrl.saveForm.message.$invalid && ctrl.saveForm.message.$dirty }\">\r\n              {{ctrl.message.length || 0}}\r\n            </span>\r\n            / {{ctrl.max}} characters\r\n          </small>\r\n        </label>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"gf-form-button-row text-center\">\r\n      <button\r\n        id=\"saveBtn\"\r\n        type=\"submit\"\r\n        class=\"btn btn-success\"\r\n        ng-class=\"{'btn-success--processing': ctrl.isSaving}\"\r\n        ng-disabled=\"ctrl.saveForm.$invalid || ctrl.isSaving\"\r\n      >\r\n        <span ng-if=\"!ctrl.isSaving\">Save</span>\r\n        <span ng-if=\"ctrl.isSaving === true\">Saving...</span>\r\n      </button>\r\n      <button class=\"btn btn-inverse\" ng-click=\"ctrl.dismiss();\">Cancel</button>\r\n    </div>\r\n  </form>\r\n</div>\r\n`;\r\n\r\nexport class SaveDashboardModalCtrl {\r\n  message: string;\r\n  saveVariables = false;\r\n  saveTimerange = false;\r\n  time: any;\r\n  originalTime: any;\r\n  current = [];\r\n  originalCurrent = [];\r\n  max: number;\r\n  saveForm: any;\r\n  isSaving: boolean;\r\n  dismiss: () => void;\r\n  timeChange = false;\r\n  variableValueChange = false;\r\n\r\n  /** @ngInject */\r\n  constructor(private dashboardSrv) {\r\n    this.message = '';\r\n    this.max = 64;\r\n    this.isSaving = false;\r\n    this.timeChange = this.dashboardSrv.getCurrent().hasTimeChanged();\r\n    this.variableValueChange = this.dashboardSrv.getCurrent().hasVariableValuesChanged();\r\n  }\r\n\r\n  save() {\r\n    if (!this.saveForm.$valid) {\r\n      return;\r\n    }\r\n\r\n    const options = {\r\n      saveVariables: this.saveVariables,\r\n      saveTimerange: this.saveTimerange,\r\n      message: this.message,\r\n    };\r\n\r\n    const dashboard = this.dashboardSrv.getCurrent();\r\n    const saveModel = dashboard.getSaveModelClone(options);\r\n\r\n    this.isSaving = true;\r\n\r\n    return this.dashboardSrv.save(saveModel, options).then(this.postSave.bind(this, options));\r\n  }\r\n\r\n  postSave(options) {\r\n    if (options.saveVariables) {\r\n      this.dashboardSrv.getCurrent().resetOriginalVariables();\r\n    }\r\n\r\n    if (options.saveTimerange) {\r\n      this.dashboardSrv.getCurrent().resetOriginalTime();\r\n    }\r\n\r\n    this.dismiss();\r\n  }\r\n}\r\n\r\nexport function saveDashboardModalDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    controller: SaveDashboardModalCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: { dismiss: '&' },\r\n  };\r\n}\r\n\r\ncoreModule.directive('saveDashboardModal', saveDashboardModalDirective);\r\n","import angular from 'angular';\r\nimport { saveAs } from 'file-saver';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<div class=\"modal-body\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header-title\">\r\n      <i class=\"fa fa-save\"></i><span class=\"p-l-1\">Cannot save provisioned dashboard</span>\r\n    </h2>\r\n\r\n    <a class=\"modal-header-close\" ng-click=\"ctrl.dismiss();\">\r\n      <i class=\"fa fa-remove\"></i>\r\n    </a>\r\n  </div>\r\n\r\n  <div class=\"modal-content\">\r\n    <small>\r\n      This dashboard cannot be saved from Grafana's UI since it has been provisioned from another source.\r\n      Copy the JSON or save it to a file below. Then you can update your dashboard in corresponding provisioning source.<br/>\r\n      <i>See <a class=\"external-link\" href=\"http://docs.grafana.org/administration/provisioning/#dashboards\" target=\"_blank\">\r\n      documentation</a> for more information about provisioning.</i>\r\n    </small>\r\n    <div class=\"p-t-2\">\r\n      <div class=\"gf-form\">\r\n        <code-editor content=\"ctrl.dashboardJson\" data-mode=\"json\" data-max-lines=15></code-editor>\r\n      </div>\r\n      <div class=\"gf-form-button-row\">\r\n        <button class=\"btn btn-success\" clipboard-button=\"ctrl.getJsonForClipboard()\">\r\n          <i class=\"fa fa-clipboard\"></i>&nbsp;Copy JSON to Clipboard\r\n        </button>\r\n        <button class=\"btn btn-secondary\" clipboard-button=\"ctrl.save()\">\r\n          <i class=\"fa fa-save\"></i>&nbsp;Save JSON to file\r\n        </button>\r\n        <a class=\"btn btn-link\" ng-click=\"ctrl.dismiss();\">Cancel</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n`;\r\n\r\nexport class SaveProvisionedDashboardModalCtrl {\r\n  dash: any;\r\n  dashboardJson: string;\r\n  dismiss: () => void;\r\n\r\n  /** @ngInject */\r\n  constructor(dashboardSrv) {\r\n    this.dash = dashboardSrv.getCurrent().getSaveModelClone();\r\n    delete this.dash.id;\r\n    this.dashboardJson = angular.toJson(this.dash, true);\r\n  }\r\n\r\n  save() {\r\n    const blob = new Blob([angular.toJson(this.dash, true)], {\r\n      type: 'application/json;charset=utf-8',\r\n    });\r\n    saveAs(blob, this.dash.title + '-' + new Date().getTime() + '.json');\r\n  }\r\n\r\n  getJsonForClipboard() {\r\n    return this.dashboardJson;\r\n  }\r\n}\r\n\r\nexport function saveProvisionedDashboardModalDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    controller: SaveProvisionedDashboardModalCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: { dismiss: '&' },\r\n  };\r\n}\r\n\r\ncoreModule.directive('saveProvisionedDashboardModal', saveProvisionedDashboardModalDirective);\r\n","import angular from 'angular';\r\nimport config from 'app/core/config';\r\nimport moment from 'moment';\r\n\r\n/** @ngInject */\r\nexport function ShareModalCtrl($scope, $rootScope, $location, $timeout, timeSrv, templateSrv, linkSrv) {\r\n  $scope.options = {\r\n    forCurrent: true,\r\n    includeTemplateVars: true,\r\n    theme: 'current',\r\n  };\r\n  $scope.editor = { index: $scope.tabIndex || 0 };\r\n\r\n  $scope.init = () => {\r\n    $scope.modeSharePanel = $scope.panel ? true : false;\r\n\r\n    $scope.tabs = [{ title: 'Link', src: 'shareLink.html' }];\r\n\r\n    if ($scope.modeSharePanel) {\r\n      $scope.modalTitle = 'Share Panel';\r\n      $scope.tabs.push({ title: 'Embed', src: 'shareEmbed.html' });\r\n    } else {\r\n      $scope.modalTitle = 'Share';\r\n    }\r\n\r\n    if (!$scope.dashboard.meta.isSnapshot) {\r\n      $scope.tabs.push({ title: 'Snapshot', src: 'shareSnapshot.html' });\r\n    }\r\n\r\n    if (!$scope.dashboard.meta.isSnapshot && !$scope.modeSharePanel) {\r\n      $scope.tabs.push({ title: 'Export', src: 'shareExport.html' });\r\n    }\r\n\r\n    $scope.buildUrl();\r\n  };\r\n\r\n  $scope.buildUrl = () => {\r\n    let baseUrl = $location.absUrl();\r\n    const queryStart = baseUrl.indexOf('?');\r\n\r\n    if (queryStart !== -1) {\r\n      baseUrl = baseUrl.substring(0, queryStart);\r\n    }\r\n\r\n    const params = angular.copy($location.search());\r\n\r\n    const range = timeSrv.timeRange();\r\n    params.from = range.from.valueOf();\r\n    params.to = range.to.valueOf();\r\n    params.orgId = config.bootData.user.orgId;\r\n\r\n    if ($scope.options.includeTemplateVars) {\r\n      templateSrv.fillVariableValuesForUrl(params);\r\n    }\r\n\r\n    if (!$scope.options.forCurrent) {\r\n      delete params.from;\r\n      delete params.to;\r\n    }\r\n\r\n    if ($scope.options.theme !== 'current') {\r\n      params.theme = $scope.options.theme;\r\n    }\r\n\r\n    if ($scope.modeSharePanel) {\r\n      params.panelId = $scope.panel.id;\r\n      params.fullscreen = true;\r\n    } else {\r\n      delete params.panelId;\r\n      delete params.fullscreen;\r\n    }\r\n\r\n    $scope.shareUrl = linkSrv.addParamsToUrl(baseUrl, params);\r\n\r\n    let soloUrl = baseUrl.replace(config.appSubUrl + '/dashboard/', config.appSubUrl + '/dashboard-solo/');\r\n    soloUrl = soloUrl.replace(config.appSubUrl + '/d/', config.appSubUrl + '/d-solo/');\r\n    delete params.fullscreen;\r\n    delete params.edit;\r\n    soloUrl = linkSrv.addParamsToUrl(soloUrl, params);\r\n\r\n    $scope.iframeHtml = '<iframe src=\"' + soloUrl + '\" width=\"450\" height=\"200\" frameborder=\"0\"></iframe>';\r\n\r\n    $scope.imageUrl = soloUrl.replace(\r\n      config.appSubUrl + '/dashboard-solo/',\r\n      config.appSubUrl + '/render/dashboard-solo/'\r\n    );\r\n    $scope.imageUrl = $scope.imageUrl.replace(config.appSubUrl + '/d-solo/', config.appSubUrl + '/render/d-solo/');\r\n    $scope.imageUrl += '&width=1000&height=500' + $scope.getLocalTimeZone();\r\n  };\r\n\r\n  // This function will try to return the proper full name of the local timezone\r\n  // Chrome does not handle the timezone offset (but phantomjs does)\r\n  $scope.getLocalTimeZone = () => {\r\n    const utcOffset = '&tz=UTC' + encodeURIComponent(moment().format('Z'));\r\n\r\n    // Older browser does not the internationalization API\r\n    if (!(window as any).Intl) {\r\n      return utcOffset;\r\n    }\r\n\r\n    const dateFormat = (window as any).Intl.DateTimeFormat();\r\n    if (!dateFormat.resolvedOptions) {\r\n      return utcOffset;\r\n    }\r\n\r\n    const options = dateFormat.resolvedOptions();\r\n    if (!options.timeZone) {\r\n      return utcOffset;\r\n    }\r\n\r\n    return '&tz=' + encodeURIComponent(options.timeZone);\r\n  };\r\n\r\n  $scope.getShareUrl = () => {\r\n    return $scope.shareUrl;\r\n  };\r\n}\r\n\r\nangular.module('grafana.controllers').controller('ShareModalCtrl', ShareModalCtrl);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\n\r\nexport class ShareSnapshotCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $rootScope, $location, backendSrv, $timeout, timeSrv) {\r\n    $scope.snapshot = {\r\n      name: $scope.dashboard.title,\r\n      expires: 0,\r\n      timeoutSeconds: 4,\r\n    };\r\n\r\n    $scope.step = 1;\r\n\r\n    $scope.expireOptions = [\r\n      { text: '1 Hour', value: 60 * 60 },\r\n      { text: '1 Day', value: 60 * 60 * 24 },\r\n      { text: '7 Days', value: 60 * 60 * 24 * 7 },\r\n      { text: 'Never', value: 0 },\r\n    ];\r\n\r\n    $scope.accessOptions = [\r\n      { text: 'Anyone with the link', value: 1 },\r\n      { text: 'Organization users', value: 2 },\r\n      { text: 'Public on the web', value: 3 },\r\n    ];\r\n\r\n    $scope.init = () => {\r\n      backendSrv.get('/api/snapshot/shared-options').then(options => {\r\n        $scope.externalUrl = options['externalSnapshotURL'];\r\n        $scope.sharingButtonText = options['externalSnapshotName'];\r\n        $scope.externalEnabled = options['externalEnabled'];\r\n      });\r\n    };\r\n\r\n    $scope.apiUrl = '/api/snapshots';\r\n\r\n    $scope.createSnapshot = external => {\r\n      $scope.dashboard.snapshot = {\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      if (!external) {\r\n        $scope.dashboard.snapshot.originalUrl = $location.absUrl();\r\n      }\r\n\r\n      $scope.loading = true;\r\n      $scope.snapshot.external = external;\r\n      $scope.dashboard.startRefresh();\r\n\r\n      $timeout(() => {\r\n        $scope.saveSnapshot(external);\r\n      }, $scope.snapshot.timeoutSeconds * 1000);\r\n    };\r\n\r\n    $scope.saveSnapshot = external => {\r\n      const dash = $scope.dashboard.getSaveModelClone();\r\n      $scope.scrubDashboard(dash);\r\n\r\n      const cmdData = {\r\n        dashboard: dash,\r\n        name: dash.title,\r\n        expires: $scope.snapshot.expires,\r\n      };\r\n\r\n      const postUrl = external ? $scope.externalUrl + $scope.apiUrl : $scope.apiUrl;\r\n\r\n      backendSrv.post(postUrl, cmdData).then(\r\n        results => {\r\n          $scope.loading = false;\r\n\r\n          if (external) {\r\n            $scope.deleteUrl = results.deleteUrl;\r\n            $scope.snapshotUrl = results.url;\r\n            $scope.saveExternalSnapshotRef(cmdData, results);\r\n          } else {\r\n            const url = $location.url();\r\n            let baseUrl = $location.absUrl();\r\n\r\n            if (url !== '/') {\r\n              baseUrl = baseUrl.replace(url, '') + '/';\r\n            }\r\n\r\n            $scope.snapshotUrl = baseUrl + 'dashboard/snapshot/' + results.key;\r\n            $scope.deleteUrl = baseUrl + 'api/snapshots-delete/' + results.deleteKey;\r\n          }\r\n\r\n          $scope.step = 2;\r\n        },\r\n        () => {\r\n          $scope.loading = false;\r\n        }\r\n      );\r\n    };\r\n\r\n    $scope.getSnapshotUrl = () => {\r\n      return $scope.snapshotUrl;\r\n    };\r\n\r\n    $scope.scrubDashboard = dash => {\r\n      // change title\r\n      dash.title = $scope.snapshot.name;\r\n\r\n      // make relative times absolute\r\n      dash.time = timeSrv.timeRange();\r\n\r\n      // remove panel queries & links\r\n      _.each(dash.panels, panel => {\r\n        panel.targets = [];\r\n        panel.links = [];\r\n        panel.datasource = null;\r\n      });\r\n\r\n      // remove annotation queries\r\n      dash.annotations.list = _.chain(dash.annotations.list)\r\n        .filter(annotation => {\r\n          return annotation.enable;\r\n        })\r\n        .map(annotation => {\r\n          return {\r\n            name: annotation.name,\r\n            enable: annotation.enable,\r\n            iconColor: annotation.iconColor,\r\n            snapshotData: annotation.snapshotData,\r\n            type: annotation.type,\r\n            builtIn: annotation.builtIn,\r\n            hide: annotation.hide,\r\n          };\r\n        })\r\n        .value();\r\n\r\n      // remove template queries\r\n      _.each(dash.templating.list, variable => {\r\n        variable.query = '';\r\n        variable.options = variable.current;\r\n        variable.refresh = false;\r\n      });\r\n\r\n      // snapshot single panel\r\n      if ($scope.modeSharePanel) {\r\n        const singlePanel = $scope.panel.getSaveModel();\r\n        singlePanel.gridPos.w = 24;\r\n        singlePanel.gridPos.x = 0;\r\n        singlePanel.gridPos.y = 0;\r\n        singlePanel.gridPos.h = 20;\r\n        dash.panels = [singlePanel];\r\n      }\r\n\r\n      // cleanup snapshotData\r\n      delete $scope.dashboard.snapshot;\r\n      $scope.dashboard.forEachPanel(panel => {\r\n        delete panel.snapshotData;\r\n      });\r\n      _.each($scope.dashboard.annotations.list, annotation => {\r\n        delete annotation.snapshotData;\r\n      });\r\n    };\r\n\r\n    $scope.deleteSnapshot = () => {\r\n      backendSrv.get($scope.deleteUrl).then(() => {\r\n        $scope.step = 3;\r\n      });\r\n    };\r\n\r\n    $scope.saveExternalSnapshotRef = (cmdData, results) => {\r\n      // save external in local instance as well\r\n      cmdData.external = true;\r\n      cmdData.key = results.key;\r\n      cmdData.deleteKey = results.deleteKey;\r\n      backendSrv.post('/api/snapshots/', cmdData);\r\n    };\r\n  }\r\n}\r\n\r\nangular.module('grafana.controllers').controller('ShareSnapshotCtrl', ShareSnapshotCtrl);\r\n","import coreModule from 'app/core/core_module';\r\nimport { DashboardModel } from './dashboard_model';\r\nimport locationUtil from 'app/core/utils/location_util';\r\n\r\nexport class DashboardSrv {\r\n  dash: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private $rootScope, private $location) {}\r\n\r\n  create(dashboard, meta) {\r\n    return new DashboardModel(dashboard, meta);\r\n  }\r\n\r\n  setCurrent(dashboard) {\r\n    this.dash = dashboard;\r\n  }\r\n\r\n  getCurrent() {\r\n    return this.dash;\r\n  }\r\n\r\n  handleSaveDashboardError(clone, options, err) {\r\n    options = options || {};\r\n    options.overwrite = true;\r\n\r\n    if (err.data && err.data.status === 'version-mismatch') {\r\n      err.isHandled = true;\r\n\r\n      this.$rootScope.appEvent('confirm-modal', {\r\n        title: 'Conflict',\r\n        text: 'Someone else has updated this dashboard.',\r\n        text2: 'Would you still like to save this dashboard?',\r\n        yesText: 'Save & Overwrite',\r\n        icon: 'fa-warning',\r\n        onConfirm: () => {\r\n          this.save(clone, options);\r\n        },\r\n      });\r\n    }\r\n\r\n    if (err.data && err.data.status === 'name-exists') {\r\n      err.isHandled = true;\r\n\r\n      this.$rootScope.appEvent('confirm-modal', {\r\n        title: 'Conflict',\r\n        text: 'A dashboard with the same name in selected folder already exists.',\r\n        text2: 'Would you still like to save this dashboard?',\r\n        yesText: 'Save & Overwrite',\r\n        icon: 'fa-warning',\r\n        onConfirm: () => {\r\n          this.save(clone, options);\r\n        },\r\n      });\r\n    }\r\n\r\n    if (err.data && err.data.status === 'plugin-dashboard') {\r\n      err.isHandled = true;\r\n\r\n      this.$rootScope.appEvent('confirm-modal', {\r\n        title: 'Plugin Dashboard',\r\n        text: err.data.message,\r\n        text2: 'Your changes will be lost when you update the plugin. Use Save As to create custom version.',\r\n        yesText: 'Overwrite',\r\n        icon: 'fa-warning',\r\n        altActionText: 'Save As',\r\n        onAltAction: () => {\r\n          this.showSaveAsModal();\r\n        },\r\n        onConfirm: () => {\r\n          this.save(clone, { overwrite: true });\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  postSave(clone, data) {\r\n    this.dash.version = data.version;\r\n\r\n    const newUrl = locationUtil.stripBaseFromUrl(data.url);\r\n    const currentPath = this.$location.path();\r\n\r\n    if (newUrl !== currentPath) {\r\n      this.$location.url(newUrl).replace();\r\n    }\r\n\r\n    this.$rootScope.appEvent('dashboard-saved', this.dash);\r\n    this.$rootScope.appEvent('alert-success', ['Dashboard saved']);\r\n\r\n    return this.dash;\r\n  }\r\n\r\n  save(clone, options) {\r\n    options = options || {};\r\n    options.folderId = options.folderId >= 0 ? options.folderId : this.dash.meta.folderId || clone.folderId;\r\n\r\n    return this.backendSrv\r\n      .saveDashboard(clone, options)\r\n      .then(this.postSave.bind(this, clone))\r\n      .catch(this.handleSaveDashboardError.bind(this, clone, options));\r\n  }\r\n\r\n  saveDashboard(options?, clone?) {\r\n    if (clone) {\r\n      this.setCurrent(this.create(clone, this.dash.meta));\r\n    }\r\n\r\n    if (this.dash.meta.provisioned) {\r\n      return this.showDashboardProvisionedModal();\r\n    }\r\n\r\n    if (!this.dash.meta.canSave && options.makeEditable !== true) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    if (this.dash.title === 'New dashboard') {\r\n      return this.showSaveAsModal();\r\n    }\r\n\r\n    if (this.dash.version > 0) {\r\n      return this.showSaveModal();\r\n    }\r\n\r\n    return this.save(this.dash.getSaveModelClone(), options);\r\n  }\r\n\r\n  saveJSONDashboard(json: string) {\r\n    return this.save(JSON.parse(json), {});\r\n  }\r\n\r\n  showDashboardProvisionedModal() {\r\n    this.$rootScope.appEvent('show-modal', {\r\n      templateHtml: '<save-provisioned-dashboard-modal dismiss=\"dismiss()\"></save-provisioned-dashboard-modal>',\r\n    });\r\n  }\r\n\r\n  showSaveAsModal() {\r\n    this.$rootScope.appEvent('show-modal', {\r\n      templateHtml: '<save-dashboard-as-modal dismiss=\"dismiss()\"></save-dashboard-as-modal>',\r\n      modalClass: 'modal--narrow',\r\n    });\r\n  }\r\n\r\n  showSaveModal() {\r\n    this.$rootScope.appEvent('show-modal', {\r\n      templateHtml: '<save-dashboard-modal dismiss=\"dismiss()\"></save-dashboard-modal>',\r\n      modalClass: 'modal--narrow',\r\n    });\r\n  }\r\n\r\n  starDashboard(dashboardId, isStarred) {\r\n    let promise;\r\n\r\n    if (isStarred) {\r\n      promise = this.backendSrv.delete('/api/user/stars/dashboard/' + dashboardId).then(() => {\r\n        return false;\r\n      });\r\n    } else {\r\n      promise = this.backendSrv.post('/api/user/stars/dashboard/' + dashboardId).then(() => {\r\n        return true;\r\n      });\r\n    }\r\n\r\n    return promise.then(res => {\r\n      if (this.dash && this.dash.id === dashboardId) {\r\n        this.dash.meta.isStarred = res;\r\n      }\r\n      return res;\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.service('dashboardSrv', DashboardSrv);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport config from 'app/core/config';\r\nimport appEvents from 'app/core/app_events';\r\nimport { DashboardModel } from './dashboard_model';\r\n\r\n// represents the transient view state\r\n// like fullscreen panel & edit\r\nexport class DashboardViewState {\r\n  state: any;\r\n  panelScopes: any;\r\n  $scope: any;\r\n  dashboard: DashboardModel;\r\n  fullscreenPanel: any;\r\n  oldTimeRange: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, private $location, private $timeout) {\r\n    const self = this;\r\n    self.state = {};\r\n    self.panelScopes = [];\r\n    self.$scope = $scope;\r\n    self.dashboard = $scope.dashboard;\r\n\r\n    $scope.onAppEvent('$routeUpdate', () => {\r\n      const urlState = self.getQueryStringState();\r\n      if (self.needsSync(urlState)) {\r\n        self.update(urlState, true);\r\n      }\r\n    });\r\n\r\n    $scope.onAppEvent('panel-change-view', (evt, payload) => {\r\n      self.update(payload);\r\n    });\r\n\r\n    // this marks changes to location during this digest cycle as not to add history item\r\n    // don't want url changes like adding orgId to add browser history\r\n    $location.replace();\r\n    this.update(this.getQueryStringState());\r\n  }\r\n\r\n  needsSync(urlState) {\r\n    return _.isEqual(this.state, urlState) === false;\r\n  }\r\n\r\n  getQueryStringState() {\r\n    const state = this.$location.search();\r\n    state.panelId = parseInt(state.panelId, 10) || null;\r\n    state.fullscreen = state.fullscreen ? true : null;\r\n    state.edit = state.edit === 'true' || state.edit === true || null;\r\n    state.editview = state.editview || null;\r\n    state.orgId = config.bootData.user.orgId;\r\n    return state;\r\n  }\r\n\r\n  serializeToUrl() {\r\n    const urlState = _.clone(this.state);\r\n    urlState.fullscreen = this.state.fullscreen ? true : null;\r\n    urlState.edit = this.state.edit ? true : null;\r\n    return urlState;\r\n  }\r\n\r\n  update(state, fromRouteUpdated?) {\r\n    // implement toggle logic\r\n    if (state.toggle) {\r\n      delete state.toggle;\r\n      if (this.state.fullscreen && state.fullscreen) {\r\n        if (this.state.edit === state.edit) {\r\n          state.fullscreen = !state.fullscreen;\r\n        }\r\n      }\r\n    }\r\n\r\n    _.extend(this.state, state);\r\n    this.dashboard.meta.fullscreen = this.state.fullscreen;\r\n\r\n    if (!this.state.fullscreen) {\r\n      this.state.fullscreen = null;\r\n      this.state.edit = null;\r\n      // clear panel id unless in solo mode\r\n      if (!this.dashboard.meta.soloMode) {\r\n        this.state.panelId = null;\r\n      }\r\n    }\r\n\r\n    if ((this.state.fullscreen || this.dashboard.meta.soloMode) && this.state.panelId) {\r\n      // Trying to render panel in fullscreen when it's in the collapsed row causes an issue.\r\n      // So in this case expand collapsed row first.\r\n      this.toggleCollapsedPanelRow(this.state.panelId);\r\n    }\r\n\r\n    // if no edit state cleanup tab parm\r\n    if (!this.state.edit) {\r\n      delete this.state.tab;\r\n    }\r\n\r\n    // do not update url params if we are here\r\n    // from routeUpdated event\r\n    if (fromRouteUpdated !== true) {\r\n      this.$location.search(this.serializeToUrl());\r\n    }\r\n\r\n    this.syncState();\r\n  }\r\n\r\n  toggleCollapsedPanelRow(panelId) {\r\n    for (const panel of this.dashboard.panels) {\r\n      if (panel.collapsed) {\r\n        for (const rowPanel of panel.panels) {\r\n          if (rowPanel.id === panelId) {\r\n            this.dashboard.toggleRow(panel);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  syncState() {\r\n    if (this.dashboard.meta.fullscreen) {\r\n      const panel = this.dashboard.getPanelById(this.state.panelId);\r\n\r\n      if (!panel) {\r\n        return;\r\n      }\r\n\r\n      if (!panel.fullscreen) {\r\n        this.enterFullscreen(panel);\r\n      } else {\r\n        // already in fullscreen view just update the view mode\r\n        this.dashboard.setViewMode(panel, this.state.fullscreen, this.state.edit);\r\n      }\r\n    } else if (this.fullscreenPanel) {\r\n      this.leaveFullscreen();\r\n    }\r\n  }\r\n\r\n  leaveFullscreen() {\r\n    const panel = this.fullscreenPanel;\r\n\r\n    this.dashboard.setViewMode(panel, false, false);\r\n\r\n    delete this.fullscreenPanel;\r\n\r\n    this.$timeout(() => {\r\n      appEvents.emit('dash-scroll', { restore: true });\r\n\r\n      if (this.oldTimeRange !== this.dashboard.time) {\r\n        this.dashboard.startRefresh();\r\n      } else {\r\n        this.dashboard.render();\r\n      }\r\n    });\r\n  }\r\n\r\n  enterFullscreen(panel) {\r\n    const isEditing = this.state.edit && this.dashboard.meta.canEdit;\r\n\r\n    this.oldTimeRange = this.dashboard.time;\r\n    this.fullscreenPanel = panel;\r\n\r\n    // Firefox doesn't return scrollTop position properly if 'dash-scroll' is emitted after setViewMode()\r\n    this.$scope.appEvent('dash-scroll', { animate: false, pos: 0 });\r\n    this.dashboard.setViewMode(panel, true, isEditing);\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function dashboardViewStateSrv($location, $timeout) {\r\n  return {\r\n    create: $scope => {\r\n      return new DashboardViewState($scope, $location, $timeout);\r\n    },\r\n  };\r\n}\r\n\r\nangular.module('grafana.services').factory('dashboardViewStateSrv', dashboardViewStateSrv);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nconst hitTypes = {\r\n  FOLDER: 'dash-folder',\r\n  DASHBOARD: 'dash-db',\r\n};\r\n\r\nexport class ValidationSrv {\r\n  rootName = 'general';\r\n\r\n  /** @ngInject */\r\n  constructor(private $q, private backendSrv) {}\r\n\r\n  validateNewDashboardName(folderId, name) {\r\n    return this.validate(folderId, name, 'A dashboard in this folder with the same name already exists');\r\n  }\r\n\r\n  validateNewFolderName(name) {\r\n    return this.validate(0, name, 'A folder or dashboard in the general folder with the same name already exists');\r\n  }\r\n\r\n  private validate(folderId, name, existingErrorMessage) {\r\n    name = (name || '').trim();\r\n    const nameLowerCased = name.toLowerCase();\r\n\r\n    if (name.length === 0) {\r\n      return this.$q.reject({\r\n        type: 'REQUIRED',\r\n        message: 'Name is required',\r\n      });\r\n    }\r\n\r\n    if (folderId === 0 && nameLowerCased === this.rootName) {\r\n      return this.$q.reject({\r\n        type: 'EXISTING',\r\n        message: 'This is a reserved name and cannot be used for a folder.',\r\n      });\r\n    }\r\n\r\n    const deferred = this.$q.defer();\r\n\r\n    const promises = [];\r\n    promises.push(this.backendSrv.search({ type: hitTypes.FOLDER, folderIds: [folderId], query: name }));\r\n    promises.push(this.backendSrv.search({ type: hitTypes.DASHBOARD, folderIds: [folderId], query: name }));\r\n\r\n    this.$q.all(promises).then(res => {\r\n      let hits = [];\r\n\r\n      if (res.length > 0 && res[0].length > 0) {\r\n        hits = res[0];\r\n      }\r\n\r\n      if (res.length > 1 && res[1].length > 0) {\r\n        hits = hits.concat(res[1]);\r\n      }\r\n\r\n      for (const hit of hits) {\r\n        if (nameLowerCased === hit.title.toLowerCase()) {\r\n          deferred.reject({\r\n            type: 'EXISTING',\r\n            message: existingErrorMessage,\r\n          });\r\n          break;\r\n        }\r\n      }\r\n\r\n      deferred.resolve();\r\n    });\r\n\r\n    return deferred.promise;\r\n  }\r\n}\r\n\r\ncoreModule.service('validationSrv', ValidationSrv);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport { DashboardModel } from './dashboard_model';\r\n\r\nexport class ChangeTracker {\r\n  current: any;\r\n  originalPath: any;\r\n  scope: any;\r\n  original: any;\r\n  next: any;\r\n  $window: any;\r\n\r\n  /** @ngInject */\r\n  constructor(\r\n    dashboard,\r\n    scope,\r\n    originalCopyDelay,\r\n    private $location,\r\n    $window,\r\n    private $timeout,\r\n    private contextSrv,\r\n    private $rootScope\r\n  ) {\r\n    this.$location = $location;\r\n    this.$window = $window;\r\n\r\n    this.current = dashboard;\r\n    this.originalPath = $location.path();\r\n    this.scope = scope;\r\n\r\n    // register events\r\n    scope.onAppEvent('dashboard-saved', () => {\r\n      this.original = this.current.getSaveModelClone();\r\n      this.originalPath = $location.path();\r\n    });\r\n\r\n    $window.onbeforeunload = () => {\r\n      if (this.ignoreChanges()) {\r\n        return undefined;\r\n      }\r\n      if (this.hasChanges()) {\r\n        return 'There are unsaved changes to this dashboard';\r\n      }\r\n      return undefined;\r\n    };\r\n\r\n    scope.$on('$locationChangeStart', (event, next) => {\r\n      // check if we should look for changes\r\n      if (this.originalPath === $location.path()) {\r\n        return true;\r\n      }\r\n      if (this.ignoreChanges()) {\r\n        return true;\r\n      }\r\n\r\n      if (this.hasChanges()) {\r\n        event.preventDefault();\r\n        this.next = next;\r\n\r\n        this.$timeout(() => {\r\n          this.open_modal();\r\n        });\r\n      }\r\n      return false;\r\n    });\r\n\r\n    if (originalCopyDelay) {\r\n      this.$timeout(() => {\r\n        // wait for different services to patch the dashboard (missing properties)\r\n        this.original = dashboard.getSaveModelClone();\r\n      }, originalCopyDelay);\r\n    } else {\r\n      this.original = dashboard.getSaveModelClone();\r\n    }\r\n  }\r\n\r\n  // for some dashboards and users\r\n  // changes should be ignored\r\n  ignoreChanges() {\r\n    if (!this.original) {\r\n      return true;\r\n    }\r\n    if (!this.contextSrv.isEditor) {\r\n      return true;\r\n    }\r\n    if (!this.current || !this.current.meta) {\r\n      return true;\r\n    }\r\n\r\n    const meta = this.current.meta;\r\n    return !meta.canSave || meta.fromScript || meta.fromFile;\r\n  }\r\n\r\n  // remove stuff that should not count in diff\r\n  cleanDashboardFromIgnoredChanges(dashData) {\r\n    // need to new up the domain model class to get access to expand / collapse row logic\r\n    const model = new DashboardModel(dashData);\r\n\r\n    // Expand all rows before making comparison. This is required because row expand / collapse\r\n    // change order of panel array and panel positions.\r\n    model.expandRows();\r\n\r\n    const dash = model.getSaveModelClone();\r\n\r\n    // ignore time and refresh\r\n    dash.time = 0;\r\n    dash.refresh = 0;\r\n    dash.schemaVersion = 0;\r\n\r\n    // ignore iteration property\r\n    delete dash.iteration;\r\n\r\n    dash.panels = _.filter(dash.panels, panel => {\r\n      if (panel.repeatPanelId) {\r\n        return false;\r\n      }\r\n\r\n      // remove scopedVars\r\n      panel.scopedVars = null;\r\n\r\n      // ignore panel legend sort\r\n      if (panel.legend) {\r\n        delete panel.legend.sort;\r\n        delete panel.legend.sortDesc;\r\n      }\r\n\r\n      return true;\r\n    });\r\n\r\n    // ignore template variable values\r\n    _.each(dash.templating.list, value => {\r\n      value.current = null;\r\n      value.options = null;\r\n      value.filters = null;\r\n    });\r\n\r\n    return dash;\r\n  }\r\n\r\n  hasChanges() {\r\n    const current = this.cleanDashboardFromIgnoredChanges(this.current.getSaveModelClone());\r\n    const original = this.cleanDashboardFromIgnoredChanges(this.original);\r\n\r\n    const currentTimepicker = _.find(current.nav, { type: 'timepicker' });\r\n    const originalTimepicker = _.find(original.nav, { type: 'timepicker' });\r\n\r\n    if (currentTimepicker && originalTimepicker) {\r\n      currentTimepicker.now = originalTimepicker.now;\r\n    }\r\n\r\n    const currentJson = angular.toJson(current, true);\r\n    const originalJson = angular.toJson(original, true);\r\n\r\n    return currentJson !== originalJson;\r\n  }\r\n\r\n  discardChanges() {\r\n    this.original = null;\r\n    this.gotoNext();\r\n  }\r\n\r\n  open_modal() {\r\n    this.$rootScope.appEvent('show-modal', {\r\n      templateHtml: '<unsaved-changes-modal dismiss=\"dismiss()\"></unsaved-changes-modal>',\r\n      modalClass: 'modal--narrow confirm-modal',\r\n    });\r\n  }\r\n\r\n  saveChanges() {\r\n    const self = this;\r\n    const cancel = this.$rootScope.$on('dashboard-saved', () => {\r\n      cancel();\r\n      this.$timeout(() => {\r\n        self.gotoNext();\r\n      });\r\n    });\r\n\r\n    this.$rootScope.appEvent('save-dashboard');\r\n  }\r\n\r\n  gotoNext() {\r\n    const baseLen = this.$location.absUrl().length - this.$location.url().length;\r\n    const nextUrl = this.next.substring(baseLen);\r\n    this.$location.url(nextUrl);\r\n  }\r\n}\r\n","import angular from 'angular';\r\nimport { ChangeTracker } from './change_tracker';\r\n\r\n/** @ngInject */\r\nexport function unsavedChangesSrv(this: any, $rootScope, $q, $location, $timeout, contextSrv, dashboardSrv, $window) {\r\n  this.init = function(dashboard, scope) {\r\n    this.tracker = new ChangeTracker(dashboard, scope, 1000, $location, $window, $timeout, contextSrv, $rootScope);\r\n    return this.tracker;\r\n  };\r\n}\r\n\r\nangular.module('grafana.services').service('unsavedChangesSrv', unsavedChangesSrv);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nconst template = `\r\n<div class=\"modal-body\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header-title\">\r\n      <i class=\"fa fa-exclamation\"></i>\r\n      <span class=\"p-l-1\">Unsaved changes</span>\r\n    </h2>\r\n\r\n    <a class=\"modal-header-close\" ng-click=\"ctrl.dismiss();\">\r\n      <i class=\"fa fa-remove\"></i>\r\n    </a>\r\n  </div>\r\n\r\n  <div class=\"modal-content text-center\">\r\n\r\n    <div class=\"confirm-modal-text\">\r\n      Do you want to save your changes?\r\n    </div>\r\n\r\n    <div class=\"confirm-modal-buttons\">\r\n      <button type=\"button\" class=\"btn btn-success\" ng-click=\"ctrl.save()\">Save</button>\r\n      <button type=\"button\" class=\"btn btn-danger\" ng-click=\"ctrl.discard()\">Discard</button>\r\n      <button type=\"button\" class=\"btn btn-inverse\" ng-click=\"ctrl.dismiss()\">Cancel</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n`;\r\n\r\nexport class UnsavedChangesModalCtrl {\r\n  clone: any;\r\n  dismiss: () => void;\r\n\r\n  /** @ngInject */\r\n  constructor(private unsavedChangesSrv) {}\r\n\r\n  discard() {\r\n    this.dismiss();\r\n    this.unsavedChangesSrv.tracker.discardChanges();\r\n  }\r\n\r\n  save() {\r\n    this.dismiss();\r\n    this.unsavedChangesSrv.tracker.saveChanges();\r\n  }\r\n}\r\n\r\nexport function unsavedChangesModalDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    controller: UnsavedChangesModalCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: { dismiss: '&' },\r\n  };\r\n}\r\n\r\ncoreModule.directive('unsavedChangesModal', unsavedChangesModalDirective);\r\n","import moment from 'moment';\r\nimport * as dateMath from 'app/core/utils/datemath';\r\n\r\nexport function inputDateDirective() {\r\n  return {\r\n    restrict: 'A',\r\n    require: 'ngModel',\r\n    link: ($scope, $elem, attrs, ngModel) => {\r\n      const format = 'YYYY-MM-DD HH:mm:ss';\r\n\r\n      const fromUser = text => {\r\n        if (text.indexOf('now') !== -1) {\r\n          if (!dateMath.isValid(text)) {\r\n            ngModel.$setValidity('error', false);\r\n            return undefined;\r\n          }\r\n          ngModel.$setValidity('error', true);\r\n          return text;\r\n        }\r\n\r\n        let parsed;\r\n        if ($scope.ctrl.isUtc) {\r\n          parsed = moment.utc(text, format);\r\n        } else {\r\n          parsed = moment(text, format);\r\n        }\r\n\r\n        if (!parsed.isValid()) {\r\n          ngModel.$setValidity('error', false);\r\n          return undefined;\r\n        }\r\n\r\n        ngModel.$setValidity('error', true);\r\n        return parsed;\r\n      };\r\n\r\n      const toUser = currentValue => {\r\n        if (moment.isMoment(currentValue)) {\r\n          return currentValue.format(format);\r\n        } else {\r\n          return currentValue;\r\n        }\r\n      };\r\n\r\n      ngModel.$parsers.push(fromUser);\r\n      ngModel.$formatters.push(toUser);\r\n    },\r\n  };\r\n}\r\n","import _ from 'lodash';\r\nimport angular from 'angular';\r\nimport moment from 'moment';\r\n\r\nimport * as rangeUtil from 'app/core/utils/rangeutil';\r\n\r\nexport class TimePickerCtrl {\r\n  static tooltipFormat = 'MMM D, YYYY HH:mm:ss';\r\n  static defaults = {\r\n    time_options: ['5m', '15m', '1h', '6h', '12h', '24h', '2d', '7d', '30d'],\r\n    refresh_intervals: ['5s', '10s', '30s', '1m', '5m', '15m', '30m', '1h', '2h', '1d'],\r\n  };\r\n\r\n  dashboard: any;\r\n  panel: any;\r\n  absolute: any;\r\n  timeRaw: any;\r\n  editTimeRaw: any;\r\n  tooltip: string;\r\n  rangeString: string;\r\n  timeOptions: any;\r\n  refresh: any;\r\n  isUtc: boolean;\r\n  firstDayOfWeek: number;\r\n  isOpen: boolean;\r\n  isAbsolute: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope, private $rootScope, private timeSrv) {\r\n    this.$scope.ctrl = this;\r\n\r\n    $rootScope.onAppEvent('shift-time-forward', () => this.move(1), $scope);\r\n    $rootScope.onAppEvent('shift-time-backward', () => this.move(-1), $scope);\r\n    $rootScope.onAppEvent('closeTimepicker', this.openDropdown.bind(this), $scope);\r\n\r\n    this.dashboard.on('refresh', this.onRefresh.bind(this), $scope);\r\n\r\n    // init options\r\n    this.panel = this.dashboard.timepicker;\r\n    _.defaults(this.panel, TimePickerCtrl.defaults);\r\n    this.firstDayOfWeek = moment.localeData().firstDayOfWeek();\r\n\r\n    // init time stuff\r\n    this.onRefresh();\r\n  }\r\n\r\n  onRefresh() {\r\n    const time = angular.copy(this.timeSrv.timeRange());\r\n    const timeRaw = angular.copy(time.raw);\r\n\r\n    if (!this.dashboard.isTimezoneUtc()) {\r\n      time.from.local();\r\n      time.to.local();\r\n      if (moment.isMoment(timeRaw.from)) {\r\n        timeRaw.from.local();\r\n      }\r\n      if (moment.isMoment(timeRaw.to)) {\r\n        timeRaw.to.local();\r\n      }\r\n      this.isUtc = false;\r\n    } else {\r\n      this.isUtc = true;\r\n    }\r\n\r\n    this.rangeString = rangeUtil.describeTimeRange(timeRaw);\r\n    this.absolute = { fromJs: time.from.toDate(), toJs: time.to.toDate() };\r\n    this.tooltip = this.dashboard.formatDate(time.from) + ' <br>to<br>';\r\n    this.tooltip += this.dashboard.formatDate(time.to);\r\n    this.timeRaw = timeRaw;\r\n    this.isAbsolute = moment.isMoment(this.timeRaw.to);\r\n  }\r\n\r\n  zoom(factor) {\r\n    this.$rootScope.appEvent('zoom-out', 2);\r\n  }\r\n\r\n  move(direction) {\r\n    const range = this.timeSrv.timeRange();\r\n\r\n    const timespan = (range.to.valueOf() - range.from.valueOf()) / 2;\r\n    let to, from;\r\n    if (direction === -1) {\r\n      to = range.to.valueOf() - timespan;\r\n      from = range.from.valueOf() - timespan;\r\n    } else if (direction === 1) {\r\n      to = range.to.valueOf() + timespan;\r\n      from = range.from.valueOf() + timespan;\r\n      if (to > Date.now() && range.to < Date.now()) {\r\n        to = Date.now();\r\n        from = range.from.valueOf();\r\n      }\r\n    } else {\r\n      to = range.to.valueOf();\r\n      from = range.from.valueOf();\r\n    }\r\n\r\n    this.timeSrv.setTime({ from: moment.utc(from), to: moment.utc(to) });\r\n  }\r\n\r\n  openDropdown() {\r\n    if (this.isOpen) {\r\n      this.closeDropdown();\r\n      return;\r\n    }\r\n\r\n    this.onRefresh();\r\n    this.editTimeRaw = this.timeRaw;\r\n    this.timeOptions = rangeUtil.getRelativeTimesList(this.panel, this.rangeString);\r\n    this.refresh = {\r\n      value: this.dashboard.refresh,\r\n      options: _.map(this.panel.refresh_intervals, (interval: any) => {\r\n        return { text: interval, value: interval };\r\n      }),\r\n    };\r\n\r\n    this.refresh.options.unshift({ text: 'off' });\r\n    this.isOpen = true;\r\n    this.$rootScope.appEvent('timepickerOpen');\r\n  }\r\n\r\n  closeDropdown() {\r\n    this.isOpen = false;\r\n    this.$rootScope.appEvent('timepickerClosed');\r\n  }\r\n\r\n  applyCustom() {\r\n    if (this.refresh.value !== this.dashboard.refresh) {\r\n      this.timeSrv.setAutoRefresh(this.refresh.value);\r\n    }\r\n\r\n    this.timeSrv.setTime(this.editTimeRaw);\r\n    this.closeDropdown();\r\n  }\r\n\r\n  absoluteFromChanged() {\r\n    this.editTimeRaw.from = this.getAbsoluteMomentForTimezone(this.absolute.fromJs);\r\n  }\r\n\r\n  absoluteToChanged() {\r\n    this.editTimeRaw.to = this.getAbsoluteMomentForTimezone(this.absolute.toJs);\r\n  }\r\n\r\n  getAbsoluteMomentForTimezone(jsDate) {\r\n    return this.dashboard.isTimezoneUtc() ? moment(jsDate).utc() : moment(jsDate);\r\n  }\r\n\r\n  setRelativeFilter(timespan) {\r\n    const range = { from: timespan.from, to: timespan.to };\r\n\r\n    if (this.panel.nowDelay && range.to === 'now') {\r\n      range.to = 'now-' + this.panel.nowDelay;\r\n    }\r\n\r\n    this.timeSrv.setTime(range);\r\n    this.closeDropdown();\r\n  }\r\n}\r\n\r\nexport function settingsDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/timepicker/settings.html',\r\n    controller: TimePickerCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      dashboard: '=',\r\n    },\r\n  };\r\n}\r\n\r\nexport function timePickerDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/timepicker/timepicker.html',\r\n    controller: TimePickerCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      dashboard: '=',\r\n    },\r\n  };\r\n}\r\n\r\nangular.module('grafana.directives').directive('gfTimePickerSettings', settingsDirective);\r\nangular.module('grafana.directives').directive('gfTimePicker', timePickerDirective);\r\n\r\nimport { inputDateDirective } from './input_date';\r\nangular.module('grafana.directives').directive('inputDatetime', inputDateDirective);\r\n","import coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\nimport angular from 'angular';\r\n\r\nconst template = `\r\n<input type=\"file\" id=\"dashupload\" name=\"dashupload\" class=\"hide\" onchange=\"angular.element(this).scope().file_selected\"/>\r\n<label class=\"btn btn-success\" for=\"dashupload\">\r\n  <i class=\"fa fa-upload\"></i>\r\n  {{btnText}}\r\n</label>\r\n`;\r\n\r\n/** @ngInject */\r\nfunction uploadDashboardDirective(timer, alertSrv, $location) {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    scope: {\r\n      onUpload: '&',\r\n      btnText: '@?',\r\n    },\r\n    link: (scope, elem) => {\r\n      scope.btnText = angular.isDefined(scope.btnText) ? scope.btnText : 'Upload .json File';\r\n\r\n      function file_selected(evt) {\r\n        const files = evt.target.files; // FileList object\r\n        const readerOnload = () => {\r\n          return e => {\r\n            let dash;\r\n            try {\r\n              dash = JSON.parse(e.target.result);\r\n            } catch (err) {\r\n              console.log(err);\r\n              appEvents.emit('alert-error', ['Import failed', 'JSON -> JS Serialization failed: ' + err.message]);\r\n              return;\r\n            }\r\n\r\n            scope.$apply(() => {\r\n              scope.onUpload({ dash: dash });\r\n            });\r\n          };\r\n        };\r\n\r\n        let i = 0;\r\n        let file = files[i];\r\n\r\n        while (file) {\r\n          const reader = new FileReader();\r\n          reader.onload = readerOnload();\r\n          reader.readAsText(file);\r\n          i += 1;\r\n          file = files[i];\r\n        }\r\n      }\r\n\r\n      const wnd: any = window;\r\n      // Check for the various File API support.\r\n      if (wnd.File && wnd.FileReader && wnd.FileList && wnd.Blob) {\r\n        // Something\r\n        elem[0].addEventListener('change', file_selected, false);\r\n      } else {\r\n        alertSrv.set('Oops', 'Sorry, the HTML5 File APIs are not fully supported in this browser.', 'error');\r\n      }\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('dashUpload', uploadDashboardDirective);\r\n","import config from 'app/core/config';\r\nimport _ from 'lodash';\r\nimport { DashboardModel } from '../dashboard_model';\r\n\r\nexport class DashboardExporter {\r\n  constructor(private datasourceSrv) {}\r\n\r\n  makeExportable(dashboard: DashboardModel) {\r\n    // clean up repeated rows and panels,\r\n    // this is done on the live real dashboard instance, not on a clone\r\n    // so we need to undo this\r\n    // this is pretty hacky and needs to be changed\r\n    dashboard.cleanUpRepeats();\r\n\r\n    const saveModel = dashboard.getSaveModelClone();\r\n    saveModel.id = null;\r\n\r\n    // undo repeat cleanup\r\n    dashboard.processRepeats();\r\n\r\n    const inputs = [];\r\n    const requires = {};\r\n    const datasources = {};\r\n    const promises = [];\r\n    const variableLookup: any = {};\r\n\r\n    for (const variable of saveModel.templating.list) {\r\n      variableLookup[variable.name] = variable;\r\n    }\r\n\r\n    const templateizeDatasourceUsage = obj => {\r\n      // ignore data source properties that contain a variable\r\n      if (obj.datasource && obj.datasource.indexOf('$') === 0) {\r\n        if (variableLookup[obj.datasource.substring(1)]) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      promises.push(\r\n        this.datasourceSrv.get(obj.datasource).then(ds => {\r\n          if (ds.meta.builtIn) {\r\n            return;\r\n          }\r\n\r\n          const refName = 'DS_' + ds.name.replace(' ', '_').toUpperCase();\r\n          datasources[refName] = {\r\n            name: refName,\r\n            label: ds.name,\r\n            description: '',\r\n            type: 'datasource',\r\n            pluginId: ds.meta.id,\r\n            pluginName: ds.meta.name,\r\n          };\r\n          obj.datasource = '${' + refName + '}';\r\n\r\n          requires['datasource' + ds.meta.id] = {\r\n            type: 'datasource',\r\n            id: ds.meta.id,\r\n            name: ds.meta.name,\r\n            version: ds.meta.info.version || '1.0.0',\r\n          };\r\n        })\r\n      );\r\n    };\r\n\r\n    const processPanel = panel => {\r\n      if (panel.datasource !== undefined) {\r\n        templateizeDatasourceUsage(panel);\r\n      }\r\n\r\n      if (panel.targets) {\r\n        for (const target of panel.targets) {\r\n          if (target.datasource !== undefined) {\r\n            templateizeDatasourceUsage(target);\r\n          }\r\n        }\r\n      }\r\n\r\n      const panelDef = config.panels[panel.type];\r\n      if (panelDef) {\r\n        requires['panel' + panelDef.id] = {\r\n          type: 'panel',\r\n          id: panelDef.id,\r\n          name: panelDef.name,\r\n          version: panelDef.info.version,\r\n        };\r\n      }\r\n    };\r\n\r\n    // check up panel data sources\r\n    for (const panel of saveModel.panels) {\r\n      processPanel(panel);\r\n\r\n      // handle collapsed rows\r\n      if (panel.collapsed !== undefined && panel.collapsed === true && panel.panels) {\r\n        for (const rowPanel of panel.panels) {\r\n          processPanel(rowPanel);\r\n        }\r\n      }\r\n    }\r\n\r\n    // templatize template vars\r\n    for (const variable of saveModel.templating.list) {\r\n      if (variable.type === 'query') {\r\n        templateizeDatasourceUsage(variable);\r\n        variable.options = [];\r\n        variable.current = {};\r\n        variable.refresh = variable.refresh > 0 ? variable.refresh : 1;\r\n      }\r\n    }\r\n\r\n    // templatize annotations vars\r\n    for (const annotationDef of saveModel.annotations.list) {\r\n      templateizeDatasourceUsage(annotationDef);\r\n    }\r\n\r\n    // add grafana version\r\n    requires['grafana'] = {\r\n      type: 'grafana',\r\n      id: 'grafana',\r\n      name: 'Grafana',\r\n      version: config.buildInfo.version,\r\n    };\r\n\r\n    return Promise.all(promises)\r\n      .then(() => {\r\n        _.each(datasources, (value, key) => {\r\n          inputs.push(value);\r\n        });\r\n\r\n        // templatize constants\r\n        for (const variable of saveModel.templating.list) {\r\n          if (variable.type === 'constant') {\r\n            const refName = 'VAR_' + variable.name.replace(' ', '_').toUpperCase();\r\n            inputs.push({\r\n              name: refName,\r\n              type: 'constant',\r\n              label: variable.label || variable.name,\r\n              value: variable.current.value,\r\n              description: '',\r\n            });\r\n            // update current and option\r\n            variable.query = '${' + refName + '}';\r\n            variable.options[0] = variable.current = {\r\n              value: variable.query,\r\n              text: variable.query,\r\n            };\r\n          }\r\n        }\r\n\r\n        // make inputs and requires a top thing\r\n        const newObj = {};\r\n        newObj['__inputs'] = inputs;\r\n        newObj['__requires'] = _.sortBy(requires, ['id']);\r\n\r\n        _.defaults(newObj, saveModel);\r\n        return newObj;\r\n      })\r\n      .catch(err => {\r\n        console.log('Export failed:', err);\r\n        return {\r\n          error: err,\r\n        };\r\n      });\r\n  }\r\n}\r\n","import angular from 'angular';\r\nimport { saveAs } from 'file-saver';\r\n\r\nimport coreModule from 'app/core/core_module';\r\nimport { DashboardExporter } from './exporter';\r\n\r\nexport class DashExportCtrl {\r\n  dash: any;\r\n  exporter: DashboardExporter;\r\n  dismiss: () => void;\r\n\r\n  /** @ngInject */\r\n  constructor(private dashboardSrv, datasourceSrv, private $scope, private $rootScope) {\r\n    this.exporter = new DashboardExporter(datasourceSrv);\r\n\r\n    this.exporter.makeExportable(this.dashboardSrv.getCurrent()).then(dash => {\r\n      this.$scope.$apply(() => {\r\n        this.dash = dash;\r\n      });\r\n    });\r\n  }\r\n\r\n  save() {\r\n    const blob = new Blob([angular.toJson(this.dash, true)], {\r\n      type: 'application/json;charset=utf-8',\r\n    });\r\n    saveAs(blob, this.dash.title + '-' + new Date().getTime() + '.json');\r\n  }\r\n\r\n  saveJson() {\r\n    const clone = this.dash;\r\n    const editScope = this.$rootScope.$new();\r\n    editScope.object = clone;\r\n    editScope.enableCopy = true;\r\n\r\n    this.$rootScope.appEvent('show-modal', {\r\n      src: 'public/app/partials/edit_json.html',\r\n      scope: editScope,\r\n    });\r\n\r\n    this.dismiss();\r\n  }\r\n}\r\n\r\nexport function dashExportDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/export/export_modal.html',\r\n    controller: DashExportCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: { dismiss: '&' },\r\n  };\r\n}\r\n\r\ncoreModule.directive('dashExportModal', dashExportDirective);\r\n","import angular from 'angular';\r\nimport * as fileExport from 'app/core/utils/file_export';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class ExportDataModalCtrl {\r\n  private data: any[];\r\n  private panel: string;\r\n  asRows = true;\r\n  dateTimeFormat = 'YYYY-MM-DDTHH:mm:ssZ';\r\n  excel = false;\r\n\r\n  export() {\r\n    if (this.panel === 'table') {\r\n      fileExport.exportTableDataToCsv(this.data, this.excel);\r\n    } else {\r\n      if (this.asRows) {\r\n        fileExport.exportSeriesListToCsv(this.data, this.dateTimeFormat, this.excel);\r\n      } else {\r\n        fileExport.exportSeriesListToCsvColumns(this.data, this.dateTimeFormat, this.excel);\r\n      }\r\n    }\r\n\r\n    this.dismiss();\r\n  }\r\n\r\n  dismiss() {\r\n    appEvents.emit('hide-modal');\r\n  }\r\n}\r\n\r\nexport function exportDataModal() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/export_data/export_data_modal.html',\r\n    controller: ExportDataModalCtrl,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      panel: '<',\r\n      data: '<', // The difference to '=' is that the bound properties are not watched\r\n    },\r\n    bindToController: true,\r\n  };\r\n}\r\n\r\nangular.module('grafana.directives').directive('exportDataModal', exportDataModal);\r\n","import _ from 'lodash';\r\nimport angular from 'angular';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nexport class AdHocFiltersCtrl {\r\n  segments: any;\r\n  variable: any;\r\n  removeTagFilterSegment: any;\r\n\r\n  /** @ngInject */\r\n  constructor(\r\n    private uiSegmentSrv,\r\n    private datasourceSrv,\r\n    private $q,\r\n    private variableSrv,\r\n    $scope,\r\n    private $rootScope\r\n  ) {\r\n    this.removeTagFilterSegment = uiSegmentSrv.newSegment({\r\n      fake: true,\r\n      value: '-- remove filter --',\r\n    });\r\n    this.buildSegmentModel();\r\n    this.$rootScope.onAppEvent('template-variable-value-updated', this.buildSegmentModel.bind(this), $scope);\r\n  }\r\n\r\n  buildSegmentModel() {\r\n    this.segments = [];\r\n\r\n    if (this.variable.value && !_.isArray(this.variable.value)) {\r\n    }\r\n\r\n    for (const tag of this.variable.filters) {\r\n      if (this.segments.length > 0) {\r\n        this.segments.push(this.uiSegmentSrv.newCondition('AND'));\r\n      }\r\n\r\n      if (tag.key !== undefined && tag.value !== undefined) {\r\n        this.segments.push(this.uiSegmentSrv.newKey(tag.key));\r\n        this.segments.push(this.uiSegmentSrv.newOperator(tag.operator));\r\n        this.segments.push(this.uiSegmentSrv.newKeyValue(tag.value));\r\n      }\r\n    }\r\n\r\n    this.segments.push(this.uiSegmentSrv.newPlusButton());\r\n  }\r\n\r\n  getOptions(segment, index) {\r\n    if (segment.type === 'operator') {\r\n      return this.$q.when(this.uiSegmentSrv.newOperators(['=', '!=', '<', '>', '=~', '!~']));\r\n    }\r\n\r\n    if (segment.type === 'condition') {\r\n      return this.$q.when([this.uiSegmentSrv.newSegment('AND')]);\r\n    }\r\n\r\n    return this.datasourceSrv.get(this.variable.datasource).then(ds => {\r\n      const options: any = {};\r\n      let promise = null;\r\n\r\n      if (segment.type !== 'value') {\r\n        promise = ds.getTagKeys ? ds.getTagKeys() : Promise.resolve([]);\r\n      } else {\r\n        options.key = this.segments[index - 2].value;\r\n        promise = ds.getTagValues ? ds.getTagValues(options) : Promise.resolve([]);\r\n      }\r\n\r\n      return promise.then(results => {\r\n        results = _.map(results, segment => {\r\n          return this.uiSegmentSrv.newSegment({ value: segment.text });\r\n        });\r\n\r\n        // add remove option for keys\r\n        if (segment.type === 'key') {\r\n          results.splice(0, 0, angular.copy(this.removeTagFilterSegment));\r\n        }\r\n        return results;\r\n      });\r\n    });\r\n  }\r\n\r\n  segmentChanged(segment, index) {\r\n    this.segments[index] = segment;\r\n\r\n    // handle remove tag condition\r\n    if (segment.value === this.removeTagFilterSegment.value) {\r\n      this.segments.splice(index, 3);\r\n      if (this.segments.length === 0) {\r\n        this.segments.push(this.uiSegmentSrv.newPlusButton());\r\n      } else if (this.segments.length > 2) {\r\n        this.segments.splice(Math.max(index - 1, 0), 1);\r\n        if (this.segments[this.segments.length - 1].type !== 'plus-button') {\r\n          this.segments.push(this.uiSegmentSrv.newPlusButton());\r\n        }\r\n      }\r\n    } else {\r\n      if (segment.type === 'plus-button') {\r\n        if (index > 2) {\r\n          this.segments.splice(index, 0, this.uiSegmentSrv.newCondition('AND'));\r\n        }\r\n        this.segments.push(this.uiSegmentSrv.newOperator('='));\r\n        this.segments.push(this.uiSegmentSrv.newFake('select value', 'value', 'query-segment-value'));\r\n        segment.type = 'key';\r\n        segment.cssClass = 'query-segment-key';\r\n      }\r\n\r\n      if (index + 1 === this.segments.length) {\r\n        this.segments.push(this.uiSegmentSrv.newPlusButton());\r\n      }\r\n    }\r\n\r\n    this.updateVariableModel();\r\n  }\r\n\r\n  updateVariableModel() {\r\n    const filters = [];\r\n    let filterIndex = -1;\r\n    let hasFakes = false;\r\n\r\n    this.segments.forEach(segment => {\r\n      if (segment.type === 'value' && segment.fake) {\r\n        hasFakes = true;\r\n        return;\r\n      }\r\n\r\n      switch (segment.type) {\r\n        case 'key': {\r\n          filters.push({ key: segment.value });\r\n          filterIndex += 1;\r\n          break;\r\n        }\r\n        case 'value': {\r\n          filters[filterIndex].value = segment.value;\r\n          break;\r\n        }\r\n        case 'operator': {\r\n          filters[filterIndex].operator = segment.value;\r\n          break;\r\n        }\r\n        case 'condition': {\r\n          filters[filterIndex].condition = segment.value;\r\n          break;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (hasFakes) {\r\n      return;\r\n    }\r\n\r\n    this.variable.setFilters(filters);\r\n    this.variableSrv.variableUpdated(this.variable, true);\r\n  }\r\n}\r\n\r\nconst template = `\r\n<div class=\"gf-form-inline\">\r\n  <div class=\"gf-form\" ng-repeat=\"segment in ctrl.segments\">\r\n    <metric-segment segment=\"segment\" get-options=\"ctrl.getOptions(segment, $index)\"\r\n                    on-change=\"ctrl.segmentChanged(segment, $index)\"></metric-segment>\r\n  </div>\r\n</div>\r\n`;\r\n\r\nexport function adHocFiltersComponent() {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    controller: AdHocFiltersCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      variable: '=',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('adHocFilters', adHocFiltersComponent);\r\n","import { coreModule } from 'app/core/core';\r\n\r\nconst template = `\r\n<div class=\"gf-form-select-wrapper max-width-18\">\r\n  <select class=\"gf-form-input\" ng-model=\"panel.repeat\" ng-options=\"f.value as f.text for f in variables\" ng-change=\"optionChanged()\">\r\n  <option value=\"\"></option>\r\n</div>\r\n`;\r\n\r\n/** @ngInject */\r\nfunction dashRepeatOptionDirective(variableSrv) {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    scope: {\r\n      panel: '=',\r\n    },\r\n    link: (scope, element) => {\r\n      element.css({ display: 'block', width: '100%' });\r\n\r\n      scope.variables = variableSrv.variables.map(item => {\r\n        return { text: item.name, value: item.name };\r\n      });\r\n\r\n      if (scope.variables.length === 0) {\r\n        scope.variables.unshift({\r\n          text: 'No template variables found',\r\n          value: null,\r\n        });\r\n      }\r\n\r\n      scope.variables.unshift({ text: 'Disabled', value: null });\r\n\r\n      // if repeat is set and no direction set to horizontal\r\n      if (scope.panel.repeat && !scope.panel.repeatDirection) {\r\n        scope.panel.repeatDirection = 'h';\r\n      }\r\n\r\n      scope.optionChanged = () => {\r\n        if (scope.panel.repeat) {\r\n          scope.panel.repeatDirection = 'h';\r\n        }\r\n      };\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('dashRepeatOption', dashRepeatOptionDirective);\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { PanelModel } from '../panel_model';\r\nimport { DashboardModel } from '../dashboard_model';\r\nimport templateSrv from 'app/features/templating/template_srv';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport interface DashboardRowProps {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\nexport class DashboardRow extends React.Component<DashboardRowProps, any> {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      collapsed: this.props.panel.collapsed,\r\n    };\r\n\r\n    this.toggle = this.toggle.bind(this);\r\n    this.openSettings = this.openSettings.bind(this);\r\n    this.delete = this.delete.bind(this);\r\n    this.update = this.update.bind(this);\r\n  }\r\n\r\n  toggle() {\r\n    this.props.dashboard.toggleRow(this.props.panel);\r\n\r\n    this.setState(prevState => {\r\n      return { collapsed: !prevState.collapsed };\r\n    });\r\n  }\r\n\r\n  update() {\r\n    this.props.dashboard.processRepeats();\r\n    this.forceUpdate();\r\n  }\r\n\r\n  openSettings() {\r\n    appEvents.emit('show-modal', {\r\n      templateHtml: `<row-options row=\"model.row\" on-updated=\"model.onUpdated()\" dismiss=\"dismiss()\"></row-options>`,\r\n      modalClass: 'modal--narrow',\r\n      model: {\r\n        row: this.props.panel,\r\n        onUpdated: this.update.bind(this),\r\n      },\r\n    });\r\n  }\r\n\r\n  delete() {\r\n    appEvents.emit('confirm-modal', {\r\n      title: 'Delete Row',\r\n      text: 'Are you sure you want to remove this row and all its panels?',\r\n      altActionText: 'Delete row only',\r\n      icon: 'fa-trash',\r\n      onConfirm: () => {\r\n        this.props.dashboard.removeRow(this.props.panel, true);\r\n      },\r\n      onAltAction: () => {\r\n        this.props.dashboard.removeRow(this.props.panel, false);\r\n      },\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const classes = classNames({\r\n      'dashboard-row': true,\r\n      'dashboard-row--collapsed': this.state.collapsed,\r\n    });\r\n    const chevronClass = classNames({\r\n      fa: true,\r\n      'fa-chevron-down': !this.state.collapsed,\r\n      'fa-chevron-right': this.state.collapsed,\r\n    });\r\n\r\n    const title = templateSrv.replaceWithText(this.props.panel.title, this.props.panel.scopedVars);\r\n    const count = this.props.panel.panels ? this.props.panel.panels.length : 0;\r\n    const panels = count === 1 ? 'panel' : 'panels';\r\n    const canEdit = this.props.dashboard.meta.canEdit === true;\r\n\r\n    return (\r\n      <div className={classes}>\r\n        <a className=\"dashboard-row__title pointer\" onClick={this.toggle}>\r\n          <i className={chevronClass} />\r\n          {title}\r\n          <span className=\"dashboard-row__panel_count\">\r\n            ({count} {panels})\r\n          </span>\r\n        </a>\r\n        {canEdit && (\r\n          <div className=\"dashboard-row__actions\">\r\n            <a className=\"pointer\" onClick={this.openSettings}>\r\n              <i className=\"fa fa-cog\" />\r\n            </a>\r\n            <a className=\"pointer\" onClick={this.delete}>\r\n              <i className=\"fa fa-trash\" />\r\n            </a>\r\n          </div>\r\n        )}\r\n        {this.state.collapsed === true && (\r\n          <div className=\"dashboard-row__toggle-target\" onClick={this.toggle}>\r\n            &nbsp;\r\n          </div>\r\n        )}\r\n        {canEdit && <div className=\"dashboard-row__drag grid-drag-handle\" />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport baron from 'baron';\r\n\r\nexport interface Props {\r\n  children: any;\r\n  className: string;\r\n}\r\n\r\nexport default class ScrollBar extends React.Component<Props, any> {\r\n  private container: any;\r\n  private scrollbar: baron;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.scrollbar = baron({\r\n      root: this.container.parentElement,\r\n      scroller: this.container,\r\n      bar: '.baron__bar',\r\n      barOnCls: '_scrollbar',\r\n      scrollingCls: '_scrolling',\r\n      track: '.baron__track',\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.scrollbar.update();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.scrollbar.dispose();\r\n  }\r\n\r\n  // methods can be invoked by outside\r\n  setScrollTop(top) {\r\n    if (this.container) {\r\n      this.container.scrollTop = top;\r\n      this.scrollbar.update();\r\n\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  setScrollLeft(left) {\r\n    if (this.container) {\r\n      this.container.scrollLeft = left;\r\n      this.scrollbar.update();\r\n\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  update() {\r\n    this.scrollbar.update();\r\n  }\r\n\r\n  handleRef = ref => {\r\n    this.container = ref;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"baron baron__root baron__clipper\">\r\n        <div className={this.props.className + ' baron__scroller'} ref={this.handleRef}>\r\n          {this.props.children}\r\n        </div>\r\n\r\n        <div className=\"baron__track\">\r\n          <div className=\"baron__bar\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport classNames from 'classnames';\r\nimport config from 'app/core/config';\r\nimport { PanelModel } from '../panel_model';\r\nimport { DashboardModel } from '../dashboard_model';\r\nimport ScrollBar from 'app/core/components/ScrollBar/ScrollBar';\r\nimport store from 'app/core/store';\r\nimport { LS_PANEL_COPY_KEY } from 'app/core/constants';\r\nimport Highlighter from 'react-highlight-words';\r\n\r\nexport interface AddPanelPanelProps {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\nexport interface AddPanelPanelState {\r\n  filter: string;\r\n  panelPlugins: any[];\r\n  copiedPanelPlugins: any[];\r\n  tab: string;\r\n}\r\n\r\nexport class AddPanelPanel extends React.Component<AddPanelPanelProps, AddPanelPanelState> {\r\n  private scrollbar: ScrollBar;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleCloseAddPanel = this.handleCloseAddPanel.bind(this);\r\n    this.renderPanelItem = this.renderPanelItem.bind(this);\r\n    this.panelSizeChanged = this.panelSizeChanged.bind(this);\r\n\r\n    this.state = {\r\n      panelPlugins: this.getPanelPlugins(''),\r\n      copiedPanelPlugins: this.getCopiedPanelPlugins(''),\r\n      filter: '',\r\n      tab: 'Add',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.panel.events.on('panel-size-changed', this.panelSizeChanged);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.panel.events.off('panel-size-changed', this.panelSizeChanged);\r\n  }\r\n\r\n  panelSizeChanged() {\r\n    setTimeout(() => {\r\n      this.scrollbar.update();\r\n    });\r\n  }\r\n\r\n  getPanelPlugins(filter) {\r\n    let panels = _.chain(config.panels)\r\n      .filter({ hideFromList: false })\r\n      .map(item => item)\r\n      .value();\r\n\r\n    // add special row type\r\n    panels.push({ id: 'row', name: 'Row', sort: 8, info: { logos: { small: 'public/img/icn-row.svg' } } });\r\n\r\n    panels = this.filterPanels(panels, filter);\r\n\r\n    // add sort by sort property\r\n    return _.sortBy(panels, 'sort');\r\n  }\r\n\r\n  getCopiedPanelPlugins(filter) {\r\n    const panels = _.chain(config.panels)\r\n      .filter({ hideFromList: false })\r\n      .map(item => item)\r\n      .value();\r\n    let copiedPanels = [];\r\n\r\n    const copiedPanelJson = store.get(LS_PANEL_COPY_KEY);\r\n    if (copiedPanelJson) {\r\n      const copiedPanel = JSON.parse(copiedPanelJson);\r\n      const pluginInfo = _.find(panels, { id: copiedPanel.type });\r\n      if (pluginInfo) {\r\n        const pluginCopy = _.cloneDeep(pluginInfo);\r\n        pluginCopy.name = copiedPanel.title;\r\n        pluginCopy.sort = -1;\r\n        pluginCopy.defaults = copiedPanel;\r\n        copiedPanels.push(pluginCopy);\r\n      }\r\n    }\r\n\r\n    copiedPanels = this.filterPanels(copiedPanels, filter);\r\n\r\n    return _.sortBy(copiedPanels, 'sort');\r\n  }\r\n\r\n  onAddPanel = panelPluginInfo => {\r\n    const dashboard = this.props.dashboard;\r\n    const { gridPos } = this.props.panel;\r\n\r\n    const newPanel: any = {\r\n      type: panelPluginInfo.id,\r\n      title: 'Panel Title',\r\n      gridPos: { x: gridPos.x, y: gridPos.y, w: gridPos.w, h: gridPos.h },\r\n    };\r\n\r\n    if (panelPluginInfo.id === 'row') {\r\n      newPanel.title = 'Row title';\r\n      newPanel.gridPos = { x: 0, y: 0 };\r\n    }\r\n\r\n    // apply panel template / defaults\r\n    if (panelPluginInfo.defaults) {\r\n      _.defaults(newPanel, panelPluginInfo.defaults);\r\n      newPanel.gridPos.w = panelPluginInfo.defaults.gridPos.w;\r\n      newPanel.gridPos.h = panelPluginInfo.defaults.gridPos.h;\r\n      newPanel.title = panelPluginInfo.defaults.title;\r\n      store.delete(LS_PANEL_COPY_KEY);\r\n    }\r\n\r\n    dashboard.addPanel(newPanel);\r\n    dashboard.removePanel(this.props.panel);\r\n  };\r\n\r\n  handleCloseAddPanel(evt) {\r\n    evt.preventDefault();\r\n    this.props.dashboard.removePanel(this.props.dashboard.panels[0]);\r\n  }\r\n\r\n  renderText(text: string) {\r\n    const searchWords = this.state.filter.split('');\r\n    return <Highlighter highlightClassName=\"highlight-search-match\" textToHighlight={text} searchWords={searchWords} />;\r\n  }\r\n\r\n  renderPanelItem(panel, index) {\r\n    return (\r\n      <div key={index} className=\"add-panel__item\" onClick={() => this.onAddPanel(panel)} title={panel.name}>\r\n        <img className=\"add-panel__item-img\" src={panel.info.logos.small} />\r\n        <div className=\"add-panel__item-name\">{this.renderText(panel.name)}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  noCopiedPanelPlugins() {\r\n    return <div className=\"add-panel__no-panels\">No copied panels yet.</div>;\r\n  }\r\n\r\n  filterChange(evt) {\r\n    this.setState({\r\n      filter: evt.target.value,\r\n      panelPlugins: this.getPanelPlugins(evt.target.value),\r\n      copiedPanelPlugins: this.getCopiedPanelPlugins(evt.target.value),\r\n    });\r\n  }\r\n\r\n  filterKeyPress(evt) {\r\n    if (evt.key === 'Enter') {\r\n      const panel = _.head(this.state.panelPlugins);\r\n      if (panel) {\r\n        this.onAddPanel(panel);\r\n      }\r\n    }\r\n  }\r\n\r\n  filterPanels(panels, filter) {\r\n    const regex = new RegExp(filter, 'i');\r\n    return panels.filter(panel => {\r\n      return regex.test(panel.name);\r\n    });\r\n  }\r\n\r\n  openCopy() {\r\n    this.setState({\r\n      tab: 'Copy',\r\n      filter: '',\r\n      panelPlugins: this.getPanelPlugins(''),\r\n      copiedPanelPlugins: this.getCopiedPanelPlugins(''),\r\n    });\r\n  }\r\n\r\n  openAdd() {\r\n    this.setState({\r\n      tab: 'Add',\r\n      filter: '',\r\n      panelPlugins: this.getPanelPlugins(''),\r\n      copiedPanelPlugins: this.getCopiedPanelPlugins(''),\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const addClass = classNames({\r\n      'active active--panel': this.state.tab === 'Add',\r\n      '': this.state.tab === 'Copy',\r\n    });\r\n\r\n    const copyClass = classNames({\r\n      '': this.state.tab === 'Add',\r\n      'active active--panel': this.state.tab === 'Copy',\r\n    });\r\n\r\n    let panelTab;\r\n\r\n    if (this.state.tab === 'Add') {\r\n      panelTab = this.state.panelPlugins.map(this.renderPanelItem);\r\n    } else if (this.state.tab === 'Copy') {\r\n      if (this.state.copiedPanelPlugins.length > 0) {\r\n        panelTab = this.state.copiedPanelPlugins.map(this.renderPanelItem);\r\n      } else {\r\n        panelTab = this.noCopiedPanelPlugins();\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"panel-container add-panel-container\">\r\n        <div className=\"add-panel\">\r\n          <div className=\"add-panel__header\">\r\n            <i className=\"gicon gicon-add-panel\" />\r\n            <span className=\"add-panel__title\">New Panel</span>\r\n            <ul className=\"gf-tabs\">\r\n              <li className=\"gf-tabs-item\">\r\n                <div className={'gf-tabs-link pointer ' + addClass} onClick={this.openAdd.bind(this)}>\r\n                  Add\r\n                </div>\r\n              </li>\r\n              <li className=\"gf-tabs-item\">\r\n                <div className={'gf-tabs-link pointer ' + copyClass} onClick={this.openCopy.bind(this)}>\r\n                  Paste\r\n                </div>\r\n              </li>\r\n            </ul>\r\n            <button className=\"add-panel__close\" onClick={this.handleCloseAddPanel}>\r\n              <i className=\"fa fa-close\" />\r\n            </button>\r\n          </div>\r\n          <ScrollBar ref={element => (this.scrollbar = element)} className=\"add-panel__items\">\r\n            <div className=\"add-panel__searchbar\">\r\n              <label className=\"gf-form gf-form--grow gf-form--has-input-icon\">\r\n                <input\r\n                  type=\"text\"\r\n                  autoFocus\r\n                  className=\"gf-form-input gf-form--grow\"\r\n                  placeholder=\"Panel Search Filter\"\r\n                  value={this.state.filter}\r\n                  onChange={this.filterChange.bind(this)}\r\n                  onKeyPress={this.filterKeyPress.bind(this)}\r\n                />\r\n                <i className=\"gf-form-input-icon fa fa-search\" />\r\n              </label>\r\n            </div>\r\n            {panelTab}\r\n          </ScrollBar>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { PanelModel } from '../panel_model';\r\nimport { DashboardModel } from '../dashboard_model';\r\nimport { store } from 'app/store/configureStore';\r\nimport { updateLocation } from 'app/core/actions';\r\n\r\ninterface PanelHeaderProps {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\nexport class PanelHeader extends React.Component<PanelHeaderProps, any> {\r\n  onEditPanel = () => {\r\n    store.dispatch(\r\n      updateLocation({\r\n        query: {\r\n          panelId: this.props.panel.id,\r\n          edit: true,\r\n          fullscreen: true,\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  onViewPanel = () => {\r\n    store.dispatch(\r\n      updateLocation({\r\n        query: {\r\n          panelId: this.props.panel.id,\r\n          edit: false,\r\n          fullscreen: true,\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const isFullscreen = false;\r\n    const isLoading = false;\r\n    const panelHeaderClass = classNames({ 'panel-header': true, 'grid-drag-handle': !isFullscreen });\r\n\r\n    return (\r\n      <div className={panelHeaderClass}>\r\n        <span className=\"panel-info-corner\">\r\n          <i className=\"fa\" />\r\n          <span className=\"panel-info-corner-inner\" />\r\n        </span>\r\n\r\n        {isLoading && (\r\n          <span className=\"panel-loading\">\r\n            <i className=\"fa fa-spinner fa-spin\" />\r\n          </span>\r\n        )}\r\n\r\n        <div className=\"panel-title-container\">\r\n          <span className=\"panel-title\">\r\n            <span className=\"icon-gf panel-alert-icon\" />\r\n            <span className=\"panel-title-text\">{this.props.panel.title}</span>\r\n            <span className=\"panel-menu-container dropdown\">\r\n              <span className=\"fa fa-caret-down panel-menu-toggle\" data-toggle=\"dropdown\" />\r\n              <ul className=\"dropdown-menu dropdown-menu--menu panel-menu\" role=\"menu\">\r\n                <li>\r\n                  <a onClick={this.onEditPanel}>\r\n                    <i className=\"fa fa-fw fa-edit\" /> Edit\r\n                  </a>\r\n                </li>\r\n                <li>\r\n                  <a onClick={this.onViewPanel}>\r\n                    <i className=\"fa fa-fw fa-eye\" /> View\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n            </span>\r\n            <span className=\"panel-time-info\">\r\n              <i className=\"fa fa-clock-o\" /> 4m\r\n            </span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// Library\r\nimport React, { Component } from 'react';\r\n\r\n// Services\r\nimport { getDatasourceSrv } from 'app/features/plugins/datasource_srv';\r\n\r\n// Types\r\nimport { TimeRange, LoadingState, DataQueryOptions, DataQueryResponse, TimeSeries } from 'app/types';\r\n\r\ninterface RenderProps {\r\n  loading: LoadingState;\r\n  timeSeries: TimeSeries[];\r\n}\r\n\r\nexport interface Props {\r\n  datasource: string | null;\r\n  queries: any[];\r\n  panelId?: number;\r\n  dashboardId?: number;\r\n  isVisible?: boolean;\r\n  timeRange?: TimeRange;\r\n  refreshCounter: number;\r\n  children: (r: RenderProps) => JSX.Element;\r\n}\r\n\r\nexport interface State {\r\n  isFirstLoad: boolean;\r\n  loading: LoadingState;\r\n  response: DataQueryResponse;\r\n}\r\n\r\nexport class DataPanel extends Component<Props, State> {\r\n  static defaultProps = {\r\n    isVisible: true,\r\n    panelId: 1,\r\n    dashboardId: 1,\r\n  };\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: LoadingState.NotStarted,\r\n      response: {\r\n        data: [],\r\n      },\r\n      isFirstLoad: true,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('DataPanel mount');\r\n  }\r\n\r\n  async componentDidUpdate(prevProps: Props) {\r\n    if (!this.hasPropsChanged(prevProps)) {\r\n      return;\r\n    }\r\n\r\n    this.issueQueries();\r\n  }\r\n\r\n  hasPropsChanged(prevProps: Props) {\r\n    return this.props.refreshCounter !== prevProps.refreshCounter || this.props.isVisible !== prevProps.isVisible;\r\n  }\r\n\r\n  issueQueries = async () => {\r\n    const { isVisible, queries, datasource, panelId, dashboardId, timeRange } = this.props;\r\n\r\n    if (!isVisible) {\r\n      return;\r\n    }\r\n\r\n    if (!queries.length) {\r\n      this.setState({ loading: LoadingState.Done });\r\n      return;\r\n    }\r\n\r\n    this.setState({ loading: LoadingState.Loading });\r\n\r\n    try {\r\n      const dataSourceSrv = getDatasourceSrv();\r\n      const ds = await dataSourceSrv.get(datasource);\r\n\r\n      const queryOptions: DataQueryOptions = {\r\n        timezone: 'browser',\r\n        panelId: panelId,\r\n        dashboardId: dashboardId,\r\n        range: timeRange,\r\n        rangeRaw: timeRange.raw,\r\n        interval: '1s',\r\n        intervalMs: 60000,\r\n        targets: queries,\r\n        maxDataPoints: 500,\r\n        scopedVars: {},\r\n        cacheTimeout: null,\r\n      };\r\n\r\n      console.log('Issuing DataPanel query', queryOptions);\r\n      const resp = await ds.query(queryOptions);\r\n      console.log('Issuing DataPanel query Resp', resp);\r\n\r\n      this.setState({\r\n        loading: LoadingState.Done,\r\n        response: resp,\r\n      });\r\n    } catch (err) {\r\n      console.log('Loading error', err);\r\n      this.setState({ loading: LoadingState.Error });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { response, loading, isFirstLoad } = this.state;\r\n    console.log('data panel render');\r\n    const timeSeries = response.data;\r\n\r\n    if (isFirstLoad && (loading === LoadingState.Loading || loading === LoadingState.NotStarted)) {\r\n      return (\r\n        <div className=\"loading\">\r\n          <p>Loading</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {this.loadingSpinner}\r\n        {this.props.children({\r\n          timeSeries,\r\n          loading,\r\n        })}\r\n      </>\r\n    );\r\n  }\r\n\r\n  private get loadingSpinner(): JSX.Element {\r\n    const { loading } = this.state;\r\n\r\n    if (loading === LoadingState.Loading) {\r\n      return (\r\n        <div className=\"panel__loading\">\r\n          <i className=\"fa fa-spinner fa-spin\" />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n","// Libraries\r\nimport React, { ComponentClass, PureComponent } from 'react';\r\n\r\n// Services\r\nimport { getTimeSrv } from '../time_srv';\r\n\r\n// Components\r\nimport { PanelHeader } from './PanelHeader';\r\nimport { DataPanel } from './DataPanel';\r\n\r\n// Types\r\nimport { PanelModel } from '../panel_model';\r\nimport { DashboardModel } from '../dashboard_model';\r\nimport { TimeRange, PanelProps } from 'app/types';\r\n\r\nexport interface Props {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n  component: ComponentClass<PanelProps>;\r\n}\r\n\r\nexport interface State {\r\n  refreshCounter: number;\r\n  timeRange?: TimeRange;\r\n}\r\n\r\nexport class PanelChrome extends PureComponent<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      refreshCounter: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.panel.events.on('refresh', this.onRefresh);\r\n    this.props.dashboard.panelInitialized(this.props.panel);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.panel.events.off('refresh', this.onRefresh);\r\n  }\r\n\r\n  onRefresh = () => {\r\n    const timeSrv = getTimeSrv();\r\n    const timeRange = timeSrv.timeRange();\r\n\r\n    this.setState({\r\n      refreshCounter: this.state.refreshCounter + 1,\r\n      timeRange: timeRange,\r\n    });\r\n  };\r\n\r\n  get isVisible() {\r\n    return !this.props.dashboard.otherPanelInFullscreen(this.props.panel);\r\n  }\r\n\r\n  render() {\r\n    const { panel, dashboard } = this.props;\r\n    const { datasource, targets } = panel;\r\n    const { refreshCounter, timeRange } = this.state;\r\n    const PanelComponent = this.props.component;\r\n\r\n    return (\r\n      <div className=\"panel-container\">\r\n        <PanelHeader panel={panel} dashboard={dashboard} />\r\n        <div className=\"panel-content\">\r\n          <DataPanel\r\n            datasource={datasource}\r\n            queries={targets}\r\n            timeRange={timeRange}\r\n            isVisible={this.isVisible}\r\n            refreshCounter={refreshCounter}\r\n          >\r\n            {({ loading, timeSeries }) => {\r\n              return <PanelComponent loading={loading} timeSeries={timeSeries} timeRange={timeRange} />;\r\n            }}\r\n          </DataPanel>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport Scrollbars from 'react-custom-scrollbars';\r\n\r\ninterface Props {\r\n  customClassName?: string;\r\n  autoHide?: boolean;\r\n  autoHideTimeout?: number;\r\n  autoHideDuration?: number;\r\n  hideTracksWhenNotNeeded?: boolean;\r\n}\r\n\r\n/**\r\n * Wraps component into <Scrollbars> component from `react-custom-scrollbars`\r\n */\r\nclass CustomScrollbar extends PureComponent<Props> {\r\n  static defaultProps: Partial<Props> = {\r\n    customClassName: 'custom-scrollbars',\r\n    autoHide: true,\r\n    autoHideTimeout: 200,\r\n    autoHideDuration: 200,\r\n    hideTracksWhenNotNeeded: false,\r\n  };\r\n\r\n  render() {\r\n    const { customClassName, children, ...scrollProps } = this.props;\r\n\r\n    return (\r\n      <Scrollbars\r\n        className={customClassName}\r\n        autoHeight={true}\r\n        autoHeightMin={'100%'}\r\n        autoHeightMax={'100%'}\r\n        renderTrackHorizontal={props => <div {...props} className=\"track-horizontal\" />}\r\n        renderTrackVertical={props => <div {...props} className=\"track-vertical\" />}\r\n        renderThumbHorizontal={props => <div {...props} className=\"thumb-horizontal\" />}\r\n        renderThumbVertical={props => <div {...props} className=\"thumb-vertical\" />}\r\n        renderView={props => <div {...props} className=\"view\" />}\r\n        {...scrollProps}\r\n      >\r\n        {children}\r\n      </Scrollbars>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CustomScrollbar;\r\n","// Libraries\r\nimport React, { PureComponent } from 'react';\r\n\r\n// Services & utils\r\nimport { getAngularLoader, AngularComponent } from 'app/core/services/AngularLoader';\r\n\r\n// Types\r\nimport { PanelModel } from '../panel_model';\r\nimport { DashboardModel } from '../dashboard_model';\r\n\r\ninterface Props {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\nexport class QueriesTab extends PureComponent<Props> {\r\n  element: any;\r\n  component: AngularComponent;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.element) {\r\n      return;\r\n    }\r\n\r\n    const { panel, dashboard } = this.props;\r\n\r\n    const loader = getAngularLoader();\r\n    const template = '<metrics-tab />';\r\n    const scopeProps = {\r\n      ctrl: {\r\n        panel: panel,\r\n        dashboard: dashboard,\r\n        refresh: () => panel.refresh(),\r\n      },\r\n    };\r\n\r\n    this.component = loader.load(this.element, scopeProps, template);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.component) {\r\n      this.component.destroy();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <div ref={element => (this.element = element)} className=\"panel-height-helper\" />;\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport classNames from 'classnames';\r\nimport config from 'app/core/config';\r\nimport { PanelPlugin } from 'app/types/plugins';\r\nimport CustomScrollbar from 'app/core/components/CustomScrollbar/CustomScrollbar';\r\nimport _ from 'lodash';\r\n\r\ninterface Props {\r\n  currentType: string;\r\n  onTypeChanged: (newType: PanelPlugin) => void;\r\n}\r\n\r\ninterface State {\r\n  pluginList: PanelPlugin[];\r\n}\r\n\r\nexport class VizTypePicker extends PureComponent<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      pluginList: this.getPanelPlugins(''),\r\n    };\r\n  }\r\n\r\n  getPanelPlugins(filter) {\r\n    const panels = _.chain(config.panels)\r\n      .filter({ hideFromList: false })\r\n      .map(item => item)\r\n      .value();\r\n\r\n    // add sort by sort property\r\n    return _.sortBy(panels, 'sort');\r\n  }\r\n\r\n  renderVizPlugin = (plugin, index) => {\r\n    const cssClass = classNames({\r\n      'viz-picker__item': true,\r\n      'viz-picker__item--selected': plugin.id === this.props.currentType,\r\n    });\r\n\r\n    return (\r\n      <div key={index} className={cssClass} onClick={() => this.props.onTypeChanged(plugin)} title={plugin.name}>\r\n        <img className=\"viz-picker__item-img\" src={plugin.info.logos.small} />\r\n        <div className=\"viz-picker__item-name\">{plugin.name}</div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"viz-picker\">\r\n        <div className=\"viz-picker__search\">\r\n          <div className=\"gf-form gf-form--grow\">\r\n            <label className=\"gf-form--has-input-icon gf-form--grow\">\r\n              <input type=\"text\" className=\"gf-form-input\" placeholder=\"Search type\" />\r\n              <i className=\"gf-form-input-icon fa fa-search\" />\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div className=\"viz-picker__items\">\r\n          <CustomScrollbar>\r\n            <div className=\"scroll-margin-helper\">{this.state.pluginList.map(this.renderVizPlugin)}</div>\r\n          </CustomScrollbar>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { PanelModel } from '../panel_model';\r\nimport { DashboardModel } from '../dashboard_model';\r\nimport { store } from 'app/store/configureStore';\r\nimport { QueriesTab } from './QueriesTab';\r\nimport { PanelPlugin, PluginExports } from 'app/types/plugins';\r\nimport { VizTypePicker } from './VizTypePicker';\r\nimport { updateLocation } from 'app/core/actions';\r\n\r\ninterface PanelEditorProps {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n  panelType: string;\r\n  pluginExports: PluginExports;\r\n  onTypeChanged: (newType: PanelPlugin) => void;\r\n}\r\n\r\ninterface PanelEditorTab {\r\n  id: string;\r\n  text: string;\r\n  icon: string;\r\n}\r\n\r\nexport class PanelEditor extends React.Component<PanelEditorProps, any> {\r\n  tabs: PanelEditorTab[];\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.tabs = [\r\n      { id: 'queries', text: 'Queries', icon: 'fa fa-database' },\r\n      { id: 'visualization', text: 'Visualization', icon: 'fa fa-line-chart' },\r\n    ];\r\n  }\r\n\r\n  renderQueriesTab() {\r\n    return <QueriesTab panel={this.props.panel} dashboard={this.props.dashboard} />;\r\n  }\r\n\r\n  renderPanelOptions() {\r\n    const { pluginExports } = this.props;\r\n\r\n    if (pluginExports.PanelOptions) {\r\n      const PanelOptions = pluginExports.PanelOptions;\r\n      return <PanelOptions />;\r\n    } else {\r\n      return <p>Visualization has no options</p>;\r\n    }\r\n  }\r\n\r\n  renderVizTab() {\r\n    return (\r\n      <div className=\"viz-editor\">\r\n        <div className=\"viz-editor-col1\">\r\n          <VizTypePicker currentType={this.props.panel.type} onTypeChanged={this.props.onTypeChanged} />\r\n        </div>\r\n        <div className=\"viz-editor-col2\">\r\n          <h5 className=\"page-heading\">Options</h5>\r\n          {this.renderPanelOptions()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onChangeTab = (tab: PanelEditorTab) => {\r\n    store.dispatch(\r\n      updateLocation({\r\n        query: { tab: tab.id },\r\n        partial: true,\r\n      })\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { location } = store.getState();\r\n    const activeTab = location.query.tab || 'queries';\r\n\r\n    return (\r\n      <div className=\"tabbed-view tabbed-view--new\">\r\n        <div className=\"tabbed-view-header\">\r\n          <ul className=\"gf-tabs\">\r\n            {this.tabs.map(tab => {\r\n              return <TabItem tab={tab} activeTab={activeTab} onClick={this.onChangeTab} key={tab.id} />;\r\n            })}\r\n          </ul>\r\n\r\n          <button className=\"tabbed-view-close-btn\" ng-click=\"ctrl.exitFullscreen();\">\r\n            <i className=\"fa fa-remove\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"tabbed-view-body\">\r\n          {activeTab === 'queries' && this.renderQueriesTab()}\r\n          {activeTab === 'visualization' && this.renderVizTab()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\ninterface TabItemParams {\r\n  tab: PanelEditorTab;\r\n  activeTab: string;\r\n  onClick: (tab: PanelEditorTab) => void;\r\n}\r\n\r\nfunction TabItem({ tab, activeTab, onClick }: TabItemParams) {\r\n  const tabClasses = classNames({\r\n    'gf-tabs-link': true,\r\n    active: activeTab === tab.id,\r\n  });\r\n\r\n  return (\r\n    <li className=\"gf-tabs-item\" key={tab.id}>\r\n      <a className={tabClasses} onClick={() => onClick(tab)}>\r\n        <i className={tab.icon} /> {tab.text}\r\n      </a>\r\n    </li>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport config from 'app/core/config';\r\nimport { PanelModel } from '../panel_model';\r\nimport { DashboardModel } from '../dashboard_model';\r\nimport { getAngularLoader, AngularComponent } from 'app/core/services/AngularLoader';\r\nimport { DashboardRow } from './DashboardRow';\r\nimport { AddPanelPanel } from './AddPanelPanel';\r\nimport { importPluginModule } from 'app/features/plugins/plugin_loader';\r\nimport { PluginExports, PanelPlugin } from 'app/types/plugins';\r\nimport { PanelChrome } from './PanelChrome';\r\nimport { PanelEditor } from './PanelEditor';\r\n\r\nexport interface Props {\r\n  panelType: string;\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\nexport interface State {\r\n  pluginExports: PluginExports;\r\n}\r\n\r\nexport class DashboardPanel extends React.Component<Props, State> {\r\n  element: any;\r\n  angularPanel: AngularComponent;\r\n  pluginInfo: any;\r\n  specialPanels = {};\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      pluginExports: null,\r\n    };\r\n\r\n    this.specialPanels['row'] = this.renderRow.bind(this);\r\n    this.specialPanels['add-panel'] = this.renderAddPanel.bind(this);\r\n  }\r\n\r\n  isSpecial() {\r\n    return this.specialPanels[this.props.panel.type];\r\n  }\r\n\r\n  renderRow() {\r\n    return <DashboardRow panel={this.props.panel} dashboard={this.props.dashboard} />;\r\n  }\r\n\r\n  renderAddPanel() {\r\n    return <AddPanelPanel panel={this.props.panel} dashboard={this.props.dashboard} />;\r\n  }\r\n\r\n  onPluginTypeChanged = (plugin: PanelPlugin) => {\r\n    this.props.panel.changeType(plugin.id);\r\n    this.loadPlugin();\r\n  };\r\n\r\n  onAngularPluginTypeChanged = () => {\r\n    this.loadPlugin();\r\n  };\r\n\r\n  loadPlugin() {\r\n    if (this.isSpecial()) {\r\n      return;\r\n    }\r\n\r\n    // handle plugin loading & changing of plugin type\r\n    if (!this.pluginInfo || this.pluginInfo.id !== this.props.panel.type) {\r\n      this.pluginInfo = config.panels[this.props.panel.type];\r\n\r\n      if (this.pluginInfo.exports) {\r\n        this.cleanUpAngularPanel();\r\n        this.setState({ pluginExports: this.pluginInfo.exports });\r\n      } else {\r\n        importPluginModule(this.pluginInfo.module).then(pluginExports => {\r\n          this.cleanUpAngularPanel();\r\n          // cache plugin exports (saves a promise async cycle next time)\r\n          this.pluginInfo.exports = pluginExports;\r\n          // update panel state\r\n          this.setState({ pluginExports: pluginExports });\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadPlugin();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.loadPlugin();\r\n\r\n    // handle angular plugin loading\r\n    if (!this.element || this.angularPanel) {\r\n      return;\r\n    }\r\n\r\n    const loader = getAngularLoader();\r\n    const template = '<plugin-component type=\"panel\" class=\"panel-height-helper\"></plugin-component>';\r\n    const scopeProps = { panel: this.props.panel, dashboard: this.props.dashboard };\r\n    this.angularPanel = loader.load(this.element, scopeProps, template);\r\n  }\r\n\r\n  cleanUpAngularPanel() {\r\n    if (this.angularPanel) {\r\n      this.angularPanel.destroy();\r\n      this.angularPanel = null;\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.cleanUpAngularPanel();\r\n  }\r\n\r\n  renderReactPanel() {\r\n    const { pluginExports } = this.state;\r\n    const containerClass = this.props.panel.isEditing ? 'panel-editor-container' : 'panel-height-helper';\r\n    const panelWrapperClass = this.props.panel.isEditing ? 'panel-editor-container__panel' : 'panel-height-helper';\r\n\r\n    // this might look strange with these classes that change when edit, but\r\n    // I want to try to keep markup (parents) for panel the same in edit mode to avoide unmount / new mount of panel\r\n    return (\r\n      <div className={containerClass}>\r\n        <div className={panelWrapperClass}>\r\n          <PanelChrome\r\n            component={pluginExports.PanelComponent}\r\n            panel={this.props.panel}\r\n            dashboard={this.props.dashboard}\r\n          />\r\n        </div>\r\n        {this.props.panel.isEditing && (\r\n          <div className=\"panel-editor-container__editor\">\r\n            <PanelEditor\r\n              panel={this.props.panel}\r\n              panelType={this.props.panel.type}\r\n              dashboard={this.props.dashboard}\r\n              onTypeChanged={this.onPluginTypeChanged}\r\n              pluginExports={pluginExports}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (this.isSpecial()) {\r\n      return this.specialPanels[this.props.panel.type]();\r\n    }\r\n\r\n    if (!this.state.pluginExports) {\r\n      return null;\r\n    }\r\n\r\n    if (this.state.pluginExports.PanelComponent) {\r\n      return this.renderReactPanel();\r\n    }\r\n\r\n    // legacy angular rendering\r\n    return <div ref={element => (this.element = element)} className=\"panel-height-helper\" />;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactGridLayout from 'react-grid-layout';\r\nimport { GRID_CELL_HEIGHT, GRID_CELL_VMARGIN, GRID_COLUMN_COUNT } from 'app/core/constants';\r\nimport { DashboardPanel } from './DashboardPanel';\r\nimport { DashboardModel } from '../dashboard_model';\r\nimport { PanelModel } from '../panel_model';\r\nimport classNames from 'classnames';\r\nimport sizeMe from 'react-sizeme';\r\n\r\nlet lastGridWidth = 1200;\r\n\r\nfunction GridWrapper({\r\n  size,\r\n  layout,\r\n  onLayoutChange,\r\n  children,\r\n  onDragStop,\r\n  onResize,\r\n  onResizeStop,\r\n  onWidthChange,\r\n  className,\r\n  isResizable,\r\n  isDraggable,\r\n}) {\r\n  if (size.width === 0) {\r\n    console.log('size is zero!');\r\n  }\r\n\r\n  const width = size.width > 0 ? size.width : lastGridWidth;\r\n  if (width !== lastGridWidth) {\r\n    onWidthChange();\r\n    lastGridWidth = width;\r\n  }\r\n\r\n  return (\r\n    <ReactGridLayout\r\n      width={lastGridWidth}\r\n      className={className}\r\n      isDraggable={isDraggable}\r\n      isResizable={isResizable}\r\n      measureBeforeMount={false}\r\n      containerPadding={[0, 0]}\r\n      useCSSTransforms={true}\r\n      margin={[GRID_CELL_VMARGIN, GRID_CELL_VMARGIN]}\r\n      cols={GRID_COLUMN_COUNT}\r\n      rowHeight={GRID_CELL_HEIGHT}\r\n      draggableHandle=\".grid-drag-handle\"\r\n      layout={layout}\r\n      onResize={onResize}\r\n      onResizeStop={onResizeStop}\r\n      onDragStop={onDragStop}\r\n      onLayoutChange={onLayoutChange}\r\n    >\r\n      {children}\r\n    </ReactGridLayout>\r\n  );\r\n}\r\n\r\nconst SizedReactLayoutGrid = sizeMe({ monitorWidth: true })(GridWrapper);\r\n\r\nexport interface DashboardGridProps {\r\n  dashboard: DashboardModel;\r\n}\r\n\r\nexport class DashboardGrid extends React.Component<DashboardGridProps, any> {\r\n  gridToPanelMap: any;\r\n  panelMap: { [id: string]: PanelModel };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onLayoutChange = this.onLayoutChange.bind(this);\r\n    this.onResize = this.onResize.bind(this);\r\n    this.onResizeStop = this.onResizeStop.bind(this);\r\n    this.onDragStop = this.onDragStop.bind(this);\r\n    this.onWidthChange = this.onWidthChange.bind(this);\r\n\r\n    this.state = { animated: false };\r\n\r\n    // subscribe to dashboard events\r\n    const dashboard = this.props.dashboard;\r\n    dashboard.on('panel-added', this.triggerForceUpdate.bind(this));\r\n    dashboard.on('panel-removed', this.triggerForceUpdate.bind(this));\r\n    dashboard.on('repeats-processed', this.triggerForceUpdate.bind(this));\r\n    dashboard.on('view-mode-changed', this.onViewModeChanged.bind(this));\r\n    dashboard.on('row-collapsed', this.triggerForceUpdate.bind(this));\r\n    dashboard.on('row-expanded', this.triggerForceUpdate.bind(this));\r\n    dashboard.on('panel-type-changed', this.triggerForceUpdate.bind(this));\r\n  }\r\n\r\n  buildLayout() {\r\n    const layout = [];\r\n    this.panelMap = {};\r\n\r\n    for (const panel of this.props.dashboard.panels) {\r\n      const stringId = panel.id.toString();\r\n      this.panelMap[stringId] = panel;\r\n\r\n      if (!panel.gridPos) {\r\n        console.log('panel without gridpos');\r\n        continue;\r\n      }\r\n\r\n      const panelPos: any = {\r\n        i: stringId,\r\n        x: panel.gridPos.x,\r\n        y: panel.gridPos.y,\r\n        w: panel.gridPos.w,\r\n        h: panel.gridPos.h,\r\n      };\r\n\r\n      if (panel.type === 'row') {\r\n        panelPos.w = GRID_COLUMN_COUNT;\r\n        panelPos.h = 1;\r\n        panelPos.isResizable = false;\r\n        panelPos.isDraggable = panel.collapsed;\r\n      }\r\n\r\n      layout.push(panelPos);\r\n    }\r\n\r\n    return layout;\r\n  }\r\n\r\n  onLayoutChange(newLayout) {\r\n    for (const newPos of newLayout) {\r\n      this.panelMap[newPos.i].updateGridPos(newPos);\r\n    }\r\n\r\n    this.props.dashboard.sortPanelsByGridPos();\r\n  }\r\n\r\n  triggerForceUpdate() {\r\n    this.forceUpdate();\r\n  }\r\n\r\n  onWidthChange() {\r\n    for (const panel of this.props.dashboard.panels) {\r\n      panel.resizeDone();\r\n    }\r\n  }\r\n\r\n  onViewModeChanged(payload) {\r\n    this.setState({ animated: !payload.fullscreen });\r\n  }\r\n\r\n  updateGridPos(item, layout) {\r\n    this.panelMap[item.i].updateGridPos(item);\r\n\r\n    // react-grid-layout has a bug (#670), and onLayoutChange() is only called when the component is mounted.\r\n    // So it's required to call it explicitly when panel resized or moved to save layout changes.\r\n    this.onLayoutChange(layout);\r\n  }\r\n\r\n  onResize(layout, oldItem, newItem) {\r\n    this.panelMap[newItem.i].updateGridPos(newItem);\r\n  }\r\n\r\n  onResizeStop(layout, oldItem, newItem) {\r\n    this.updateGridPos(newItem, layout);\r\n    this.panelMap[newItem.i].resizeDone();\r\n  }\r\n\r\n  onDragStop(layout, oldItem, newItem) {\r\n    this.updateGridPos(newItem, layout);\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      this.setState({ animated: true });\r\n    });\r\n  }\r\n\r\n  renderPanels() {\r\n    const panelElements = [];\r\n\r\n    for (const panel of this.props.dashboard.panels) {\r\n      const panelClasses = classNames({ panel: true, 'panel--fullscreen': panel.fullscreen });\r\n      panelElements.push(\r\n        <div key={panel.id.toString()} className={panelClasses} id={`panel-${panel.id}`}>\r\n          <DashboardPanel panel={panel} dashboard={this.props.dashboard} panelType={panel.type} />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return panelElements;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <SizedReactLayoutGrid\r\n        className={classNames({ layout: true, animated: this.state.animated })}\r\n        layout={this.buildLayout()}\r\n        isResizable={this.props.dashboard.meta.canEdit}\r\n        isDraggable={this.props.dashboard.meta.canEdit}\r\n        onLayoutChange={this.onLayoutChange}\r\n        onWidthChange={this.onWidthChange}\r\n        onDragStop={this.onDragStop}\r\n        onResize={this.onResize}\r\n        onResizeStop={this.onResizeStop}\r\n      >\r\n        {this.renderPanels()}\r\n      </SizedReactLayoutGrid>\r\n    );\r\n  }\r\n}\r\n","import { react2AngularDirective } from 'app/core/utils/react2angular';\r\nimport { DashboardGrid } from './DashboardGrid';\r\n\r\nreact2AngularDirective('dashboardGrid', DashboardGrid, [['dashboard', { watchDepth: 'reference' }]]);\r\n","import { coreModule } from 'app/core/core';\r\n\r\nexport class RowOptionsCtrl {\r\n  row: any;\r\n  source: any;\r\n  dismiss: any;\r\n  onUpdated: any;\r\n  showDelete: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor() {\r\n    this.source = this.row;\r\n    this.row = this.row.getSaveModel();\r\n  }\r\n\r\n  update() {\r\n    this.source.title = this.row.title;\r\n    this.source.repeat = this.row.repeat;\r\n    this.onUpdated();\r\n    this.dismiss();\r\n  }\r\n}\r\n\r\nexport function rowOptionsDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/partials/row_options.html',\r\n    controller: RowOptionsCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      row: '=',\r\n      dismiss: '&',\r\n      onUpdated: '&',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('rowOptions', rowOptionsDirective);\r\n","import _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class FolderPickerCtrl {\r\n  initialTitle: string;\r\n  initialFolderId?: number;\r\n  labelClass: string;\r\n  onChange: any;\r\n  onLoad: any;\r\n  onCreateFolder: any;\r\n  enterFolderCreation: any;\r\n  exitFolderCreation: any;\r\n  enableCreateNew: boolean;\r\n  enableReset: boolean;\r\n  rootName = 'General';\r\n  folder: any;\r\n  createNewFolder: boolean;\r\n  newFolderName: string;\r\n  newFolderNameTouched: boolean;\r\n  hasValidationError: boolean;\r\n  validationError: any;\r\n  isEditor: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private validationSrv, private contextSrv) {\r\n    this.isEditor = this.contextSrv.isEditor;\r\n\r\n    if (!this.labelClass) {\r\n      this.labelClass = 'width-7';\r\n    }\r\n\r\n    this.loadInitialValue();\r\n  }\r\n\r\n  getOptions(query) {\r\n    const params = {\r\n      query: query,\r\n      type: 'dash-folder',\r\n      permission: 'Edit',\r\n    };\r\n\r\n    return this.backendSrv.get('api/search', params).then(result => {\r\n      if (\r\n        this.isEditor &&\r\n        (query === '' ||\r\n          query.toLowerCase() === 'g' ||\r\n          query.toLowerCase() === 'ge' ||\r\n          query.toLowerCase() === 'gen' ||\r\n          query.toLowerCase() === 'gene' ||\r\n          query.toLowerCase() === 'gener' ||\r\n          query.toLowerCase() === 'genera' ||\r\n          query.toLowerCase() === 'general')\r\n      ) {\r\n        result.unshift({ title: this.rootName, id: 0 });\r\n      }\r\n\r\n      if (this.isEditor && this.enableCreateNew && query === '') {\r\n        result.unshift({ title: '-- New Folder --', id: -1 });\r\n      }\r\n\r\n      if (this.enableReset && query === '' && this.initialTitle !== '') {\r\n        result.unshift({ title: this.initialTitle, id: null });\r\n      }\r\n\r\n      return _.map(result, item => {\r\n        return { text: item.title, value: item.id };\r\n      });\r\n    });\r\n  }\r\n\r\n  onFolderChange(option) {\r\n    if (!option) {\r\n      option = { value: 0, text: this.rootName };\r\n    } else if (option.value === -1) {\r\n      this.createNewFolder = true;\r\n      this.enterFolderCreation();\r\n      return;\r\n    }\r\n    this.onChange({ $folder: { id: option.value, title: option.text } });\r\n  }\r\n\r\n  newFolderNameChanged() {\r\n    this.newFolderNameTouched = true;\r\n\r\n    this.validationSrv\r\n      .validateNewFolderName(this.newFolderName)\r\n      .then(() => {\r\n        this.hasValidationError = false;\r\n      })\r\n      .catch(err => {\r\n        this.hasValidationError = true;\r\n        this.validationError = err.message;\r\n      });\r\n  }\r\n\r\n  createFolder(evt) {\r\n    if (evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n\r\n    return this.backendSrv.createFolder({ title: this.newFolderName }).then(result => {\r\n      appEvents.emit('alert-success', ['Folder Created', 'OK']);\r\n\r\n      this.closeCreateFolder();\r\n      this.folder = { text: result.title, value: result.id };\r\n      this.onFolderChange(this.folder);\r\n    });\r\n  }\r\n\r\n  cancelCreateFolder(evt) {\r\n    if (evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n\r\n    this.closeCreateFolder();\r\n    this.loadInitialValue();\r\n  }\r\n\r\n  private closeCreateFolder() {\r\n    this.exitFolderCreation();\r\n    this.createNewFolder = false;\r\n    this.hasValidationError = false;\r\n    this.validationError = null;\r\n    this.newFolderName = '';\r\n    this.newFolderNameTouched = false;\r\n  }\r\n\r\n  private loadInitialValue() {\r\n    const resetFolder = { text: this.initialTitle, value: null };\r\n    const rootFolder = { text: this.rootName, value: 0 };\r\n\r\n    this.getOptions('').then(result => {\r\n      let folder;\r\n      if (this.initialFolderId) {\r\n        folder = _.find(result, { value: this.initialFolderId });\r\n      } else if (this.enableReset && this.initialTitle && this.initialFolderId === null) {\r\n        folder = resetFolder;\r\n      }\r\n\r\n      if (!folder) {\r\n        if (this.isEditor) {\r\n          folder = rootFolder;\r\n        } else {\r\n          folder = result.length > 0 ? result[0] : resetFolder;\r\n        }\r\n      }\r\n\r\n      this.folder = folder;\r\n\r\n      // if this is not the same as our initial value notify parent\r\n      if (this.folder.value !== this.initialFolderId) {\r\n        this.onChange({ $folder: { id: this.folder.value, title: this.folder.text } });\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function folderPicker() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/folder_picker/folder_picker.html',\r\n    controller: FolderPickerCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      initialTitle: '<',\r\n      initialFolderId: '<',\r\n      labelClass: '@',\r\n      rootName: '@',\r\n      onChange: '&',\r\n      onCreateFolder: '&',\r\n      enterFolderCreation: '&',\r\n      exitFolderCreation: '&',\r\n      enableCreateNew: '@',\r\n      enableReset: '@',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('folderPicker', folderPicker);\r\n","import coreModule from 'app/core/core_module';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class MoveToFolderCtrl {\r\n  dashboards: any;\r\n  folder: any;\r\n  dismiss: any;\r\n  afterSave: any;\r\n  isValidFolderSelection = true;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv) {}\r\n\r\n  onFolderChange(folder) {\r\n    this.folder = folder;\r\n  }\r\n\r\n  save() {\r\n    return this.backendSrv.moveDashboards(this.dashboards, this.folder).then(result => {\r\n      if (result.successCount > 0) {\r\n        const header = `Dashboard${result.successCount === 1 ? '' : 's'} Moved`;\r\n        const msg = `${result.successCount} dashboard${result.successCount === 1 ? '' : 's'} moved to ${\r\n          this.folder.title\r\n        }`;\r\n        appEvents.emit('alert-success', [header, msg]);\r\n      }\r\n\r\n      if (result.totalCount === result.alreadyInFolderCount) {\r\n        appEvents.emit('alert-error', ['Error', `Dashboards already belongs to folder ${this.folder.title}`]);\r\n      }\r\n\r\n      this.dismiss();\r\n      return this.afterSave();\r\n    });\r\n  }\r\n\r\n  onEnterFolderCreation() {\r\n    this.isValidFolderSelection = false;\r\n  }\r\n\r\n  onExitFolderCreation() {\r\n    this.isValidFolderSelection = true;\r\n  }\r\n}\r\n\r\nexport function moveToFolderModal() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/move_to_folder_modal/move_to_folder.html',\r\n    controller: MoveToFolderCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      dismiss: '&',\r\n      dashboards: '=',\r\n      afterSave: '&',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('moveToFolderModal', moveToFolderModal);\r\n","import { coreModule, appEvents, contextSrv } from 'app/core/core';\r\nimport { DashboardModel } from '../dashboard_model';\r\nimport $ from 'jquery';\r\nimport _ from 'lodash';\r\nimport angular from 'angular';\r\nimport config from 'app/core/config';\r\n\r\nexport class SettingsCtrl {\r\n  dashboard: DashboardModel;\r\n  isOpen: boolean;\r\n  viewId: string;\r\n  json: string;\r\n  alertCount: number;\r\n  canSaveAs: boolean;\r\n  canSave: boolean;\r\n  canDelete: boolean;\r\n  sections: any[];\r\n  hasUnsavedFolderChange: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(\r\n    private $scope,\r\n    private $route,\r\n    private $location,\r\n    private $rootScope,\r\n    private backendSrv,\r\n    private dashboardSrv\r\n  ) {\r\n    // temp hack for annotations and variables editors\r\n    // that rely on inherited scope\r\n    $scope.dashboard = this.dashboard;\r\n\r\n    this.$scope.$on('$destroy', () => {\r\n      this.dashboard.updateSubmenuVisibility();\r\n      this.dashboard.startRefresh();\r\n      setTimeout(() => {\r\n        this.$rootScope.appEvent('dash-scroll', { restore: true });\r\n      });\r\n    });\r\n\r\n    this.canSaveAs = this.dashboard.meta.canEdit && contextSrv.hasEditPermissionInFolders;\r\n    this.canSave = this.dashboard.meta.canSave;\r\n    this.canDelete = this.dashboard.meta.canSave;\r\n\r\n    this.buildSectionList();\r\n    this.onRouteUpdated();\r\n\r\n    this.$rootScope.onAppEvent('$routeUpdate', this.onRouteUpdated.bind(this), $scope);\r\n    this.$rootScope.appEvent('dash-scroll', { animate: false, pos: 0 });\r\n    this.$rootScope.onAppEvent('dashboard-saved', this.onPostSave.bind(this), $scope);\r\n  }\r\n\r\n  buildSectionList() {\r\n    this.sections = [];\r\n\r\n    if (this.dashboard.meta.canEdit) {\r\n      this.sections.push({\r\n        title: 'General',\r\n        id: 'settings',\r\n        icon: 'gicon gicon-preferences',\r\n      });\r\n      this.sections.push({\r\n        title: 'Annotations',\r\n        id: 'annotations',\r\n        icon: 'gicon gicon-annotation',\r\n      });\r\n      this.sections.push({\r\n        title: 'Variables',\r\n        id: 'templating',\r\n        icon: 'gicon gicon-variable',\r\n      });\r\n      this.sections.push({\r\n        title: 'Links',\r\n        id: 'links',\r\n        icon: 'gicon gicon-link',\r\n      });\r\n    }\r\n\r\n    if (this.dashboard.id && this.dashboard.meta.canSave) {\r\n      this.sections.push({\r\n        title: 'Versions',\r\n        id: 'versions',\r\n        icon: 'fa fa-fw fa-history',\r\n      });\r\n    }\r\n\r\n    if (this.dashboard.id && this.dashboard.meta.canAdmin) {\r\n      this.sections.push({\r\n        title: 'Permissions',\r\n        id: 'permissions',\r\n        icon: 'fa fa-fw fa-lock',\r\n      });\r\n    }\r\n\r\n    if (this.dashboard.meta.canMakeEditable) {\r\n      this.sections.push({\r\n        title: 'General',\r\n        icon: 'gicon gicon-preferences',\r\n        id: 'make_editable',\r\n      });\r\n    }\r\n\r\n    this.sections.push({\r\n      title: 'JSON Model',\r\n      id: 'dashboard_json',\r\n      icon: 'gicon gicon-json',\r\n    });\r\n\r\n    const params = this.$location.search();\r\n    const url = this.$location.path();\r\n\r\n    for (const section of this.sections) {\r\n      const sectionParams = _.defaults({ editview: section.id }, params);\r\n      section.url = config.appSubUrl + url + '?' + $.param(sectionParams);\r\n    }\r\n  }\r\n\r\n  onRouteUpdated() {\r\n    this.viewId = this.$location.search().editview;\r\n\r\n    if (this.viewId) {\r\n      this.json = angular.toJson(this.dashboard.getSaveModelClone(), true);\r\n    }\r\n\r\n    if (this.viewId === 'settings' && this.dashboard.meta.canMakeEditable) {\r\n      this.viewId = 'make_editable';\r\n    }\r\n\r\n    const currentSection = _.find(this.sections, { id: this.viewId });\r\n    if (!currentSection) {\r\n      this.sections.unshift({\r\n        title: 'Not found',\r\n        id: '404',\r\n        icon: 'fa fa-fw fa-warning',\r\n      });\r\n      this.viewId = '404';\r\n    }\r\n  }\r\n\r\n  openSaveAsModal() {\r\n    this.dashboardSrv.showSaveAsModal();\r\n  }\r\n\r\n  saveDashboard() {\r\n    this.dashboardSrv.saveDashboard();\r\n  }\r\n\r\n  saveDashboardJson() {\r\n    this.dashboardSrv.saveJSONDashboard(this.json).then(() => {\r\n      this.$route.reload();\r\n    });\r\n  }\r\n\r\n  onPostSave() {\r\n    this.hasUnsavedFolderChange = false;\r\n  }\r\n\r\n  hideSettings() {\r\n    const urlParams = this.$location.search();\r\n    delete urlParams.editview;\r\n    setTimeout(() => {\r\n      this.$rootScope.$apply(() => {\r\n        this.$location.search(urlParams);\r\n      });\r\n    });\r\n  }\r\n\r\n  makeEditable() {\r\n    this.dashboard.editable = true;\r\n    this.dashboard.meta.canMakeEditable = false;\r\n    this.dashboard.meta.canEdit = true;\r\n    this.dashboard.meta.canSave = true;\r\n    this.canDelete = true;\r\n    this.viewId = 'settings';\r\n    this.buildSectionList();\r\n\r\n    const currentSection = _.find(this.sections, { id: this.viewId });\r\n    this.$location.url(currentSection.url);\r\n  }\r\n\r\n  deleteDashboard() {\r\n    let confirmText = '';\r\n    let text2 = this.dashboard.title;\r\n\r\n    const alerts = _.sumBy(this.dashboard.panels, panel => {\r\n      return panel.alert ? 1 : 0;\r\n    });\r\n\r\n    if (alerts > 0) {\r\n      confirmText = 'DELETE';\r\n      text2 = `This dashboard contains ${alerts} alerts. Deleting this dashboard will also delete those alerts`;\r\n    }\r\n\r\n    appEvents.emit('confirm-modal', {\r\n      title: 'Delete',\r\n      text: 'Do you want to delete this dashboard?',\r\n      text2: text2,\r\n      icon: 'fa-trash',\r\n      confirmText: confirmText,\r\n      yesText: 'Delete',\r\n      onConfirm: () => {\r\n        this.dashboard.meta.canSave = false;\r\n        this.deleteDashboardConfirmed();\r\n      },\r\n    });\r\n  }\r\n\r\n  deleteDashboardConfirmed() {\r\n    this.backendSrv.deleteDashboard(this.dashboard.uid).then(() => {\r\n      appEvents.emit('alert-success', ['Dashboard Deleted', this.dashboard.title + ' has been deleted']);\r\n      this.$location.url('/');\r\n    });\r\n  }\r\n\r\n  onFolderChange(folder) {\r\n    this.dashboard.meta.folderId = folder.id;\r\n    this.dashboard.meta.folderTitle = folder.title;\r\n    this.hasUnsavedFolderChange = true;\r\n  }\r\n\r\n  getFolder() {\r\n    return {\r\n      id: this.dashboard.meta.folderId,\r\n      title: this.dashboard.meta.folderTitle,\r\n      url: this.dashboard.meta.folderUrl,\r\n    };\r\n  }\r\n}\r\n\r\nexport function dashboardSettings() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/dashboard/settings/settings.html',\r\n    controller: SettingsCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    transclude: true,\r\n    scope: { dashboard: '=' },\r\n  };\r\n}\r\n\r\ncoreModule.directive('dashboardSettings', dashboardSettings);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport './link_srv';\r\n\r\nfunction panelLinksEditor() {\r\n  return {\r\n    scope: {\r\n      panel: '=',\r\n    },\r\n    restrict: 'E',\r\n    controller: 'PanelLinksEditorCtrl',\r\n    templateUrl: 'public/app/features/dashboard/panellinks/module.html',\r\n    link: () => {},\r\n  };\r\n}\r\n\r\nexport class PanelLinksEditorCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, backendSrv) {\r\n    $scope.panel.links = $scope.panel.links || [];\r\n\r\n    $scope.addLink = () => {\r\n      $scope.panel.links.push({\r\n        type: 'dashboard',\r\n      });\r\n    };\r\n\r\n    $scope.searchDashboards = (queryStr, callback) => {\r\n      backendSrv.search({ query: queryStr }).then(hits => {\r\n        const dashboards = _.map(hits, dash => {\r\n          return dash.title;\r\n        });\r\n\r\n        callback(dashboards);\r\n      });\r\n    };\r\n\r\n    $scope.dashboardChanged = link => {\r\n      backendSrv.search({ query: link.dashboard }).then(hits => {\r\n        const dashboard = _.find(hits, { title: link.dashboard });\r\n        if (dashboard) {\r\n          if (dashboard.url) {\r\n            link.url = dashboard.url;\r\n          } else {\r\n            // To support legacy url's\r\n            link.dashUri = dashboard.uri;\r\n          }\r\n          link.title = dashboard.title;\r\n        }\r\n      });\r\n    };\r\n\r\n    $scope.deleteLink = link => {\r\n      $scope.panel.links = _.without($scope.panel.links, link);\r\n    };\r\n  }\r\n}\r\n\r\nangular\r\n  .module('grafana.directives')\r\n  .directive('panelLinksEditor', panelLinksEditor)\r\n  .controller('PanelLinksEditorCtrl', PanelLinksEditorCtrl);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\n\r\nexport let iconMap = {\r\n  'external link': 'fa-external-link',\r\n  dashboard: 'fa-th-large',\r\n  question: 'fa-question',\r\n  info: 'fa-info',\r\n  bolt: 'fa-bolt',\r\n  doc: 'fa-file-text-o',\r\n  cloud: 'fa-cloud',\r\n};\r\n\r\nexport class DashLinkEditorCtrl {\r\n  dashboard: any;\r\n  iconMap: any;\r\n  mode: any;\r\n  link: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, $rootScope) {\r\n    this.iconMap = iconMap;\r\n    this.dashboard.links = this.dashboard.links || [];\r\n    this.mode = 'list';\r\n\r\n    $scope.$on('$destroy', () => {\r\n      $rootScope.appEvent('dash-links-updated');\r\n    });\r\n  }\r\n\r\n  backToList() {\r\n    this.mode = 'list';\r\n  }\r\n\r\n  setupNew() {\r\n    this.mode = 'new';\r\n    this.link = { type: 'dashboards', icon: 'external link' };\r\n  }\r\n\r\n  addLink() {\r\n    this.dashboard.links.push(this.link);\r\n    this.mode = 'list';\r\n  }\r\n\r\n  editLink(link) {\r\n    this.link = link;\r\n    this.mode = 'edit';\r\n    console.log(this.link);\r\n  }\r\n\r\n  saveLink() {\r\n    this.backToList();\r\n  }\r\n\r\n  moveLink(index, dir) {\r\n    _.move(this.dashboard.links, index, index + dir);\r\n  }\r\n\r\n  deleteLink(index) {\r\n    this.dashboard.links.splice(index, 1);\r\n    this.dashboard.updateSubmenuVisibility();\r\n  }\r\n}\r\n\r\nfunction dashLinksEditor() {\r\n  return {\r\n    restrict: 'E',\r\n    controller: DashLinkEditorCtrl,\r\n    templateUrl: 'public/app/features/dashboard/dashlinks/editor.html',\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      dashboard: '=',\r\n    },\r\n  };\r\n}\r\n\r\nangular.module('grafana.directives').directive('dashLinksEditor', dashLinksEditor);\r\n","import angular from 'angular';\r\nimport _ from 'lodash';\r\nimport { iconMap } from './editor';\r\n\r\nfunction dashLinksContainer() {\r\n  return {\r\n    scope: {\r\n      links: '=',\r\n    },\r\n    restrict: 'E',\r\n    controller: 'DashLinksContainerCtrl',\r\n    template: '<dash-link ng-repeat=\"link in generatedLinks\" link=\"link\"></dash-link>',\r\n    link: () => {},\r\n  };\r\n}\r\n\r\n/** @ngInject */\r\nfunction dashLink($compile, $sanitize, linkSrv) {\r\n  return {\r\n    restrict: 'E',\r\n    link: (scope, elem) => {\r\n      const link = scope.link;\r\n      let template =\r\n        '<div class=\"gf-form\">' +\r\n        '<a class=\"pointer gf-form-label\" data-placement=\"bottom\"' +\r\n        (link.asDropdown ? ' ng-click=\"fillDropdown(link)\" data-toggle=\"dropdown\"' : '') +\r\n        '>' +\r\n        '<i></i> <span></span></a>';\r\n\r\n      if (link.asDropdown) {\r\n        template +=\r\n          '<ul class=\"dropdown-menu\" role=\"menu\">' +\r\n          '<li ng-repeat=\"dash in link.searchHits\">' +\r\n          '<a href=\"{{dash.url}}\" target=\"{{dash.target}}\">{{dash.title}}</a>' +\r\n          '</li>' +\r\n          '</ul>';\r\n      }\r\n\r\n      template += '</div>';\r\n\r\n      elem.html(template);\r\n      $compile(elem.contents())(scope);\r\n\r\n      function update() {\r\n        const linkInfo = linkSrv.getAnchorInfo(link);\r\n\r\n        const anchor = elem.find('a');\r\n        const span = elem.find('span');\r\n        span.text(linkInfo.title);\r\n\r\n        if (!link.asDropdown) {\r\n          anchor.attr('href', linkInfo.href);\r\n          sanitizeAnchor();\r\n        }\r\n        anchor.attr('data-placement', 'bottom');\r\n        // tooltip\r\n        anchor.tooltip({\r\n          title: $sanitize(scope.link.tooltip),\r\n          html: true,\r\n          container: 'body',\r\n        });\r\n      }\r\n\r\n      function sanitizeAnchor() {\r\n        const anchor = elem.find('a');\r\n        const anchorSanitized = $sanitize(anchor.parent().html());\r\n        anchor.parent().html(anchorSanitized);\r\n      }\r\n\r\n      elem.find('i').attr('class', 'fa fa-fw ' + scope.link.icon);\r\n      elem.find('a').attr('target', scope.link.target);\r\n\r\n      // fix for menus on the far right\r\n      if (link.asDropdown && scope.$last) {\r\n        elem.find('.dropdown-menu').addClass('pull-right');\r\n      }\r\n\r\n      update();\r\n      scope.$on('refresh', update);\r\n    },\r\n  };\r\n}\r\n\r\nexport class DashLinksContainerCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $rootScope, $q, backendSrv, dashboardSrv, linkSrv) {\r\n    const currentDashId = dashboardSrv.getCurrent().id;\r\n\r\n    function buildLinks(linkDef) {\r\n      if (linkDef.type === 'dashboards') {\r\n        if (!linkDef.tags) {\r\n          console.log('Dashboard link missing tag');\r\n          return $q.when([]);\r\n        }\r\n\r\n        if (linkDef.asDropdown) {\r\n          return $q.when([\r\n            {\r\n              title: linkDef.title,\r\n              tags: linkDef.tags,\r\n              keepTime: linkDef.keepTime,\r\n              includeVars: linkDef.includeVars,\r\n              target: linkDef.targetBlank ? '_blank' : '_self',\r\n              icon: 'fa fa-bars',\r\n              asDropdown: true,\r\n            },\r\n          ]);\r\n        }\r\n\r\n        return $scope.searchDashboards(linkDef, 7);\r\n      }\r\n\r\n      if (linkDef.type === 'link') {\r\n        return $q.when([\r\n          {\r\n            url: linkDef.url,\r\n            title: linkDef.title,\r\n            icon: iconMap[linkDef.icon],\r\n            tooltip: linkDef.tooltip,\r\n            target: linkDef.targetBlank ? '_blank' : '_self',\r\n            keepTime: linkDef.keepTime,\r\n            includeVars: linkDef.includeVars,\r\n          },\r\n        ]);\r\n      }\r\n\r\n      return $q.when([]);\r\n    }\r\n\r\n    function updateDashLinks() {\r\n      const promises = _.map($scope.links, buildLinks);\r\n\r\n      $q.all(promises).then(results => {\r\n        $scope.generatedLinks = _.flatten(results);\r\n      });\r\n    }\r\n\r\n    $scope.searchDashboards = (link, limit) => {\r\n      return backendSrv.search({ tag: link.tags, limit: limit }).then(results => {\r\n        return _.reduce(\r\n          results,\r\n          (memo, dash) => {\r\n            // do not add current dashboard\r\n            if (dash.id !== currentDashId) {\r\n              memo.push({\r\n                title: dash.title,\r\n                url: dash.url,\r\n                target: link.target === '_self' ? '' : link.target,\r\n                icon: 'fa fa-th-large',\r\n                keepTime: link.keepTime,\r\n                includeVars: link.includeVars,\r\n              });\r\n            }\r\n            return memo;\r\n          },\r\n          []\r\n        );\r\n      });\r\n    };\r\n\r\n    $scope.fillDropdown = link => {\r\n      $scope.searchDashboards(link, 100).then(results => {\r\n        _.each(results, hit => {\r\n          hit.url = linkSrv.getLinkUrl(hit);\r\n        });\r\n        link.searchHits = results;\r\n      });\r\n    };\r\n\r\n    updateDashLinks();\r\n    $rootScope.onAppEvent('dash-links-updated', updateDashLinks, $scope);\r\n  }\r\n}\r\n\r\nangular.module('grafana.directives').directive('dashLinksContainer', dashLinksContainer);\r\nangular.module('grafana.directives').directive('dashLink', dashLink);\r\nangular.module('grafana.directives').controller('DashLinksContainerCtrl', DashLinksContainerCtrl);\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Tooltip from 'app/core/components/Tooltip/Tooltip';\r\nimport SlideDown from 'app/core/components/Animations/SlideDown';\r\nimport { StoreState, FolderInfo } from 'app/types';\r\nimport { DashboardAcl, PermissionLevel, NewDashboardAclItem } from 'app/types/acl';\r\nimport {\r\n  getDashboardPermissions,\r\n  addDashboardPermission,\r\n  removeDashboardPermission,\r\n  updateDashboardPermission,\r\n} from '../state/actions';\r\nimport PermissionList from 'app/core/components/PermissionList/PermissionList';\r\nimport AddPermission from 'app/core/components/PermissionList/AddPermission';\r\nimport PermissionsInfo from 'app/core/components/PermissionList/PermissionsInfo';\r\nimport { store } from 'app/store/configureStore';\r\n\r\nexport interface Props {\r\n  dashboardId: number;\r\n  folder?: FolderInfo;\r\n  permissions: DashboardAcl[];\r\n  getDashboardPermissions: typeof getDashboardPermissions;\r\n  updateDashboardPermission: typeof updateDashboardPermission;\r\n  removeDashboardPermission: typeof removeDashboardPermission;\r\n  addDashboardPermission: typeof addDashboardPermission;\r\n}\r\n\r\nexport interface State {\r\n  isAdding: boolean;\r\n}\r\n\r\nexport class DashboardPermissions extends PureComponent<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isAdding: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.getDashboardPermissions(this.props.dashboardId);\r\n  }\r\n\r\n  onOpenAddPermissions = () => {\r\n    this.setState({ isAdding: true });\r\n  };\r\n\r\n  onRemoveItem = (item: DashboardAcl) => {\r\n    this.props.removeDashboardPermission(this.props.dashboardId, item);\r\n  };\r\n\r\n  onPermissionChanged = (item: DashboardAcl, level: PermissionLevel) => {\r\n    this.props.updateDashboardPermission(this.props.dashboardId, item, level);\r\n  };\r\n\r\n  onAddPermission = (newItem: NewDashboardAclItem) => {\r\n    return this.props.addDashboardPermission(this.props.dashboardId, newItem);\r\n  };\r\n\r\n  onCancelAddPermission = () => {\r\n    this.setState({ isAdding: false });\r\n  };\r\n\r\n  render() {\r\n    const { permissions, folder } = this.props;\r\n    const { isAdding } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"dashboard-settings__header\">\r\n          <div className=\"page-action-bar\">\r\n            <h3 className=\"d-inline-block\">Permissions</h3>\r\n            <Tooltip className=\"page-sub-heading-icon\" placement=\"auto\" content={PermissionsInfo}>\r\n              <i className=\"gicon gicon-question gicon--has-hover\" />\r\n            </Tooltip>\r\n            <div className=\"page-action-bar__spacer\" />\r\n            <button className=\"btn btn-success pull-right\" onClick={this.onOpenAddPermissions} disabled={isAdding}>\r\n              <i className=\"fa fa-plus\" /> Add Permission\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <SlideDown in={isAdding}>\r\n          <AddPermission onAddPermission={this.onAddPermission} onCancel={this.onCancelAddPermission} />\r\n        </SlideDown>\r\n        <PermissionList\r\n          items={permissions}\r\n          onRemoveItem={this.onRemoveItem}\r\n          onPermissionChanged={this.onPermissionChanged}\r\n          isFetching={false}\r\n          folderInfo={folder}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction connectWithStore(WrappedComponent, ...args) {\r\n  const ConnectedWrappedComponent = connect(...args)(WrappedComponent);\r\n  return props => {\r\n    return <ConnectedWrappedComponent {...props} store={store} />;\r\n  };\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n  permissions: state.dashboard.permissions,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getDashboardPermissions,\r\n  addDashboardPermission,\r\n  removeDashboardPermission,\r\n  updateDashboardPermission,\r\n};\r\n\r\nexport default connectWithStore(DashboardPermissions, mapStateToProps, mapDispatchToProps);\r\n","export class FolderPageLoader {\r\n  constructor(private backendSrv) {}\r\n\r\n  load(ctrl, uid, activeChildId) {\r\n    ctrl.navModel = {\r\n      main: {\r\n        icon: 'fa fa-folder-open',\r\n        id: 'manage-folder',\r\n        subTitle: 'Manage folder dashboards & permissions',\r\n        url: '',\r\n        text: '',\r\n        breadcrumbs: [{ title: 'Dashboards', url: 'dashboards' }],\r\n        children: [\r\n          {\r\n            active: activeChildId === 'manage-folder-dashboards',\r\n            icon: 'fa fa-fw fa-th-large',\r\n            id: 'manage-folder-dashboards',\r\n            text: 'Dashboards',\r\n            url: 'dashboards',\r\n          },\r\n          {\r\n            active: activeChildId === 'manage-folder-permissions',\r\n            icon: 'fa fa-fw fa-lock',\r\n            id: 'manage-folder-permissions',\r\n            text: 'Permissions',\r\n            url: 'dashboards/permissions',\r\n          },\r\n          {\r\n            active: activeChildId === 'manage-folder-settings',\r\n            icon: 'fa fa-fw fa-cog',\r\n            id: 'manage-folder-settings',\r\n            text: 'Settings',\r\n            url: 'dashboards/settings',\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    return this.backendSrv.getFolderByUid(uid).then(folder => {\r\n      ctrl.folderId = folder.id;\r\n      const folderTitle = folder.title;\r\n      const folderUrl = folder.url;\r\n      ctrl.navModel.main.text = folderTitle;\r\n\r\n      const dashTab = ctrl.navModel.main.children.find(child => child.id === 'manage-folder-dashboards');\r\n      dashTab.url = folderUrl;\r\n\r\n      if (folder.canAdmin) {\r\n        const permTab = ctrl.navModel.main.children.find(child => child.id === 'manage-folder-permissions');\r\n        permTab.url = folderUrl + '/permissions';\r\n\r\n        const settingsTab = ctrl.navModel.main.children.find(child => child.id === 'manage-folder-settings');\r\n        settingsTab.url = folderUrl + '/settings';\r\n      } else {\r\n        ctrl.navModel.main.children = [dashTab];\r\n      }\r\n\r\n      return folder;\r\n    });\r\n  }\r\n}\r\n","import { FolderPageLoader } from './folder_page_loader';\r\nimport locationUtil from 'app/core/utils/location_util';\r\n\r\nexport class FolderDashboardsCtrl {\r\n  navModel: any;\r\n  folderId: number;\r\n  uid: string;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, navModelSrv, private $routeParams, $location) {\r\n    if (this.$routeParams.uid) {\r\n      this.uid = $routeParams.uid;\r\n\r\n      const loader = new FolderPageLoader(this.backendSrv);\r\n\r\n      loader.load(this, this.uid, 'manage-folder-dashboards').then(folder => {\r\n        const url = locationUtil.stripBaseFromUrl(folder.url);\r\n\r\n        if (url !== $location.path()) {\r\n          $location.path(url).replace();\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport config from 'app/core/config';\r\nimport locationUtil from 'app/core/utils/location_util';\r\n\r\nexport class DashboardImportCtrl {\r\n  navModel: any;\r\n  step: number;\r\n  jsonText: string;\r\n  parseError: string;\r\n  nameExists: boolean;\r\n  uidExists: boolean;\r\n  dash: any;\r\n  inputs: any[];\r\n  inputsValid: boolean;\r\n  gnetUrl: string;\r\n  gnetError: string;\r\n  gnetInfo: any;\r\n  titleTouched: boolean;\r\n  hasNameValidationError: boolean;\r\n  nameValidationError: any;\r\n  hasUidValidationError: boolean;\r\n  uidValidationError: any;\r\n  autoGenerateUid: boolean;\r\n  autoGenerateUidValue: string;\r\n  folderId: number;\r\n  initialFolderTitle: string;\r\n  isValidFolderSelection: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private validationSrv, navModelSrv, private $location, $routeParams) {\r\n    this.navModel = navModelSrv.getNav('create', 'import');\r\n\r\n    this.step = 1;\r\n    this.nameExists = false;\r\n    this.uidExists = false;\r\n    this.autoGenerateUid = true;\r\n    this.autoGenerateUidValue = 'auto-generated';\r\n    this.folderId = $routeParams.folderId ? Number($routeParams.folderId) || 0 : null;\r\n    this.initialFolderTitle = 'Select a folder';\r\n\r\n    // check gnetId in url\r\n    if ($routeParams.gnetId) {\r\n      this.gnetUrl = $routeParams.gnetId;\r\n      this.checkGnetDashboard();\r\n    }\r\n  }\r\n\r\n  onUpload(dash) {\r\n    this.dash = dash;\r\n    this.dash.id = null;\r\n    this.step = 2;\r\n    this.inputs = [];\r\n\r\n    if (this.dash.__inputs) {\r\n      for (const input of this.dash.__inputs) {\r\n        const inputModel = {\r\n          name: input.name,\r\n          label: input.label,\r\n          info: input.description,\r\n          value: input.value,\r\n          type: input.type,\r\n          pluginId: input.pluginId,\r\n          options: [],\r\n        };\r\n\r\n        if (input.type === 'datasource') {\r\n          this.setDatasourceOptions(input, inputModel);\r\n        } else if (!inputModel.info) {\r\n          inputModel.info = 'Specify a string constant';\r\n        }\r\n\r\n        this.inputs.push(inputModel);\r\n      }\r\n    }\r\n\r\n    this.inputsValid = this.inputs.length === 0;\r\n    this.titleChanged();\r\n    this.uidChanged(true);\r\n  }\r\n\r\n  setDatasourceOptions(input, inputModel) {\r\n    const sources = _.filter(config.datasources, val => {\r\n      return val.type === input.pluginId;\r\n    });\r\n\r\n    if (sources.length === 0) {\r\n      inputModel.info = 'No data sources of type ' + input.pluginName + ' found';\r\n    } else if (!inputModel.info) {\r\n      inputModel.info = 'Select a ' + input.pluginName + ' data source';\r\n    }\r\n\r\n    inputModel.options = sources.map(val => {\r\n      return { text: val.name, value: val.name };\r\n    });\r\n  }\r\n\r\n  inputValueChanged() {\r\n    this.inputsValid = true;\r\n    for (const input of this.inputs) {\r\n      if (!input.value) {\r\n        this.inputsValid = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  titleChanged() {\r\n    this.titleTouched = true;\r\n    this.nameExists = false;\r\n\r\n    this.validationSrv\r\n      .validateNewDashboardName(this.folderId, this.dash.title)\r\n      .then(() => {\r\n        this.nameExists = false;\r\n        this.hasNameValidationError = false;\r\n      })\r\n      .catch(err => {\r\n        if (err.type === 'EXISTING') {\r\n          this.nameExists = true;\r\n        }\r\n\r\n        this.hasNameValidationError = true;\r\n        this.nameValidationError = err.message;\r\n      });\r\n  }\r\n\r\n  uidChanged(initial) {\r\n    this.uidExists = false;\r\n    this.hasUidValidationError = false;\r\n\r\n    if (initial === true && this.dash.uid) {\r\n      this.autoGenerateUidValue = 'value set';\r\n    }\r\n\r\n    this.backendSrv\r\n      .getDashboardByUid(this.dash.uid)\r\n      .then(res => {\r\n        this.uidExists = true;\r\n        this.hasUidValidationError = true;\r\n        this.uidValidationError = `Dashboard named '${res.dashboard.title}' in folder '${\r\n          res.meta.folderTitle\r\n        }' has the same uid`;\r\n      })\r\n      .catch(err => {\r\n        err.isHandled = true;\r\n      });\r\n  }\r\n\r\n  onFolderChange(folder) {\r\n    this.folderId = folder.id;\r\n    this.titleChanged();\r\n  }\r\n\r\n  onEnterFolderCreation() {\r\n    this.inputsValid = false;\r\n  }\r\n\r\n  onExitFolderCreation() {\r\n    this.inputValueChanged();\r\n  }\r\n\r\n  isValid() {\r\n    return this.inputsValid && this.folderId !== null;\r\n  }\r\n\r\n  saveDashboard() {\r\n    const inputs = this.inputs.map(input => {\r\n      return {\r\n        name: input.name,\r\n        type: input.type,\r\n        pluginId: input.pluginId,\r\n        value: input.value,\r\n      };\r\n    });\r\n\r\n    return this.backendSrv\r\n      .post('api/dashboards/import', {\r\n        dashboard: this.dash,\r\n        overwrite: true,\r\n        inputs: inputs,\r\n        folderId: this.folderId,\r\n      })\r\n      .then(res => {\r\n        const dashUrl = locationUtil.stripBaseFromUrl(res.importedUrl);\r\n        this.$location.url(dashUrl);\r\n      });\r\n  }\r\n\r\n  loadJsonText() {\r\n    try {\r\n      this.parseError = '';\r\n      const dash = JSON.parse(this.jsonText);\r\n      this.onUpload(dash);\r\n    } catch (err) {\r\n      console.log(err);\r\n      this.parseError = err.message;\r\n      return;\r\n    }\r\n  }\r\n\r\n  checkGnetDashboard() {\r\n    this.gnetError = '';\r\n\r\n    const match = /(^\\d+$)|dashboards\\/(\\d+)/.exec(this.gnetUrl);\r\n    let dashboardId;\r\n\r\n    if (match && match[1]) {\r\n      dashboardId = match[1];\r\n    } else if (match && match[2]) {\r\n      dashboardId = match[2];\r\n    } else {\r\n      this.gnetError = 'Could not find dashboard';\r\n    }\r\n\r\n    return this.backendSrv\r\n      .get('api/gnet/dashboards/' + dashboardId)\r\n      .then(res => {\r\n        this.gnetInfo = res;\r\n        // store reference to grafana.com\r\n        res.json.gnetId = res.id;\r\n        this.onUpload(res.json);\r\n      })\r\n      .catch(err => {\r\n        err.isHandled = true;\r\n        this.gnetError = err.data.message || err;\r\n      });\r\n  }\r\n\r\n  back() {\r\n    this.gnetUrl = '';\r\n    this.step = 1;\r\n    this.gnetError = '';\r\n    this.gnetInfo = '';\r\n  }\r\n}\r\n","import appEvents from 'app/core/app_events';\r\nimport locationUtil from 'app/core/utils/location_util';\r\n\r\nexport class CreateFolderCtrl {\r\n  title = '';\r\n  navModel: any;\r\n  titleTouched = false;\r\n  hasValidationError: boolean;\r\n  validationError: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private $location, private validationSrv, navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('dashboards', 'manage-dashboards', 0);\r\n  }\r\n\r\n  create() {\r\n    if (this.hasValidationError) {\r\n      return;\r\n    }\r\n\r\n    return this.backendSrv.createFolder({ title: this.title }).then(result => {\r\n      appEvents.emit('alert-success', ['Folder Created', 'OK']);\r\n      this.$location.url(locationUtil.stripBaseFromUrl(result.url));\r\n    });\r\n  }\r\n\r\n  titleChanged() {\r\n    this.titleTouched = true;\r\n\r\n    this.validationSrv\r\n      .validateNewFolderName(this.title)\r\n      .then(() => {\r\n        this.hasValidationError = false;\r\n      })\r\n      .catch(err => {\r\n        this.hasValidationError = true;\r\n        this.validationError = err.message;\r\n      });\r\n  }\r\n}\r\n","import './dashboard_ctrl';\r\nimport './alerting_srv';\r\nimport './history/history';\r\nimport './dashboard_loader_srv';\r\nimport './dashnav/dashnav';\r\nimport './submenu/submenu';\r\nimport './save_as_modal';\r\nimport './save_modal';\r\nimport './save_provisioned_modal';\r\nimport './shareModalCtrl';\r\nimport './share_snapshot_ctrl';\r\nimport './dashboard_srv';\r\nimport './view_state_srv';\r\nimport './validation_srv';\r\nimport './time_srv';\r\nimport './unsaved_changes_srv';\r\nimport './unsaved_changes_modal';\r\nimport './timepicker/timepicker';\r\nimport './upload';\r\nimport './export/export_modal';\r\nimport './export_data/export_data_modal';\r\nimport './ad_hoc_filters';\r\nimport './repeat_option/repeat_option';\r\nimport './dashgrid/DashboardGridDirective';\r\nimport './dashgrid/RowOptions';\r\nimport './folder_picker/folder_picker';\r\nimport './move_to_folder_modal/move_to_folder';\r\nimport './settings/settings';\r\nimport './panellinks/module';\r\nimport './dashlinks/module';\r\n\r\n// angular wrappers\r\nimport { react2AngularDirective } from 'app/core/utils/react2angular';\r\nimport DashboardPermissions from './permissions/DashboardPermissions';\r\n\r\nreact2AngularDirective('dashboardPermissions', DashboardPermissions, ['dashboardId', 'folder']);\r\n\r\nimport coreModule from 'app/core/core_module';\r\nimport { FolderDashboardsCtrl } from './folder_dashboards_ctrl';\r\nimport { DashboardImportCtrl } from './dashboard_import_ctrl';\r\nimport { CreateFolderCtrl } from './create_folder_ctrl';\r\n\r\ncoreModule.controller('FolderDashboardsCtrl', FolderDashboardsCtrl);\r\ncoreModule.controller('DashboardImportCtrl', DashboardImportCtrl);\r\ncoreModule.controller('CreateFolderCtrl', CreateFolderCtrl);\r\n","import _ from 'lodash';\r\nimport coreModule from '../../core/core_module';\r\n\r\nexport class PlaylistsCtrl {\r\n  playlists: any;\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope, private backendSrv, navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('dashboards', 'playlists', 0);\r\n\r\n    backendSrv.get('/api/playlists').then(result => {\r\n      this.playlists = result.map(item => {\r\n        item.startUrl = `playlists/play/${item.id}`;\r\n        return item;\r\n      });\r\n    });\r\n  }\r\n\r\n  removePlaylistConfirmed(playlist) {\r\n    _.remove(this.playlists, { id: playlist.id });\r\n\r\n    this.backendSrv.delete('/api/playlists/' + playlist.id).then(\r\n      () => {\r\n        this.$scope.appEvent('alert-success', ['Playlist deleted', '']);\r\n      },\r\n      () => {\r\n        this.$scope.appEvent('alert-error', ['Unable to delete playlist', '']);\r\n        this.playlists.push(playlist);\r\n      }\r\n    );\r\n  }\r\n\r\n  removePlaylist(playlist) {\r\n    this.$scope.appEvent('confirm-modal', {\r\n      title: 'Delete',\r\n      text: 'Are you sure you want to delete playlist ' + playlist.name + '?',\r\n      yesText: 'Delete',\r\n      icon: 'fa-trash',\r\n      onConfirm: () => {\r\n        this.removePlaylistConfirmed(playlist);\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.controller('PlaylistsCtrl', PlaylistsCtrl);\r\n","import coreModule from '../../core/core_module';\r\n\r\nexport class PlaylistSearchCtrl {\r\n  query: any;\r\n  tagsMode: boolean;\r\n\r\n  searchStarted: any;\r\n\r\n  /** @ngInject */\r\n  constructor($timeout, private backendSrv) {\r\n    this.query = { query: '', tag: [], starred: false, limit: 20 };\r\n\r\n    $timeout(() => {\r\n      this.query.query = '';\r\n      this.query.type = 'dash-db';\r\n      this.searchDashboards();\r\n    }, 100);\r\n  }\r\n\r\n  searchDashboards() {\r\n    this.tagsMode = false;\r\n    const prom: any = {};\r\n\r\n    prom.promise = this.backendSrv.search(this.query).then(result => {\r\n      return {\r\n        dashboardResult: result,\r\n        tagResult: [],\r\n      };\r\n    });\r\n\r\n    this.searchStarted(prom);\r\n  }\r\n\r\n  showStarred() {\r\n    this.query.starred = !this.query.starred;\r\n    this.searchDashboards();\r\n  }\r\n\r\n  queryHasNoFilters() {\r\n    return this.query.query === '' && this.query.starred === false && this.query.tag.length === 0;\r\n  }\r\n\r\n  filterByTag(tag, evt) {\r\n    this.query.tag.push(tag);\r\n    this.searchDashboards();\r\n    if (evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n  }\r\n\r\n  getTags() {\r\n    const prom: any = {};\r\n    prom.promise = this.backendSrv.get('/api/dashboards/tags').then(result => {\r\n      return {\r\n        dashboardResult: [],\r\n        tagResult: result,\r\n      };\r\n    });\r\n\r\n    this.searchStarted(prom);\r\n  }\r\n}\r\n\r\nexport function playlistSearchDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/playlist/partials/playlist_search.html',\r\n    controller: PlaylistSearchCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      searchStarted: '&',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('playlistSearch', playlistSearchDirective);\r\n","import coreModule from '../../core/core_module';\r\nimport kbn from 'app/core/utils/kbn';\r\nimport appEvents from 'app/core/app_events';\r\nimport _ from 'lodash';\r\nimport { toUrlParams } from 'app/core/utils/url';\r\n\r\nclass PlaylistSrv {\r\n  private cancelPromise: any;\r\n  private dashboards: any;\r\n  private index: number;\r\n  private interval: any;\r\n  private startUrl: string;\r\n  isPlaying: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private $location: any, private $timeout: any, private backendSrv: any) {}\r\n\r\n  next() {\r\n    this.$timeout.cancel(this.cancelPromise);\r\n\r\n    const playedAllDashboards = this.index > this.dashboards.length - 1;\r\n    if (playedAllDashboards) {\r\n      window.location.href = this.startUrl;\r\n      return;\r\n    }\r\n\r\n    const dash = this.dashboards[this.index];\r\n    const queryParams = this.$location.search();\r\n    const filteredParams = _.pickBy(queryParams, value => value !== null);\r\n\r\n    this.$location.url('dashboard/' + dash.uri + '?' + toUrlParams(filteredParams));\r\n\r\n    this.index++;\r\n    this.cancelPromise = this.$timeout(() => this.next(), this.interval);\r\n  }\r\n\r\n  prev() {\r\n    this.index = Math.max(this.index - 2, 0);\r\n    this.next();\r\n  }\r\n\r\n  start(playlistId) {\r\n    this.stop();\r\n\r\n    this.startUrl = window.location.href;\r\n    this.index = 0;\r\n    this.isPlaying = true;\r\n\r\n    this.backendSrv.get(`/api/playlists/${playlistId}`).then(playlist => {\r\n      this.backendSrv.get(`/api/playlists/${playlistId}/dashboards`).then(dashboards => {\r\n        this.dashboards = dashboards;\r\n        this.interval = kbn.interval_to_ms(playlist.interval);\r\n        this.next();\r\n      });\r\n    });\r\n  }\r\n\r\n  stop() {\r\n    if (this.isPlaying) {\r\n      const queryParams = this.$location.search();\r\n      if (queryParams.kiosk) {\r\n        appEvents.emit('toggle-kiosk-mode', { exit: true });\r\n      }\r\n    }\r\n\r\n    this.index = 0;\r\n    this.isPlaying = false;\r\n\r\n    if (this.cancelPromise) {\r\n      this.$timeout.cancel(this.cancelPromise);\r\n    }\r\n  }\r\n}\r\n\r\ncoreModule.service('playlistSrv', PlaylistSrv);\r\n","import _ from 'lodash';\r\nimport coreModule from '../../core/core_module';\r\n\r\nexport class PlaylistEditCtrl {\r\n  filteredDashboards: any = [];\r\n  filteredTags: any = [];\r\n  searchQuery = '';\r\n  loading = false;\r\n  playlist: any = {\r\n    interval: '5m',\r\n  };\r\n\r\n  playlistItems: any = [];\r\n  dashboardresult: any = [];\r\n  tagresult: any = [];\r\n  navModel: any;\r\n  isNew: boolean;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope, private backendSrv, private $location, $route, navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('dashboards', 'playlists', 0);\r\n    this.isNew = !$route.current.params.id;\r\n\r\n    if ($route.current.params.id) {\r\n      const playlistId = $route.current.params.id;\r\n\r\n      backendSrv.get('/api/playlists/' + playlistId).then(result => {\r\n        this.playlist = result;\r\n      });\r\n\r\n      backendSrv.get('/api/playlists/' + playlistId + '/items').then(result => {\r\n        this.playlistItems = result;\r\n      });\r\n    }\r\n  }\r\n\r\n  filterFoundPlaylistItems() {\r\n    this.filteredDashboards = _.reject(this.dashboardresult, playlistItem => {\r\n      return _.find(this.playlistItems, listPlaylistItem => {\r\n        return parseInt(listPlaylistItem.value, 10) === playlistItem.id;\r\n      });\r\n    });\r\n\r\n    this.filteredTags = _.reject(this.tagresult, tag => {\r\n      return _.find(this.playlistItems, listPlaylistItem => {\r\n        return listPlaylistItem.value === tag.term;\r\n      });\r\n    });\r\n  }\r\n\r\n  addPlaylistItem(playlistItem) {\r\n    playlistItem.value = playlistItem.id.toString();\r\n    playlistItem.type = 'dashboard_by_id';\r\n    playlistItem.order = this.playlistItems.length + 1;\r\n\r\n    this.playlistItems.push(playlistItem);\r\n    this.filterFoundPlaylistItems();\r\n  }\r\n\r\n  addTagPlaylistItem(tag) {\r\n    const playlistItem: any = {\r\n      value: tag.term,\r\n      type: 'dashboard_by_tag',\r\n      order: this.playlistItems.length + 1,\r\n      title: tag.term,\r\n    };\r\n\r\n    this.playlistItems.push(playlistItem);\r\n    this.filterFoundPlaylistItems();\r\n  }\r\n\r\n  removePlaylistItem(playlistItem) {\r\n    _.remove(this.playlistItems, listedPlaylistItem => {\r\n      return playlistItem === listedPlaylistItem;\r\n    });\r\n    this.filterFoundPlaylistItems();\r\n  }\r\n\r\n  savePlaylist(playlist, playlistItems) {\r\n    let savePromise;\r\n\r\n    playlist.items = playlistItems;\r\n\r\n    savePromise = playlist.id\r\n      ? this.backendSrv.put('/api/playlists/' + playlist.id, playlist)\r\n      : this.backendSrv.post('/api/playlists', playlist);\r\n\r\n    savePromise.then(\r\n      () => {\r\n        this.$scope.appEvent('alert-success', ['Playlist saved', '']);\r\n        this.$location.path('/playlists');\r\n      },\r\n      () => {\r\n        this.$scope.appEvent('alert-error', ['Unable to save playlist', '']);\r\n      }\r\n    );\r\n  }\r\n\r\n  isPlaylistEmpty() {\r\n    return !this.playlistItems.length;\r\n  }\r\n\r\n  backToList() {\r\n    this.$location.path('/playlists');\r\n  }\r\n\r\n  searchStarted(promise) {\r\n    promise.then(data => {\r\n      this.dashboardresult = data.dashboardResult;\r\n      this.tagresult = data.tagResult;\r\n      this.filterFoundPlaylistItems();\r\n    });\r\n  }\r\n\r\n  movePlaylistItem(playlistItem, offset) {\r\n    const currentPosition = this.playlistItems.indexOf(playlistItem);\r\n    const newPosition = currentPosition + offset;\r\n\r\n    if (newPosition >= 0 && newPosition < this.playlistItems.length) {\r\n      this.playlistItems.splice(currentPosition, 1);\r\n      this.playlistItems.splice(newPosition, 0, playlistItem);\r\n    }\r\n  }\r\n\r\n  movePlaylistItemUp(playlistItem) {\r\n    this.movePlaylistItem(playlistItem, -1);\r\n  }\r\n\r\n  movePlaylistItemDown(playlistItem) {\r\n    this.movePlaylistItem(playlistItem, 1);\r\n  }\r\n}\r\n\r\ncoreModule.controller('PlaylistEditCtrl', PlaylistEditCtrl);\r\n","import angular from 'angular';\r\n\r\n/** @ngInject */\r\nfunction grafanaRoutes($routeProvider) {\r\n  $routeProvider\r\n    .when('/playlists', {\r\n      templateUrl: 'public/app/features/playlist/partials/playlists.html',\r\n      controllerAs: 'ctrl',\r\n      controller: 'PlaylistsCtrl',\r\n    })\r\n    .when('/playlists/create', {\r\n      templateUrl: 'public/app/features/playlist/partials/playlist.html',\r\n      controllerAs: 'ctrl',\r\n      controller: 'PlaylistEditCtrl',\r\n    })\r\n    .when('/playlists/edit/:id', {\r\n      templateUrl: 'public/app/features/playlist/partials/playlist.html',\r\n      controllerAs: 'ctrl',\r\n      controller: 'PlaylistEditCtrl',\r\n    })\r\n    .when('/playlists/play/:id', {\r\n      template: '',\r\n      resolve: {\r\n        init: (playlistSrv, $route) => {\r\n          const playlistId = $route.current.params.id;\r\n          playlistSrv.start(playlistId);\r\n        },\r\n      },\r\n    });\r\n}\r\n\r\nangular.module('grafana.routes').config(grafanaRoutes);\r\n","import './playlists_ctrl';\r\nimport './playlist_search';\r\nimport './playlist_srv';\r\nimport './playlist_edit_ctrl';\r\nimport './playlist_routes';\r\n","import $ from 'jquery';\r\nimport { coreModule } from 'app/core/core';\r\n\r\nconst template = `\r\n<span class=\"panel-title\">\r\n  <span class=\"icon-gf panel-alert-icon\"></span>\r\n  <span class=\"panel-title-text\">{{ctrl.panel.title | interpolateTemplateVars:this}}</span>\r\n  <span class=\"panel-menu-container dropdown\">\r\n    <span class=\"fa fa-caret-down panel-menu-toggle\" data-toggle=\"dropdown\"></span>\r\n    <ul class=\"dropdown-menu dropdown-menu--menu panel-menu\" role=\"menu\">\r\n    </ul>\r\n  </span>\r\n  <span class=\"panel-time-info\" ng-if=\"ctrl.timeInfo\"><i class=\"fa fa-clock-o\"></i> {{ctrl.timeInfo}}</span>\r\n</span>`;\r\n\r\nfunction renderMenuItem(item, ctrl) {\r\n  let html = '';\r\n  let listItemClass = '';\r\n\r\n  if (item.divider) {\r\n    return '<li class=\"divider\"></li>';\r\n  }\r\n\r\n  if (item.submenu) {\r\n    listItemClass = 'dropdown-submenu';\r\n  }\r\n\r\n  html += `<li class=\"${listItemClass}\"><a `;\r\n\r\n  if (item.click) {\r\n    html += ` ng-click=\"${item.click}\"`;\r\n  }\r\n  if (item.href) {\r\n    html += ` href=\"${item.href}\"`;\r\n  }\r\n\r\n  html += `><i class=\"${item.icon}\"></i>`;\r\n  html += `<span class=\"dropdown-item-text\">${item.text}</span>`;\r\n\r\n  if (item.shortcut) {\r\n    html += `<span class=\"dropdown-menu-item-shortcut\">${item.shortcut}</span>`;\r\n  }\r\n\r\n  html += `</a>`;\r\n\r\n  if (item.submenu) {\r\n    html += '<ul class=\"dropdown-menu dropdown-menu--menu panel-menu\">';\r\n    for (const subitem of item.submenu) {\r\n      html += renderMenuItem(subitem, ctrl);\r\n    }\r\n    html += '</ul>';\r\n  }\r\n\r\n  html += `</li>`;\r\n  return html;\r\n}\r\n\r\nfunction createMenuTemplate(ctrl) {\r\n  let html = '';\r\n\r\n  for (const item of ctrl.getMenu()) {\r\n    html += renderMenuItem(item, ctrl);\r\n  }\r\n\r\n  return html;\r\n}\r\n\r\n/** @ngInject */\r\nfunction panelHeader($compile) {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    link: (scope, elem, attrs) => {\r\n      const menuElem = elem.find('.panel-menu');\r\n      let menuScope;\r\n      let isDragged;\r\n\r\n      elem.click(evt => {\r\n        const targetClass = evt.target.className;\r\n\r\n        // remove existing scope\r\n        if (menuScope) {\r\n          menuScope.$destroy();\r\n        }\r\n\r\n        menuScope = scope.$new();\r\n        const menuHtml = createMenuTemplate(scope.ctrl);\r\n        menuElem.html(menuHtml);\r\n        $compile(menuElem)(menuScope);\r\n\r\n        if (targetClass.indexOf('panel-title-text') >= 0 || targetClass.indexOf('panel-title') >= 0) {\r\n          togglePanelMenu(evt);\r\n        }\r\n      });\r\n\r\n      elem.find('.panel-menu-toggle').click(() => {\r\n        togglePanelStackPosition();\r\n      });\r\n\r\n      function togglePanelMenu(e) {\r\n        if (!isDragged) {\r\n          e.stopPropagation();\r\n          togglePanelStackPosition();\r\n          elem.find('[data-toggle=dropdown]').dropdown('toggle');\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Hack for adding special class 'dropdown-menu-open' to the panel.\r\n       * This class sets z-index for panel and prevents menu overlapping.\r\n       */\r\n      function togglePanelStackPosition() {\r\n        const menuOpenClass = 'dropdown-menu-open';\r\n        const panelGridClass = '.react-grid-item.panel';\r\n\r\n        let panelElem = elem\r\n          .find('[data-toggle=dropdown]')\r\n          .parentsUntil('.panel')\r\n          .parent();\r\n        const menuElem = elem.find('[data-toggle=dropdown]').parent();\r\n        panelElem = panelElem && panelElem.length ? panelElem[0] : undefined;\r\n        if (panelElem) {\r\n          panelElem = $(panelElem);\r\n          $(panelGridClass).removeClass(menuOpenClass);\r\n          const state = !menuElem.hasClass('open');\r\n          panelElem.toggleClass(menuOpenClass, state);\r\n        }\r\n      }\r\n\r\n      let mouseX, mouseY;\r\n      elem.mousedown(e => {\r\n        mouseX = e.pageX;\r\n        mouseY = e.pageY;\r\n      });\r\n\r\n      elem.mouseup(e => {\r\n        if (mouseX === e.pageX && mouseY === e.pageY) {\r\n          isDragged = false;\r\n        } else {\r\n          isDragged = true;\r\n        }\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('panelHeader', panelHeader);\r\n","import angular from 'angular';\r\nimport $ from 'jquery';\r\nimport Drop from 'tether-drop';\r\nimport baron from 'baron';\r\n\r\nconst module = angular.module('grafana.directives');\r\n\r\nconst panelTemplate = `\r\n  <div ng-class=\"{'panel-editor-container': ctrl.panel.isEditing, 'panel-height-helper': !ctrl.panel.isEditing}\">\r\n    <div ng-class=\"{'panel-editor-container__panel': ctrl.panel.isEditing, 'panel-height-helper': !ctrl.panel.isEditing}\">\r\n      <div class=\"panel-container\">\r\n        <div class=\"panel-header\" ng-class=\"{'grid-drag-handle': !ctrl.panel.fullscreen}\">\r\n          <span class=\"panel-info-corner\">\r\n            <i class=\"fa\"></i>\r\n            <span class=\"panel-info-corner-inner\"></span>\r\n          </span>\r\n\r\n          <span class=\"panel-loading\" ng-show=\"ctrl.loading\">\r\n            <i class=\"fa fa-spinner fa-spin\"></i>\r\n          </span>\r\n\r\n          <panel-header class=\"panel-title-container\" panel-ctrl=\"ctrl\"></panel-header>\r\n        </div>\r\n\r\n        <div class=\"panel-content\">\r\n          <ng-transclude class=\"panel-height-helper\"></ng-transclude>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div ng-if=\"ctrl.panel.isEditing\" ng-class=\"{'panel-editor-container__editor': ctrl.panel.isEditing,\r\n                                                 'panel-height-helper': !ctrl.panel.isEditing}\">\r\n      <div class=\"tabbed-view tabbed-view--new\">\r\n        <div class=\"tabbed-view-header\">\r\n          <h3 class=\"tabbed-view-panel-title\">\r\n            {{ctrl.pluginName}}\r\n          </h3>\r\n\r\n          <ul class=\"gf-tabs\">\r\n            <li class=\"gf-tabs-item\" ng-repeat=\"tab in ::ctrl.editorTabs\">\r\n              <a class=\"gf-tabs-link\" ng-click=\"ctrl.changeTab($index)\" ng-class=\"{active: ctrl.editorTabIndex === $index}\">\r\n                {{::tab.title}}\r\n              </a>\r\n            </li>\r\n          </ul>\r\n\r\n          <button class=\"tabbed-view-close-btn\" ng-click=\"ctrl.exitFullscreen();\">\r\n            <i class=\"fa fa-remove\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <div class=\"tabbed-view-body\">\r\n          <div ng-repeat=\"tab in ctrl.editorTabs\" ng-if=\"ctrl.editorTabIndex === $index\" class=\"panel-height-helper\">\r\n            <panel-editor-tab editor-tab=\"tab\" ctrl=\"ctrl\" index=\"$index\"></panel-editor-tab>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n`;\r\n\r\nmodule.directive('grafanaPanel', ($rootScope, $document, $timeout) => {\r\n  return {\r\n    restrict: 'E',\r\n    template: panelTemplate,\r\n    transclude: true,\r\n    scope: { ctrl: '=' },\r\n    link: (scope, elem) => {\r\n      const panelContainer = elem.find('.panel-container');\r\n      const panelContent = elem.find('.panel-content');\r\n      const cornerInfoElem = elem.find('.panel-info-corner');\r\n      const ctrl = scope.ctrl;\r\n      let infoDrop;\r\n      let panelScrollbar;\r\n\r\n      // the reason for handling these classes this way is for performance\r\n      // limit the watchers on panels etc\r\n      let transparentLastState = false;\r\n      let lastHasAlertRule = false;\r\n      let lastAlertState;\r\n      let hasAlertRule;\r\n\r\n      function mouseEnter() {\r\n        panelContainer.toggleClass('panel-hover-highlight', true);\r\n        ctrl.dashboard.setPanelFocus(ctrl.panel.id);\r\n      }\r\n\r\n      function mouseLeave() {\r\n        panelContainer.toggleClass('panel-hover-highlight', false);\r\n        ctrl.dashboard.setPanelFocus(0);\r\n      }\r\n\r\n      function resizeScrollableContent() {\r\n        if (panelScrollbar) {\r\n          panelScrollbar.update();\r\n        }\r\n      }\r\n\r\n      // set initial transparency\r\n      if (ctrl.panel.transparent) {\r\n        transparentLastState = true;\r\n        panelContainer.addClass('panel-transparent', true);\r\n      }\r\n\r\n      // update scrollbar after mounting\r\n      ctrl.events.on('component-did-mount', () => {\r\n        if (ctrl.__proto__.constructor.scrollable) {\r\n          const scrollRootClass = 'baron baron__root baron__clipper panel-content--scrollable';\r\n          const scrollerClass = 'baron__scroller';\r\n          const scrollBarHTML = `\r\n            <div class=\"baron__track\">\r\n              <div class=\"baron__bar\"></div>\r\n            </div>\r\n          `;\r\n\r\n          const scrollRoot = panelContent;\r\n          const scroller = panelContent.find(':first').find(':first');\r\n\r\n          scrollRoot.addClass(scrollRootClass);\r\n          $(scrollBarHTML).appendTo(scrollRoot);\r\n          scroller.addClass(scrollerClass);\r\n\r\n          panelScrollbar = baron({\r\n            root: scrollRoot[0],\r\n            scroller: scroller[0],\r\n            bar: '.baron__bar',\r\n            barOnCls: '_scrollbar',\r\n            scrollingCls: '_scrolling',\r\n          });\r\n\r\n          panelScrollbar.scroll();\r\n        }\r\n      });\r\n\r\n      ctrl.events.on('panel-size-changed', () => {\r\n        ctrl.calculatePanelHeight();\r\n        $timeout(() => {\r\n          resizeScrollableContent();\r\n          ctrl.render();\r\n        });\r\n      });\r\n\r\n      // set initial height\r\n      ctrl.calculatePanelHeight();\r\n\r\n      ctrl.events.on('render', () => {\r\n        if (transparentLastState !== ctrl.panel.transparent) {\r\n          panelContainer.toggleClass('panel-transparent', ctrl.panel.transparent === true);\r\n          transparentLastState = ctrl.panel.transparent;\r\n        }\r\n\r\n        hasAlertRule = ctrl.panel.alert !== undefined;\r\n        if (lastHasAlertRule !== hasAlertRule) {\r\n          panelContainer.toggleClass('panel-has-alert', hasAlertRule);\r\n\r\n          lastHasAlertRule = hasAlertRule;\r\n        }\r\n\r\n        if (ctrl.alertState) {\r\n          if (lastAlertState) {\r\n            panelContainer.removeClass('panel-alert-state--' + lastAlertState);\r\n          }\r\n\r\n          if (ctrl.alertState.state === 'ok' || ctrl.alertState.state === 'alerting') {\r\n            panelContainer.addClass('panel-alert-state--' + ctrl.alertState.state);\r\n          }\r\n\r\n          lastAlertState = ctrl.alertState.state;\r\n        } else if (lastAlertState) {\r\n          panelContainer.removeClass('panel-alert-state--' + lastAlertState);\r\n          lastAlertState = null;\r\n        }\r\n      });\r\n\r\n      function updatePanelCornerInfo() {\r\n        const cornerMode = ctrl.getInfoMode();\r\n        cornerInfoElem[0].className = 'panel-info-corner panel-info-corner--' + cornerMode;\r\n\r\n        if (cornerMode) {\r\n          if (infoDrop) {\r\n            infoDrop.destroy();\r\n          }\r\n\r\n          infoDrop = new Drop({\r\n            target: cornerInfoElem[0],\r\n            content: () => {\r\n              return ctrl.getInfoContent({ mode: 'tooltip' });\r\n            },\r\n            classes: ctrl.error ? 'drop-error' : 'drop-help',\r\n            openOn: 'hover',\r\n            hoverOpenDelay: 100,\r\n            tetherOptions: {\r\n              attachment: 'bottom left',\r\n              targetAttachment: 'top left',\r\n              constraints: [\r\n                {\r\n                  to: 'window',\r\n                  attachment: 'together',\r\n                  pin: true,\r\n                },\r\n              ],\r\n            },\r\n          });\r\n        }\r\n      }\r\n\r\n      scope.$watchGroup(['ctrl.error', 'ctrl.panel.description'], updatePanelCornerInfo);\r\n      scope.$watchCollection('ctrl.panel.links', updatePanelCornerInfo);\r\n\r\n      cornerInfoElem.on('click', () => {\r\n        infoDrop.close();\r\n        scope.$apply(ctrl.openInspector.bind(ctrl));\r\n      });\r\n\r\n      elem.on('mouseenter', mouseEnter);\r\n      elem.on('mouseleave', mouseLeave);\r\n\r\n      scope.$on('$destroy', () => {\r\n        elem.off();\r\n        cornerInfoElem.off();\r\n\r\n        if (infoDrop) {\r\n          infoDrop.destroy();\r\n        }\r\n\r\n        if (panelScrollbar) {\r\n          panelScrollbar.dispose();\r\n        }\r\n      });\r\n    },\r\n  };\r\n});\r\n\r\nmodule.directive('panelHelpCorner', $rootScope => {\r\n  return {\r\n    restrict: 'E',\r\n    template: `\r\n    <span class=\"alert-error panel-error small pointer\" ng-if=\"ctrl.error\" ng-click=\"ctrl.openInspector()\">\r\n    <span data-placement=\"top\" bs-tooltip=\"ctrl.error\">\r\n    <i class=\"fa fa-exclamation\"></i><span class=\"panel-error-arrow\"></span>\r\n    </span>\r\n    </span>\r\n    `,\r\n    link: (scope, elem) => {},\r\n  };\r\n});\r\n","import angular from 'angular';\r\nimport locationUtil from 'app/core/utils/location_util';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport class SoloPanelCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $routeParams, $location, dashboardLoaderSrv, contextSrv, backendSrv) {\r\n    let panelId;\r\n\r\n    $scope.init = () => {\r\n      contextSrv.sidemenu = false;\r\n      appEvents.emit('toggle-sidemenu-hidden');\r\n\r\n      const params = $location.search();\r\n      panelId = parseInt(params.panelId, 10);\r\n\r\n      $scope.onAppEvent('dashboard-initialized', $scope.initPanelScope);\r\n\r\n      // if no uid, redirect to new route based on slug\r\n      if (!($routeParams.type === 'script' || $routeParams.type === 'snapshot') && !$routeParams.uid) {\r\n        backendSrv.getDashboardBySlug($routeParams.slug).then(res => {\r\n          if (res) {\r\n            const url = locationUtil.stripBaseFromUrl(res.meta.url.replace('/d/', '/d-solo/'));\r\n            $location.path(url).replace();\r\n          }\r\n        });\r\n        return;\r\n      }\r\n\r\n      dashboardLoaderSrv.loadDashboard($routeParams.type, $routeParams.slug, $routeParams.uid).then(result => {\r\n        result.meta.soloMode = true;\r\n        $scope.initDashboard(result, $scope);\r\n      });\r\n    };\r\n\r\n    $scope.initPanelScope = () => {\r\n      const panelInfo = $scope.dashboard.getPanelInfoById(panelId);\r\n\r\n      // fake row ctrl scope\r\n      $scope.ctrl = {\r\n        dashboard: $scope.dashboard,\r\n      };\r\n\r\n      $scope.panel = panelInfo.panel;\r\n      $scope.panel.soloMode = true;\r\n      $scope.$index = 0;\r\n\r\n      if (!$scope.panel) {\r\n        $scope.appEvent('alert-error', ['Panel not found', '']);\r\n        return;\r\n      }\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\nangular.module('grafana.routes').controller('SoloPanelCtrl', SoloPanelCtrl);\r\n","import angular from 'angular';\r\n\r\nconst directiveModule = angular.module('grafana.directives');\r\nconst directiveCache = {};\r\n\r\n/** @ngInject */\r\nfunction panelEditorTab(dynamicDirectiveSrv) {\r\n  return dynamicDirectiveSrv.create({\r\n    scope: {\r\n      ctrl: '=',\r\n      editorTab: '=',\r\n      index: '=',\r\n    },\r\n    directive: scope => {\r\n      const pluginId = scope.ctrl.pluginId;\r\n      const tabName = scope.editorTab.title.toLowerCase().replace(' ', '-');\r\n\r\n      if (directiveCache[pluginId]) {\r\n        if (directiveCache[pluginId][tabName]) {\r\n          return directiveCache[pluginId][tabName];\r\n        }\r\n      } else {\r\n        directiveCache[pluginId] = [];\r\n      }\r\n\r\n      const result = {\r\n        fn: () => scope.editorTab.directiveFn(),\r\n        name: `panel-editor-tab-${pluginId}${tabName}`,\r\n      };\r\n\r\n      directiveCache[pluginId][tabName] = result;\r\n\r\n      return result;\r\n    },\r\n  });\r\n}\r\n\r\ndirectiveModule.directive('panelEditorTab', panelEditorTab);\r\n","import angular from 'angular';\r\n\r\nconst module = angular.module('grafana.directives');\r\n\r\nexport class QueryRowCtrl {\r\n  collapsedText: string;\r\n  canCollapse: boolean;\r\n  getCollapsedText: any;\r\n  target: any;\r\n  queryCtrl: any;\r\n  panelCtrl: any;\r\n  panel: any;\r\n  collapsed: any;\r\n\r\n  constructor() {\r\n    this.panelCtrl = this.queryCtrl.panelCtrl;\r\n    this.target = this.queryCtrl.target;\r\n    this.panel = this.panelCtrl.panel;\r\n\r\n    if (!this.target.refId) {\r\n      this.target.refId = this.panelCtrl.dashboard.getNextQueryLetter(this.panel);\r\n    }\r\n\r\n    this.toggleCollapse(true);\r\n    if (this.target.isNew) {\r\n      delete this.target.isNew;\r\n      this.toggleCollapse(false);\r\n    }\r\n\r\n    if (this.panel.targets.length < 4) {\r\n      this.collapsed = false;\r\n    }\r\n  }\r\n\r\n  toggleHideQuery() {\r\n    this.target.hide = !this.target.hide;\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  toggleCollapse(init) {\r\n    if (!this.canCollapse) {\r\n      return;\r\n    }\r\n\r\n    if (!this.panelCtrl.__collapsedQueryCache) {\r\n      this.panelCtrl.__collapsedQueryCache = {};\r\n    }\r\n\r\n    if (init) {\r\n      this.collapsed = this.panelCtrl.__collapsedQueryCache[this.target.refId] !== false;\r\n    } else {\r\n      this.collapsed = !this.collapsed;\r\n      this.panelCtrl.__collapsedQueryCache[this.target.refId] = this.collapsed;\r\n    }\r\n\r\n    try {\r\n      this.collapsedText = this.queryCtrl.getCollapsedText();\r\n    } catch (e) {\r\n      const err = e.message || e.toString();\r\n      this.collapsedText = 'Error: ' + err;\r\n    }\r\n  }\r\n\r\n  toggleEditorMode() {\r\n    if (this.canCollapse && this.collapsed) {\r\n      this.collapsed = false;\r\n    }\r\n\r\n    this.queryCtrl.toggleEditorMode();\r\n  }\r\n\r\n  removeQuery() {\r\n    if (this.panelCtrl.__collapsedQueryCache) {\r\n      delete this.panelCtrl.__collapsedQueryCache[this.target.refId];\r\n    }\r\n\r\n    this.panelCtrl.removeQuery(this.target);\r\n  }\r\n\r\n  duplicateQuery() {\r\n    const clone = angular.copy(this.target);\r\n    this.panelCtrl.addQuery(clone);\r\n  }\r\n\r\n  moveQuery(direction) {\r\n    this.panelCtrl.moveQuery(this.target, direction);\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nfunction queryEditorRowDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    controller: QueryRowCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    templateUrl: 'public/app/features/panel/partials/query_editor_row.html',\r\n    transclude: true,\r\n    scope: {\r\n      queryCtrl: '=',\r\n      canCollapse: '=',\r\n      hasTextEditMode: '=',\r\n    },\r\n  };\r\n}\r\n\r\nmodule.directive('queryEditorRow', queryEditorRowDirective);\r\n","import _ from 'lodash';\r\nimport appEvents from 'app/core/app_events';\r\nimport { coreModule, JsonExplorer } from 'app/core/core';\r\n\r\nconst template = `\r\n<div class=\"query-troubleshooter\" ng-if=\"ctrl.isOpen\">\r\n  <div class=\"query-troubleshooter__header\">\r\n    <a class=\"pointer\" ng-click=\"ctrl.toggleMocking()\">Mock Response</a>\r\n    <a class=\"pointer\" ng-click=\"ctrl.toggleExpand()\" ng-hide=\"ctrl.allNodesExpanded\">\r\n      <i class=\"fa fa-plus-square-o\"></i> Expand All\r\n    </a>\r\n    <a class=\"pointer\" ng-click=\"ctrl.toggleExpand()\" ng-show=\"ctrl.allNodesExpanded\">\r\n      <i class=\"fa fa-minus-square-o\"></i> Collapse All\r\n    </a>\r\n    <a class=\"pointer\" clipboard-button=\"ctrl.getClipboardText()\"><i class=\"fa fa-clipboard\"></i> Copy to Clipboard</a>\r\n  </div>\r\n  <div class=\"query-troubleshooter__body\" ng-hide=\"ctrl.isMocking\">\r\n    <i class=\"fa fa-spinner fa-spin\" ng-show=\"ctrl.isLoading\"></i>\r\n    <div class=\"query-troubleshooter-json\"></div>\r\n  </div>\r\n  <div class=\"query-troubleshooter__body\" ng-show=\"ctrl.isMocking\">\r\n    <div class=\"gf-form p-l-1 gf-form--v-stretch\">\r\n\t\t\t<textarea class=\"gf-form-input\" style=\"width: 95%\" rows=\"10\" ng-model=\"ctrl.mockedResponse\"  placeholder=\"JSON\"></textarea>\r\n    </div>\r\n  </div>\r\n</div>\r\n`;\r\n\r\nexport class QueryTroubleshooterCtrl {\r\n  isOpen: any;\r\n  isLoading: boolean;\r\n  showResponse: boolean;\r\n  panelCtrl: any;\r\n  renderJsonExplorer: (data) => void;\r\n  onRequestErrorEventListener: any;\r\n  onRequestResponseEventListener: any;\r\n  hasError: boolean;\r\n  allNodesExpanded: boolean;\r\n  isMocking: boolean;\r\n  mockedResponse: string;\r\n  jsonExplorer: JsonExplorer;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, private $timeout) {\r\n    this.onRequestErrorEventListener = this.onRequestError.bind(this);\r\n    this.onRequestResponseEventListener = this.onRequestResponse.bind(this);\r\n\r\n    appEvents.on('ds-request-response', this.onRequestResponseEventListener);\r\n    appEvents.on('ds-request-error', this.onRequestErrorEventListener);\r\n\r\n    $scope.$on('$destroy', this.removeEventsListeners.bind(this));\r\n    $scope.$watch('ctrl.isOpen', this.stateChanged.bind(this));\r\n  }\r\n\r\n  removeEventsListeners() {\r\n    appEvents.off('ds-request-response', this.onRequestResponseEventListener);\r\n    appEvents.off('ds-request-error', this.onRequestErrorEventListener);\r\n  }\r\n\r\n  toggleMocking() {\r\n    this.isMocking = !this.isMocking;\r\n  }\r\n\r\n  onRequestError(err) {\r\n    // ignore if closed\r\n    if (!this.isOpen) {\r\n      return;\r\n    }\r\n\r\n    this.isOpen = true;\r\n    this.hasError = true;\r\n    this.onRequestResponse(err);\r\n  }\r\n\r\n  stateChanged() {\r\n    if (this.isOpen) {\r\n      this.panelCtrl.refresh();\r\n      this.isLoading = true;\r\n    }\r\n  }\r\n\r\n  getClipboardText(): string {\r\n    if (this.jsonExplorer) {\r\n      return JSON.stringify(this.jsonExplorer.json, null, 2);\r\n    }\r\n    return '';\r\n  }\r\n\r\n  handleMocking(data) {\r\n    let mockedData;\r\n    try {\r\n      mockedData = JSON.parse(this.mockedResponse);\r\n    } catch (err) {\r\n      appEvents.emit('alert-error', ['Failed to parse mocked response']);\r\n      return;\r\n    }\r\n\r\n    data.data = mockedData;\r\n  }\r\n\r\n  onRequestResponse(data) {\r\n    // ignore if closed\r\n    if (!this.isOpen) {\r\n      return;\r\n    }\r\n\r\n    if (this.isMocking) {\r\n      this.handleMocking(data);\r\n      return;\r\n    }\r\n\r\n    this.isLoading = false;\r\n    data = _.cloneDeep(data);\r\n\r\n    if (data.headers) {\r\n      delete data.headers;\r\n    }\r\n\r\n    if (data.config) {\r\n      data.request = data.config;\r\n      delete data.config;\r\n      delete data.request.transformRequest;\r\n      delete data.request.transformResponse;\r\n      delete data.request.paramSerializer;\r\n      delete data.request.jsonpCallbackParam;\r\n      delete data.request.headers;\r\n      delete data.request.requestId;\r\n      delete data.request.inspect;\r\n      delete data.request.retry;\r\n      delete data.request.timeout;\r\n    }\r\n\r\n    if (data.data) {\r\n      data.response = data.data;\r\n\r\n      if (data.status === 200) {\r\n        // if we are in error state, assume we automatically opened\r\n        // and auto close it again\r\n        if (this.hasError) {\r\n          this.hasError = false;\r\n          this.isOpen = false;\r\n        }\r\n      }\r\n\r\n      delete data.data;\r\n      delete data.status;\r\n      delete data.statusText;\r\n      delete data.$$config;\r\n    }\r\n\r\n    this.$timeout(_.partial(this.renderJsonExplorer, data));\r\n  }\r\n\r\n  toggleExpand(depth) {\r\n    if (this.jsonExplorer) {\r\n      this.allNodesExpanded = !this.allNodesExpanded;\r\n      this.jsonExplorer.openAtDepth(this.allNodesExpanded ? 20 : 1);\r\n    }\r\n  }\r\n}\r\n\r\nexport function queryTroubleshooter() {\r\n  return {\r\n    restrict: 'E',\r\n    template: template,\r\n    controller: QueryTroubleshooterCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    scope: {\r\n      panelCtrl: '=',\r\n      isOpen: '=',\r\n    },\r\n    link: (scope, elem, attrs, ctrl) => {\r\n      ctrl.renderJsonExplorer = data => {\r\n        const jsonElem = elem.find('.query-troubleshooter-json');\r\n\r\n        ctrl.jsonExplorer = new JsonExplorer(data, 3, {\r\n          animateOpen: true,\r\n        });\r\n\r\n        const html = ctrl.jsonExplorer.render(true);\r\n        jsonElem.html(html);\r\n      };\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('queryTroubleshooter', queryTroubleshooter);\r\n","import './panel_header';\r\nimport './panel_directive';\r\nimport './solo_panel_ctrl';\r\nimport './query_ctrl';\r\nimport './panel_editor_tab';\r\nimport './query_editor_row';\r\nimport './query_troubleshooter';\r\n","import config from 'app/core/config';\r\nimport { coreModule } from 'app/core/core';\r\n\r\nexport class ProfileCtrl {\r\n  user: any;\r\n  oldTheme: any;\r\n  teams: any = [];\r\n  orgs: any = [];\r\n  userForm: any;\r\n  showTeamsList = false;\r\n  showOrgsList = false;\r\n  readonlyLoginFields = config.disableLoginForm;\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private contextSrv, private $location, navModelSrv) {\r\n    this.getUser();\r\n    this.getUserTeams();\r\n    this.getUserOrgs();\r\n    this.navModel = navModelSrv.getNav('profile', 'profile-settings', 0);\r\n  }\r\n\r\n  getUser() {\r\n    this.backendSrv.get('/api/user').then(user => {\r\n      this.user = user;\r\n      this.user.theme = user.theme || 'dark';\r\n    });\r\n  }\r\n\r\n  getUserTeams() {\r\n    this.backendSrv.get('/api/user/teams').then(teams => {\r\n      this.teams = teams;\r\n      this.showTeamsList = this.teams.length > 0;\r\n    });\r\n  }\r\n\r\n  getUserOrgs() {\r\n    this.backendSrv.get('/api/user/orgs').then(orgs => {\r\n      this.orgs = orgs;\r\n      this.showOrgsList = orgs.length > 1;\r\n    });\r\n  }\r\n\r\n  setUsingOrg(org) {\r\n    this.backendSrv.post('/api/user/using/' + org.orgId).then(() => {\r\n      window.location.href = config.appSubUrl + '/profile';\r\n    });\r\n  }\r\n\r\n  update() {\r\n    if (!this.userForm.$valid) {\r\n      return;\r\n    }\r\n\r\n    this.backendSrv.put('/api/user/', this.user).then(() => {\r\n      this.contextSrv.user.name = this.user.name || this.user.login;\r\n      if (this.oldTheme !== this.user.theme) {\r\n        window.location.href = config.appSubUrl + this.$location.path();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.controller('ProfileCtrl', ProfileCtrl);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nexport class UserInviteCtrl {\r\n  navModel: any;\r\n  invite: any;\r\n  inviteForm: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, navModelSrv, private $location) {\r\n    this.navModel = navModelSrv.getNav('cfg', 'users', 0);\r\n\r\n    this.invite = {\r\n      name: '',\r\n      email: '',\r\n      role: 'Editor',\r\n      sendEmail: true,\r\n    };\r\n  }\r\n\r\n  sendInvite() {\r\n    if (!this.inviteForm.$valid) {\r\n      return;\r\n    }\r\n\r\n    return this.backendSrv.post('/api/org/invites', this.invite).then(() => {\r\n      this.$location.path('org/users/');\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.controller('UserInviteCtrl', UserInviteCtrl);\r\n","import angular from 'angular';\r\nimport config from 'app/core/config';\r\n\r\nexport class SelectOrgCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, backendSrv, contextSrv) {\r\n    contextSrv.sidemenu = false;\r\n\r\n    $scope.navModel = {\r\n      main: {\r\n        icon: 'gicon gicon-branding',\r\n        subTitle: 'Preferences',\r\n        text: 'Select active organization',\r\n      },\r\n    };\r\n\r\n    $scope.init = () => {\r\n      $scope.getUserOrgs();\r\n    };\r\n\r\n    $scope.getUserOrgs = () => {\r\n      backendSrv.get('/api/user/orgs').then(orgs => {\r\n        $scope.orgs = orgs;\r\n      });\r\n    };\r\n\r\n    $scope.setUsingOrg = org => {\r\n      backendSrv.post('/api/user/using/' + org.orgId).then(() => {\r\n        window.location.href = config.appSubUrl + '/';\r\n      });\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\nangular.module('grafana.controllers').controller('SelectOrgCtrl', SelectOrgCtrl);\r\n","import angular from 'angular';\r\nimport config from 'app/core/config';\r\n\r\nexport class ChangePasswordCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, backendSrv, $location, navModelSrv) {\r\n    $scope.command = {};\r\n    $scope.authProxyEnabled = config.authProxyEnabled;\r\n    $scope.ldapEnabled = config.ldapEnabled;\r\n    $scope.navModel = navModelSrv.getNav('profile', 'change-password', 0);\r\n\r\n    $scope.changePassword = () => {\r\n      if (!$scope.userForm.$valid) {\r\n        return;\r\n      }\r\n\r\n      if ($scope.command.newPassword !== $scope.command.confirmNew) {\r\n        $scope.appEvent('alert-warning', ['New passwords do not match', '']);\r\n        return;\r\n      }\r\n\r\n      backendSrv.put('/api/user/password', $scope.command).then(() => {\r\n        $location.path('profile');\r\n      });\r\n    };\r\n  }\r\n}\r\n\r\nangular.module('grafana.controllers').controller('ChangePasswordCtrl', ChangePasswordCtrl);\r\n","import angular from 'angular';\r\nimport config from 'app/core/config';\r\n\r\nexport class NewOrgCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $http, backendSrv, navModelSrv) {\r\n    $scope.navModel = navModelSrv.getNav('cfg', 'admin', 'global-orgs', 1);\r\n    $scope.newOrg = { name: '' };\r\n\r\n    $scope.createOrg = () => {\r\n      backendSrv.post('/api/orgs/', $scope.newOrg).then(result => {\r\n        backendSrv.post('/api/user/using/' + result.orgId).then(() => {\r\n          window.location.href = config.appSubUrl + '/org';\r\n        });\r\n      });\r\n    };\r\n  }\r\n}\r\n\r\nangular.module('grafana.controllers').controller('NewOrgCtrl', NewOrgCtrl);\r\n","import coreModule from 'app/core/core_module';\r\n\r\nexport default class CreateTeamCtrl {\r\n  name: string;\r\n  email: string;\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private $location, navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('cfg', 'teams', 0);\r\n  }\r\n\r\n  create() {\r\n    const payload = {\r\n      name: this.name,\r\n      email: this.email,\r\n    };\r\n    this.backendSrv.post('/api/teams', payload).then(result => {\r\n      if (result.teamId) {\r\n        this.$location.path('/org/teams/edit/' + result.teamId);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.controller('CreateTeamCtrl', CreateTeamCtrl);\r\n","import angular from 'angular';\r\n\r\nexport class OrgDetailsCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $http, backendSrv, contextSrv, navModelSrv) {\r\n    $scope.init = () => {\r\n      $scope.getOrgInfo();\r\n      $scope.navModel = navModelSrv.getNav('cfg', 'org-settings', 0);\r\n    };\r\n\r\n    $scope.getOrgInfo = () => {\r\n      backendSrv.get('/api/org').then(org => {\r\n        $scope.org = org;\r\n        $scope.address = org.address;\r\n        contextSrv.user.orgName = org.name;\r\n      });\r\n    };\r\n\r\n    $scope.update = () => {\r\n      if (!$scope.orgForm.$valid) {\r\n        return;\r\n      }\r\n      const data = { name: $scope.org.name };\r\n      backendSrv.put('/api/org', data).then($scope.getOrgInfo);\r\n    };\r\n\r\n    $scope.updateAddress = () => {\r\n      if (!$scope.addressForm.$valid) {\r\n        return;\r\n      }\r\n      backendSrv.put('/api/org/address', $scope.address).then($scope.getOrgInfo);\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\nangular.module('grafana.controllers').controller('OrgDetailsCtrl', OrgDetailsCtrl);\r\n","import config from 'app/core/config';\r\nimport coreModule from 'app/core/core_module';\r\n\r\nexport class PrefsControlCtrl {\r\n  prefs: any;\r\n  oldTheme: any;\r\n  prefsForm: any;\r\n  mode: string;\r\n\r\n  timezones: any = [\r\n    { value: '', text: 'Default' },\r\n    { value: 'browser', text: 'Local browser time' },\r\n    { value: 'utc', text: 'UTC' },\r\n  ];\r\n  themes: any = [{ value: '', text: 'Default' }, { value: 'dark', text: 'Dark' }, { value: 'light', text: 'Light' }];\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, private $location) {}\r\n\r\n  $onInit() {\r\n    return this.backendSrv.get(`/api/${this.mode}/preferences`).then(prefs => {\r\n      this.prefs = prefs;\r\n      this.oldTheme = prefs.theme;\r\n    });\r\n  }\r\n\r\n  updatePrefs() {\r\n    if (!this.prefsForm.$valid) {\r\n      return;\r\n    }\r\n\r\n    const cmd = {\r\n      theme: this.prefs.theme,\r\n      timezone: this.prefs.timezone,\r\n      homeDashboardId: this.prefs.homeDashboardId,\r\n    };\r\n\r\n    this.backendSrv.put(`/api/${this.mode}/preferences`, cmd).then(() => {\r\n      window.location.href = config.appSubUrl + this.$location.path();\r\n    });\r\n  }\r\n}\r\n\r\nconst template = `\r\n<form name=\"ctrl.prefsForm\" class=\"section gf-form-group\">\r\n  <h3 class=\"page-heading\">Preferences</h3>\r\n\r\n  <div class=\"gf-form\">\r\n    <span class=\"gf-form-label width-11\">UI Theme</span>\r\n    <div class=\"gf-form-select-wrapper max-width-20\">\r\n      <select class=\"gf-form-input\" ng-model=\"ctrl.prefs.theme\" ng-options=\"f.value as f.text for f in ctrl.themes\"></select>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"gf-form\">\r\n    <span class=\"gf-form-label width-11\">\r\n      Home Dashboard\r\n      <info-popover mode=\"right-normal\">\r\n        Not finding dashboard you want? Star it first, then it should appear in this select box.\r\n      </info-popover>\r\n    </span>\r\n    <dashboard-selector class=\"gf-form-select-wrapper max-width-20\" model=\"ctrl.prefs.homeDashboardId\">\r\n    </dashboard-selector>\r\n  </div>\r\n\r\n  <div class=\"gf-form\">\r\n    <label class=\"gf-form-label width-11\">Timezone</label>\r\n    <div class=\"gf-form-select-wrapper max-width-20\">\r\n      <select class=\"gf-form-input\" ng-model=\"ctrl.prefs.timezone\" ng-options=\"f.value as f.text for f in ctrl.timezones\"></select>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"gf-form-button-row\">\r\n    <button type=\"submit\" class=\"btn btn-success\" ng-click=\"ctrl.updatePrefs()\">Save</button>\r\n  </div>\r\n</form>\r\n`;\r\n\r\nexport function prefsControlDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    controller: PrefsControlCtrl,\r\n    bindToController: true,\r\n    controllerAs: 'ctrl',\r\n    template: template,\r\n    scope: {\r\n      mode: '@',\r\n    },\r\n  };\r\n}\r\n\r\ncoreModule.directive('prefsControl', prefsControlDirective);\r\n","import './profile_ctrl';\r\nimport './select_org_ctrl';\r\nimport './change_password_ctrl';\r\nimport './new_org_ctrl';\r\nimport './user_invite_ctrl';\r\nimport './create_team_ctrl';\r\nimport './org_details_ctrl';\r\nimport './prefs_control';\r\n","export default class AdminListUsersCtrl {\r\n  users: any;\r\n  pages = [];\r\n  perPage = 50;\r\n  page = 1;\r\n  totalPages: number;\r\n  showPaging = false;\r\n  query: any;\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $scope, private backendSrv, navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('cfg', 'admin', 'global-users', 1);\r\n    this.query = '';\r\n    this.getUsers();\r\n  }\r\n\r\n  getUsers() {\r\n    this.backendSrv\r\n      .get(`/api/users/search?perpage=${this.perPage}&page=${this.page}&query=${this.query}`)\r\n      .then(result => {\r\n        this.users = result.users;\r\n        this.page = result.page;\r\n        this.perPage = result.perPage;\r\n        this.totalPages = Math.ceil(result.totalCount / result.perPage);\r\n        this.showPaging = this.totalPages > 1;\r\n        this.pages = [];\r\n\r\n        for (let i = 1; i < this.totalPages + 1; i++) {\r\n          this.pages.push({ page: i, current: i === this.page });\r\n        }\r\n      });\r\n  }\r\n\r\n  navigateToPage(page) {\r\n    this.page = page.page;\r\n    this.getUsers();\r\n  }\r\n\r\n  deleteUser(user) {\r\n    this.$scope.appEvent('confirm-modal', {\r\n      title: 'Delete',\r\n      text: 'Do you want to delete ' + user.login + '?',\r\n      icon: 'fa-trash',\r\n      yesText: 'Delete',\r\n      onConfirm: () => {\r\n        this.backendSrv.delete('/api/admin/users/' + user.id).then(() => {\r\n          this.getUsers();\r\n        });\r\n      },\r\n    });\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport default class AdminEditUserCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $routeParams, backendSrv, $location, navModelSrv) {\r\n    $scope.user = {};\r\n    $scope.newOrg = { name: '', role: 'Editor' };\r\n    $scope.permissions = {};\r\n    $scope.navModel = navModelSrv.getNav('cfg', 'admin', 'global-users', 1);\r\n\r\n    $scope.init = () => {\r\n      if ($routeParams.id) {\r\n        $scope.getUser($routeParams.id);\r\n        $scope.getUserOrgs($routeParams.id);\r\n      }\r\n    };\r\n\r\n    $scope.getUser = id => {\r\n      backendSrv.get('/api/users/' + id).then(user => {\r\n        $scope.user = user;\r\n        $scope.user_id = id;\r\n        $scope.permissions.isGrafanaAdmin = user.isGrafanaAdmin;\r\n      });\r\n    };\r\n\r\n    $scope.setPassword = () => {\r\n      if (!$scope.passwordForm.$valid) {\r\n        return;\r\n      }\r\n\r\n      const payload = { password: $scope.password };\r\n      backendSrv.put('/api/admin/users/' + $scope.user_id + '/password', payload).then(() => {\r\n        $location.path('/admin/users');\r\n      });\r\n    };\r\n\r\n    $scope.updatePermissions = () => {\r\n      const payload = $scope.permissions;\r\n\r\n      backendSrv.put('/api/admin/users/' + $scope.user_id + '/permissions', payload).then(() => {\r\n        $location.path('/admin/users');\r\n      });\r\n    };\r\n\r\n    $scope.create = () => {\r\n      if (!$scope.userForm.$valid) {\r\n        return;\r\n      }\r\n\r\n      backendSrv.post('/api/admin/users', $scope.user).then(() => {\r\n        $location.path('/admin/users');\r\n      });\r\n    };\r\n\r\n    $scope.getUserOrgs = id => {\r\n      backendSrv.get('/api/users/' + id + '/orgs').then(orgs => {\r\n        $scope.orgs = orgs;\r\n      });\r\n    };\r\n\r\n    $scope.update = () => {\r\n      if (!$scope.userForm.$valid) {\r\n        return;\r\n      }\r\n\r\n      backendSrv.put('/api/users/' + $scope.user_id, $scope.user).then(() => {\r\n        $location.path('/admin/users');\r\n      });\r\n    };\r\n\r\n    $scope.updateOrgUser = orgUser => {\r\n      backendSrv.patch('/api/orgs/' + orgUser.orgId + '/users/' + $scope.user_id, orgUser).then(() => {});\r\n    };\r\n\r\n    $scope.removeOrgUser = orgUser => {\r\n      backendSrv.delete('/api/orgs/' + orgUser.orgId + '/users/' + $scope.user_id).then(() => {\r\n        $scope.getUser($scope.user_id);\r\n        $scope.getUserOrgs($scope.user_id);\r\n      });\r\n    };\r\n\r\n    $scope.orgsSearchCache = [];\r\n\r\n    $scope.searchOrgs = (queryStr, callback) => {\r\n      if ($scope.orgsSearchCache.length > 0) {\r\n        callback(_.map($scope.orgsSearchCache, 'name'));\r\n        return;\r\n      }\r\n\r\n      backendSrv.get('/api/orgs', { query: '' }).then(result => {\r\n        $scope.orgsSearchCache = result;\r\n        callback(_.map(result, 'name'));\r\n      });\r\n    };\r\n\r\n    $scope.addOrgUser = () => {\r\n      if (!$scope.addOrgForm.$valid) {\r\n        return;\r\n      }\r\n\r\n      const orgInfo = _.find($scope.orgsSearchCache, {\r\n        name: $scope.newOrg.name,\r\n      });\r\n      if (!orgInfo) {\r\n        return;\r\n      }\r\n\r\n      $scope.newOrg.loginOrEmail = $scope.user.login;\r\n\r\n      backendSrv.post('/api/orgs/' + orgInfo.id + '/users/', $scope.newOrg).then(() => {\r\n        $scope.getUser($scope.user_id);\r\n        $scope.getUserOrgs($scope.user_id);\r\n      });\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n","\r\nexport default class AdminListOrgsCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, backendSrv, navModelSrv) {\r\n    $scope.init = () => {\r\n      $scope.navModel = navModelSrv.getNav('cfg', 'admin', 'global-orgs', 1);\r\n      $scope.getOrgs();\r\n    };\r\n\r\n    $scope.getOrgs = () => {\r\n      backendSrv.get('/api/orgs').then(orgs => {\r\n        $scope.orgs = orgs;\r\n      });\r\n    };\r\n\r\n    $scope.deleteOrg = org => {\r\n      $scope.appEvent('confirm-modal', {\r\n        title: 'Delete',\r\n        text: 'Do you want to delete organization ' + org.name + '?',\r\n        text2: 'All dashboards for this organization will be removed!',\r\n        icon: 'fa-trash',\r\n        yesText: 'Delete',\r\n        onConfirm: () => {\r\n          backendSrv.delete('/api/orgs/' + org.id).then(() => {\r\n            $scope.getOrgs();\r\n          });\r\n        },\r\n      });\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\n","import config from 'app/core/config';\r\n\r\nexport default class StyleGuideCtrl {\r\n  theme: string;\r\n  buttonNames = ['primary', 'secondary', 'inverse', 'success', 'warning', 'danger'];\r\n  buttonSizes = ['btn-small', '', 'btn-large'];\r\n  buttonVariants = ['-'];\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $routeParams, private backendSrv, navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('cfg', 'admin', 'styleguide', 1);\r\n    this.theme = config.bootData.user.lightTheme ? 'light' : 'dark';\r\n  }\r\n\r\n  switchTheme() {\r\n    this.$routeParams.theme = this.theme === 'dark' ? 'light' : 'dark';\r\n\r\n    const cmd = {\r\n      theme: this.$routeParams.theme,\r\n    };\r\n\r\n    this.backendSrv.put('/api/user/preferences', cmd).then(() => {\r\n      window.location.href = window.location.href;\r\n    });\r\n  }\r\n}\r\n\r\n","\r\nexport default class AdminEditOrgCtrl {\r\n  /** @ngInject */\r\n  constructor($scope, $routeParams, backendSrv, $location, navModelSrv) {\r\n    $scope.init = () => {\r\n      $scope.navModel = navModelSrv.getNav('cfg', 'admin', 'global-orgs', 1);\r\n\r\n      if ($routeParams.id) {\r\n        $scope.getOrg($routeParams.id);\r\n        $scope.getOrgUsers($routeParams.id);\r\n      }\r\n    };\r\n\r\n    $scope.getOrg = id => {\r\n      backendSrv.get('/api/orgs/' + id).then(org => {\r\n        $scope.org = org;\r\n      });\r\n    };\r\n\r\n    $scope.getOrgUsers = id => {\r\n      backendSrv.get('/api/orgs/' + id + '/users').then(orgUsers => {\r\n        $scope.orgUsers = orgUsers;\r\n      });\r\n    };\r\n\r\n    $scope.update = () => {\r\n      if (!$scope.orgDetailsForm.$valid) {\r\n        return;\r\n      }\r\n\r\n      backendSrv.put('/api/orgs/' + $scope.org.id, $scope.org).then(() => {\r\n        $location.path('/admin/orgs');\r\n      });\r\n    };\r\n\r\n    $scope.updateOrgUser = orgUser => {\r\n      backendSrv.patch('/api/orgs/' + orgUser.orgId + '/users/' + orgUser.userId, orgUser);\r\n    };\r\n\r\n    $scope.removeOrgUser = orgUser => {\r\n      backendSrv.delete('/api/orgs/' + orgUser.orgId + '/users/' + orgUser.userId).then(() => {\r\n        $scope.getOrgUsers($scope.org.id);\r\n      });\r\n    };\r\n\r\n    $scope.init();\r\n  }\r\n}\r\n\r\n","import _ from 'lodash';\r\nimport { appEvents, coreModule } from 'app/core/core';\r\n\r\nexport class AlertNotificationEditCtrl {\r\n  theForm: any;\r\n  navModel: any;\r\n  testSeverity = 'critical';\r\n  notifiers: any;\r\n  notifierTemplateId: string;\r\n  isNew: boolean;\r\n  model: any;\r\n  defaults: any = {\r\n    type: 'email',\r\n    sendReminder: false,\r\n    disableResolveMessage: false,\r\n    frequency: '15m',\r\n    settings: {\r\n      httpMethod: 'POST',\r\n      autoResolve: true,\r\n      uploadImage: true,\r\n    },\r\n    isDefault: false,\r\n  };\r\n  getFrequencySuggestion: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $routeParams, private backendSrv, private $location, private $templateCache, navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('alerting', 'channels', 0);\r\n    this.isNew = !this.$routeParams.id;\r\n\r\n    this.getFrequencySuggestion = () => {\r\n      return ['1m', '5m', '10m', '15m', '30m', '1h'];\r\n    };\r\n\r\n    this.backendSrv\r\n      .get(`/api/alert-notifiers`)\r\n      .then(notifiers => {\r\n        this.notifiers = notifiers;\r\n\r\n        // add option templates\r\n        for (const notifier of this.notifiers) {\r\n          this.$templateCache.put(this.getNotifierTemplateId(notifier.type), notifier.optionsTemplate);\r\n        }\r\n\r\n        if (!this.$routeParams.id) {\r\n          this.navModel.breadcrumbs.push({ text: 'New channel' });\r\n          this.navModel.node = { text: 'New channel' };\r\n          return _.defaults(this.model, this.defaults);\r\n        }\r\n\r\n        return this.backendSrv.get(`/api/alert-notifications/${this.$routeParams.id}`).then(result => {\r\n          this.navModel.breadcrumbs.push({ text: result.name });\r\n          this.navModel.node = { text: result.name };\r\n          result.settings = _.defaults(result.settings, this.defaults.settings);\r\n          return result;\r\n        });\r\n      })\r\n      .then(model => {\r\n        this.model = model;\r\n        this.notifierTemplateId = this.getNotifierTemplateId(this.model.type);\r\n      });\r\n  }\r\n\r\n  save() {\r\n    if (!this.theForm.$valid) {\r\n      return;\r\n    }\r\n\r\n    if (this.model.id) {\r\n      this.backendSrv\r\n        .put(`/api/alert-notifications/${this.model.id}`, this.model)\r\n        .then(res => {\r\n          this.model = res;\r\n          appEvents.emit('alert-success', ['Notification updated', '']);\r\n        })\r\n        .catch(err => {\r\n          if (err.data && err.data.error) {\r\n            appEvents.emit('alert-error', [err.data.error]);\r\n          }\r\n        });\r\n    } else {\r\n      this.backendSrv\r\n        .post(`/api/alert-notifications`, this.model)\r\n        .then(res => {\r\n          appEvents.emit('alert-success', ['Notification created', '']);\r\n          this.$location.path('alerting/notifications');\r\n        })\r\n        .catch(err => {\r\n          if (err.data && err.data.error) {\r\n            appEvents.emit('alert-error', [err.data.error]);\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  getNotifierTemplateId(type) {\r\n    return `notifier-options-${type}`;\r\n  }\r\n\r\n  typeChanged() {\r\n    this.model.settings = _.defaults({}, this.defaults.settings);\r\n    this.notifierTemplateId = this.getNotifierTemplateId(this.model.type);\r\n  }\r\n\r\n  testNotification() {\r\n    if (!this.theForm.$valid) {\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      name: this.model.name,\r\n      type: this.model.type,\r\n      frequency: this.model.frequency,\r\n      settings: this.model.settings,\r\n    };\r\n\r\n    this.backendSrv.post(`/api/alert-notifications/test`, payload).then(res => {\r\n      appEvents.emit('alert-success', ['Test notification sent', '']);\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.controller('AlertNotificationEditCtrl', AlertNotificationEditCtrl);\r\n","import AdminListUsersCtrl from './AdminListUsersCtrl';\r\nimport AdminEditUserCtrl from './AdminEditUserCtrl';\r\nimport AdminListOrgsCtrl from './AdminListOrgsCtrl';\r\nimport AdminEditOrgCtrl from './AdminEditOrgCtrl';\r\nimport StyleGuideCtrl from './StyleGuideCtrl';\r\n\r\nimport coreModule from 'app/core/core_module';\r\n\r\nclass AdminSettingsCtrl {\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope, backendSrv, navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('cfg', 'admin', 'server-settings', 1);\r\n\r\n    backendSrv.get('/api/admin/settings').then(settings => {\r\n      $scope.settings = settings;\r\n    });\r\n  }\r\n}\r\n\r\nclass AdminHomeCtrl {\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('cfg', 'admin', 1);\r\n  }\r\n}\r\n\r\ncoreModule.controller('AdminListUsersCtrl', AdminListUsersCtrl);\r\ncoreModule.controller('AdminEditUserCtrl', AdminEditUserCtrl);\r\ncoreModule.controller('AdminListOrgsCtrl', AdminListOrgsCtrl);\r\ncoreModule.controller('AdminEditOrgCtrl', AdminEditOrgCtrl);\r\ncoreModule.controller('AdminSettingsCtrl', AdminSettingsCtrl);\r\ncoreModule.controller('AdminHomeCtrl', AdminHomeCtrl);\r\ncoreModule.controller('StyleGuideCtrl', StyleGuideCtrl);\r\n","import { coreModule } from 'app/core/core';\r\n\r\nexport class AlertNotificationsListCtrl {\r\n  notifications: any;\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private backendSrv, navModelSrv) {\r\n    this.loadNotifications();\r\n    this.navModel = navModelSrv.getNav('alerting', 'channels', 0);\r\n  }\r\n\r\n  loadNotifications() {\r\n    this.backendSrv.get(`/api/alert-notifications`).then(result => {\r\n      this.notifications = result;\r\n    });\r\n  }\r\n\r\n  deleteNotification(id) {\r\n    this.backendSrv.delete(`/api/alert-notifications/${id}`).then(() => {\r\n      this.notifications = this.notifications.filter(notification => {\r\n        return notification.id !== id;\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\ncoreModule.controller('AlertNotificationsListCtrl', AlertNotificationsListCtrl);\r\n","import _ from 'lodash';\r\n\r\nexport class SnapshotListCtrl {\r\n  navModel: any;\r\n  snapshots: any;\r\n\r\n  /** @ngInject */\r\n  constructor(private $rootScope, private backendSrv, navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('dashboards', 'snapshots', 0);\r\n    this.backendSrv.get('/api/dashboard/snapshots').then(result => {\r\n      this.snapshots = result;\r\n    });\r\n  }\r\n\r\n  removeSnapshotConfirmed(snapshot) {\r\n    _.remove(this.snapshots, { key: snapshot.key });\r\n    this.backendSrv.delete('/api/snapshots/' + snapshot.key).then(\r\n      () => {},\r\n      () => {\r\n        this.snapshots.push(snapshot);\r\n      }\r\n    );\r\n  }\r\n\r\n  removeSnapshot(snapshot) {\r\n    this.$rootScope.appEvent('confirm-modal', {\r\n      title: 'Delete',\r\n      text: 'Are you sure you want to delete snapshot ' + snapshot.name + '?',\r\n      yesText: 'Delete',\r\n      icon: 'fa-trash',\r\n      onConfirm: () => {\r\n        this.removeSnapshotConfirmed(snapshot);\r\n      },\r\n    });\r\n  }\r\n}\r\n","export class DashboardListCtrl {\r\n  navModel: any;\r\n\r\n  /** @ngInject */\r\n  constructor(navModelSrv) {\r\n    this.navModel = navModelSrv.getNav('dashboards', 'manage-dashboards', 0);\r\n  }\r\n}\r\n","import coreModule from 'app/core/core_module';\r\n\r\nimport { DashboardListCtrl } from './DashboardListCtrl';\r\nimport { SnapshotListCtrl } from './SnapshotListCtrl';\r\n\r\ncoreModule.controller('DashboardListCtrl', DashboardListCtrl);\r\ncoreModule.controller('SnapshotListCtrl', SnapshotListCtrl);\r\n","import './annotations/all';\r\nimport './templating/all';\r\nimport './plugins/all';\r\nimport './dashboard/all';\r\nimport './playlist/all';\r\nimport './panel/all';\r\nimport './org/all';\r\nimport './admin';\r\nimport './alerting/NotificationsEditCtrl';\r\nimport './alerting/NotificationsListCtrl';\r\nimport './manage-dashboards';\r\n","import 'babel-polyfill';\r\nimport 'file-saver';\r\nimport 'lodash';\r\nimport 'jquery';\r\nimport 'angular';\r\nimport 'angular-route';\r\nimport 'angular-sanitize';\r\nimport 'angular-native-dragdrop';\r\nimport 'angular-bindonce';\r\nimport 'react';\r\nimport 'react-dom';\r\n\r\nimport 'vendor/bootstrap/bootstrap';\r\nimport 'vendor/angular-ui/ui-bootstrap-tpls';\r\nimport 'vendor/angular-other/angular-strap';\r\n\r\nimport $ from 'jquery';\r\nimport angular from 'angular';\r\nimport config from 'app/core/config';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\n// add move to lodash for backward compatabiltiy\r\n_.move = (array, fromIndex, toIndex) => {\r\n  array.splice(toIndex, 0, array.splice(fromIndex, 1)[0]);\r\n  return array;\r\n};\r\n\r\nimport { coreModule, angularModules } from 'app/core/core_module';\r\nimport { registerAngularDirectives } from 'app/core/core';\r\nimport { setupAngularRoutes } from 'app/routes/routes';\r\n\r\nimport 'app/routes/GrafanaCtrl';\r\nimport 'app/features/all';\r\n\r\n// import symlinked extensions\r\nconst extensionsIndex = (require as any).context('.', true, /extensions\\/index.ts/);\r\nextensionsIndex.keys().forEach(key => {\r\n  extensionsIndex(key);\r\n});\r\n\r\nexport class GrafanaApp {\r\n  registerFunctions: any;\r\n  ngModuleDependencies: any[];\r\n  preBootModules: any[];\r\n\r\n  constructor() {\r\n    this.preBootModules = [];\r\n    this.registerFunctions = {};\r\n    this.ngModuleDependencies = [];\r\n  }\r\n\r\n  useModule(module) {\r\n    if (this.preBootModules) {\r\n      this.preBootModules.push(module);\r\n    } else {\r\n      _.extend(module, this.registerFunctions);\r\n    }\r\n    this.ngModuleDependencies.push(module.name);\r\n    return module;\r\n  }\r\n\r\n  init() {\r\n    const app = angular.module('grafana', []);\r\n\r\n    moment.locale(config.bootData.user.locale);\r\n\r\n    app.config(($locationProvider, $controllerProvider, $compileProvider, $filterProvider, $httpProvider, $provide) => {\r\n      // pre assing bindings before constructor calls\r\n      $compileProvider.preAssignBindingsEnabled(true);\r\n\r\n      if (config.buildInfo.env !== 'development') {\r\n        $compileProvider.debugInfoEnabled(false);\r\n      }\r\n\r\n      $httpProvider.useApplyAsync(true);\r\n\r\n      this.registerFunctions.controller = $controllerProvider.register;\r\n      this.registerFunctions.directive = $compileProvider.directive;\r\n      this.registerFunctions.factory = $provide.factory;\r\n      this.registerFunctions.service = $provide.service;\r\n      this.registerFunctions.filter = $filterProvider.register;\r\n\r\n      $provide.decorator('$http', [\r\n        '$delegate',\r\n        '$templateCache',\r\n        ($delegate, $templateCache) => {\r\n          const get = $delegate.get;\r\n          $delegate.get = (url, config) => {\r\n            if (url.match(/\\.html$/)) {\r\n              // some template's already exist in the cache\r\n              if (!$templateCache.get(url)) {\r\n                url += '?v=' + new Date().getTime();\r\n              }\r\n            }\r\n            return get(url, config);\r\n          };\r\n          return $delegate;\r\n        },\r\n      ]);\r\n    });\r\n\r\n    this.ngModuleDependencies = [\r\n      'grafana.core',\r\n      'ngRoute',\r\n      'ngSanitize',\r\n      '$strap.directives',\r\n      'ang-drag-drop',\r\n      'grafana',\r\n      'pasvaz.bindonce',\r\n      'ui.bootstrap',\r\n      'ui.bootstrap.tpls',\r\n      'react',\r\n    ];\r\n\r\n    // makes it possible to add dynamic stuff\r\n    _.each(angularModules, m => {\r\n      this.useModule(m);\r\n    });\r\n\r\n    // register react angular wrappers\r\n    coreModule.config(setupAngularRoutes);\r\n    registerAngularDirectives();\r\n\r\n    // disable tool tip animation\r\n    $.fn.tooltip.defaults.animation = false;\r\n\r\n    // bootstrap the app\r\n    angular.bootstrap(document, this.ngModuleDependencies).invoke(() => {\r\n      _.each(this.preBootModules, module => {\r\n        _.extend(module, this.registerFunctions);\r\n      });\r\n\r\n      this.preBootModules = null;\r\n    });\r\n  }\r\n}\r\n\r\nexport default new GrafanaApp();\r\n","export const getRouteParamsId = state => state.routeParams.id;\r\n\r\nexport const getRouteParamsPage = state => state.routeParams.page;\r\n","import app from './app';\r\napp.init();\r\n","import { getBackendSrv } from 'app/core/services/backend_srv';\r\nimport { AlertRuleDTO, StoreState } from 'app/types';\r\nimport { ThunkAction } from 'redux-thunk';\r\n\r\nexport enum ActionTypes {\r\n  LoadAlertRules = 'LOAD_ALERT_RULES',\r\n  SetSearchQuery = 'SET_ALERT_SEARCH_QUERY',\r\n}\r\n\r\nexport interface LoadAlertRulesAction {\r\n  type: ActionTypes.LoadAlertRules;\r\n  payload: AlertRuleDTO[];\r\n}\r\n\r\nexport interface SetSearchQueryAction {\r\n  type: ActionTypes.SetSearchQuery;\r\n  payload: string;\r\n}\r\n\r\nexport const loadAlertRules = (rules: AlertRuleDTO[]): LoadAlertRulesAction => ({\r\n  type: ActionTypes.LoadAlertRules,\r\n  payload: rules,\r\n});\r\n\r\nexport const setSearchQuery = (query: string): SetSearchQueryAction => ({\r\n  type: ActionTypes.SetSearchQuery,\r\n  payload: query,\r\n});\r\n\r\nexport type Action = LoadAlertRulesAction | SetSearchQueryAction;\r\n\r\ntype ThunkResult<R> = ThunkAction<R, StoreState, undefined, Action>;\r\n\r\nexport function getAlertRulesAsync(options: { state: string }): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const rules = await getBackendSrv().get('/api/alerts', options);\r\n    dispatch(loadAlertRules(rules));\r\n  };\r\n}\r\n\r\nexport function togglePauseAlertRule(id: number, options: { paused: boolean }): ThunkResult<void> {\r\n  return async (dispatch, getState) => {\r\n    await getBackendSrv().post(`/api/alerts/${id}/pause`, options);\r\n    const stateFilter = getState().location.query.state || 'all';\r\n    dispatch(getAlertRulesAsync({ state: stateFilter.toString() }));\r\n  };\r\n}\r\n","/**\r\n * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT\r\n */\r\n\r\nimport { UrlQueryMap } from 'app/types';\r\n\r\nexport function renderUrl(path: string, query: UrlQueryMap | undefined): string {\r\n  if (query && Object.keys(query).length > 0) {\r\n    path += '?' + toUrlParams(query);\r\n  }\r\n  return path;\r\n}\r\n\r\nexport function toUrlParams(a) {\r\n  const s = [];\r\n  const rbracket = /\\[\\]$/;\r\n\r\n  const isArray = obj => {\r\n    return Object.prototype.toString.call(obj) === '[object Array]';\r\n  };\r\n\r\n  const add = (k, v) => {\r\n    v = typeof v === 'function' ? v() : v === null ? '' : v === undefined ? '' : v;\r\n    if (typeof v !== 'boolean') {\r\n      s[s.length] = encodeURIComponent(k) + '=' + encodeURIComponent(v);\r\n    } else {\r\n      s[s.length] = encodeURIComponent(k);\r\n    }\r\n  };\r\n\r\n  const buildParams = (prefix, obj) => {\r\n    let i, len, key;\r\n\r\n    if (prefix) {\r\n      if (isArray(obj)) {\r\n        for (i = 0, len = obj.length; i < len; i++) {\r\n          if (rbracket.test(prefix)) {\r\n            add(prefix, obj[i]);\r\n          } else {\r\n            buildParams(prefix, obj[i]);\r\n          }\r\n        }\r\n      } else if (obj && String(obj) === '[object Object]') {\r\n        for (key in obj) {\r\n          buildParams(prefix + '[' + key + ']', obj[key]);\r\n        }\r\n      } else {\r\n        add(prefix, obj);\r\n      }\r\n    } else if (isArray(obj)) {\r\n      for (i = 0, len = obj.length; i < len; i++) {\r\n        add(obj[i].name, obj[i].value);\r\n      }\r\n    } else {\r\n      for (key in obj) {\r\n        buildParams(key, obj[key]);\r\n      }\r\n    }\r\n    return s;\r\n  };\r\n\r\n  return buildParams('', a).join('&');\r\n}\r\n","import { FolderDTO, NavModelItem, NavModel } from 'app/types';\r\n\r\nexport function buildNavModel(folder: FolderDTO): NavModelItem {\r\n  return {\r\n    icon: 'fa fa-folder-open',\r\n    id: 'manage-folder',\r\n    subTitle: 'Manage folder dashboards & permissions',\r\n    url: '',\r\n    text: folder.title,\r\n    breadcrumbs: [{ title: 'Dashboards', url: 'dashboards' }],\r\n    children: [\r\n      {\r\n        active: false,\r\n        icon: 'fa fa-fw fa-th-large',\r\n        id: `folder-dashboards-${folder.uid}`,\r\n        text: 'Dashboards',\r\n        url: folder.url,\r\n      },\r\n      {\r\n        active: false,\r\n        icon: 'fa fa-fw fa-lock',\r\n        id: `folder-permissions-${folder.uid}`,\r\n        text: 'Permissions',\r\n        url: `${folder.url}/permissions`,\r\n      },\r\n      {\r\n        active: false,\r\n        icon: 'fa fa-fw fa-cog',\r\n        id: `folder-settings-${folder.uid}`,\r\n        text: 'Settings',\r\n        url: `${folder.url}/settings`,\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\nexport function getLoadingNav(tabIndex: number): NavModel {\r\n  const main = buildNavModel({\r\n    id: 1,\r\n    uid: 'loading',\r\n    title: 'Loading',\r\n    url: 'url',\r\n    canSave: false,\r\n    version: 0,\r\n  });\r\n\r\n  main.children[tabIndex].active = true;\r\n\r\n  return {\r\n    main: main,\r\n    node: main.children[tabIndex],\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nexport interface Props {\r\n  model: any;\r\n}\r\n\r\nclass EmptyListCTA extends Component<Props, any> {\r\n  render() {\r\n    const {\r\n      title,\r\n      buttonIcon,\r\n      buttonLink,\r\n      buttonTitle,\r\n      proTip,\r\n      proTipLink,\r\n      proTipLinkTitle,\r\n      proTipTarget,\r\n    } = this.props.model;\r\n    return (\r\n      <div className=\"empty-list-cta\">\r\n        <div className=\"empty-list-cta__title\">{title}</div>\r\n        <a href={buttonLink} className=\"empty-list-cta__button btn btn-xlarge btn-success\">\r\n          <i className={buttonIcon} />\r\n          {buttonTitle}\r\n        </a>\r\n        <div className=\"empty-list-cta__pro-tip\">\r\n          <i className=\"fa fa-rocket\" /> ProTip: {proTip}\r\n          <a className=\"text-link empty-list-cta__pro-tip-link\" href={proTipLink} target={proTipTarget}>\r\n            {proTipLinkTitle}\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EmptyListCTA;\r\n","import React from 'react';\r\nimport tags from 'app/core/utils/tags';\r\n\r\nexport interface Props {\r\n  label: string;\r\n  removeIcon: boolean;\r\n  count: number;\r\n  onClick?: any;\r\n}\r\n\r\nexport class TagBadge extends React.Component<Props, any> {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { label, removeIcon, count } = this.props;\r\n    const { color, borderColor } = tags.getTagColorsFromName(label);\r\n    const tagStyle = {\r\n      backgroundColor: color,\r\n      borderColor: borderColor,\r\n    };\r\n    const countLabel = count !== 0 && <span className=\"tag-count-label\">{`(${count})`}</span>;\r\n\r\n    return (\r\n      <span className={`label label-tag`} style={tagStyle}>\r\n        {removeIcon && <i className=\"fa fa-remove\" />}\r\n        {label} {countLabel}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport default function sortByKeys(input) {\r\n  if (_.isArray(input)) {\r\n    return input.map(sortByKeys);\r\n  }\r\n\r\n  if (_.isPlainObject(input)) {\r\n    const sortedObject = {};\r\n    for (const key of _.keys(input).sort()) {\r\n      sortedObject[key] = sortByKeys(input[key]);\r\n    }\r\n    return sortedObject;\r\n  }\r\n\r\n  return input;\r\n}\r\n","import _ from 'lodash';\r\nimport {\r\n  GRID_COLUMN_COUNT,\r\n  GRID_CELL_HEIGHT,\r\n  GRID_CELL_VMARGIN,\r\n  DEFAULT_ROW_HEIGHT,\r\n  MIN_PANEL_HEIGHT,\r\n  DEFAULT_PANEL_SPAN,\r\n} from 'app/core/constants';\r\nimport { PanelModel } from './panel_model';\r\nimport { DashboardModel } from './dashboard_model';\r\n\r\nexport class DashboardMigrator {\r\n  dashboard: DashboardModel;\r\n\r\n  constructor(dashboardModel: DashboardModel) {\r\n    this.dashboard = dashboardModel;\r\n  }\r\n\r\n  updateSchema(old) {\r\n    let i, j, k, n;\r\n    const oldVersion = this.dashboard.schemaVersion;\r\n    const panelUpgrades = [];\r\n    this.dashboard.schemaVersion = 16;\r\n\r\n    if (oldVersion === this.dashboard.schemaVersion) {\r\n      return;\r\n    }\r\n\r\n    // version 2 schema changes\r\n    if (oldVersion < 2) {\r\n      if (old.services) {\r\n        if (old.services.filter) {\r\n          this.dashboard.time = old.services.filter.time;\r\n          this.dashboard.templating.list = old.services.filter.list || [];\r\n        }\r\n      }\r\n\r\n      panelUpgrades.push(panel => {\r\n        // rename panel type\r\n        if (panel.type === 'graphite') {\r\n          panel.type = 'graph';\r\n        }\r\n\r\n        if (panel.type !== 'graph') {\r\n          return;\r\n        }\r\n\r\n        if (_.isBoolean(panel.legend)) {\r\n          panel.legend = { show: panel.legend };\r\n        }\r\n\r\n        if (panel.grid) {\r\n          if (panel.grid.min) {\r\n            panel.grid.leftMin = panel.grid.min;\r\n            delete panel.grid.min;\r\n          }\r\n\r\n          if (panel.grid.max) {\r\n            panel.grid.leftMax = panel.grid.max;\r\n            delete panel.grid.max;\r\n          }\r\n        }\r\n\r\n        if (panel.y_format) {\r\n          if (!panel.y_formats) {\r\n            panel.y_formats = [];\r\n          }\r\n          panel.y_formats[0] = panel.y_format;\r\n          delete panel.y_format;\r\n        }\r\n\r\n        if (panel.y2_format) {\r\n          if (!panel.y_formats) {\r\n            panel.y_formats = [];\r\n          }\r\n          panel.y_formats[1] = panel.y2_format;\r\n          delete panel.y2_format;\r\n        }\r\n      });\r\n    }\r\n\r\n    // schema version 3 changes\r\n    if (oldVersion < 3) {\r\n      // ensure panel ids\r\n      let maxId = this.dashboard.getNextPanelId();\r\n      panelUpgrades.push(panel => {\r\n        if (!panel.id) {\r\n          panel.id = maxId;\r\n          maxId += 1;\r\n        }\r\n      });\r\n    }\r\n\r\n    // schema version 4 changes\r\n    if (oldVersion < 4) {\r\n      // move aliasYAxis changes\r\n      panelUpgrades.push(panel => {\r\n        if (panel.type !== 'graph') {\r\n          return;\r\n        }\r\n        _.each(panel.aliasYAxis, (value, key) => {\r\n          panel.seriesOverrides = [{ alias: key, yaxis: value }];\r\n        });\r\n        delete panel.aliasYAxis;\r\n      });\r\n    }\r\n\r\n    if (oldVersion < 6) {\r\n      // move pulldowns to new schema\r\n      const annotations = _.find(old.pulldowns, { type: 'annotations' });\r\n\r\n      if (annotations) {\r\n        this.dashboard.annotations = {\r\n          list: annotations.annotations || [],\r\n        };\r\n      }\r\n\r\n      // update template variables\r\n      for (i = 0; i < this.dashboard.templating.list.length; i++) {\r\n        const variable = this.dashboard.templating.list[i];\r\n        if (variable.datasource === void 0) {\r\n          variable.datasource = null;\r\n        }\r\n        if (variable.type === 'filter') {\r\n          variable.type = 'query';\r\n        }\r\n        if (variable.type === void 0) {\r\n          variable.type = 'query';\r\n        }\r\n        if (variable.allFormat === void 0) {\r\n          variable.allFormat = 'glob';\r\n        }\r\n      }\r\n    }\r\n\r\n    if (oldVersion < 7) {\r\n      if (old.nav && old.nav.length) {\r\n        this.dashboard.timepicker = old.nav[0];\r\n      }\r\n\r\n      // ensure query refIds\r\n      panelUpgrades.push(panel => {\r\n        _.each(panel.targets, target => {\r\n          if (!target.refId) {\r\n            target.refId = this.dashboard.getNextQueryLetter(panel);\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if (oldVersion < 8) {\r\n      panelUpgrades.push(panel => {\r\n        _.each(panel.targets, target => {\r\n          // update old influxdb query schema\r\n          if (target.fields && target.tags && target.groupBy) {\r\n            if (target.rawQuery) {\r\n              delete target.fields;\r\n              delete target.fill;\r\n            } else {\r\n              target.select = _.map(target.fields, field => {\r\n                const parts = [];\r\n                parts.push({ type: 'field', params: [field.name] });\r\n                parts.push({ type: field.func, params: [] });\r\n                if (field.mathExpr) {\r\n                  parts.push({ type: 'math', params: [field.mathExpr] });\r\n                }\r\n                if (field.asExpr) {\r\n                  parts.push({ type: 'alias', params: [field.asExpr] });\r\n                }\r\n                return parts;\r\n              });\r\n              delete target.fields;\r\n              _.each(target.groupBy, part => {\r\n                if (part.type === 'time' && part.interval) {\r\n                  part.params = [part.interval];\r\n                  delete part.interval;\r\n                }\r\n                if (part.type === 'tag' && part.key) {\r\n                  part.params = [part.key];\r\n                  delete part.key;\r\n                }\r\n              });\r\n\r\n              if (target.fill) {\r\n                target.groupBy.push({ type: 'fill', params: [target.fill] });\r\n                delete target.fill;\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    // schema version 9 changes\r\n    if (oldVersion < 9) {\r\n      // move aliasYAxis changes\r\n      panelUpgrades.push(panel => {\r\n        if (panel.type !== 'singlestat' && panel.thresholds !== '') {\r\n          return;\r\n        }\r\n\r\n        if (panel.thresholds) {\r\n          const k = panel.thresholds.split(',');\r\n\r\n          if (k.length >= 3) {\r\n            k.shift();\r\n            panel.thresholds = k.join(',');\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // schema version 10 changes\r\n    if (oldVersion < 10) {\r\n      // move aliasYAxis changes\r\n      panelUpgrades.push(panel => {\r\n        if (panel.type !== 'table') {\r\n          return;\r\n        }\r\n\r\n        _.each(panel.styles, style => {\r\n          if (style.thresholds && style.thresholds.length >= 3) {\r\n            const k = style.thresholds;\r\n            k.shift();\r\n            style.thresholds = k;\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if (oldVersion < 12) {\r\n      // update template variables\r\n      _.each(this.dashboard.templating.list, templateVariable => {\r\n        if (templateVariable.refresh) {\r\n          templateVariable.refresh = 1;\r\n        }\r\n        if (!templateVariable.refresh) {\r\n          templateVariable.refresh = 0;\r\n        }\r\n        if (templateVariable.hideVariable) {\r\n          templateVariable.hide = 2;\r\n        } else if (templateVariable.hideLabel) {\r\n          templateVariable.hide = 1;\r\n        }\r\n      });\r\n    }\r\n\r\n    if (oldVersion < 12) {\r\n      // update graph yaxes changes\r\n      panelUpgrades.push(panel => {\r\n        if (panel.type !== 'graph') {\r\n          return;\r\n        }\r\n        if (!panel.grid) {\r\n          return;\r\n        }\r\n\r\n        if (!panel.yaxes) {\r\n          panel.yaxes = [\r\n            {\r\n              show: panel['y-axis'],\r\n              min: panel.grid.leftMin,\r\n              max: panel.grid.leftMax,\r\n              logBase: panel.grid.leftLogBase,\r\n              format: panel.y_formats[0],\r\n              label: panel.leftYAxisLabel,\r\n            },\r\n            {\r\n              show: panel['y-axis'],\r\n              min: panel.grid.rightMin,\r\n              max: panel.grid.rightMax,\r\n              logBase: panel.grid.rightLogBase,\r\n              format: panel.y_formats[1],\r\n              label: panel.rightYAxisLabel,\r\n            },\r\n          ];\r\n\r\n          panel.xaxis = {\r\n            show: panel['x-axis'],\r\n          };\r\n\r\n          delete panel.grid.leftMin;\r\n          delete panel.grid.leftMax;\r\n          delete panel.grid.leftLogBase;\r\n          delete panel.grid.rightMin;\r\n          delete panel.grid.rightMax;\r\n          delete panel.grid.rightLogBase;\r\n          delete panel.y_formats;\r\n          delete panel.leftYAxisLabel;\r\n          delete panel.rightYAxisLabel;\r\n          delete panel['y-axis'];\r\n          delete panel['x-axis'];\r\n        }\r\n      });\r\n    }\r\n\r\n    if (oldVersion < 13) {\r\n      // update graph yaxes changes\r\n      panelUpgrades.push(panel => {\r\n        if (panel.type !== 'graph') {\r\n          return;\r\n        }\r\n        if (!panel.grid) {\r\n          return;\r\n        }\r\n\r\n        panel.thresholds = [];\r\n        const t1: any = {},\r\n          t2: any = {};\r\n\r\n        if (panel.grid.threshold1 !== null) {\r\n          t1.value = panel.grid.threshold1;\r\n          if (panel.grid.thresholdLine) {\r\n            t1.line = true;\r\n            t1.lineColor = panel.grid.threshold1Color;\r\n            t1.colorMode = 'custom';\r\n          } else {\r\n            t1.fill = true;\r\n            t1.fillColor = panel.grid.threshold1Color;\r\n            t1.colorMode = 'custom';\r\n          }\r\n        }\r\n\r\n        if (panel.grid.threshold2 !== null) {\r\n          t2.value = panel.grid.threshold2;\r\n          if (panel.grid.thresholdLine) {\r\n            t2.line = true;\r\n            t2.lineColor = panel.grid.threshold2Color;\r\n            t2.colorMode = 'custom';\r\n          } else {\r\n            t2.fill = true;\r\n            t2.fillColor = panel.grid.threshold2Color;\r\n            t2.colorMode = 'custom';\r\n          }\r\n        }\r\n\r\n        if (_.isNumber(t1.value)) {\r\n          if (_.isNumber(t2.value)) {\r\n            if (t1.value > t2.value) {\r\n              t1.op = t2.op = 'lt';\r\n              panel.thresholds.push(t1);\r\n              panel.thresholds.push(t2);\r\n            } else {\r\n              t1.op = t2.op = 'gt';\r\n              panel.thresholds.push(t1);\r\n              panel.thresholds.push(t2);\r\n            }\r\n          } else {\r\n            t1.op = 'gt';\r\n            panel.thresholds.push(t1);\r\n          }\r\n        }\r\n\r\n        delete panel.grid.threshold1;\r\n        delete panel.grid.threshold1Color;\r\n        delete panel.grid.threshold2;\r\n        delete panel.grid.threshold2Color;\r\n        delete panel.grid.thresholdLine;\r\n      });\r\n    }\r\n\r\n    if (oldVersion < 14) {\r\n      this.dashboard.graphTooltip = old.sharedCrosshair ? 1 : 0;\r\n    }\r\n\r\n    if (oldVersion < 16) {\r\n      this.upgradeToGridLayout(old);\r\n    }\r\n\r\n    if (panelUpgrades.length === 0) {\r\n      return;\r\n    }\r\n\r\n    for (j = 0; j < this.dashboard.panels.length; j++) {\r\n      for (k = 0; k < panelUpgrades.length; k++) {\r\n        panelUpgrades[k].call(this, this.dashboard.panels[j]);\r\n        if (this.dashboard.panels[j].panels) {\r\n          for (n = 0; n < this.dashboard.panels[j].panels.length; n++) {\r\n            panelUpgrades[k].call(this, this.dashboard.panels[j].panels[n]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  upgradeToGridLayout(old) {\r\n    let yPos = 0;\r\n    const widthFactor = GRID_COLUMN_COUNT / 12;\r\n\r\n    const maxPanelId = _.max(\r\n      _.flattenDeep(\r\n        _.map(old.rows, row => {\r\n          return _.map(row.panels, 'id');\r\n        })\r\n      )\r\n    );\r\n    let nextRowId = maxPanelId + 1;\r\n\r\n    if (!old.rows) {\r\n      return;\r\n    }\r\n\r\n    // Add special \"row\" panels if even one row is collapsed, repeated or has visible title\r\n    const showRows = _.some(old.rows, row => row.collapse || row.showTitle || row.repeat);\r\n\r\n    for (const row of old.rows) {\r\n      if (row.repeatIteration) {\r\n        continue;\r\n      }\r\n\r\n      const height: any = row.height || DEFAULT_ROW_HEIGHT;\r\n      const rowGridHeight = getGridHeight(height);\r\n\r\n      const rowPanel: any = {};\r\n      let rowPanelModel: PanelModel;\r\n      if (showRows) {\r\n        // add special row panel\r\n        rowPanel.id = nextRowId;\r\n        rowPanel.type = 'row';\r\n        rowPanel.title = row.title;\r\n        rowPanel.collapsed = row.collapse;\r\n        rowPanel.repeat = row.repeat;\r\n        rowPanel.panels = [];\r\n        rowPanel.gridPos = {\r\n          x: 0,\r\n          y: yPos,\r\n          w: GRID_COLUMN_COUNT,\r\n          h: rowGridHeight,\r\n        };\r\n        rowPanelModel = new PanelModel(rowPanel);\r\n        nextRowId++;\r\n        yPos++;\r\n      }\r\n\r\n      const rowArea = new RowArea(rowGridHeight, GRID_COLUMN_COUNT, yPos);\r\n\r\n      for (const panel of row.panels) {\r\n        panel.span = panel.span || DEFAULT_PANEL_SPAN;\r\n        if (panel.minSpan) {\r\n          panel.minSpan = Math.min(GRID_COLUMN_COUNT, GRID_COLUMN_COUNT / 12 * panel.minSpan);\r\n        }\r\n        const panelWidth = Math.floor(panel.span) * widthFactor;\r\n        const panelHeight = panel.height ? getGridHeight(panel.height) : rowGridHeight;\r\n\r\n        const panelPos = rowArea.getPanelPosition(panelHeight, panelWidth);\r\n        yPos = rowArea.yPos;\r\n        panel.gridPos = {\r\n          x: panelPos.x,\r\n          y: yPos + panelPos.y,\r\n          w: panelWidth,\r\n          h: panelHeight,\r\n        };\r\n        rowArea.addPanel(panel.gridPos);\r\n\r\n        delete panel.span;\r\n\r\n        if (rowPanelModel && rowPanel.collapsed) {\r\n          rowPanelModel.panels.push(panel);\r\n        } else {\r\n          this.dashboard.panels.push(new PanelModel(panel));\r\n        }\r\n      }\r\n\r\n      if (rowPanelModel) {\r\n        this.dashboard.panels.push(rowPanelModel);\r\n      }\r\n\r\n      if (!(rowPanelModel && rowPanel.collapsed)) {\r\n        yPos += rowGridHeight;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction getGridHeight(height) {\r\n  if (_.isString(height)) {\r\n    height = parseInt(height.replace('px', ''), 10);\r\n  }\r\n\r\n  if (height < MIN_PANEL_HEIGHT) {\r\n    height = MIN_PANEL_HEIGHT;\r\n  }\r\n\r\n  const gridHeight = Math.ceil(height / (GRID_CELL_HEIGHT + GRID_CELL_VMARGIN));\r\n  return gridHeight;\r\n}\r\n\r\n/**\r\n * RowArea represents dashboard row filled by panels\r\n * area is an array of numbers represented filled column's cells like\r\n *  -----------------------\r\n * |******** ****\r\n * |******** ****\r\n * |********\r\n *  -----------------------\r\n *  33333333 2222 00000 ...\r\n */\r\nclass RowArea {\r\n  area: number[];\r\n  yPos: number;\r\n  height: number;\r\n\r\n  constructor(height, width = GRID_COLUMN_COUNT, rowYPos = 0) {\r\n    this.area = new Array(width).fill(0);\r\n    this.yPos = rowYPos;\r\n    this.height = height;\r\n  }\r\n\r\n  reset() {\r\n    this.area.fill(0);\r\n  }\r\n\r\n  /**\r\n   * Update area after adding the panel.\r\n   */\r\n  addPanel(gridPos) {\r\n    for (let i = gridPos.x; i < gridPos.x + gridPos.w; i++) {\r\n      if (!this.area[i] || gridPos.y + gridPos.h - this.yPos > this.area[i]) {\r\n        this.area[i] = gridPos.y + gridPos.h - this.yPos;\r\n      }\r\n    }\r\n    return this.area;\r\n  }\r\n\r\n  /**\r\n   * Calculate position for the new panel in the row.\r\n   */\r\n  getPanelPosition(panelHeight, panelWidth, callOnce = false) {\r\n    let startPlace, endPlace;\r\n    let place;\r\n    for (let i = this.area.length - 1; i >= 0; i--) {\r\n      if (this.height - this.area[i] > 0) {\r\n        if (endPlace === undefined) {\r\n          endPlace = i;\r\n        } else {\r\n          if (i < this.area.length - 1 && this.area[i] <= this.area[i + 1]) {\r\n            startPlace = i;\r\n          } else {\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (startPlace !== undefined && endPlace !== undefined && endPlace - startPlace >= panelWidth - 1) {\r\n      const yPos = _.max(this.area.slice(startPlace));\r\n      place = {\r\n        x: startPlace,\r\n        y: yPos,\r\n      };\r\n    } else if (!callOnce) {\r\n      // wrap to next row\r\n      this.yPos += this.height;\r\n      this.reset();\r\n      return this.getPanelPosition(panelHeight, panelWidth, true);\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n    return place;\r\n  }\r\n}\r\n","import moment from 'moment';\r\nimport _ from 'lodash';\r\n\r\nimport { GRID_COLUMN_COUNT, REPEAT_DIR_VERTICAL, GRID_CELL_HEIGHT, GRID_CELL_VMARGIN } from 'app/core/constants';\r\nimport { DEFAULT_ANNOTATION_COLOR } from 'app/core/utils/colors';\r\nimport { Emitter } from 'app/core/utils/emitter';\r\nimport { contextSrv } from 'app/core/services/context_srv';\r\nimport sortByKeys from 'app/core/utils/sort_by_keys';\r\n\r\nimport { PanelModel } from './panel_model';\r\nimport { DashboardMigrator } from './dashboard_migration';\r\n\r\nexport class DashboardModel {\r\n  id: any;\r\n  uid: any;\r\n  title: any;\r\n  autoUpdate: any;\r\n  description: any;\r\n  tags: any;\r\n  style: any;\r\n  timezone: any;\r\n  editable: any;\r\n  graphTooltip: any;\r\n  time: any;\r\n  private originalTime: any;\r\n  timepicker: any;\r\n  templating: any;\r\n  private originalTemplating: any;\r\n  annotations: any;\r\n  refresh: any;\r\n  snapshot: any;\r\n  schemaVersion: number;\r\n  version: number;\r\n  revision: number;\r\n  links: any;\r\n  gnetId: any;\r\n  panels: PanelModel[];\r\n\r\n  // ------------------\r\n  // not persisted\r\n  // ------------------\r\n\r\n  // repeat process cycles\r\n  iteration: number;\r\n  meta: any;\r\n  events: Emitter;\r\n\r\n  static nonPersistedProperties: { [str: string]: boolean } = {\r\n    events: true,\r\n    meta: true,\r\n    panels: true, // needs special handling\r\n    templating: true, // needs special handling\r\n    originalTime: true,\r\n    originalTemplating: true,\r\n  };\r\n\r\n  constructor(data, meta?) {\r\n    if (!data) {\r\n      data = {};\r\n    }\r\n\r\n    this.events = new Emitter();\r\n    this.id = data.id || null;\r\n    this.uid = data.uid || null;\r\n    this.revision = data.revision;\r\n    this.title = data.title || 'No Title';\r\n    this.autoUpdate = data.autoUpdate;\r\n    this.description = data.description;\r\n    this.tags = data.tags || [];\r\n    this.style = data.style || 'dark';\r\n    this.timezone = data.timezone || '';\r\n    this.editable = data.editable !== false;\r\n    this.graphTooltip = data.graphTooltip || 0;\r\n    this.time = data.time || { from: 'now-6h', to: 'now' };\r\n    this.timepicker = data.timepicker || {};\r\n    this.templating = this.ensureListExist(data.templating);\r\n    this.annotations = this.ensureListExist(data.annotations);\r\n    this.refresh = data.refresh;\r\n    this.snapshot = data.snapshot;\r\n    this.schemaVersion = data.schemaVersion || 0;\r\n    this.version = data.version || 0;\r\n    this.links = data.links || [];\r\n    this.gnetId = data.gnetId || null;\r\n    this.panels = _.map(data.panels || [], panelData => new PanelModel(panelData));\r\n\r\n    this.resetOriginalVariables();\r\n    this.resetOriginalTime();\r\n\r\n    this.initMeta(meta);\r\n    this.updateSchema(data);\r\n\r\n    this.addBuiltInAnnotationQuery();\r\n    this.sortPanelsByGridPos();\r\n  }\r\n\r\n  addBuiltInAnnotationQuery() {\r\n    let found = false;\r\n    for (const item of this.annotations.list) {\r\n      if (item.builtIn === 1) {\r\n        found = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (found) {\r\n      return;\r\n    }\r\n\r\n    this.annotations.list.unshift({\r\n      datasource: '-- Grafana --',\r\n      name: 'Annotations & Alerts',\r\n      type: 'dashboard',\r\n      iconColor: DEFAULT_ANNOTATION_COLOR,\r\n      enable: true,\r\n      hide: true,\r\n      builtIn: 1,\r\n    });\r\n  }\r\n\r\n  private initMeta(meta) {\r\n    meta = meta || {};\r\n\r\n    meta.canShare = meta.canShare !== false;\r\n    meta.canSave = meta.canSave !== false;\r\n    meta.canStar = meta.canStar !== false;\r\n    meta.canEdit = meta.canEdit !== false;\r\n    meta.showSettings = meta.canEdit;\r\n    meta.canMakeEditable = meta.canSave && !this.editable;\r\n\r\n    if (!this.editable) {\r\n      meta.canEdit = false;\r\n      meta.canDelete = false;\r\n      meta.canSave = false;\r\n    }\r\n\r\n    this.meta = meta;\r\n  }\r\n\r\n  // cleans meta data and other non persistent state\r\n  getSaveModelClone(options?) {\r\n    const defaults = _.defaults(options || {}, {\r\n      saveVariables: true,\r\n      saveTimerange: true,\r\n    });\r\n\r\n    // make clone\r\n    let copy: any = {};\r\n    for (const property in this) {\r\n      if (DashboardModel.nonPersistedProperties[property] || !this.hasOwnProperty(property)) {\r\n        continue;\r\n      }\r\n\r\n      copy[property] = _.cloneDeep(this[property]);\r\n    }\r\n\r\n    // get variable save models\r\n    copy.templating = {\r\n      list: _.map(this.templating.list, variable => (variable.getSaveModel ? variable.getSaveModel() : variable)),\r\n    };\r\n\r\n    if (!defaults.saveVariables) {\r\n      for (let i = 0; i < copy.templating.list.length; i++) {\r\n        const current = copy.templating.list[i];\r\n        const original = _.find(this.originalTemplating, { name: current.name, type: current.type });\r\n\r\n        if (!original) {\r\n          continue;\r\n        }\r\n\r\n        if (current.type === 'adhoc') {\r\n          copy.templating.list[i].filters = original.filters;\r\n        } else {\r\n          copy.templating.list[i].current = original.current;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!defaults.saveTimerange) {\r\n      copy.time = this.originalTime;\r\n    }\r\n\r\n    // get panel save models\r\n    copy.panels = _.chain(this.panels)\r\n      .filter(panel => panel.type !== 'add-panel')\r\n      .map(panel => panel.getSaveModel())\r\n      .value();\r\n\r\n    //  sort by keys\r\n    copy = sortByKeys(copy);\r\n\r\n    return copy;\r\n  }\r\n\r\n  setViewMode(panel: PanelModel, fullscreen: boolean, isEditing: boolean) {\r\n    this.meta.fullscreen = fullscreen;\r\n    this.meta.isEditing = isEditing && this.meta.canEdit;\r\n\r\n    panel.setViewMode(fullscreen, this.meta.isEditing);\r\n\r\n    this.events.emit('view-mode-changed', panel);\r\n  }\r\n\r\n  timeRangeUpdated() {\r\n    this.events.emit('time-range-updated');\r\n  }\r\n\r\n  startRefresh() {\r\n    this.events.emit('refresh');\r\n\r\n    for (const panel of this.panels) {\r\n      if (!this.otherPanelInFullscreen(panel)) {\r\n        panel.refresh();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.events.emit('render');\r\n\r\n    for (const panel of this.panels) {\r\n      panel.render();\r\n    }\r\n  }\r\n\r\n  panelInitialized(panel: PanelModel) {\r\n    if (!this.otherPanelInFullscreen(panel)) {\r\n      panel.refresh();\r\n    }\r\n  }\r\n\r\n  otherPanelInFullscreen(panel: PanelModel) {\r\n    return this.meta.fullscreen && !panel.fullscreen;\r\n  }\r\n\r\n  changePanelType(panel: PanelModel, pluginId: string) {\r\n    panel.changeType(pluginId);\r\n    this.events.emit('panel-type-changed', panel);\r\n  }\r\n\r\n  private ensureListExist(data) {\r\n    if (!data) {\r\n      data = {};\r\n    }\r\n    if (!data.list) {\r\n      data.list = [];\r\n    }\r\n    return data;\r\n  }\r\n\r\n  getNextPanelId() {\r\n    let max = 0;\r\n\r\n    for (const panel of this.panels) {\r\n      if (panel.id > max) {\r\n        max = panel.id;\r\n      }\r\n\r\n      if (panel.collapsed) {\r\n        for (const rowPanel of panel.panels) {\r\n          if (rowPanel.id > max) {\r\n            max = rowPanel.id;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return max + 1;\r\n  }\r\n\r\n  forEachPanel(callback) {\r\n    for (let i = 0; i < this.panels.length; i++) {\r\n      callback(this.panels[i], i);\r\n    }\r\n  }\r\n\r\n  getPanelById(id) {\r\n    for (const panel of this.panels) {\r\n      if (panel.id === id) {\r\n        return panel;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  addPanel(panelData) {\r\n    panelData.id = this.getNextPanelId();\r\n\r\n    const panel = new PanelModel(panelData);\r\n\r\n    this.panels.unshift(panel);\r\n\r\n    this.sortPanelsByGridPos();\r\n\r\n    this.events.emit('panel-added', panel);\r\n  }\r\n\r\n  sortPanelsByGridPos() {\r\n    this.panels.sort((panelA, panelB) => {\r\n      if (panelA.gridPos.y === panelB.gridPos.y) {\r\n        return panelA.gridPos.x - panelB.gridPos.x;\r\n      } else {\r\n        return panelA.gridPos.y - panelB.gridPos.y;\r\n      }\r\n    });\r\n  }\r\n\r\n  cleanUpRepeats() {\r\n    if (this.snapshot || this.templating.list.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.iteration = (this.iteration || new Date().getTime()) + 1;\r\n    const panelsToRemove = [];\r\n\r\n    // cleanup scopedVars\r\n    for (const panel of this.panels) {\r\n      delete panel.scopedVars;\r\n    }\r\n\r\n    for (let i = 0; i < this.panels.length; i++) {\r\n      const panel = this.panels[i];\r\n      if ((!panel.repeat || panel.repeatedByRow) && panel.repeatPanelId && panel.repeatIteration !== this.iteration) {\r\n        panelsToRemove.push(panel);\r\n      }\r\n    }\r\n\r\n    // remove panels\r\n    _.pull(this.panels, ...panelsToRemove);\r\n\r\n    this.sortPanelsByGridPos();\r\n    this.events.emit('repeats-processed');\r\n  }\r\n\r\n  processRepeats() {\r\n    if (this.snapshot || this.templating.list.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.cleanUpRepeats();\r\n\r\n    this.iteration = (this.iteration || new Date().getTime()) + 1;\r\n\r\n    for (let i = 0; i < this.panels.length; i++) {\r\n      const panel = this.panels[i];\r\n      if (panel.repeat) {\r\n        this.repeatPanel(panel, i);\r\n      }\r\n    }\r\n\r\n    this.sortPanelsByGridPos();\r\n    this.events.emit('repeats-processed');\r\n  }\r\n\r\n  cleanUpRowRepeats(rowPanels) {\r\n    const panelsToRemove = [];\r\n    for (let i = 0; i < rowPanels.length; i++) {\r\n      const panel = rowPanels[i];\r\n      if (!panel.repeat && panel.repeatPanelId) {\r\n        panelsToRemove.push(panel);\r\n      }\r\n    }\r\n    _.pull(rowPanels, ...panelsToRemove);\r\n    _.pull(this.panels, ...panelsToRemove);\r\n  }\r\n\r\n  processRowRepeats(row: PanelModel) {\r\n    if (this.snapshot || this.templating.list.length === 0) {\r\n      return;\r\n    }\r\n\r\n    let rowPanels = row.panels;\r\n    if (!row.collapsed) {\r\n      const rowPanelIndex = _.findIndex(this.panels, p => p.id === row.id);\r\n      rowPanels = this.getRowPanels(rowPanelIndex);\r\n    }\r\n\r\n    this.cleanUpRowRepeats(rowPanels);\r\n\r\n    for (let i = 0; i < rowPanels.length; i++) {\r\n      const panel = rowPanels[i];\r\n      if (panel.repeat) {\r\n        const panelIndex = _.findIndex(this.panels, p => p.id === panel.id);\r\n        this.repeatPanel(panel, panelIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n  getPanelRepeatClone(sourcePanel, valueIndex, sourcePanelIndex) {\r\n    // if first clone return source\r\n    if (valueIndex === 0) {\r\n      return sourcePanel;\r\n    }\r\n\r\n    const clone = new PanelModel(sourcePanel.getSaveModel());\r\n    clone.id = this.getNextPanelId();\r\n\r\n    // insert after source panel + value index\r\n    this.panels.splice(sourcePanelIndex + valueIndex, 0, clone);\r\n\r\n    clone.repeatIteration = this.iteration;\r\n    clone.repeatPanelId = sourcePanel.id;\r\n    clone.repeat = null;\r\n    return clone;\r\n  }\r\n\r\n  getRowRepeatClone(sourceRowPanel, valueIndex, sourcePanelIndex) {\r\n    // if first clone return source\r\n    if (valueIndex === 0) {\r\n      if (!sourceRowPanel.collapsed) {\r\n        const rowPanels = this.getRowPanels(sourcePanelIndex);\r\n        sourceRowPanel.panels = rowPanels;\r\n      }\r\n      return sourceRowPanel;\r\n    }\r\n\r\n    const clone = new PanelModel(sourceRowPanel.getSaveModel());\r\n    // for row clones we need to figure out panels under row to clone and where to insert clone\r\n    let rowPanels, insertPos;\r\n    if (sourceRowPanel.collapsed) {\r\n      rowPanels = _.cloneDeep(sourceRowPanel.panels);\r\n      clone.panels = rowPanels;\r\n      // insert copied row after preceding row\r\n      insertPos = sourcePanelIndex + valueIndex;\r\n    } else {\r\n      rowPanels = this.getRowPanels(sourcePanelIndex);\r\n      clone.panels = _.map(rowPanels, panel => panel.getSaveModel());\r\n      // insert copied row after preceding row's panels\r\n      insertPos = sourcePanelIndex + (rowPanels.length + 1) * valueIndex;\r\n    }\r\n    this.panels.splice(insertPos, 0, clone);\r\n\r\n    this.updateRepeatedPanelIds(clone);\r\n    return clone;\r\n  }\r\n\r\n  repeatPanel(panel: PanelModel, panelIndex: number) {\r\n    const variable = _.find(this.templating.list, { name: panel.repeat });\r\n    if (!variable) {\r\n      return;\r\n    }\r\n\r\n    if (panel.type === 'row') {\r\n      this.repeatRow(panel, panelIndex, variable);\r\n      return;\r\n    }\r\n\r\n    const selectedOptions = this.getSelectedVariableOptions(variable);\r\n    const minWidth = panel.minSpan || 6;\r\n    let xPos = 0;\r\n    let yPos = panel.gridPos.y;\r\n\r\n    for (let index = 0; index < selectedOptions.length; index++) {\r\n      const option = selectedOptions[index];\r\n      let copy;\r\n\r\n      copy = this.getPanelRepeatClone(panel, index, panelIndex);\r\n      copy.scopedVars = copy.scopedVars || {};\r\n      copy.scopedVars[variable.name] = option;\r\n\r\n      if (panel.repeatDirection === REPEAT_DIR_VERTICAL) {\r\n        if (index > 0) {\r\n          yPos += copy.gridPos.h;\r\n        }\r\n        copy.gridPos.y = yPos;\r\n      } else {\r\n        // set width based on how many are selected\r\n        // assumed the repeated panels should take up full row width\r\n        copy.gridPos.w = Math.max(GRID_COLUMN_COUNT / selectedOptions.length, minWidth);\r\n        copy.gridPos.x = xPos;\r\n        copy.gridPos.y = yPos;\r\n\r\n        xPos += copy.gridPos.w;\r\n\r\n        // handle overflow by pushing down one row\r\n        if (xPos + copy.gridPos.w > GRID_COLUMN_COUNT) {\r\n          xPos = 0;\r\n          yPos += copy.gridPos.h;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update gridPos for panels below\r\n    const yOffset = yPos - panel.gridPos.y;\r\n    if (yOffset > 0) {\r\n      const panelBelowIndex = panelIndex + selectedOptions.length;\r\n      for (let i = panelBelowIndex; i < this.panels.length; i++) {\r\n        this.panels[i].gridPos.y += yOffset;\r\n      }\r\n    }\r\n  }\r\n\r\n  repeatRow(panel: PanelModel, panelIndex: number, variable) {\r\n    const selectedOptions = this.getSelectedVariableOptions(variable);\r\n    let yPos = panel.gridPos.y;\r\n\r\n    function setScopedVars(panel, variableOption) {\r\n      panel.scopedVars = panel.scopedVars || {};\r\n      panel.scopedVars[variable.name] = variableOption;\r\n    }\r\n\r\n    for (let optionIndex = 0; optionIndex < selectedOptions.length; optionIndex++) {\r\n      const option = selectedOptions[optionIndex];\r\n      const rowCopy = this.getRowRepeatClone(panel, optionIndex, panelIndex);\r\n      setScopedVars(rowCopy, option);\r\n\r\n      const rowHeight = this.getRowHeight(rowCopy);\r\n      const rowPanels = rowCopy.panels || [];\r\n      let panelBelowIndex;\r\n\r\n      if (panel.collapsed) {\r\n        // For collapsed row just copy its panels and set scoped vars and proper IDs\r\n        _.each(rowPanels, (rowPanel, i) => {\r\n          setScopedVars(rowPanel, option);\r\n          if (optionIndex > 0) {\r\n            this.updateRepeatedPanelIds(rowPanel, true);\r\n          }\r\n        });\r\n        rowCopy.gridPos.y += optionIndex;\r\n        yPos += optionIndex;\r\n        panelBelowIndex = panelIndex + optionIndex + 1;\r\n      } else {\r\n        // insert after 'row' panel\r\n        const insertPos = panelIndex + (rowPanels.length + 1) * optionIndex + 1;\r\n        _.each(rowPanels, (rowPanel, i) => {\r\n          setScopedVars(rowPanel, option);\r\n          if (optionIndex > 0) {\r\n            const cloneRowPanel = new PanelModel(rowPanel);\r\n            this.updateRepeatedPanelIds(cloneRowPanel, true);\r\n            // For exposed row additionally set proper Y grid position and add it to dashboard panels\r\n            cloneRowPanel.gridPos.y += rowHeight * optionIndex;\r\n            this.panels.splice(insertPos + i, 0, cloneRowPanel);\r\n          }\r\n        });\r\n        rowCopy.panels = [];\r\n        rowCopy.gridPos.y += rowHeight * optionIndex;\r\n        yPos += rowHeight;\r\n        panelBelowIndex = insertPos + rowPanels.length;\r\n      }\r\n\r\n      // Update gridPos for panels below\r\n      for (let i = panelBelowIndex; i < this.panels.length; i++) {\r\n        this.panels[i].gridPos.y += yPos;\r\n      }\r\n    }\r\n  }\r\n\r\n  updateRepeatedPanelIds(panel: PanelModel, repeatedByRow?: boolean) {\r\n    panel.repeatPanelId = panel.id;\r\n    panel.id = this.getNextPanelId();\r\n    panel.repeatIteration = this.iteration;\r\n    if (repeatedByRow) {\r\n      panel.repeatedByRow = true;\r\n    } else {\r\n      panel.repeat = null;\r\n    }\r\n    return panel;\r\n  }\r\n\r\n  getSelectedVariableOptions(variable) {\r\n    let selectedOptions;\r\n    if (variable.current.text === 'All') {\r\n      selectedOptions = variable.options.slice(1, variable.options.length);\r\n    } else {\r\n      selectedOptions = _.filter(variable.options, { selected: true });\r\n    }\r\n    return selectedOptions;\r\n  }\r\n\r\n  getRowHeight(rowPanel: PanelModel): number {\r\n    if (!rowPanel.panels || rowPanel.panels.length === 0) {\r\n      return 0;\r\n    }\r\n    const rowYPos = rowPanel.gridPos.y;\r\n    const positions = _.map(rowPanel.panels, 'gridPos');\r\n    const maxPos = _.maxBy(positions, pos => {\r\n      return pos.y + pos.h;\r\n    });\r\n    return maxPos.y + maxPos.h - rowYPos;\r\n  }\r\n\r\n  removePanel(panel: PanelModel) {\r\n    const index = _.indexOf(this.panels, panel);\r\n    this.panels.splice(index, 1);\r\n    this.events.emit('panel-removed', panel);\r\n  }\r\n\r\n  removeRow(row: PanelModel, removePanels: boolean) {\r\n    const needToogle = (!removePanels && row.collapsed) || (removePanels && !row.collapsed);\r\n\r\n    if (needToogle) {\r\n      this.toggleRow(row);\r\n    }\r\n\r\n    this.removePanel(row);\r\n  }\r\n\r\n  expandRows() {\r\n    for (let i = 0; i < this.panels.length; i++) {\r\n      const panel = this.panels[i];\r\n\r\n      if (panel.type !== 'row') {\r\n        continue;\r\n      }\r\n\r\n      if (panel.collapsed) {\r\n        this.toggleRow(panel);\r\n      }\r\n    }\r\n  }\r\n\r\n  collapseRows() {\r\n    for (let i = 0; i < this.panels.length; i++) {\r\n      const panel = this.panels[i];\r\n\r\n      if (panel.type !== 'row') {\r\n        continue;\r\n      }\r\n\r\n      if (!panel.collapsed) {\r\n        this.toggleRow(panel);\r\n      }\r\n    }\r\n  }\r\n\r\n  setPanelFocus(id) {\r\n    this.meta.focusPanelId = id;\r\n  }\r\n\r\n  updateSubmenuVisibility() {\r\n    this.meta.submenuEnabled = (() => {\r\n      if (this.links.length > 0) {\r\n        return true;\r\n      }\r\n\r\n      const visibleVars = _.filter(this.templating.list, variable => variable.hide !== 2);\r\n      if (visibleVars.length > 0) {\r\n        return true;\r\n      }\r\n\r\n      const visibleAnnotations = _.filter(this.annotations.list, annotation => annotation.hide !== true);\r\n      if (visibleAnnotations.length > 0) {\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    })();\r\n  }\r\n\r\n  getPanelInfoById(panelId) {\r\n    for (let i = 0; i < this.panels.length; i++) {\r\n      if (this.panels[i].id === panelId) {\r\n        return {\r\n          panel: this.panels[i],\r\n          index: i,\r\n        };\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  duplicatePanel(panel) {\r\n    const newPanel = panel.getSaveModel();\r\n    newPanel.id = this.getNextPanelId();\r\n\r\n    delete newPanel.repeat;\r\n    delete newPanel.repeatIteration;\r\n    delete newPanel.repeatPanelId;\r\n    delete newPanel.scopedVars;\r\n    if (newPanel.alert) {\r\n      delete newPanel.thresholds;\r\n    }\r\n    delete newPanel.alert;\r\n\r\n    // does it fit to the right?\r\n    if (panel.gridPos.x + panel.gridPos.w * 2 <= GRID_COLUMN_COUNT) {\r\n      newPanel.gridPos.x += panel.gridPos.w;\r\n    } else {\r\n      // add below\r\n      newPanel.gridPos.y += panel.gridPos.h;\r\n    }\r\n\r\n    this.addPanel(newPanel);\r\n    return newPanel;\r\n  }\r\n\r\n  formatDate(date, format?) {\r\n    date = moment.isMoment(date) ? date : moment(date);\r\n    format = format || 'YYYY-MM-DD HH:mm:ss';\r\n    const timezone = this.getTimezone();\r\n\r\n    return timezone === 'browser' ? moment(date).format(format) : moment.utc(date).format(format);\r\n  }\r\n\r\n  destroy() {\r\n    this.events.removeAllListeners();\r\n    for (const panel of this.panels) {\r\n      panel.destroy();\r\n    }\r\n  }\r\n\r\n  toggleRow(row: PanelModel) {\r\n    const rowIndex = _.indexOf(this.panels, row);\r\n\r\n    if (row.collapsed) {\r\n      row.collapsed = false;\r\n      const hasRepeat = _.some(row.panels, p => p.repeat);\r\n\r\n      if (row.panels.length > 0) {\r\n        // Use first panel to figure out if it was moved or pushed\r\n        const firstPanel = row.panels[0];\r\n        const yDiff = firstPanel.gridPos.y - (row.gridPos.y + row.gridPos.h);\r\n\r\n        // start inserting after row\r\n        let insertPos = rowIndex + 1;\r\n        // y max will represent the bottom y pos after all panels have been added\r\n        // needed to know home much panels below should be pushed down\r\n        let yMax = row.gridPos.y;\r\n\r\n        for (const panel of row.panels) {\r\n          // make sure y is adjusted (in case row moved while collapsed)\r\n          // console.log('yDiff', yDiff);\r\n          panel.gridPos.y -= yDiff;\r\n          // insert after row\r\n          this.panels.splice(insertPos, 0, new PanelModel(panel));\r\n          // update insert post and y max\r\n          insertPos += 1;\r\n          yMax = Math.max(yMax, panel.gridPos.y + panel.gridPos.h);\r\n        }\r\n\r\n        const pushDownAmount = yMax - row.gridPos.y - 1;\r\n\r\n        // push panels below down\r\n        for (let panelIndex = insertPos; panelIndex < this.panels.length; panelIndex++) {\r\n          this.panels[panelIndex].gridPos.y += pushDownAmount;\r\n        }\r\n\r\n        row.panels = [];\r\n\r\n        if (hasRepeat) {\r\n          this.processRowRepeats(row);\r\n        }\r\n      }\r\n\r\n      // sort panels\r\n      this.sortPanelsByGridPos();\r\n\r\n      // emit change event\r\n      this.events.emit('row-expanded');\r\n      return;\r\n    }\r\n\r\n    const rowPanels = this.getRowPanels(rowIndex);\r\n\r\n    // remove panels\r\n    _.pull(this.panels, ...rowPanels);\r\n    // save panel models inside row panel\r\n    row.panels = _.map(rowPanels, panel => panel.getSaveModel());\r\n    row.collapsed = true;\r\n\r\n    // emit change event\r\n    this.events.emit('row-collapsed');\r\n  }\r\n\r\n  /**\r\n   * Will return all panels after rowIndex until it encounters another row\r\n   */\r\n  getRowPanels(rowIndex: number): PanelModel[] {\r\n    const rowPanels = [];\r\n\r\n    for (let index = rowIndex + 1; index < this.panels.length; index++) {\r\n      const panel = this.panels[index];\r\n\r\n      // break when encountering another row\r\n      if (panel.type === 'row') {\r\n        break;\r\n      }\r\n\r\n      // this panel must belong to row\r\n      rowPanels.push(panel);\r\n    }\r\n\r\n    return rowPanels;\r\n  }\r\n\r\n  on(eventName, callback) {\r\n    this.events.on(eventName, callback);\r\n  }\r\n\r\n  off(eventName, callback?) {\r\n    this.events.off(eventName, callback);\r\n  }\r\n\r\n  cycleGraphTooltip() {\r\n    this.graphTooltip = (this.graphTooltip + 1) % 3;\r\n  }\r\n\r\n  sharedTooltipModeEnabled() {\r\n    return this.graphTooltip > 0;\r\n  }\r\n\r\n  sharedCrosshairModeOnly() {\r\n    return this.graphTooltip === 1;\r\n  }\r\n\r\n  getRelativeTime(date) {\r\n    date = moment.isMoment(date) ? date : moment(date);\r\n\r\n    return this.timezone === 'browser' ? moment(date).fromNow() : moment.utc(date).fromNow();\r\n  }\r\n\r\n  getNextQueryLetter(panel) {\r\n    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\r\n    return _.find(letters, refId => {\r\n      return _.every(panel.targets, other => {\r\n        return other.refId !== refId;\r\n      });\r\n    });\r\n  }\r\n\r\n  isTimezoneUtc() {\r\n    return this.getTimezone() === 'utc';\r\n  }\r\n\r\n  getTimezone() {\r\n    return this.timezone ? this.timezone : contextSrv.user.timezone;\r\n  }\r\n\r\n  private updateSchema(old) {\r\n    const migrator = new DashboardMigrator(this);\r\n    migrator.updateSchema(old);\r\n  }\r\n\r\n  resetOriginalTime() {\r\n    this.originalTime = _.cloneDeep(this.time);\r\n  }\r\n\r\n  hasTimeChanged() {\r\n    return !_.isEqual(this.time, this.originalTime);\r\n  }\r\n\r\n  resetOriginalVariables() {\r\n    this.originalTemplating = _.map(this.templating.list, variable => {\r\n      return {\r\n        name: variable.name,\r\n        type: variable.type,\r\n        current: _.cloneDeep(variable.current),\r\n        filters: _.cloneDeep(variable.filters),\r\n      };\r\n    });\r\n  }\r\n\r\n  hasVariableValuesChanged() {\r\n    if (this.templating.list.length !== this.originalTemplating.length) {\r\n      return false;\r\n    }\r\n\r\n    const updated = _.map(this.templating.list, variable => {\r\n      return {\r\n        name: variable.name,\r\n        type: variable.type,\r\n        current: _.cloneDeep(variable.current),\r\n        filters: _.cloneDeep(variable.filters),\r\n      };\r\n    });\r\n\r\n    return !_.isEqual(updated, this.originalTemplating);\r\n  }\r\n\r\n  autoFitPanels(viewHeight: number) {\r\n    if (!this.meta.autofitpanels) {\r\n      return;\r\n    }\r\n\r\n    const currentGridHeight = Math.max(\r\n      ...this.panels.map(panel => {\r\n        return panel.gridPos.h + panel.gridPos.y;\r\n      })\r\n    );\r\n\r\n    const navbarHeight = 55;\r\n    const margin = 20;\r\n    const submenuHeight = 50;\r\n\r\n    let visibleHeight = viewHeight - navbarHeight - margin;\r\n\r\n    // Remove submenu height if visible\r\n    if (this.meta.submenuEnabled && !this.meta.kiosk) {\r\n      visibleHeight -= submenuHeight;\r\n    }\r\n\r\n    // add back navbar height\r\n    if (this.meta.kiosk === 'b') {\r\n      visibleHeight += 55;\r\n    }\r\n\r\n    const visibleGridHeight = Math.floor(visibleHeight / (GRID_CELL_HEIGHT + GRID_CELL_VMARGIN));\r\n    const scaleFactor = currentGridHeight / visibleGridHeight;\r\n\r\n    this.panels.forEach((panel, i) => {\r\n      panel.gridPos.y = Math.round(panel.gridPos.y / scaleFactor) || 1;\r\n      panel.gridPos.h = Math.round(panel.gridPos.h / scaleFactor) || 1;\r\n    });\r\n  }\r\n}\r\n","/* Javascript plotting library for jQuery, version 0.8.3.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\n*/\r\n\r\n// first an inline dependency, jquery.colorhelpers.js, we inline it here\r\n// for convenience\r\n\r\n/* Plugin for jQuery for working with colors.\r\n *\r\n * Version 1.1.\r\n *\r\n * Inspiration from jQuery color animation plugin by John Resig.\r\n *\r\n * Released under the MIT license by Ole Laursen, October 2009.\r\n *\r\n * Examples:\r\n *\r\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\r\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\r\n *   console.log(c.r, c.g, c.b, c.a);\r\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\r\n *\r\n * Note that .scale() and .add() return the same modified object\r\n * instead of making a new one.\r\n *\r\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\r\n * produce a color rather than just crashing.\r\n */\r\n(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()};o.toString=function(){if(o.a>=1){return\"rgb(\"+[o.r,o.g,o.b].join(\",\")+\")\"}else{return\"rgba(\"+[o.r,o.g,o.b,o.a].join(\",\")+\")\"}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=\"\"&&c!=\"transparent\")break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),\"body\"));if(c==\"rgba(0, 0, 0, 0)\")c=\"transparent\";return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name==\"transparent\")return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);\r\n\r\n// the actual Flot code\r\n(function($) {\r\n\r\n\t// Cache the prototype hasOwnProperty for faster access\r\n\r\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\n    // A shim to provide 'detach' to jQuery versions prior to 1.4.  Using a DOM\r\n    // operation produces the same effect as detach, i.e. removing the element\r\n    // without touching its jQuery data.\r\n\r\n    // Do not merge this into Flot 0.9, since it requires jQuery 1.4.4+.\r\n\r\n    if (!$.fn.detach) {\r\n        $.fn.detach = function() {\r\n            return this.each(function() {\r\n                if (this.parentNode) {\r\n                    this.parentNode.removeChild( this );\r\n                }\r\n            });\r\n        };\r\n    }\r\n\r\n\t///////////////////////////////////////////////////////////////////////////\r\n\t// The Canvas object is a wrapper around an HTML5 <canvas> tag.\r\n\t//\r\n\t// @constructor\r\n\t// @param {string} cls List of classes to apply to the canvas.\r\n\t// @param {element} container Element onto which to append the canvas.\r\n\t//\r\n\t// Requiring a container is a little iffy, but unfortunately canvas\r\n\t// operations don't work unless the canvas is attached to the DOM.\r\n\r\n\tfunction Canvas(cls, container) {\r\n\r\n\t\tvar element = container.children(\".\" + cls)[0];\r\n\r\n\t\tif (element == null) {\r\n\r\n\t\t\telement = document.createElement(\"canvas\");\r\n\t\t\telement.className = cls;\r\n\r\n\t\t\t$(element).css({ direction: \"ltr\", position: \"absolute\", left: 0, top: 0 })\r\n\t\t\t\t.appendTo(container);\r\n\r\n\t\t\t// If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas\r\n\r\n\t\t\tif (!element.getContext) {\r\n\t\t\t\tif (window.G_vmlCanvasManager) {\r\n\t\t\t\t\telement = window.G_vmlCanvasManager.initElement(element);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.element = element;\r\n\r\n\t\tvar context = this.context = element.getContext(\"2d\");\r\n\r\n\t\t// Determine the screen's ratio of physical to device-independent\r\n\t\t// pixels.  This is the ratio between the canvas width that the browser\r\n\t\t// advertises and the number of pixels actually present in that space.\r\n\r\n\t\t// The iPhone 4, for example, has a device-independent width of 320px,\r\n\t\t// but its screen is actually 640px wide.  It therefore has a pixel\r\n\t\t// ratio of 2, while most normal devices have a ratio of 1.\r\n\r\n\t\tvar devicePixelRatio = window.devicePixelRatio || 1,\r\n\t\t\tbackingStoreRatio =\r\n\t\t\t\tcontext.webkitBackingStorePixelRatio ||\r\n\t\t\t\tcontext.mozBackingStorePixelRatio ||\r\n\t\t\t\tcontext.msBackingStorePixelRatio ||\r\n\t\t\t\tcontext.oBackingStorePixelRatio ||\r\n\t\t\t\tcontext.backingStorePixelRatio || 1;\r\n\r\n\t\tthis.pixelRatio = devicePixelRatio / backingStoreRatio;\r\n\r\n\t\t// Size the canvas to match the internal dimensions of its container\r\n\r\n\t\tthis.resize(container.width(), container.height());\r\n\r\n\t\t// Collection of HTML div layers for text overlaid onto the canvas\r\n\r\n\t\tthis.textContainer = null;\r\n\t\tthis.text = {};\r\n\r\n\t\t// Cache of text fragments and metrics, so we can avoid expensively\r\n\t\t// re-calculating them when the plot is re-rendered in a loop.\r\n\r\n\t\tthis._textCache = {};\r\n\t\tthis._textSizeCache = window.flotTextSizeCache = window.flotTextSizeCache || {};\r\n\t}\r\n\r\n\t// Resizes the canvas to the given dimensions.\r\n\t//\r\n\t// @param {number} width New width of the canvas, in pixels.\r\n\t// @param {number} width New height of the canvas, in pixels.\r\n\r\n\tCanvas.prototype.resize = function(width, height) {\r\n\r\n\t\tif (width <= 0 || height <= 0) {\r\n\t\t\tthrow new Error(\"Invalid dimensions for plot, width = \" + width + \", height = \" + height);\r\n\t\t}\r\n\r\n\t\tvar element = this.element,\r\n\t\t\tcontext = this.context,\r\n\t\t\tpixelRatio = this.pixelRatio;\r\n\r\n\t\t// Resize the canvas, increasing its density based on the display's\r\n\t\t// pixel ratio; basically giving it more pixels without increasing the\r\n\t\t// size of its element, to take advantage of the fact that retina\r\n\t\t// displays have that many more pixels in the same advertised space.\r\n\r\n\t\t// Resizing should reset the state (excanvas seems to be buggy though)\r\n\r\n\t\tif (this.width != width) {\r\n\t\t\telement.width = width * pixelRatio;\r\n\t\t\telement.style.width = width + \"px\";\r\n\t\t\tthis.width = width;\r\n\t\t}\r\n\r\n\t\tif (this.height != height) {\r\n\t\t\telement.height = height * pixelRatio;\r\n\t\t\telement.style.height = height + \"px\";\r\n\t\t\tthis.height = height;\r\n\t\t}\r\n\r\n\t\t// Save the context, so we can reset in case we get replotted.  The\r\n\t\t// restore ensure that we're really back at the initial state, and\r\n\t\t// should be safe even if we haven't saved the initial state yet.\r\n\r\n\t\tcontext.restore();\r\n\t\tcontext.save();\r\n\r\n\t\t// Scale the coordinate space to match the display density; so even though we\r\n\t\t// may have twice as many pixels, we still want lines and other drawing to\r\n\t\t// appear at the same size; the extra pixels will just make them crisper.\r\n\r\n\t\tcontext.scale(pixelRatio, pixelRatio);\r\n\t};\r\n\r\n\t// Clears the entire canvas area, not including any overlaid HTML text\r\n\r\n\tCanvas.prototype.clear = function() {\r\n\t\tthis.context.clearRect(0, 0, this.width, this.height);\r\n\t};\r\n\r\n\t// Finishes rendering the canvas, including managing the text overlay.\r\n\r\n\tCanvas.prototype.render = function() {\r\n\r\n\t\tvar cache = this._textCache;\r\n\r\n\t\t// For each text layer, add elements marked as active that haven't\r\n\t\t// already been rendered, and remove those that are no longer active.\r\n\r\n\t\tfor (var layerKey in cache) {\r\n\t\t\tif (hasOwnProperty.call(cache, layerKey)) {\r\n\r\n\t\t\t\tvar layer = this.getTextLayer(layerKey),\r\n\t\t\t\t\tlayerCache = cache[layerKey];\r\n\r\n\t\t\t\tlayer.hide();\r\n\r\n\t\t\t\tfor (var styleKey in layerCache) {\r\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\r\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\r\n\t\t\t\t\t\tfor (var key in styleCache) {\r\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\r\n\r\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\r\n\r\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\t\t\t\t\t\t\tif (position.active) {\r\n\t\t\t\t\t\t\t\t\t\tif (!position.rendered) {\r\n\t\t\t\t\t\t\t\t\t\t\tlayer.append(position.element);\r\n\t\t\t\t\t\t\t\t\t\t\tposition.rendered = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tpositions.splice(i--, 1);\r\n\t\t\t\t\t\t\t\t\t\tif (position.rendered) {\r\n\t\t\t\t\t\t\t\t\t\t\tposition.element.detach();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (positions.length == 0) {\r\n\t\t\t\t\t\t\t\t\tdelete styleCache[key];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.show();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Creates (if necessary) and returns the text overlay container.\r\n\t//\r\n\t// @param {string} classes String of space-separated CSS classes used to\r\n\t//     uniquely identify the text layer.\r\n\t// @return {object} The jQuery-wrapped text-layer div.\r\n\r\n\tCanvas.prototype.getTextLayer = function(classes) {\r\n\r\n\t\tvar layer = this.text[classes];\r\n\r\n\t\t// Create the text layer if it doesn't exist\r\n\r\n\t\tif (layer == null) {\r\n\r\n\t\t\t// Create the text layer container, if it doesn't exist\r\n\r\n\t\t\tif (this.textContainer == null) {\r\n\t\t\t\tthis.textContainer = $(\"<div class='flot-text flot-temp-elem'></div>\")\r\n\t\t\t\t\t.css({\r\n\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t'font-size': \"smaller\",\r\n\t\t\t\t\t\tcolor: \"#545454\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.insertAfter(this.element);\r\n\t\t\t}\r\n\r\n\t\t\tlayer = this.text[classes] = $(\"<div></div>\")\r\n\t\t\t\t.addClass(classes)\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\tright: 0\r\n\t\t\t\t})\r\n\t\t\t\t.appendTo(this.textContainer);\r\n\t\t}\r\n\r\n\t\treturn layer;\r\n\t};\r\n\r\n\t// Creates (if necessary) and returns a text info object.\r\n\t//\r\n\t// The object looks like this:\r\n\t//\r\n\t// {\r\n\t//     width: Width of the text's wrapper div.\r\n\t//     height: Height of the text's wrapper div.\r\n\t//     element: The jQuery-wrapped HTML div containing the text.\r\n\t//     positions: Array of positions at which this text is drawn.\r\n\t// }\r\n\t//\r\n\t// The positions array contains objects that look like this:\r\n\t//\r\n\t// {\r\n\t//     active: Flag indicating whether the text should be visible.\r\n\t//     rendered: Flag indicating whether the text is currently visible.\r\n\t//     element: The jQuery-wrapped HTML div containing the text.\r\n\t//     x: X coordinate at which to draw the text.\r\n\t//     y: Y coordinate at which to draw the text.\r\n\t// }\r\n\t//\r\n\t// Each position after the first receives a clone of the original element.\r\n\t//\r\n\t// The idea is that that the width, height, and general 'identity' of the\r\n\t// text is constant no matter where it is placed; the placements are a\r\n\t// secondary property.\r\n\t//\r\n\t// Canvas maintains a cache of recently-used text info objects; getTextInfo\r\n\t// either returns the cached element or creates a new entry.\r\n\t//\r\n\t// @param {string} layer A string of space-separated CSS classes uniquely\r\n\t//     identifying the layer containing this text.\r\n\t// @param {string} text Text string to retrieve info for.\r\n\t// @param {(string|object)=} font Either a string of space-separated CSS\r\n\t//     classes or a font-spec object, defining the text's font and style.\r\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\r\n\t//     Angle is currently unused, it will be implemented in the future.\r\n\t// @param {number=} width Maximum width of the text before it wraps.\r\n\t// @return {object} a text info object.\r\n\r\n\tCanvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\r\n\r\n\t\tvar textStyle, layerCache, styleCache, info;\r\n\r\n\t\t// Cast the value to a string, in case we were given a number or such\r\n\r\n\t\ttext = \"\" + text;\r\n\r\n\t\t// If the font is a font-spec object, generate a CSS font definition\r\n\r\n\t\tif (typeof font === \"object\") {\r\n\t\t\ttextStyle = font.style + \" \" + font.variant + \" \" + font.weight + \" \" + font.size + \"px/\" + font.lineHeight + \"px \" + font.family;\r\n\t\t} else {\r\n\t\t\ttextStyle = font;\r\n\t\t}\r\n\r\n\t\t// Retrieve (or create) the cache for the text's layer and styles\r\n\r\n\t\tlayerCache = this._textCache[layer];\r\n\r\n\t\tif (layerCache == null) {\r\n\t\t\tlayerCache = this._textCache[layer] = {};\r\n\t\t}\r\n\r\n\t\tstyleCache = layerCache[textStyle];\r\n\r\n\t\tif (styleCache == null) {\r\n\t\t\tstyleCache = layerCache[textStyle] = {};\r\n\t\t}\r\n\r\n\t\tinfo = styleCache[text];\r\n\r\n\t\t// If we can't find a matching element in our cache, create a new one\r\n\r\n\t\tif (info == null) {\r\n\r\n\t\t\tvar element = $(\"<div></div>\").html(text)\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t'max-width': width,\r\n\t\t\t\t\ttop: -9999\r\n\t\t\t\t})\r\n\t\t\t\t.appendTo(this.getTextLayer(layer));\r\n\r\n\t\t\tif (typeof font === \"object\") {\r\n\t\t\t\telement.css({\r\n\t\t\t\t\tfont: textStyle,\r\n\t\t\t\t\tcolor: font.color\r\n\t\t\t\t});\r\n\t\t\t} else if (typeof font === \"string\") {\r\n\t\t\t\telement.addClass(font);\r\n\t\t\t}\r\n\r\n      info = styleCache[text] = { element: element, positions: [] };\r\n\r\n      var size = this._textSizeCache[text];\r\n\t\t\tif (size) {\r\n        info.width = size.width;\r\n        info.height = size.height;\r\n\t\t\t} else {\r\n        info.width = element.outerWidth(true);\r\n        info.height = element.outerHeight(true);\r\n        this._textSizeCache[text] = { width: info.width, height: info.height };\r\n\t\t\t}\r\n\t\t\telement.detach();\r\n\t\t}\r\n\r\n\t\treturn info;\r\n\t};\r\n\r\n\t// Adds a text string to the canvas text overlay.\r\n\t//\r\n\t// The text isn't drawn immediately; it is marked as rendering, which will\r\n\t// result in its addition to the canvas on the next render pass.\r\n\t//\r\n\t// @param {string} layer A string of space-separated CSS classes uniquely\r\n\t//     identifying the layer containing this text.\r\n\t// @param {number} x X coordinate at which to draw the text.\r\n\t// @param {number} y Y coordinate at which to draw the text.\r\n\t// @param {string} text Text string to draw.\r\n\t// @param {(string|object)=} font Either a string of space-separated CSS\r\n\t//     classes or a font-spec object, defining the text's font and style.\r\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\r\n\t//     Angle is currently unused, it will be implemented in the future.\r\n\t// @param {number=} width Maximum width of the text before it wraps.\r\n\t// @param {string=} halign Horizontal alignment of the text; either \"left\",\r\n\t//     \"center\" or \"right\".\r\n\t// @param {string=} valign Vertical alignment of the text; either \"top\",\r\n\t//     \"middle\" or \"bottom\".\r\n\r\n\tCanvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign) {\r\n\r\n\t\tvar info = this.getTextInfo(layer, text, font, angle, width),\r\n\t\t\tpositions = info.positions;\r\n\r\n\t\t// Tweak the div's position to match the text's alignment\r\n\r\n\t\tif (halign == \"center\") {\r\n\t\t\tx -= info.width / 2;\r\n\t\t} else if (halign == \"right\") {\r\n\t\t\tx -= info.width;\r\n\t\t}\r\n\r\n\t\tif (valign == \"middle\") {\r\n\t\t\ty -= info.height / 2;\r\n\t\t} else if (valign == \"bottom\") {\r\n\t\t\ty -= info.height;\r\n\t\t}\r\n\r\n\t\t// Determine whether this text already exists at this position.\r\n\t\t// If so, mark it for inclusion in the next render pass.\r\n\r\n\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\tif (position.x == x && position.y == y) {\r\n\t\t\t\tposition.active = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If the text doesn't exist at this position, create a new entry\r\n\r\n\t\t// For the very first position we'll re-use the original element,\r\n\t\t// while for subsequent ones we'll clone it.\r\n\r\n\t\tposition = {\r\n\t\t\tactive: true,\r\n\t\t\trendered: false,\r\n\t\t\telement: positions.length ? info.element.clone() : info.element,\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t};\r\n\r\n\t\tpositions.push(position);\r\n\r\n\t\t// Move the element to its final position within the container\r\n\r\n\t\tposition.element.css({\r\n\t\t\ttop: Math.round(y),\r\n\t\t\tleft: Math.round(x),\r\n\t\t\t'text-align': halign\t// In case the text wraps\r\n\t\t});\r\n\t};\r\n\r\n\t// Removes one or more text strings from the canvas text overlay.\r\n\t//\r\n\t// If no parameters are given, all text within the layer is removed.\r\n\t//\r\n\t// Note that the text is not immediately removed; it is simply marked as\r\n\t// inactive, which will result in its removal on the next render pass.\r\n\t// This avoids the performance penalty for 'clear and redraw' behavior,\r\n\t// where we potentially get rid of all text on a layer, but will likely\r\n\t// add back most or all of it later, as when redrawing axes, for example.\r\n\t//\r\n\t// @param {string} layer A string of space-separated CSS classes uniquely\r\n\t//     identifying the layer containing this text.\r\n\t// @param {number=} x X coordinate of the text.\r\n\t// @param {number=} y Y coordinate of the text.\r\n\t// @param {string=} text Text string to remove.\r\n\t// @param {(string|object)=} font Either a string of space-separated CSS\r\n\t//     classes or a font-spec object, defining the text's font and style.\r\n\t// @param {number=} angle Angle at which the text is rotated, in degrees.\r\n\t//     Angle is currently unused, it will be implemented in the future.\r\n\r\n\tCanvas.prototype.removeText = function(layer, x, y, text, font, angle) {\r\n\t\tif (text == null) {\r\n\t\t\tvar layerCache = this._textCache[layer];\r\n\t\t\tif (layerCache != null) {\r\n\t\t\t\tfor (var styleKey in layerCache) {\r\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\r\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\r\n\t\t\t\t\t\tfor (var key in styleCache) {\r\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\r\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\r\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\t\t\t\t\t\t\tposition.active = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar positions = this.getTextInfo(layer, text, font, angle).positions;\r\n\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\t\tif (position.x == x && position.y == y) {\r\n\t\t\t\t\tposition.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t///////////////////////////////////////////////////////////////////////////\r\n\t// The top-level container for the entire plot.\r\n\r\n    function Plot(placeholder, data_, options_, plugins) {\r\n        // data is on the form:\r\n        //   [ series1, series2 ... ]\r\n        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\r\n        // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\r\n\r\n        var series = [],\r\n            options = {\r\n                // the color theme used for graphs\r\n                colors: [\"#edc240\", \"#afd8f8\", \"#cb4b4b\", \"#4da74d\", \"#9440ed\"],\r\n                legend: {\r\n                    show: true,\r\n                    noColumns: 1, // number of colums in legend table\r\n                    labelFormatter: null, // fn: string -> string\r\n                    labelBoxBorderColor: \"#ccc\", // border color for the little label boxes\r\n                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph\r\n                    position: \"ne\", // position of default legend container within plot\r\n                    margin: 5, // distance from grid edge to default legend container within plot\r\n                    backgroundColor: null, // null means auto-detect\r\n                    backgroundOpacity: 0.85, // set to 0 to avoid background\r\n                    sorted: null    // default to no legend sorting\r\n                },\r\n                xaxis: {\r\n                    show: null, // null = auto-detect, true = always, false = never\r\n                    position: \"bottom\", // or \"top\"\r\n                    mode: null, // null or \"time\"\r\n                    font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\r\n                    color: null, // base color, labels, ticks\r\n                    tickColor: null, // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\r\n                    transform: null, // null or f: number -> number to transform axis\r\n                    inverseTransform: null, // if transform is set, this should be the inverse function\r\n                    min: null, // min. value to show, null means set automatically\r\n                    max: null, // max. value to show, null means set automatically\r\n                    autoscaleMargin: null, // margin in % to add if auto-setting min/max\r\n                    ticks: null, // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\r\n                    tickFormatter: null, // fn: number -> string\r\n                    labelWidth: null, // size of tick labels in pixels\r\n                    labelHeight: null,\r\n                    reserveSpace: null, // whether to reserve space even if axis isn't shown\r\n                    tickLength: null, // size in pixels of ticks, or \"full\" for whole line\r\n                    alignTicksWithAxis: null, // axis number or null for no sync\r\n                    tickDecimals: null, // no. of decimals, null means auto\r\n                    tickSize: null, // number or [number, \"unit\"]\r\n                    minTickSize: null // number or [number, \"unit\"]\r\n                },\r\n                yaxis: {\r\n                    autoscaleMargin: 0.02,\r\n                    position: \"left\" // or \"right\"\r\n                },\r\n                xaxes: [],\r\n                yaxes: [],\r\n                series: {\r\n                    points: {\r\n                        show: false,\r\n                        radius: 3,\r\n                        lineWidth: 2, // in pixels\r\n                        fill: true,\r\n                        fillColor: \"#ffffff\",\r\n                        symbol: \"circle\" // or callback\r\n                    },\r\n                    lines: {\r\n                        // we don't put in show: false so we can see\r\n                        // whether lines were actively disabled\r\n                        lineWidth: 2, // in pixels\r\n                        fill: false,\r\n                        fillColor: null,\r\n                        steps: false\r\n                        // Omit 'zero', so we can later default its value to\r\n                        // match that of the 'fill' option.\r\n                    },\r\n                    bars: {\r\n                        show: false,\r\n                        lineWidth: 2, // in pixels\r\n                        barWidth: 1, // in units of the x axis\r\n                        fill: true,\r\n                        fillColor: null,\r\n                        align: \"left\", // \"left\", \"right\", or \"center\"\r\n                        horizontal: false,\r\n                        zero: true\r\n                    },\r\n                    shadowSize: 3,\r\n                    highlightColor: null\r\n                },\r\n                grid: {\r\n                    show: true,\r\n                    aboveData: false,\r\n                    color: \"#545454\", // primary color used for outline and labels\r\n                    backgroundColor: null, // null for transparent, else color\r\n                    borderColor: null, // set if different from the grid color\r\n                    tickColor: null, // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\r\n                    margin: 0, // distance from the canvas edge to the grid\r\n                    labelMargin: 5, // in pixels\r\n                    eventSectionHeight: 0, // space for event section\r\n                    axisMargin: 8, // in pixels\r\n                    borderWidth: 2, // in pixels\r\n                    minBorderMargin: null, // in pixels, null means taken from points radius\r\n                    markings: null, // array of ranges or fn: axes -> array of ranges\r\n                    markingsColor: \"#f4f4f4\",\r\n                    markingsLineWidth: 2,\r\n                    // interactive stuff\r\n                    clickable: false,\r\n                    hoverable: false,\r\n                    autoHighlight: true, // highlight in case mouse is near\r\n                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item\r\n                },\r\n                interaction: {\r\n                    redrawOverlayInterval: 1000/60 // time between updates, -1 means in same flow\r\n                },\r\n                hooks: {}\r\n            },\r\n        surface = null,     // the canvas for the plot itself\r\n        overlay = null,     // canvas for interactive stuff on top of plot\r\n        eventHolder = null, // jQuery object that events should be bound to\r\n        ctx = null, octx = null,\r\n        xaxes = [], yaxes = [],\r\n        plotOffset = { left: 0, right: 0, top: 0, bottom: 0},\r\n        plotWidth = 0, plotHeight = 0,\r\n        hooks = {\r\n            processOptions: [],\r\n            processRawData: [],\r\n            processDatapoints: [],\r\n            processOffset: [],\r\n            processRange: [],\r\n            drawBackground: [],\r\n            drawSeries: [],\r\n            draw: [],\r\n            bindEvents: [],\r\n            drawOverlay: [],\r\n            shutdown: []\r\n        },\r\n        plot = this;\r\n\r\n        // public functions\r\n        plot.setData = setData;\r\n        plot.setupGrid = setupGrid;\r\n        plot.draw = draw;\r\n        plot.getPlaceholder = function() { return placeholder; };\r\n        plot.getCanvas = function() { return surface.element; };\r\n        plot.getPlotOffset = function() { return plotOffset; };\r\n        plot.width = function () { return plotWidth; };\r\n        plot.height = function () { return plotHeight; };\r\n        plot.offset = function () {\r\n            var o = eventHolder.offset();\r\n            o.left += plotOffset.left;\r\n            o.top += plotOffset.top;\r\n            return o;\r\n        };\r\n        plot.getData = function () { return series; };\r\n        plot.getAxes = function () {\r\n            var res = {}, i;\r\n            $.each(xaxes.concat(yaxes), function (_, axis) {\r\n                if (axis)\r\n                    res[axis.direction + (axis.n != 1 ? axis.n : \"\") + \"axis\"] = axis;\r\n            });\r\n            return res;\r\n        };\r\n        plot.getXAxes = function () { return xaxes; };\r\n        plot.getYAxes = function () { return yaxes; };\r\n        plot.c2p = canvasToAxisCoords;\r\n        plot.p2c = axisToCanvasCoords;\r\n        plot.getOptions = function () { return options; };\r\n        plot.highlight = highlight;\r\n        plot.unhighlight = unhighlight;\r\n        plot.triggerRedrawOverlay = triggerRedrawOverlay;\r\n        plot.pointOffset = function(point) {\r\n            return {\r\n                left: parseInt(xaxes[axisNumber(point, \"x\") - 1].p2c(+point.x) + plotOffset.left, 10),\r\n                top: parseInt(yaxes[axisNumber(point, \"y\") - 1].p2c(+point.y) + plotOffset.top, 10)\r\n            };\r\n        };\r\n        plot.shutdown = shutdown;\r\n        plot.destroy = function () {\r\n            shutdown();\r\n            placeholder.removeData(\"plot\").empty();\r\n\r\n            series = [];\r\n            options = null;\r\n            surface = null;\r\n            overlay = null;\r\n            eventHolder = null;\r\n            ctx = null;\r\n            octx = null;\r\n            xaxes = [];\r\n            yaxes = [];\r\n            hooks = null;\r\n            highlights = [];\r\n            plot = null;\r\n        };\r\n        plot.resize = function () {\r\n        \tvar width = placeholder.width(),\r\n        \t\theight = placeholder.height();\r\n            surface.resize(width, height);\r\n            overlay.resize(width, height);\r\n        };\r\n\r\n        // public attributes\r\n        plot.hooks = hooks;\r\n\r\n        // initialize\r\n        initPlugins(plot);\r\n        parseOptions(options_);\r\n        setupCanvases();\r\n        setData(data_);\r\n        setupGrid();\r\n        draw();\r\n        bindEvents();\r\n\r\n\r\n        function executeHooks(hook, args) {\r\n            args = [plot].concat(args);\r\n            for (var i = 0; i < hook.length; ++i)\r\n                hook[i].apply(this, args);\r\n        }\r\n\r\n        function initPlugins() {\r\n\r\n            // References to key classes, allowing plugins to modify them\r\n\r\n            var classes = {\r\n                Canvas: Canvas\r\n            };\r\n\r\n            for (var i = 0; i < plugins.length; ++i) {\r\n                var p = plugins[i];\r\n                p.init(plot, classes);\r\n                if (p.options)\r\n                    $.extend(true, options, p.options);\r\n            }\r\n        }\r\n\r\n        function parseOptions(opts) {\r\n\r\n            $.extend(true, options, opts);\r\n\r\n            // $.extend merges arrays, rather than replacing them.  When less\r\n            // colors are provided than the size of the default palette, we\r\n            // end up with those colors plus the remaining defaults, which is\r\n            // not expected behavior; avoid it by replacing them here.\r\n\r\n            if (opts && opts.colors) {\r\n            \toptions.colors = opts.colors;\r\n            }\r\n\r\n            if (options.xaxis.color == null)\r\n                options.xaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n            if (options.yaxis.color == null)\r\n                options.yaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n\r\n            if (options.xaxis.tickColor == null) // grid.tickColor for back-compatibility\r\n                options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\r\n            if (options.yaxis.tickColor == null) // grid.tickColor for back-compatibility\r\n                options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\r\n\r\n            if (options.grid.borderColor == null)\r\n                options.grid.borderColor = options.grid.color;\r\n            if (options.grid.tickColor == null)\r\n                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n\r\n            // Fill in defaults for axis options, including any unspecified\r\n            // font-spec fields, if a font-spec was provided.\r\n\r\n            // If no x/y axis options were provided, create one of each anyway,\r\n            // since the rest of the code assumes that they exist.\r\n\r\n            var i, axisOptions, axisCount,\r\n                fontSize = placeholder.css(\"font-size\"),\r\n                fontSizeDefault = fontSize ? +fontSize.replace(\"px\", \"\") : 13,\r\n                fontDefaults = {\r\n                    style: placeholder.css(\"font-style\"),\r\n                    size: Math.round(0.8 * fontSizeDefault),\r\n                    variant: placeholder.css(\"font-variant\"),\r\n                    weight: placeholder.css(\"font-weight\"),\r\n                    family: placeholder.css(\"font-family\")\r\n                };\r\n\r\n            axisCount = options.xaxes.length || 1;\r\n            for (i = 0; i < axisCount; ++i) {\r\n\r\n                axisOptions = options.xaxes[i];\r\n                if (axisOptions && !axisOptions.tickColor) {\r\n                    axisOptions.tickColor = axisOptions.color;\r\n                }\r\n\r\n                axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\r\n                options.xaxes[i] = axisOptions;\r\n\r\n                if (axisOptions.font) {\r\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\r\n                    if (!axisOptions.font.color) {\r\n                        axisOptions.font.color = axisOptions.color;\r\n                    }\r\n                    if (!axisOptions.font.lineHeight) {\r\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\r\n                    }\r\n                }\r\n            }\r\n\r\n            axisCount = options.yaxes.length || 1;\r\n            for (i = 0; i < axisCount; ++i) {\r\n\r\n                axisOptions = options.yaxes[i];\r\n                if (axisOptions && !axisOptions.tickColor) {\r\n                    axisOptions.tickColor = axisOptions.color;\r\n                }\r\n\r\n                axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\r\n                options.yaxes[i] = axisOptions;\r\n\r\n                if (axisOptions.font) {\r\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\r\n                    if (!axisOptions.font.color) {\r\n                        axisOptions.font.color = axisOptions.color;\r\n                    }\r\n                    if (!axisOptions.font.lineHeight) {\r\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // backwards compatibility, to be removed in future\r\n            if (options.xaxis.noTicks && options.xaxis.ticks == null)\r\n                options.xaxis.ticks = options.xaxis.noTicks;\r\n            if (options.yaxis.noTicks && options.yaxis.ticks == null)\r\n                options.yaxis.ticks = options.yaxis.noTicks;\r\n            if (options.x2axis) {\r\n                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);\r\n                options.xaxes[1].position = \"top\";\r\n                // Override the inherit to allow the axis to auto-scale\r\n                if (options.x2axis.min == null) {\r\n                    options.xaxes[1].min = null;\r\n                }\r\n                if (options.x2axis.max == null) {\r\n                    options.xaxes[1].max = null;\r\n                }\r\n            }\r\n            if (options.y2axis) {\r\n                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);\r\n                options.yaxes[1].position = \"right\";\r\n                // Override the inherit to allow the axis to auto-scale\r\n                if (options.y2axis.min == null) {\r\n                    options.yaxes[1].min = null;\r\n                }\r\n                if (options.y2axis.max == null) {\r\n                    options.yaxes[1].max = null;\r\n                }\r\n            }\r\n            if (options.grid.coloredAreas)\r\n                options.grid.markings = options.grid.coloredAreas;\r\n            if (options.grid.coloredAreasColor)\r\n                options.grid.markingsColor = options.grid.coloredAreasColor;\r\n            if (options.lines)\r\n                $.extend(true, options.series.lines, options.lines);\r\n            if (options.points)\r\n                $.extend(true, options.series.points, options.points);\r\n            if (options.bars)\r\n                $.extend(true, options.series.bars, options.bars);\r\n            if (options.shadowSize != null)\r\n                options.series.shadowSize = options.shadowSize;\r\n            if (options.highlightColor != null)\r\n                options.series.highlightColor = options.highlightColor;\r\n\r\n            // save options on axes for future reference\r\n            for (i = 0; i < options.xaxes.length; ++i)\r\n                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\r\n            for (i = 0; i < options.yaxes.length; ++i)\r\n                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\r\n\r\n            // add hooks from options\r\n            for (var n in hooks)\r\n                if (options.hooks[n] && options.hooks[n].length)\r\n                    hooks[n] = hooks[n].concat(options.hooks[n]);\r\n\r\n            executeHooks(hooks.processOptions, [options]);\r\n        }\r\n\r\n        function setData(d) {\r\n            series = parseData(d);\r\n            fillInSeriesOptions();\r\n            processData();\r\n        }\r\n\r\n        function parseData(d) {\r\n            var res = [];\r\n            for (var i = 0; i < d.length; ++i) {\r\n                var s = $.extend(true, {}, options.series);\r\n\r\n                if (d[i].data != null) {\r\n                    s.data = d[i].data; // move the data instead of deep-copy\r\n                    delete d[i].data;\r\n\r\n                    $.extend(true, s, d[i]);\r\n\r\n                    d[i].data = s.data;\r\n                }\r\n                else\r\n                    s.data = d[i];\r\n                res.push(s);\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        function axisNumber(obj, coord) {\r\n            var a = obj[coord + \"axis\"];\r\n            if (typeof a == \"object\") // if we got a real axis, extract number\r\n                a = a.n;\r\n            if (typeof a != \"number\")\r\n                a = 1; // default to first axis\r\n            return a;\r\n        }\r\n\r\n        function allAxes() {\r\n            // return flat array without annoying null entries\r\n            return $.grep(xaxes.concat(yaxes), function (a) { return a; });\r\n        }\r\n\r\n        function canvasToAxisCoords(pos) {\r\n            // return an object with x/y corresponding to all used axes\r\n            var res = {}, i, axis;\r\n            for (i = 0; i < xaxes.length; ++i) {\r\n                axis = xaxes[i];\r\n                if (axis && axis.used)\r\n                    res[\"x\" + axis.n] = axis.c2p(pos.left);\r\n            }\r\n\r\n            for (i = 0; i < yaxes.length; ++i) {\r\n                axis = yaxes[i];\r\n                if (axis && axis.used)\r\n                    res[\"y\" + axis.n] = axis.c2p(pos.top);\r\n            }\r\n\r\n            if (res.x1 !== undefined)\r\n                res.x = res.x1;\r\n            if (res.y1 !== undefined)\r\n                res.y = res.y1;\r\n\r\n            return res;\r\n        }\r\n\r\n        function axisToCanvasCoords(pos) {\r\n            // get canvas coords from the first pair of x/y found in pos\r\n            var res = {}, i, axis, key;\r\n\r\n            for (i = 0; i < xaxes.length; ++i) {\r\n                axis = xaxes[i];\r\n                if (axis && axis.used) {\r\n                    key = \"x\" + axis.n;\r\n                    if (pos[key] == null && axis.n == 1)\r\n                        key = \"x\";\r\n\r\n                    if (pos[key] != null) {\r\n                        res.left = axis.p2c(pos[key]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (i = 0; i < yaxes.length; ++i) {\r\n                axis = yaxes[i];\r\n                if (axis && axis.used) {\r\n                    key = \"y\" + axis.n;\r\n                    if (pos[key] == null && axis.n == 1)\r\n                        key = \"y\";\r\n\r\n                    if (pos[key] != null) {\r\n                        res.top = axis.p2c(pos[key]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        function getOrCreateAxis(axes, number) {\r\n            if (!axes[number - 1])\r\n                axes[number - 1] = {\r\n                    n: number, // save the number for future reference\r\n                    direction: axes == xaxes ? \"x\" : \"y\",\r\n                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)\r\n                };\r\n\r\n            return axes[number - 1];\r\n        }\r\n\r\n        function fillInSeriesOptions() {\r\n\r\n            var neededColors = series.length, maxIndex = -1, i;\r\n\r\n            // Subtract the number of series that already have fixed colors or\r\n            // color indexes from the number that we still need to generate.\r\n\r\n            for (i = 0; i < series.length; ++i) {\r\n                var sc = series[i].color;\r\n                if (sc != null) {\r\n                    neededColors--;\r\n                    if (typeof sc == \"number\" && sc > maxIndex) {\r\n                        maxIndex = sc;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // If any of the series have fixed color indexes, then we need to\r\n            // generate at least as many colors as the highest index.\r\n\r\n            if (neededColors <= maxIndex) {\r\n                neededColors = maxIndex + 1;\r\n            }\r\n\r\n            // Generate all the colors, using first the option colors and then\r\n            // variations on those colors once they're exhausted.\r\n\r\n            var c, colors = [], colorPool = options.colors,\r\n                colorPoolSize = colorPool.length, variation = 0;\r\n\r\n            for (i = 0; i < neededColors; i++) {\r\n\r\n                c = $.color.parse(colorPool[i % colorPoolSize] || \"#666\");\r\n\r\n                // Each time we exhaust the colors in the pool we adjust\r\n                // a scaling factor used to produce more variations on\r\n                // those colors. The factor alternates negative/positive\r\n                // to produce lighter/darker colors.\r\n\r\n                // Reset the variation after every few cycles, or else\r\n                // it will end up producing only white or black colors.\r\n\r\n                if (i % colorPoolSize == 0 && i) {\r\n                    if (variation >= 0) {\r\n                        if (variation < 0.5) {\r\n                            variation = -variation - 0.2;\r\n                        } else variation = 0;\r\n                    } else variation = -variation;\r\n                }\r\n\r\n                colors[i] = c.scale('rgb', 1 + variation);\r\n            }\r\n\r\n            // Finalize the series options, filling in their colors\r\n\r\n            var colori = 0, s;\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n\r\n                // assign colors\r\n                if (s.color == null) {\r\n                    s.color = colors[colori].toString();\r\n                    ++colori;\r\n                }\r\n                else if (typeof s.color == \"number\")\r\n                    s.color = colors[s.color].toString();\r\n\r\n                // turn on lines automatically in case nothing is set\r\n                if (s.lines.show == null) {\r\n                    var v, show = true;\r\n                    for (v in s)\r\n                        if (s[v] && s[v].show) {\r\n                            show = false;\r\n                            break;\r\n                        }\r\n                    if (show)\r\n                        s.lines.show = true;\r\n                }\r\n\r\n                // If nothing was provided for lines.zero, default it to match\r\n                // lines.fill, since areas by default should extend to zero.\r\n\r\n                if (s.lines.zero == null) {\r\n                    s.lines.zero = !!s.lines.fill;\r\n                }\r\n\r\n                // setup axes\r\n                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, \"x\"));\r\n                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, \"y\"));\r\n            }\r\n        }\r\n\r\n        function processData() {\r\n            var topSentry = Number.POSITIVE_INFINITY,\r\n                bottomSentry = Number.NEGATIVE_INFINITY,\r\n                fakeInfinity = Number.MAX_VALUE,\r\n                i, j, k, m, length,\r\n                s, points, ps, x, y, axis, val, f, p,\r\n                data, format;\r\n\r\n            function updateAxis(axis, min, max) {\r\n                if (min < axis.datamin && min != -fakeInfinity)\r\n                    axis.datamin = min;\r\n                if (max > axis.datamax && max != fakeInfinity)\r\n                    axis.datamax = max;\r\n            }\r\n\r\n            $.each(allAxes(), function (_, axis) {\r\n                // init axis\r\n                axis.datamin = topSentry;\r\n                axis.datamax = bottomSentry;\r\n                axis.used = false;\r\n            });\r\n\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                s.datapoints = { points: [] };\r\n\r\n                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);\r\n            }\r\n\r\n            // first pass: clean and copy data\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n\r\n                data = s.data;\r\n                format = s.datapoints.format;\r\n\r\n                if (!format) {\r\n                    format = [];\r\n                    // find out how to copy\r\n                    format.push({ x: true, number: true, required: true });\r\n                    format.push({ y: true, number: true, required: true });\r\n\r\n                    if (s.stack || s.bars.show || (s.lines.show && s.lines.fill)) {\r\n                        var autoscale = !!((s.bars.show && s.bars.zero) || (s.lines.show && s.lines.zero));\r\n                        format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: autoscale });\r\n                        if (s.bars.horizontal) {\r\n                            delete format[format.length - 1].y;\r\n                            format[format.length - 1].x = true;\r\n                        }\r\n                    }\r\n\r\n                    s.datapoints.format = format;\r\n                }\r\n\r\n                if (s.datapoints.pointsize != null)\r\n                    continue; // already filled in\r\n\r\n                s.datapoints.pointsize = format.length;\r\n\r\n                ps = s.datapoints.pointsize;\r\n                points = s.datapoints.points;\r\n\r\n                var insertSteps = s.lines.show && s.lines.steps;\r\n                s.xaxis.used = s.yaxis.used = true;\r\n\r\n                for (j = k = 0; j < data.length; ++j, k += ps) {\r\n                    p = data[j];\r\n\r\n                    var nullify = p == null;\r\n                    if (!nullify) {\r\n                        for (m = 0; m < ps; ++m) {\r\n                            val = p[m];\r\n                            f = format[m];\r\n\r\n                            if (f) {\r\n                                if (f.number && val != null) {\r\n                                    val = +val; // convert to number\r\n                                    if (isNaN(val))\r\n                                        val = null;\r\n                                    else if (val == Infinity)\r\n                                        val = fakeInfinity;\r\n                                    else if (val == -Infinity)\r\n                                        val = -fakeInfinity;\r\n                                }\r\n\r\n                                if (val == null) {\r\n                                    if (f.required)\r\n                                        nullify = true;\r\n\r\n                                    if (f.defaultValue != null)\r\n                                        val = f.defaultValue;\r\n                                }\r\n                            }\r\n\r\n                            points[k + m] = val;\r\n                        }\r\n                    }\r\n\r\n                    if (nullify) {\r\n                        for (m = 0; m < ps; ++m) {\r\n                            val = points[k + m];\r\n                            if (val != null) {\r\n                                f = format[m];\r\n                                // extract min/max info\r\n                                if (f.autoscale !== false) {\r\n                                    if (f.x) {\r\n                                        updateAxis(s.xaxis, val, val);\r\n                                    }\r\n                                    if (f.y) {\r\n                                        updateAxis(s.yaxis, val, val);\r\n                                    }\r\n                                }\r\n                            }\r\n                            points[k + m] = null;\r\n                        }\r\n                    }\r\n\r\n                    if (insertSteps && k > 0 && (!nullify || points[k - ps] != null)) {\r\n                        // copy the point to make room for a middle point\r\n                        for (m = 0; m < ps; ++m)\r\n                            points[k + ps + m] = points[k + m];\r\n\r\n                        // middle point has same y\r\n                        points[k + 1] = points[k - ps + 1] || 0;\r\n\r\n                        // if series has null values, let's give the last !null value a nice step\r\n                        if(nullify)\r\n                        \tpoints[k] = p[0];\r\n\r\n                        // we've added a point, better reflect that\r\n                        k += ps;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // give the hooks a chance to run\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                points = s.datapoints.points;\r\n                ps = s.datapoints.pointsize;\r\n\r\n                // grafana\r\n                if (s.transform === 'negative-Y') {\r\n                  for (j = 0; j < points.length; j += ps) {\r\n                    if (points[j] == null)\r\n                        continue;\r\n\r\n                      val = points[j + 1];\r\n                      points[j + 1] = -val;\r\n                  }\r\n                }\r\n\r\n                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);\r\n            }\r\n\r\n            // second pass: find datamax/datamin for auto-scaling\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                points = s.datapoints.points;\r\n                ps = s.datapoints.pointsize;\r\n                format = s.datapoints.format;\r\n\r\n                var xmin = topSentry, ymin = topSentry,\r\n                    xmax = bottomSentry, ymax = bottomSentry;\r\n\r\n                for (j = 0; j < points.length; j += ps) {\r\n                    if (points[j] == null)\r\n                        continue;\r\n\r\n                    for (m = 0; m < ps; ++m) {\r\n                        val = points[j + m];\r\n                        f = format[m];\r\n                        if (!f || f.autoscale === false || val == fakeInfinity || val == -fakeInfinity)\r\n                            continue;\r\n\r\n                        if (f.x) {\r\n                            if (val < xmin)\r\n                                xmin = val;\r\n                            if (val > xmax)\r\n                                xmax = val;\r\n                        }\r\n                        if (f.y) {\r\n                            if (val < ymin)\r\n                                ymin = val;\r\n                            if (val > ymax)\r\n                                ymax = val;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (s.bars.show) {\r\n                    // make sure we got room for the bar on the dancing floor\r\n                    var delta;\r\n\r\n                    switch (s.bars.align) {\r\n                        case \"left\":\r\n                            delta = 0;\r\n                            break;\r\n                        case \"right\":\r\n                            delta = -s.bars.barWidth;\r\n                            break;\r\n                        default:\r\n                            delta = -s.bars.barWidth / 2;\r\n                    }\r\n\r\n                    if (s.bars.horizontal) {\r\n                        ymin += delta;\r\n                        ymax += delta + s.bars.barWidth;\r\n                    }\r\n                    else {\r\n                        xmin += delta;\r\n                        xmax += delta + s.bars.barWidth;\r\n                    }\r\n                }\r\n\r\n                updateAxis(s.xaxis, xmin, xmax);\r\n                updateAxis(s.yaxis, ymin, ymax);\r\n            }\r\n\r\n            $.each(allAxes(), function (_, axis) {\r\n                if (axis.datamin == topSentry)\r\n                    axis.datamin = null;\r\n                if (axis.datamax == bottomSentry)\r\n                    axis.datamax = null;\r\n            });\r\n        }\r\n\r\n        function setupCanvases() {\r\n            // Make sure the placeholder is clear of everything except canvases\r\n            // from a previous plot in this container that we'll try to re-use.\r\n\r\n            placeholder.find(\".flot-temp-elem\").remove();\r\n\r\n            if (placeholder.css(\"position\") == 'static')\r\n                placeholder.css(\"position\", \"relative\"); // for positioning labels and overlay\r\n\r\n            surface = new Canvas(\"flot-base\", placeholder);\r\n            overlay = new Canvas(\"flot-overlay\", placeholder); // overlay canvas for interactive features\r\n\r\n            ctx = surface.context;\r\n            octx = overlay.context;\r\n\r\n            // define which element we're listening for events on\r\n            eventHolder = $(overlay.element).unbind();\r\n\r\n            // If we're re-using a plot object, shut down the old one\r\n\r\n            var existing = placeholder.data(\"plot\");\r\n\r\n            if (existing) {\r\n                existing.shutdown();\r\n                overlay.clear();\r\n            }\r\n\r\n            // save in case we get replotted\r\n            placeholder.data(\"plot\", plot);\r\n        }\r\n\r\n        function bindEvents() {\r\n            // bind events\r\n            if (options.grid.hoverable) {\r\n                eventHolder.mousemove(onMouseMove);\r\n\r\n                // Use bind, rather than .mouseleave, because we officially\r\n                // still support jQuery 1.2.6, which doesn't define a shortcut\r\n                // for mouseenter or mouseleave.  This was a bug/oversight that\r\n                // was fixed somewhere around 1.3.x.  We can return to using\r\n                // .mouseleave when we drop support for 1.2.6.\r\n\r\n                eventHolder.bind(\"mouseleave\", onMouseLeave);\r\n            }\r\n\r\n            if (options.grid.clickable)\r\n                eventHolder.click(onClick);\r\n\r\n            executeHooks(hooks.bindEvents, [eventHolder]);\r\n        }\r\n\r\n        function shutdown() {\r\n            if (redrawTimeout)\r\n                clearTimeout(redrawTimeout);\r\n\r\n            eventHolder.unbind(\"mousemove\", onMouseMove);\r\n            eventHolder.unbind(\"mouseleave\", onMouseLeave);\r\n            eventHolder.unbind(\"click\", onClick);\r\n\r\n            executeHooks(hooks.shutdown, [eventHolder]);\r\n        }\r\n\r\n        function setTransformationHelpers(axis) {\r\n            // set helper functions on the axis, assumes plot area\r\n            // has been computed already\r\n\r\n            function identity(x) { return x; }\r\n\r\n            var s, m, t = axis.options.transform || identity,\r\n                it = axis.options.inverseTransform;\r\n\r\n            // precompute how much the axis is scaling a point\r\n            // in canvas space\r\n            if (axis.direction == \"x\") {\r\n                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\r\n                m = Math.min(t(axis.max), t(axis.min));\r\n            }\r\n            else {\r\n                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\r\n                s = -s;\r\n                m = Math.max(t(axis.max), t(axis.min));\r\n            }\r\n\r\n            // data point to canvas coordinate\r\n            if (t == identity) // slight optimization\r\n                axis.p2c = function (p) { return (p - m) * s; };\r\n            else\r\n                axis.p2c = function (p) { return (t(p) - m) * s; };\r\n            // canvas coordinate to data point\r\n            if (!it)\r\n                axis.c2p = function (c) { return m + c / s; };\r\n            else\r\n                axis.c2p = function (c) { return it(m + c / s); };\r\n        }\r\n\r\n        function measureTickLabels(axis) {\r\n\r\n            var opts = axis.options,\r\n                ticks = axis.ticks || [],\r\n                labelWidth = opts.labelWidth || 0,\r\n                labelHeight = opts.labelHeight || 0,\r\n                maxWidth = labelWidth || (axis.direction == \"x\" ? Math.floor(surface.width / (ticks.length || 1)) : null),\r\n                legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\r\n                layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\r\n                font = opts.font || \"flot-tick-label tickLabel\";\r\n\r\n            for (var i = 0; i < ticks.length; ++i) {\r\n\r\n                var t = ticks[i];\r\n\r\n                if (!t.label)\r\n                    continue;\r\n\r\n                var info = surface.getTextInfo(layer, t.label, font, null, maxWidth);\r\n\r\n                /// Grafana fix, add +1 to label width\r\n                labelWidth = Math.max(labelWidth, info.width + 1);\r\n                labelHeight = Math.max(labelHeight, info.height);\r\n            }\r\n\r\n            axis.labelWidth = opts.labelWidth || labelWidth;\r\n            axis.labelHeight = opts.labelHeight || labelHeight;\r\n        }\r\n\r\n        function allocateAxisBoxFirstPhase(axis) {\r\n            // find the bounding box of the axis by looking at label\r\n            // widths/heights and ticks, make room by diminishing the\r\n            // plotOffset; this first phase only looks at one\r\n            // dimension per axis, the other dimension depends on the\r\n            // other axes so will have to wait\r\n\r\n            var lw = axis.labelWidth,\r\n                lh = axis.labelHeight,\r\n                pos = axis.options.position,\r\n                isXAxis = axis.direction === \"x\",\r\n                tickLength = axis.options.tickLength,\r\n                axisMargin = options.grid.axisMargin,\r\n                padding = options.grid.labelMargin,\r\n                eventSectionPadding = options.grid.eventSectionHeight,\r\n                innermost = true,\r\n                outermost = true,\r\n                first = true,\r\n                found = false;\r\n\r\n            // Determine the axis's position in its direction and on its side\r\n\r\n            $.each(isXAxis ? xaxes : yaxes, function(i, a) {\r\n                if (a && (a.show || a.reserveSpace)) {\r\n                    if (a === axis) {\r\n                        found = true;\r\n                    } else if (a.options.position === pos) {\r\n                        if (found) {\r\n                            outermost = false;\r\n                        } else {\r\n                            innermost = false;\r\n                        }\r\n                    }\r\n                    if (!found) {\r\n                        first = false;\r\n                    }\r\n                }\r\n            });\r\n\r\n            // The outermost axis on each side has no margin\r\n\r\n            if (outermost) {\r\n                axisMargin = 0;\r\n            }\r\n\r\n            // The ticks for the first axis in each direction stretch across\r\n\r\n            if (tickLength == null) {\r\n                tickLength = first ? \"full\" : 5;\r\n            }\r\n\r\n            if (!isNaN(+tickLength))\r\n                padding += +tickLength;\r\n\r\n            if (isXAxis) {\r\n                // Add space for event section\r\n                lh += padding;\r\n                lh += eventSectionPadding;\r\n\r\n                if (pos == \"bottom\") {\r\n                    plotOffset.bottom += lh + axisMargin;\r\n                    axis.box = { top: surface.height - plotOffset.bottom, height: lh };\r\n                }\r\n                else {\r\n                    axis.box = { top: plotOffset.top + axisMargin, height: lh };\r\n                    plotOffset.top += lh + axisMargin;\r\n                }\r\n            }\r\n            else {\r\n                lw += padding;\r\n\r\n                if (pos == \"left\") {\r\n                    axis.box = { left: plotOffset.left + axisMargin, width: lw };\r\n                    plotOffset.left += lw + axisMargin;\r\n                }\r\n                else {\r\n                    plotOffset.right += lw + axisMargin;\r\n                    axis.box = { left: surface.width - plotOffset.right, width: lw };\r\n                }\r\n            }\r\n\r\n             // save for future reference\r\n            axis.position = pos;\r\n            axis.tickLength = tickLength;\r\n            axis.box.padding = padding;\r\n            axis.box.eventSectionPadding = eventSectionPadding;\r\n            axis.innermost = innermost;\r\n        }\r\n\r\n        function allocateAxisBoxSecondPhase(axis) {\r\n            // now that all axis boxes have been placed in one\r\n            // dimension, we can set the remaining dimension coordinates\r\n            if (axis.direction == \"x\") {\r\n                axis.box.left = plotOffset.left - axis.labelWidth / 2;\r\n                axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;\r\n            }\r\n            else {\r\n                axis.box.top = plotOffset.top - axis.labelHeight / 2;\r\n                axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;\r\n            }\r\n        }\r\n\r\n        function adjustLayoutForThingsStickingOut() {\r\n            // possibly adjust plot offset to ensure everything stays\r\n            // inside the canvas and isn't clipped off\r\n\r\n            var minMargin = options.grid.minBorderMargin,\r\n                axis, i;\r\n\r\n            // check stuff from the plot (FIXME: this should just read\r\n            // a value from the series, otherwise it's impossible to\r\n            // customize)\r\n            if (minMargin == null) {\r\n                minMargin = 0;\r\n                for (i = 0; i < series.length; ++i)\r\n                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth/2));\r\n            }\r\n\r\n            var margins = {\r\n                left: minMargin,\r\n                right: minMargin,\r\n                top: minMargin,\r\n                bottom: minMargin\r\n            };\r\n\r\n            // check axis labels, note we don't check the actual\r\n            // labels but instead use the overall width/height to not\r\n            // jump as much around with replots\r\n            $.each(allAxes(), function (_, axis) {\r\n                if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\r\n                    if (axis.direction === \"x\") {\r\n                        margins.left = Math.max(margins.left, axis.labelWidth / 2);\r\n                        margins.right = Math.max(margins.right, axis.labelWidth / 2);\r\n                    } else {\r\n                        margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);\r\n                        margins.top = Math.max(margins.top, axis.labelHeight / 2);\r\n                    }\r\n                }\r\n            });\r\n\r\n            plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\r\n            plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\r\n            plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\r\n            plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\r\n        }\r\n\r\n        function setupGrid() {\r\n            var i, axes = allAxes(), showGrid = options.grid.show;\r\n\r\n            // Initialize the plot's offset from the edge of the canvas\r\n\r\n            for (var a in plotOffset) {\r\n                var margin = options.grid.margin || 0;\r\n                plotOffset[a] = typeof margin == \"number\" ? margin : margin[a] || 0;\r\n            }\r\n\r\n            executeHooks(hooks.processOffset, [plotOffset]);\r\n\r\n            // If the grid is visible, add its border width to the offset\r\n\r\n            for (var a in plotOffset) {\r\n                if(typeof(options.grid.borderWidth) == \"object\") {\r\n                    plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\r\n                }\r\n                else {\r\n                    plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\r\n                }\r\n            }\r\n\r\n            $.each(axes, function (_, axis) {\r\n                var axisOpts = axis.options;\r\n                axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\r\n                axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\r\n                setRange(axis);\r\n            });\r\n\r\n            executeHooks(hooks.processRange, []);\r\n\r\n            if (showGrid) {\r\n\r\n                var allocatedAxes = $.grep(axes, function (axis) {\r\n                    return axis.show || axis.reserveSpace;\r\n                });\r\n\r\n                var snaped = false;\r\n                for (var i = 0; i < 2; i++) {\r\n                    $.each(allocatedAxes, function (_, axis) {\r\n                        // make the ticks\r\n                        setupTickGeneration(axis);\r\n                        setTicks(axis);\r\n                        snaped = snapRangeToTicks(axis, axis.ticks) || snaped;\r\n                        // find labelWidth/Height for axis\r\n                        measureTickLabels(axis);\r\n                    });\r\n\r\n                    if (snaped && hooks.processRange.length > 0) {\r\n                        executeHooks(hooks.processRange, []);\r\n                        snaped = false;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // with all dimensions calculated, we can compute the\r\n                // axis bounding boxes, start from the outside\r\n                // (reverse order)\r\n                for (i = allocatedAxes.length - 1; i >= 0; --i)\r\n                    allocateAxisBoxFirstPhase(allocatedAxes[i]);\r\n\r\n                // make sure we've got enough space for things that\r\n                // might stick out\r\n                adjustLayoutForThingsStickingOut();\r\n\r\n                $.each(allocatedAxes, function (_, axis) {\r\n                    allocateAxisBoxSecondPhase(axis);\r\n                });\r\n            }\r\n\r\n\r\n            plotWidth = surface.width - plotOffset.left - plotOffset.right;\r\n            plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\r\n\r\n            // now we got the proper plot dimensions, we can compute the scaling\r\n            $.each(axes, function (_, axis) {\r\n                setTransformationHelpers(axis);\r\n            });\r\n\r\n            if (showGrid) {\r\n                drawAxisLabels();\r\n            }\r\n\r\n            insertLegend();\r\n        }\r\n\r\n        function setRange(axis) {\r\n            var opts = axis.options,\r\n                min = +(opts.min != null ? opts.min : axis.datamin),\r\n                max = +(opts.max != null ? opts.max : axis.datamax),\r\n                delta = max - min;\r\n\r\n            if (delta == 0.0) {\r\n                // Grafana fix: wide Y min and max using increased wideFactor\r\n                // when all series values are the same\r\n                var wideFactor = 0.25;\r\n                var widen = Math.abs(max == 0 ? 1 : max * wideFactor);\r\n\r\n                if (opts.min == null) {\r\n                  min -= widen;\r\n                }\r\n                // always widen max if we couldn't widen min to ensure we\r\n                // don't fall into min == max which doesn't work\r\n                if (opts.max == null || opts.min != null) {\r\n                  max += widen;\r\n                }\r\n            }\r\n            else {\r\n                // consider autoscaling\r\n                var margin = opts.autoscaleMargin;\r\n                if (margin != null) {\r\n                    if (opts.min == null) {\r\n                        min -= delta * margin;\r\n                        // make sure we don't go below zero if all values\r\n                        // are positive\r\n                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)\r\n                            min = 0;\r\n                    }\r\n                    if (opts.max == null) {\r\n                        max += delta * margin;\r\n                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)\r\n                            max = 0;\r\n                    }\r\n                }\r\n            }\r\n            axis.min = min;\r\n            axis.max = max;\r\n        }\r\n\r\n        function setupTickGeneration(axis) {\r\n            var opts = axis.options;\r\n\r\n            // estimate number of ticks\r\n            var noTicks;\r\n            if (typeof opts.ticks == \"number\" && opts.ticks > 0)\r\n                noTicks = opts.ticks;\r\n            else\r\n                // heuristic based on the model a*sqrt(x) fitted to\r\n                // some data points that seemed reasonable\r\n                noTicks = 0.3 * Math.sqrt(axis.direction == \"x\" ? surface.width : surface.height);\r\n\r\n            var delta = (axis.max - axis.min) / noTicks,\r\n                dec = -Math.floor(Math.log(delta) / Math.LN10),\r\n                maxDec = opts.tickDecimals;\r\n\r\n            if (maxDec != null && dec > maxDec) {\r\n                dec = maxDec;\r\n            }\r\n\r\n            var magn = Math.pow(10, -dec),\r\n                norm = delta / magn, // norm is between 1.0 and 10.0\r\n                size;\r\n\r\n            if (norm < 1.5) {\r\n                size = 1;\r\n            } else if (norm < 3) {\r\n                size = 2;\r\n                // special case for 2.5, requires an extra decimal\r\n                if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {\r\n                    size = 2.5;\r\n                    ++dec;\r\n                }\r\n            } else if (norm < 7.5) {\r\n                size = 5;\r\n            } else {\r\n                size = 10;\r\n            }\r\n\r\n            size *= magn;\r\n\r\n            if (opts.minTickSize != null && size < opts.minTickSize) {\r\n                size = opts.minTickSize;\r\n            }\r\n\r\n            axis.delta = delta;\r\n            axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);\r\n            axis.tickSize = opts.tickSize || size;\r\n            // grafana addition\r\n            axis.scaledDecimals = axis.tickDecimals - Math.floor(Math.log(axis.tickSize) / Math.LN10);\r\n\r\n            // Time mode was moved to a plug-in in 0.8, and since so many people use it\r\n            // we'll add an especially friendly reminder to make sure they included it.\r\n\r\n            if (opts.mode == \"time\" && !axis.tickGenerator) {\r\n                throw new Error(\"Time mode requires the flot.time plugin.\");\r\n            }\r\n\r\n            // Flot supports base-10 axes; any other mode else is handled by a plug-in,\r\n            // like flot.time.js.\r\n\r\n            if (!axis.tickGenerator) {\r\n\r\n                axis.tickGenerator = function (axis) {\r\n\r\n                    var ticks = [],\r\n                        start = floorInBase(axis.min, axis.tickSize),\r\n                        i = 0,\r\n                        v = Number.NaN,\r\n                        prev;\r\n\r\n                    do {\r\n                        prev = v;\r\n                        v = start + i * axis.tickSize;\r\n                        ticks.push(v);\r\n                        ++i;\r\n                    } while (v < axis.max && v != prev);\r\n                    return ticks;\r\n                };\r\n\r\n\t\t\t\taxis.tickFormatter = function (value, axis) {\r\n\r\n\t\t\t\t\tvar factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1;\r\n\t\t\t\t\tvar formatted = \"\" + Math.round(value * factor) / factor;\r\n\r\n\t\t\t\t\t// If tickDecimals was specified, ensure that we have exactly that\r\n\t\t\t\t\t// much precision; otherwise default to the value's own precision.\r\n\r\n\t\t\t\t\tif (axis.tickDecimals != null) {\r\n\t\t\t\t\t\tvar decimal = formatted.indexOf(\".\");\r\n\t\t\t\t\t\tvar precision = decimal == -1 ? 0 : formatted.length - decimal - 1;\r\n\t\t\t\t\t\tif (precision < axis.tickDecimals) {\r\n\t\t\t\t\t\t\treturn (precision ? formatted : formatted + \".\") + (\"\" + factor).substr(1, axis.tickDecimals - precision);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n                    return formatted;\r\n                };\r\n            }\r\n\r\n            if ($.isFunction(opts.tickFormatter))\r\n                axis.tickFormatter = function (v, axis) { return \"\" + opts.tickFormatter(v, axis); };\r\n\r\n            if (opts.alignTicksWithAxis != null) {\r\n                var otherAxis = (axis.direction == \"x\" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\r\n                if (otherAxis && otherAxis.used && otherAxis != axis) {\r\n                    // consider snapping min/max to outermost nice ticks\r\n                    var niceTicks = axis.tickGenerator(axis);\r\n                    if (niceTicks.length > 0) {\r\n                        if (opts.min == null)\r\n                            axis.min = Math.min(axis.min, niceTicks[0]);\r\n                        if (opts.max == null && niceTicks.length > 1)\r\n                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\r\n                    }\r\n\r\n                    axis.tickGenerator = function (axis) {\r\n                        // copy ticks, scaled to this axis\r\n                        var ticks = [], v, i;\r\n                        for (i = 0; i < otherAxis.ticks.length; ++i) {\r\n                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\r\n                            v = axis.min + v * (axis.max - axis.min);\r\n                            ticks.push(v);\r\n                        }\r\n                        return ticks;\r\n                    };\r\n\r\n                    // we might need an extra decimal since forced\r\n                    // ticks don't necessarily fit naturally\r\n                    if (!axis.mode && opts.tickDecimals == null) {\r\n                        var extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\r\n                            ts = axis.tickGenerator(axis);\r\n\r\n                        // only proceed if the tick interval rounded\r\n                        // with an extra decimal doesn't give us a\r\n                        // zero at end\r\n                        if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))\r\n                            axis.tickDecimals = extraDec;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function setTicks(axis) {\r\n            var oticks = axis.options.ticks, ticks = [];\r\n            if (oticks == null || (typeof oticks == \"number\" && oticks > 0))\r\n                ticks = axis.tickGenerator(axis);\r\n            else if (oticks) {\r\n                if ($.isFunction(oticks))\r\n                    // generate the ticks\r\n                    ticks = oticks(axis);\r\n                else\r\n                    ticks = oticks;\r\n            }\r\n\r\n            // clean up/labelify the supplied ticks, copy them over\r\n            var i, v;\r\n            axis.ticks = [];\r\n            for (i = 0; i < ticks.length; ++i) {\r\n                var label = null;\r\n                var t = ticks[i];\r\n                if (typeof t == \"object\") {\r\n                    v = +t[0];\r\n                    if (t.length > 1)\r\n                        label = t[1];\r\n                }\r\n                else\r\n                    v = +t;\r\n                if (label == null)\r\n                    label = axis.tickFormatter(v, axis);\r\n                if (!isNaN(v))\r\n                    axis.ticks.push({ v: v, label: label });\r\n            }\r\n        }\r\n\r\n        function snapRangeToTicks(axis, ticks) {\r\n            var changed = false;\r\n            if (axis.options.autoscaleMargin && ticks.length > 0) {\r\n                // snap to ticks\r\n                if (axis.options.min == null) {\r\n                    axis.min = Math.min(axis.min, ticks[0].v);\r\n                    changed = true;\r\n                }\r\n                if (axis.options.max == null && ticks.length > 1) {\r\n                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\r\n                    changed = true;\r\n                }\r\n            }\r\n            return changed;\r\n        }\r\n\r\n        function draw() {\r\n\r\n            surface.clear();\r\n\r\n            executeHooks(hooks.drawBackground, [ctx]);\r\n\r\n            var grid = options.grid;\r\n\r\n            // draw background, if any\r\n            if (grid.show && grid.backgroundColor)\r\n                drawBackground();\r\n\r\n            if (grid.show && !grid.aboveData) {\r\n                drawGrid();\r\n            }\r\n\r\n            for (var i = 0; i < series.length; ++i) {\r\n                executeHooks(hooks.drawSeries, [ctx, series[i]]);\r\n                drawSeries(series[i]);\r\n            }\r\n\r\n            executeHooks(hooks.draw, [ctx]);\r\n\r\n            if (grid.show && grid.aboveData) {\r\n                drawGrid();\r\n            }\r\n\r\n            surface.render();\r\n\r\n            // A draw implies that either the axes or data have changed, so we\r\n            // should probably update the overlay highlights as well.\r\n\r\n            triggerRedrawOverlay();\r\n        }\r\n\r\n        function extractRange(ranges, coord) {\r\n            var axis, from, to, key, axes = allAxes();\r\n\r\n            for (var i = 0; i < axes.length; ++i) {\r\n                axis = axes[i];\r\n                if (axis.direction == coord) {\r\n                    key = coord + axis.n + \"axis\";\r\n                    if (!ranges[key] && axis.n == 1)\r\n                        key = coord + \"axis\"; // support x1axis as xaxis\r\n                    if (ranges[key]) {\r\n                        from = ranges[key].from;\r\n                        to = ranges[key].to;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // backwards-compat stuff - to be removed in future\r\n            if (!ranges[key]) {\r\n                axis = coord == \"x\" ? xaxes[0] : yaxes[0];\r\n                from = ranges[coord + \"1\"];\r\n                to = ranges[coord + \"2\"];\r\n            }\r\n\r\n            // auto-reverse as an added bonus\r\n            if (from != null && to != null && from > to) {\r\n                var tmp = from;\r\n                from = to;\r\n                to = tmp;\r\n            }\r\n\r\n            return { from: from, to: to, axis: axis };\r\n        }\r\n\r\n        function drawBackground() {\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, \"rgba(255, 255, 255, 0)\");\r\n            ctx.fillRect(0, 0, plotWidth, plotHeight);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawGrid() {\r\n            var i, axes, bw, bc;\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            // draw markings\r\n            var markings = options.grid.markings;\r\n            if (markings) {\r\n                if ($.isFunction(markings)) {\r\n                    axes = plot.getAxes();\r\n                    // xmin etc. is backwards compatibility, to be\r\n                    // removed in the future\r\n                    axes.xmin = axes.xaxis.min;\r\n                    axes.xmax = axes.xaxis.max;\r\n                    axes.ymin = axes.yaxis.min;\r\n                    axes.ymax = axes.yaxis.max;\r\n\r\n                    markings = markings(axes);\r\n                }\r\n\r\n                for (i = 0; i < markings.length; ++i) {\r\n                    var m = markings[i],\r\n                        xrange = extractRange(m, \"x\"),\r\n                        yrange = extractRange(m, \"y\");\r\n\r\n                    // fill in missing\r\n                    if (xrange.from == null)\r\n                        xrange.from = xrange.axis.min;\r\n                    if (xrange.to == null)\r\n                        xrange.to = xrange.axis.max;\r\n                    if (yrange.from == null)\r\n                        yrange.from = yrange.axis.min;\r\n                    if (yrange.to == null)\r\n                        yrange.to = yrange.axis.max;\r\n\r\n                    // clip\r\n                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||\r\n                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)\r\n                        continue;\r\n\r\n                    xrange.from = Math.max(xrange.from, xrange.axis.min);\r\n                    xrange.to = Math.min(xrange.to, xrange.axis.max);\r\n                    yrange.from = Math.max(yrange.from, yrange.axis.min);\r\n                    yrange.to = Math.min(yrange.to, yrange.axis.max);\r\n\r\n                    var xequal = xrange.from === xrange.to,\r\n                        yequal = yrange.from === yrange.to;\r\n\r\n                    if (xequal && yequal) {\r\n                        continue;\r\n                    }\r\n\r\n                    // then draw\r\n                    xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\r\n                    xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\r\n                    yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\r\n                    yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\r\n\r\n                    if (xequal || yequal) {\r\n                        var lineWidth = m.lineWidth || options.grid.markingsLineWidth,\r\n                            subPixel = lineWidth % 2 ? 0.5 : 0;\r\n                        ctx.beginPath();\r\n                        ctx.strokeStyle = m.color || options.grid.markingsColor;\r\n                        ctx.lineWidth = lineWidth;\r\n                        if (xequal) {\r\n                            ctx.moveTo(xrange.to + subPixel, yrange.from);\r\n                            ctx.lineTo(xrange.to + subPixel, yrange.to);\r\n                        } else {\r\n                            ctx.moveTo(xrange.from, yrange.to + subPixel);\r\n                            ctx.lineTo(xrange.to, yrange.to + subPixel);\r\n                        }\r\n                        ctx.stroke();\r\n                    } else {\r\n                        ctx.fillStyle = m.color || options.grid.markingsColor;\r\n                        ctx.fillRect(xrange.from, yrange.to,\r\n                                     xrange.to - xrange.from,\r\n                                     yrange.from - yrange.to);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // draw the ticks\r\n            axes = allAxes();\r\n            bw = options.grid.borderWidth;\r\n\r\n            for (var j = 0; j < axes.length; ++j) {\r\n                var axis = axes[j], box = axis.box,\r\n                    t = axis.tickLength, x, y, xoff, yoff;\r\n                if (!axis.show || axis.ticks.length == 0)\r\n                    continue;\r\n\r\n                ctx.lineWidth = 1;\r\n\r\n                // find the edges\r\n                if (axis.direction == \"x\") {\r\n                    x = 0;\r\n                    if (t == \"full\")\r\n                        y = (axis.position == \"top\" ? 0 : plotHeight);\r\n                    else\r\n                        y = box.top - plotOffset.top + (axis.position == \"top\" ? box.height : 0);\r\n                }\r\n                else {\r\n                    y = 0;\r\n                    if (t == \"full\")\r\n                        x = (axis.position == \"left\" ? 0 : plotWidth);\r\n                    else\r\n                        x = box.left - plotOffset.left + (axis.position == \"left\" ? box.width : 0);\r\n                }\r\n\r\n                // draw tick bar\r\n                if (!axis.innermost) {\r\n                    ctx.strokeStyle = axis.options.color;\r\n                    ctx.beginPath();\r\n                    xoff = yoff = 0;\r\n                    if (axis.direction == \"x\")\r\n                        xoff = plotWidth + 1;\r\n                    else\r\n                        yoff = plotHeight + 1;\r\n\r\n                    if (ctx.lineWidth == 1) {\r\n                        if (axis.direction == \"x\") {\r\n                            y = Math.floor(y) + 0.5;\r\n                        } else {\r\n                            x = Math.floor(x) + 0.5;\r\n                        }\r\n                    }\r\n\r\n                    ctx.moveTo(x, y);\r\n                    ctx.lineTo(x + xoff, y + yoff);\r\n                    ctx.stroke();\r\n                }\r\n\r\n                // draw ticks\r\n\r\n                ctx.strokeStyle = axis.options.tickColor;\r\n\r\n                ctx.beginPath();\r\n                for (i = 0; i < axis.ticks.length; ++i) {\r\n                    var v = axis.ticks[i].v;\r\n\r\n                    xoff = yoff = 0;\r\n\r\n                    if (isNaN(v) || v < axis.min || v > axis.max\r\n                        // skip those lying on the axes if we got a border\r\n                        || (t == \"full\"\r\n                            && ((typeof bw == \"object\" && bw[axis.position] > 0) || bw > 0)\r\n                            && (v == axis.min || v == axis.max)))\r\n                        continue;\r\n\r\n                    if (axis.direction == \"x\") {\r\n                        x = axis.p2c(v);\r\n                        yoff = t == \"full\" ? -plotHeight : t;\r\n\r\n                        if (axis.position == \"top\")\r\n                            yoff = -yoff;\r\n                    }\r\n                    else {\r\n                        y = axis.p2c(v);\r\n                        xoff = t == \"full\" ? -plotWidth : t;\r\n\r\n                        if (axis.position == \"left\")\r\n                            xoff = -xoff;\r\n                    }\r\n\r\n                    if (ctx.lineWidth == 1) {\r\n                        if (axis.direction == \"x\")\r\n                            x = Math.floor(x) + 0.5;\r\n                        else\r\n                            y = Math.floor(y) + 0.5;\r\n                    }\r\n\r\n                    ctx.moveTo(x, y);\r\n                    ctx.lineTo(x + xoff, y + yoff);\r\n                }\r\n\r\n                ctx.stroke();\r\n            }\r\n\r\n\r\n            // draw border\r\n            if (bw) {\r\n                // If either borderWidth or borderColor is an object, then draw the border\r\n                // line by line instead of as one rectangle\r\n                bc = options.grid.borderColor;\r\n                if(typeof bw == \"object\" || typeof bc == \"object\") {\r\n                    if (typeof bw !== \"object\") {\r\n                        bw = {top: bw, right: bw, bottom: bw, left: bw};\r\n                    }\r\n                    if (typeof bc !== \"object\") {\r\n                        bc = {top: bc, right: bc, bottom: bc, left: bc};\r\n                    }\r\n\r\n                    if (bw.top > 0) {\r\n                        ctx.strokeStyle = bc.top;\r\n                        ctx.lineWidth = bw.top;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(0 - bw.left, 0 - bw.top/2);\r\n                        ctx.lineTo(plotWidth, 0 - bw.top/2);\r\n                        ctx.stroke();\r\n                    }\r\n\r\n                    if (bw.right > 0) {\r\n                        ctx.strokeStyle = bc.right;\r\n                        ctx.lineWidth = bw.right;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\r\n                        ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\r\n                        ctx.stroke();\r\n                    }\r\n\r\n                    if (bw.bottom > 0) {\r\n                        ctx.strokeStyle = bc.bottom;\r\n                        ctx.lineWidth = bw.bottom;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\r\n                        ctx.lineTo(0, plotHeight + bw.bottom / 2);\r\n                        ctx.stroke();\r\n                    }\r\n\r\n                    if (bw.left > 0) {\r\n                        ctx.strokeStyle = bc.left;\r\n                        ctx.lineWidth = bw.left;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(0 - bw.left/2, plotHeight + bw.bottom);\r\n                        ctx.lineTo(0- bw.left/2, 0);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n                else {\r\n                    ctx.lineWidth = bw;\r\n                    ctx.strokeStyle = options.grid.borderColor;\r\n                    ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);\r\n                }\r\n            }\r\n\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawAxisLabels() {\r\n\r\n            $.each(allAxes(), function (_, axis) {\r\n                var box = axis.box,\r\n                    legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\r\n                    layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\r\n                    font = axis.options.font || \"flot-tick-label tickLabel\",\r\n                    tick, x, y, halign, valign;\r\n\r\n                // Remove text before checking for axis.show and ticks.length;\r\n                // otherwise plugins, like flot-tickrotor, that draw their own\r\n                // tick labels will end up with both theirs and the defaults.\r\n\r\n                surface.removeText(layer);\r\n\r\n                if (!axis.show || axis.ticks.length == 0)\r\n                    return;\r\n\r\n                for (var i = 0; i < axis.ticks.length; ++i) {\r\n\r\n                    tick = axis.ticks[i];\r\n                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)\r\n                        continue;\r\n\r\n                    if (axis.direction == \"x\") {\r\n                        halign = \"center\";\r\n                        x = plotOffset.left + axis.p2c(tick.v);\r\n                        if (axis.position == \"bottom\") {\r\n                            y = box.top + box.padding + box.eventSectionPadding;\r\n                        } else {\r\n                            y = box.top + box.height - box.padding;\r\n                            valign = \"bottom\";\r\n                        }\r\n                    } else {\r\n                        valign = \"middle\";\r\n                        y = plotOffset.top + axis.p2c(tick.v);\r\n                        if (axis.position == \"left\") {\r\n                            x = box.left + box.width - box.padding;\r\n                            halign = \"right\";\r\n                        } else {\r\n                            x = box.left + box.padding;\r\n                        }\r\n                    }\r\n\r\n                    surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);\r\n                }\r\n            });\r\n        }\r\n\r\n        function drawSeries(series) {\r\n            if (series.lines.show)\r\n                drawSeriesLines(series);\r\n            if (series.bars.show)\r\n                drawSeriesBars(series);\r\n            if (series.points.show)\r\n                drawSeriesPoints(series);\r\n        }\r\n\r\n        function drawSeriesLines(series) {\r\n            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {\r\n                var points = datapoints.points,\r\n                    ps = datapoints.pointsize,\r\n                    prevx = null, prevy = null;\r\n\r\n                ctx.beginPath();\r\n                for (var i = ps; i < points.length; i += ps) {\r\n                    var x1 = points[i - ps], y1 = points[i - ps + 1],\r\n                        x2 = points[i], y2 = points[i + 1];\r\n\r\n                    if (x1 == null || x2 == null)\r\n                        continue;\r\n\r\n                    // clip with ymin\r\n                    if (y1 <= y2 && y1 < axisy.min) {\r\n                        if (y2 < axisy.min)\r\n                            continue;   // line segment is outside\r\n                        // compute new intersection point\r\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.min;\r\n                    }\r\n                    else if (y2 <= y1 && y2 < axisy.min) {\r\n                        if (y1 < axisy.min)\r\n                            continue;\r\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.min;\r\n                    }\r\n\r\n                    // clip with ymax\r\n                    if (y1 >= y2 && y1 > axisy.max) {\r\n                        if (y2 > axisy.max)\r\n                            continue;\r\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.max;\r\n                    }\r\n                    else if (y2 >= y1 && y2 > axisy.max) {\r\n                        if (y1 > axisy.max)\r\n                            continue;\r\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.max;\r\n                    }\r\n\r\n                    // clip with xmin\r\n                    if (x1 <= x2 && x1 < axisx.min) {\r\n                        if (x2 < axisx.min)\r\n                            continue;\r\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.min;\r\n                    }\r\n                    else if (x2 <= x1 && x2 < axisx.min) {\r\n                        if (x1 < axisx.min)\r\n                            continue;\r\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.min;\r\n                    }\r\n\r\n                    // clip with xmax\r\n                    if (x1 >= x2 && x1 > axisx.max) {\r\n                        if (x2 > axisx.max)\r\n                            continue;\r\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.max;\r\n                    }\r\n                    else if (x2 >= x1 && x2 > axisx.max) {\r\n                        if (x1 > axisx.max)\r\n                            continue;\r\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.max;\r\n                    }\r\n\r\n                    if (x1 != prevx || y1 != prevy)\r\n                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\r\n\r\n                    prevx = x2;\r\n                    prevy = y2;\r\n                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\r\n                }\r\n                ctx.stroke();\r\n            }\r\n\r\n            function plotLineArea(datapoints, axisx, axisy) {\r\n                var points = datapoints.points,\r\n                    ps = datapoints.pointsize,\r\n                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),\r\n                    i = 0, top, areaOpen = false,\r\n                    ypos = 1, segmentStart = 0, segmentEnd = 0;\r\n\r\n                // we process each segment in two turns, first forward\r\n                // direction to sketch out top, then once we hit the\r\n                // end we go backwards to sketch the bottom\r\n                while (true) {\r\n                    if (ps > 0 && i > points.length + ps)\r\n                        break;\r\n\r\n                    i += ps; // ps is negative if going backwards\r\n\r\n                    var x1 = points[i - ps],\r\n                        y1 = points[i - ps + ypos],\r\n                        x2 = points[i], y2 = points[i + ypos];\r\n\r\n                    if (areaOpen) {\r\n                        if (ps > 0 && x1 != null && x2 == null) {\r\n                            // at turning point\r\n                            segmentEnd = i;\r\n                            ps = -ps;\r\n                            ypos = 2;\r\n                            continue;\r\n                        }\r\n\r\n                        if (ps < 0 && i == segmentStart + ps) {\r\n                            // done with the reverse sweep\r\n                            ctx.fill();\r\n                            areaOpen = false;\r\n                            ps = -ps;\r\n                            ypos = 1;\r\n                            i = segmentStart = segmentEnd + ps;\r\n                            continue;\r\n                        }\r\n                    }\r\n\r\n                    if (x1 == null || x2 == null)\r\n                        continue;\r\n\r\n                    // clip x values\r\n\r\n                    // clip with xmin\r\n                    if (x1 <= x2 && x1 < axisx.min) {\r\n                        if (x2 < axisx.min)\r\n                            continue;\r\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.min;\r\n                    }\r\n                    else if (x2 <= x1 && x2 < axisx.min) {\r\n                        if (x1 < axisx.min)\r\n                            continue;\r\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.min;\r\n                    }\r\n\r\n                    // clip with xmax\r\n                    if (x1 >= x2 && x1 > axisx.max) {\r\n                        if (x2 > axisx.max)\r\n                            continue;\r\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.max;\r\n                    }\r\n                    else if (x2 >= x1 && x2 > axisx.max) {\r\n                        if (x1 > axisx.max)\r\n                            continue;\r\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.max;\r\n                    }\r\n\r\n                    if (!areaOpen) {\r\n                        // open area\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\r\n                        areaOpen = true;\r\n                    }\r\n\r\n                    // now first check the case where both is outside\r\n                    if (y1 >= axisy.max && y2 >= axisy.max) {\r\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\r\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\r\n                        continue;\r\n                    }\r\n                    else if (y1 <= axisy.min && y2 <= axisy.min) {\r\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\r\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\r\n                        continue;\r\n                    }\r\n\r\n                    // else it's a bit more complicated, there might\r\n                    // be a flat maxed out rectangle first, then a\r\n                    // triangular cutout or reverse; to find these\r\n                    // keep track of the current x values\r\n                    var x1old = x1, x2old = x2;\r\n\r\n                    // clip the y values, without shortcutting, we\r\n                    // go through all cases in turn\r\n\r\n                    // clip with ymin\r\n                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\r\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.min;\r\n                    }\r\n                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\r\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.min;\r\n                    }\r\n\r\n                    // clip with ymax\r\n                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\r\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.max;\r\n                    }\r\n                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\r\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.max;\r\n                    }\r\n\r\n                    // if the x value was changed we got a rectangle\r\n                    // to fill\r\n                    if (x1 != x1old) {\r\n                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\r\n                        // it goes to (x1, y1), but we fill that below\r\n                    }\r\n\r\n                    // fill triangular section, this sometimes result\r\n                    // in redundant points if (x1, y1) hasn't changed\r\n                    // from previous line to, but we just ignore that\r\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\r\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\r\n\r\n                    // fill the other rectangle if it's there\r\n                    if (x2 != x2old) {\r\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\r\n                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\r\n                    }\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n            ctx.lineJoin = \"round\";\r\n\r\n            var lw = series.lines.lineWidth,\r\n                sw = series.shadowSize;\r\n            // FIXME: consider another form of shadow when filling is turned on\r\n            if (lw > 0 && sw > 0) {\r\n                // draw shadow as a thick and thin line with transparency\r\n                ctx.lineWidth = sw;\r\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\r\n                // position shadow at angle from the mid of line\r\n                var angle = Math.PI/18;\r\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);\r\n                ctx.lineWidth = sw/2;\r\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);\r\n            }\r\n\r\n            ctx.lineWidth = lw;\r\n            ctx.strokeStyle = series.color;\r\n            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);\r\n            if (fillStyle) {\r\n                ctx.fillStyle = fillStyle;\r\n                plotLineArea(series.datapoints, series.xaxis, series.yaxis);\r\n            }\r\n\r\n            if (lw > 0)\r\n                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawSeriesPoints(series) {\r\n            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {\r\n                var points = datapoints.points, ps = datapoints.pointsize;\r\n\r\n                for (var i = 0; i < points.length; i += ps) {\r\n                    var x = points[i], y = points[i + 1];\r\n                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\r\n                        continue;\r\n\r\n                    ctx.beginPath();\r\n                    x = axisx.p2c(x);\r\n                    y = axisy.p2c(y) + offset;\r\n                    if (symbol == \"circle\")\r\n                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\r\n                    else\r\n                        symbol(ctx, x, y, radius, shadow);\r\n                    ctx.closePath();\r\n\r\n                    if (fillStyle) {\r\n                        ctx.fillStyle = fillStyle;\r\n                        ctx.fill();\r\n                    }\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            var lw = series.points.lineWidth,\r\n                sw = series.shadowSize,\r\n                radius = series.points.radius,\r\n                symbol = series.points.symbol;\r\n\r\n            // If the user sets the line width to 0, we change it to a very\r\n            // small value. A line width of 0 seems to force the default of 1.\r\n            // Doing the conditional here allows the shadow setting to still be\r\n            // optional even with a lineWidth of 0.\r\n\r\n            if( lw == 0 )\r\n                lw = 0.0001;\r\n\r\n            if (lw > 0 && sw > 0) {\r\n                // draw shadow in two steps\r\n                var w = sw / 2;\r\n                ctx.lineWidth = w;\r\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\r\n                plotPoints(series.datapoints, radius, null, w + w/2, true,\r\n                           series.xaxis, series.yaxis, symbol);\r\n\r\n                ctx.strokeStyle = \"rgba(0,0,0,0.2)\";\r\n                plotPoints(series.datapoints, radius, null, w/2, true,\r\n                           series.xaxis, series.yaxis, symbol);\r\n            }\r\n\r\n            ctx.lineWidth = lw;\r\n            ctx.strokeStyle = series.color;\r\n            plotPoints(series.datapoints, radius,\r\n                       getFillStyle(series.points, series.color), 0, false,\r\n                       series.xaxis, series.yaxis, symbol);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {\r\n            var left, right, bottom, top,\r\n                drawLeft, drawRight, drawTop, drawBottom,\r\n                tmp;\r\n\r\n            // in horizontal mode, we start the bar from the left\r\n            // instead of from the bottom so it appears to be\r\n            // horizontal rather than vertical\r\n            if (horizontal) {\r\n                drawBottom = drawRight = drawTop = true;\r\n                drawLeft = false;\r\n                left = b;\r\n                right = x;\r\n                top = y + barLeft;\r\n                bottom = y + barRight;\r\n\r\n                // account for negative bars\r\n                if (right < left) {\r\n                    tmp = right;\r\n                    right = left;\r\n                    left = tmp;\r\n                    drawLeft = true;\r\n                    drawRight = false;\r\n                }\r\n            }\r\n            else {\r\n                drawLeft = drawRight = drawTop = true;\r\n                drawBottom = false;\r\n                left = x + barLeft;\r\n                right = x + barRight;\r\n                bottom = b;\r\n                top = y;\r\n\r\n                // account for negative bars\r\n                if (top < bottom) {\r\n                    tmp = top;\r\n                    top = bottom;\r\n                    bottom = tmp;\r\n                    drawBottom = true;\r\n                    drawTop = false;\r\n                }\r\n            }\r\n\r\n            // clip\r\n            if (right < axisx.min || left > axisx.max ||\r\n                top < axisy.min || bottom > axisy.max)\r\n                return;\r\n\r\n            if (left < axisx.min) {\r\n                left = axisx.min;\r\n                drawLeft = false;\r\n            }\r\n\r\n            if (right > axisx.max) {\r\n                right = axisx.max;\r\n                drawRight = false;\r\n            }\r\n\r\n            if (bottom < axisy.min) {\r\n                bottom = axisy.min;\r\n                drawBottom = false;\r\n            }\r\n\r\n            if (top > axisy.max) {\r\n                top = axisy.max;\r\n                drawTop = false;\r\n            }\r\n\r\n            left = axisx.p2c(left);\r\n            bottom = axisy.p2c(bottom);\r\n            right = axisx.p2c(right);\r\n            top = axisy.p2c(top);\r\n\r\n            // fill the bar\r\n            if (fillStyleCallback) {\r\n                c.fillStyle = fillStyleCallback(bottom, top);\r\n                c.fillRect(left, top, right - left, bottom - top)\r\n            }\r\n\r\n            // draw outline\r\n            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\r\n                c.beginPath();\r\n\r\n                // FIXME: inline moveTo is buggy with excanvas\r\n                c.moveTo(left, bottom);\r\n                if (drawLeft)\r\n                    c.lineTo(left, top);\r\n                else\r\n                    c.moveTo(left, top);\r\n                if (drawTop)\r\n                    c.lineTo(right, top);\r\n                else\r\n                    c.moveTo(right, top);\r\n                if (drawRight)\r\n                    c.lineTo(right, bottom);\r\n                else\r\n                    c.moveTo(right, bottom);\r\n                if (drawBottom)\r\n                    c.lineTo(left, bottom);\r\n                else\r\n                    c.moveTo(left, bottom);\r\n                c.stroke();\r\n            }\r\n        }\r\n\r\n        function drawSeriesBars(series) {\r\n            function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\r\n                var points = datapoints.points, ps = datapoints.pointsize;\r\n\r\n                for (var i = 0; i < points.length; i += ps) {\r\n                    if (points[i] == null)\r\n                        continue;\r\n                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            // FIXME: figure out a way to add shadows (for instance along the right edge)\r\n            ctx.lineWidth = series.bars.lineWidth;\r\n            ctx.strokeStyle = series.color;\r\n\r\n            var barLeft;\r\n\r\n            switch (series.bars.align) {\r\n                case \"left\":\r\n                    barLeft = 0;\r\n                    break;\r\n                case \"right\":\r\n                    barLeft = -series.bars.barWidth;\r\n                    break;\r\n                default:\r\n                    barLeft = -series.bars.barWidth / 2;\r\n            }\r\n\r\n            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;\r\n            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);\r\n            ctx.restore();\r\n        }\r\n\r\n        function getFillStyle(filloptions, seriesColor, bottom, top) {\r\n            var fill = filloptions.fill;\r\n            if (!fill)\r\n                return null;\r\n\r\n            if (filloptions.fillColor)\r\n                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\r\n\r\n            var c = $.color.parse(seriesColor);\r\n            c.a = typeof fill == \"number\" ? fill : 0.4;\r\n            c.normalize();\r\n            return c.toString();\r\n        }\r\n\r\n        function insertLegend() {\r\n\r\n            if (options.legend.container != null) {\r\n                $(options.legend.container).html(\"\");\r\n            } else {\r\n                placeholder.find(\".legend\").remove();\r\n            }\r\n\r\n            if (!options.legend.show) {\r\n                return;\r\n            }\r\n\r\n            var fragments = [], entries = [], rowStarted = false,\r\n                lf = options.legend.labelFormatter, s, label;\r\n\r\n            // Build a list of legend entries, with each having a label and a color\r\n\r\n            for (var i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                if (s.label) {\r\n                    label = lf ? lf(s.label, s) : s.label;\r\n                    if (label) {\r\n                        entries.push({\r\n                            label: label,\r\n                            color: s.color\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Sort the legend using either the default or a custom comparator\r\n\r\n            if (options.legend.sorted) {\r\n                if ($.isFunction(options.legend.sorted)) {\r\n                    entries.sort(options.legend.sorted);\r\n                } else if (options.legend.sorted == \"reverse\") {\r\n                \tentries.reverse();\r\n                } else {\r\n                    var ascending = options.legend.sorted != \"descending\";\r\n                    entries.sort(function(a, b) {\r\n                        return a.label == b.label ? 0 : (\r\n                            (a.label < b.label) != ascending ? 1 : -1   // Logical XOR\r\n                        );\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Generate markup for the list of entries, in their final order\r\n\r\n            for (var i = 0; i < entries.length; ++i) {\r\n\r\n                var entry = entries[i];\r\n\r\n                if (i % options.legend.noColumns == 0) {\r\n                    if (rowStarted)\r\n                        fragments.push('</tr>');\r\n                    fragments.push('<tr>');\r\n                    rowStarted = true;\r\n                }\r\n\r\n                fragments.push(\r\n                    '<td class=\"legendColorBox\"><div style=\"border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px\"><div style=\"width:4px;height:0;border:5px solid ' + entry.color + ';overflow:hidden\"></div></div></td>' +\r\n                    '<td class=\"legendLabel\">' + entry.label + '</td>'\r\n                );\r\n            }\r\n\r\n            if (rowStarted)\r\n                fragments.push('</tr>');\r\n\r\n            if (fragments.length == 0)\r\n                return;\r\n\r\n            var table = '<table style=\"font-size:smaller;color:' + options.grid.color + '\">' + fragments.join(\"\") + '</table>';\r\n            if (options.legend.container != null)\r\n                $(options.legend.container).html(table);\r\n            else {\r\n                var pos = \"\",\r\n                    p = options.legend.position,\r\n                    m = options.legend.margin;\r\n                if (m[0] == null)\r\n                    m = [m, m];\r\n                if (p.charAt(0) == \"n\")\r\n                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';\r\n                else if (p.charAt(0) == \"s\")\r\n                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';\r\n                if (p.charAt(1) == \"e\")\r\n                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';\r\n                else if (p.charAt(1) == \"w\")\r\n                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';\r\n                var legend = $('<div class=\"legend\">' + table.replace('style=\"', 'style=\"position:absolute;' + pos +';') + '</div>').appendTo(placeholder);\r\n                if (options.legend.backgroundOpacity != 0.0) {\r\n                    // put in the transparent background\r\n                    // separately to avoid blended labels and\r\n                    // label boxes\r\n                    var c = options.legend.backgroundColor;\r\n                    if (c == null) {\r\n                        c = options.grid.backgroundColor;\r\n                        if (c && typeof c == \"string\")\r\n                            c = $.color.parse(c);\r\n                        else\r\n                            c = $.color.extract(legend, 'background-color');\r\n                        c.a = 1;\r\n                        c = c.toString();\r\n                    }\r\n                    var div = legend.children();\r\n                    $('<div style=\"position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';\"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        // interactive features\r\n\r\n        var highlights = [],\r\n            redrawTimeout = null;\r\n\r\n        // returns the data item the mouse is over, or null if none is found\r\n        function findNearbyItem(mouseX, mouseY, seriesFilter) {\r\n            var maxDistance = options.grid.mouseActiveRadius,\r\n                smallestDistance = maxDistance * maxDistance + 1,\r\n                item = null, foundPoint = false, i, j, ps;\r\n\r\n            for (i = series.length - 1; i >= 0; --i) {\r\n                if (!seriesFilter(series[i]))\r\n                    continue;\r\n\r\n                var s = series[i],\r\n                    axisx = s.xaxis,\r\n                    axisy = s.yaxis,\r\n                    points = s.datapoints.points,\r\n                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster\r\n                    my = axisy.c2p(mouseY),\r\n                    maxx = maxDistance / axisx.scale,\r\n                    maxy = maxDistance / axisy.scale;\r\n\r\n                ps = s.datapoints.pointsize;\r\n                // with inverse transforms, we can't use the maxx/maxy\r\n                // optimization, sadly\r\n                if (axisx.options.inverseTransform)\r\n                    maxx = Number.MAX_VALUE;\r\n                if (axisy.options.inverseTransform)\r\n                    maxy = Number.MAX_VALUE;\r\n\r\n                if (s.lines.show || s.points.show) {\r\n                    for (j = 0; j < points.length; j += ps) {\r\n                        var x = points[j], y = points[j + 1];\r\n                        if (x == null)\r\n                            continue;\r\n\r\n                        // For points and lines, the cursor must be within a\r\n                        // certain distance to the data point\r\n                        if (x - mx > maxx || x - mx < -maxx ||\r\n                            y - my > maxy || y - my < -maxy)\r\n                            continue;\r\n\r\n                        // We have to calculate distances in pixels, not in\r\n                        // data units, because the scales of the axes may be different\r\n                        var dx = Math.abs(axisx.p2c(x) - mouseX),\r\n                            dy = Math.abs(axisy.p2c(y) - mouseY),\r\n                            dist = dx * dx + dy * dy; // we save the sqrt\r\n\r\n                        // use <= to ensure last point takes precedence\r\n                        // (last generally means on top of)\r\n                        if (dist < smallestDistance) {\r\n                            smallestDistance = dist;\r\n                            item = [i, j / ps];\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (s.bars.show && !item) { // no other point can be nearby\r\n\r\n                    var barLeft, barRight;\r\n\r\n                    switch (s.bars.align) {\r\n                        case \"left\":\r\n                            barLeft = 0;\r\n                            break;\r\n                        case \"right\":\r\n                            barLeft = -s.bars.barWidth;\r\n                            break;\r\n                        default:\r\n                            barLeft = -s.bars.barWidth / 2;\r\n                    }\r\n\r\n                    barRight = barLeft + s.bars.barWidth;\r\n\r\n                    for (j = 0; j < points.length; j += ps) {\r\n                        var x = points[j], y = points[j + 1], b = points[j + 2];\r\n                        if (x == null)\r\n                            continue;\r\n\r\n                        // for a bar graph, the cursor must be inside the bar\r\n                        if (series[i].bars.horizontal ?\r\n                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) &&\r\n                             my >= y + barLeft && my <= y + barRight) :\r\n                            (mx >= x + barLeft && mx <= x + barRight &&\r\n                             my >= Math.min(b, y) && my <= Math.max(b, y)))\r\n                                item = [i, j / ps];\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (item) {\r\n                i = item[0];\r\n                j = item[1];\r\n                ps = series[i].datapoints.pointsize;\r\n\r\n                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\r\n                         dataIndex: j,\r\n                         series: series[i],\r\n                         seriesIndex: i };\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        function onMouseMove(e) {\r\n            if (options.grid.hoverable)\r\n                triggerClickHoverEvent(\"plothover\", e,\r\n                                       function (s) { return s[\"hoverable\"] != false; });\r\n        }\r\n\r\n        function onMouseLeave(e) {\r\n            if (options.grid.hoverable)\r\n                triggerClickHoverEvent(\"plothover\", e,\r\n                                       function (s) { return false; });\r\n        }\r\n\r\n        function onClick(e) {\r\n          if (plot.isSelecting) {\r\n            return;\r\n          }\r\n\r\n          triggerClickHoverEvent(\"plotclick\", e, function (s) { return s[\"clickable\"] != false; });\r\n        }\r\n\r\n        // trigger click or hover event (they send the same parameters\r\n        // so we share their code)\r\n        function triggerClickHoverEvent(eventname, event, seriesFilter) {\r\n            var offset = eventHolder.offset(),\r\n                canvasX = event.pageX - offset.left - plotOffset.left,\r\n                canvasY = event.pageY - offset.top - plotOffset.top,\r\n            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });\r\n\r\n            pos.pageX = event.pageX;\r\n            pos.pageY = event.pageY;\r\n\r\n            // Add ctrlKey and metaKey to event\r\n            pos.ctrlKey = event.ctrlKey;\r\n            pos.metaKey = event.metaKey;\r\n\r\n            var item = findNearbyItem(canvasX, canvasY, seriesFilter);\r\n\r\n            if (item) {\r\n                // fill in mouse pos for any listeners out there\r\n                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left, 10);\r\n                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top, 10);\r\n            }\r\n\r\n            if (options.grid.autoHighlight) {\r\n                // clear auto-highlights\r\n                for (var i = 0; i < highlights.length; ++i) {\r\n                    var h = highlights[i];\r\n                    if (h.auto == eventname &&\r\n                        !(item && h.series == item.series &&\r\n                          h.point[0] == item.datapoint[0] &&\r\n                          h.point[1] == item.datapoint[1]))\r\n                        unhighlight(h.series, h.point);\r\n                }\r\n\r\n                if (item)\r\n                    highlight(item.series, item.datapoint, eventname);\r\n            }\r\n\r\n            placeholder.trigger(eventname, [ pos, item ]);\r\n        }\r\n\r\n        function triggerRedrawOverlay() {\r\n            var t = options.interaction.redrawOverlayInterval;\r\n            if (t == -1) {      // skip event queue\r\n                drawOverlay();\r\n                return;\r\n            }\r\n\r\n            if (!redrawTimeout)\r\n                redrawTimeout = setTimeout(drawOverlay, t);\r\n        }\r\n\r\n        function drawOverlay() {\r\n            redrawTimeout = null;\r\n\r\n            // draw highlights\r\n            octx.save();\r\n            overlay.clear();\r\n            octx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            var i, hi;\r\n            for (i = 0; i < highlights.length; ++i) {\r\n                hi = highlights[i];\r\n\r\n                if (hi.series.bars.show)\r\n                    drawBarHighlight(hi.series, hi.point);\r\n                else\r\n                    drawPointHighlight(hi.series, hi.point);\r\n            }\r\n            octx.restore();\r\n\r\n            executeHooks(hooks.drawOverlay, [octx]);\r\n        }\r\n\r\n        function highlight(s, point, auto) {\r\n            if (typeof s == \"number\")\r\n                s = series[s];\r\n\r\n            if (typeof point == \"number\") {\r\n                var ps = s.datapoints.pointsize;\r\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\r\n            }\r\n\r\n            var i = indexOfHighlight(s, point);\r\n            if (i == -1) {\r\n                highlights.push({ series: s, point: point, auto: auto });\r\n\r\n                triggerRedrawOverlay();\r\n            }\r\n            else if (!auto)\r\n                highlights[i].auto = false;\r\n        }\r\n\r\n        function unhighlight(s, point) {\r\n            if (s == null && point == null) {\r\n                highlights = [];\r\n                triggerRedrawOverlay();\r\n                return;\r\n            }\r\n\r\n            if (typeof s == \"number\")\r\n                s = series[s];\r\n\r\n            if (typeof point == \"number\") {\r\n                var ps = s.datapoints.pointsize;\r\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\r\n            }\r\n\r\n            var i = indexOfHighlight(s, point);\r\n            if (i != -1) {\r\n                highlights.splice(i, 1);\r\n\r\n                triggerRedrawOverlay();\r\n            }\r\n        }\r\n\r\n        function indexOfHighlight(s, p) {\r\n            for (var i = 0; i < highlights.length; ++i) {\r\n                var h = highlights[i];\r\n                if (h.series == s && h.point[0] == p[0]\r\n                    && h.point[1] == p[1])\r\n                    return i;\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        function drawPointHighlight(series, point) {\r\n            var x = point[0], y = point[1],\r\n                axisx = series.xaxis, axisy = series.yaxis,\r\n                highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString();\r\n\r\n            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\r\n                return;\r\n\r\n            var pointRadius = series.points.radius + series.points.lineWidth / 2;\r\n            octx.lineWidth = pointRadius;\r\n            octx.strokeStyle = highlightColor;\r\n            var radius = 1.5 * pointRadius;\r\n            x = axisx.p2c(x);\r\n            y = axisy.p2c(y);\r\n\r\n            octx.beginPath();\r\n            if (series.points.symbol == \"circle\")\r\n                octx.arc(x, y, radius, 0, 2 * Math.PI, false);\r\n            else\r\n                series.points.symbol(octx, x, y, radius, false);\r\n            octx.closePath();\r\n            octx.stroke();\r\n        }\r\n\r\n        function drawBarHighlight(series, point) {\r\n            var highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString(),\r\n                fillStyle = highlightColor,\r\n                barLeft;\r\n\r\n            switch (series.bars.align) {\r\n                case \"left\":\r\n                    barLeft = 0;\r\n                    break;\r\n                case \"right\":\r\n                    barLeft = -series.bars.barWidth;\r\n                    break;\r\n                default:\r\n                    barLeft = -series.bars.barWidth / 2;\r\n            }\r\n\r\n            octx.lineWidth = series.bars.lineWidth;\r\n            octx.strokeStyle = highlightColor;\r\n\r\n            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,\r\n                    function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);\r\n        }\r\n\r\n        function getColorOrGradient(spec, bottom, top, defaultColor) {\r\n            if (typeof spec == \"string\")\r\n                return spec;\r\n            else {\r\n                // assume this is a gradient spec; IE currently only\r\n                // supports a simple vertical gradient properly, so that's\r\n                // what we support too\r\n                var gradient = ctx.createLinearGradient(0, top, 0, bottom);\r\n\r\n                for (var i = 0, l = spec.colors.length; i < l; ++i) {\r\n                    var c = spec.colors[i];\r\n                    if (typeof c != \"string\") {\r\n                        var co = $.color.parse(defaultColor);\r\n                        if (c.brightness != null)\r\n                            co = co.scale('rgb', c.brightness);\r\n                        if (c.opacity != null)\r\n                            co.a *= c.opacity;\r\n                        c = co.toString();\r\n                    }\r\n                    gradient.addColorStop(i / (l - 1), c);\r\n                }\r\n\r\n                return gradient;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Add the plot function to the top level of the jQuery object\r\n\r\n    $.plot = function(placeholder, data, options) {\r\n        //var t0 = new Date();\r\n        var plot = new Plot($(placeholder), data, options, $.plot.plugins);\r\n        //(window.console ? console.log : alert)(\"time used (msecs): \" + ((new Date()).getTime() - t0.getTime()));\r\n        return plot;\r\n    };\r\n\r\n    $.plot.version = \"0.8.3\";\r\n\r\n    $.plot.plugins = [];\r\n\r\n    // Also add the plot function as a chainable property\r\n\r\n    $.fn.plot = function(data, options) {\r\n        return this.each(function() {\r\n            $.plot(this, data, options);\r\n        });\r\n    };\r\n\r\n    // round to nearby lower multiple of base\r\n    function floorInBase(n, base) {\r\n        return base * Math.floor(n / base);\r\n    }\r\n\r\n})(jQuery);\r\n","import React from 'react';\r\nimport { components } from 'react-select';\r\nimport { OptionProps } from 'react-select/lib/components/Option';\r\n\r\n// https://github.com/JedWatson/react-select/issues/3038\r\ninterface ExtendedOptionProps extends OptionProps<any> {\r\n  data: any;\r\n}\r\n\r\nexport const Option = (props: ExtendedOptionProps) => {\r\n  const { children, isSelected, data, className } = props;\r\n  return (\r\n    <components.Option {...props}>\r\n      <div className={`description-picker-option__button btn btn-link ${className}`}>\r\n        {isSelected && <i className=\"fa fa-check pull-right\" aria-hidden=\"true\" />}\r\n        <div className=\"gf-form\">{children}</div>\r\n        <div className=\"gf-form\">\r\n          <div className=\"muted width-17\">{data.description}</div>\r\n        </div>\r\n      </div>\r\n    </components.Option>\r\n  );\r\n};\r\n\r\nexport default Option;\r\n","import React, { Component } from 'react';\r\nimport Select from 'react-select';\r\nimport DescriptionOption from './DescriptionOption';\r\nimport IndicatorsContainer from './IndicatorsContainer';\r\nimport ResetStyles from './ResetStyles';\r\nimport NoOptionsMessage from './NoOptionsMessage';\r\n\r\nexport interface OptionWithDescription {\r\n  value: any;\r\n  label: string;\r\n  description: string;\r\n}\r\n\r\nexport interface Props {\r\n  optionsWithDesc: OptionWithDescription[];\r\n  onSelected: (permission) => void;\r\n  disabled: boolean;\r\n  className?: string;\r\n  value?: any;\r\n}\r\n\r\nconst getSelectedOption = (optionsWithDesc, value) => optionsWithDesc.find(option => option.value === value);\r\n\r\nclass DescriptionPicker extends Component<Props, any> {\r\n  render() {\r\n    const { optionsWithDesc, onSelected, disabled, className, value } = this.props;\r\n    const selectedOption = getSelectedOption(optionsWithDesc, value);\r\n    return (\r\n      <div className=\"permissions-picker\">\r\n        <Select\r\n          placeholder=\"Choose\"\r\n          classNamePrefix={`gf-form-select-box`}\r\n          className={`width-7 gf-form-input gf-form-input--form-dropdown ${className || ''}`}\r\n          options={optionsWithDesc}\r\n          components={{\r\n            Option: DescriptionOption,\r\n            IndicatorsContainer,\r\n            NoOptionsMessage,\r\n          }}\r\n          styles={ResetStyles}\r\n          isDisabled={disabled}\r\n          onChange={onSelected}\r\n          getOptionValue={i => i.value}\r\n          getOptionLabel={i => i.label}\r\n          value={selectedOption}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DescriptionPicker;\r\n","import React from 'react';\r\nimport { components } from 'react-select';\r\nimport { OptionProps } from 'react-select/lib/components/Option';\r\n\r\n// https://github.com/JedWatson/react-select/issues/3038\r\ninterface ExtendedOptionProps extends OptionProps<any> {\r\n  data: any;\r\n}\r\n\r\nexport const PickerOption = (props: ExtendedOptionProps) => {\r\n  const { children, data, className } = props;\r\n  return (\r\n    <components.Option {...props}>\r\n      <div className={`description-picker-option__button btn btn-link ${className}`}>\r\n        {data.avatarUrl && <img src={data.avatarUrl} alt={data.label} className=\"user-picker-option__avatar\" />}\r\n        {children}\r\n      </div>\r\n    </components.Option>\r\n  );\r\n};\r\n\r\nexport default PickerOption;\r\n","import { NavModelItem } from '../../types';\r\n\r\nexport enum ActionTypes {\r\n  UpdateNavIndex = 'UPDATE_NAV_INDEX',\r\n}\r\n\r\nexport type Action = UpdateNavIndexAction;\r\n\r\nexport interface UpdateNavIndexAction {\r\n  type: ActionTypes.UpdateNavIndex;\r\n  payload: NavModelItem;\r\n}\r\n\r\nexport const updateNavIndex = (item: NavModelItem): UpdateNavIndexAction => ({\r\n  type: ActionTypes.UpdateNavIndex,\r\n  payload: item,\r\n});\r\n","import { renderUrl } from 'app/core/utils/url';\r\nimport { ExploreState, ExploreUrlState } from 'app/types/explore';\r\n\r\nexport const DEFAULT_RANGE = {\r\n  from: 'now-6h',\r\n  to: 'now',\r\n};\r\n\r\n/**\r\n * Returns an Explore-URL that contains a panel's queries and the dashboard time range.\r\n *\r\n * @param panel Origin panel of the jump to Explore\r\n * @param panelTargets The origin panel's query targets\r\n * @param panelDatasource The origin panel's datasource\r\n * @param datasourceSrv Datasource service to query other datasources in case the panel datasource is mixed\r\n * @param timeSrv Time service to get the current dashboard range from\r\n */\r\nexport async function getExploreUrl(\r\n  panel: any,\r\n  panelTargets: any[],\r\n  panelDatasource: any,\r\n  datasourceSrv: any,\r\n  timeSrv: any\r\n) {\r\n  let exploreDatasource = panelDatasource;\r\n  let exploreTargets = panelTargets;\r\n  let url;\r\n\r\n  // Mixed datasources need to choose only one datasource\r\n  if (panelDatasource.meta.id === 'mixed' && panelTargets) {\r\n    // Find first explore datasource among targets\r\n    let mixedExploreDatasource;\r\n    for (const t of panel.targets) {\r\n      const datasource = await datasourceSrv.get(t.datasource);\r\n      if (datasource && datasource.meta.explore) {\r\n        mixedExploreDatasource = datasource;\r\n        break;\r\n      }\r\n    }\r\n\r\n    // Add all its targets\r\n    if (mixedExploreDatasource) {\r\n      exploreDatasource = mixedExploreDatasource;\r\n      exploreTargets = panelTargets.filter(t => t.datasource === mixedExploreDatasource.name);\r\n    }\r\n  }\r\n\r\n  if (exploreDatasource && exploreDatasource.meta.explore) {\r\n    const range = timeSrv.timeRangeForUrl();\r\n    const state = {\r\n      ...exploreDatasource.getExploreState(exploreTargets),\r\n      range,\r\n    };\r\n    const exploreState = JSON.stringify(state);\r\n    url = renderUrl('/explore', { state: exploreState });\r\n  }\r\n  return url;\r\n}\r\n\r\nexport function parseUrlState(initial: string | undefined): ExploreUrlState {\r\n  if (initial) {\r\n    try {\r\n      const parsed = JSON.parse(decodeURI(initial));\r\n      if (Array.isArray(parsed)) {\r\n        if (parsed.length <= 3) {\r\n          throw new Error('Error parsing compact URL state for Explore.');\r\n        }\r\n        const range = {\r\n          from: parsed[0],\r\n          to: parsed[1],\r\n        };\r\n        const datasource = parsed[2];\r\n        const queries = parsed.slice(3).map(query => ({ query }));\r\n        return { datasource, queries, range };\r\n      }\r\n      return parsed;\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n  return { datasource: null, queries: [], range: DEFAULT_RANGE };\r\n}\r\n\r\nexport function serializeStateToUrlParam(state: ExploreState, compact?: boolean): string {\r\n  const urlState: ExploreUrlState = {\r\n    datasource: state.datasourceName,\r\n    queries: state.queries.map(q => ({ query: q.query })),\r\n    range: state.range,\r\n  };\r\n  if (compact) {\r\n    return JSON.stringify([\r\n      urlState.range.from,\r\n      urlState.range.to,\r\n      urlState.datasource,\r\n      ...urlState.queries.map(q => q.query),\r\n    ]);\r\n  }\r\n  return JSON.stringify(urlState);\r\n}\r\n","const TAG_COLORS = [\r\n  '#E24D42',\r\n  '#1F78C1',\r\n  '#BA43A9',\r\n  '#705DA0',\r\n  '#466803',\r\n  '#508642',\r\n  '#447EBC',\r\n  '#C15C17',\r\n  '#890F02',\r\n  '#757575',\r\n  '#0A437C',\r\n  '#6D1F62',\r\n  '#584477',\r\n  '#629E51',\r\n  '#2F4F4F',\r\n  '#BF1B00',\r\n  '#806EB7',\r\n  '#8a2eb8',\r\n  '#699e00',\r\n  '#000000',\r\n  '#3F6833',\r\n  '#2F575E',\r\n  '#99440A',\r\n  '#E0752D',\r\n  '#0E4AB4',\r\n  '#58140C',\r\n  '#052B51',\r\n  '#511749',\r\n  '#3F2B5B',\r\n];\r\n\r\nconst TAG_BORDER_COLORS = [\r\n  '#FF7368',\r\n  '#459EE7',\r\n  '#E069CF',\r\n  '#9683C6',\r\n  '#6C8E29',\r\n  '#76AC68',\r\n  '#6AA4E2',\r\n  '#E7823D',\r\n  '#AF3528',\r\n  '#9B9B9B',\r\n  '#3069A2',\r\n  '#934588',\r\n  '#7E6A9D',\r\n  '#88C477',\r\n  '#557575',\r\n  '#E54126',\r\n  '#A694DD',\r\n  '#B054DE',\r\n  '#8FC426',\r\n  '#262626',\r\n  '#658E59',\r\n  '#557D84',\r\n  '#BF6A30',\r\n  '#FF9B53',\r\n  '#3470DA',\r\n  '#7E3A32',\r\n  '#2B5177',\r\n  '#773D6F',\r\n  '#655181',\r\n];\r\n\r\n/**\r\n * Returns tag badge background and border colors based on hashed tag name.\r\n * @param name tag name\r\n */\r\nexport function getTagColorsFromName(name: string): { color: string; borderColor: string } {\r\n  const hash = djb2(name.toLowerCase());\r\n  const color = TAG_COLORS[Math.abs(hash % TAG_COLORS.length)];\r\n  const borderColor = TAG_BORDER_COLORS[Math.abs(hash % TAG_BORDER_COLORS.length)];\r\n  return { color, borderColor };\r\n}\r\n\r\nfunction djb2(str) {\r\n  let hash = 5381;\r\n  for (let i = 0; i < str.length; i++) {\r\n    hash = (hash << 5) + hash + str.charCodeAt(i); /* hash * 33 + c */\r\n  }\r\n  return hash;\r\n}\r\n\r\nexport default {\r\n  getTagColorsFromName,\r\n};\r\n","import { Team, NavModelItem, NavModel } from 'app/types';\r\nimport config from 'app/core/config';\r\n\r\nexport function buildNavModel(team: Team): NavModelItem {\r\n  const navModel = {\r\n    img: team.avatarUrl,\r\n    id: 'team-' + team.id,\r\n    subTitle: 'Manage members & settings',\r\n    url: '',\r\n    text: team.name,\r\n    breadcrumbs: [{ title: 'Teams', url: 'org/teams' }],\r\n    children: [\r\n      {\r\n        active: false,\r\n        icon: 'gicon gicon-team',\r\n        id: `team-members-${team.id}`,\r\n        text: 'Members',\r\n        url: `org/teams/edit/${team.id}/members`,\r\n      },\r\n      {\r\n        active: false,\r\n        icon: 'fa fa-fw fa-sliders',\r\n        id: `team-settings-${team.id}`,\r\n        text: 'Settings',\r\n        url: `org/teams/edit/${team.id}/settings`,\r\n      },\r\n    ],\r\n  };\r\n\r\n  if (config.buildInfo.isEnterprise) {\r\n    navModel.children.push({\r\n      active: false,\r\n      icon: 'fa fa-fw fa-refresh',\r\n      id: `team-groupsync-${team.id}`,\r\n      text: 'External group sync',\r\n      url: `org/teams/edit/${team.id}/groupsync`,\r\n    });\r\n  }\r\n\r\n  return navModel;\r\n}\r\n\r\nexport function getTeamLoadingNav(pageName: string): NavModel {\r\n  const main = buildNavModel({\r\n    avatarUrl: 'public/img/user_profile.png',\r\n    id: 1,\r\n    name: 'Loading',\r\n    email: 'loading',\r\n    memberCount: 0,\r\n  });\r\n\r\n  let node: NavModelItem;\r\n\r\n  // find active page\r\n  for (const child of main.children) {\r\n    if (child.id.indexOf(pageName) > 0) {\r\n      child.active = true;\r\n      node = child;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return {\r\n    main: main,\r\n    node: node,\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport AsyncSelect from 'react-select/lib/Async';\r\nimport PickerOption from './PickerOption';\r\nimport { debounce } from 'lodash';\r\nimport { getBackendSrv } from 'app/core/services/backend_srv';\r\nimport { User } from 'app/types';\r\nimport ResetStyles from './ResetStyles';\r\nimport IndicatorsContainer from './IndicatorsContainer';\r\nimport NoOptionsMessage from './NoOptionsMessage';\r\n\r\nexport interface Props {\r\n  onSelected: (user: User) => void;\r\n  className?: string;\r\n}\r\n\r\nexport interface State {\r\n  isLoading: boolean;\r\n}\r\n\r\nexport class UserPicker extends Component<Props, State> {\r\n  debouncedSearch: any;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { isLoading: false };\r\n    this.search = this.search.bind(this);\r\n\r\n    this.debouncedSearch = debounce(this.search, 300, {\r\n      leading: true,\r\n      trailing: true,\r\n    });\r\n  }\r\n\r\n  search(query?: string) {\r\n    const backendSrv = getBackendSrv();\r\n    this.setState({ isLoading: true });\r\n\r\n    return backendSrv\r\n      .get(`/api/org/users?query=${query}&limit=10`)\r\n      .then(result => {\r\n        return result.map(user => ({\r\n          id: user.userId,\r\n          label: `${user.login} - ${user.email}`,\r\n          avatarUrl: user.avatarUrl,\r\n          login: user.login,\r\n        }));\r\n      })\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { className, onSelected } = this.props;\r\n    const { isLoading } = this.state;\r\n\r\n    return (\r\n      <div className=\"user-picker\">\r\n        <AsyncSelect\r\n          classNamePrefix={`gf-form-select-box`}\r\n          isMulti={false}\r\n          isLoading={isLoading}\r\n          defaultOptions={true}\r\n          loadOptions={this.debouncedSearch}\r\n          onChange={onSelected}\r\n          className={`gf-form-input gf-form-input--form-dropdown ${className || ''}`}\r\n          styles={ResetStyles}\r\n          components={{\r\n            Option: PickerOption,\r\n            IndicatorsContainer,\r\n            NoOptionsMessage,\r\n          }}\r\n          placeholder=\"Select user\"\r\n          loadingMessage={() => 'Loading...'}\r\n          noOptionsMessage={() => 'No users found'}\r\n          getOptionValue={i => i.id}\r\n          getOptionLabel={i => i.label}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\n\r\nexport interface DeleteButtonProps {\r\n  onConfirmDelete();\r\n}\r\n\r\nexport interface DeleteButtonStates {\r\n  showConfirm: boolean;\r\n}\r\n\r\nexport default class DeleteButton extends PureComponent<DeleteButtonProps, DeleteButtonStates> {\r\n  state: DeleteButtonStates = {\r\n    showConfirm: false,\r\n  };\r\n\r\n  onClickDelete = event => {\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    this.setState({\r\n      showConfirm: true,\r\n    });\r\n  };\r\n\r\n  onClickCancel = event => {\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n    this.setState({\r\n      showConfirm: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const onClickConfirm = this.props.onConfirmDelete;\r\n    let showConfirm;\r\n    let showDeleteButton;\r\n\r\n    if (this.state.showConfirm) {\r\n      showConfirm = 'show';\r\n      showDeleteButton = 'hide';\r\n    } else {\r\n      showConfirm = 'hide';\r\n      showDeleteButton = 'show';\r\n    }\r\n\r\n    return (\r\n      <span className=\"delete-button-container\">\r\n        <a className={'delete-button ' + showDeleteButton + ' btn btn-danger btn-small'} onClick={this.onClickDelete}>\r\n          <i className=\"fa fa-remove\" />\r\n        </a>\r\n        <span className=\"confirm-delete-container\">\r\n          <span className={'confirm-delete ' + showConfirm}>\r\n            <a className=\"btn btn-small\" onClick={this.onClickCancel}>\r\n              Cancel\r\n            </a>\r\n            <a className=\"btn btn-danger btn-small\" onClick={onClickConfirm}>\r\n              Confirm Delete\r\n            </a>\r\n          </span>\r\n        </span>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport LayoutSelector, { LayoutMode } from '../LayoutSelector/LayoutSelector';\r\n\r\nexport interface Props {\r\n  searchQuery: string;\r\n  layoutMode?: LayoutMode;\r\n  onSetLayoutMode?: (mode: LayoutMode) => {};\r\n  setSearchQuery: (value: string) => {};\r\n  linkButton: { href: string; title: string };\r\n  target?: string;\r\n}\r\n\r\nexport default class OrgActionBar extends PureComponent<Props> {\r\n  render() {\r\n    const { searchQuery, layoutMode, onSetLayoutMode, linkButton, setSearchQuery, target } = this.props;\r\n    const linkProps = { href: linkButton.href, target: undefined };\r\n\r\n    if (target) {\r\n      linkProps.target = target;\r\n    }\r\n\r\n    return (\r\n      <div className=\"page-action-bar\">\r\n        <div className=\"gf-form gf-form--grow\">\r\n          <label className=\"gf-form--has-input-icon\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"gf-form-input width-20\"\r\n              value={searchQuery}\r\n              onChange={event => setSearchQuery(event.target.value)}\r\n              placeholder=\"Filter by name or type\"\r\n            />\r\n            <i className=\"gf-form-input-icon fa fa-search\" />\r\n          </label>\r\n          <LayoutSelector mode={layoutMode} onLayoutModeChanged={(mode: LayoutMode) => onSetLayoutMode(mode)} />\r\n        </div>\r\n        <div className=\"page-action-bar__spacer\" />\r\n        <a className=\"btn btn-success\" {...linkProps}>\r\n          {linkButton.title}\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default () => {\r\n  return (\r\n    <div className=\"\">\r\n      <h5>What are Permissions?</h5>\r\n      <p>\r\n        An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be\r\n        assigned permissions for a folder or for a single dashboard.\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n","import React, { PureComponent } from 'react';\r\nimport DescriptionPicker from 'app/core/components/Picker/DescriptionPicker';\r\nimport { dashboardPermissionLevels, DashboardAcl, PermissionLevel } from 'app/types/acl';\r\nimport { FolderInfo } from 'app/types';\r\n\r\nconst setClassNameHelper = inherited => {\r\n  return inherited ? 'gf-form-disabled' : '';\r\n};\r\n\r\nfunction ItemAvatar({ item }) {\r\n  if (item.userAvatarUrl) {\r\n    return <img className=\"filter-table__avatar\" src={item.userAvatarUrl} />;\r\n  }\r\n  if (item.teamAvatarUrl) {\r\n    return <img className=\"filter-table__avatar\" src={item.teamAvatarUrl} />;\r\n  }\r\n  if (item.role === 'Editor') {\r\n    return <i style={{ width: '25px', height: '25px' }} className=\"gicon gicon-editor\" />;\r\n  }\r\n\r\n  return <i style={{ width: '25px', height: '25px' }} className=\"gicon gicon-viewer\" />;\r\n}\r\n\r\nfunction ItemDescription({ item }) {\r\n  if (item.userId) {\r\n    return <span className=\"filter-table__weak-italic\">(User)</span>;\r\n  }\r\n  if (item.teamId) {\r\n    return <span className=\"filter-table__weak-italic\">(Team)</span>;\r\n  }\r\n  return <span className=\"filter-table__weak-italic\">(Role)</span>;\r\n}\r\n\r\ninterface Props {\r\n  item: DashboardAcl;\r\n  onRemoveItem: (item: DashboardAcl) => void;\r\n  onPermissionChanged: (item: DashboardAcl, level: PermissionLevel) => void;\r\n  folderInfo?: FolderInfo;\r\n}\r\n\r\nexport default class PermissionsListItem extends PureComponent<Props> {\r\n  onPermissionChanged = option => {\r\n    this.props.onPermissionChanged(this.props.item, option.value as PermissionLevel);\r\n  };\r\n\r\n  onRemoveItem = () => {\r\n    this.props.onRemoveItem(this.props.item);\r\n  };\r\n\r\n  render() {\r\n    const { item, folderInfo } = this.props;\r\n    const inheritedFromRoot = item.dashboardId === -1 && !item.inherited;\r\n\r\n    return (\r\n      <tr className={setClassNameHelper(item.inherited)}>\r\n        <td style={{ width: '1%' }}>\r\n          <ItemAvatar item={item} />\r\n        </td>\r\n        <td style={{ width: '90%' }}>\r\n          {item.name} <ItemDescription item={item} />\r\n        </td>\r\n        <td>\r\n          {item.inherited &&\r\n            folderInfo && (\r\n              <em className=\"muted no-wrap\">\r\n                Inherited from folder{' '}\r\n                <a className=\"text-link\" href={`${folderInfo.url}/permissions`}>\r\n                  {folderInfo.title}\r\n                </a>{' '}\r\n              </em>\r\n            )}\r\n          {inheritedFromRoot && <em className=\"muted no-wrap\">Default Permission</em>}\r\n        </td>\r\n        <td className=\"query-keyword\">Can</td>\r\n        <td>\r\n          <div className=\"gf-form\">\r\n            <DescriptionPicker\r\n              optionsWithDesc={dashboardPermissionLevels}\r\n              onSelected={this.onPermissionChanged}\r\n              disabled={item.inherited}\r\n              className={'gf-form-select-box__control--menu-right'}\r\n              value={item.permission}\r\n            />\r\n          </div>\r\n        </td>\r\n        <td>\r\n          {!item.inherited ? (\r\n            <a className=\"btn btn-danger btn-small\" onClick={this.onRemoveItem}>\r\n              <i className=\"fa fa-remove\" />\r\n            </a>\r\n          ) : (\r\n            <button className=\"btn btn-inverse btn-small\">\r\n              <i className=\"fa fa-lock\" />\r\n            </button>\r\n          )}\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport DescriptionPicker from 'app/core/components/Picker/DescriptionPicker';\r\nimport { dashboardPermissionLevels } from 'app/types/acl';\r\n\r\nexport interface Props {\r\n  item: any;\r\n}\r\n\r\nexport default class DisabledPermissionListItem extends Component<Props, any> {\r\n  render() {\r\n    const { item } = this.props;\r\n\r\n    return (\r\n      <tr className=\"gf-form-disabled\">\r\n        <td style={{ width: '1%' }}>\r\n          <i style={{ width: '25px', height: '25px' }} className=\"gicon gicon-shield\" />\r\n        </td>\r\n        <td style={{ width: '90%' }}>\r\n          {item.name}\r\n          <span className=\"filter-table__weak-italic\"> (Role)</span>\r\n        </td>\r\n        <td />\r\n        <td className=\"query-keyword\">Can</td>\r\n        <td>\r\n          <div className=\"gf-form\">\r\n            <DescriptionPicker\r\n              optionsWithDesc={dashboardPermissionLevels}\r\n              onSelected={() => {}}\r\n              disabled={true}\r\n              className={'gf-form-select-box__control--menu-right'}\r\n              value={item.permission}\r\n            />\r\n          </div>\r\n        </td>\r\n        <td>\r\n          <button className=\"btn btn-inverse btn-small\">\r\n            <i className=\"fa fa-lock\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport PermissionsListItem from './PermissionListItem';\r\nimport DisabledPermissionsListItem from './DisabledPermissionListItem';\r\nimport { FolderInfo } from 'app/types';\r\nimport { DashboardAcl } from 'app/types/acl';\r\n\r\nexport interface Props {\r\n  items: DashboardAcl[];\r\n  onRemoveItem: (item: DashboardAcl) => void;\r\n  onPermissionChanged: any;\r\n  isFetching: boolean;\r\n  folderInfo?: FolderInfo;\r\n}\r\n\r\nclass PermissionList extends PureComponent<Props> {\r\n  render() {\r\n    const { items, onRemoveItem, onPermissionChanged, isFetching, folderInfo } = this.props;\r\n\r\n    return (\r\n      <table className=\"filter-table gf-form-group\">\r\n        <tbody>\r\n          <DisabledPermissionsListItem\r\n            key={0}\r\n            item={{\r\n              name: 'Admin',\r\n              permission: 4,\r\n              icon: 'fa fa-fw fa-street-view',\r\n            }}\r\n          />\r\n          {items.map((item, idx) => {\r\n            return (\r\n              <PermissionsListItem\r\n                key={idx + 1}\r\n                item={item}\r\n                onRemoveItem={onRemoveItem}\r\n                onPermissionChanged={onPermissionChanged}\r\n                folderInfo={folderInfo}\r\n              />\r\n            );\r\n          })}\r\n          {isFetching === true && items.length < 1 ? (\r\n            <tr>\r\n              <td colSpan={4}>\r\n                <em>Loading permissions...</em>\r\n              </td>\r\n            </tr>\r\n          ) : null}\r\n\r\n          {isFetching === false && items.length < 1 ? (\r\n            <tr>\r\n              <td colSpan={4}>\r\n                <em>No permissions are set. Will only be accessible by admins.</em>\r\n              </td>\r\n            </tr>\r\n          ) : null}\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PermissionList;\r\n","import React, { Component } from 'react';\r\nimport AsyncSelect from 'react-select/lib/Async';\r\nimport PickerOption from './PickerOption';\r\nimport { debounce } from 'lodash';\r\nimport { getBackendSrv } from 'app/core/services/backend_srv';\r\nimport ResetStyles from './ResetStyles';\r\nimport IndicatorsContainer from './IndicatorsContainer';\r\nimport NoOptionsMessage from './NoOptionsMessage';\r\n\r\nexport interface Team {\r\n  id: number;\r\n  label: string;\r\n  name: string;\r\n  avatarUrl: string;\r\n}\r\n\r\nexport interface Props {\r\n  onSelected: (team: Team) => void;\r\n  className?: string;\r\n}\r\n\r\nexport interface State {\r\n  isLoading: boolean;\r\n}\r\n\r\nexport class TeamPicker extends Component<Props, State> {\r\n  debouncedSearch: any;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { isLoading: false };\r\n    this.search = this.search.bind(this);\r\n\r\n    this.debouncedSearch = debounce(this.search, 300, {\r\n      leading: true,\r\n      trailing: true,\r\n    });\r\n  }\r\n\r\n  search(query?: string) {\r\n    const backendSrv = getBackendSrv();\r\n    this.setState({ isLoading: true });\r\n\r\n    return backendSrv.get(`/api/teams/search?perpage=10&page=1&query=${query}`).then(result => {\r\n      const teams = result.teams.map(team => {\r\n        return {\r\n          id: team.id,\r\n          label: team.name,\r\n          name: team.name,\r\n          avatarUrl: team.avatarUrl,\r\n        };\r\n      });\r\n\r\n      this.setState({ isLoading: false });\r\n      return teams;\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { onSelected, className } = this.props;\r\n    const { isLoading } = this.state;\r\n    return (\r\n      <div className=\"user-picker\">\r\n        <AsyncSelect\r\n          classNamePrefix={`gf-form-select-box`}\r\n          isMulti={false}\r\n          isLoading={isLoading}\r\n          defaultOptions={true}\r\n          loadOptions={this.debouncedSearch}\r\n          onChange={onSelected}\r\n          className={`gf-form-input gf-form-input--form-dropdown ${className || ''}`}\r\n          styles={ResetStyles}\r\n          components={{\r\n            Option: PickerOption,\r\n            IndicatorsContainer,\r\n            NoOptionsMessage,\r\n          }}\r\n          placeholder=\"Select a team\"\r\n          loadingMessage={() => 'Loading...'}\r\n          noOptionsMessage={() => 'No teams found'}\r\n          getOptionValue={i => i.id}\r\n          getOptionLabel={i => i.label}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { UserPicker } from 'app/core/components/Picker/UserPicker';\r\nimport { TeamPicker, Team } from 'app/core/components/Picker/TeamPicker';\r\nimport DescriptionPicker, { OptionWithDescription } from 'app/core/components/Picker/DescriptionPicker';\r\nimport { User } from 'app/types';\r\nimport {\r\n  dashboardPermissionLevels,\r\n  dashboardAclTargets,\r\n  AclTarget,\r\n  PermissionLevel,\r\n  NewDashboardAclItem,\r\n  OrgRole,\r\n} from 'app/types/acl';\r\n\r\nexport interface Props {\r\n  onAddPermission: (item: NewDashboardAclItem) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nclass AddPermissions extends Component<Props, NewDashboardAclItem> {\r\n  static defaultProps = {\r\n    showPermissionLevels: true,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = this.getCleanState();\r\n  }\r\n\r\n  getCleanState() {\r\n    return {\r\n      userId: 0,\r\n      teamId: 0,\r\n      type: AclTarget.Team,\r\n      permission: PermissionLevel.View,\r\n    };\r\n  }\r\n\r\n  onTypeChanged = evt => {\r\n    const type = evt.target.value as AclTarget;\r\n\r\n    switch (type) {\r\n      case AclTarget.User:\r\n      case AclTarget.Team:\r\n        this.setState({ type: type, userId: 0, teamId: 0, role: undefined });\r\n        break;\r\n      case AclTarget.Editor:\r\n        this.setState({ type: type, userId: 0, teamId: 0, role: OrgRole.Editor });\r\n        break;\r\n      case AclTarget.Viewer:\r\n        this.setState({ type: type, userId: 0, teamId: 0, role: OrgRole.Viewer });\r\n        break;\r\n    }\r\n  };\r\n\r\n  onUserSelected = (user: User) => {\r\n    this.setState({ userId: user && !Array.isArray(user) ? user.id : 0 });\r\n  };\r\n\r\n  onTeamSelected = (team: Team) => {\r\n    this.setState({ teamId: team && !Array.isArray(team) ? team.id : 0 });\r\n  };\r\n\r\n  onPermissionChanged = (permission: OptionWithDescription) => {\r\n    this.setState({ permission: permission.value });\r\n  };\r\n\r\n  onSubmit = async evt => {\r\n    evt.preventDefault();\r\n    await this.props.onAddPermission(this.state);\r\n    this.setState(this.getCleanState());\r\n  };\r\n\r\n  isValid() {\r\n    switch (this.state.type) {\r\n      case AclTarget.Team:\r\n        return this.state.teamId > 0;\r\n      case AclTarget.User:\r\n        return this.state.userId > 0;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  render() {\r\n    const { onCancel } = this.props;\r\n    const newItem = this.state;\r\n    const pickerClassName = 'width-20';\r\n    const isValid = this.isValid();\r\n    return (\r\n      <div className=\"gf-form-inline cta-form\">\r\n        <button className=\"cta-form__close btn btn-transparent\" onClick={onCancel}>\r\n          <i className=\"fa fa-close\" />\r\n        </button>\r\n        <form name=\"addPermission\" onSubmit={this.onSubmit}>\r\n          <h5>Add Permission For</h5>\r\n          <div className=\"gf-form-inline\">\r\n            <div className=\"gf-form\">\r\n              <div className=\"gf-form-select-wrapper\">\r\n                <select className=\"gf-form-input gf-size-auto\" value={newItem.type} onChange={this.onTypeChanged}>\r\n                  {dashboardAclTargets.map((option, idx) => {\r\n                    return (\r\n                      <option key={idx} value={option.value}>\r\n                        {option.text}\r\n                      </option>\r\n                    );\r\n                  })}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            {newItem.type === AclTarget.User ? (\r\n              <div className=\"gf-form\">\r\n                <UserPicker onSelected={this.onUserSelected} className={pickerClassName} />\r\n              </div>\r\n            ) : null}\r\n\r\n            {newItem.type === AclTarget.Team ? (\r\n              <div className=\"gf-form\">\r\n                <TeamPicker onSelected={this.onTeamSelected} className={pickerClassName} />\r\n              </div>\r\n            ) : null}\r\n\r\n            <div className=\"gf-form\">\r\n              <DescriptionPicker\r\n                optionsWithDesc={dashboardPermissionLevels}\r\n                onSelected={this.onPermissionChanged}\r\n                disabled={false}\r\n                className={'gf-form-select-box__control--menu-right'}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"gf-form\">\r\n              <button data-save-permission className=\"btn btn-success\" type=\"submit\" disabled={!isValid}>\r\n                Save\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddPermissions;\r\n","export const getPlugins = state => {\r\n  const regex = new RegExp(state.searchQuery, 'i');\r\n\r\n  return state.plugins.filter(item => {\r\n    return regex.test(item.name) || regex.test(item.info.author.name) || regex.test(item.info.description);\r\n  });\r\n};\r\n\r\nexport const getPluginsSearchQuery = state => state.searchQuery;\r\nexport const getLayoutMode = state => state.layoutMode;\r\n","/* Pretty handling of time axes.\r\n\r\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nSet axis.mode to \"time\" to enable. See the section \"Time series data\" in\r\nAPI.txt for details.\r\n\r\n*/\r\n\r\n(function($) {\r\n\r\n\tvar options = {\r\n\t\txaxis: {\r\n\t\t\ttimezone: null,\t\t// \"browser\" for local to the client or timezone for timezone-js\r\n\t\t\ttimeformat: null,\t// format string to use\r\n\t\t\ttwelveHourClock: false,\t// 12 or 24 time in time mode\r\n\t\t\tmonthNames: null\t// list of names of months\r\n\t\t}\r\n\t};\r\n\r\n\t// round to nearby lower multiple of base\r\n\r\n\tfunction floorInBase(n, base) {\r\n\t\treturn base * Math.floor(n / base);\r\n\t}\r\n\r\n\t// Returns a string with the date d formatted according to fmt.\r\n\t// A subset of the Open Group's strftime format is supported.\r\n\r\n\tfunction formatDate(d, fmt, monthNames, dayNames) {\r\n\r\n\t\tif (typeof d.strftime == \"function\") {\r\n\t\t\treturn d.strftime(fmt);\r\n\t\t}\r\n\r\n\t\tvar leftPad = function(n, pad) {\r\n\t\t\tn = \"\" + n;\r\n\t\t\tpad = \"\" + (pad == null ? \"0\" : pad);\r\n\t\t\treturn n.length == 1 ? pad + n : n;\r\n\t\t};\r\n\r\n\t\tvar r = [];\r\n\t\tvar escape = false;\r\n\t\tvar hours = d.getHours();\r\n\t\tvar isAM = hours < 12;\r\n\r\n\t\tif (monthNames == null) {\r\n\t\t\tmonthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\t\t}\r\n\r\n\t\tif (dayNames == null) {\r\n\t\t\tdayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\t\t}\r\n\r\n\t\tvar hours12;\r\n\r\n\t\tif (hours > 12) {\r\n\t\t\thours12 = hours - 12;\r\n\t\t} else if (hours == 0) {\r\n\t\t\thours12 = 12;\r\n\t\t} else {\r\n\t\t\thours12 = hours;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < fmt.length; ++i) {\r\n\r\n\t\t\tvar c = fmt.charAt(i);\r\n\r\n\t\t\tif (escape) {\r\n\t\t\t\tswitch (c) {\r\n\t\t\t\t\tcase 'a': c = \"\" + dayNames[d.getDay()]; break;\r\n\t\t\t\t\tcase 'b': c = \"\" + monthNames[d.getMonth()]; break;\r\n\t\t\t\t\tcase 'd': c = leftPad(d.getDate(), \"\"); break;\r\n\t\t\t\t\tcase 'e': c = leftPad(d.getDate(), \" \"); break;\r\n\t\t\t\t\tcase 'h':\t// For back-compat with 0.7; remove in 1.0\r\n\t\t\t\t\tcase 'H': c = leftPad(hours); break;\r\n\t\t\t\t\tcase 'I': c = leftPad(hours12); break;\r\n\t\t\t\t\tcase 'l': c = leftPad(hours12, \" \"); break;\r\n\t\t\t\t\tcase 'm': c = leftPad(d.getMonth() + 1, \"\"); break;\r\n\t\t\t\t\tcase 'M': c = leftPad(d.getMinutes()); break;\r\n\t\t\t\t\t// quarters not in Open Group's strftime specification\r\n\t\t\t\t\tcase 'q':\r\n\t\t\t\t\t\tc = \"\" + (Math.floor(d.getMonth() / 3) + 1); break;\r\n\t\t\t\t\tcase 'S': c = leftPad(d.getSeconds()); break;\r\n\t\t\t\t\tcase 'y': c = leftPad(d.getFullYear() % 100); break;\r\n\t\t\t\t\tcase 'Y': c = \"\" + d.getFullYear(); break;\r\n\t\t\t\t\tcase 'p': c = (isAM) ? (\"\" + \"am\") : (\"\" + \"pm\"); break;\r\n\t\t\t\t\tcase 'P': c = (isAM) ? (\"\" + \"AM\") : (\"\" + \"PM\"); break;\r\n\t\t\t\t\tcase 'w': c = \"\" + d.getDay(); break;\r\n\t\t\t\t}\r\n\t\t\t\tr.push(c);\r\n\t\t\t\tescape = false;\r\n\t\t\t} else {\r\n\t\t\t\tif (c == \"%\") {\r\n\t\t\t\t\tescape = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tr.push(c);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn r.join(\"\");\r\n\t}\r\n\r\n\t// To have a consistent view of time-based data independent of which time\r\n\t// zone the client happens to be in we need a date-like object independent\r\n\t// of time zones.  This is done through a wrapper that only calls the UTC\r\n\t// versions of the accessor methods.\r\n\r\n\tfunction makeUtcWrapper(d) {\r\n\r\n\t\tfunction addProxyMethod(sourceObj, sourceMethod, targetObj, targetMethod) {\r\n\t\t\tsourceObj[sourceMethod] = function() {\r\n\t\t\t\treturn targetObj[targetMethod].apply(targetObj, arguments);\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tvar utc = {\r\n\t\t\tdate: d\r\n\t\t};\r\n\r\n\t\t// support strftime, if found\r\n\r\n\t\tif (d.strftime != undefined) {\r\n\t\t\taddProxyMethod(utc, \"strftime\", d, \"strftime\");\r\n\t\t}\r\n\r\n\t\taddProxyMethod(utc, \"getTime\", d, \"getTime\");\r\n\t\taddProxyMethod(utc, \"setTime\", d, \"setTime\");\r\n\r\n\t\tvar props = [\"Date\", \"Day\", \"FullYear\", \"Hours\", \"Milliseconds\", \"Minutes\", \"Month\", \"Seconds\"];\r\n\r\n\t\tfor (var p = 0; p < props.length; p++) {\r\n\t\t\taddProxyMethod(utc, \"get\" + props[p], d, \"getUTC\" + props[p]);\r\n\t\t\taddProxyMethod(utc, \"set\" + props[p], d, \"setUTC\" + props[p]);\r\n\t\t}\r\n\r\n\t\treturn utc;\r\n\t};\r\n\r\n\t// select time zone strategy.  This returns a date-like object tied to the\r\n\t// desired timezone\r\n\r\n\tfunction dateGenerator(ts, opts) {\r\n\t\tif (opts.timezone == \"browser\") {\r\n\t\t\treturn new Date(ts);\r\n\t\t} else if (!opts.timezone || opts.timezone == \"utc\") {\r\n\t\t\treturn makeUtcWrapper(new Date(ts));\r\n\t\t} else if (typeof timezoneJS != \"undefined\" && typeof timezoneJS.Date != \"undefined\") {\r\n\t\t\tvar d = new timezoneJS.Date();\r\n\t\t\t// timezone-js is fickle, so be sure to set the time zone before\r\n\t\t\t// setting the time.\r\n\t\t\td.setTimezone(opts.timezone);\r\n\t\t\td.setTime(ts);\r\n\t\t\treturn d;\r\n\t\t} else {\r\n\t\t\treturn makeUtcWrapper(new Date(ts));\r\n\t\t}\r\n\t}\r\n\r\n\t// map of app. size of time units in milliseconds\r\n\r\n\tvar timeUnitSize = {\r\n\t\t\"second\": 1000,\r\n\t\t\"minute\": 60 * 1000,\r\n\t\t\"hour\": 60 * 60 * 1000,\r\n\t\t\"day\": 24 * 60 * 60 * 1000,\r\n\t\t\"month\": 30 * 24 * 60 * 60 * 1000,\r\n\t\t\"quarter\": 3 * 30 * 24 * 60 * 60 * 1000,\r\n\t\t\"year\": 365.2425 * 24 * 60 * 60 * 1000\r\n\t};\r\n\r\n\t// the allowed tick sizes, after 1 year we use\r\n\t// an integer algorithm\r\n\r\n\tvar baseSpec = [\r\n\t\t[1, \"second\"], [2, \"second\"], [5, \"second\"], [10, \"second\"],\r\n\t\t[30, \"second\"],\r\n\t\t[1, \"minute\"], [2, \"minute\"], [5, \"minute\"], [10, \"minute\"],\r\n\t\t[30, \"minute\"],\r\n\t\t[1, \"hour\"], [2, \"hour\"], [4, \"hour\"],\r\n\t\t[8, \"hour\"], [12, \"hour\"],\r\n\t\t[1, \"day\"], [2, \"day\"], [3, \"day\"],\r\n\t\t[0.25, \"month\"], [0.5, \"month\"], [1, \"month\"],\r\n\t\t[2, \"month\"]\r\n\t];\r\n\r\n\t// we don't know which variant(s) we'll need yet, but generating both is\r\n\t// cheap\r\n\r\n\tvar specMonths = baseSpec.concat([[3, \"month\"], [6, \"month\"],\r\n\t\t[1, \"year\"]]);\r\n\tvar specQuarters = baseSpec.concat([[1, \"quarter\"], [2, \"quarter\"],\r\n\t\t[1, \"year\"]]);\r\n\r\n\tfunction init(plot) {\r\n\t\tplot.hooks.processOptions.push(function (plot, options) {\r\n\t\t\t$.each(plot.getAxes(), function(axisName, axis) {\r\n\r\n\t\t\t\tvar opts = axis.options;\r\n\r\n\t\t\t\tif (opts.mode == \"time\") {\r\n\t\t\t\t\taxis.tickGenerator = function(axis) {\r\n\r\n\t\t\t\t\t\tvar ticks = [];\r\n\t\t\t\t\t\tvar d = dateGenerator(axis.min, opts);\r\n\t\t\t\t\t\tvar minSize = 0;\r\n\r\n\t\t\t\t\t\t// make quarter use a possibility if quarters are\r\n\t\t\t\t\t\t// mentioned in either of these options\r\n\r\n\t\t\t\t\t\tvar spec = (opts.tickSize && opts.tickSize[1] ===\r\n\t\t\t\t\t\t\t\"quarter\") ||\r\n\t\t\t\t\t\t\t(opts.minTickSize && opts.minTickSize[1] ===\r\n\t\t\t\t\t\t\t\"quarter\") ? specQuarters : specMonths;\r\n\r\n\t\t\t\t\t\tif (opts.minTickSize != null) {\r\n\t\t\t\t\t\t\tif (typeof opts.tickSize == \"number\") {\r\n\t\t\t\t\t\t\t\tminSize = opts.tickSize;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tminSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < spec.length - 1; ++i) {\r\n\t\t\t\t\t\t\tif (axis.delta < (spec[i][0] * timeUnitSize[spec[i][1]]\r\n\t\t\t\t\t\t\t\t\t\t\t  + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2\r\n\t\t\t\t\t\t\t\t&& spec[i][0] * timeUnitSize[spec[i][1]] >= minSize) {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar size = spec[i][0];\r\n\t\t\t\t\t\tvar unit = spec[i][1];\r\n\r\n\t\t\t\t\t\t// special-case the possibility of several years\r\n\r\n\t\t\t\t\t\tif (unit == \"year\") {\r\n\r\n\t\t\t\t\t\t\t// if given a minTickSize in years, just use it,\r\n\t\t\t\t\t\t\t// ensuring that it's an integer\r\n\r\n\t\t\t\t\t\t\tif (opts.minTickSize != null && opts.minTickSize[1] == \"year\") {\r\n\t\t\t\t\t\t\t\tsize = Math.floor(opts.minTickSize[0]);\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tvar magn = Math.pow(10, Math.floor(Math.log(axis.delta / timeUnitSize.year) / Math.LN10));\r\n\t\t\t\t\t\t\t\tvar norm = (axis.delta / timeUnitSize.year) / magn;\r\n\r\n\t\t\t\t\t\t\t\tif (norm < 1.5) {\r\n\t\t\t\t\t\t\t\t\tsize = 1;\r\n\t\t\t\t\t\t\t\t} else if (norm < 3) {\r\n\t\t\t\t\t\t\t\t\tsize = 2;\r\n\t\t\t\t\t\t\t\t} else if (norm < 7.5) {\r\n\t\t\t\t\t\t\t\t\tsize = 5;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsize = 10;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tsize *= magn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// minimum size for years is 1\r\n\r\n\t\t\t\t\t\t\tif (size < 1) {\r\n\t\t\t\t\t\t\t\tsize = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\taxis.tickSize = opts.tickSize || [size, unit];\r\n\t\t\t\t\t\tvar tickSize = axis.tickSize[0];\r\n\t\t\t\t\t\tunit = axis.tickSize[1];\r\n\r\n\t\t\t\t\t\tvar step = tickSize * timeUnitSize[unit];\r\n\r\n\t\t\t\t\t\tif (unit == \"second\") {\r\n\t\t\t\t\t\t\td.setSeconds(floorInBase(d.getSeconds(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"minute\") {\r\n\t\t\t\t\t\t\td.setMinutes(floorInBase(d.getMinutes(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"hour\") {\r\n\t\t\t\t\t\t\td.setHours(floorInBase(d.getHours(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"month\") {\r\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"quarter\") {\r\n\t\t\t\t\t\t\td.setMonth(3 * floorInBase(d.getMonth() / 3,\r\n\t\t\t\t\t\t\t\ttickSize));\r\n\t\t\t\t\t\t} else if (unit == \"year\") {\r\n\t\t\t\t\t\t\td.setFullYear(floorInBase(d.getFullYear(), tickSize));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// reset smaller components\r\n\r\n\t\t\t\t\t\td.setMilliseconds(0);\r\n\r\n\t\t\t\t\t\tif (step >= timeUnitSize.minute) {\r\n\t\t\t\t\t\t\td.setSeconds(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.hour) {\r\n\t\t\t\t\t\t\td.setMinutes(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.day) {\r\n\t\t\t\t\t\t\td.setHours(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.day * 4) {\r\n\t\t\t\t\t\t\td.setDate(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.month * 2) {\r\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 3));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.quarter * 2) {\r\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 6));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.year) {\r\n\t\t\t\t\t\t\td.setMonth(0);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar carry = 0;\r\n\t\t\t\t\t\tvar v = Number.NaN;\r\n\t\t\t\t\t\tvar prev;\r\n\r\n\t\t\t\t\t\tdo {\r\n\r\n\t\t\t\t\t\t\tprev = v;\r\n\t\t\t\t\t\t\tv = d.getTime();\r\n\t\t\t\t\t\t\tticks.push(v);\r\n\r\n\t\t\t\t\t\t\tif (unit == \"month\" || unit == \"quarter\") {\r\n\t\t\t\t\t\t\t\tif (tickSize < 1) {\r\n\r\n\t\t\t\t\t\t\t\t\t// a bit complicated - we'll divide the\r\n\t\t\t\t\t\t\t\t\t// month/quarter up but we need to take\r\n\t\t\t\t\t\t\t\t\t// care of fractions so we don't end up in\r\n\t\t\t\t\t\t\t\t\t// the middle of a day\r\n\r\n\t\t\t\t\t\t\t\t\td.setDate(1);\r\n\t\t\t\t\t\t\t\t\tvar start = d.getTime();\r\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\r\n\t\t\t\t\t\t\t\t\t\t(unit == \"quarter\" ? 3 : 1));\r\n\t\t\t\t\t\t\t\t\tvar end = d.getTime();\r\n\t\t\t\t\t\t\t\t\td.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);\r\n\t\t\t\t\t\t\t\t\tcarry = d.getHours();\r\n\t\t\t\t\t\t\t\t\td.setHours(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\r\n\t\t\t\t\t\t\t\t\t\ttickSize * (unit == \"quarter\" ? 3 : 1));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (unit == \"year\") {\r\n\t\t\t\t\t\t\t\td.setFullYear(d.getFullYear() + tickSize);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\td.setTime(v + step);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} while (v < axis.max && v != prev);\r\n\r\n\t\t\t\t\t\treturn ticks;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\taxis.tickFormatter = function (v, axis) {\r\n\r\n\t\t\t\t\t\tvar d = dateGenerator(v, axis.options);\r\n\r\n\t\t\t\t\t\t// first check global format\r\n\r\n\t\t\t\t\t\tif (opts.timeformat != null) {\r\n\t\t\t\t\t\t\treturn formatDate(d, opts.timeformat, opts.monthNames, opts.dayNames);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// possibly use quarters if quarters are mentioned in\r\n\t\t\t\t\t\t// any of these places\r\n\r\n\t\t\t\t\t\tvar useQuarters = (axis.options.tickSize &&\r\n\t\t\t\t\t\t\t\taxis.options.tickSize[1] == \"quarter\") ||\r\n\t\t\t\t\t\t\t(axis.options.minTickSize &&\r\n\t\t\t\t\t\t\t\taxis.options.minTickSize[1] == \"quarter\");\r\n\r\n\t\t\t\t\t\tvar t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];\r\n\t\t\t\t\t\tvar span = axis.max - axis.min;\r\n\t\t\t\t\t\tvar suffix = (opts.twelveHourClock) ? \" %p\" : \"\";\r\n\t\t\t\t\t\tvar hourCode = (opts.twelveHourClock) ? \"%I\" : \"%H\";\r\n\t\t\t\t\t\tvar fmt;\r\n\r\n\t\t\t\t\t\tif (t < timeUnitSize.minute) {\r\n\t\t\t\t\t\t\tfmt = hourCode + \":%M:%S\" + suffix;\r\n\t\t\t\t\t\t} else if (t < timeUnitSize.day) {\r\n\t\t\t\t\t\t\tif (span < 2 * timeUnitSize.day) {\r\n\t\t\t\t\t\t\t\tfmt = hourCode + \":%M\" + suffix;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfmt = \"%b %d \" + hourCode + \":%M\" + suffix;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (t < timeUnitSize.month) {\r\n\t\t\t\t\t\t\tfmt = \"%b %d\";\r\n\t\t\t\t\t\t} else if ((useQuarters && t < timeUnitSize.quarter) ||\r\n\t\t\t\t\t\t\t(!useQuarters && t < timeUnitSize.year)) {\r\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\r\n\t\t\t\t\t\t\t\tfmt = \"%b\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfmt = \"%b %Y\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (useQuarters && t < timeUnitSize.year) {\r\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\r\n\t\t\t\t\t\t\t\tfmt = \"Q%q\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfmt = \"Q%q %Y\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfmt = \"%Y\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar rt = formatDate(d, fmt, opts.monthNames, opts.dayNames);\r\n\r\n\t\t\t\t\t\treturn rt;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t$.plot.plugins.push({\r\n\t\tinit: init,\r\n\t\toptions: options,\r\n\t\tname: 'time',\r\n\t\tversion: '1.0'\r\n\t});\r\n\r\n\t// Time-axis support used to be in Flot core, which exposed the\r\n\t// formatDate function on the plot object.  Various plugins depend\r\n\t// on the function, so we need to re-expose it here.\r\n\r\n\t$.plot.formatDate = formatDate;\r\n\r\n})(jQuery);\r\n","import React from 'react';\r\nimport { NavModel, NavModelItem } from 'app/types';\r\nimport classNames from 'classnames';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport interface Props {\r\n  model: NavModel;\r\n}\r\n\r\nconst SelectNav = ({ main, customCss }: { main: NavModelItem; customCss: string }) => {\r\n  const defaultSelectedItem = main.children.find(navItem => {\r\n    return navItem.active === true;\r\n  });\r\n\r\n  const gotoUrl = evt => {\r\n    const element = evt.target;\r\n    const url = element.options[element.selectedIndex].value;\r\n    appEvents.emit('location-change', { href: url });\r\n  };\r\n\r\n  return (\r\n    <div className={`gf-form-select-wrapper width-20 ${customCss}`}>\r\n      <label className={`gf-form-select-icon ${defaultSelectedItem.icon}`} htmlFor=\"page-header-select-nav\" />\r\n      {/* Label to make it clickable */}\r\n      <select\r\n        className=\"gf-select-nav gf-form-input\"\r\n        value={defaultSelectedItem.url}\r\n        onChange={gotoUrl}\r\n        id=\"page-header-select-nav\"\r\n      >\r\n        {main.children.map((navItem: NavModelItem) => {\r\n          if (navItem.hideFromTabs) {\r\n            // TODO: Rename hideFromTabs => hideFromNav\r\n            return null;\r\n          }\r\n          return (\r\n            <option key={navItem.url} value={navItem.url}>\r\n              {navItem.text}\r\n            </option>\r\n          );\r\n        })}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Tabs = ({ main, customCss }: { main: NavModelItem; customCss: string }) => {\r\n  return (\r\n    <ul className={`gf-tabs ${customCss}`}>\r\n      {main.children.map((tab, idx) => {\r\n        if (tab.hideFromTabs) {\r\n          return null;\r\n        }\r\n\r\n        const tabClasses = classNames({\r\n          'gf-tabs-link': true,\r\n          active: tab.active,\r\n        });\r\n\r\n        return (\r\n          <li className=\"gf-tabs-item\" key={tab.url}>\r\n            <a className={tabClasses} target={tab.target} href={tab.url}>\r\n              <i className={tab.icon} />\r\n              {tab.text}\r\n            </a>\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nconst Navigation = ({ main }: { main: NavModelItem }) => {\r\n  return (\r\n    <nav>\r\n      <SelectNav customCss=\"page-header__select-nav\" main={main} />\r\n      <Tabs customCss=\"page-header__tabs\" main={main} />\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default class PageHeader extends React.Component<Props, any> {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    //Hack to re-render on changed props from angular with the @observer decorator\r\n    return true;\r\n  }\r\n\r\n  renderTitle(title: string, breadcrumbs: any[]) {\r\n    if (!title && (!breadcrumbs || breadcrumbs.length === 0)) {\r\n      return null;\r\n    }\r\n\r\n    if (!breadcrumbs || breadcrumbs.length === 0) {\r\n      return <h1 className=\"page-header__title\">{title}</h1>;\r\n    }\r\n\r\n    const breadcrumbsResult = [];\r\n    for (let i = 0; i < breadcrumbs.length; i++) {\r\n      const bc = breadcrumbs[i];\r\n      if (bc.url) {\r\n        breadcrumbsResult.push(\r\n          <a className=\"text-link\" key={i} href={bc.url}>\r\n            {bc.title}\r\n          </a>\r\n        );\r\n      } else {\r\n        breadcrumbsResult.push(<span key={i}> / {bc.title}</span>);\r\n      }\r\n    }\r\n    breadcrumbsResult.push(<span key={breadcrumbs.length + 1}> / {title}</span>);\r\n\r\n    return <h1 className=\"page-header__title\">{breadcrumbsResult}</h1>;\r\n  }\r\n\r\n  renderHeaderTitle(main) {\r\n    return (\r\n      <div className=\"page-header__inner\">\r\n        <span className=\"page-header__logo\">\r\n          {main.icon && <i className={`page-header__icon ${main.icon}`} />}\r\n          {main.img && <img className=\"page-header__img\" src={main.img} />}\r\n        </span>\r\n\r\n        <div className=\"page-header__info-block\">\r\n          {this.renderTitle(main.text, main.breadcrumbs)}\r\n          {main.subTitle && <div className=\"page-header__sub-title\">{main.subTitle}</div>}\r\n          {main.subType && (\r\n            <div className=\"page-header__stamps\">\r\n              <i className={main.subType.icon} />\r\n              {main.subType.text}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { model } = this.props;\r\n\r\n    if (!model) {\r\n      return null;\r\n    }\r\n\r\n    const main = model.main;\r\n\r\n    return (\r\n      <div className=\"page-header-canvas\">\r\n        <div className=\"page-container\">\r\n          <div className=\"page-header\">\r\n            {this.renderHeaderTitle(main)}\r\n            {main.children && <Navigation main={main} />}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export const GRID_CELL_HEIGHT = 30;\r\nexport const GRID_CELL_VMARGIN = 10;\r\nexport const GRID_COLUMN_COUNT = 24;\r\nexport const REPEAT_DIR_VERTICAL = 'v';\r\n\r\nexport const DEFAULT_PANEL_SPAN = 4;\r\nexport const DEFAULT_ROW_HEIGHT = 250;\r\nexport const MIN_PANEL_HEIGHT = GRID_CELL_HEIGHT * 3;\r\n\r\nexport const LS_PANEL_COPY_KEY = 'panel-copy';\r\n\r\nexport const DASHBOARD_TOOLBAR_HEIGHT = 55;\r\nexport const DASHBOARD_TOP_PADDING = 20;\r\n","import _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nconst units = ['y', 'M', 'w', 'd', 'h', 'm', 's'];\r\n\r\nexport function parse(text, roundUp?, timezone?) {\r\n  if (!text) {\r\n    return undefined;\r\n  }\r\n  if (moment.isMoment(text)) {\r\n    return text;\r\n  }\r\n  if (_.isDate(text)) {\r\n    return moment(text);\r\n  }\r\n\r\n  let time;\r\n  let mathString = '';\r\n  let index;\r\n  let parseString;\r\n\r\n  if (text.substring(0, 3) === 'now') {\r\n    if (timezone === 'utc') {\r\n      time = moment.utc();\r\n    } else {\r\n      time = moment();\r\n    }\r\n    mathString = text.substring('now'.length);\r\n  } else {\r\n    index = text.indexOf('||');\r\n    if (index === -1) {\r\n      parseString = text;\r\n      mathString = ''; // nothing else\r\n    } else {\r\n      parseString = text.substring(0, index);\r\n      mathString = text.substring(index + 2);\r\n    }\r\n    // We're going to just require ISO8601 timestamps, k?\r\n    time = moment(parseString, moment.ISO_8601);\r\n  }\r\n\r\n  if (!mathString.length) {\r\n    return time;\r\n  }\r\n\r\n  return parseDateMath(mathString, time, roundUp);\r\n}\r\n\r\nexport function isValid(text) {\r\n  const date = parse(text);\r\n  if (!date) {\r\n    return false;\r\n  }\r\n\r\n  if (moment.isMoment(date)) {\r\n    return date.isValid();\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function parseDateMath(mathString, time, roundUp?) {\r\n  const dateTime = time;\r\n  let i = 0;\r\n  const len = mathString.length;\r\n\r\n  while (i < len) {\r\n    const c = mathString.charAt(i++);\r\n    let type;\r\n    let num;\r\n    let unit;\r\n\r\n    if (c === '/') {\r\n      type = 0;\r\n    } else if (c === '+') {\r\n      type = 1;\r\n    } else if (c === '-') {\r\n      type = 2;\r\n    } else {\r\n      return undefined;\r\n    }\r\n\r\n    if (isNaN(mathString.charAt(i))) {\r\n      num = 1;\r\n    } else if (mathString.length === 2) {\r\n      num = mathString.charAt(i);\r\n    } else {\r\n      const numFrom = i;\r\n      while (!isNaN(mathString.charAt(i))) {\r\n        i++;\r\n        if (i > 10) {\r\n          return undefined;\r\n        }\r\n      }\r\n      num = parseInt(mathString.substring(numFrom, i), 10);\r\n    }\r\n\r\n    if (type === 0) {\r\n      // rounding is only allowed on whole, single, units (eg M or 1M, not 0.5M or 2M)\r\n      if (num !== 1) {\r\n        return undefined;\r\n      }\r\n    }\r\n    unit = mathString.charAt(i++);\r\n\r\n    if (!_.includes(units, unit)) {\r\n      return undefined;\r\n    } else {\r\n      if (type === 0) {\r\n        if (roundUp) {\r\n          dateTime.endOf(unit);\r\n        } else {\r\n          dateTime.startOf(unit);\r\n        }\r\n      } else if (type === 1) {\r\n        dateTime.add(num, unit);\r\n      } else if (type === 2) {\r\n        dateTime.subtract(num, unit);\r\n      }\r\n    }\r\n  }\r\n  return dateTime;\r\n}\r\n","import { NavModel, NavModelItem, NavIndex } from 'app/types';\r\n\r\nfunction getNotFoundModel(): NavModel {\r\n  const node: NavModelItem = {\r\n    id: 'not-found',\r\n    text: 'Page not found',\r\n    icon: 'fa fa-fw fa-warning',\r\n    subTitle: '404 Error',\r\n    url: 'not-found',\r\n  };\r\n\r\n  return {\r\n    node: node,\r\n    main: node,\r\n  };\r\n}\r\n\r\nexport function getNavModel(navIndex: NavIndex, id: string, fallback?: NavModel): NavModel {\r\n  if (navIndex[id]) {\r\n    const node = navIndex[id];\r\n    const main = {\r\n      ...node.parentItem,\r\n    };\r\n\r\n    main.children = main.children.map(item => {\r\n      return {\r\n        ...item,\r\n        active: item.url === node.url,\r\n      };\r\n    });\r\n\r\n    return {\r\n      node: node,\r\n      main: main,\r\n    };\r\n  }\r\n\r\n  if (fallback) {\r\n    return fallback;\r\n  }\r\n\r\n  return getNotFoundModel();\r\n}\r\n","export const getSearchQuery = state => state.searchQuery;\r\n\r\nexport const getAlertRuleItems = state => {\r\n  const regex = new RegExp(state.searchQuery, 'i');\r\n\r\n  return state.items.filter(item => {\r\n    return regex.test(item.name) || regex.test(item.stateText) || regex.test(item.info);\r\n  });\r\n};\r\n","import { ThunkAction } from 'redux-thunk';\r\nimport { getBackendSrv } from 'app/core/services/backend_srv';\r\nimport { StoreState, Team, TeamGroup, TeamMember } from 'app/types';\r\nimport { updateNavIndex, UpdateNavIndexAction } from 'app/core/actions';\r\nimport { buildNavModel } from './navModel';\r\n\r\nexport enum ActionTypes {\r\n  LoadTeams = 'LOAD_TEAMS',\r\n  LoadTeam = 'LOAD_TEAM',\r\n  SetSearchQuery = 'SET_TEAM_SEARCH_QUERY',\r\n  SetSearchMemberQuery = 'SET_TEAM_MEMBER_SEARCH_QUERY',\r\n  LoadTeamMembers = 'TEAM_MEMBERS_LOADED',\r\n  LoadTeamGroups = 'TEAM_GROUPS_LOADED',\r\n}\r\n\r\nexport interface LoadTeamsAction {\r\n  type: ActionTypes.LoadTeams;\r\n  payload: Team[];\r\n}\r\n\r\nexport interface LoadTeamAction {\r\n  type: ActionTypes.LoadTeam;\r\n  payload: Team;\r\n}\r\n\r\nexport interface LoadTeamMembersAction {\r\n  type: ActionTypes.LoadTeamMembers;\r\n  payload: TeamMember[];\r\n}\r\n\r\nexport interface LoadTeamGroupsAction {\r\n  type: ActionTypes.LoadTeamGroups;\r\n  payload: TeamGroup[];\r\n}\r\n\r\nexport interface SetSearchQueryAction {\r\n  type: ActionTypes.SetSearchQuery;\r\n  payload: string;\r\n}\r\n\r\nexport interface SetSearchMemberQueryAction {\r\n  type: ActionTypes.SetSearchMemberQuery;\r\n  payload: string;\r\n}\r\n\r\nexport type Action =\r\n  | LoadTeamsAction\r\n  | SetSearchQueryAction\r\n  | LoadTeamAction\r\n  | LoadTeamMembersAction\r\n  | SetSearchMemberQueryAction\r\n  | LoadTeamGroupsAction;\r\n\r\ntype ThunkResult<R> = ThunkAction<R, StoreState, undefined, Action | UpdateNavIndexAction>;\r\n\r\nconst teamsLoaded = (teams: Team[]): LoadTeamsAction => ({\r\n  type: ActionTypes.LoadTeams,\r\n  payload: teams,\r\n});\r\n\r\nconst teamLoaded = (team: Team): LoadTeamAction => ({\r\n  type: ActionTypes.LoadTeam,\r\n  payload: team,\r\n});\r\n\r\nconst teamMembersLoaded = (teamMembers: TeamMember[]): LoadTeamMembersAction => ({\r\n  type: ActionTypes.LoadTeamMembers,\r\n  payload: teamMembers,\r\n});\r\n\r\nconst teamGroupsLoaded = (teamGroups: TeamGroup[]): LoadTeamGroupsAction => ({\r\n  type: ActionTypes.LoadTeamGroups,\r\n  payload: teamGroups,\r\n});\r\n\r\nexport const setSearchMemberQuery = (searchQuery: string): SetSearchMemberQueryAction => ({\r\n  type: ActionTypes.SetSearchMemberQuery,\r\n  payload: searchQuery,\r\n});\r\n\r\nexport const setSearchQuery = (searchQuery: string): SetSearchQueryAction => ({\r\n  type: ActionTypes.SetSearchQuery,\r\n  payload: searchQuery,\r\n});\r\n\r\nexport function loadTeams(): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const response = await getBackendSrv().get('/api/teams/search', { perpage: 1000, page: 1 });\r\n    dispatch(teamsLoaded(response.teams));\r\n  };\r\n}\r\n\r\nexport function loadTeam(id: number): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const response = await getBackendSrv().get(`/api/teams/${id}`);\r\n    dispatch(teamLoaded(response));\r\n    dispatch(updateNavIndex(buildNavModel(response)));\r\n  };\r\n}\r\n\r\nexport function loadTeamMembers(): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const team = getStore().team.team;\r\n    const response = await getBackendSrv().get(`/api/teams/${team.id}/members`);\r\n    dispatch(teamMembersLoaded(response));\r\n  };\r\n}\r\n\r\nexport function addTeamMember(id: number): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const team = getStore().team.team;\r\n    await getBackendSrv().post(`/api/teams/${team.id}/members`, { userId: id });\r\n    dispatch(loadTeamMembers());\r\n  };\r\n}\r\n\r\nexport function removeTeamMember(id: number): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const team = getStore().team.team;\r\n    await getBackendSrv().delete(`/api/teams/${team.id}/members/${id}`);\r\n    dispatch(loadTeamMembers());\r\n  };\r\n}\r\n\r\nexport function updateTeam(name: string, email: string): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const team = getStore().team.team;\r\n    await getBackendSrv().put(`/api/teams/${team.id}`, { name, email });\r\n    dispatch(loadTeam(team.id));\r\n  };\r\n}\r\n\r\nexport function loadTeamGroups(): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const team = getStore().team.team;\r\n    const response = await getBackendSrv().get(`/api/teams/${team.id}/groups`);\r\n    dispatch(teamGroupsLoaded(response));\r\n  };\r\n}\r\n\r\nexport function addTeamGroup(groupId: string): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const team = getStore().team.team;\r\n    await getBackendSrv().post(`/api/teams/${team.id}/groups`, { groupId: groupId });\r\n    dispatch(loadTeamGroups());\r\n  };\r\n}\r\n\r\nexport function removeTeamGroup(groupId: string): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const team = getStore().team.team;\r\n    await getBackendSrv().delete(`/api/teams/${team.id}/groups/${groupId}`);\r\n    dispatch(loadTeamGroups());\r\n  };\r\n}\r\n\r\nexport function deleteTeam(id: number): ThunkResult<void> {\r\n  return async dispatch => {\r\n    await getBackendSrv().delete(`/api/teams/${id}`);\r\n    dispatch(loadTeams());\r\n  };\r\n}\r\n","export class Store {\r\n  get(key) {\r\n    return window.localStorage[key];\r\n  }\r\n\r\n  set(key, value) {\r\n    window.localStorage[key] = value;\r\n  }\r\n\r\n  getBool(key, def) {\r\n    if (def !== void 0 && !this.exists(key)) {\r\n      return def;\r\n    }\r\n    return window.localStorage[key] === 'true';\r\n  }\r\n\r\n  getObject(key: string, def?: any) {\r\n    let ret = def;\r\n    if (this.exists(key)) {\r\n      const json = window.localStorage[key];\r\n      try {\r\n        ret = JSON.parse(json);\r\n      } catch (error) {\r\n        console.error(`Error parsing store object: ${key}. Returning default: ${def}. [${error}]`);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  // Returns true when successfully stored\r\n  setObject(key: string, value: any): boolean {\r\n    let json;\r\n    try {\r\n      json = JSON.stringify(value);\r\n    } catch (error) {\r\n      console.error(`Could not stringify object: ${key}. [${error}]`);\r\n      return false;\r\n    }\r\n    try {\r\n      this.set(key, json);\r\n    } catch (error) {\r\n      // Likely hitting storage quota\r\n      console.error(`Could not save item in localStorage: ${key}. [${error}]`);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  exists(key) {\r\n    return window.localStorage[key] !== void 0;\r\n  }\r\n\r\n  delete(key) {\r\n    window.localStorage.removeItem(key);\r\n  }\r\n}\r\n\r\nconst store = new Store();\r\nexport default store;\r\n","export enum OrgRole {\r\n  Viewer = 'Viewer',\r\n  Editor = 'Editor',\r\n  Admin = 'Admin',\r\n}\r\n\r\nexport interface DashboardAclDTO {\r\n  id?: number;\r\n  dashboardId?: number;\r\n  userId?: number;\r\n  userLogin?: string;\r\n  userEmail?: string;\r\n  teamId?: number;\r\n  team?: string;\r\n  permission?: PermissionLevel;\r\n  role?: OrgRole;\r\n  icon?: string;\r\n  inherited?: boolean;\r\n}\r\n\r\nexport interface DashboardAclUpdateDTO {\r\n  userId: number;\r\n  teamId: number;\r\n  role: OrgRole;\r\n  permission: PermissionLevel;\r\n}\r\n\r\nexport interface DashboardAcl {\r\n  id?: number;\r\n  dashboardId?: number;\r\n  userId?: number;\r\n  userLogin?: string;\r\n  userEmail?: string;\r\n  teamId?: number;\r\n  team?: string;\r\n  permission?: PermissionLevel;\r\n  role?: OrgRole;\r\n  icon?: string;\r\n  name?: string;\r\n  inherited?: boolean;\r\n  sortRank?: number;\r\n}\r\n\r\nexport interface DashboardPermissionInfo {\r\n  value: PermissionLevel;\r\n  label: string;\r\n  description: string;\r\n}\r\n\r\nexport interface NewDashboardAclItem {\r\n  teamId: number;\r\n  userId: number;\r\n  role?: OrgRole;\r\n  permission: PermissionLevel;\r\n  type: AclTarget;\r\n}\r\n\r\nexport enum PermissionLevel {\r\n  View = 1,\r\n  Edit = 2,\r\n  Admin = 4,\r\n}\r\n\r\nexport enum DataSourcePermissionLevel {\r\n  Query = 1,\r\n  Admin = 2,\r\n}\r\n\r\nexport enum AclTarget {\r\n  Team = 'Team',\r\n  User = 'User',\r\n  Viewer = 'Viewer',\r\n  Editor = 'Editor',\r\n}\r\n\r\nexport interface AclTargetInfo {\r\n  value: AclTarget;\r\n  text: string;\r\n}\r\n\r\nexport const dataSourceAclLevels = [\r\n  { value: DataSourcePermissionLevel.Query, label: 'Query', description: 'Can query data source.' },\r\n];\r\n\r\nexport const dashboardAclTargets: AclTargetInfo[] = [\r\n  { value: AclTarget.Team, text: 'Team' },\r\n  { value: AclTarget.User, text: 'User' },\r\n  { value: AclTarget.Viewer, text: 'Everyone With Viewer Role' },\r\n  { value: AclTarget.Editor, text: 'Everyone With Editor Role' },\r\n];\r\n\r\nexport const dashboardPermissionLevels: DashboardPermissionInfo[] = [\r\n  { value: PermissionLevel.View, label: 'View', description: 'Can view dashboards.' },\r\n  { value: PermissionLevel.Edit, label: 'Edit', description: 'Can add, edit and delete dashboards.' },\r\n  {\r\n    value: PermissionLevel.Admin,\r\n    label: 'Admin',\r\n    description: 'Can add/remove permissions and can add, edit and delete dashboards.',\r\n  },\r\n];\r\n","/**\r\n * Calculate tick step.\r\n * Implementation from d3-array (ticks.js)\r\n * https://github.com/d3/d3-array/blob/master/src/ticks.js\r\n * @param start Start value\r\n * @param stop End value\r\n * @param count Ticks count\r\n */\r\nexport function tickStep(start: number, stop: number, count: number): number {\r\n  const e10 = Math.sqrt(50),\r\n    e5 = Math.sqrt(10),\r\n    e2 = Math.sqrt(2);\r\n\r\n  const step0 = Math.abs(stop - start) / Math.max(0, count);\r\n  let step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10));\r\n  const error = step0 / step1;\r\n\r\n  if (error >= e10) {\r\n    step1 *= 10;\r\n  } else if (error >= e5) {\r\n    step1 *= 5;\r\n  } else if (error >= e2) {\r\n    step1 *= 2;\r\n  }\r\n\r\n  return stop < start ? -step1 : step1;\r\n}\r\n\r\nexport function getScaledDecimals(decimals, tickSize) {\r\n  return decimals - Math.floor(Math.log(tickSize) / Math.LN10);\r\n}\r\n\r\n/**\r\n * Calculate tick size based on min and max values, number of ticks and precision.\r\n * Implementation from Flot.\r\n * @param min           Axis minimum\r\n * @param max           Axis maximum\r\n * @param noTicks       Number of ticks\r\n * @param tickDecimals  Tick decimal precision\r\n */\r\nexport function getFlotTickSize(min: number, max: number, noTicks: number, tickDecimals: number) {\r\n  const delta = (max - min) / noTicks;\r\n  let dec = -Math.floor(Math.log(delta) / Math.LN10);\r\n  const maxDec = tickDecimals;\r\n\r\n  const magn = Math.pow(10, -dec);\r\n  const norm = delta / magn; // norm is between 1.0 and 10.0\r\n  let size;\r\n\r\n  if (norm < 1.5) {\r\n    size = 1;\r\n  } else if (norm < 3) {\r\n    size = 2;\r\n    // special case for 2.5, requires an extra decimal\r\n    if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {\r\n      size = 2.5;\r\n      ++dec;\r\n    }\r\n  } else if (norm < 7.5) {\r\n    size = 5;\r\n  } else {\r\n    size = 10;\r\n  }\r\n\r\n  size *= magn;\r\n\r\n  return size;\r\n}\r\n\r\n/**\r\n * Calculate axis range (min and max).\r\n * Implementation from Flot.\r\n */\r\nexport function getFlotRange(panelMin, panelMax, datamin, datamax) {\r\n  const autoscaleMargin = 0.02;\r\n\r\n  let min = +(panelMin != null ? panelMin : datamin);\r\n  let max = +(panelMax != null ? panelMax : datamax);\r\n  const delta = max - min;\r\n\r\n  if (delta === 0.0) {\r\n    // Grafana fix: wide Y min and max using increased wideFactor\r\n    // when all series values are the same\r\n    const wideFactor = 0.25;\r\n    const widen = Math.abs(max === 0 ? 1 : max * wideFactor);\r\n\r\n    if (panelMin === null) {\r\n      min -= widen;\r\n    }\r\n    // always widen max if we couldn't widen min to ensure we\r\n    // don't fall into min == max which doesn't work\r\n    if (panelMax == null || panelMin != null) {\r\n      max += widen;\r\n    }\r\n  } else {\r\n    // consider autoscaling\r\n    const margin = autoscaleMargin;\r\n    if (margin != null) {\r\n      if (panelMin == null) {\r\n        min -= delta * margin;\r\n        // make sure we don't go below zero if all values\r\n        // are positive\r\n        if (min < 0 && datamin != null && datamin >= 0) {\r\n          min = 0;\r\n        }\r\n      }\r\n      if (panelMax == null) {\r\n        max += delta * margin;\r\n        if (max > 0 && datamax != null && datamax <= 0) {\r\n          max = 0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return { min, max };\r\n}\r\n\r\n/**\r\n * Calculate tick decimals.\r\n * Implementation from Flot.\r\n */\r\nexport function getFlotTickDecimals(datamin, datamax, axis, height) {\r\n  const { min, max } = getFlotRange(axis.min, axis.max, datamin, datamax);\r\n  const noTicks = 0.3 * Math.sqrt(height);\r\n  const delta = (max - min) / noTicks;\r\n  const dec = -Math.floor(Math.log(delta) / Math.LN10);\r\n\r\n  const magn = Math.pow(10, -dec);\r\n  // norm is between 1.0 and 10.0\r\n  const norm = delta / magn;\r\n  let size;\r\n\r\n  if (norm < 1.5) {\r\n    size = 1;\r\n  } else if (norm < 3) {\r\n    size = 2;\r\n    // special case for 2.5, requires an extra decimal\r\n    if (norm > 2.25) {\r\n      size = 2.5;\r\n    }\r\n  } else if (norm < 7.5) {\r\n    size = 5;\r\n  } else {\r\n    size = 10;\r\n  }\r\n  size *= magn;\r\n\r\n  const tickDecimals = Math.max(0, -Math.floor(Math.log(delta) / Math.LN10) + 1);\r\n  // grafana addition\r\n  const scaledDecimals = tickDecimals - Math.floor(Math.log(size) / Math.LN10);\r\n  return { tickDecimals, scaledDecimals };\r\n}\r\n\r\n/**\r\n * Format timestamp similar to Grafana graph panel.\r\n * @param ticks Number of ticks\r\n * @param min Time from (in milliseconds)\r\n * @param max Time to (in milliseconds)\r\n */\r\nexport function grafanaTimeFormat(ticks, min, max) {\r\n  if (min && max && ticks) {\r\n    const range = max - min;\r\n    const secPerTick = range / ticks / 1000;\r\n    const oneDay = 86400000;\r\n    const oneYear = 31536000000;\r\n\r\n    if (secPerTick <= 45) {\r\n      return '%H:%M:%S';\r\n    }\r\n    if (secPerTick <= 7200 || range <= oneDay) {\r\n      return '%H:%M';\r\n    }\r\n    if (secPerTick <= 80000) {\r\n      return '%m/%d %H:%M';\r\n    }\r\n    if (secPerTick <= 2419200 || range <= oneYear) {\r\n      return '%m/%d';\r\n    }\r\n    return '%Y-%m';\r\n  }\r\n\r\n  return '%H:%M';\r\n}\r\n\r\n/**\r\n * Logarithm of value for arbitrary base.\r\n */\r\nexport function logp(value, base) {\r\n  return Math.log(value) / Math.log(base);\r\n}\r\n\r\n/**\r\n * Get decimal precision of number (3.14 => 2)\r\n */\r\nexport function getPrecision(num: number): number {\r\n  const str = num.toString();\r\n  return getStringPrecision(str);\r\n}\r\n\r\n/**\r\n * Get decimal precision of number stored as a string (\"3.14\" => 2)\r\n */\r\nexport function getStringPrecision(num: string): number {\r\n  const dotIndex = num.indexOf('.');\r\n  if (dotIndex === -1) {\r\n    return 0;\r\n  } else {\r\n    return num.length - dotIndex - 1;\r\n  }\r\n}\r\n","import angular from 'angular';\r\n\r\nconst coreModule = angular.module('grafana.core', ['ngRoute']);\r\n\r\n// legacy modules\r\nconst angularModules = [\r\n  coreModule,\r\n  angular.module('grafana.controllers', []),\r\n  angular.module('grafana.directives', []),\r\n  angular.module('grafana.factories', []),\r\n  angular.module('grafana.services', []),\r\n  angular.module('grafana.filters', []),\r\n  angular.module('grafana.routes', []),\r\n];\r\n\r\nexport { angularModules, coreModule };\r\n\r\nexport default coreModule;\r\n","import _ from 'lodash';\r\nimport tinycolor from 'tinycolor2';\r\n\r\nexport const PALETTE_ROWS = 4;\r\nexport const PALETTE_COLUMNS = 14;\r\nexport const DEFAULT_ANNOTATION_COLOR = 'rgba(0, 211, 255, 1)';\r\nexport const OK_COLOR = 'rgba(11, 237, 50, 1)';\r\nexport const ALERTING_COLOR = 'rgba(237, 46, 24, 1)';\r\nexport const NO_DATA_COLOR = 'rgba(150, 150, 150, 1)';\r\nexport const REGION_FILL_ALPHA = 0.09;\r\n\r\nconst colors = [\r\n  '#7EB26D',\r\n  '#EAB839',\r\n  '#6ED0E0',\r\n  '#EF843C',\r\n  '#E24D42',\r\n  '#1F78C1',\r\n  '#BA43A9',\r\n  '#705DA0',\r\n  '#508642',\r\n  '#CCA300',\r\n  '#447EBC',\r\n  '#C15C17',\r\n  '#890F02',\r\n  '#0A437C',\r\n  '#6D1F62',\r\n  '#584477',\r\n  '#B7DBAB',\r\n  '#F4D598',\r\n  '#70DBED',\r\n  '#F9BA8F',\r\n  '#F29191',\r\n  '#82B5D8',\r\n  '#E5A8E2',\r\n  '#AEA2E0',\r\n  '#629E51',\r\n  '#E5AC0E',\r\n  '#64B0C8',\r\n  '#E0752D',\r\n  '#BF1B00',\r\n  '#0A50A1',\r\n  '#962D82',\r\n  '#614D93',\r\n  '#9AC48A',\r\n  '#F2C96D',\r\n  '#65C5DB',\r\n  '#F9934E',\r\n  '#EA6460',\r\n  '#5195CE',\r\n  '#D683CE',\r\n  '#806EB7',\r\n  '#3F6833',\r\n  '#967302',\r\n  '#2F575E',\r\n  '#99440A',\r\n  '#58140C',\r\n  '#052B51',\r\n  '#511749',\r\n  '#3F2B5B',\r\n  '#E0F9D7',\r\n  '#FCEACA',\r\n  '#CFFAFF',\r\n  '#F9E2D2',\r\n  '#FCE2DE',\r\n  '#BADFF4',\r\n  '#F9D9F9',\r\n  '#DEDAF7',\r\n];\r\n\r\nexport function sortColorsByHue(hexColors) {\r\n  const hslColors = _.map(hexColors, hexToHsl);\r\n\r\n  let sortedHSLColors = _.sortBy(hslColors, ['h']);\r\n  sortedHSLColors = _.chunk(sortedHSLColors, PALETTE_ROWS);\r\n  sortedHSLColors = _.map(sortedHSLColors, chunk => {\r\n    return _.sortBy(chunk, 'l');\r\n  });\r\n  sortedHSLColors = _.flattenDeep(_.zip(...sortedHSLColors));\r\n\r\n  return _.map(sortedHSLColors, hslToHex);\r\n}\r\n\r\nexport function hexToHsl(color) {\r\n  return tinycolor(color).toHsl();\r\n}\r\n\r\nexport function hslToHex(color) {\r\n  return tinycolor(color).toHexString();\r\n}\r\n\r\nexport let sortedColors = sortColorsByHue(colors);\r\nexport default colors;\r\n","import { LocationUpdate } from 'app/types';\r\n\r\nexport type Action = UpdateLocationAction;\r\n\r\nexport interface UpdateLocationAction {\r\n  type: 'UPDATE_LOCATION';\r\n  payload: LocationUpdate;\r\n}\r\n\r\nexport const updateLocation = (location: LocationUpdate): UpdateLocationAction => ({\r\n  type: 'UPDATE_LOCATION',\r\n  payload: location,\r\n});\r\n","import { updateLocation } from './location';\r\nimport { updateNavIndex, UpdateNavIndexAction } from './navModel';\r\n\r\nexport { updateLocation, updateNavIndex, UpdateNavIndexAction };\r\n","import { DataSource, NavModel, NavModelItem, PluginMeta } from 'app/types';\r\nimport config from 'app/core/config';\r\n\r\nexport function buildNavModel(dataSource: DataSource, pluginMeta: PluginMeta): NavModelItem {\r\n  const navModel = {\r\n    img: pluginMeta.info.logos.large,\r\n    id: 'datasource-' + dataSource.id,\r\n    subTitle: `Type: ${pluginMeta.name}`,\r\n    url: '',\r\n    text: dataSource.name,\r\n    breadcrumbs: [{ title: 'Data Sources', url: 'datasources' }],\r\n    children: [\r\n      {\r\n        active: false,\r\n        icon: 'fa fa-fw fa-sliders',\r\n        id: `datasource-settings-${dataSource.id}`,\r\n        text: 'Settings',\r\n        url: `datasources/edit/${dataSource.id}`,\r\n      },\r\n    ],\r\n  };\r\n\r\n  if (pluginMeta.includes && hasDashboards(pluginMeta.includes)) {\r\n    navModel.children.push({\r\n      active: false,\r\n      icon: 'fa fa-fw fa-th-large',\r\n      id: `datasource-dashboards-${dataSource.id}`,\r\n      text: 'Dashboards',\r\n      url: `datasources/edit/${dataSource.id}/dashboards`,\r\n    });\r\n  }\r\n\r\n  if (config.buildInfo.isEnterprise) {\r\n    navModel.children.push({\r\n      active: false,\r\n      icon: 'fa fa-fw fa-lock',\r\n      id: `datasource-permissions-${dataSource.id}`,\r\n      text: 'Permissions',\r\n      url: `datasources/edit/${dataSource.id}/permissions`,\r\n    });\r\n  }\r\n\r\n  return navModel;\r\n}\r\n\r\nexport function getDataSourceLoadingNav(pageName: string): NavModel {\r\n  const main = buildNavModel(\r\n    {\r\n      access: '',\r\n      basicAuth: false,\r\n      database: '',\r\n      id: 1,\r\n      isDefault: false,\r\n      jsonData: { authType: 'credentials', defaultRegion: 'eu-west-2' },\r\n      name: 'Loading',\r\n      orgId: 1,\r\n      password: '',\r\n      readOnly: false,\r\n      type: 'Loading',\r\n      typeLogoUrl: 'public/img/icn-datasource.svg',\r\n      url: '',\r\n      user: '',\r\n    },\r\n    {\r\n      id: '1',\r\n      name: '',\r\n      info: {\r\n        author: {\r\n          name: '',\r\n          url: '',\r\n        },\r\n        description: '',\r\n        links: [''],\r\n        logos: {\r\n          large: '',\r\n          small: '',\r\n        },\r\n        screenshots: '',\r\n        updated: '',\r\n        version: '',\r\n      },\r\n      includes: [{ type: '', name: '', path: '' }],\r\n    }\r\n  );\r\n\r\n  let node: NavModelItem;\r\n\r\n  // find active page\r\n  for (const child of main.children) {\r\n    if (child.id.indexOf(pageName) > 0) {\r\n      child.active = true;\r\n      node = child;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return {\r\n    main: main,\r\n    node: node,\r\n  };\r\n}\r\n\r\nfunction hasDashboards(includes) {\r\n  return (\r\n    includes.filter(include => {\r\n      return include.type === 'dashboard';\r\n    }).length > 0\r\n  );\r\n}\r\n","import { ThunkAction } from 'redux-thunk';\r\nimport { DataSource, Plugin, StoreState } from 'app/types';\r\nimport { getBackendSrv } from '../../../core/services/backend_srv';\r\nimport { LayoutMode } from '../../../core/components/LayoutSelector/LayoutSelector';\r\nimport { updateLocation, updateNavIndex, UpdateNavIndexAction } from '../../../core/actions';\r\nimport { UpdateLocationAction } from '../../../core/actions/location';\r\nimport { buildNavModel } from './navModel';\r\n\r\nexport enum ActionTypes {\r\n  LoadDataSources = 'LOAD_DATA_SOURCES',\r\n  LoadDataSourceTypes = 'LOAD_DATA_SOURCE_TYPES',\r\n  LoadDataSource = 'LOAD_DATA_SOURCE',\r\n  LoadDataSourceMeta = 'LOAD_DATA_SOURCE_META',\r\n  SetDataSourcesSearchQuery = 'SET_DATA_SOURCES_SEARCH_QUERY',\r\n  SetDataSourcesLayoutMode = 'SET_DATA_SOURCES_LAYOUT_MODE',\r\n  SetDataSourceTypeSearchQuery = 'SET_DATA_SOURCE_TYPE_SEARCH_QUERY',\r\n}\r\n\r\nexport interface LoadDataSourcesAction {\r\n  type: ActionTypes.LoadDataSources;\r\n  payload: DataSource[];\r\n}\r\n\r\nexport interface SetDataSourcesSearchQueryAction {\r\n  type: ActionTypes.SetDataSourcesSearchQuery;\r\n  payload: string;\r\n}\r\n\r\nexport interface SetDataSourcesLayoutModeAction {\r\n  type: ActionTypes.SetDataSourcesLayoutMode;\r\n  payload: LayoutMode;\r\n}\r\n\r\nexport interface LoadDataSourceTypesAction {\r\n  type: ActionTypes.LoadDataSourceTypes;\r\n  payload: Plugin[];\r\n}\r\n\r\nexport interface SetDataSourceTypeSearchQueryAction {\r\n  type: ActionTypes.SetDataSourceTypeSearchQuery;\r\n  payload: string;\r\n}\r\n\r\nexport interface LoadDataSourceAction {\r\n  type: ActionTypes.LoadDataSource;\r\n  payload: DataSource;\r\n}\r\n\r\nexport interface LoadDataSourceMetaAction {\r\n  type: ActionTypes.LoadDataSourceMeta;\r\n  payload: Plugin;\r\n}\r\n\r\nconst dataSourcesLoaded = (dataSources: DataSource[]): LoadDataSourcesAction => ({\r\n  type: ActionTypes.LoadDataSources,\r\n  payload: dataSources,\r\n});\r\n\r\nconst dataSourceLoaded = (dataSource: DataSource): LoadDataSourceAction => ({\r\n  type: ActionTypes.LoadDataSource,\r\n  payload: dataSource,\r\n});\r\n\r\nconst dataSourceMetaLoaded = (dataSourceMeta: Plugin): LoadDataSourceMetaAction => ({\r\n  type: ActionTypes.LoadDataSourceMeta,\r\n  payload: dataSourceMeta,\r\n});\r\n\r\nconst dataSourceTypesLoaded = (dataSourceTypes: Plugin[]): LoadDataSourceTypesAction => ({\r\n  type: ActionTypes.LoadDataSourceTypes,\r\n  payload: dataSourceTypes,\r\n});\r\n\r\nexport const setDataSourcesSearchQuery = (searchQuery: string): SetDataSourcesSearchQueryAction => ({\r\n  type: ActionTypes.SetDataSourcesSearchQuery,\r\n  payload: searchQuery,\r\n});\r\n\r\nexport const setDataSourcesLayoutMode = (layoutMode: LayoutMode): SetDataSourcesLayoutModeAction => ({\r\n  type: ActionTypes.SetDataSourcesLayoutMode,\r\n  payload: layoutMode,\r\n});\r\n\r\nexport const setDataSourceTypeSearchQuery = (query: string): SetDataSourceTypeSearchQueryAction => ({\r\n  type: ActionTypes.SetDataSourceTypeSearchQuery,\r\n  payload: query,\r\n});\r\n\r\nexport type Action =\r\n  | LoadDataSourcesAction\r\n  | SetDataSourcesSearchQueryAction\r\n  | SetDataSourcesLayoutModeAction\r\n  | UpdateLocationAction\r\n  | LoadDataSourceTypesAction\r\n  | SetDataSourceTypeSearchQueryAction\r\n  | LoadDataSourceAction\r\n  | UpdateNavIndexAction\r\n  | LoadDataSourceMetaAction;\r\n\r\ntype ThunkResult<R> = ThunkAction<R, StoreState, undefined, Action>;\r\n\r\nexport function loadDataSources(): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const response = await getBackendSrv().get('/api/datasources');\r\n    dispatch(dataSourcesLoaded(response));\r\n  };\r\n}\r\n\r\nexport function loadDataSource(id: number): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const dataSource = await getBackendSrv().get(`/api/datasources/${id}`);\r\n    const pluginInfo = await getBackendSrv().get(`/api/plugins/${dataSource.type}/settings`);\r\n    dispatch(dataSourceLoaded(dataSource));\r\n    dispatch(dataSourceMetaLoaded(pluginInfo));\r\n    dispatch(updateNavIndex(buildNavModel(dataSource, pluginInfo)));\r\n  };\r\n}\r\n\r\nexport function addDataSource(plugin: Plugin): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    await dispatch(loadDataSources());\r\n\r\n    const dataSources = getStore().dataSources.dataSources;\r\n\r\n    const newInstance = {\r\n      name: plugin.name,\r\n      type: plugin.id,\r\n      access: 'proxy',\r\n      isDefault: dataSources.length === 0,\r\n    };\r\n\r\n    if (nameExits(dataSources, newInstance.name)) {\r\n      newInstance.name = findNewName(dataSources, newInstance.name);\r\n    }\r\n\r\n    const result = await getBackendSrv().post('/api/datasources', newInstance);\r\n    dispatch(updateLocation({ path: `/datasources/edit/${result.id}` }));\r\n  };\r\n}\r\n\r\nexport function loadDataSourceTypes(): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const result = await getBackendSrv().get('/api/plugins', { enabled: 1, type: 'datasource' });\r\n    dispatch(dataSourceTypesLoaded(result));\r\n  };\r\n}\r\n\r\nexport function nameExits(dataSources, name) {\r\n  return (\r\n    dataSources.filter(dataSource => {\r\n      return dataSource.name === name;\r\n    }).length > 0\r\n  );\r\n}\r\n\r\nexport function findNewName(dataSources, name) {\r\n  // Need to loop through current data sources to make sure\r\n  // the name doesn't exist\r\n  while (nameExits(dataSources, name)) {\r\n    // If there's a duplicate name that doesn't end with '-x'\r\n    // we can add -1 to the name and be done.\r\n    if (!nameHasSuffix(name)) {\r\n      name = `${name}-1`;\r\n    } else {\r\n      // if there's a duplicate name that ends with '-x'\r\n      // we can try to increment the last digit until the name is unique\r\n\r\n      // remove the 'x' part and replace it with the new number\r\n      name = `${getNewName(name)}${incrementLastDigit(getLastDigit(name))}`;\r\n    }\r\n  }\r\n\r\n  return name;\r\n}\r\n\r\nfunction nameHasSuffix(name) {\r\n  return name.endsWith('-', name.length - 1);\r\n}\r\n\r\nfunction getLastDigit(name) {\r\n  return parseInt(name.slice(-1), 10);\r\n}\r\n\r\nfunction incrementLastDigit(digit) {\r\n  return isNaN(digit) ? 1 : digit + 1;\r\n}\r\n\r\nfunction getNewName(name) {\r\n  return name.slice(0, name.length - 1);\r\n}\r\n","import config from 'app/core/config';\r\nimport _ from 'lodash';\r\nimport coreModule from 'app/core/core_module';\r\nimport store from 'app/core/store';\r\n\r\nexport class User {\r\n  isGrafanaAdmin: any;\r\n  isSignedIn: any;\r\n  orgRole: any;\r\n  orgId: number;\r\n  orgName: string;\r\n  orgCount: number;\r\n  timezone: string;\r\n  helpFlags1: number;\r\n  lightTheme: boolean;\r\n  hasEditPermissionInFolders: boolean;\r\n\r\n  constructor() {\r\n    if (config.bootData.user) {\r\n      _.extend(this, config.bootData.user);\r\n    }\r\n  }\r\n}\r\n\r\nexport class ContextSrv {\r\n  pinned: any;\r\n  version: any;\r\n  user: User;\r\n  isSignedIn: any;\r\n  isGrafanaAdmin: any;\r\n  isEditor: any;\r\n  sidemenu: any;\r\n  sidemenuSmallBreakpoint = false;\r\n  hasEditPermissionInFolders: boolean;\r\n\r\n  constructor() {\r\n    this.sidemenu = store.getBool('grafana.sidemenu', true);\r\n\r\n    if (!config.bootData) {\r\n      config.bootData = { user: {}, settings: {} };\r\n    }\r\n\r\n    this.user = new User();\r\n    this.isSignedIn = this.user.isSignedIn;\r\n    this.isGrafanaAdmin = this.user.isGrafanaAdmin;\r\n    this.isEditor = this.hasRole('Editor') || this.hasRole('Admin');\r\n    this.hasEditPermissionInFolders = this.user.hasEditPermissionInFolders;\r\n  }\r\n\r\n  hasRole(role) {\r\n    return this.user.orgRole === role;\r\n  }\r\n\r\n  isGrafanaVisible() {\r\n    return !!(document.visibilityState === undefined || document.visibilityState === 'visible');\r\n  }\r\n\r\n  toggleSideMenu() {\r\n    this.sidemenu = !this.sidemenu;\r\n    store.set('grafana.sidemenu', this.sidemenu);\r\n  }\r\n}\r\n\r\nconst contextSrv = new ContextSrv();\r\nexport { contextSrv };\r\n\r\ncoreModule.factory('contextSrv', () => {\r\n  return contextSrv;\r\n});\r\n","/* Flot plugin for selecting regions of a plot.\r\n\r\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nThe plugin supports these options:\r\n\r\nselection: {\r\n\tmode: null or \"x\" or \"y\" or \"xy\",\r\n\tcolor: color,\r\n\tshape: \"round\" or \"miter\" or \"bevel\",\r\n\tminSize: number of pixels\r\n}\r\n\r\nSelection support is enabled by setting the mode to one of \"x\", \"y\" or \"xy\".\r\nIn \"x\" mode, the user will only be able to specify the x range, similarly for\r\n\"y\" mode. For \"xy\", the selection becomes a rectangle where both ranges can be\r\nspecified. \"color\" is color of the selection (if you need to change the color\r\nlater on, you can get to it with plot.getOptions().selection.color). \"shape\"\r\nis the shape of the corners of the selection.\r\n\r\n\"minSize\" is the minimum size a selection can be in pixels. This value can\r\nbe customized to determine the smallest size a selection can be and still\r\nhave the selection rectangle be displayed. When customizing this value, the\r\nfact that it refers to pixels, not axis units must be taken into account.\r\nThus, for example, if there is a bar graph in time mode with BarWidth set to 1\r\nminute, setting \"minSize\" to 1 will not make the minimum selection size 1\r\nminute, but rather 1 pixel. Note also that setting \"minSize\" to 0 will prevent\r\n\"plotunselected\" events from being fired when the user clicks the mouse without\r\ndragging.\r\n\r\nWhen selection support is enabled, a \"plotselected\" event will be emitted on\r\nthe DOM element you passed into the plot function. The event handler gets a\r\nparameter with the ranges selected on the axes, like this:\r\n\r\n\tplaceholder.bind( \"plotselected\", function( event, ranges ) {\r\n\t\talert(\"You selected \" + ranges.xaxis.from + \" to \" + ranges.xaxis.to)\r\n\t\t// similar for yaxis - with multiple axes, the extra ones are in\r\n\t\t// x2axis, x3axis, ...\r\n\t});\r\n\r\nThe \"plotselected\" event is only fired when the user has finished making the\r\nselection. A \"plotselecting\" event is fired during the process with the same\r\nparameters as the \"plotselected\" event, in case you want to know what's\r\nhappening while it's happening,\r\n\r\nA \"plotunselected\" event with no arguments is emitted when the user clicks the\r\nmouse to remove the selection. As stated above, setting \"minSize\" to 0 will\r\ndestroy this behavior.\r\n\r\nThe plugin allso adds the following methods to the plot object:\r\n\r\n- setSelection( ranges, preventEvent )\r\n\r\n  Set the selection rectangle. The passed in ranges is on the same form as\r\n  returned in the \"plotselected\" event. If the selection mode is \"x\", you\r\n  should put in either an xaxis range, if the mode is \"y\" you need to put in\r\n  an yaxis range and both xaxis and yaxis if the selection mode is \"xy\", like\r\n  this:\r\n\r\n\tsetSelection({ xaxis: { from: 0, to: 10 }, yaxis: { from: 40, to: 60 } });\r\n\r\n  setSelection will trigger the \"plotselected\" event when called. If you don't\r\n  want that to happen, e.g. if you're inside a \"plotselected\" handler, pass\r\n  true as the second parameter. If you are using multiple axes, you can\r\n  specify the ranges on any of those, e.g. as x2axis/x3axis/... instead of\r\n  xaxis, the plugin picks the first one it sees.\r\n\r\n- clearSelection( preventEvent )\r\n\r\n  Clear the selection rectangle. Pass in true to avoid getting a\r\n  \"plotunselected\" event.\r\n\r\n- getSelection()\r\n\r\n  Returns the current selection in the same format as the \"plotselected\"\r\n  event. If there's currently no selection, the function returns null.\r\n\r\n*/\r\n\r\n(function ($) {\r\n    function init(plot) {\r\n        var selection = {\r\n                first: { x: -1, y: -1}, second: { x: -1, y: -1},\r\n                show: false,\r\n                active: false\r\n            };\r\n\r\n        // FIXME: The drag handling implemented here should be\r\n        // abstracted out, there's some similar code from a library in\r\n        // the navigation plugin, this should be massaged a bit to fit\r\n        // the Flot cases here better and reused. Doing this would\r\n        // make this plugin much slimmer.\r\n        var savedhandlers = {};\r\n\r\n        var mouseUpHandler = null;\r\n\r\n        function onMouseMove(e) {\r\n            if (selection.active) {\r\n                updateSelection(e);\r\n\r\n                plot.getPlaceholder().trigger(\"plotselecting\", [ getSelection() ]);\r\n            }\r\n        }\r\n\r\n        function onMouseDown(e) {\r\n            if (e.which != 1)  // only accept left-click\r\n                return;\r\n\r\n            // cancel out any text selections\r\n            document.body.focus();\r\n\r\n            // prevent text selection and drag in old-school browsers\r\n            if (document.onselectstart !== undefined && savedhandlers.onselectstart == null) {\r\n                savedhandlers.onselectstart = document.onselectstart;\r\n                document.onselectstart = function () { return false; };\r\n            }\r\n            if (document.ondrag !== undefined && savedhandlers.ondrag == null) {\r\n                savedhandlers.ondrag = document.ondrag;\r\n                document.ondrag = function () { return false; };\r\n            }\r\n\r\n            setSelectionPos(selection.first, e);\r\n\r\n            selection.active = true;\r\n\r\n            // this is a bit silly, but we have to use a closure to be\r\n            // able to whack the same handler again\r\n            mouseUpHandler = function (e) { onMouseUp(e); };\r\n\r\n            $(document).one(\"mouseup\", mouseUpHandler);\r\n        }\r\n\r\n        function onMouseUp(e) {\r\n            mouseUpHandler = null;\r\n\r\n            // revert drag stuff for old-school browsers\r\n            if (document.onselectstart !== undefined)\r\n                document.onselectstart = savedhandlers.onselectstart;\r\n            if (document.ondrag !== undefined)\r\n                document.ondrag = savedhandlers.ondrag;\r\n\r\n            // no more dragging\r\n            selection.active = false;\r\n            updateSelection(e);\r\n\r\n            if (selectionIsSane())\r\n                triggerSelectedEvent(e);\r\n            else {\r\n                // this counts as a clear\r\n                plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\r\n                plot.getPlaceholder().trigger(\"plotselecting\", [ null ]);\r\n            }\r\n\r\n            setTimeout(function() {\r\n              plot.isSelecting = false;\r\n            }, 10);\r\n\r\n            return false;\r\n        }\r\n\r\n        function getSelection() {\r\n            if (!selectionIsSane())\r\n                return null;\r\n\r\n            if (!selection.show) return null;\r\n\r\n            var r = {}, c1 = selection.first, c2 = selection.second;\r\n            var axes = plot.getAxes();\r\n            // look if no axis is used\r\n            var noAxisInUse = true;\r\n            $.each(axes, function (name, axis) {\r\n              if (axis.used) {\r\n                anyUsed = false;\r\n              }\r\n            })\r\n\r\n            $.each(axes, function (name, axis) {\r\n                if (axis.used || noAxisInUse) {\r\n                    var p1 = axis.c2p(c1[axis.direction]), p2 = axis.c2p(c2[axis.direction]);\r\n                    r[name] = { from: Math.min(p1, p2), to: Math.max(p1, p2) };\r\n                }\r\n            });\r\n            return r;\r\n        }\r\n\r\n        function triggerSelectedEvent(event) {\r\n            var r = getSelection();\r\n\r\n            // Add ctrlKey and metaKey to event\r\n            r.ctrlKey = event.ctrlKey;\r\n            r.metaKey = event.metaKey;\r\n\r\n            plot.getPlaceholder().trigger(\"plotselected\", [ r ]);\r\n\r\n            // backwards-compat stuff, to be removed in future\r\n            if (r.xaxis && r.yaxis)\r\n                plot.getPlaceholder().trigger(\"selected\", [ { x1: r.xaxis.from, y1: r.yaxis.from, x2: r.xaxis.to, y2: r.yaxis.to } ]);\r\n        }\r\n\r\n        function clamp(min, value, max) {\r\n            return value < min ? min: (value > max ? max: value);\r\n        }\r\n\r\n        function setSelectionPos(pos, e) {\r\n            var o = plot.getOptions();\r\n            var offset = plot.getPlaceholder().offset();\r\n            var plotOffset = plot.getPlotOffset();\r\n            pos.x = clamp(0, e.pageX - offset.left - plotOffset.left, plot.width());\r\n            pos.y = clamp(0, e.pageY - offset.top - plotOffset.top, plot.height());\r\n\r\n            if (o.selection.mode == \"y\")\r\n                pos.x = pos == selection.first ? 0 : plot.width();\r\n\r\n            if (o.selection.mode == \"x\")\r\n                pos.y = pos == selection.first ? 0 : plot.height();\r\n        }\r\n\r\n        function updateSelection(pos) {\r\n            if (pos.pageX == null)\r\n                return;\r\n\r\n            setSelectionPos(selection.second, pos);\r\n            if (selectionIsSane()) {\r\n                plot.isSelecting = true;\r\n                selection.show = true;\r\n                plot.triggerRedrawOverlay();\r\n            }\r\n            else\r\n                clearSelection(true);\r\n        }\r\n\r\n        function clearSelection(preventEvent) {\r\n            if (selection.show) {\r\n                selection.show = false;\r\n                plot.triggerRedrawOverlay();\r\n                if (!preventEvent)\r\n                    plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\r\n            }\r\n        }\r\n\r\n        // function taken from markings support in Flot\r\n        function extractRange(ranges, coord) {\r\n            var axis, from, to, key, axes = plot.getAxes();\r\n\r\n            for (var k in axes) {\r\n                axis = axes[k];\r\n                if (axis.direction == coord) {\r\n                    key = coord + axis.n + \"axis\";\r\n                    if (!ranges[key] && axis.n == 1)\r\n                        key = coord + \"axis\"; // support x1axis as xaxis\r\n                    if (ranges[key]) {\r\n                        from = ranges[key].from;\r\n                        to = ranges[key].to;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // backwards-compat stuff - to be removed in future\r\n            if (!ranges[key]) {\r\n                axis = coord == \"x\" ? plot.getXAxes()[0] : plot.getYAxes()[0];\r\n                from = ranges[coord + \"1\"];\r\n                to = ranges[coord + \"2\"];\r\n            }\r\n\r\n            // auto-reverse as an added bonus\r\n            if (from != null && to != null && from > to) {\r\n                var tmp = from;\r\n                from = to;\r\n                to = tmp;\r\n            }\r\n\r\n            return { from: from, to: to, axis: axis };\r\n        }\r\n\r\n        function setSelection(ranges, preventEvent) {\r\n            var axis, range, o = plot.getOptions();\r\n\r\n            if (o.selection.mode == \"y\") {\r\n                selection.first.x = 0;\r\n                selection.second.x = plot.width();\r\n            }\r\n            else {\r\n                range = extractRange(ranges, \"x\");\r\n\r\n                selection.first.x = range.axis.p2c(range.from);\r\n                selection.second.x = range.axis.p2c(range.to);\r\n            }\r\n\r\n            if (o.selection.mode == \"x\") {\r\n                selection.first.y = 0;\r\n                selection.second.y = plot.height();\r\n            }\r\n            else {\r\n                range = extractRange(ranges, \"y\");\r\n\r\n                selection.first.y = range.axis.p2c(range.from);\r\n                selection.second.y = range.axis.p2c(range.to);\r\n            }\r\n\r\n            selection.show = true;\r\n            plot.triggerRedrawOverlay();\r\n            if (!preventEvent && selectionIsSane())\r\n                triggerSelectedEvent();\r\n        }\r\n\r\n        function selectionIsSane() {\r\n            var minSize = plot.getOptions().selection.minSize;\r\n            return Math.abs(selection.second.x - selection.first.x) >= minSize &&\r\n                Math.abs(selection.second.y - selection.first.y) >= minSize;\r\n        }\r\n\r\n        plot.clearSelection = clearSelection;\r\n        plot.setSelection = setSelection;\r\n        plot.getSelection = getSelection;\r\n\r\n        plot.hooks.bindEvents.push(function(plot, eventHolder) {\r\n            var o = plot.getOptions();\r\n            if (o.selection.mode != null) {\r\n                eventHolder.mousemove(onMouseMove);\r\n                eventHolder.mousedown(onMouseDown);\r\n            }\r\n        });\r\n\r\n\r\n        plot.hooks.drawOverlay.push(function (plot, ctx) {\r\n            // draw selection\r\n            if (selection.show && selectionIsSane()) {\r\n                var plotOffset = plot.getPlotOffset();\r\n                var o = plot.getOptions();\r\n\r\n                ctx.save();\r\n                ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n                var c = $.color.parse(o.selection.color);\r\n\r\n                ctx.strokeStyle = c.scale('a', 0.8).toString();\r\n                ctx.lineWidth = 1;\r\n                ctx.lineJoin = o.selection.shape;\r\n                ctx.fillStyle = c.scale('a', 0.4).toString();\r\n\r\n                var x = Math.min(selection.first.x, selection.second.x) + 0.5,\r\n                    y = Math.min(selection.first.y, selection.second.y) + 0.5,\r\n                    w = Math.abs(selection.second.x - selection.first.x) - 1,\r\n                    h = Math.abs(selection.second.y - selection.first.y) - 1;\r\n\r\n                ctx.fillRect(x, y, w, h);\r\n                ctx.strokeRect(x, y, w, h);\r\n\r\n                ctx.restore();\r\n            }\r\n        });\r\n\r\n        plot.hooks.shutdown.push(function (plot, eventHolder) {\r\n            eventHolder.unbind(\"mousemove\", onMouseMove);\r\n            eventHolder.unbind(\"mousedown\", onMouseDown);\r\n\r\n            if (mouseUpHandler)\r\n                $(document).unbind(\"mouseup\", mouseUpHandler);\r\n        });\r\n\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: {\r\n            selection: {\r\n                mode: null, // one of null, \"x\", \"y\" or \"xy\"\r\n                color: \"#e8cfac\",\r\n                shape: \"round\", // one of \"round\", \"miter\", or \"bevel\"\r\n                minSize: 5 // minimum number of pixels\r\n            }\r\n        },\r\n        name: 'selection',\r\n        version: '1.1'\r\n    });\r\n})(jQuery);\r\n","/* Flot plugin for stacking data sets rather than overlyaing them.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nThe plugin assumes the data is sorted on x (or y if stacking horizontally).\r\nFor line charts, it is assumed that if a line has an undefined gap (from a\r\nnull point), then the line above it should have the same gap - insert zeros\r\ninstead of \"null\" if you want another behaviour. This also holds for the start\r\nand end of the chart. Note that stacking a mix of positive and negative values\r\nin most instances doesn't make sense (so it looks weird).\r\n\r\nTwo or more series are stacked when their \"stack\" attribute is set to the same\r\nkey (which can be any number or string or just \"true\"). To specify the default\r\nstack, you can set the stack option like this:\r\n\r\n    series: {\r\n        stack: null/false, true, or a key (number/string)\r\n    }\r\n\r\nYou can also specify it for a single series, like this:\r\n\r\n    $.plot( $(\"#placeholder\"), [{\r\n        data: [ ... ],\r\n        stack: true\r\n    }])\r\n\r\nThe stacking order is determined by the order of the data series in the array\r\n(later series end up on top of the previous).\r\n\r\nInternally, the plugin modifies the datapoints in each series, adding an\r\noffset to the y value. For line series, extra data points are inserted through\r\ninterpolation. If there's a second y value, it's also adjusted (e.g for bar\r\ncharts or filled areas).\r\n\r\n*/\r\n\r\n(function ($) {\r\n    var options = {\r\n        series: { stack: null } // or number/string\r\n    };\r\n\r\n    function init(plot) {\r\n        function findMatchingSeries(s, allseries) {\r\n            var res = null;\r\n            for (var i = 0; i < allseries.length; ++i) {\r\n                if (s == allseries[i])\r\n                    break;\r\n\r\n                if (allseries[i].stack == s.stack)\r\n                    res = allseries[i];\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        function stackData(plot, s, datapoints) {\r\n            if (s.stack == null || s.stack === false)\r\n                return;\r\n\r\n            var other = findMatchingSeries(s, plot.getData());\r\n            if (!other)\r\n                return;\r\n\r\n            var ps = datapoints.pointsize,\r\n                points = datapoints.points,\r\n                otherps = other.datapoints.pointsize,\r\n                otherpoints = other.datapoints.points,\r\n                newpoints = [],\r\n                px, py, intery, qx, qy, bottom,\r\n                withlines = s.lines.show,\r\n                horizontal = s.bars.horizontal,\r\n                withbottom = ps > 2 && (horizontal ? datapoints.format[2].x : datapoints.format[2].y),\r\n                withsteps = withlines && s.lines.steps,\r\n                keyOffset = horizontal ? 1 : 0,\r\n                accumulateOffset = horizontal ? 0 : 1,\r\n                i = 0, j = 0, l, m;\r\n\r\n            while (true) {\r\n                if (i >= points.length && j >= otherpoints.length)\r\n                    break;\r\n\r\n                l = newpoints.length;\r\n\r\n                if (i < points.length && points[i] == null) {\r\n                    // copy gaps\r\n                    for (m = 0; m < ps; ++m)\r\n                        newpoints.push(points[i + m]);\r\n                    i += ps;\r\n                }\r\n                else if (i >= points.length) {\r\n                    // take the remaining points from the previous series\r\n                    for (m = 0; m < ps; ++m)\r\n                        newpoints.push(otherpoints[j + m]);\r\n                    if (withbottom)\r\n                        newpoints[l + 2] = otherpoints[j + accumulateOffset];\r\n                    j += otherps;\r\n                }\r\n                else if (j >= otherpoints.length) {\r\n                    // take the remaining points from the current series\r\n                    for (m = 0; m < ps; ++m)\r\n                        newpoints.push(points[i + m]);\r\n                    i += ps;\r\n                }\r\n                else if (j < otherpoints.length && otherpoints[j] == null) {\r\n                    // ignore point\r\n                    j += otherps;\r\n                }\r\n                else {\r\n                    // cases where we actually got two points\r\n                    px = points[i + keyOffset];\r\n                    py = points[i + accumulateOffset];\r\n                    qx = otherpoints[j + keyOffset];\r\n                    qy = otherpoints[j + accumulateOffset];\r\n                    bottom = 0;\r\n\r\n                    if (px == qx) {\r\n                        for (m = 0; m < ps; ++m)\r\n                            newpoints.push(points[i + m]);\r\n\r\n                        newpoints[l + accumulateOffset] += qy;\r\n                        bottom = qy;\r\n\r\n                        i += ps;\r\n                        j += otherps;\r\n                    }\r\n                    else if (px > qx) {\r\n                        // take the point from the previous series so that next series will correctly stack\r\n                        if (i == 0) {\r\n                            for (m = 0; m < ps; ++m)\r\n                                newpoints.push(otherpoints[j + m]);\r\n                            bottom = qy;\r\n                        }\r\n                        // we got past point below, might need to\r\n                        // insert interpolated extra point\r\n                        if (i > 0 && points[i - ps] != null) {\r\n                            intery = py + (points[i - ps + accumulateOffset] - py) * (qx - px) / (points[i - ps + keyOffset] - px);\r\n                            newpoints.push(qx);\r\n                            newpoints.push(intery + qy);\r\n                            for (m = 2; m < ps; ++m)\r\n                                newpoints.push(points[i + m]);\r\n                            bottom = qy;\r\n                        }\r\n\r\n                        j += otherps;\r\n                    }\r\n                    else { // px < qx\r\n                        for (m = 0; m < ps; ++m)\r\n                            newpoints.push(points[i + m]);\r\n\r\n                        // we might be able to interpolate a point below,\r\n                        // this can give us a better y\r\n                        if (j > 0 && otherpoints[j - otherps] != null)\r\n                            bottom = qy + (otherpoints[j - otherps + accumulateOffset] - qy) * (px - qx) / (otherpoints[j - otherps + keyOffset] - qx);\r\n\r\n                        newpoints[l + accumulateOffset] += bottom;\r\n\r\n                        i += ps;\r\n                    }\r\n\r\n                    fromgap = false;\r\n\r\n                    if (l != newpoints.length && withbottom)\r\n                        newpoints[l + 2] = bottom;\r\n                }\r\n\r\n                // maintain the line steps invariant\r\n                if (withsteps && l != newpoints.length && l > 0\r\n                    && newpoints[l] != null\r\n                    && newpoints[l] != newpoints[l - ps]\r\n                    && newpoints[l + 1] != newpoints[l - ps + 1]) {\r\n                    for (m = 0; m < ps; ++m)\r\n                        newpoints[l + ps + m] = newpoints[l + m];\r\n                    newpoints[l + 1] = newpoints[l - ps + 1];\r\n                }\r\n            }\r\n\r\n            datapoints.points = newpoints;\r\n        }\r\n\r\n        plot.hooks.processDatapoints.push(stackData);\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'stack',\r\n        version: '1.2'\r\n    });\r\n})(jQuery);\r\n","import { Moment } from 'moment';\r\n\r\nexport enum LoadingState {\r\n  NotStarted = 'NotStarted',\r\n  Loading = 'Loading',\r\n  Done = 'Done',\r\n  Error = 'Error',\r\n}\r\n\r\nexport interface RawTimeRange {\r\n  from: Moment | string;\r\n  to: Moment | string;\r\n}\r\n\r\nexport interface TimeRange {\r\n  from: Moment;\r\n  to: Moment;\r\n  raw: RawTimeRange;\r\n}\r\n\r\nexport type TimeSeriesValue = string | number | null;\r\n\r\nexport type TimeSeriesPoints = TimeSeriesValue[][];\r\n\r\nexport interface TimeSeries {\r\n  target: string;\r\n  datapoints: TimeSeriesPoints;\r\n  unit?: string;\r\n}\r\n\r\n/** View model projection of a time series */\r\nexport interface TimeSeriesVM {\r\n  label: string;\r\n  color: string;\r\n  data: TimeSeriesValue[][];\r\n  stats: TimeSeriesStats;\r\n}\r\n\r\nexport interface TimeSeriesStats {\r\n  total: number;\r\n  max: number;\r\n  min: number;\r\n  logmin: number;\r\n  avg: number | null;\r\n  current: number | null;\r\n  first: number | null;\r\n  delta: number;\r\n  diff: number | null;\r\n  range: number | null;\r\n  timeStep: number;\r\n  count: number;\r\n  allIsNull: boolean;\r\n  allIsZero: boolean;\r\n}\r\n\r\nexport enum NullValueMode {\r\n  Null = 'null',\r\n  Ignore = 'connected',\r\n  AsZero = 'null as zero',\r\n}\r\n\r\n/** View model projection of many time series */\r\nexport interface TimeSeriesVMs {\r\n  [index: number]: TimeSeriesVM;\r\n}\r\n\r\nexport interface DataQueryResponse {\r\n  data: TimeSeries[];\r\n}\r\n\r\nexport interface DataQuery {\r\n  refId: string;\r\n}\r\n\r\nexport interface DataQueryOptions {\r\n  timezone: string;\r\n  range: TimeRange;\r\n  rangeRaw: RawTimeRange;\r\n  targets: DataQuery[];\r\n  panelId: number;\r\n  dashboardId: number;\r\n  cacheTimeout?: string;\r\n  interval: string;\r\n  intervalMs: number;\r\n  maxDataPoints: number;\r\n  scopedVars: object;\r\n}\r\n\r\nexport interface DataSourceApi {\r\n  query(options: DataQueryOptions): Promise<DataQueryResponse>;\r\n}\r\n","(function ($) {\r\n    var options = {\r\n        series: {\r\n            stackpercent: null\r\n        } // or number/string\r\n    };\r\n\r\n    function init(plot) {\r\n\r\n        // will be built up dynamically as a hash from x-value, or y-value if horizontal\r\n        var stackBases = {};\r\n        var processed = false;\r\n        var stackSums = {};\r\n\r\n        //set percentage for stacked chart\r\n        function processRawData(plot, series, data, datapoints) {\r\n            if (!processed) {\r\n                processed = true;\r\n                stackSums = getStackSums(plot.getData());\r\n            }\r\n\t\t\tif (series.stackpercent == true) {\r\n\t\t\t\tvar num = data.length;\r\n\t\t\t\tseries.percents = [];\r\n\t\t\t\tvar key_idx = 0;\r\n\t\t\t\tvar value_idx = 1;\r\n\t\t\t\tif (series.bars && series.bars.horizontal && series.bars.horizontal === true) {\r\n\t\t\t\t\tkey_idx = 1;\r\n\t\t\t\t\tvalue_idx = 0;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var j = 0; j < num; j++) {\r\n\t\t\t\t\tvar sum = stackSums[data[j][key_idx] + \"\"];\r\n\t\t\t\t\tif (sum > 0) {\r\n\t\t\t\t\t\tseries.percents.push(data[j][value_idx] * 100 / sum);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tseries.percents.push(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n\r\n        //calculate summary\r\n        function getStackSums(_data) {\r\n            var data_len = _data.length;\r\n            var sums = {};\r\n            if (data_len > 0) {\r\n                //caculate summary\r\n                for (var i = 0; i < data_len; i++) {\r\n                    if (_data[i].stackpercent) {\r\n\t\t\t\t\t\tvar key_idx = 0;\r\n\t\t\t\t\t\tvar value_idx = 1;\r\n\t\t\t\t\t\tif (_data[i].bars && _data[i].bars.horizontal && _data[i].bars.horizontal === true) {\r\n\t\t\t\t\t\t\tkey_idx = 1;\r\n\t\t\t\t\t\t\tvalue_idx = 0;\r\n\t\t\t\t\t\t}\r\n                        var num = _data[i].data.length;\r\n                        for (var j = 0; j < num; j++) {\r\n                            var value = 0;\r\n                            if (_data[i].data[j][1] != null) {\r\n                                value = _data[i].data[j][value_idx];\r\n                            }\r\n                            if (sums[_data[i].data[j][key_idx] + \"\"]) {\r\n                                sums[_data[i].data[j][key_idx] + \"\"] += value;\r\n                            } else {\r\n                                sums[_data[i].data[j][key_idx] + \"\"] = value;\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return sums;\r\n        }\r\n\r\n        function stackData(plot, s, datapoints) {\r\n            if (!s.stackpercent) return;\r\n            if (!processed) {\r\n                stackSums = getStackSums(plot.getData());\r\n            }\r\n            var newPoints = [];\r\n\r\n\r\n\t\t\tvar key_idx = 0;\r\n\t\t\tvar value_idx = 1;\r\n\t\t\tif (s.bars && s.bars.horizontal && s.bars.horizontal === true) {\r\n\t\t\t\tkey_idx = 1;\r\n\t\t\t\tvalue_idx = 0;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < datapoints.points.length; i += 3) {\r\n\t\t\t\t// note that the values need to be turned into absolute y-values.\r\n\t\t\t\t// in other words, if you were to stack (x, y1), (x, y2), and (x, y3),\r\n\t\t\t\t// (each from different series, which is where stackBases comes in),\r\n\t\t\t\t// you'd want the new points to be (x, y1, 0), (x, y1+y2, y1), (x, y1+y2+y3, y1+y2)\r\n\t\t\t\t// generally, (x, thisValue + (base up to this point), + (base up to this point))\r\n\t\t\t\tif (!stackBases[datapoints.points[i + key_idx]]) {\r\n\t\t\t\t\tstackBases[datapoints.points[i + key_idx]] = 0;\r\n\t\t\t\t}\r\n\t\t\t\tnewPoints[i + key_idx] = datapoints.points[i + key_idx];\r\n\t\t\t\tnewPoints[i + value_idx] = datapoints.points[i + value_idx] + stackBases[datapoints.points[i + key_idx]];\r\n\t\t\t\tnewPoints[i + 2] = stackBases[datapoints.points[i + key_idx]];\r\n\t\t\t\tstackBases[datapoints.points[i + key_idx]] += datapoints.points[i + value_idx];\r\n\t\t\t\t// change points to percentage values\r\n\t\t\t\t// you may need to set yaxis:{ max = 100 }\r\n\t\t\t\tif ( stackSums[newPoints[i+key_idx]+\"\"] > 0 ){\r\n\t\t\t\t\tnewPoints[i + value_idx] = newPoints[i + value_idx] * 100 / stackSums[newPoints[i + key_idx] + \"\"];\r\n\t\t\t\t\tnewPoints[i + 2] = newPoints[i + 2] * 100 / stackSums[newPoints[i + key_idx] + \"\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewPoints[i + value_idx] = 0;\r\n\t\t\t\t\tnewPoints[i + 2] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n            datapoints.points = newPoints;\r\n        }\r\n\r\n\t\tplot.hooks.processRawData.push(processRawData);\r\n        plot.hooks.processDatapoints.push(stackData);\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'stackpercent',\r\n        version: '0.1'\r\n    });\r\n})(jQuery);\r\n","import { Team, TeamsState, TeamState, TeamGroup, TeamMember } from './teams';\r\nimport { AlertRuleDTO, AlertRule, AlertRulesState } from './alerting';\r\nimport { LocationState, LocationUpdate, UrlQueryMap, UrlQueryValue } from './location';\r\nimport { NavModel, NavModelItem, NavIndex } from './navModel';\r\nimport { FolderDTO, FolderState, FolderInfo } from './folders';\r\nimport { DashboardState } from './dashboard';\r\nimport { DashboardAcl, OrgRole, PermissionLevel } from './acl';\r\nimport { ApiKey, ApiKeysState, NewApiKey } from './apiKeys';\r\nimport { Invitee, OrgUser, User, UsersState } from './user';\r\nimport { DataSource, DataSourcesState } from './datasources';\r\nimport {\r\n  TimeRange,\r\n  LoadingState,\r\n  TimeSeries,\r\n  TimeSeriesVM,\r\n  TimeSeriesVMs,\r\n  TimeSeriesStats,\r\n  NullValueMode,\r\n  DataQuery,\r\n  DataQueryResponse,\r\n  DataQueryOptions,\r\n} from './series';\r\nimport { PanelProps } from './panel';\r\nimport { PluginDashboard, PluginMeta, Plugin, PluginsState } from './plugins';\r\n\r\nexport {\r\n  Team,\r\n  TeamsState,\r\n  TeamState,\r\n  TeamGroup,\r\n  TeamMember,\r\n  AlertRuleDTO,\r\n  AlertRule,\r\n  AlertRulesState,\r\n  LocationState,\r\n  LocationUpdate,\r\n  NavModel,\r\n  NavModelItem,\r\n  NavIndex,\r\n  UrlQueryMap,\r\n  UrlQueryValue,\r\n  FolderDTO,\r\n  FolderState,\r\n  FolderInfo,\r\n  DashboardState,\r\n  DashboardAcl,\r\n  OrgRole,\r\n  PermissionLevel,\r\n  DataSource,\r\n  PluginMeta,\r\n  ApiKey,\r\n  ApiKeysState,\r\n  NewApiKey,\r\n  Plugin,\r\n  PluginsState,\r\n  DataSourcesState,\r\n  Invitee,\r\n  OrgUser,\r\n  User,\r\n  UsersState,\r\n  TimeRange,\r\n  LoadingState,\r\n  PanelProps,\r\n  TimeSeries,\r\n  TimeSeriesVM,\r\n  TimeSeriesVMs,\r\n  NullValueMode,\r\n  TimeSeriesStats,\r\n  DataQuery,\r\n  DataQueryResponse,\r\n  DataQueryOptions,\r\n  PluginDashboard,\r\n};\r\n\r\nexport interface StoreState {\r\n  navIndex: NavIndex;\r\n  location: LocationState;\r\n  alertRules: AlertRulesState;\r\n  teams: TeamsState;\r\n  team: TeamState;\r\n  folder: FolderState;\r\n  dashboard: DashboardState;\r\n  dataSources: DataSourcesState;\r\n  users: UsersState;\r\n}\r\n","(function($) {\r\n    \"use strict\";\r\n\r\n    var options = {\r\n        series: {\r\n            fillBelowTo: null\r\n        }\r\n    };\r\n\r\n    function init(plot) {\r\n        function findBelowSeries( series, allseries ) {\r\n\r\n            var i;\r\n\r\n            for ( i = 0; i < allseries.length; ++i ) {\r\n                if ( allseries[ i ].id === series.fillBelowTo ) {\r\n                    return allseries[ i ];\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        /* top and bottom doesn't actually matter for this, we're just using it to help make this easier to think about */\r\n        /* this is a vector cross product operation */\r\n        function segmentIntersection(top_left_x, top_left_y, top_right_x, top_right_y, bottom_left_x, bottom_left_y, bottom_right_x, bottom_right_y) {\r\n            var top_delta_x, top_delta_y, bottom_delta_x, bottom_delta_y,\r\n                s, t;\r\n\r\n            top_delta_x = top_right_x - top_left_x;\r\n            top_delta_y = top_right_y - top_left_y;\r\n            bottom_delta_x = bottom_right_x - bottom_left_x;\r\n            bottom_delta_y = bottom_right_y - bottom_left_y;\r\n\r\n            s = (\r\n                (-top_delta_y * (top_left_x - bottom_left_x)) + (top_delta_x * (top_left_y - bottom_left_y))\r\n            ) / (\r\n                -bottom_delta_x * top_delta_y + top_delta_x * bottom_delta_y\r\n            );\r\n\r\n            t = (\r\n                (bottom_delta_x * (top_left_y - bottom_left_y)) - (bottom_delta_y * (top_left_x - bottom_left_x))\r\n            ) / (\r\n                -bottom_delta_x * top_delta_y + top_delta_x * bottom_delta_y\r\n            );\r\n\r\n            // Collision detected\r\n            if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\r\n                return [\r\n                    top_left_x + (t * top_delta_x), // X\r\n                    top_left_y + (t * top_delta_y) // Y\r\n                ];\r\n            }\r\n\r\n            // No collision\r\n            return null;\r\n        }\r\n\r\n        function plotDifferenceArea(plot, ctx, series) {\r\n            if ( series.fillBelowTo === null ) {\r\n                return;\r\n            }\r\n\r\n            var otherseries,\r\n\r\n                ps,\r\n                points,\r\n\r\n                otherps,\r\n                otherpoints,\r\n\r\n                plotOffset,\r\n                fillStyle;\r\n\r\n            function openPolygon(x, y) {\r\n                ctx.beginPath();\r\n                ctx.moveTo(\r\n                    series.xaxis.p2c(x) + plotOffset.left,\r\n                    series.yaxis.p2c(y) + plotOffset.top\r\n                );\r\n\r\n            }\r\n\r\n            function closePolygon() {\r\n                ctx.closePath();\r\n                ctx.fill();\r\n            }\r\n\r\n            function validateInput() {\r\n                if (points.length/ps !== otherpoints.length/otherps) {\r\n                    console.error(\"Refusing to graph inconsistent number of points\");\r\n                    return false;\r\n                }\r\n\r\n                var i;\r\n                for (i = 0; i < (points.length / ps); i++) {\r\n                    if (\r\n                        points[i * ps] !== null &&\r\n                        otherpoints[i * otherps] !== null &&\r\n                        points[i * ps] !== otherpoints[i * otherps]\r\n                    ) {\r\n                        console.error(\"Refusing to graph points without matching value\");\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                return true;\r\n            }\r\n\r\n            function findNextStart(start_i, end_i) {\r\n                console.assert(end_i > start_i, \"expects the end index to be greater than the start index\");\r\n\r\n                var start = (\r\n                        start_i === 0 ||\r\n                        points[start_i - 1] === null ||\r\n                        otherpoints[start_i - 1] === null\r\n                    ),\r\n                    equal = false,\r\n                    i,\r\n                    intersect;\r\n\r\n                for (i = start_i; i < end_i; i++) {\r\n                    // Take note of null points\r\n                    if (\r\n                        points[(i * ps) + 1] === null ||\r\n                        otherpoints[(i * ps) + 1] === null\r\n                    ) {\r\n                        equal = false;\r\n                        start = true;\r\n                    }\r\n\r\n                    // Take note of equal points\r\n                    else if (points[(i * ps) + 1] === otherpoints[(i * otherps) + 1]) {\r\n                        equal = true;\r\n                        start = false;\r\n                    }\r\n\r\n\r\n                    else if (points[(i * ps) + 1] > otherpoints[(i * otherps) + 1]) {\r\n                        // If we begin above the desired point\r\n                        if (start) {\r\n                            openPolygon(points[i * ps], points[(i * ps) + 1]);\r\n                        }\r\n\r\n                        // If an equal point preceeds this, start the polygon at that equal point\r\n                        else if (equal) {\r\n                            openPolygon(points[(i - 1) * ps], points[((i - 1) * ps) + 1]);\r\n                        }\r\n\r\n                        // Otherwise, find the intersection point, and start it there\r\n                        else {\r\n                            intersect = intersectionPoint(i);\r\n                            openPolygon(intersect[0], intersect[1]);\r\n                        }\r\n\r\n                        topTraversal(i, end_i);\r\n                        return;\r\n                    }\r\n\r\n                    // If we go below equal, equal at any preceeding point is irrelevant\r\n                    else {\r\n                        start = false;\r\n                        equal = false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            function intersectionPoint(right_i) {\r\n                console.assert(right_i > 0, \"expects the second point in the series line segment\");\r\n\r\n                var i, intersect;\r\n\r\n                for (i = 1; i < (otherpoints.length/otherps); i++) {\r\n                    intersect = segmentIntersection(\r\n                        points[(right_i - 1) * ps], points[((right_i - 1) * ps) + 1],\r\n                        points[right_i * ps], points[(right_i * ps) + 1],\r\n\r\n                        otherpoints[(i - 1) * otherps], otherpoints[((i - 1) * otherps) + 1],\r\n                        otherpoints[i * otherps], otherpoints[(i * otherps) + 1]\r\n                    );\r\n\r\n                    if (intersect !== null) {\r\n                        return intersect;\r\n                    }\r\n                }\r\n\r\n                console.error(\"intersectionPoint() should only be called when an intersection happens\");\r\n            }\r\n\r\n            function bottomTraversal(start_i, end_i) {\r\n                console.assert(start_i >= end_i, \"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)\");\r\n\r\n                var i;\r\n\r\n                for (i = start_i; i >= end_i; i--) {\r\n                    ctx.lineTo(\r\n                        otherseries.xaxis.p2c(otherpoints[i * otherps]) + plotOffset.left,\r\n                        otherseries.yaxis.p2c(otherpoints[(i * otherps) + 1]) + plotOffset.top\r\n                    );\r\n                }\r\n\r\n                closePolygon();\r\n            }\r\n\r\n            function topTraversal(start_i, end_i) {\r\n                console.assert(start_i <= end_i, \"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)\");\r\n\r\n                var i,\r\n                    intersect;\r\n\r\n                for (i = start_i; i < end_i; i++) {\r\n                    if (points[(i * ps) + 1] === null && i > start_i) {\r\n                        bottomTraversal(i - 1, start_i);\r\n                        findNextStart(i, end_i);\r\n                        return;\r\n                    }\r\n\r\n                    else if (points[(i * ps) + 1] === otherpoints[(i * otherps) + 1]) {\r\n                        bottomTraversal(i, start_i);\r\n                        findNextStart(i, end_i);\r\n                        return;\r\n                    }\r\n\r\n                    else if (points[(i * ps) + 1] < otherpoints[(i * otherps) + 1]) {\r\n                        intersect = intersectionPoint(i);\r\n                        ctx.lineTo(\r\n                            series.xaxis.p2c(intersect[0]) + plotOffset.left,\r\n                            series.yaxis.p2c(intersect[1]) + plotOffset.top\r\n                        );\r\n                        bottomTraversal(i, start_i);\r\n                        findNextStart(i, end_i);\r\n                        return;\r\n\r\n                    }\r\n\r\n                    else {\r\n                        ctx.lineTo(\r\n                            series.xaxis.p2c(points[i * ps]) + plotOffset.left,\r\n                            series.yaxis.p2c(points[(i * ps) + 1]) + plotOffset.top\r\n                        );\r\n                    }\r\n                }\r\n\r\n                bottomTraversal(end_i, start_i);\r\n            }\r\n\r\n\r\n            // Begin processing\r\n\r\n            otherseries = findBelowSeries( series, plot.getData() );\r\n\r\n            if ( !otherseries ) {\r\n                return;\r\n            }\r\n\r\n            ps = series.datapoints.pointsize;\r\n            points = series.datapoints.points;\r\n            otherps = otherseries.datapoints.pointsize;\r\n            otherpoints = otherseries.datapoints.points;\r\n            plotOffset = plot.getPlotOffset();\r\n\r\n            if (!validateInput()) {\r\n                return;\r\n            }\r\n\r\n\r\n            // Flot's getFillStyle() should probably be exposed somewhere\r\n            fillStyle = $.color.parse(series.color);\r\n            fillStyle.a = 0.4;\r\n            fillStyle.normalize();\r\n            ctx.fillStyle = fillStyle.toString();\r\n\r\n\r\n            // Begin recursive bi-directional traversal\r\n            findNextStart(0, points.length/ps);\r\n        }\r\n\r\n        plot.hooks.drawSeries.push(plotDifferenceArea);\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: \"fillbelow\",\r\n        version: \"0.1.0\"\r\n    });\r\n\r\n})(jQuery);\r\n","/*\r\n * jQuery.flot.dashes\r\n *\r\n * options = {\r\n *   series: {\r\n *     dashes: {\r\n *\r\n *       // show\r\n *       // default: false\r\n *       // Whether to show dashes for the series.\r\n *       show: <boolean>,\r\n *\r\n *       // lineWidth\r\n *       // default: 2\r\n *       // The width of the dashed line in pixels.\r\n *       lineWidth: <number>,\r\n *\r\n *       // dashLength\r\n *       // default: 10\r\n *       // Controls the length of the individual dashes and the amount of\r\n *       // space between them.\r\n *       // If this is a number, the dashes and spaces will have that length.\r\n *       // If this is an array, it is read as [ dashLength, spaceLength ]\r\n *       dashLength: <number> or <array[2]>\r\n *     }\r\n *   }\r\n * }\r\n */\r\n(function($){\r\n\r\n  function init(plot) {\r\n\r\n    plot.hooks.processDatapoints.push(function(plot, series, datapoints) {\r\n\r\n      if (!series.dashes.show) return;\r\n\r\n      plot.hooks.draw.push(function(plot, ctx) {\r\n\r\n        var plotOffset = plot.getPlotOffset(),\r\n          axisx = series.xaxis,\r\n          axisy = series.yaxis;\r\n\r\n        function plotDashes(xoffset, yoffset) {\r\n\r\n          var points = datapoints.points,\r\n            ps = datapoints.pointsize,\r\n            prevx = null,\r\n            prevy = null,\r\n            dashRemainder = 0,\r\n            dashOn = true,\r\n            dashOnLength,\r\n            dashOffLength;\r\n\r\n          if (series.dashes.dashLength[0]) {\r\n            dashOnLength = series.dashes.dashLength[0];\r\n            if (series.dashes.dashLength[1]) {\r\n              dashOffLength = series.dashes.dashLength[1];\r\n            } else {\r\n              dashOffLength = dashOnLength;\r\n            }\r\n          } else {\r\n            dashOffLength = dashOnLength = series.dashes.dashLength;\r\n          }\r\n\r\n          ctx.beginPath();\r\n\r\n          for (var i = ps; i < points.length; i += ps) {\r\n\r\n            var x1 = points[i - ps],\r\n              y1 = points[i - ps + 1],\r\n              x2 = points[i],\r\n              y2 = points[i + 1];\r\n\r\n            if (x1 == null || x2 == null) continue;\r\n\r\n            // clip with ymin\r\n            if (y1 <= y2 && y1 < axisy.min) {\r\n              if (y2 < axisy.min) continue;   // line segment is outside\r\n              // compute new intersection point\r\n              x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n              y1 = axisy.min;\r\n            } else if (y2 <= y1 && y2 < axisy.min) {\r\n              if (y1 < axisy.min) continue;\r\n              x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n              y2 = axisy.min;\r\n            }\r\n\r\n            // clip with ymax\r\n            if (y1 >= y2 && y1 > axisy.max) {\r\n              if (y2 > axisy.max) continue;\r\n              x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n              y1 = axisy.max;\r\n            } else if (y2 >= y1 && y2 > axisy.max) {\r\n              if (y1 > axisy.max) continue;\r\n              x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n              y2 = axisy.max;\r\n            }\r\n\r\n            // clip with xmin\r\n            if (x1 <= x2 && x1 < axisx.min) {\r\n              if (x2 < axisx.min) continue;\r\n              y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n              x1 = axisx.min;\r\n            } else if (x2 <= x1 && x2 < axisx.min) {\r\n              if (x1 < axisx.min) continue;\r\n              y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n              x2 = axisx.min;\r\n            }\r\n\r\n            // clip with xmax\r\n            if (x1 >= x2 && x1 > axisx.max) {\r\n              if (x2 > axisx.max) continue;\r\n              y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n              x1 = axisx.max;\r\n            } else if (x2 >= x1 && x2 > axisx.max) {\r\n              if (x1 > axisx.max) continue;\r\n              y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n              x2 = axisx.max;\r\n            }\r\n\r\n            if (x1 != prevx || y1 != prevy) {\r\n              ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\r\n            }\r\n\r\n            var ax1 = axisx.p2c(x1) + xoffset,\r\n              ay1 = axisy.p2c(y1) + yoffset,\r\n              ax2 = axisx.p2c(x2) + xoffset,\r\n              ay2 = axisy.p2c(y2) + yoffset,\r\n              dashOffset;\r\n\r\n            function lineSegmentOffset(segmentLength) {\r\n\r\n              var c = Math.sqrt(Math.pow(ax2 - ax1, 2) + Math.pow(ay2 - ay1, 2));\r\n\r\n              if (c <= segmentLength) {\r\n                return {\r\n                  deltaX: ax2 - ax1,\r\n                  deltaY: ay2 - ay1,\r\n                  distance: c,\r\n                  remainder: segmentLength - c\r\n                }\r\n              } else {\r\n                var xsign = ax2 > ax1 ? 1 : -1,\r\n                  ysign = ay2 > ay1 ? 1 : -1;\r\n                return {\r\n                  deltaX: xsign * Math.sqrt(Math.pow(segmentLength, 2) / (1 + Math.pow((ay2 - ay1)/(ax2 - ax1), 2))),\r\n                  deltaY: ysign * Math.sqrt(Math.pow(segmentLength, 2) - Math.pow(segmentLength, 2) / (1 + Math.pow((ay2 - ay1)/(ax2 - ax1), 2))),\r\n                  distance: segmentLength,\r\n                  remainder: 0\r\n                };\r\n              }\r\n            }\r\n            //-end lineSegmentOffset\r\n\r\n            do {\r\n\r\n              dashOffset = lineSegmentOffset(\r\n                dashRemainder > 0 ? dashRemainder :\r\n                  dashOn ? dashOnLength : dashOffLength);\r\n\r\n              if (dashOffset.deltaX != 0 || dashOffset.deltaY != 0) {\r\n                if (dashOn) {\r\n                  ctx.lineTo(ax1 + dashOffset.deltaX, ay1 + dashOffset.deltaY);\r\n                } else {\r\n                  ctx.moveTo(ax1 + dashOffset.deltaX, ay1 + dashOffset.deltaY);\r\n                }\r\n              }\r\n\r\n              dashOn = !dashOn;\r\n              dashRemainder = dashOffset.remainder;\r\n              ax1 += dashOffset.deltaX;\r\n              ay1 += dashOffset.deltaY;\r\n\r\n            } while (dashOffset.distance > 0);\r\n\r\n            prevx = x2;\r\n            prevy = y2;\r\n          }\r\n\r\n          ctx.stroke();\r\n        }\r\n        //-end plotDashes\r\n\r\n        ctx.save();\r\n        ctx.translate(plotOffset.left, plotOffset.top);\r\n        ctx.lineJoin = 'round';\r\n\r\n        var lw = series.dashes.lineWidth,\r\n          sw = series.shadowSize;\r\n\r\n        // FIXME: consider another form of shadow when filling is turned on\r\n        if (lw > 0 && sw > 0) {\r\n          // draw shadow as a thick and thin line with transparency\r\n          ctx.lineWidth = sw;\r\n          ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\r\n          // position shadow at angle from the mid of line\r\n          var angle = Math.PI/18;\r\n          plotDashes(Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2));\r\n          ctx.lineWidth = sw/2;\r\n          plotDashes(Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4));\r\n        }\r\n\r\n        ctx.lineWidth = lw;\r\n        ctx.strokeStyle = series.color;\r\n\r\n        if (lw > 0) {\r\n          plotDashes(0, 0);\r\n        }\r\n\r\n        ctx.restore();\r\n\r\n      });\r\n      //-end draw hook\r\n\r\n    });\r\n    //-end processDatapoints hook\r\n\r\n  }\r\n  //-end init\r\n\r\n  $.plot.plugins.push({\r\n    init: init,\r\n    options: {\r\n      series: {\r\n        dashes: {\r\n          show: false,\r\n          lineWidth: 2,\r\n          dashLength: 10\r\n        }\r\n      }\r\n    },\r\n    name: 'dashes',\r\n    version: '0.1'\r\n  });\r\n\r\n})(jQuery)\r\n","/* Flot plugin for showing crosshairs when the mouse hovers over the plot.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nThe plugin supports these options:\r\n\r\n\tcrosshair: {\r\n\t\tmode: null or \"x\" or \"y\" or \"xy\"\r\n\t\tcolor: color\r\n\t\tlineWidth: number\r\n\t}\r\n\r\nSet the mode to one of \"x\", \"y\" or \"xy\". The \"x\" mode enables a vertical\r\ncrosshair that lets you trace the values on the x axis, \"y\" enables a\r\nhorizontal crosshair and \"xy\" enables them both. \"color\" is the color of the\r\ncrosshair (default is \"rgba(170, 0, 0, 0.80)\"), \"lineWidth\" is the width of\r\nthe drawn lines (default is 1).\r\n\r\nThe plugin also adds four public methods:\r\n\r\n  - setCrosshair( pos )\r\n\r\n    Set the position of the crosshair. Note that this is cleared if the user\r\n    moves the mouse. \"pos\" is in coordinates of the plot and should be on the\r\n    form { x: xpos, y: ypos } (you can use x2/x3/... if you're using multiple\r\n    axes), which is coincidentally the same format as what you get from a\r\n    \"plothover\" event. If \"pos\" is null, the crosshair is cleared.\r\n\r\n  - clearCrosshair()\r\n\r\n    Clear the crosshair.\r\n\r\n  - lockCrosshair(pos)\r\n\r\n    Cause the crosshair to lock to the current location, no longer updating if\r\n    the user moves the mouse. Optionally supply a position (passed on to\r\n    setCrosshair()) to move it to.\r\n\r\n    Example usage:\r\n\r\n\tvar myFlot = $.plot( $(\"#graph\"), ..., { crosshair: { mode: \"x\" } } };\r\n\t$(\"#graph\").bind( \"plothover\", function ( evt, position, item ) {\r\n\t\tif ( item ) {\r\n\t\t\t// Lock the crosshair to the data point being hovered\r\n\t\t\tmyFlot.lockCrosshair({\r\n\t\t\t\tx: item.datapoint[ 0 ],\r\n\t\t\t\ty: item.datapoint[ 1 ]\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// Return normal crosshair operation\r\n\t\t\tmyFlot.unlockCrosshair();\r\n\t\t}\r\n\t});\r\n\r\n  - unlockCrosshair()\r\n\r\n    Free the crosshair to move again after locking it.\r\n*/\r\n\r\n(function ($) {\r\n    var options = {\r\n        crosshair: {\r\n            mode: null, // one of null, \"x\", \"y\" or \"xy\",\r\n            color: \"rgba(170, 0, 0, 0.80)\",\r\n            lineWidth: 1\r\n        }\r\n    };\r\n    \r\n    function init(plot) {\r\n        // position of crosshair in pixels\r\n        var crosshair = { x: -1, y: -1, locked: false };\r\n\r\n        plot.setCrosshair = function setCrosshair(pos) {\r\n            if (!pos)\r\n                crosshair.x = -1;\r\n            else {\r\n                var o = plot.p2c(pos);\r\n                crosshair.x = Math.max(0, Math.min(o.left, plot.width()));\r\n                crosshair.y = Math.max(0, Math.min(o.top, plot.height()));\r\n            }\r\n            \r\n            plot.triggerRedrawOverlay();\r\n        };\r\n        \r\n        plot.clearCrosshair = plot.setCrosshair; // passes null for pos\r\n        \r\n        plot.lockCrosshair = function lockCrosshair(pos) {\r\n            if (pos)\r\n                plot.setCrosshair(pos);\r\n            crosshair.locked = true;\r\n        };\r\n\r\n        plot.unlockCrosshair = function unlockCrosshair() {\r\n            crosshair.locked = false;\r\n        };\r\n\r\n        function onMouseOut(e) {\r\n            if (crosshair.locked)\r\n                return;\r\n\r\n            if (crosshair.x != -1) {\r\n                crosshair.x = -1;\r\n                plot.triggerRedrawOverlay();\r\n            }\r\n        }\r\n\r\n        function onMouseMove(e) {\r\n            if (crosshair.locked)\r\n                return;\r\n                \r\n            if (plot.getSelection && plot.getSelection()) {\r\n                crosshair.x = -1; // hide the crosshair while selecting\r\n                return;\r\n            }\r\n                \r\n            var offset = plot.offset();\r\n            crosshair.x = Math.max(0, Math.min(e.pageX - offset.left, plot.width()));\r\n            crosshair.y = Math.max(0, Math.min(e.pageY - offset.top, plot.height()));\r\n            plot.triggerRedrawOverlay();\r\n        }\r\n        \r\n        plot.hooks.bindEvents.push(function (plot, eventHolder) {\r\n            if (!plot.getOptions().crosshair.mode)\r\n                return;\r\n\r\n            eventHolder.mouseout(onMouseOut);\r\n            eventHolder.mousemove(onMouseMove);\r\n        });\r\n\r\n        plot.hooks.drawOverlay.push(function (plot, ctx) {\r\n            var c = plot.getOptions().crosshair;\r\n            if (!c.mode)\r\n                return;\r\n\r\n            var plotOffset = plot.getPlotOffset();\r\n            \r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            if (crosshair.x != -1) {\r\n                var adj = plot.getOptions().crosshair.lineWidth % 2 ? 0.5 : 0;\r\n\r\n                ctx.strokeStyle = c.color;\r\n                ctx.lineWidth = c.lineWidth;\r\n                ctx.lineJoin = \"round\";\r\n\r\n                ctx.beginPath();\r\n                if (c.mode.indexOf(\"x\") != -1) {\r\n                    var drawX = Math.floor(crosshair.x) + adj;\r\n                    ctx.moveTo(drawX, 0);\r\n                    ctx.lineTo(drawX, plot.height());\r\n                }\r\n                if (c.mode.indexOf(\"y\") != -1) {\r\n                    var drawY = Math.floor(crosshair.y) + adj;\r\n                    ctx.moveTo(0, drawY);\r\n                    ctx.lineTo(plot.width(), drawY);\r\n                }\r\n                ctx.stroke();\r\n            }\r\n            ctx.restore();\r\n        });\r\n\r\n        plot.hooks.shutdown.push(function (plot, eventHolder) {\r\n            eventHolder.unbind(\"mouseout\", onMouseOut);\r\n            eventHolder.unbind(\"mousemove\", onMouseMove);\r\n        });\r\n    }\r\n    \r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'crosshair',\r\n        version: '1.0'\r\n    });\r\n})(jQuery);\r\n","/*!\r\n * jquery.flot.gauge v1.1.0 *\r\n *\r\n * Flot plugin for rendering gauge charts.\r\n *\r\n * Copyright (c) 2015 @toyoty99.\r\n * Licensed under the MIT license.\r\n */\r\n\r\n/**\r\n * @module flot.gauge\r\n */\r\n(function($) {\r\n\r\n\r\n    /**\r\n     * Gauge class\r\n     *\r\n     * @class Gauge\r\n     */\r\n    var Gauge = (function() {\r\n        /**\r\n         * context of canvas\r\n         *\r\n         * @property context\r\n         * @type Object\r\n         */\r\n        var context;\r\n        /**\r\n         * placeholder of canvas\r\n         *\r\n         * @property placeholder\r\n         * @type Object\r\n         */\r\n        var placeholder;\r\n        /**\r\n         * options of plot\r\n         *\r\n         * @property options\r\n         * @type Object\r\n         */\r\n        var options;\r\n        /**\r\n         * options of gauge\r\n         *\r\n         * @property gaugeOptions\r\n         * @type Object\r\n         */\r\n        var gaugeOptions;\r\n        /**\r\n         * data series\r\n         *\r\n         * @property series\r\n         * @type Array\r\n         */\r\n        var series;\r\n        /**\r\n         * logger\r\n         *\r\n         * @property logger\r\n         * @type Object\r\n         */\r\n        var logger;\r\n\r\n        /**\r\n         * constructor\r\n         *\r\n         * @class Gauge\r\n         * @constructor\r\n         * @param  {Object} gaugeOptions gauge options\r\n         */\r\n        var Gauge = function(plot, ctx) {\r\n            context = ctx;\r\n            placeholder = plot.getPlaceholder();\r\n            options = plot.getOptions();\r\n            gaugeOptions = options.series.gauges;\r\n            series = plot.getData();\r\n            logger = getLogger(gaugeOptions.debug);\r\n        }\r\n\r\n        /**\r\n         * calculate layout\r\n         *\r\n         * @method calculateLayout\r\n         * @return the calculated layout properties\r\n         */\r\n        Gauge.prototype.calculateLayout = function() {\r\n\r\n            var canvasWidth = placeholder.width();\r\n            var canvasHeight = placeholder.height();\r\n\r\n\r\n\r\n            // calculate cell size\r\n            var columns = Math.min(series.length, gaugeOptions.layout.columns);\r\n            var rows = Math.ceil(series.length / columns);\r\n\r\n\r\n\r\n            var margin = gaugeOptions.layout.margin;\r\n            var hMargin = gaugeOptions.layout.hMargin;\r\n            var vMargin = gaugeOptions.layout.vMargin;\r\n            var cellWidth = (canvasWidth - (margin * 2) - (hMargin * (columns - 1))) / columns;\r\n            var cellHeight = (canvasHeight - (margin * 2) - (vMargin * (rows - 1))) / rows;\r\n            if (gaugeOptions.layout.square) {\r\n                var cell = Math.min(cellWidth, cellHeight);\r\n                cellWidth = cell;\r\n                cellHeight = cell;\r\n            }\r\n\r\n\r\n\r\n            // calculate 'auto' values\r\n            calculateAutoValues(gaugeOptions, cellWidth);\r\n\r\n            // calculate maximum radius\r\n            var cellMargin = gaugeOptions.cell.margin;\r\n            var labelMargin = 0;\r\n            var labelFontSize = 0;\r\n            if (gaugeOptions.label.show) {\r\n                labelMargin = gaugeOptions.label.margin;\r\n                labelFontSize = gaugeOptions.label.font.size;\r\n            }\r\n            var valueMargin = 0;\r\n            var valueFontSize = 0;\r\n            if (gaugeOptions.value.show) {\r\n                valueMargin = gaugeOptions.value.margin;\r\n                valueFontSize = gaugeOptions.value.font.size;\r\n            }\r\n            var thresholdWidth = 0;\r\n            if (gaugeOptions.threshold.show) {\r\n                thresholdWidth = gaugeOptions.threshold.width;\r\n            }\r\n            var thresholdLabelMargin = 0;\r\n            var thresholdLabelFontSize = 0;\r\n            if (gaugeOptions.threshold.label.show) {\r\n                thresholdLabelMargin = gaugeOptions.threshold.label.margin;\r\n                thresholdLabelFontSize = gaugeOptions.threshold.label.font.size;\r\n            }\r\n\r\n            var maxRadiusH = (cellWidth / 2) - cellMargin - thresholdWidth - (thresholdLabelMargin * 2) - thresholdLabelFontSize;\r\n\r\n            var startAngle = gaugeOptions.gauge.startAngle;\r\n            var endAngle = gaugeOptions.gauge.endAngle;\r\n            var dAngle = (endAngle - startAngle) / 100;\r\n            var heightRatioV = -1;\r\n            for (var a = startAngle; a < endAngle; a += dAngle) {\r\n                heightRatioV = Math.max(heightRatioV, Math.sin(toRad(a)));\r\n            }\r\n            heightRatioV = Math.max(heightRatioV, Math.sin(toRad(endAngle)));\r\n            var outerRadiusV = (cellHeight - (cellMargin * 2) - (labelMargin * 2) - labelFontSize) / (1 + heightRatioV);\r\n            if (outerRadiusV * heightRatioV < valueMargin + (valueFontSize / 2)) {\r\n                outerRadiusV = cellHeight - (cellMargin * 2) - (labelMargin * 2) - labelFontSize - valueMargin - (valueFontSize / 2);\r\n            }\r\n            var maxRadiusV = outerRadiusV - (thresholdLabelMargin * 2) - thresholdLabelFontSize - thresholdWidth;\r\n\r\n            var radius = Math.min(maxRadiusH, maxRadiusV);\r\n\r\n\r\n            var width = gaugeOptions.gauge.width;\r\n            if (width >= radius) {\r\n                width = Math.max(3, radius / 3);\r\n            }\r\n\r\n\r\n            var outerRadius = (thresholdLabelMargin * 2) + thresholdLabelFontSize + thresholdWidth + radius;\r\n            var gaugeOuterHeight = Math.max(outerRadius * (1 + heightRatioV), outerRadius + valueMargin + (valueFontSize / 2));\r\n\r\n            return {\r\n                canvasWidth: canvasWidth,\r\n                canvasHeight: canvasHeight,\r\n                margin: margin,\r\n                hMargin: hMargin,\r\n                vMargin: vMargin,\r\n                columns: columns,\r\n                rows: rows,\r\n                cellWidth: cellWidth,\r\n                cellHeight: cellHeight,\r\n                cellMargin: cellMargin,\r\n                labelMargin: labelMargin,\r\n                labelFontSize: labelFontSize,\r\n                valueMargin: valueMargin,\r\n                valueFontSize: valueFontSize,\r\n                width: width,\r\n                radius: radius,\r\n                thresholdWidth: thresholdWidth,\r\n                thresholdLabelMargin: thresholdLabelMargin,\r\n                thresholdLabelFontSize: thresholdLabelFontSize,\r\n                gaugeOuterHeight: gaugeOuterHeight\r\n            };\r\n        }\r\n\r\n        /**\r\n         * calculate the values which are set as 'auto'\r\n         *\r\n         * @method calculateAutoValues\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Number} cellWidth the width of cell\r\n         */\r\n        function calculateAutoValues(gaugeOptionsi, cellWidth) {\r\n\r\n            if (gaugeOptionsi.gauge.width === \"auto\") {\r\n                gaugeOptionsi.gauge.width = Math.max(5, cellWidth / 8);\r\n            }\r\n            if (gaugeOptionsi.label.margin === \"auto\") {\r\n                gaugeOptionsi.label.margin = Math.max(1, cellWidth / 20);\r\n            }\r\n            if (gaugeOptionsi.label.font.size === \"auto\") {\r\n                gaugeOptionsi.label.font.size = Math.max(5, cellWidth / 8);\r\n            }\r\n            if (gaugeOptionsi.value.margin === \"auto\") {\r\n                gaugeOptionsi.value.margin = Math.max(1, cellWidth / 30);\r\n            }\r\n            if (gaugeOptionsi.value.font.size === \"auto\") {\r\n                gaugeOptionsi.value.font.size = Math.max(5, cellWidth / 9);\r\n            }\r\n            if (gaugeOptionsi.threshold.width === \"auto\") {\r\n                gaugeOptionsi.threshold.width = Math.max(3, cellWidth / 100);\r\n            }\r\n            if (gaugeOptionsi.threshold.label.margin === \"auto\") {\r\n                gaugeOptionsi.threshold.label.margin = Math.max(3, cellWidth / 40);\r\n            }\r\n            if (gaugeOptionsi.threshold.label.font.size === \"auto\") {\r\n                gaugeOptionsi.threshold.label.font.size = Math.max(5, cellWidth / 15);\r\n            }\r\n\r\n        }\r\n        Gauge.prototype.calculateAutoValues = calculateAutoValues;\r\n\r\n        /**\r\n         * calculate the layout of the cell inside\r\n         *\r\n         * @method calculateCellLayout\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Number} cellWidth the width of cell\r\n         * @param  {Number} i the index of the series\r\n         * @return the calculated cell layout properties\r\n         */\r\n        Gauge.prototype.calculateCellLayout = function(gaugeOptionsi, layout, i) {\r\n\r\n            // calculate top, left and center\r\n            var c = col(layout.columns, i);\r\n            var r = row(layout.columns, i);\r\n            var x = layout.margin + (layout.cellWidth + layout.hMargin) * c;\r\n            var y = layout.margin + (layout.cellHeight + layout.vMargin) * r;\r\n            var cx = x + (layout.cellWidth / 2);\r\n            var cy = y + layout.cellMargin + (layout.labelMargin * 2) + layout.labelFontSize + layout.thresholdWidth\r\n                        + layout.thresholdLabelFontSize + (layout.thresholdLabelMargin * 2) + layout.radius;\r\n            var blank = layout.cellHeight - (layout.cellMargin * 2) - (layout.labelMargin * 2) - layout.labelFontSize - layout.gaugeOuterHeight;\r\n            var offsetY = 0;\r\n            if (gaugeOptionsi.cell.vAlign === \"middle\") {\r\n                offsetY = (blank / 2);\r\n            } else if (gaugeOptionsi.cell.vAlign === \"bottom\") {\r\n                offsetY = blank;\r\n            }\r\n            cy += offsetY;\r\n\r\n            return {\r\n                col: c,\r\n                row: r,\r\n                x: x,\r\n                y: y,\r\n                offsetY: offsetY,\r\n                cellWidth: layout.cellWidth,\r\n                cellHeight: layout.cellHeight,\r\n                cellMargin: layout.cellMargin,\r\n                cx: cx,\r\n                cy: cy\r\n            }\r\n        }\r\n\r\n        /**\r\n         * draw the background of chart\r\n         *\r\n         * @method drawBackground\r\n         * @param  {Object} layout the layout properties\r\n         */\r\n        Gauge.prototype.drawBackground = function(layout) {\r\n\r\n            if (!gaugeOptions.frame.show) {\r\n                return;\r\n            }\r\n            context.save();\r\n            context.strokeStyle = options.grid.borderColor;\r\n            context.lineWidth = options.grid.borderWidth;\r\n            context.strokeRect(0, 0, layout.canvasWidth, layout.canvasHeight);\r\n            if (options.grid.backgroundColor) {\r\n                context.fillStyle = options.grid.backgroundColor;\r\n                context.fillRect(0, 0, layout.canvasWidth, layout.canvasHeight);\r\n            }\r\n            context.restore();\r\n        }\r\n\r\n        /**\r\n         * draw the background of cell\r\n         *\r\n         * @method drawCellBackground\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Object} cellLayout the cell layout properties\r\n         */\r\n        Gauge.prototype.drawCellBackground = function(gaugeOptionsi, cellLayout) {\r\n\r\n            context.save();\r\n            if (gaugeOptionsi.cell.border && gaugeOptionsi.cell.border.show && gaugeOptionsi.cell.border.color && gaugeOptionsi.cell.border.width) {\r\n                context.strokeStyle = gaugeOptionsi.cell.border.color;\r\n                context.lineWidth = gaugeOptionsi.cell.border.width;\r\n                context.strokeRect(cellLayout.x, cellLayout.y, cellLayout.cellWidth, cellLayout.cellHeight);\r\n            }\r\n            if (gaugeOptionsi.cell.background && gaugeOptionsi.cell.background.color) {\r\n                context.fillStyle = gaugeOptionsi.cell.background.color;\r\n                context.fillRect(cellLayout.x, cellLayout.y, cellLayout.cellWidth, cellLayout.cellHeight);\r\n            }\r\n            context.restore();\r\n        }\r\n\r\n        /**\r\n         * draw the gauge\r\n         *\r\n         * @method drawGauge\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Object} layout the layout properties\r\n         * @param  {Object} cellLayout the cell layout properties\r\n         * @param  {String} label the label of data\r\n         * @param  {Number} data the value of the gauge\r\n         */\r\n        Gauge.prototype.drawGauge = function(gaugeOptionsi, layout, cellLayout, label, data) {\r\n\r\n\r\n            var blur = gaugeOptionsi.gauge.shadow.show ? gaugeOptionsi.gauge.shadow.blur : 0;\r\n\r\n\r\n            // draw gauge frame\r\n            drawArcWithShadow(\r\n                cellLayout.cx, // center x\r\n                cellLayout.cy, // center y\r\n                layout.radius,\r\n                layout.width,\r\n                toRad(gaugeOptionsi.gauge.startAngle),\r\n                toRad(gaugeOptionsi.gauge.endAngle),\r\n                gaugeOptionsi.gauge.border.color,      // line color\r\n                gaugeOptionsi.gauge.border.width,      // line width\r\n                gaugeOptionsi.gauge.background.color,  // fill color\r\n                blur);\r\n\r\n            // draw gauge\r\n            var c1 = getColor(gaugeOptionsi, data);\r\n            var a2 = calculateAngle(gaugeOptionsi, layout, data);\r\n            drawArcWithShadow(\r\n                cellLayout.cx, // center x\r\n                cellLayout.cy, // center y\r\n                layout.radius - 1,\r\n                layout.width - 2,\r\n                toRad(gaugeOptionsi.gauge.startAngle),\r\n                toRad(a2),\r\n                c1,           // line color\r\n                1,            // line width\r\n                c1,           // fill color\r\n                blur);\r\n        }\r\n\r\n        /**\r\n         * decide the color of the data from the threshold options\r\n         *\r\n         * @method getColor\r\n         * @private\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Number} data the value of the gauge\r\n         */\r\n        function getColor(gaugeOptionsi, data) {\r\n            var color;\r\n            for (var i = 0; i < gaugeOptionsi.threshold.values.length; i++) {\r\n                var threshold = gaugeOptionsi.threshold.values[i];\r\n                color = threshold.color;\r\n                if (data < threshold.value) {\r\n                    break;\r\n                }\r\n            }\r\n            return color;\r\n        }\r\n\r\n        /**\r\n         * calculate the angle of the data\r\n         *\r\n         * @method calculateAngle\r\n         * @private\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Object} layout the layout properties\r\n         * @param  {Number} data the value of the gauge\r\n         */\r\n        function calculateAngle(gaugeOptionsi, layout, data) {\r\n            var a =\r\n                gaugeOptionsi.gauge.startAngle\r\n                    + (gaugeOptionsi.gauge.endAngle - gaugeOptionsi.gauge.startAngle)\r\n                        * ((data - gaugeOptionsi.gauge.min) / (gaugeOptionsi.gauge.max - gaugeOptionsi.gauge.min));\r\n\r\n            if (a < gaugeOptionsi.gauge.startAngle) {\r\n                a = gaugeOptionsi.gauge.startAngle;\r\n            } else if (a > gaugeOptionsi.gauge.endAngle) {\r\n                a = gaugeOptionsi.gauge.endAngle;\r\n            }\r\n            return a;\r\n        }\r\n\r\n        /**\r\n         * draw the arc of the threshold\r\n         *\r\n         * @method drawThreshold\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Object} layout the layout properties\r\n         * @param  {Object} cellLayout the cell layout properties\r\n         */\r\n        Gauge.prototype.drawThreshold = function(gaugeOptionsi, layout, cellLayout) {\r\n\r\n            var a1 = gaugeOptionsi.gauge.startAngle;\r\n            for (var i = 0; i < gaugeOptionsi.threshold.values.length; i++) {\r\n                var threshold = gaugeOptionsi.threshold.values[i];\r\n                c1 = threshold.color;\r\n                a2 = calculateAngle(gaugeOptionsi, layout, threshold.value);\r\n                drawArc(\r\n                    context,\r\n                    cellLayout.cx, // center x\r\n                    cellLayout.cy, // center y\r\n                    layout.radius + layout.thresholdWidth,\r\n                    layout.thresholdWidth - 2,\r\n                    toRad(a1),\r\n                    toRad(a2),\r\n                    c1,           // line color\r\n                    1,            // line width\r\n                    c1);          // fill color\r\n                a1 = a2;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * draw an arc with a shadow\r\n         *\r\n         * @method drawArcWithShadow\r\n         * @private\r\n         * @param  {Number} cx the x position of the center\r\n         * @param  {Number} cy the y position of the center\r\n         * @param  {Number} r the radius of an arc\r\n         * @param  {Number} w the width of an arc\r\n         * @param  {Number} rd1 the start angle of an arc in radians\r\n         * @param  {Number} rd2 the end angle of an arc in radians\r\n         * @param  {String} lc the color of a line\r\n         * @param  {Number} lw the widht of a line\r\n         * @param  {String} fc the fill color  of an arc\r\n         * @param  {Number} blur the shdow blur\r\n         */\r\n        function drawArcWithShadow(cx, cy, r, w, rd1, rd2, lc, lw, fc, blur) {\r\n            if (rd1 === rd2) {\r\n                return;\r\n            }\r\n            context.save();\r\n\r\n            drawArc(context, cx, cy, r, w, rd1, rd2, lc, lw, fc);\r\n\r\n            if (blur) {\r\n                drawArc(context, cx, cy, r, w, rd1, rd2);\r\n                context.clip();\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n                context.shadowBlur = 10;\r\n                context.shadowColor = \"gray\";\r\n                drawArc(context, cx, cy, r + 1, w + 2, rd1, rd2, lc, 1);\r\n            }\r\n            context.restore();\r\n        }\r\n\r\n        /**\r\n         * draw the label of the gauge\r\n         *\r\n         * @method drawLable\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Object} layout the layout properties\r\n         * @param  {Object} cellLayout the cell layout properties\r\n         * @param  {Number} i the index of the series\r\n         * @param  {Object} item the item of the series\r\n         */\r\n        Gauge.prototype.drawLable = function(gaugeOptionsi, layout, cellLayout, i, item) {\r\n\r\n            drawText(\r\n                cellLayout.cx,\r\n                cellLayout.y + cellLayout.cellMargin + layout.labelMargin + cellLayout.offsetY,\r\n                \"flotGagueLabel\" + i,\r\n                gaugeOptionsi.label.formatter ? gaugeOptionsi.label.formatter(item.label, item.data[0][1]) : text,\r\n                gaugeOptionsi.label);\r\n        }\r\n\r\n        /**\r\n         * draw the value of the gauge\r\n         *\r\n         * @method drawValue\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Object} layout the layout properties\r\n         * @param  {Object} cellLayout the cell layout properties\r\n         * @param  {Number} i the index of the series\r\n         * @param  {Object} item the item of the series\r\n         */\r\n        Gauge.prototype.drawValue = function(gaugeOptionsi, layout, cellLayout, i, item) {\r\n\r\n            drawText(\r\n                cellLayout.cx,\r\n                cellLayout.cy - (gaugeOptionsi.value.font.size / 2),\r\n                \"flotGagueValue\" + i,\r\n                gaugeOptionsi.value.formatter ? gaugeOptionsi.value.formatter(item.label, item.data[0][1]) : text,\r\n                gaugeOptionsi.value);\r\n        }\r\n\r\n        /**\r\n         * draw the values of the threshold\r\n         *\r\n         * @method drawThresholdValues\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Object} layout the layout properties\r\n         * @param  {Object} cellLayout the cell layout properties\r\n         * @param  {Number} i the index of the series\r\n         */\r\n        Gauge.prototype.drawThresholdValues = function(gaugeOptionsi, layout, cellLayout, i) {\r\n\r\n            // min, max\r\n            drawThresholdValue(gaugeOptionsi, layout, cellLayout, \"Min\" + i, gaugeOptionsi.gauge.min, gaugeOptionsi.gauge.startAngle);\r\n            drawThresholdValue(gaugeOptionsi, layout, cellLayout, \"Max\" + i, gaugeOptionsi.gauge.max, gaugeOptionsi.gauge.endAngle);\r\n            // threshold values\r\n            for (var j = 0; j < gaugeOptionsi.threshold.values.length; j++) {\r\n                var threshold = gaugeOptionsi.threshold.values[j];\r\n                if (threshold.value > gaugeOptionsi.gauge.min && threshold.value < gaugeOptionsi.gauge.max) {\r\n                    var a = calculateAngle(gaugeOptionsi, layout, threshold.value);\r\n                    drawThresholdValue(gaugeOptionsi, layout, cellLayout, i + \"_\" + j, threshold.value, a);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * draw the value of the threshold\r\n         *\r\n         * @method drawThresholdValue\r\n         * @param  {Object} gaugeOptionsi the options of the gauge\r\n         * @param  {Object} layout the layout properties\r\n         * @param  {Object} cellLayout the cell layout properties\r\n         * @param  {Number} i the index of the series\r\n         * @param  {Number} value the value of the threshold\r\n         * @param  {Number} a the angle of the value drawn\r\n         */\r\n        function drawThresholdValue(gaugeOptionsi, layout, cellLayout, i, value, a) {\r\n            drawText(\r\n                cellLayout.cx\r\n                    + ((layout.thresholdLabelMargin + (layout.thresholdLabelFontSize / 2) + layout.radius)\r\n                        * Math.cos(toRad(a))),\r\n                cellLayout.cy\r\n                    + ((layout.thresholdLabelMargin + (layout.thresholdLabelFontSize / 2) + layout.radius)\r\n                        * Math.sin(toRad(a))),\r\n                \"flotGagueThresholdValue\" + i,\r\n                gaugeOptionsi.threshold.label.formatter ? gaugeOptionsi.threshold.label.formatter(value) : value,\r\n                gaugeOptionsi.threshold.label,\r\n                a);\r\n        }\r\n\r\n        /**\r\n         * draw a text\r\n         *\r\n         * the textOptions is assumed as follows:\r\n         *\r\n         *   textOptions: {\r\n         *       background: {\r\n         *           color: null,\r\n         *           opacity: 0\r\n         *       },\r\n         *       font: {\r\n         *           size: \"auto\"\r\n         *           family: \"\\\"ＭＳ ゴシック\\\",sans-serif\"\r\n         *       },\r\n         *       color: null\r\n         *   }\r\n         *\r\n         * @method drawText\r\n         * @private\r\n         * @param  {Number} x the x position of the text drawn (left top)\r\n         * @param  {Number} y the y position of the text drawn (left top)\r\n         * @param  {String} id the id of the dom element\r\n         * @param  {String} text the text drawn\r\n         * @param  {Object} textOptions the option of the text\r\n         * @param  {Number} [a] the angle of the value drawn\r\n         */\r\n        function drawText(x, y, id, text, textOptions, a) {\r\n            var span = $(\".\" + id, placeholder);\r\n            var exists = span.length;\r\n            if (!exists) {\r\n                span = $(\"<span></span>\")\r\n                span.attr(\"id\", id);\r\n                span.css(\"position\", \"absolute\");\r\n                span.css(\"top\", y + \"px\");\r\n                if (textOptions.font.size) {\r\n                    span.css(\"font-size\", textOptions.font.size + \"px\");\r\n                }\r\n                if (textOptions.font.family) {\r\n                    span.css(\"font-family\", textOptions.font.family);\r\n                }\r\n                if (textOptions.color) {\r\n                    span.css(\"color\", textOptions.color);\r\n                }\r\n                if (textOptions.background.color) {\r\n                    span.css(\"background-color\", textOptions.background.color);\r\n                }\r\n                if (textOptions.background.opacity) {\r\n                    span.css(\"opacity\", textOptions.background.opacity);\r\n                }\r\n                placeholder.append(span);\r\n            }\r\n            span.text(text);\r\n            // after append, readjust the left position\r\n            span.css(\"left\", x + \"px\"); // for redraw, resetting the left position is needed here\r\n            span.css(\"left\", (parseInt(span.css(\"left\")) - (span.width()/ 2)) + \"px\");\r\n\r\n            // at last, set angle\r\n            if (!exists && a) {\r\n                span.css(\"top\", (parseInt(span.css(\"top\")) - (span.height()/ 2)) + \"px\");\r\n                span.css(\"transform\", \"rotate(\" + ((180 * a) + 90) + \"deg)\"); // not supported for ie8\r\n            }\r\n        }\r\n\r\n        return Gauge;\r\n    })();\r\n    /**\r\n     * get a instance of Logger\r\n     *\r\n     * @method  getLogger\r\n     * @for flot.gauge\r\n     * @private\r\n     * @param  {Object} debugOptions the options of debug\r\n     */\r\n    function getLogger(debugOptions) {\r\n        return typeof Logger !== \"undefined\" ? new Logger(debugOptions) : null;\r\n    }\r\n\r\n    /**\r\n     * calculate the index of columns for the specified data\r\n     *\r\n     * @method col\r\n     * @for flot.gauge\r\n     * @param  {Number} columns the number of columns\r\n     * @param  {Number} i       the index of the series\r\n     * @return the index of columns\r\n     */\r\n    function col(columns, i) {\r\n        return i % columns;\r\n    }\r\n\r\n    /**\r\n     * calculate the index of rows for the specified data\r\n     *\r\n     * @method row\r\n     * @for flot.gauge\r\n     * @param  {Number} columns the number of rows\r\n     * @param  {Number} i       the index of the series\r\n     * @return the index of rows\r\n     */\r\n    function row(columns, i) {\r\n        return Math.floor(i / columns);\r\n    }\r\n\r\n    /**\r\n     * calculate the angle in radians\r\n     *\r\n     * internally, use a number without PI (0 - 2).\r\n     * so, in this function, multiply PI\r\n     *\r\n     * @method toRad\r\n     * @for flot.gauge\r\n     * @param  {Number} a the number of angle without PI\r\n     * @return the angle in radians\r\n     */\r\n    function toRad(a) {\r\n        return a * Math.PI;\r\n    }\r\n\r\n    /**\r\n     * draw an arc\r\n     *\r\n     * @method drawArc\r\n     * @for flot.gauge\r\n     * @param  {Object} context the context of canvas\r\n     * @param  {Number} cx the x position of the center\r\n     * @param  {Number} cy the y position of the center\r\n     * @param  {Number} r the radius of an arc\r\n     * @param  {Number} w the width of an arc\r\n     * @param  {Number} rd1 the start angle of an arc in radians\r\n     * @param  {Number} rd2 the end angle of an arc in radians\r\n     * @param  {String} lc the color of a line\r\n     * @param  {Number} lw the widht of a line\r\n     * @param  {String} fc the fill color  of an arc\r\n     */\r\n    function drawArc(context, cx, cy, r, w, rd1, rd2, lc, lw, fc) {\r\n        if (rd1 === rd2) {\r\n            return;\r\n        }\r\n        var counterClockwise = false;\r\n        context.save();\r\n        context.beginPath();\r\n        context.arc(cx, cy, r, rd1, rd2, counterClockwise);\r\n        context.lineTo(cx + (r - w) * Math.cos(rd2),\r\n                       cy + (r - w) * Math.sin(rd2));\r\n        context.arc(cx, cy, r - w, rd2, rd1, !counterClockwise);\r\n        context.closePath();\r\n        if (lw) {\r\n            context.lineWidth = lw;\r\n        }\r\n        if (lc) {\r\n            context.strokeStyle = lc;\r\n            context.stroke();\r\n        }\r\n        if (fc) {\r\n            context.fillStyle = fc;\r\n            context.fill();\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    /**\r\n     * initialize plugin\r\n     *\r\n     * @method init\r\n     * @for flot.gauge\r\n     * @private\r\n     * @param  {Object} plot a instance of plot\r\n     */\r\n    function init (plot) {\r\n        // add processOptions hook\r\n        plot.hooks.processOptions.push(function(plot, options) {\r\n            var logger = getLogger(options.series.gauges.debug);\r\n\r\n\r\n\r\n\r\n            // turn 'grid' and 'legend' off\r\n            if (options.series.gauges.show) {\r\n                options.grid.show = false;\r\n                options.legend.show = false;\r\n            }\r\n\r\n            // sort threshold\r\n            var thresholds = options.series.gauges.threshold.values;\r\n\r\n            thresholds.sort(function(a, b) {\r\n                if (a.value < b.value) {\r\n                    return -1;\r\n                } else if (a.value > b.value) {\r\n                    return 1;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            });\r\n\r\n\r\n\r\n        });\r\n\r\n        // add draw hook\r\n        plot.hooks.draw.push(function(plot, context) {\r\n            var options = plot.getOptions();\r\n            var gaugeOptions = options.series.gauges;\r\n\r\n            var logger = getLogger(gaugeOptions.debug);\r\n\r\n\r\n            if (!gaugeOptions.show) {\r\n                return;\r\n            }\r\n\r\n            var series = plot.getData();\r\n\r\n            if (!series || !series.length) {\r\n                return; // if no series were passed\r\n            }\r\n\r\n            var gauge = new Gauge(plot, context);\r\n\r\n            // calculate layout\r\n            var layout = gauge.calculateLayout();\r\n\r\n            // debug layout\r\n            if (gaugeOptions.debug.layout) {\r\n\r\n            }\r\n\r\n            // draw background\r\n            gauge.drawBackground(layout)\r\n\r\n            // draw cells (label, gauge, value, threshold)\r\n            for (var i = 0; i < series.length; i++) {\r\n                var item = series[i];\r\n\r\n                var gaugeOptionsi = $.extend({}, gaugeOptions, item.gauges);\r\n                if (item.gauges) {\r\n                    // re-calculate 'auto' values\r\n                    gauge.calculateAutoValues(gaugeOptionsi, layout.cellWidth);\r\n                }\r\n\r\n                // calculate cell layout\r\n                var cellLayout = gauge.calculateCellLayout(gaugeOptionsi, layout, i);\r\n\r\n                // draw cell background\r\n                gauge.drawCellBackground(gaugeOptionsi, cellLayout)\r\n                // debug layout\r\n                if (gaugeOptionsi.debug.layout) {\r\n\r\n                }\r\n                // draw label\r\n                if (gaugeOptionsi.label.show) {\r\n                    gauge.drawLable(gaugeOptionsi, layout, cellLayout, i, item);\r\n                }\r\n                // draw gauge\r\n                gauge.drawGauge(gaugeOptionsi, layout, cellLayout, item.label, item.data[0][1]);\r\n                // draw threshold\r\n                if (gaugeOptionsi.threshold.show) {\r\n                    gauge.drawThreshold(gaugeOptionsi, layout, cellLayout);\r\n                }\r\n                if (gaugeOptionsi.threshold.label.show) {\r\n                    gauge.drawThresholdValues(gaugeOptionsi, layout, cellLayout, i)\r\n                }\r\n                // draw value\r\n                if (gaugeOptionsi.value.show) {\r\n                    gauge.drawValue(gaugeOptionsi, layout, cellLayout, i, item);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * [defaults description]\r\n     *\r\n     * @property defaults\r\n     * @type {Object}\r\n     */\r\n    var defaults = {\r\n        series: {\r\n            gauges: {\r\n                debug: {\r\n                    log: false,\r\n                    layout: false,\r\n                    alert: false\r\n                },\r\n                show: false,\r\n                layout: {\r\n                    margin: 5,\r\n                    columns: 3,\r\n                    hMargin: 5,\r\n                    vMargin: 5,\r\n                    square: false\r\n                },\r\n                frame: {\r\n                    show: true\r\n                },\r\n                cell: {\r\n                    background: {\r\n                        color: null\r\n                    },\r\n                    border: {\r\n                        show: true,\r\n                        color: \"black\",\r\n                        width: 1\r\n                    },\r\n                    margin: 5,\r\n                    vAlign: \"middle\" // 'top' or 'middle' or 'bottom'\r\n                },\r\n                gauge: {\r\n                    width: \"auto\", // a specified number, or 'auto'\r\n                    startAngle: 0.9, // 0 - 2 factor of the radians\r\n                    endAngle: 2.1, // 0 - 2 factor of the radians\r\n                    min: 0,\r\n                    max: 100,\r\n                    background: {\r\n                        color: \"white\"\r\n                    },\r\n                    border: {\r\n                        color: \"lightgray\",\r\n                        width: 2\r\n                    },\r\n                    shadow: {\r\n                        show: true,\r\n                        blur: 5\r\n                    }\r\n                },\r\n                label: {\r\n                    show: true,\r\n                    margin: \"auto\", // a specified number, or 'auto'\r\n                    background: {\r\n                        color: null,\r\n                        opacity: 0\r\n                    },\r\n                    font: {\r\n                        size: \"auto\", // a specified number, or 'auto'\r\n                        family: \"sans-serif\"\r\n                    },\r\n                    color: null,\r\n                    formatter: function(label, value) {\r\n                        return label;\r\n                    }\r\n                },\r\n                value: {\r\n                    show: true,\r\n                    margin: \"auto\", // a specified number, or 'auto'\r\n                    background: {\r\n                        color: null,\r\n                        opacity: 0\r\n                    },\r\n                    font: {\r\n                        size: \"auto\", // a specified number, or 'auto'\r\n                        family: \"sans-serif\"\r\n                    },\r\n                    color: null,\r\n                    formatter: function(label, value) {\r\n                        return parseInt(value);\r\n                    }\r\n                },\r\n                threshold: {\r\n                    show: true,\r\n                    width: \"auto\", // a specified number, or 'auto'\r\n                    label: {\r\n                        show: true,\r\n                        margin: \"auto\", // a specified number, or 'auto'\r\n                        background: {\r\n                            color: null,\r\n                            opacity: 0\r\n                        },\r\n                        font: {\r\n                            size: \"auto\", // a specified number, or 'auto'\r\n                            family: \",sans-serif\"\r\n                        },\r\n                        color: null,\r\n                        formatter: function(value) {\r\n                            return value;\r\n                        }\r\n                    },\r\n                    values: [\r\n                        {\r\n                            value: 50,\r\n                            color: \"lightgreen\"\r\n                        }, {\r\n                            value: 80,\r\n                            color: \"yellow\"\r\n                        }, {\r\n                            value: 100,\r\n                            color: \"red\"\r\n                        }\r\n                    ]\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // register the gauge plugin\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: defaults,\r\n        name: \"gauge\",\r\n        version: \"1.1.0\"\r\n    });\r\n\r\n})(jQuery);\r\n","import kbn from 'app/core/utils/kbn';\r\nimport { getFlotTickDecimals } from 'app/core/utils/ticks';\r\nimport _ from 'lodash';\r\n\r\nfunction matchSeriesOverride(aliasOrRegex, seriesAlias) {\r\n  if (!aliasOrRegex) {\r\n    return false;\r\n  }\r\n\r\n  if (aliasOrRegex[0] === '/') {\r\n    const regex = kbn.stringToJsRegex(aliasOrRegex);\r\n    return seriesAlias.match(regex) != null;\r\n  }\r\n\r\n  return aliasOrRegex === seriesAlias;\r\n}\r\n\r\nfunction translateFillOption(fill) {\r\n  return fill === 0 ? 0.001 : fill / 10;\r\n}\r\n\r\n/**\r\n * Calculate decimals for legend and update values for each series.\r\n * @param data series data\r\n * @param panel\r\n * @param height\r\n */\r\nexport function updateLegendValues(data: TimeSeries[], panel, height) {\r\n  for (let i = 0; i < data.length; i++) {\r\n    const series = data[i];\r\n    const yaxes = panel.yaxes;\r\n    const seriesYAxis = series.yaxis || 1;\r\n    const axis = yaxes[seriesYAxis - 1];\r\n    const formater = kbn.valueFormats[axis.format];\r\n\r\n    // decimal override\r\n    if (_.isNumber(panel.decimals)) {\r\n      series.updateLegendValues(formater, panel.decimals, null);\r\n    } else if (_.isNumber(axis.decimals)) {\r\n      series.updateLegendValues(formater, axis.decimals + 1, null);\r\n    } else {\r\n      // auto decimals\r\n      // legend and tooltip gets one more decimal precision\r\n      // than graph legend ticks\r\n      const { datamin, datamax } = getDataMinMax(data);\r\n      const { tickDecimals, scaledDecimals } = getFlotTickDecimals(datamin, datamax, axis, height);\r\n      const tickDecimalsPlusOne = (tickDecimals || -1) + 1;\r\n      series.updateLegendValues(formater, tickDecimalsPlusOne, scaledDecimals + 2);\r\n    }\r\n  }\r\n}\r\n\r\nexport function getDataMinMax(data: TimeSeries[]) {\r\n  let datamin = null;\r\n  let datamax = null;\r\n\r\n  for (const series of data) {\r\n    if (datamax === null || datamax < series.stats.max) {\r\n      datamax = series.stats.max;\r\n    }\r\n    if (datamin === null || datamin > series.stats.min) {\r\n      datamin = series.stats.min;\r\n    }\r\n  }\r\n\r\n  return { datamin, datamax };\r\n}\r\n\r\nexport default class TimeSeries {\r\n  datapoints: any;\r\n  id: string;\r\n  label: string;\r\n  alias: string;\r\n  aliasEscaped: string;\r\n  color: string;\r\n  valueFormater: any;\r\n  stats: any;\r\n  legend: boolean;\r\n  hideTooltip: boolean;\r\n  allIsNull: boolean;\r\n  allIsZero: boolean;\r\n  decimals: number;\r\n  scaledDecimals: number;\r\n  hasMsResolution: boolean;\r\n  isOutsideRange: boolean;\r\n\r\n  lines: any;\r\n  dashes: any;\r\n  bars: any;\r\n  points: any;\r\n  yaxis: any;\r\n  zindex: any;\r\n  stack: any;\r\n  nullPointMode: any;\r\n  fillBelowTo: any;\r\n  transform: any;\r\n  flotpairs: any;\r\n  unit: any;\r\n\r\n  constructor(opts) {\r\n    this.datapoints = opts.datapoints;\r\n    this.label = opts.alias;\r\n    this.id = opts.alias;\r\n    this.alias = opts.alias;\r\n    this.aliasEscaped = _.escape(opts.alias);\r\n    this.color = opts.color;\r\n    this.bars = { fillColor: opts.color };\r\n    this.valueFormater = kbn.valueFormats.none;\r\n    this.stats = {};\r\n    this.legend = true;\r\n    this.unit = opts.unit;\r\n    this.hasMsResolution = this.isMsResolutionNeeded();\r\n  }\r\n\r\n  applySeriesOverrides(overrides) {\r\n    this.lines = {};\r\n    this.dashes = {\r\n      dashLength: [],\r\n    };\r\n    this.points = {};\r\n    this.yaxis = 1;\r\n    this.zindex = 0;\r\n    this.nullPointMode = null;\r\n    delete this.stack;\r\n    delete this.bars.show;\r\n\r\n    for (let i = 0; i < overrides.length; i++) {\r\n      const override = overrides[i];\r\n      if (!matchSeriesOverride(override.alias, this.alias)) {\r\n        continue;\r\n      }\r\n      if (override.lines !== void 0) {\r\n        this.lines.show = override.lines;\r\n      }\r\n      if (override.dashes !== void 0) {\r\n        this.dashes.show = override.dashes;\r\n        this.lines.lineWidth = 0;\r\n      }\r\n      if (override.points !== void 0) {\r\n        this.points.show = override.points;\r\n      }\r\n      if (override.bars !== void 0) {\r\n        this.bars.show = override.bars;\r\n      }\r\n      if (override.fill !== void 0) {\r\n        this.lines.fill = translateFillOption(override.fill);\r\n      }\r\n      if (override.stack !== void 0) {\r\n        this.stack = override.stack;\r\n      }\r\n      if (override.linewidth !== void 0) {\r\n        this.lines.lineWidth = this.dashes.show ? 0 : override.linewidth;\r\n        this.dashes.lineWidth = override.linewidth;\r\n      }\r\n      if (override.dashLength !== void 0) {\r\n        this.dashes.dashLength[0] = override.dashLength;\r\n      }\r\n      if (override.spaceLength !== void 0) {\r\n        this.dashes.dashLength[1] = override.spaceLength;\r\n      }\r\n      if (override.nullPointMode !== void 0) {\r\n        this.nullPointMode = override.nullPointMode;\r\n      }\r\n      if (override.pointradius !== void 0) {\r\n        this.points.radius = override.pointradius;\r\n      }\r\n      if (override.steppedLine !== void 0) {\r\n        this.lines.steps = override.steppedLine;\r\n      }\r\n      if (override.zindex !== void 0) {\r\n        this.zindex = override.zindex;\r\n      }\r\n      if (override.fillBelowTo !== void 0) {\r\n        this.fillBelowTo = override.fillBelowTo;\r\n      }\r\n      if (override.color !== void 0) {\r\n        this.setColor(override.color);\r\n      }\r\n      if (override.transform !== void 0) {\r\n        this.transform = override.transform;\r\n      }\r\n      if (override.legend !== void 0) {\r\n        this.legend = override.legend;\r\n      }\r\n      if (override.hideTooltip !== void 0) {\r\n        this.hideTooltip = override.hideTooltip;\r\n      }\r\n\r\n      if (override.yaxis !== void 0) {\r\n        this.yaxis = override.yaxis;\r\n      }\r\n    }\r\n  }\r\n\r\n  getFlotPairs(fillStyle) {\r\n    const result = [];\r\n\r\n    this.stats.total = 0;\r\n    this.stats.max = -Number.MAX_VALUE;\r\n    this.stats.min = Number.MAX_VALUE;\r\n    this.stats.logmin = Number.MAX_VALUE;\r\n    this.stats.avg = null;\r\n    this.stats.current = null;\r\n    this.stats.first = null;\r\n    this.stats.delta = 0;\r\n    this.stats.diff = null;\r\n    this.stats.range = null;\r\n    this.stats.timeStep = Number.MAX_VALUE;\r\n    this.allIsNull = true;\r\n    this.allIsZero = true;\r\n\r\n    const ignoreNulls = fillStyle === 'connected';\r\n    const nullAsZero = fillStyle === 'null as zero';\r\n    let currentTime;\r\n    let currentValue;\r\n    let nonNulls = 0;\r\n    let previousTime;\r\n    let previousValue = 0;\r\n    let previousDeltaUp = true;\r\n\r\n    for (let i = 0; i < this.datapoints.length; i++) {\r\n      currentValue = this.datapoints[i][0];\r\n      currentTime = this.datapoints[i][1];\r\n\r\n      // Due to missing values we could have different timeStep all along the series\r\n      // so we have to find the minimum one (could occur with aggregators such as ZimSum)\r\n      if (previousTime !== undefined) {\r\n        const timeStep = currentTime - previousTime;\r\n        if (timeStep < this.stats.timeStep) {\r\n          this.stats.timeStep = timeStep;\r\n        }\r\n      }\r\n      previousTime = currentTime;\r\n\r\n      if (currentValue === null) {\r\n        if (ignoreNulls) {\r\n          continue;\r\n        }\r\n        if (nullAsZero) {\r\n          currentValue = 0;\r\n        }\r\n      }\r\n\r\n      if (currentValue !== null) {\r\n        if (_.isNumber(currentValue)) {\r\n          this.stats.total += currentValue;\r\n          this.allIsNull = false;\r\n          nonNulls++;\r\n        }\r\n\r\n        if (currentValue > this.stats.max) {\r\n          this.stats.max = currentValue;\r\n        }\r\n\r\n        if (currentValue < this.stats.min) {\r\n          this.stats.min = currentValue;\r\n        }\r\n\r\n        if (this.stats.first === null) {\r\n          this.stats.first = currentValue;\r\n        } else {\r\n          if (previousValue > currentValue) {\r\n            // counter reset\r\n            previousDeltaUp = false;\r\n            if (i === this.datapoints.length - 1) {\r\n              // reset on last\r\n              this.stats.delta += currentValue;\r\n            }\r\n          } else {\r\n            if (previousDeltaUp) {\r\n              this.stats.delta += currentValue - previousValue; // normal increment\r\n            } else {\r\n              this.stats.delta += currentValue; // account for counter reset\r\n            }\r\n            previousDeltaUp = true;\r\n          }\r\n        }\r\n        previousValue = currentValue;\r\n\r\n        if (currentValue < this.stats.logmin && currentValue > 0) {\r\n          this.stats.logmin = currentValue;\r\n        }\r\n\r\n        if (currentValue !== 0) {\r\n          this.allIsZero = false;\r\n        }\r\n      }\r\n\r\n      result.push([currentTime, currentValue]);\r\n    }\r\n\r\n    if (this.stats.max === -Number.MAX_VALUE) {\r\n      this.stats.max = null;\r\n    }\r\n    if (this.stats.min === Number.MAX_VALUE) {\r\n      this.stats.min = null;\r\n    }\r\n\r\n    if (result.length && !this.allIsNull) {\r\n      this.stats.avg = this.stats.total / nonNulls;\r\n      this.stats.current = result[result.length - 1][1];\r\n      if (this.stats.current === null && result.length > 1) {\r\n        this.stats.current = result[result.length - 2][1];\r\n      }\r\n    }\r\n    if (this.stats.max !== null && this.stats.min !== null) {\r\n      this.stats.range = this.stats.max - this.stats.min;\r\n    }\r\n    if (this.stats.current !== null && this.stats.first !== null) {\r\n      this.stats.diff = this.stats.current - this.stats.first;\r\n    }\r\n\r\n    this.stats.count = result.length;\r\n    return result;\r\n  }\r\n\r\n  updateLegendValues(formater, decimals, scaledDecimals) {\r\n    this.valueFormater = formater;\r\n    this.decimals = decimals;\r\n    this.scaledDecimals = scaledDecimals;\r\n  }\r\n\r\n  formatValue(value) {\r\n    if (!_.isFinite(value)) {\r\n      value = null; // Prevent NaN formatting\r\n    }\r\n    return this.valueFormater(value, this.decimals, this.scaledDecimals);\r\n  }\r\n\r\n  isMsResolutionNeeded() {\r\n    for (let i = 0; i < this.datapoints.length; i++) {\r\n      if (this.datapoints[i][1] !== null) {\r\n        const timestamp = this.datapoints[i][1].toString();\r\n        if (timestamp.length === 13 && timestamp % 1000 !== 0) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  hideFromLegend(options) {\r\n    if (options.hideEmpty && this.allIsNull) {\r\n      return true;\r\n    }\r\n    // ignore series excluded via override\r\n    if (!this.legend) {\r\n      return true;\r\n    }\r\n\r\n    // ignore zero series\r\n    if (options.hideZero && this.allIsZero) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  setColor(color) {\r\n    this.color = color;\r\n    this.bars.fillColor = color;\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport { connect } from 'react-redux';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport AlertRuleItem from './AlertRuleItem';\r\nimport appEvents from 'app/core/app_events';\r\nimport { updateLocation } from 'app/core/actions';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\nimport { NavModel, StoreState, AlertRule } from 'app/types';\r\nimport { getAlertRulesAsync, setSearchQuery, togglePauseAlertRule } from './state/actions';\r\nimport { getAlertRuleItems, getSearchQuery } from './state/selectors';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  alertRules: AlertRule[];\r\n  updateLocation: typeof updateLocation;\r\n  getAlertRulesAsync: typeof getAlertRulesAsync;\r\n  setSearchQuery: typeof setSearchQuery;\r\n  togglePauseAlertRule: typeof togglePauseAlertRule;\r\n  stateFilter: string;\r\n  search: string;\r\n}\r\n\r\nexport class AlertRuleList extends PureComponent<Props, any> {\r\n  stateFilters = [\r\n    { text: 'All', value: 'all' },\r\n    { text: 'OK', value: 'ok' },\r\n    { text: 'Not OK', value: 'not_ok' },\r\n    { text: 'Alerting', value: 'alerting' },\r\n    { text: 'No Data', value: 'no_data' },\r\n    { text: 'Paused', value: 'paused' },\r\n  ];\r\n\r\n  componentDidMount() {\r\n    this.fetchRules();\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    if (prevProps.stateFilter !== this.props.stateFilter) {\r\n      this.fetchRules();\r\n    }\r\n  }\r\n\r\n  async fetchRules() {\r\n    await this.props.getAlertRulesAsync({ state: this.getStateFilter() });\r\n  }\r\n\r\n  getStateFilter(): string {\r\n    const { stateFilter } = this.props;\r\n    if (stateFilter) {\r\n      return stateFilter.toString();\r\n    }\r\n    return 'all';\r\n  }\r\n\r\n  onStateFilterChanged = event => {\r\n    this.props.updateLocation({\r\n      query: { state: event.target.value },\r\n    });\r\n  };\r\n\r\n  onOpenHowTo = () => {\r\n    appEvents.emit('show-modal', {\r\n      src: 'public/app/features/alerting/partials/alert_howto.html',\r\n      modalClass: 'confirm-modal',\r\n      model: {},\r\n    });\r\n  };\r\n\r\n  onSearchQueryChange = event => {\r\n    const { value } = event.target;\r\n    this.props.setSearchQuery(value);\r\n  };\r\n\r\n  onTogglePause = (rule: AlertRule) => {\r\n    this.props.togglePauseAlertRule(rule.id, { paused: rule.state !== 'paused' });\r\n  };\r\n\r\n  alertStateFilterOption = ({ text, value }) => {\r\n    return (\r\n      <option key={value} value={value}>\r\n        {text}\r\n      </option>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { navModel, alertRules, search } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          <div className=\"page-action-bar\">\r\n            <div className=\"gf-form gf-form--grow\">\r\n              <label className=\"gf-form--has-input-icon gf-form--grow\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"gf-form-input\"\r\n                  placeholder=\"Search alerts\"\r\n                  value={search}\r\n                  onChange={this.onSearchQueryChange}\r\n                />\r\n                <i className=\"gf-form-input-icon fa fa-search\" />\r\n              </label>\r\n            </div>\r\n            <div className=\"gf-form\">\r\n              <label className=\"gf-form-label\">States</label>\r\n\r\n              <div className=\"gf-form-select-wrapper width-13\">\r\n                <select className=\"gf-form-input\" onChange={this.onStateFilterChanged} value={this.getStateFilter()}>\r\n                  {this.stateFilters.map(this.alertStateFilterOption)}\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"page-action-bar__spacer\" />\r\n            <a className=\"btn btn-secondary\" onClick={this.onOpenHowTo}>\r\n              <i className=\"fa fa-info-circle\" /> How to add an alert\r\n            </a>\r\n          </div>\r\n          <section>\r\n            <ol className=\"alert-rule-list\">\r\n              {alertRules.map(rule => (\r\n                <AlertRuleItem\r\n                  rule={rule}\r\n                  key={rule.id}\r\n                  search={search}\r\n                  onTogglePause={() => this.onTogglePause(rule)}\r\n                />\r\n              ))}\r\n            </ol>\r\n          </section>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n  navModel: getNavModel(state.navIndex, 'alert-list'),\r\n  alertRules: getAlertRuleItems(state.alertRules),\r\n  stateFilter: state.location.query.state,\r\n  search: getSearchQuery(state.alertRules),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  updateLocation,\r\n  getAlertRulesAsync,\r\n  setSearchQuery,\r\n  togglePauseAlertRule,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(AlertRuleList));\r\n","import React, { PureComponent } from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport { connect } from 'react-redux';\r\nimport { NavModel, StoreState } from 'app/types';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\nimport { getServerStats, ServerStat } from './state/apis';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\n\r\ninterface Props {\r\n  navModel: NavModel;\r\n  getServerStats: () => Promise<ServerStat[]>;\r\n}\r\n\r\ninterface State {\r\n  stats: ServerStat[];\r\n}\r\n\r\nexport class ServerStats extends PureComponent<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      stats: [],\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const stats = await this.props.getServerStats();\r\n      this.setState({ stats });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { navModel } = this.props;\r\n    const { stats } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          <table className=\"filter-table form-inline\">\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>{stats.map(StatItem)}</tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction StatItem(stat: ServerStat) {\r\n  return (\r\n    <tr key={stat.name}>\r\n      <td>{stat.name}</td>\r\n      <td>{stat.value}</td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n  navModel: getNavModel(state.navIndex, 'server-stats'),\r\n  getServerStats: getServerStats,\r\n});\r\n\r\nexport default hot(module)(connect(mapStateToProps)(ServerStats));\r\n","import { getBackendSrv } from 'app/core/services/backend_srv';\r\n\r\nexport interface ServerStat {\r\n  name: string;\r\n  value: number;\r\n}\r\n\r\nexport const getServerStats = async (): Promise<ServerStat[]> => {\r\n  try {\r\n    const res = await getBackendSrv().get('api/admin/stats');\r\n    return [\r\n      { name: 'Total users', value: res.users },\r\n      { name: 'Total dashboards', value: res.dashboards },\r\n      { name: 'Active users (seen last 30 days)', value: res.activeUsers },\r\n      { name: 'Total orgs', value: res.orgs },\r\n      { name: 'Total playlists', value: res.playlists },\r\n      { name: 'Total snapshots', value: res.snapshots },\r\n      { name: 'Total dashboard tags', value: res.tags },\r\n      { name: 'Total starred dashboards', value: res.stars },\r\n      { name: 'Total alerts', value: res.alerts },\r\n    ];\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw error;\r\n  }\r\n};\r\n","import React, { PureComponent } from 'react';\r\nimport Highlighter from 'react-highlight-words';\r\nimport classNames from 'classnames/bind';\r\nimport { AlertRule } from '../../types';\r\n\r\nexport interface Props {\r\n  rule: AlertRule;\r\n  search: string;\r\n  onTogglePause: () => void;\r\n}\r\n\r\nclass AlertRuleItem extends PureComponent<Props> {\r\n  renderText(text: string) {\r\n    return (\r\n      <Highlighter\r\n        highlightClassName=\"highlight-search-match\"\r\n        textToHighlight={text}\r\n        searchWords={[this.props.search]}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { rule, onTogglePause } = this.props;\r\n\r\n    const stateClass = classNames({\r\n      fa: true,\r\n      'fa-play': rule.state === 'paused',\r\n      'fa-pause': rule.state !== 'paused',\r\n    });\r\n\r\n    const ruleUrl = `${rule.url}?panelId=${rule.panelId}&fullscreen=true&edit=true&tab=alert`;\r\n\r\n    return (\r\n      <li className=\"alert-rule-item\">\r\n        <span className={`alert-rule-item__icon ${rule.stateClass}`}>\r\n          <i className={rule.stateIcon} />\r\n        </span>\r\n        <div className=\"alert-rule-item__body\">\r\n          <div className=\"alert-rule-item__header\">\r\n            <div className=\"alert-rule-item__name\">\r\n              <a href={ruleUrl}>{this.renderText(rule.name)}</a>\r\n            </div>\r\n            <div className=\"alert-rule-item__text\">\r\n              <span className={`${rule.stateClass}`}>{this.renderText(rule.stateText)}</span>\r\n              <span className=\"alert-rule-item__time\"> for {rule.stateAge}</span>\r\n            </div>\r\n          </div>\r\n          {rule.info && <div className=\"small muted alert-rule-item__info\">{this.renderText(rule.info)}</div>}\r\n        </div>\r\n\r\n        <div className=\"alert-rule-item__actions\">\r\n          <button\r\n            className=\"btn btn-small btn-inverse alert-list__btn width-2\"\r\n            title=\"Pausing an alert rule prevents it from executing\"\r\n            onClick={onTogglePause}\r\n          >\r\n            <i className={stateClass} />\r\n          </button>\r\n          <a className=\"btn btn-small btn-inverse alert-list__btn width-2\" href={ruleUrl} title=\"Edit alert rule\">\r\n            <i className=\"icon-gf icon-gf-settings\" />\r\n          </a>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AlertRuleItem;\r\n","import { getBackendSrv } from 'app/core/services/backend_srv';\r\nimport { StoreState } from 'app/types';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { FolderDTO, FolderState } from 'app/types';\r\nimport {\r\n  DashboardAcl,\r\n  DashboardAclDTO,\r\n  PermissionLevel,\r\n  DashboardAclUpdateDTO,\r\n  NewDashboardAclItem,\r\n} from 'app/types/acl';\r\n\r\nimport { updateNavIndex, updateLocation } from 'app/core/actions';\r\nimport { buildNavModel } from './navModel';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport enum ActionTypes {\r\n  LoadFolder = 'LOAD_FOLDER',\r\n  SetFolderTitle = 'SET_FOLDER_TITLE',\r\n  SaveFolder = 'SAVE_FOLDER',\r\n  LoadFolderPermissions = 'LOAD_FOLDER_PERMISSONS',\r\n}\r\n\r\nexport interface LoadFolderAction {\r\n  type: ActionTypes.LoadFolder;\r\n  payload: FolderDTO;\r\n}\r\n\r\nexport interface SetFolderTitleAction {\r\n  type: ActionTypes.SetFolderTitle;\r\n  payload: string;\r\n}\r\n\r\nexport interface LoadFolderPermissionsAction {\r\n  type: ActionTypes.LoadFolderPermissions;\r\n  payload: DashboardAcl[];\r\n}\r\n\r\nexport type Action = LoadFolderAction | SetFolderTitleAction | LoadFolderPermissionsAction;\r\n\r\ntype ThunkResult<R> = ThunkAction<R, StoreState, undefined, any>;\r\n\r\nexport const loadFolder = (folder: FolderDTO): LoadFolderAction => ({\r\n  type: ActionTypes.LoadFolder,\r\n  payload: folder,\r\n});\r\n\r\nexport const setFolderTitle = (newTitle: string): SetFolderTitleAction => ({\r\n  type: ActionTypes.SetFolderTitle,\r\n  payload: newTitle,\r\n});\r\n\r\nexport const loadFolderPermissions = (items: DashboardAclDTO[]): LoadFolderPermissionsAction => ({\r\n  type: ActionTypes.LoadFolderPermissions,\r\n  payload: items,\r\n});\r\n\r\nexport function getFolderByUid(uid: string): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const folder = await getBackendSrv().getFolderByUid(uid);\r\n    dispatch(loadFolder(folder));\r\n    dispatch(updateNavIndex(buildNavModel(folder)));\r\n  };\r\n}\r\n\r\nexport function saveFolder(folder: FolderState): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const res = await getBackendSrv().put(`/api/folders/${folder.uid}`, {\r\n      title: folder.title,\r\n      version: folder.version,\r\n    });\r\n\r\n    // this should be redux action at some point\r\n    appEvents.emit('alert-success', ['Folder saved']);\r\n\r\n    dispatch(updateLocation({ path: `${res.url}/settings` }));\r\n  };\r\n}\r\n\r\nexport function deleteFolder(uid: string): ThunkResult<void> {\r\n  return async dispatch => {\r\n    await getBackendSrv().deleteFolder(uid, true);\r\n    dispatch(updateLocation({ path: `dashboards` }));\r\n  };\r\n}\r\n\r\nexport function getFolderPermissions(uid: string): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const permissions = await getBackendSrv().get(`/api/folders/${uid}/permissions`);\r\n    dispatch(loadFolderPermissions(permissions));\r\n  };\r\n}\r\n\r\nfunction toUpdateItem(item: DashboardAcl): DashboardAclUpdateDTO {\r\n  return {\r\n    userId: item.userId,\r\n    teamId: item.teamId,\r\n    role: item.role,\r\n    permission: item.permission,\r\n  };\r\n}\r\n\r\nexport function updateFolderPermission(itemToUpdate: DashboardAcl, level: PermissionLevel): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const folder = getStore().folder;\r\n    const itemsToUpdate = [];\r\n\r\n    for (const item of folder.permissions) {\r\n      if (item.inherited) {\r\n        continue;\r\n      }\r\n\r\n      const updated = toUpdateItem(item);\r\n\r\n      // if this is the item we want to update, update it's permisssion\r\n      if (itemToUpdate === item) {\r\n        updated.permission = level;\r\n      }\r\n\r\n      itemsToUpdate.push(updated);\r\n    }\r\n\r\n    await getBackendSrv().post(`/api/folders/${folder.uid}/permissions`, { items: itemsToUpdate });\r\n    await dispatch(getFolderPermissions(folder.uid));\r\n  };\r\n}\r\n\r\nexport function removeFolderPermission(itemToDelete: DashboardAcl): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const folder = getStore().folder;\r\n    const itemsToUpdate = [];\r\n\r\n    for (const item of folder.permissions) {\r\n      if (item.inherited || item === itemToDelete) {\r\n        continue;\r\n      }\r\n      itemsToUpdate.push(toUpdateItem(item));\r\n    }\r\n\r\n    await getBackendSrv().post(`/api/folders/${folder.uid}/permissions`, { items: itemsToUpdate });\r\n    await dispatch(getFolderPermissions(folder.uid));\r\n  };\r\n}\r\n\r\nexport function addFolderPermission(newItem: NewDashboardAclItem): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const folder = getStore().folder;\r\n    const itemsToUpdate = [];\r\n\r\n    for (const item of folder.permissions) {\r\n      if (item.inherited) {\r\n        continue;\r\n      }\r\n      itemsToUpdate.push(toUpdateItem(item));\r\n    }\r\n\r\n    itemsToUpdate.push({\r\n      userId: newItem.userId,\r\n      teamId: newItem.teamId,\r\n      role: newItem.role,\r\n      permission: newItem.permission,\r\n    });\r\n\r\n    await getBackendSrv().post(`/api/folders/${folder.uid}/permissions`, { items: itemsToUpdate });\r\n    await dispatch(getFolderPermissions(folder.uid));\r\n  };\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport _ from 'lodash';\r\nimport { hot } from 'react-hot-loader';\r\nimport config from 'app/core/config';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport TeamMembers from './TeamMembers';\r\nimport TeamSettings from './TeamSettings';\r\nimport TeamGroupSync from './TeamGroupSync';\r\nimport { NavModel, Team } from 'app/types';\r\nimport { loadTeam } from './state/actions';\r\nimport { getTeam } from './state/selectors';\r\nimport { getTeamLoadingNav } from './state/navModel';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\nimport { getRouteParamsId, getRouteParamsPage } from '../../core/selectors/location';\r\n\r\nexport interface Props {\r\n  team: Team;\r\n  loadTeam: typeof loadTeam;\r\n  teamId: number;\r\n  pageName: string;\r\n  navModel: NavModel;\r\n}\r\n\r\ninterface State {\r\n  isSyncEnabled: boolean;\r\n}\r\n\r\nenum PageTypes {\r\n  Members = 'members',\r\n  Settings = 'settings',\r\n  GroupSync = 'groupsync',\r\n}\r\n\r\nexport class TeamPages extends PureComponent<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isSyncEnabled: config.buildInfo.isEnterprise,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchTeam();\r\n  }\r\n\r\n  async fetchTeam() {\r\n    const { loadTeam, teamId } = this.props;\r\n\r\n    await loadTeam(teamId);\r\n  }\r\n\r\n  getCurrentPage() {\r\n    const pages = ['members', 'settings', 'groupsync'];\r\n    const currentPage = this.props.pageName;\r\n    return _.includes(pages, currentPage) ? currentPage : pages[0];\r\n  }\r\n\r\n  renderPage() {\r\n    const { isSyncEnabled } = this.state;\r\n    const currentPage = this.getCurrentPage();\r\n\r\n    switch (currentPage) {\r\n      case PageTypes.Members:\r\n        return <TeamMembers syncEnabled={isSyncEnabled} />;\r\n\r\n      case PageTypes.Settings:\r\n        return <TeamSettings />;\r\n\r\n      case PageTypes.GroupSync:\r\n        return isSyncEnabled && <TeamGroupSync />;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    const { team, navModel } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        {team && Object.keys(team).length !== 0 && <div className=\"page-container page-body\">{this.renderPage()}</div>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const teamId = getRouteParamsId(state.location);\r\n  const pageName = getRouteParamsPage(state.location) || 'members';\r\n  const teamLoadingNav = getTeamLoadingNav(pageName);\r\n\r\n  return {\r\n    navModel: getNavModel(state.navIndex, `team-${pageName}-${teamId}`, teamLoadingNav),\r\n    teamId: teamId,\r\n    pageName: pageName,\r\n    team: getTeam(state.team, teamId),\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadTeam,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(TeamPages));\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport SlideDown from 'app/core/components/Animations/SlideDown';\r\nimport { UserPicker } from 'app/core/components/Picker/UserPicker';\r\nimport DeleteButton from 'app/core/components/DeleteButton/DeleteButton';\r\nimport { TagBadge } from 'app/core/components/TagFilter/TagBadge';\r\nimport { TeamMember, User } from 'app/types';\r\nimport { loadTeamMembers, addTeamMember, removeTeamMember, setSearchMemberQuery } from './state/actions';\r\nimport { getSearchMemberQuery, getTeamMembers } from './state/selectors';\r\n\r\nexport interface Props {\r\n  members: TeamMember[];\r\n  searchMemberQuery: string;\r\n  loadTeamMembers: typeof loadTeamMembers;\r\n  addTeamMember: typeof addTeamMember;\r\n  removeTeamMember: typeof removeTeamMember;\r\n  setSearchMemberQuery: typeof setSearchMemberQuery;\r\n  syncEnabled: boolean;\r\n}\r\n\r\nexport interface State {\r\n  isAdding: boolean;\r\n  newTeamMember?: User;\r\n}\r\n\r\nexport class TeamMembers extends PureComponent<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { isAdding: false, newTeamMember: null };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.loadTeamMembers();\r\n  }\r\n\r\n  onSearchQueryChange = event => {\r\n    this.props.setSearchMemberQuery(event.target.value);\r\n  };\r\n\r\n  onRemoveMember(member: TeamMember) {\r\n    this.props.removeTeamMember(member.userId);\r\n  }\r\n\r\n  onToggleAdding = () => {\r\n    this.setState({ isAdding: !this.state.isAdding });\r\n  };\r\n\r\n  onUserSelected = (user: User) => {\r\n    this.setState({ newTeamMember: user });\r\n  };\r\n\r\n  onAddUserToTeam = async () => {\r\n    this.props.addTeamMember(this.state.newTeamMember.id);\r\n    this.setState({ newTeamMember: null });\r\n  };\r\n\r\n  renderLabels(labels: string[]) {\r\n    if (!labels) {\r\n      return <td />;\r\n    }\r\n\r\n    return (\r\n      <td>\r\n        {labels.map(label => <TagBadge key={label} label={label} removeIcon={false} count={0} onClick={() => {}} />)}\r\n      </td>\r\n    );\r\n  }\r\n\r\n  renderMember(member: TeamMember, syncEnabled: boolean) {\r\n    return (\r\n      <tr key={member.userId}>\r\n        <td className=\"width-4 text-center\">\r\n          <img className=\"filter-table__avatar\" src={member.avatarUrl} />\r\n        </td>\r\n        <td>{member.login}</td>\r\n        <td>{member.email}</td>\r\n        {syncEnabled ? this.renderLabels(member.labels) : ''}\r\n        <td className=\"text-right\">\r\n          <DeleteButton onConfirmDelete={() => this.onRemoveMember(member)} />\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { isAdding } = this.state;\r\n    const { searchMemberQuery, members, syncEnabled } = this.props;\r\n    return (\r\n      <div>\r\n        <div className=\"page-action-bar\">\r\n          <div className=\"gf-form gf-form--grow\">\r\n            <label className=\"gf-form--has-input-icon gf-form--grow\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"gf-form-input\"\r\n                placeholder=\"Search members\"\r\n                value={searchMemberQuery}\r\n                onChange={this.onSearchQueryChange}\r\n              />\r\n              <i className=\"gf-form-input-icon fa fa-search\" />\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"page-action-bar__spacer\" />\r\n\r\n          <button className=\"btn btn-success pull-right\" onClick={this.onToggleAdding} disabled={isAdding}>\r\n            <i className=\"fa fa-plus\" /> Add a member\r\n          </button>\r\n        </div>\r\n\r\n        <SlideDown in={isAdding}>\r\n          <div className=\"cta-form\">\r\n            <button className=\"cta-form__close btn btn-transparent\" onClick={this.onToggleAdding}>\r\n              <i className=\"fa fa-close\" />\r\n            </button>\r\n            <h5>Add Team Member</h5>\r\n            <div className=\"gf-form-inline\">\r\n              <UserPicker onSelected={this.onUserSelected} className=\"width-30\" />\r\n              {this.state.newTeamMember && (\r\n                <button className=\"btn btn-success gf-form-btn\" type=\"submit\" onClick={this.onAddUserToTeam}>\r\n                  Add to team\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </SlideDown>\r\n\r\n        <div className=\"admin-list-table\">\r\n          <table className=\"filter-table filter-table--hover form-inline\">\r\n            <thead>\r\n              <tr>\r\n                <th />\r\n                <th>Name</th>\r\n                <th>Email</th>\r\n                {syncEnabled ? <th /> : ''}\r\n                <th style={{ width: '1%' }} />\r\n              </tr>\r\n            </thead>\r\n            <tbody>{members && members.map(member => this.renderMember(member, syncEnabled))}</tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    members: getTeamMembers(state.team),\r\n    searchMemberQuery: getSearchMemberQuery(state.team),\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadTeamMembers,\r\n  addTeamMember,\r\n  removeTeamMember,\r\n  setSearchMemberQuery,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TeamMembers);\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport SlideDown from 'app/core/components/Animations/SlideDown';\r\nimport Tooltip from 'app/core/components/Tooltip/Tooltip';\r\nimport { TeamGroup } from '../../types';\r\nimport { addTeamGroup, loadTeamGroups, removeTeamGroup } from './state/actions';\r\nimport { getTeamGroups } from './state/selectors';\r\n\r\nexport interface Props {\r\n  groups: TeamGroup[];\r\n  loadTeamGroups: typeof loadTeamGroups;\r\n  addTeamGroup: typeof addTeamGroup;\r\n  removeTeamGroup: typeof removeTeamGroup;\r\n}\r\n\r\ninterface State {\r\n  isAdding: boolean;\r\n  newGroupId?: string;\r\n}\r\n\r\nconst headerTooltip = `Sync LDAP or OAuth groups with your Grafana teams.`;\r\n\r\nexport class TeamGroupSync extends PureComponent<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { isAdding: false, newGroupId: '' };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchTeamGroups();\r\n  }\r\n\r\n  async fetchTeamGroups() {\r\n    await this.props.loadTeamGroups();\r\n  }\r\n\r\n  onToggleAdding = () => {\r\n    this.setState({ isAdding: !this.state.isAdding });\r\n  };\r\n\r\n  onNewGroupIdChanged = event => {\r\n    this.setState({ newGroupId: event.target.value });\r\n  };\r\n\r\n  onAddGroup = event => {\r\n    event.preventDefault();\r\n    this.props.addTeamGroup(this.state.newGroupId);\r\n    this.setState({ isAdding: false, newGroupId: '' });\r\n  };\r\n\r\n  onRemoveGroup = (group: TeamGroup) => {\r\n    this.props.removeTeamGroup(group.groupId);\r\n  };\r\n\r\n  isNewGroupValid() {\r\n    return this.state.newGroupId.length > 1;\r\n  }\r\n\r\n  renderGroup(group: TeamGroup) {\r\n    return (\r\n      <tr key={group.groupId}>\r\n        <td>{group.groupId}</td>\r\n        <td style={{ width: '1%' }}>\r\n          <a className=\"btn btn-danger btn-mini\" onClick={() => this.onRemoveGroup(group)}>\r\n            <i className=\"fa fa-remove\" />\r\n          </a>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { isAdding, newGroupId } = this.state;\r\n    const groups = this.props.groups;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"page-action-bar\">\r\n          <h3 className=\"page-sub-heading\">External group sync</h3>\r\n          <Tooltip className=\"page-sub-heading-icon\" placement=\"auto\" content={headerTooltip}>\r\n            <i className=\"gicon gicon-question gicon--has-hover\" />\r\n          </Tooltip>\r\n          <div className=\"page-action-bar__spacer\" />\r\n          {groups.length > 0 && (\r\n            <button className=\"btn btn-success pull-right\" onClick={this.onToggleAdding}>\r\n              <i className=\"fa fa-plus\" /> Add group\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        <SlideDown in={isAdding}>\r\n          <div className=\"cta-form\">\r\n            <button className=\"cta-form__close btn btn-transparent\" onClick={this.onToggleAdding}>\r\n              <i className=\"fa fa-close\" />\r\n            </button>\r\n            <h5>Add External Group</h5>\r\n            <form className=\"gf-form-inline\" onSubmit={this.onAddGroup}>\r\n              <div className=\"gf-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"gf-form-input width-30\"\r\n                  value={newGroupId}\r\n                  onChange={this.onNewGroupIdChanged}\r\n                  placeholder=\"cn=ops,ou=groups,dc=grafana,dc=org\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"gf-form\">\r\n                <button className=\"btn btn-success gf-form-btn\" type=\"submit\" disabled={!this.isNewGroupValid()}>\r\n                  Add group\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </SlideDown>\r\n\r\n        {groups.length === 0 &&\r\n          !isAdding && (\r\n            <div className=\"empty-list-cta\">\r\n              <div className=\"empty-list-cta__title\">There are no external groups to sync with</div>\r\n              <button onClick={this.onToggleAdding} className=\"empty-list-cta__button btn btn-xlarge btn-success\">\r\n                <i className=\"gicon gicon-add-team\" />\r\n                Add Group\r\n              </button>\r\n              <div className=\"empty-list-cta__pro-tip\">\r\n                <i className=\"fa fa-rocket\" /> {headerTooltip}\r\n                <a className=\"text-link empty-list-cta__pro-tip-link\" href=\"asd\" target=\"_blank\">\r\n                  Learn more\r\n                </a>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n        {groups.length > 0 && (\r\n          <div className=\"admin-list-table\">\r\n            <table className=\"filter-table filter-table--hover form-inline\">\r\n              <thead>\r\n                <tr>\r\n                  <th>External Group ID</th>\r\n                  <th style={{ width: '1%' }} />\r\n                </tr>\r\n              </thead>\r\n              <tbody>{groups.map(group => this.renderGroup(group))}</tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    groups: getTeamGroups(state.team),\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadTeamGroups,\r\n  addTeamGroup,\r\n  removeTeamGroup,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TeamGroupSync);\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { hot } from 'react-hot-loader';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport DeleteButton from 'app/core/components/DeleteButton/DeleteButton';\r\nimport EmptyListCTA from 'app/core/components/EmptyListCTA/EmptyListCTA';\r\nimport PageLoader from 'app/core/components/PageLoader/PageLoader';\r\nimport { NavModel, Team } from '../../types';\r\nimport { loadTeams, deleteTeam, setSearchQuery } from './state/actions';\r\nimport { getSearchQuery, getTeams, getTeamsCount } from './state/selectors';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  teams: Team[];\r\n  searchQuery: string;\r\n  teamsCount: number;\r\n  hasFetched: boolean;\r\n  loadTeams: typeof loadTeams;\r\n  deleteTeam: typeof deleteTeam;\r\n  setSearchQuery: typeof setSearchQuery;\r\n}\r\n\r\nexport class TeamList extends PureComponent<Props, any> {\r\n  componentDidMount() {\r\n    this.fetchTeams();\r\n  }\r\n\r\n  async fetchTeams() {\r\n    await this.props.loadTeams();\r\n  }\r\n\r\n  deleteTeam = (team: Team) => {\r\n    this.props.deleteTeam(team.id);\r\n  };\r\n\r\n  onSearchQueryChange = event => {\r\n    this.props.setSearchQuery(event.target.value);\r\n  };\r\n\r\n  renderTeam(team: Team) {\r\n    const teamUrl = `org/teams/edit/${team.id}`;\r\n\r\n    return (\r\n      <tr key={team.id}>\r\n        <td className=\"width-4 text-center link-td\">\r\n          <a href={teamUrl}>\r\n            <img className=\"filter-table__avatar\" src={team.avatarUrl} />\r\n          </a>\r\n        </td>\r\n        <td className=\"link-td\">\r\n          <a href={teamUrl}>{team.name}</a>\r\n        </td>\r\n        <td className=\"link-td\">\r\n          <a href={teamUrl}>{team.email}</a>\r\n        </td>\r\n        <td className=\"link-td\">\r\n          <a href={teamUrl}>{team.memberCount}</a>\r\n        </td>\r\n        <td className=\"text-right\">\r\n          <DeleteButton onConfirmDelete={() => this.deleteTeam(team)} />\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  renderEmptyList() {\r\n    return (\r\n      <div className=\"page-container page-body\">\r\n        <EmptyListCTA\r\n          model={{\r\n            title: \"You haven't created any teams yet.\",\r\n            buttonIcon: 'fa fa-plus',\r\n            buttonLink: 'org/teams/new',\r\n            buttonTitle: ' New team',\r\n            proTip: 'Assign folder and dashboard permissions to teams instead of users to ease administration.',\r\n            proTipLink: '',\r\n            proTipLinkTitle: '',\r\n            proTipTarget: '_blank',\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTeamList() {\r\n    const { teams, searchQuery } = this.props;\r\n\r\n    return (\r\n      <div className=\"page-container page-body\">\r\n        <div className=\"page-action-bar\">\r\n          <div className=\"gf-form gf-form--grow\">\r\n            <label className=\"gf-form--has-input-icon gf-form--grow\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"gf-form-input\"\r\n                placeholder=\"Search teams\"\r\n                value={searchQuery}\r\n                onChange={this.onSearchQueryChange}\r\n              />\r\n              <i className=\"gf-form-input-icon fa fa-search\" />\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"page-action-bar__spacer\" />\r\n\r\n          <a className=\"btn btn-success\" href=\"org/teams/new\">\r\n            New team\r\n          </a>\r\n        </div>\r\n\r\n        <div className=\"admin-list-table\">\r\n          <table className=\"filter-table filter-table--hover form-inline\">\r\n            <thead>\r\n              <tr>\r\n                <th />\r\n                <th>Name</th>\r\n                <th>Email</th>\r\n                <th>Members</th>\r\n                <th style={{ width: '1%' }} />\r\n              </tr>\r\n            </thead>\r\n            <tbody>{teams.map(team => this.renderTeam(team))}</tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderList() {\r\n    const { teamsCount } = this.props;\r\n\r\n    if (teamsCount > 0) {\r\n      return this.renderTeamList();\r\n    } else {\r\n      return this.renderEmptyList();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { hasFetched, navModel } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        {hasFetched ? this.renderList() : <PageLoader pageName=\"Teams\" />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    navModel: getNavModel(state.navIndex, 'teams'),\r\n    teams: getTeams(state.teams),\r\n    searchQuery: getSearchQuery(state.teams),\r\n    teamsCount: getTeamsCount(state.teams),\r\n    hasFetched: state.teams.hasFetched,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadTeams,\r\n  deleteTeam,\r\n  setSearchQuery,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(TeamList));\r\n","import React, { PureComponent } from 'react';\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport { connect } from 'react-redux';\r\nimport { hot } from 'react-hot-loader';\r\nimport { NavModel, ApiKey, NewApiKey, OrgRole } from 'app/types';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\nimport { getApiKeys } from './state/selectors';\r\nimport { loadApiKeys, deleteApiKey, setSearchQuery, addApiKey } from './state/actions';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport SlideDown from 'app/core/components/Animations/SlideDown';\r\nimport PageLoader from 'app/core/components/PageLoader/PageLoader';\r\nimport ApiKeysAddedModal from './ApiKeysAddedModal';\r\nimport config from 'app/core/config';\r\nimport appEvents from 'app/core/app_events';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  apiKeys: ApiKey[];\r\n  searchQuery: string;\r\n  hasFetched: boolean;\r\n  loadApiKeys: typeof loadApiKeys;\r\n  deleteApiKey: typeof deleteApiKey;\r\n  setSearchQuery: typeof setSearchQuery;\r\n  addApiKey: typeof addApiKey;\r\n}\r\n\r\nexport interface State {\r\n  isAdding: boolean;\r\n  newApiKey: NewApiKey;\r\n}\r\n\r\nenum ApiKeyStateProps {\r\n  Name = 'name',\r\n  Role = 'role',\r\n}\r\n\r\nconst initialApiKeyState = {\r\n  name: '',\r\n  role: OrgRole.Viewer,\r\n};\r\n\r\nexport class ApiKeysPage extends PureComponent<Props, any> {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { isAdding: false, newApiKey: initialApiKeyState };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchApiKeys();\r\n  }\r\n\r\n  async fetchApiKeys() {\r\n    await this.props.loadApiKeys();\r\n  }\r\n\r\n  onDeleteApiKey(key: ApiKey) {\r\n    this.props.deleteApiKey(key.id);\r\n  }\r\n\r\n  onSearchQueryChange = evt => {\r\n    this.props.setSearchQuery(evt.target.value);\r\n  };\r\n\r\n  onToggleAdding = () => {\r\n    this.setState({ isAdding: !this.state.isAdding });\r\n  };\r\n\r\n  onAddApiKey = async evt => {\r\n    evt.preventDefault();\r\n\r\n    const openModal = (apiKey: string) => {\r\n      const rootPath = window.location.origin + config.appSubUrl;\r\n      const modalTemplate = ReactDOMServer.renderToString(<ApiKeysAddedModal apiKey={apiKey} rootPath={rootPath} />);\r\n\r\n      appEvents.emit('show-modal', {\r\n        templateHtml: modalTemplate,\r\n      });\r\n    };\r\n\r\n    this.props.addApiKey(this.state.newApiKey, openModal);\r\n    this.setState((prevState: State) => {\r\n      return {\r\n        ...prevState,\r\n        newApiKey: initialApiKeyState,\r\n      };\r\n    });\r\n  };\r\n\r\n  onApiKeyStateUpdate = (evt, prop: string) => {\r\n    const value = evt.currentTarget.value;\r\n    this.setState((prevState: State) => {\r\n      const newApiKey = {\r\n        ...prevState.newApiKey,\r\n      };\r\n      newApiKey[prop] = value;\r\n\r\n      return {\r\n        ...prevState,\r\n        newApiKey: newApiKey,\r\n      };\r\n    });\r\n  };\r\n\r\n  renderTable() {\r\n    const { apiKeys } = this.props;\r\n\r\n    return [\r\n      <h3 key=\"header\" className=\"page-heading\">\r\n        Existing Keys\r\n      </h3>,\r\n      <table key=\"table\" className=\"filter-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Role</th>\r\n            <th style={{ width: '34px' }} />\r\n          </tr>\r\n        </thead>\r\n        {apiKeys.length > 0 && (\r\n          <tbody>\r\n            {apiKeys.map(key => {\r\n              return (\r\n                <tr key={key.id}>\r\n                  <td>{key.name}</td>\r\n                  <td>{key.role}</td>\r\n                  <td>\r\n                    <a onClick={() => this.onDeleteApiKey(key)} className=\"btn btn-danger btn-mini\">\r\n                      <i className=\"fa fa-remove\" />\r\n                    </a>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        )}\r\n      </table>,\r\n    ];\r\n  }\r\n\r\n  render() {\r\n    const { newApiKey, isAdding } = this.state;\r\n    const { hasFetched, navModel, searchQuery } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          <div className=\"page-action-bar\">\r\n            <div className=\"gf-form gf-form--grow\">\r\n              <label className=\"gf-form--has-input-icon gf-form--grow\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"gf-form-input\"\r\n                  placeholder=\"Search keys\"\r\n                  value={searchQuery}\r\n                  onChange={this.onSearchQueryChange}\r\n                />\r\n                <i className=\"gf-form-input-icon fa fa-search\" />\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"page-action-bar__spacer\" />\r\n            <button className=\"btn btn-success pull-right\" onClick={this.onToggleAdding} disabled={isAdding}>\r\n              <i className=\"fa fa-plus\" /> Add API Key\r\n            </button>\r\n          </div>\r\n\r\n          <SlideDown in={isAdding}>\r\n            <div className=\"cta-form\">\r\n              <button className=\"cta-form__close btn btn-transparent\" onClick={this.onToggleAdding}>\r\n                <i className=\"fa fa-close\" />\r\n              </button>\r\n              <h5>Add API Key</h5>\r\n              <form className=\"gf-form-group\" onSubmit={this.onAddApiKey}>\r\n                <div className=\"gf-form-inline\">\r\n                  <div className=\"gf-form max-width-21\">\r\n                    <span className=\"gf-form-label\">Key name</span>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"gf-form-input\"\r\n                      value={newApiKey.name}\r\n                      placeholder=\"Name\"\r\n                      onChange={evt => this.onApiKeyStateUpdate(evt, ApiKeyStateProps.Name)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"gf-form\">\r\n                    <span className=\"gf-form-label\">Role</span>\r\n                    <span className=\"gf-form-select-wrapper\">\r\n                      <select\r\n                        className=\"gf-form-input gf-size-auto\"\r\n                        value={newApiKey.role}\r\n                        onChange={evt => this.onApiKeyStateUpdate(evt, ApiKeyStateProps.Role)}\r\n                      >\r\n                        {Object.keys(OrgRole).map(role => {\r\n                          return (\r\n                            <option key={role} label={role} value={role}>\r\n                              {role}\r\n                            </option>\r\n                          );\r\n                        })}\r\n                      </select>\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"gf-form\">\r\n                    <button className=\"btn gf-form-btn btn-success\">Add</button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </SlideDown>\r\n          {hasFetched ? this.renderTable() : <PageLoader pageName=\"Api keys\" />}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    navModel: getNavModel(state.navIndex, 'apikeys'),\r\n    apiKeys: getApiKeys(state.apiKeys),\r\n    searchQuery: state.apiKeys.searchQuery,\r\n    hasFetched: state.apiKeys.hasFetched,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadApiKeys,\r\n  deleteApiKey,\r\n  setSearchQuery,\r\n  addApiKey,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(ApiKeysPage));\r\n","import { ApiKeysState } from 'app/types';\r\n\r\nexport const getApiKeys = (state: ApiKeysState) => {\r\n  const regex = RegExp(state.searchQuery, 'i');\r\n\r\n  return state.keys.filter(key => {\r\n    return regex.test(key.name) || regex.test(key.role);\r\n  });\r\n};\r\n","import React from 'react';\r\n\r\nexport interface Props {\r\n  apiKey: string;\r\n  rootPath: string;\r\n}\r\n\r\nexport const ApiKeysAddedModal = (props: Props) => {\r\n  return (\r\n    <div className=\"modal-body\">\r\n      <div className=\"modal-header\">\r\n        <h2 className=\"modal-header-title\">\r\n          <i className=\"fa fa-key\" />\r\n          <span className=\"p-l-1\">API Key Created</span>\r\n        </h2>\r\n\r\n        <a className=\"modal-header-close\" ng-click=\"dismiss();\">\r\n          <i className=\"fa fa-remove\" />\r\n        </a>\r\n      </div>\r\n\r\n      <div className=\"modal-content\">\r\n        <div className=\"gf-form-group\">\r\n          <div className=\"gf-form\">\r\n            <span className=\"gf-form-label\">Key</span>\r\n            <span className=\"gf-form-label\">{props.apiKey}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grafana-info-box\" style={{ border: 0 }}>\r\n          You will only be able to view this key here once! It is not stored in this form. So be sure to copy it now.\r\n          <br />\r\n          <br />\r\n          You can authenticate request using the Authorization HTTP header, example:\r\n          <br />\r\n          <br />\r\n          <pre className=\"small\">\r\n            curl -H \"Authorization: Bearer {props.apiKey}\" {props.rootPath}/api/dashboards/home\r\n          </pre>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ApiKeysAddedModal;\r\n","import React, { PureComponent } from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport { connect } from 'react-redux';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport OrgActionBar from 'app/core/components/OrgActionBar/OrgActionBar';\r\nimport PageLoader from 'app/core/components/PageLoader/PageLoader';\r\nimport PluginList from './PluginList';\r\nimport { NavModel, Plugin } from 'app/types';\r\nimport { loadPlugins, setPluginsLayoutMode, setPluginsSearchQuery } from './state/actions';\r\nimport { getNavModel } from '../../core/selectors/navModel';\r\nimport { getLayoutMode, getPlugins, getPluginsSearchQuery } from './state/selectors';\r\nimport { LayoutMode } from '../../core/components/LayoutSelector/LayoutSelector';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  plugins: Plugin[];\r\n  layoutMode: LayoutMode;\r\n  searchQuery: string;\r\n  hasFetched: boolean;\r\n  loadPlugins: typeof loadPlugins;\r\n  setPluginsLayoutMode: typeof setPluginsLayoutMode;\r\n  setPluginsSearchQuery: typeof setPluginsSearchQuery;\r\n}\r\n\r\nexport class PluginListPage extends PureComponent<Props> {\r\n  componentDidMount() {\r\n    this.fetchPlugins();\r\n  }\r\n\r\n  async fetchPlugins() {\r\n    await this.props.loadPlugins();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      hasFetched,\r\n      navModel,\r\n      plugins,\r\n      layoutMode,\r\n      setPluginsLayoutMode,\r\n      setPluginsSearchQuery,\r\n      searchQuery,\r\n    } = this.props;\r\n\r\n    const linkButton = {\r\n      href: 'https://grafana.com/plugins?utm_source=grafana_plugin_list',\r\n      title: 'Find more plugins on Grafana.com',\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          <OrgActionBar\r\n            searchQuery={searchQuery}\r\n            layoutMode={layoutMode}\r\n            onSetLayoutMode={mode => setPluginsLayoutMode(mode)}\r\n            setSearchQuery={query => setPluginsSearchQuery(query)}\r\n            linkButton={linkButton}\r\n          />\r\n          {hasFetched ? (\r\n            plugins && <PluginList plugins={plugins} layoutMode={layoutMode} />\r\n          ) : (\r\n            <PageLoader pageName=\"Plugins\" />\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    navModel: getNavModel(state.navIndex, 'plugins'),\r\n    plugins: getPlugins(state.plugins),\r\n    layoutMode: getLayoutMode(state.plugins),\r\n    searchQuery: getPluginsSearchQuery(state.plugins),\r\n    hasFetched: state.plugins.hasFetched,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadPlugins,\r\n  setPluginsLayoutMode,\r\n  setPluginsSearchQuery,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(PluginListPage));\r\n","import React, { PureComponent } from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport { connect } from 'react-redux';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport appEvents from 'app/core/app_events';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\nimport { NavModel, StoreState, FolderState } from 'app/types';\r\nimport { getFolderByUid, setFolderTitle, saveFolder, deleteFolder } from './state/actions';\r\nimport { getLoadingNav } from './state/navModel';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  folderUid: string;\r\n  folder: FolderState;\r\n  getFolderByUid: typeof getFolderByUid;\r\n  setFolderTitle: typeof setFolderTitle;\r\n  saveFolder: typeof saveFolder;\r\n  deleteFolder: typeof deleteFolder;\r\n}\r\n\r\nexport class FolderSettingsPage extends PureComponent<Props> {\r\n  componentDidMount() {\r\n    this.props.getFolderByUid(this.props.folderUid);\r\n  }\r\n\r\n  onTitleChange = evt => {\r\n    this.props.setFolderTitle(evt.target.value);\r\n  };\r\n\r\n  onSave = async evt => {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n\r\n    await this.props.saveFolder(this.props.folder);\r\n  };\r\n\r\n  onDelete = evt => {\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n\r\n    appEvents.emit('confirm-modal', {\r\n      title: 'Delete',\r\n      text: `Do you want to delete this folder and all its dashboards?`,\r\n      icon: 'fa-trash',\r\n      yesText: 'Delete',\r\n      onConfirm: () => {\r\n        this.props.deleteFolder(this.props.folder.uid);\r\n      },\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { navModel, folder } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          <h2 className=\"page-sub-heading\">Folder Settings</h2>\r\n\r\n          <div className=\"section gf-form-group\">\r\n            <form name=\"folderSettingsForm\" onSubmit={this.onSave}>\r\n              <div className=\"gf-form\">\r\n                <label className=\"gf-form-label width-7\">Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"gf-form-input width-30\"\r\n                  value={folder.title}\r\n                  onChange={this.onTitleChange}\r\n                />\r\n              </div>\r\n              <div className=\"gf-form-button-row\">\r\n                <button type=\"submit\" className=\"btn btn-success\" disabled={!folder.canSave || !folder.hasChanged}>\r\n                  <i className=\"fa fa-save\" /> Save\r\n                </button>\r\n                <button className=\"btn btn-danger\" onClick={this.onDelete} disabled={!folder.canSave}>\r\n                  <i className=\"fa fa-trash\" /> Delete\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n  const uid = state.location.routeParams.uid;\r\n\r\n  return {\r\n    navModel: getNavModel(state.navIndex, `folder-settings-${uid}`, getLoadingNav(2)),\r\n    folderUid: uid,\r\n    folder: state.folder,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  getFolderByUid,\r\n  saveFolder,\r\n  setFolderTitle,\r\n  deleteFolder,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(FolderSettingsPage));\r\n","import React, { PureComponent } from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport { connect } from 'react-redux';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport Tooltip from 'app/core/components/Tooltip/Tooltip';\r\nimport SlideDown from 'app/core/components/Animations/SlideDown';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\nimport { NavModel, StoreState, FolderState } from 'app/types';\r\nimport { DashboardAcl, PermissionLevel, NewDashboardAclItem } from 'app/types/acl';\r\nimport {\r\n  getFolderByUid,\r\n  getFolderPermissions,\r\n  updateFolderPermission,\r\n  removeFolderPermission,\r\n  addFolderPermission,\r\n} from './state/actions';\r\nimport { getLoadingNav } from './state/navModel';\r\nimport PermissionList from 'app/core/components/PermissionList/PermissionList';\r\nimport AddPermission from 'app/core/components/PermissionList/AddPermission';\r\nimport PermissionsInfo from 'app/core/components/PermissionList/PermissionsInfo';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  folderUid: string;\r\n  folder: FolderState;\r\n  getFolderByUid: typeof getFolderByUid;\r\n  getFolderPermissions: typeof getFolderPermissions;\r\n  updateFolderPermission: typeof updateFolderPermission;\r\n  removeFolderPermission: typeof removeFolderPermission;\r\n  addFolderPermission: typeof addFolderPermission;\r\n}\r\n\r\nexport interface State {\r\n  isAdding: boolean;\r\n}\r\n\r\nexport class FolderPermissions extends PureComponent<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isAdding: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.getFolderByUid(this.props.folderUid);\r\n    this.props.getFolderPermissions(this.props.folderUid);\r\n  }\r\n\r\n  onOpenAddPermissions = () => {\r\n    this.setState({ isAdding: true });\r\n  };\r\n\r\n  onRemoveItem = (item: DashboardAcl) => {\r\n    this.props.removeFolderPermission(item);\r\n  };\r\n\r\n  onPermissionChanged = (item: DashboardAcl, level: PermissionLevel) => {\r\n    this.props.updateFolderPermission(item, level);\r\n  };\r\n\r\n  onAddPermission = (newItem: NewDashboardAclItem) => {\r\n    return this.props.addFolderPermission(newItem);\r\n  };\r\n\r\n  onCancelAddPermission = () => {\r\n    this.setState({ isAdding: false });\r\n  };\r\n\r\n  render() {\r\n    const { navModel, folder } = this.props;\r\n    const { isAdding } = this.state;\r\n\r\n    if (folder.id === 0) {\r\n      return <PageHeader model={navModel} />;\r\n    }\r\n\r\n    const folderInfo = { title: folder.title, url: folder.url, id: folder.id };\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          <div className=\"page-action-bar\">\r\n            <h3 className=\"page-sub-heading\">Folder Permissions</h3>\r\n            <Tooltip className=\"page-sub-heading-icon\" placement=\"auto\" content={PermissionsInfo}>\r\n              <i className=\"gicon gicon-question gicon--has-hover\" />\r\n            </Tooltip>\r\n            <div className=\"page-action-bar__spacer\" />\r\n            <button className=\"btn btn-success pull-right\" onClick={this.onOpenAddPermissions} disabled={isAdding}>\r\n              <i className=\"fa fa-plus\" /> Add Permission\r\n            </button>\r\n          </div>\r\n          <SlideDown in={isAdding}>\r\n            <AddPermission onAddPermission={this.onAddPermission} onCancel={this.onCancelAddPermission} />\r\n          </SlideDown>\r\n          <PermissionList\r\n            items={folder.permissions}\r\n            onRemoveItem={this.onRemoveItem}\r\n            onPermissionChanged={this.onPermissionChanged}\r\n            isFetching={false}\r\n            folderInfo={folderInfo}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n  const uid = state.location.routeParams.uid;\r\n  return {\r\n    navModel: getNavModel(state.navIndex, `folder-permissions-${uid}`, getLoadingNav(1)),\r\n    folderUid: uid,\r\n    folder: state.folder,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  getFolderByUid,\r\n  getFolderPermissions,\r\n  updateFolderPermission,\r\n  removeFolderPermission,\r\n  addFolderPermission,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(FolderPermissions));\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { hot } from 'react-hot-loader';\r\nimport PageHeader from '../../core/components/PageHeader/PageHeader';\r\nimport PageLoader from 'app/core/components/PageLoader/PageLoader';\r\nimport OrgActionBar from '../../core/components/OrgActionBar/OrgActionBar';\r\nimport EmptyListCTA from '../../core/components/EmptyListCTA/EmptyListCTA';\r\nimport DataSourcesList from './DataSourcesList';\r\nimport { DataSource, NavModel } from 'app/types';\r\nimport { LayoutMode } from '../../core/components/LayoutSelector/LayoutSelector';\r\nimport { loadDataSources, setDataSourcesLayoutMode, setDataSourcesSearchQuery } from './state/actions';\r\nimport { getNavModel } from '../../core/selectors/navModel';\r\nimport {\r\n  getDataSources,\r\n  getDataSourcesCount,\r\n  getDataSourcesLayoutMode,\r\n  getDataSourcesSearchQuery,\r\n} from './state/selectors';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  dataSources: DataSource[];\r\n  dataSourcesCount: number;\r\n  layoutMode: LayoutMode;\r\n  searchQuery: string;\r\n  hasFetched: boolean;\r\n  loadDataSources: typeof loadDataSources;\r\n  setDataSourcesLayoutMode: typeof setDataSourcesLayoutMode;\r\n  setDataSourcesSearchQuery: typeof setDataSourcesSearchQuery;\r\n}\r\n\r\nconst emptyListModel = {\r\n  title: 'There are no data sources defined yet',\r\n  buttonIcon: 'gicon gicon-add-datasources',\r\n  buttonLink: 'datasources/new',\r\n  buttonTitle: 'Add data source',\r\n  proTip: 'You can also define data sources through configuration files.',\r\n  proTipLink: 'http://docs.grafana.org/administration/provisioning/#datasources?utm_source=grafana_ds_list',\r\n  proTipLinkTitle: 'Learn more',\r\n  proTipTarget: '_blank',\r\n};\r\n\r\nexport class DataSourcesListPage extends PureComponent<Props> {\r\n  componentDidMount() {\r\n    this.fetchDataSources();\r\n  }\r\n\r\n  async fetchDataSources() {\r\n    return await this.props.loadDataSources();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      dataSources,\r\n      dataSourcesCount,\r\n      navModel,\r\n      layoutMode,\r\n      searchQuery,\r\n      setDataSourcesSearchQuery,\r\n      setDataSourcesLayoutMode,\r\n      hasFetched,\r\n    } = this.props;\r\n\r\n    const linkButton = {\r\n      href: 'datasources/new',\r\n      title: 'Add data source',\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          {!hasFetched && <PageLoader pageName=\"Data sources\" />}\r\n          {hasFetched && dataSourcesCount === 0 && <EmptyListCTA model={emptyListModel} />}\r\n          {hasFetched &&\r\n            dataSourcesCount > 0 && [\r\n              <OrgActionBar\r\n                layoutMode={layoutMode}\r\n                searchQuery={searchQuery}\r\n                onSetLayoutMode={mode => setDataSourcesLayoutMode(mode)}\r\n                setSearchQuery={query => setDataSourcesSearchQuery(query)}\r\n                linkButton={linkButton}\r\n                key=\"action-bar\"\r\n              />,\r\n              <DataSourcesList dataSources={dataSources} layoutMode={layoutMode} key=\"list\" />,\r\n            ]}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    navModel: getNavModel(state.navIndex, 'datasources'),\r\n    dataSources: getDataSources(state.dataSources),\r\n    layoutMode: getDataSourcesLayoutMode(state.dataSources),\r\n    dataSourcesCount: getDataSourcesCount(state.dataSources),\r\n    searchQuery: getDataSourcesSearchQuery(state.dataSources),\r\n    hasFetched: state.dataSources.hasFetched,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadDataSources,\r\n  setDataSourcesSearchQuery,\r\n  setDataSourcesLayoutMode,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(DataSourcesListPage));\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { hot } from 'react-hot-loader';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport { NavModel, Plugin } from 'app/types';\r\nimport { addDataSource, loadDataSourceTypes, setDataSourceTypeSearchQuery } from './state/actions';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\nimport { getDataSourceTypes } from './state/selectors';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  dataSourceTypes: Plugin[];\r\n  addDataSource: typeof addDataSource;\r\n  loadDataSourceTypes: typeof loadDataSourceTypes;\r\n  dataSourceTypeSearchQuery: string;\r\n  setDataSourceTypeSearchQuery: typeof setDataSourceTypeSearchQuery;\r\n}\r\n\r\nclass NewDataSourcePage extends PureComponent<Props> {\r\n  componentDidMount() {\r\n    this.props.loadDataSourceTypes();\r\n  }\r\n\r\n  onDataSourceTypeClicked = type => {\r\n    this.props.addDataSource(type);\r\n  };\r\n\r\n  onSearchQueryChange = event => {\r\n    this.props.setDataSourceTypeSearchQuery(event.target.value);\r\n  };\r\n\r\n  render() {\r\n    const { navModel, dataSourceTypes, dataSourceTypeSearchQuery } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          <h2 className=\"add-data-source-header\">Choose data source type</h2>\r\n          <div className=\"add-data-source-search\">\r\n            <label className=\"gf-form--has-input-icon\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"gf-form-input width-20\"\r\n                value={dataSourceTypeSearchQuery}\r\n                onChange={this.onSearchQueryChange}\r\n                placeholder=\"Filter by name or type\"\r\n              />\r\n              <i className=\"gf-form-input-icon fa fa-search\" />\r\n            </label>\r\n          </div>\r\n          <div className=\"add-data-source-grid\">\r\n            {dataSourceTypes.map((type, index) => {\r\n              return (\r\n                <div\r\n                  onClick={() => this.onDataSourceTypeClicked(type)}\r\n                  className=\"add-data-source-grid-item\"\r\n                  key={`${type.id}-${index}`}\r\n                >\r\n                  <img className=\"add-data-source-grid-item-logo\" src={type.info.logos.small} />\r\n                  <span className=\"add-data-source-grid-item-text\">{type.name}</span>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    navModel: getNavModel(state.navIndex, 'datasources'),\r\n    dataSourceTypes: getDataSourceTypes(state.dataSources),\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addDataSource,\r\n  loadDataSourceTypes,\r\n  setDataSourceTypeSearchQuery,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(NewDataSourcePage));\r\n","import React, { PureComponent } from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport { connect } from 'react-redux';\r\nimport Remarkable from 'remarkable';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport PageLoader from 'app/core/components/PageLoader/PageLoader';\r\nimport UsersActionBar from './UsersActionBar';\r\nimport UsersTable from './UsersTable';\r\nimport InviteesTable from './InviteesTable';\r\nimport { Invitee, NavModel, OrgUser } from 'app/types';\r\nimport appEvents from 'app/core/app_events';\r\nimport { loadUsers, loadInvitees, revokeInvite, setUsersSearchQuery, updateUser, removeUser } from './state/actions';\r\nimport { getNavModel } from '../../core/selectors/navModel';\r\nimport { getInvitees, getUsers, getUsersSearchQuery } from './state/selectors';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  invitees: Invitee[];\r\n  users: OrgUser[];\r\n  searchQuery: string;\r\n  externalUserMngInfo: string;\r\n  hasFetched: boolean;\r\n  loadUsers: typeof loadUsers;\r\n  loadInvitees: typeof loadInvitees;\r\n  setUsersSearchQuery: typeof setUsersSearchQuery;\r\n  updateUser: typeof updateUser;\r\n  removeUser: typeof removeUser;\r\n  revokeInvite: typeof revokeInvite;\r\n}\r\n\r\nexport interface State {\r\n  showInvites: boolean;\r\n}\r\n\r\nexport class UsersListPage extends PureComponent<Props, State> {\r\n  externalUserMngInfoHtml: string;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if (this.props.externalUserMngInfo) {\r\n      const markdownRenderer = new Remarkable();\r\n      this.externalUserMngInfoHtml = markdownRenderer.render(this.props.externalUserMngInfo);\r\n    }\r\n\r\n    this.state = {\r\n      showInvites: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchUsers();\r\n    this.fetchInvitees();\r\n  }\r\n\r\n  async fetchUsers() {\r\n    return await this.props.loadUsers();\r\n  }\r\n\r\n  async fetchInvitees() {\r\n    return await this.props.loadInvitees();\r\n  }\r\n\r\n  onRoleChange = (role, user) => {\r\n    const updatedUser = { ...user, role: role };\r\n\r\n    this.props.updateUser(updatedUser);\r\n  };\r\n\r\n  onRemoveUser = user => {\r\n    appEvents.emit('confirm-modal', {\r\n      title: 'Delete',\r\n      text: 'Are you sure you want to delete user ' + user.login + '?',\r\n      yesText: 'Delete',\r\n      icon: 'fa-warning',\r\n      onConfirm: () => {\r\n        this.props.removeUser(user.userId);\r\n      },\r\n    });\r\n  };\r\n\r\n  onRevokeInvite = code => {\r\n    this.props.revokeInvite(code);\r\n  };\r\n\r\n  onShowInvites = () => {\r\n    this.setState(prevState => ({\r\n      showInvites: !prevState.showInvites,\r\n    }));\r\n  };\r\n\r\n  renderTable() {\r\n    const { invitees, users } = this.props;\r\n\r\n    if (this.state.showInvites) {\r\n      return <InviteesTable invitees={invitees} onRevokeInvite={code => this.onRevokeInvite(code)} />;\r\n    } else {\r\n      return (\r\n        <UsersTable\r\n          users={users}\r\n          onRoleChange={(role, user) => this.onRoleChange(role, user)}\r\n          onRemoveUser={user => this.onRemoveUser(user)}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { navModel, hasFetched } = this.props;\r\n    const externalUserMngInfoHtml = this.externalUserMngInfoHtml;\r\n\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          <UsersActionBar onShowInvites={this.onShowInvites} showInvites={this.state.showInvites} />\r\n          {externalUserMngInfoHtml && (\r\n            <div className=\"grafana-info-box\" dangerouslySetInnerHTML={{ __html: externalUserMngInfoHtml }} />\r\n          )}\r\n          {hasFetched ? this.renderTable() : <PageLoader pageName=\"Users\" />}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    navModel: getNavModel(state.navIndex, 'users'),\r\n    users: getUsers(state.users),\r\n    searchQuery: getUsersSearchQuery(state.users),\r\n    invitees: getInvitees(state.users),\r\n    externalUserMngInfo: state.users.externalUserMngInfo,\r\n    hasFetched: state.users.hasFetched,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadUsers,\r\n  loadInvitees,\r\n  setUsersSearchQuery,\r\n  updateUser,\r\n  removeUser,\r\n  revokeInvite,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(UsersListPage));\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames/bind';\r\nimport { setUsersSearchQuery } from './state/actions';\r\nimport { getInviteesCount, getUsersSearchQuery } from './state/selectors';\r\n\r\nexport interface Props {\r\n  searchQuery: string;\r\n  setUsersSearchQuery: typeof setUsersSearchQuery;\r\n  onShowInvites: () => void;\r\n  pendingInvitesCount: number;\r\n  canInvite: boolean;\r\n  showInvites: boolean;\r\n  externalUserMngLinkUrl: string;\r\n  externalUserMngLinkName: string;\r\n}\r\n\r\nexport class UsersActionBar extends PureComponent<Props> {\r\n  render() {\r\n    const {\r\n      canInvite,\r\n      externalUserMngLinkName,\r\n      externalUserMngLinkUrl,\r\n      searchQuery,\r\n      pendingInvitesCount,\r\n      setUsersSearchQuery,\r\n      onShowInvites,\r\n      showInvites,\r\n    } = this.props;\r\n\r\n    const pendingInvitesButtonStyle = classNames({\r\n      btn: true,\r\n      'toggle-btn': true,\r\n      active: showInvites,\r\n    });\r\n\r\n    const usersButtonStyle = classNames({\r\n      btn: true,\r\n      'toggle-btn': true,\r\n      active: !showInvites,\r\n    });\r\n\r\n    return (\r\n      <div className=\"page-action-bar\">\r\n        <div className=\"gf-form gf-form--grow\">\r\n          <label className=\"gf-form--has-input-icon\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"gf-form-input width-20\"\r\n              value={searchQuery}\r\n              onChange={event => setUsersSearchQuery(event.target.value)}\r\n              placeholder=\"Filter by name or type\"\r\n            />\r\n            <i className=\"gf-form-input-icon fa fa-search\" />\r\n          </label>\r\n          {pendingInvitesCount > 0 && (\r\n            <div style={{ marginLeft: '1rem' }}>\r\n              <button className={usersButtonStyle} key=\"users\" onClick={onShowInvites}>\r\n                Users\r\n              </button>\r\n              <button className={pendingInvitesButtonStyle} onClick={onShowInvites} key=\"pending-invites\">\r\n                Pending Invites ({pendingInvitesCount})\r\n              </button>\r\n            </div>\r\n          )}\r\n          <div className=\"page-action-bar__spacer\" />\r\n          {canInvite && (\r\n            <a className=\"btn btn-success\" href=\"org/users/invite\">\r\n              <span>Invite</span>\r\n            </a>\r\n          )}\r\n          {externalUserMngLinkUrl && (\r\n            <a className=\"btn btn-success\" href={externalUserMngLinkUrl} target=\"_blank\">\r\n              <i className=\"fa fa-external-link-square\" /> {externalUserMngLinkName}\r\n            </a>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    searchQuery: getUsersSearchQuery(state.users),\r\n    pendingInvitesCount: getInviteesCount(state.users),\r\n    externalUserMngLinkName: state.users.externalUserMngLinkName,\r\n    externalUserMngLinkUrl: state.users.externalUserMngLinkUrl,\r\n    canInvite: state.users.canInvite,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setUsersSearchQuery,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersActionBar);\r\n","import React, { SFC } from 'react';\r\nimport { OrgUser } from 'app/types';\r\n\r\nexport interface Props {\r\n  users: OrgUser[];\r\n  onRoleChange: (role: string, user: OrgUser) => void;\r\n  onRemoveUser: (user: OrgUser) => void;\r\n}\r\n\r\nconst UsersTable: SFC<Props> = props => {\r\n  const { users, onRoleChange, onRemoveUser } = props;\r\n\r\n  return (\r\n    <table className=\"filter-table form-inline\">\r\n      <thead>\r\n        <tr>\r\n          <th />\r\n          <th>Login</th>\r\n          <th>Email</th>\r\n          <th>Seen</th>\r\n          <th>Role</th>\r\n          <th style={{ width: '34px' }} />\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {users.map((user, index) => {\r\n          return (\r\n            <tr key={`${user.userId}-${index}`}>\r\n              <td className=\"width-4 text-center\">\r\n                <img className=\"filter-table__avatar\" src={user.avatarUrl} />\r\n              </td>\r\n              <td>{user.login}</td>\r\n              <td>\r\n                <span className=\"ellipsis\">{user.email}</span>\r\n              </td>\r\n              <td>{user.lastSeenAtAge}</td>\r\n              <td>\r\n                <div className=\"gf-form-select-wrapper width-12\">\r\n                  <select\r\n                    value={user.role}\r\n                    className=\"gf-form-input\"\r\n                    onChange={event => onRoleChange(event.target.value, user)}\r\n                  >\r\n                    {['Viewer', 'Editor', 'Admin'].map((option, index) => {\r\n                      return (\r\n                        <option value={option} key={`${option}-${index}`}>\r\n                          {option}\r\n                        </option>\r\n                      );\r\n                    })}\r\n                  </select>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div onClick={() => onRemoveUser(user)} className=\"btn btn-danger btn-mini\">\r\n                  <i className=\"fa fa-remove\" />\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default UsersTable;\r\n","import React, { createRef, PureComponent } from 'react';\r\nimport { Invitee } from 'app/types';\r\n\r\nexport interface Props {\r\n  invitees: Invitee[];\r\n  onRevokeInvite: (code: string) => void;\r\n}\r\n\r\nexport default class InviteesTable extends PureComponent<Props> {\r\n  private copyUrlRef = createRef<HTMLTextAreaElement>();\r\n\r\n  copyToClipboard = () => {\r\n    const node = this.copyUrlRef.current;\r\n\r\n    if (node) {\r\n      node.select();\r\n      document.execCommand('copy');\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { invitees, onRevokeInvite } = this.props;\r\n\r\n    return (\r\n      <table className=\"filter-table form-inline\">\r\n        <thead>\r\n          <tr>\r\n            <th>Email</th>\r\n            <th>Name</th>\r\n            <th />\r\n            <th style={{ width: '34px' }} />\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {invitees.map((invitee, index) => {\r\n            return (\r\n              <tr key={`${invitee.id}-${index}`}>\r\n                <td>{invitee.email}</td>\r\n                <td>{invitee.name}</td>\r\n                <td className=\"text-right\">\r\n                  <button className=\"btn btn-inverse btn-mini\" onClick={this.copyToClipboard}>\r\n                    <textarea\r\n                      readOnly={true}\r\n                      value={invitee.url}\r\n                      style={{ position: 'absolute', right: -1000 }}\r\n                      ref={this.copyUrlRef}\r\n                    />\r\n                    <i className=\"fa fa-clipboard\" /> Copy Invite\r\n                  </button>\r\n                  &nbsp;\r\n                </td>\r\n                <td>\r\n                  <button className=\"btn btn-danger btn-mini\" onClick={() => onRevokeInvite(invitee.code)}>\r\n                    <i className=\"fa fa-remove\" />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport { connect } from 'react-redux';\r\nimport PageHeader from 'app/core/components/PageHeader/PageHeader';\r\nimport DashboardTable from './DashboardsTable';\r\nimport { DataSource, NavModel, PluginDashboard } from 'app/types';\r\nimport { getNavModel } from 'app/core/selectors/navModel';\r\nimport { getRouteParamsId } from 'app/core/selectors/location';\r\nimport { loadDataSource } from './state/actions';\r\nimport { loadPluginDashboards } from '../plugins/state/actions';\r\nimport { importDashboard, removeDashboard } from '../dashboard/state/actions';\r\nimport { getDataSource } from './state/selectors';\r\n\r\nexport interface Props {\r\n  navModel: NavModel;\r\n  dashboards: PluginDashboard[];\r\n  dataSource: DataSource;\r\n  pageId: number;\r\n  importDashboard: typeof importDashboard;\r\n  loadDataSource: typeof loadDataSource;\r\n  loadPluginDashboards: typeof loadPluginDashboards;\r\n  removeDashboard: typeof removeDashboard;\r\n}\r\n\r\nexport class DataSourceDashboards extends PureComponent<Props> {\r\n  async componentDidMount() {\r\n    const { loadDataSource, pageId } = this.props;\r\n\r\n    await loadDataSource(pageId);\r\n    this.props.loadPluginDashboards();\r\n  }\r\n\r\n  onImport = (dashboard: PluginDashboard, overwrite: boolean) => {\r\n    const { dataSource, importDashboard } = this.props;\r\n    const data = {\r\n      pluginId: dashboard.pluginId,\r\n      path: dashboard.path,\r\n      overwrite: overwrite,\r\n      inputs: [],\r\n    };\r\n\r\n    if (dataSource) {\r\n      data.inputs.push({\r\n        name: '*',\r\n        type: 'datasource',\r\n        pluginId: dataSource.type,\r\n        value: dataSource.name,\r\n      });\r\n    }\r\n\r\n    importDashboard(data, dashboard.title);\r\n  };\r\n\r\n  onRemove = (dashboard: PluginDashboard) => {\r\n    this.props.removeDashboard(dashboard.importedUri);\r\n  };\r\n\r\n  render() {\r\n    const { dashboards, navModel } = this.props;\r\n    return (\r\n      <div>\r\n        <PageHeader model={navModel} />\r\n        <div className=\"page-container page-body\">\r\n          <DashboardTable\r\n            dashboards={dashboards}\r\n            onImport={(dashboard, overwrite) => this.onImport(dashboard, overwrite)}\r\n            onRemove={dashboard => this.onRemove(dashboard)}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const pageId = getRouteParamsId(state.location);\r\n\r\n  return {\r\n    navModel: getNavModel(state.navIndex, `datasource-dashboards-${pageId}`),\r\n    pageId: pageId,\r\n    dashboards: state.plugins.dashboards,\r\n    dataSource: getDataSource(state.dataSources, pageId),\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  importDashboard,\r\n  loadDataSource,\r\n  loadPluginDashboards,\r\n  removeDashboard,\r\n};\r\n\r\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(DataSourceDashboards));\r\n","import React, { SFC } from 'react';\r\nimport { PluginDashboard } from '../../types';\r\n\r\nexport interface Props {\r\n  dashboards: PluginDashboard[];\r\n  onImport: (dashboard, overwrite) => void;\r\n  onRemove: (dashboard) => void;\r\n}\r\n\r\nconst DashboardsTable: SFC<Props> = ({ dashboards, onImport, onRemove }) => {\r\n  function buttonText(dashboard: PluginDashboard) {\r\n    return dashboard.revision !== dashboard.importedRevision ? 'Update' : 'Re-import';\r\n  }\r\n\r\n  return (\r\n    <table className=\"filter-table\">\r\n      <tbody>\r\n        {dashboards.map((dashboard, index) => {\r\n          return (\r\n            <tr key={`${dashboard.dashboardId}-${index}`}>\r\n              <td className=\"width-1\">\r\n                <i className=\"icon-gf icon-gf-dashboard\" />\r\n              </td>\r\n              <td>\r\n                {dashboard.imported ? (\r\n                  <a href={dashboard.importedUrl}>{dashboard.title}</a>\r\n                ) : (\r\n                  <span>{dashboard.title}</span>\r\n                )}\r\n              </td>\r\n              <td style={{ textAlign: 'right' }}>\r\n                {!dashboard.imported ? (\r\n                  <button className=\"btn btn-secondary btn-small\" onClick={() => onImport(dashboard, false)}>\r\n                    Import\r\n                  </button>\r\n                ) : (\r\n                  <button className=\"btn btn-secondary btn-small\" onClick={() => onImport(dashboard, true)}>\r\n                    {buttonText(dashboard)}\r\n                  </button>\r\n                )}\r\n                {dashboard.imported && (\r\n                  <button className=\"btn btn-danger btn-small\" onClick={() => onRemove(dashboard)}>\r\n                    <i className=\"fa fa-trash\" />\r\n                  </button>\r\n                )}\r\n              </td>\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default DashboardsTable;\r\n","import React, { PureComponent } from 'react';\r\nimport { DataSource } from 'app/types';\r\n\r\nexport interface Props {\r\n  dataSource: DataSource;\r\n}\r\n\r\nexport class DataSourcesListItem extends PureComponent<Props> {\r\n  render() {\r\n    const { dataSource } = this.props;\r\n    return (\r\n      <li className=\"card-item-wrapper\">\r\n        <a className=\"card-item\" href={`datasources/edit/${dataSource.id}`}>\r\n          <div className=\"card-item-header\">\r\n            <div className=\"card-item-type\">{dataSource.type}</div>\r\n          </div>\r\n          <div className=\"card-item-body\">\r\n            <figure className=\"card-item-figure\">\r\n              <img src={dataSource.typeLogoUrl} />\r\n            </figure>\r\n            <div className=\"card-item-details\">\r\n              <div className=\"card-item-name\">\r\n                {dataSource.name}\r\n                {dataSource.isDefault && <span className=\"btn btn-secondary btn-mini\">default</span>}\r\n              </div>\r\n              <div className=\"card-item-sub-name\">{dataSource.url}</div>\r\n            </div>\r\n          </div>\r\n        </a>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DataSourcesListItem;\r\n","import React, { PureComponent } from 'react';\r\nimport classNames from 'classnames/bind';\r\nimport DataSourcesListItem from './DataSourcesListItem';\r\nimport { DataSource } from 'app/types';\r\nimport { LayoutMode, LayoutModes } from '../../core/components/LayoutSelector/LayoutSelector';\r\n\r\nexport interface Props {\r\n  dataSources: DataSource[];\r\n  layoutMode: LayoutMode;\r\n}\r\n\r\nexport class DataSourcesList extends PureComponent<Props> {\r\n  render() {\r\n    const { dataSources, layoutMode } = this.props;\r\n\r\n    const listStyle = classNames({\r\n      'card-section': true,\r\n      'card-list-layout-grid': layoutMode === LayoutModes.Grid,\r\n      'card-list-layout-list': layoutMode === LayoutModes.List,\r\n    });\r\n\r\n    return (\r\n      <section className={listStyle}>\r\n        <ol className=\"card-list\">\r\n          {dataSources.map((dataSource, index) => {\r\n            return <DataSourcesListItem dataSource={dataSource} key={`${dataSource.id}-${index}`} />;\r\n          })}\r\n        </ol>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DataSourcesList;\r\n","import React, { SFC } from 'react';\r\nimport { Plugin } from 'app/types';\r\n\r\ninterface Props {\r\n  plugin: Plugin;\r\n}\r\n\r\nconst PluginListItem: SFC<Props> = props => {\r\n  const { plugin } = props;\r\n\r\n  return (\r\n    <li className=\"card-item-wrapper\">\r\n      <a className=\"card-item\" href={`plugins/${plugin.id}/edit`}>\r\n        <div className=\"card-item-header\">\r\n          <div className=\"card-item-type\">\r\n            <i className={`icon-gf icon-gf-${plugin.type}`} />\r\n            {plugin.type}\r\n          </div>\r\n          {plugin.hasUpdate && (\r\n            <div className=\"card-item-notice\">\r\n              <span bs-tooltip=\"plugin.latestVersion\">Update available!</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"card-item-body\">\r\n          <figure className=\"card-item-figure\">\r\n            <img src={plugin.info.logos.small} />\r\n          </figure>\r\n          <div className=\"card-item-details\">\r\n            <div className=\"card-item-name\">{plugin.name}</div>\r\n            <div className=\"card-item-sub-name\">{`By ${plugin.info.author.name}`}</div>\r\n          </div>\r\n        </div>\r\n      </a>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default PluginListItem;\r\n","import React, { SFC } from 'react';\r\nimport classNames from 'classnames/bind';\r\nimport PluginListItem from './PluginListItem';\r\nimport { Plugin } from 'app/types';\r\nimport { LayoutMode, LayoutModes } from '../../core/components/LayoutSelector/LayoutSelector';\r\n\r\ninterface Props {\r\n  plugins: Plugin[];\r\n  layoutMode: LayoutMode;\r\n}\r\n\r\nconst PluginList: SFC<Props> = props => {\r\n  const { plugins, layoutMode } = props;\r\n\r\n  const listStyle = classNames({\r\n    'card-section': true,\r\n    'card-list-layout-grid': layoutMode === LayoutModes.Grid,\r\n    'card-list-layout-list': layoutMode === LayoutModes.List,\r\n  });\r\n\r\n  return (\r\n    <section className={listStyle}>\r\n      <ol className=\"card-list\">\r\n        {plugins.map((plugin, index) => {\r\n          return <PluginListItem plugin={plugin} key={`${plugin.name}-${index}`} />;\r\n        })}\r\n      </ol>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default PluginList;\r\n","import React, { SFC, ReactNode } from 'react';\r\nimport Tooltip from '../Tooltip/Tooltip';\r\n\r\ninterface Props {\r\n  tooltip?: string;\r\n  for?: string;\r\n  children: ReactNode;\r\n}\r\n\r\nexport const Label: SFC<Props> = props => {\r\n  return (\r\n    <span className=\"gf-form-label width-10\">\r\n      <span>{props.children}</span>\r\n      {props.tooltip && (\r\n        <Tooltip className=\"gf-form-help-icon--right-normal\" placement=\"auto\" content={props.tooltip}>\r\n          <i className=\"gicon gicon-question gicon--has-hover\" />\r\n        </Tooltip>\r\n      )}\r\n    </span>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Label } from 'app/core/components/Forms/Forms';\r\nimport { Team } from '../../types';\r\nimport { updateTeam } from './state/actions';\r\nimport { getRouteParamsId } from '../../core/selectors/location';\r\nimport { getTeam } from './state/selectors';\r\n\r\nexport interface Props {\r\n  team: Team;\r\n  updateTeam: typeof updateTeam;\r\n}\r\n\r\ninterface State {\r\n  name: string;\r\n  email: string;\r\n}\r\n\r\nexport class TeamSettings extends React.Component<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: props.team.name,\r\n      email: props.team.email,\r\n    };\r\n  }\r\n\r\n  onChangeName = event => {\r\n    this.setState({ name: event.target.value });\r\n  };\r\n\r\n  onChangeEmail = event => {\r\n    this.setState({ email: event.target.value });\r\n  };\r\n\r\n  onUpdate = event => {\r\n    const { name, email } = this.state;\r\n    event.preventDefault();\r\n    this.props.updateTeam(name, email);\r\n  };\r\n\r\n  render() {\r\n    const { name, email } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <h3 className=\"page-sub-heading\">Team Settings</h3>\r\n        <form name=\"teamDetailsForm\" className=\"gf-form-group\" onSubmit={this.onUpdate}>\r\n          <div className=\"gf-form max-width-30\">\r\n            <Label>Name</Label>\r\n            <input\r\n              type=\"text\"\r\n              required\r\n              value={name}\r\n              className=\"gf-form-input max-width-22\"\r\n              onChange={this.onChangeName}\r\n            />\r\n          </div>\r\n          <div className=\"gf-form max-width-30\">\r\n            <Label tooltip=\"This is optional and is primarily used to set the team profile avatar (via gravatar service)\">\r\n              Email\r\n            </Label>\r\n            <input\r\n              type=\"email\"\r\n              className=\"gf-form-input max-width-22\"\r\n              value={email}\r\n              placeholder=\"team@email.com\"\r\n              onChange={this.onChangeEmail}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"gf-form-button-row\">\r\n            <button type=\"submit\" className=\"btn btn-success\">\r\n              Update\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const teamId = getRouteParamsId(state.location);\r\n\r\n  return {\r\n    team: getTeam(state.team, teamId),\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  updateTeam,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TeamSettings);\r\n","import { Plugin, StoreState } from 'app/types';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { getBackendSrv } from '../../../core/services/backend_srv';\r\nimport { LayoutMode } from '../../../core/components/LayoutSelector/LayoutSelector';\r\nimport { PluginDashboard } from '../../../types/plugins';\r\n\r\nexport enum ActionTypes {\r\n  LoadPlugins = 'LOAD_PLUGINS',\r\n  LoadPluginDashboards = 'LOAD_PLUGIN_DASHBOARDS',\r\n  SetPluginsSearchQuery = 'SET_PLUGIN_SEARCH_QUERY',\r\n  SetLayoutMode = 'SET_LAYOUT_MODE',\r\n}\r\n\r\nexport interface LoadPluginsAction {\r\n  type: ActionTypes.LoadPlugins;\r\n  payload: Plugin[];\r\n}\r\n\r\nexport interface LoadPluginDashboardsAction {\r\n  type: ActionTypes.LoadPluginDashboards;\r\n  payload: PluginDashboard[];\r\n}\r\n\r\nexport interface SetPluginsSearchQueryAction {\r\n  type: ActionTypes.SetPluginsSearchQuery;\r\n  payload: string;\r\n}\r\n\r\nexport interface SetLayoutModeAction {\r\n  type: ActionTypes.SetLayoutMode;\r\n  payload: LayoutMode;\r\n}\r\n\r\nexport const setPluginsLayoutMode = (mode: LayoutMode): SetLayoutModeAction => ({\r\n  type: ActionTypes.SetLayoutMode,\r\n  payload: mode,\r\n});\r\n\r\nexport const setPluginsSearchQuery = (query: string): SetPluginsSearchQueryAction => ({\r\n  type: ActionTypes.SetPluginsSearchQuery,\r\n  payload: query,\r\n});\r\n\r\nconst pluginsLoaded = (plugins: Plugin[]): LoadPluginsAction => ({\r\n  type: ActionTypes.LoadPlugins,\r\n  payload: plugins,\r\n});\r\n\r\nconst pluginDashboardsLoaded = (dashboards: PluginDashboard[]): LoadPluginDashboardsAction => ({\r\n  type: ActionTypes.LoadPluginDashboards,\r\n  payload: dashboards,\r\n});\r\n\r\nexport type Action = LoadPluginsAction | LoadPluginDashboardsAction | SetPluginsSearchQueryAction | SetLayoutModeAction;\r\n\r\ntype ThunkResult<R> = ThunkAction<R, StoreState, undefined, Action>;\r\n\r\nexport function loadPlugins(): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const result = await getBackendSrv().get('api/plugins', { embedded: 0 });\r\n    dispatch(pluginsLoaded(result));\r\n  };\r\n}\r\n\r\nexport function loadPluginDashboards(): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const dataSourceType = getStore().dataSources.dataSource.type;\r\n\r\n    const response = await getBackendSrv().get(`api/plugins/${dataSourceType}/dashboards`);\r\n    dispatch(pluginDashboardsLoaded(response));\r\n  };\r\n}\r\n","import { Team, TeamsState, TeamState } from 'app/types';\r\n\r\nexport const getSearchQuery = (state: TeamsState) => state.searchQuery;\r\nexport const getSearchMemberQuery = (state: TeamState) => state.searchMemberQuery;\r\nexport const getTeamGroups = (state: TeamState) => state.groups;\r\nexport const getTeamsCount = (state: TeamsState) => state.teams.length;\r\n\r\nexport const getTeam = (state: TeamState, currentTeamId): Team | null => {\r\n  if (state.team.id === parseInt(currentTeamId, 10)) {\r\n    return state.team;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const getTeams = (state: TeamsState) => {\r\n  const regex = RegExp(state.searchQuery, 'i');\r\n\r\n  return state.teams.filter(team => {\r\n    return regex.test(team.name);\r\n  });\r\n};\r\n\r\nexport const getTeamMembers = (state: TeamState) => {\r\n  const regex = RegExp(state.searchMemberQuery, 'i');\r\n\r\n  return state.members.filter(member => {\r\n    return regex.test(member.login) || regex.test(member.email);\r\n  });\r\n};\r\n","import { ThunkAction } from 'redux-thunk';\r\nimport { StoreState } from '../../../types';\r\nimport { getBackendSrv } from '../../../core/services/backend_srv';\r\nimport { Invitee, OrgUser } from 'app/types';\r\n\r\nexport enum ActionTypes {\r\n  LoadUsers = 'LOAD_USERS',\r\n  LoadInvitees = 'LOAD_INVITEES',\r\n  SetUsersSearchQuery = 'SET_USERS_SEARCH_QUERY',\r\n}\r\n\r\nexport interface LoadUsersAction {\r\n  type: ActionTypes.LoadUsers;\r\n  payload: OrgUser[];\r\n}\r\n\r\nexport interface LoadInviteesAction {\r\n  type: ActionTypes.LoadInvitees;\r\n  payload: Invitee[];\r\n}\r\n\r\nexport interface SetUsersSearchQueryAction {\r\n  type: ActionTypes.SetUsersSearchQuery;\r\n  payload: string;\r\n}\r\n\r\nconst usersLoaded = (users: OrgUser[]): LoadUsersAction => ({\r\n  type: ActionTypes.LoadUsers,\r\n  payload: users,\r\n});\r\n\r\nconst inviteesLoaded = (invitees: Invitee[]): LoadInviteesAction => ({\r\n  type: ActionTypes.LoadInvitees,\r\n  payload: invitees,\r\n});\r\n\r\nexport const setUsersSearchQuery = (query: string): SetUsersSearchQueryAction => ({\r\n  type: ActionTypes.SetUsersSearchQuery,\r\n  payload: query,\r\n});\r\n\r\nexport type Action = LoadUsersAction | SetUsersSearchQueryAction | LoadInviteesAction;\r\n\r\ntype ThunkResult<R> = ThunkAction<R, StoreState, undefined, Action>;\r\n\r\nexport function loadUsers(): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const users = await getBackendSrv().get('/api/org/users');\r\n    dispatch(usersLoaded(users));\r\n  };\r\n}\r\n\r\nexport function loadInvitees(): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const invitees = await getBackendSrv().get('/api/org/invites');\r\n    dispatch(inviteesLoaded(invitees));\r\n  };\r\n}\r\n\r\nexport function updateUser(user: OrgUser): ThunkResult<void> {\r\n  return async dispatch => {\r\n    await getBackendSrv().patch(`/api/org/users/${user.userId}`, { role: user.role });\r\n    dispatch(loadUsers());\r\n  };\r\n}\r\n\r\nexport function removeUser(userId: number): ThunkResult<void> {\r\n  return async dispatch => {\r\n    await getBackendSrv().delete(`/api/org/users/${userId}`);\r\n    dispatch(loadUsers());\r\n  };\r\n}\r\n\r\nexport function revokeInvite(code: string): ThunkResult<void> {\r\n  return async dispatch => {\r\n    await getBackendSrv().patch(`/api/org/invites/${code}/revoke`, {});\r\n    dispatch(loadInvitees());\r\n  };\r\n}\r\n","interface Column {\r\n  text: string;\r\n  title?: string;\r\n  type?: string;\r\n  sort?: boolean;\r\n  desc?: boolean;\r\n  filterable?: boolean;\r\n  unit?: string;\r\n}\r\n\r\nexport default class TableModel {\r\n  columns: Column[];\r\n  rows: any[];\r\n  type: string;\r\n  columnMap: any;\r\n\r\n  constructor() {\r\n    this.columns = [];\r\n    this.columnMap = {};\r\n    this.rows = [];\r\n    this.type = 'table';\r\n  }\r\n\r\n  sort(options) {\r\n    if (options.col === null || this.columns.length <= options.col) {\r\n      return;\r\n    }\r\n\r\n    this.rows.sort((a, b) => {\r\n      a = a[options.col];\r\n      b = b[options.col];\r\n      // Sort null or undefined seperately from comparable values\r\n      return +(a == null) - +(b == null) || +(a > b) || -(a < b);\r\n    });\r\n\r\n    if (options.desc) {\r\n      this.rows.reverse();\r\n    }\r\n\r\n    this.columns[options.col].sort = true;\r\n    this.columns[options.col].desc = options.desc;\r\n  }\r\n\r\n  addColumn(col) {\r\n    if (!this.columnMap[col.text]) {\r\n      this.columns.push(col);\r\n      this.columnMap[col.text] = col;\r\n    }\r\n  }\r\n\r\n  addRow(row) {\r\n    this.rows.push(row);\r\n  }\r\n}\r\n","import React, { SFC } from 'react';\r\n\r\nexport type LayoutMode = LayoutModes.Grid | LayoutModes.List;\r\n\r\nexport enum LayoutModes {\r\n  Grid = 'grid',\r\n  List = 'list',\r\n}\r\n\r\ninterface Props {\r\n  mode: LayoutMode;\r\n  onLayoutModeChanged: (mode: LayoutMode) => {};\r\n}\r\n\r\nconst LayoutSelector: SFC<Props> = props => {\r\n  const { mode, onLayoutModeChanged } = props;\r\n  return (\r\n    <div className=\"layout-selector\">\r\n      <button\r\n        onClick={() => {\r\n          onLayoutModeChanged(LayoutModes.List);\r\n        }}\r\n        className={mode === LayoutModes.List ? 'active' : ''}\r\n      >\r\n        <i className=\"fa fa-list\" />\r\n      </button>\r\n      <button\r\n        onClick={() => {\r\n          onLayoutModeChanged(LayoutModes.Grid);\r\n        }}\r\n        className={mode === LayoutModes.Grid ? 'active' : ''}\r\n      >\r\n        <i className=\"fa fa-th\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LayoutSelector;\r\n","import { Emitter } from 'app/core/utils/emitter';\r\nimport _ from 'lodash';\r\n\r\nexport interface GridPos {\r\n  x: number;\r\n  y: number;\r\n  w: number;\r\n  h: number;\r\n  static?: boolean;\r\n}\r\n\r\nconst notPersistedProperties: { [str: string]: boolean } = {\r\n  events: true,\r\n  fullscreen: true,\r\n  isEditing: true,\r\n  hasRefreshed: true,\r\n};\r\n\r\nconst defaults: any = {\r\n  gridPos: { x: 0, y: 0, h: 3, w: 6 },\r\n  datasource: null,\r\n  targets: [{}],\r\n};\r\n\r\nexport class PanelModel {\r\n  id: number;\r\n  gridPos: GridPos;\r\n  type: string;\r\n  title: string;\r\n  alert?: any;\r\n  scopedVars?: any;\r\n  repeat?: string;\r\n  repeatIteration?: number;\r\n  repeatPanelId?: number;\r\n  repeatDirection?: string;\r\n  repeatedByRow?: boolean;\r\n  minSpan?: number;\r\n  collapsed?: boolean;\r\n  panels?: any;\r\n  soloMode?: boolean;\r\n  targets: any[];\r\n  datasource: string;\r\n  thresholds?: any;\r\n\r\n  // non persisted\r\n  fullscreen: boolean;\r\n  isEditing: boolean;\r\n  hasRefreshed: boolean;\r\n  events: Emitter;\r\n\r\n  constructor(model) {\r\n    this.events = new Emitter();\r\n\r\n    // copy properties from persisted model\r\n    for (const property in model) {\r\n      this[property] = model[property];\r\n    }\r\n\r\n    // defaults\r\n    _.defaultsDeep(this, _.cloneDeep(defaults));\r\n  }\r\n\r\n  getSaveModel() {\r\n    const model: any = {};\r\n    for (const property in this) {\r\n      if (notPersistedProperties[property] || !this.hasOwnProperty(property)) {\r\n        continue;\r\n      }\r\n\r\n      if (_.isEqual(this[property], defaults[property])) {\r\n        continue;\r\n      }\r\n\r\n      model[property] = _.cloneDeep(this[property]);\r\n    }\r\n\r\n    return model;\r\n  }\r\n\r\n  setViewMode(fullscreen: boolean, isEditing: boolean) {\r\n    this.fullscreen = fullscreen;\r\n    this.isEditing = isEditing;\r\n    this.events.emit('panel-size-changed');\r\n  }\r\n\r\n  updateGridPos(newPos: GridPos) {\r\n    let sizeChanged = false;\r\n\r\n    if (this.gridPos.w !== newPos.w || this.gridPos.h !== newPos.h) {\r\n      sizeChanged = true;\r\n    }\r\n\r\n    this.gridPos.x = newPos.x;\r\n    this.gridPos.y = newPos.y;\r\n    this.gridPos.w = newPos.w;\r\n    this.gridPos.h = newPos.h;\r\n\r\n    if (sizeChanged) {\r\n      this.events.emit('panel-size-changed');\r\n    }\r\n  }\r\n\r\n  resizeDone() {\r\n    this.events.emit('panel-size-changed');\r\n  }\r\n\r\n  refresh() {\r\n    this.hasRefreshed = true;\r\n    this.events.emit('refresh');\r\n  }\r\n\r\n  render() {\r\n    if (!this.hasRefreshed) {\r\n      this.refresh();\r\n    } else {\r\n      this.events.emit('render');\r\n    }\r\n  }\r\n\r\n  panelInitialized() {\r\n    this.events.emit('panel-initialized');\r\n  }\r\n\r\n  initEditMode() {\r\n    this.events.emit('panel-init-edit-mode');\r\n  }\r\n\r\n  changeType(pluginId: string) {\r\n    this.type = pluginId;\r\n\r\n    delete this.thresholds;\r\n    delete this.alert;\r\n  }\r\n\r\n  destroy() {\r\n    this.events.removeAllListeners();\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport { PanelPlugin } from 'app/types/plugins';\r\n\r\nexport interface BuildInfo {\r\n  version: string;\r\n  commit: string;\r\n  isEnterprise: boolean;\r\n  env: string;\r\n}\r\n\r\nexport class Settings {\r\n  datasources: any;\r\n  panels: PanelPlugin[];\r\n  appSubUrl: string;\r\n  windowTitlePrefix: string;\r\n  buildInfo: BuildInfo;\r\n  newPanelTitle: string;\r\n  bootData: any;\r\n  externalUserMngLinkUrl: string;\r\n  externalUserMngLinkName: string;\r\n  externalUserMngInfo: string;\r\n  allowOrgCreate: boolean;\r\n  disableLoginForm: boolean;\r\n  defaultDatasource: string;\r\n  alertingEnabled: boolean;\r\n  alertingErrorOrTimeout: string;\r\n  alertingNoDataOrNullValues: string;\r\n  authProxyEnabled: boolean;\r\n  exploreEnabled: boolean;\r\n  ldapEnabled: boolean;\r\n  oauth: any;\r\n  disableUserSignUp: boolean;\r\n  loginHint: any;\r\n  loginError: any;\r\n\r\n  constructor(options) {\r\n    const defaults = {\r\n      datasources: {},\r\n      windowTitlePrefix: 'Grafana - ',\r\n      panels: {},\r\n      newPanelTitle: 'Panel Title',\r\n      playlist_timespan: '1m',\r\n      unsaved_changes_warning: true,\r\n      appSubUrl: '',\r\n      buildInfo: {\r\n        version: 'v1.0',\r\n        commit: '1',\r\n        env: 'production',\r\n        isEnterprise: false,\r\n      },\r\n    };\r\n\r\n    _.extend(this, defaults, options);\r\n  }\r\n}\r\n\r\nconst bootData = (window as any).grafanaBootData || { settings: {} };\r\nconst options = bootData.settings;\r\noptions.bootData = bootData;\r\n\r\nconst config = new Settings(options);\r\nexport default config;\r\n","/* ===================================================\r\n * bootstrap-transition.js v2.3.2\r\n * http://getbootstrap.com/2.3.2/javascript.html#transitions\r\n * ===================================================\r\n * Copyright 2013 Twitter, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================== */\r\n\r\n\r\n!function ($) {\r\n\r\n  \"use strict\"; // jshint ;_;\r\n\r\n\r\n  /* CSS TRANSITION SUPPORT (http://www.modernizr.com/)\r\n   * ======================================================= */\r\n\r\n  $(function () {\r\n\r\n    $.support.transition = (function () {\r\n\r\n      var transitionEnd = (function () {\r\n\r\n        var el = document.createElement('bootstrap')\r\n          , transEndEventNames = {\r\n               'WebkitTransition' : 'webkitTransitionEnd'\r\n            ,  'MozTransition'    : 'transitionend'\r\n            ,  'OTransition'      : 'oTransitionEnd otransitionend'\r\n            ,  'transition'       : 'transitionend'\r\n            }\r\n          , name\r\n\r\n        for (name in transEndEventNames){\r\n          if (el.style[name] !== undefined) {\r\n            return transEndEventNames[name]\r\n          }\r\n        }\r\n\r\n      }())\r\n\r\n      return transitionEnd && {\r\n        end: transitionEnd\r\n      }\r\n\r\n    })()\r\n\r\n  })\r\n\r\n}(window.jQuery);/* ==========================================================\r\n * bootstrap-alert.js v2.3.2\r\n * http://getbootstrap.com/2.3.2/javascript.html#alerts\r\n * ==========================================================\r\n * Copyright 2013 Twitter, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================== */\r\n\r\n\r\n!function ($) {\r\n\r\n  \"use strict\"; // jshint ;_;\r\n\r\n/* ============================================================\r\n * bootstrap-dropdown.js v2.3.2\r\n * http://getbootstrap.com/2.3.2/javascript.html#dropdowns\r\n * ============================================================\r\n * Copyright 2013 Twitter, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ============================================================ */\r\n\r\n\r\n /* DROPDOWN CLASS DEFINITION\r\n  * ========================= */\r\n\r\n  var toggle = '[data-toggle=dropdown]'\r\n    , Dropdown = function (element) {\r\n        var $el = $(element).on('click.dropdown.data-api', this.toggle)\r\n        $('html').on('click.dropdown.data-api', function () {\r\n          $el.parent().removeClass('open')\r\n        })\r\n      }\r\n\r\n  Dropdown.prototype = {\r\n\r\n    constructor: Dropdown\r\n\r\n  , toggle: function (e) {\r\n      var $this = $(this)\r\n        , $parent\r\n        , isActive\r\n\r\n      if ($this.is('.disabled, :disabled')) return\r\n\r\n      $parent = getParent($this)\r\n\r\n      isActive = $parent.hasClass('open')\r\n\r\n      clearMenus()\r\n\r\n      if (!isActive) {\r\n        if ('ontouchstart' in document.documentElement) {\r\n          // if mobile we we use a backdrop because click events don't delegate\r\n          $('<div class=\"dropdown-backdrop\"/>').insertBefore($(this)).on('click', clearMenus)\r\n        }\r\n        $parent.toggleClass('open')\r\n      }\r\n\r\n      $this.focus()\r\n\r\n      return false\r\n    }\r\n\r\n  , keydown: function (e) {\r\n      var $this\r\n        , $items\r\n        , $active\r\n        , $parent\r\n        , isActive\r\n        , index\r\n\r\n      if (!/(38|40|27)/.test(e.keyCode)) return\r\n\r\n      $this = $(this)\r\n\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      if ($this.is('.disabled, :disabled')) return\r\n\r\n      $parent = getParent($this)\r\n\r\n      isActive = $parent.hasClass('open')\r\n\r\n      if (!isActive || (isActive && e.keyCode == 27)) {\r\n        if (e.which == 27) $parent.find(toggle).focus()\r\n        return $this.click()\r\n      }\r\n\r\n      $items = $('[role=menu] li:not(.divider):visible a', $parent)\r\n\r\n      if (!$items.length) return\r\n\r\n      index = $items.index($items.filter(':focus'))\r\n\r\n      if (e.keyCode == 38 && index > 0) index--                                        // up\r\n      if (e.keyCode == 40 && index < $items.length - 1) index++                        // down\r\n      if (!~index) index = 0\r\n\r\n      $items\r\n        .eq(index)\r\n        .focus()\r\n    }\r\n\r\n  }\r\n\r\n  function clearMenus() {\r\n    $('.dropdown-backdrop').remove()\r\n    $(toggle).each(function () {\r\n      getParent($(this)).removeClass('open')\r\n    })\r\n  }\r\n\r\n  function getParent($this) {\r\n    var selector = $this.attr('data-target')\r\n      , $parent\r\n\r\n    if (!selector) {\r\n      selector = $this.attr('href')\r\n      // grafana backport fix from bootstrap 3\r\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\r\n    }\r\n\r\n    $parent = selector && $(selector)\r\n\r\n    if (!$parent || !$parent.length) $parent = $this.parent()\r\n\r\n    return $parent\r\n  }\r\n\r\n\r\n  /* DROPDOWN PLUGIN DEFINITION\r\n   * ========================== */\r\n\r\n  var old = $.fn.dropdown\r\n\r\n  $.fn.dropdown = function (option) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n        , data = $this.data('dropdown')\r\n      if (!data) $this.data('dropdown', (data = new Dropdown(this)))\r\n      if (typeof option == 'string') data[option].call($this)\r\n    })\r\n  }\r\n\r\n  $.fn.dropdown.Constructor = Dropdown\r\n\r\n\r\n /* DROPDOWN NO CONFLICT\r\n  * ==================== */\r\n\r\n  $.fn.dropdown.noConflict = function () {\r\n    $.fn.dropdown = old\r\n    return this\r\n  }\r\n\r\n\r\n  /* APPLY TO STANDARD DROPDOWN ELEMENTS\r\n   * =================================== */\r\n\r\n  $(document)\r\n    .on('click.dropdown.data-api', clearMenus)\r\n    .on('click.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\r\n    .on('click.dropdown.data-api'  , toggle, Dropdown.prototype.toggle)\r\n    .on('keydown.dropdown.data-api', toggle + ', [role=menu]' , Dropdown.prototype.keydown)\r\n\r\n}(window.jQuery);\r\n/* =========================================================\r\n * bootstrap-modal.js v2.3.2\r\n * http://getbootstrap.com/2.3.2/javascript.html#modals\r\n * =========================================================\r\n * Copyright 2013 Twitter, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================= */\r\n\r\n\r\n!function ($) {\r\n\r\n  \"use strict\"; // jshint ;_;\r\n\r\n\r\n /* MODAL CLASS DEFINITION\r\n  * ====================== */\r\n\r\n  var Modal = function (element, options) {\r\n    this.options = options\r\n    this.$element = $(element)\r\n      .delegate('[data-dismiss=\"modal\"]', 'click.dismiss.modal', $.proxy(this.hide, this))\r\n    this.options.remote && this.$element.find('.modal-body').load(this.options.remote)\r\n  }\r\n\r\n  Modal.prototype = {\r\n\r\n      constructor: Modal\r\n\r\n    , toggle: function () {\r\n        return this[!this.isShown ? 'show' : 'hide']()\r\n      }\r\n\r\n    , show: function () {\r\n        var that = this\r\n          , e = $.Event('show')\r\n\r\n        this.$element.trigger(e)\r\n\r\n        if (this.isShown || e.isDefaultPrevented()) return\r\n\r\n        this.isShown = true\r\n\r\n        this.escape()\r\n\r\n        this.backdrop(function () {\r\n          var transition = $.support.transition && that.$element.hasClass('fade')\r\n\r\n          if (!that.$element.parent().length) {\r\n            that.$element.appendTo(document.body) //don't move modals dom position\r\n          }\r\n\r\n          that.$element.show()\r\n\r\n          if (transition) {\r\n            that.$element[0].offsetWidth // force reflow\r\n          }\r\n\r\n          that.$element\r\n            .addClass('in')\r\n            .attr('aria-hidden', false)\r\n\r\n          that.enforceFocus()\r\n\r\n          transition ?\r\n            that.$element.one($.support.transition.end, function () { that.$element.focus().trigger('shown') }) :\r\n            that.$element.focus().trigger('shown')\r\n\r\n        })\r\n      }\r\n\r\n    , hide: function (e) {\r\n        e && e.preventDefault()\r\n\r\n        var that = this\r\n\r\n        e = $.Event('hide')\r\n\r\n        this.$element.trigger(e)\r\n\r\n        if (!this.isShown || e.isDefaultPrevented()) return\r\n\r\n        this.isShown = false\r\n\r\n        this.escape()\r\n\r\n        $(document).off('focusin.modal')\r\n\r\n        this.$element\r\n          .removeClass('in')\r\n          .attr('aria-hidden', true)\r\n\r\n        $.support.transition && this.$element.hasClass('fade') ?\r\n          this.hideWithTransition() :\r\n          this.hideModal()\r\n      }\r\n\r\n    , enforceFocus: function () {\r\n        var that = this\r\n        $(document).on('focusin.modal', function (e) {\r\n          if (that.$element[0] !== e.target && !that.$element.has(e.target).length) {\r\n            that.$element.focus()\r\n          }\r\n        })\r\n      }\r\n\r\n    , escape: function () {\r\n        var that = this\r\n        if (this.isShown && this.options.keyboard) {\r\n          this.$element.on('keyup.dismiss.modal', function ( e ) {\r\n            e.which == 27 && that.hide()\r\n          })\r\n        } else if (!this.isShown) {\r\n          this.$element.off('keyup.dismiss.modal')\r\n        }\r\n      }\r\n\r\n    , hideWithTransition: function () {\r\n        var that = this\r\n          , timeout = setTimeout(function () {\r\n              that.$element.off($.support.transition.end)\r\n              that.hideModal()\r\n            }, 500)\r\n\r\n        this.$element.one($.support.transition.end, function () {\r\n          clearTimeout(timeout)\r\n          that.hideModal()\r\n        })\r\n      }\r\n\r\n    , hideModal: function () {\r\n        var that = this\r\n        this.$element.hide()\r\n        this.backdrop(function () {\r\n          that.removeBackdrop()\r\n          that.$element.trigger('hidden')\r\n        })\r\n      }\r\n\r\n    , removeBackdrop: function () {\r\n        this.$backdrop && this.$backdrop.remove()\r\n        this.$backdrop = null\r\n      }\r\n\r\n    , backdrop: function (callback) {\r\n        var that = this\r\n          , animate = this.$element.hasClass('fade') ? 'fade' : ''\r\n\r\n        if (this.isShown && this.options.backdrop) {\r\n          var doAnimate = $.support.transition && animate\r\n\r\n          this.$backdrop = $('<div class=\"modal-backdrop ' + animate + '\" />')\r\n            .appendTo(document.body)\r\n\r\n          this.$backdrop.click(\r\n            this.options.backdrop == 'static' ?\r\n              $.proxy(this.$element[0].focus, this.$element[0])\r\n            : $.proxy(this.hide, this)\r\n          )\r\n\r\n          if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\r\n\r\n          this.$backdrop.addClass('in')\r\n\r\n          if (!callback) return\r\n\r\n          doAnimate ?\r\n            this.$backdrop.one($.support.transition.end, callback) :\r\n            callback()\r\n\r\n        } else if (!this.isShown && this.$backdrop) {\r\n          this.$backdrop.removeClass('in')\r\n\r\n          $.support.transition && this.$element.hasClass('fade')?\r\n            this.$backdrop.one($.support.transition.end, callback) :\r\n            callback()\r\n\r\n        } else if (callback) {\r\n          callback()\r\n        }\r\n      }\r\n  }\r\n\r\n\r\n /* MODAL PLUGIN DEFINITION\r\n  * ======================= */\r\n\r\n  var old = $.fn.modal\r\n\r\n  $.fn.modal = function (option) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n        , data = $this.data('modal')\r\n        , options = $.extend({}, $.fn.modal.defaults, $this.data(), typeof option == 'object' && option)\r\n      if (!data) $this.data('modal', (data = new Modal(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n      else if (options.show) data.show()\r\n    })\r\n  }\r\n\r\n  $.fn.modal.defaults = {\r\n      backdrop: true\r\n    , keyboard: true\r\n    , show: true\r\n  }\r\n\r\n  $.fn.modal.Constructor = Modal\r\n\r\n\r\n /* MODAL NO CONFLICT\r\n  * ================= */\r\n\r\n  $.fn.modal.noConflict = function () {\r\n    $.fn.modal = old\r\n    return this\r\n  }\r\n\r\n\r\n /* MODAL DATA-API\r\n  * ============== */\r\n\r\n  $(document).on('click.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\r\n    var $this = $(this)\r\n      , href = $this.attr('href')\r\n      , $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) //strip for ie7\r\n      , option = $target.data('modal') ? 'toggle' : $.extend({ remote:!/#/.test(href) && href }, $target.data(), $this.data())\r\n\r\n    e.preventDefault()\r\n\r\n    $target\r\n      .modal(option)\r\n      .one('hide', function () {\r\n        $this.focus()\r\n      })\r\n  })\r\n\r\n}(window.jQuery);\r\n/* ===========================================================\r\n * bootstrap-tooltip.js v2.3.2\r\n * http://getbootstrap.com/2.3.2/javascript.html#tooltips\r\n * Inspired by the original jQuery.tipsy by Jason Frame\r\n * ===========================================================\r\n * Copyright 2013 Twitter, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================== */\r\n\r\n\r\n!function ($) {\r\n\r\n  \"use strict\"; // jshint ;_;\r\n\r\n\r\n /* TOOLTIP PUBLIC CLASS DEFINITION\r\n  * =============================== */\r\n\r\n  var Tooltip = function (element, options) {\r\n    this.init('tooltip', element, options)\r\n  }\r\n\r\n  Tooltip.prototype = {\r\n\r\n    constructor: Tooltip\r\n\r\n  , init: function (type, element, options) {\r\n      var eventIn\r\n        , eventOut\r\n        , triggers\r\n        , trigger\r\n        , i\r\n\r\n      this.type = type\r\n      this.$element = $(element)\r\n      this.options = this.getOptions(options)\r\n      this.enabled = true\r\n\r\n      triggers = this.options.trigger.split(' ')\r\n\r\n      for (i = triggers.length; i--;) {\r\n        trigger = triggers[i]\r\n        if (trigger == 'click') {\r\n          this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\r\n        } else if (trigger != 'manual') {\r\n          eventIn = trigger == 'hover' ? 'mouseenter' : 'focus'\r\n          eventOut = trigger == 'hover' ? 'mouseleave' : 'blur'\r\n          this.$element.on(eventIn + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\r\n          this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\r\n        }\r\n      }\r\n\r\n      this.options.selector ?\r\n        (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\r\n        this.fixTitle()\r\n    }\r\n\r\n  , getOptions: function (options) {\r\n      options = $.extend({}, $.fn[this.type].defaults, this.$element.data(), options)\r\n\r\n      if (options.delay && typeof options.delay == 'number') {\r\n        options.delay = {\r\n          show: options.delay\r\n        , hide: options.delay\r\n        }\r\n      }\r\n\r\n      return options\r\n    }\r\n\r\n  , enter: function (e) {\r\n      var defaults = $.fn[this.type].defaults\r\n        , options = {}\r\n        , self\r\n\r\n      this._options && $.each(this._options, function (key, value) {\r\n        if (defaults[key] != value) options[key] = value\r\n      }, this)\r\n\r\n      self = $(e.currentTarget)[this.type](options).data(this.type)\r\n\r\n      if (!self.options.delay || !self.options.delay.show) return self.show()\r\n\r\n      clearTimeout(this.timeout)\r\n      self.hoverState = 'in'\r\n      this.timeout = setTimeout(function() {\r\n        if (self.hoverState == 'in') self.show()\r\n      }, self.options.delay.show)\r\n    }\r\n\r\n  , leave: function (e) {\r\n      var self = $(e.currentTarget)[this.type](this._options).data(this.type)\r\n\r\n      if (this.timeout) clearTimeout(this.timeout)\r\n      if (!self.options.delay || !self.options.delay.hide) return self.hide()\r\n\r\n      self.hoverState = 'out'\r\n      this.timeout = setTimeout(function() {\r\n        if (self.hoverState == 'out') self.hide()\r\n      }, self.options.delay.hide)\r\n    }\r\n\r\n  , show: function () {\r\n      var $tip\r\n        , pos\r\n        , actualWidth\r\n        , actualHeight\r\n        , placement\r\n        , tp\r\n        , e = $.Event('show')\r\n\r\n      if (this.hasContent() && this.enabled) {\r\n        this.$element.trigger(e)\r\n        if (e.isDefaultPrevented()) return\r\n        $tip = this.tip()\r\n        this.setContent()\r\n\r\n        if (this.options.animation) {\r\n          $tip.addClass('fade')\r\n        }\r\n\r\n        placement = typeof this.options.placement == 'function' ?\r\n          this.options.placement.call(this, $tip[0], this.$element[0]) :\r\n          this.options.placement\r\n\r\n        $tip\r\n          .detach()\r\n          .css({ top: 0, left: 0, display: 'block' })\r\n\r\n        this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\r\n\r\n        pos = this.getPosition()\r\n\r\n        actualWidth = $tip[0].offsetWidth\r\n        actualHeight = $tip[0].offsetHeight\r\n\r\n        switch (placement) {\r\n          case 'bottom':\r\n            tp = {top: pos.top + pos.height, left: pos.left + pos.width / 2 - actualWidth / 2}\r\n            break\r\n          case 'top':\r\n            tp = {top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2}\r\n            break\r\n          case 'left':\r\n            tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth}\r\n            break\r\n          case 'right':\r\n            tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width}\r\n            break\r\n\r\n          // extend placements (top)\r\n          case 'topLeft':\r\n            tp = {top: pos.top - actualHeight,  left: pos.left + pos.width / 2 - (actualWidth * .10)};\r\n            break;\r\n          case 'topRight':\r\n            tp = {top: pos.top - actualHeight, left: pos.left + pos.width / 2 - (actualWidth * .90)};\r\n            break;\r\n\r\n          // extend placements (right)\r\n          case 'rightTop':\r\n            tp = {top: pos.top + pos.height / 2 - (actualHeight *.10), left: pos.left + pos.width};\r\n            break;\r\n          case 'rightBottom':\r\n            tp = {top: pos.top + pos.height / 2 - (actualHeight * .90), left: pos.left + pos.width};\r\n            break;\r\n\r\n          // extend placements (bottom)\r\n          case 'bottomLeft':\r\n            tp = {top: pos.top + pos.height, left: pos.left + pos.width / 2 - (actualWidth * .10)};\r\n            break;\r\n          case 'bottomRight':\r\n            tp = {top: pos.top + pos.height, left: pos.left + pos.width / 2 - (actualWidth * .90)};\r\n            break;\r\n\r\n          // extend placements (left)\r\n          case 'leftTop':\r\n            tp = {top: pos.top + pos.height / 2 - (actualHeight *.10), left: pos.left - actualWidth};\r\n            break;\r\n          case 'leftBottom':\r\n            tp = {top: pos.top + pos.height / 2 - (actualHeight * .90), left: pos.left - actualWidth};\r\n            break;\r\n\r\n\r\n        }\r\n\r\n        this.applyPlacement(tp, placement)\r\n        this.$element.trigger('shown')\r\n      }\r\n    }\r\n\r\n  , applyPlacement: function(offset, placement){\r\n      var $tip = this.tip()\r\n        , width = $tip[0].offsetWidth\r\n        , height = $tip[0].offsetHeight\r\n        , actualWidth\r\n        , actualHeight\r\n        , delta\r\n        , replace\r\n\r\n      $tip\r\n        .offset(offset)\r\n        .addClass(placement)\r\n        .addClass('in')\r\n\r\n      actualWidth = $tip[0].offsetWidth\r\n      actualHeight = $tip[0].offsetHeight\r\n\r\n      if (placement == 'top' && actualHeight != height) {\r\n        offset.top = offset.top + height - actualHeight\r\n        replace = true\r\n      }\r\n\r\n      if (placement == 'bottom' || placement == 'top') {\r\n        delta = 0\r\n\r\n        if (offset.left < 0){\r\n          delta = offset.left * -2\r\n          offset.left = 0\r\n          $tip.offset(offset)\r\n          actualWidth = $tip[0].offsetWidth\r\n          actualHeight = $tip[0].offsetHeight\r\n        }\r\n\r\n        this.replaceArrow(delta - width + actualWidth, actualWidth, 'left')\r\n      } else {\r\n        this.replaceArrow(actualHeight - height, actualHeight, 'top')\r\n      }\r\n\r\n      if (replace) $tip.offset(offset)\r\n    }\r\n\r\n  , replaceArrow: function(delta, dimension, position){\r\n      this\r\n        .arrow()\r\n        .css(position, delta ? (50 * (1 - delta / dimension) + \"%\") : '')\r\n    }\r\n\r\n  , setContent: function () {\r\n      var $tip = this.tip()\r\n        , title = this.getTitle()\r\n\r\n      $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\r\n      $tip.removeClass('fade in top bottom left right')\r\n    }\r\n\r\n  , hide: function () {\r\n      var that = this\r\n        , $tip = this.tip()\r\n        , e = $.Event('hide')\r\n\r\n      this.$element.trigger(e)\r\n      if (e.isDefaultPrevented()) return\r\n\r\n      $tip.removeClass('in')\r\n\r\n      function removeWithAnimation() {\r\n        var timeout = setTimeout(function () {\r\n          $tip.off($.support.transition.end).detach()\r\n        }, 500)\r\n\r\n        $tip.one($.support.transition.end, function () {\r\n          clearTimeout(timeout)\r\n          $tip.detach()\r\n        })\r\n      }\r\n\r\n      $.support.transition && this.$tip.hasClass('fade') ?\r\n        removeWithAnimation() :\r\n        $tip.detach()\r\n\r\n      this.$element.trigger('hidden')\r\n\r\n      return this\r\n    }\r\n\r\n  , fixTitle: function () {\r\n      var $e = this.$element\r\n      if ($e.attr('title') || typeof($e.attr('data-original-title')) != 'string') {\r\n        $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\r\n      }\r\n    }\r\n\r\n  , hasContent: function () {\r\n      return this.getTitle()\r\n    }\r\n\r\n  , getPosition: function () {\r\n      var el = this.$element[0]\r\n      return $.extend({}, (typeof el.getBoundingClientRect == 'function') ? el.getBoundingClientRect() : {\r\n        width: el.offsetWidth\r\n      , height: el.offsetHeight\r\n      }, this.$element.offset())\r\n    }\r\n\r\n  , getTitle: function () {\r\n      var title\r\n        , $e = this.$element\r\n        , o = this.options\r\n\r\n      title = $e.attr('data-original-title')\r\n        || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\r\n\r\n      return title\r\n    }\r\n\r\n  , tip: function () {\r\n      return this.$tip = this.$tip || $(this.options.template)\r\n    }\r\n\r\n  , arrow: function(){\r\n      return this.$arrow = this.$arrow || this.tip().find(\".tooltip-arrow\")\r\n    }\r\n\r\n  , validate: function () {\r\n      if (!this.$element[0].parentNode) {\r\n        this.hide()\r\n        this.$element = null\r\n        this.options = null\r\n      }\r\n    }\r\n\r\n  , enable: function () {\r\n      this.enabled = true\r\n    }\r\n\r\n  , disable: function () {\r\n      this.enabled = false\r\n    }\r\n\r\n  , toggleEnabled: function () {\r\n      this.enabled = !this.enabled\r\n    }\r\n\r\n  , toggle: function (e) {\r\n      var self = e ? $(e.currentTarget)[this.type](this._options).data(this.type) : this\r\n      self.tip().hasClass('in') ? self.hide() : self.show()\r\n    }\r\n\r\n  , destroy: function () {\r\n      this.hide().$element.off('.' + this.type).removeData(this.type)\r\n    }\r\n\r\n  }\r\n\r\n\r\n /* TOOLTIP PLUGIN DEFINITION\r\n  * ========================= */\r\n\r\n  var old = $.fn.tooltip\r\n\r\n  $.fn.tooltip = function ( option ) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n        , data = $this.data('tooltip')\r\n        , options = typeof option == 'object' && option\r\n      if (!data) $this.data('tooltip', (data = new Tooltip(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  $.fn.tooltip.Constructor = Tooltip\r\n\r\n  $.fn.tooltip.defaults = {\r\n    animation: true\r\n  , placement: 'top'\r\n  , selector: false\r\n  , template: '<div class=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>'\r\n  , trigger: 'hover focus'\r\n  , title: ''\r\n  , delay: 0\r\n  , html: false\r\n  , container: false\r\n  }\r\n\r\n\r\n /* TOOLTIP NO CONFLICT\r\n  * =================== */\r\n\r\n  $.fn.tooltip.noConflict = function () {\r\n    $.fn.tooltip = old\r\n    return this\r\n  }\r\n\r\n}(window.jQuery);\r\n\r\n/* ========================================================\r\n * bootstrap-tab.js v2.3.2\r\n * http://getbootstrap.com/2.3.2/javascript.html#tabs\r\n * ========================================================\r\n * Copyright 2013 Twitter, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ======================================================== */\r\n\r\n\r\n!function ($) {\r\n\r\n  \"use strict\"; // jshint ;_;\r\n\r\n\r\n /* TAB CLASS DEFINITION\r\n  * ==================== */\r\n\r\n  var Tab = function (element) {\r\n    this.element = $(element)\r\n  }\r\n\r\n  Tab.prototype = {\r\n\r\n    constructor: Tab\r\n\r\n  , show: function () {\r\n      var $this = this.element\r\n        , $ul = $this.closest('ul:not(.dropdown-menu)')\r\n        , selector = $this.attr('data-target')\r\n        , previous\r\n        , $target\r\n        , e\r\n\r\n      if (!selector) {\r\n        selector = $this.attr('href')\r\n        selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\r\n      }\r\n\r\n      if ( $this.parent('li').hasClass('active') ) return\r\n\r\n      previous = $ul.find('.active:last a')[0]\r\n\r\n      e = $.Event('show', {\r\n        relatedTarget: previous\r\n      })\r\n\r\n      $this.trigger(e)\r\n\r\n      if (e.isDefaultPrevented()) return\r\n\r\n      $target = $(selector)\r\n\r\n      this.activate($this.parent('li'), $ul)\r\n      this.activate($target, $target.parent(), function () {\r\n        $this.trigger({\r\n          type: 'shown'\r\n        , relatedTarget: previous\r\n        })\r\n      })\r\n    }\r\n\r\n  , activate: function ( element, container, callback) {\r\n      var $active = container.find('> .active')\r\n        , transition = callback\r\n            && $.support.transition\r\n            && $active.hasClass('fade')\r\n\r\n      function next() {\r\n        $active\r\n          .removeClass('active')\r\n          .find('> .dropdown-menu > .active')\r\n          .removeClass('active')\r\n\r\n        element.addClass('active')\r\n\r\n        if (transition) {\r\n          element[0].offsetWidth // reflow for transition\r\n          element.addClass('in')\r\n        } else {\r\n          element.removeClass('fade')\r\n        }\r\n\r\n        if ( element.parent('.dropdown-menu') ) {\r\n          element.closest('li.dropdown').addClass('active')\r\n        }\r\n\r\n        callback && callback()\r\n      }\r\n\r\n      transition ?\r\n        $active.one($.support.transition.end, next) :\r\n        next()\r\n\r\n      $active.removeClass('in')\r\n    }\r\n  }\r\n\r\n\r\n /* TAB PLUGIN DEFINITION\r\n  * ===================== */\r\n\r\n  var old = $.fn.tab\r\n\r\n  $.fn.tab = function ( option ) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n        , data = $this.data('tab')\r\n      if (!data) $this.data('tab', (data = new Tab(this)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  $.fn.tab.Constructor = Tab\r\n\r\n\r\n /* TAB NO CONFLICT\r\n  * =============== */\r\n\r\n  $.fn.tab.noConflict = function () {\r\n    $.fn.tab = old\r\n    return this\r\n  }\r\n\r\n\r\n /* TAB DATA-API\r\n  * ============ */\r\n\r\n  $(document).on('click.tab.data-api', '[data-toggle=\"tab\"], [data-toggle=\"pill\"]', function (e) {\r\n    e.preventDefault()\r\n    $(this).tab('show')\r\n  })\r\n\r\n}(window.jQuery);/* =============================================================\r\n * bootstrap-typeahead.js v2.3.2\r\n * http://getbootstrap.com/2.3.2/javascript.html#typeahead\r\n * =============================================================\r\n * Copyright 2013 Twitter, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ============================================================ */\r\n\r\n\r\n!function($){\r\n\r\n  \"use strict\"; // jshint ;_;\r\n\r\n\r\n /* TYPEAHEAD PUBLIC CLASS DEFINITION\r\n  * ================================= */\r\n\r\n  var Typeahead = function (element, options) {\r\n    this.$element = $(element)\r\n    this.options = $.extend({}, $.fn.typeahead.defaults, options)\r\n    this.matcher = this.options.matcher || this.matcher\r\n    this.sorter = this.options.sorter || this.sorter\r\n    this.highlighter = this.options.highlighter || this.highlighter\r\n    this.updater = this.options.updater || this.updater\r\n    this.source = this.options.source\r\n    this.$menu = $(this.options.menu)\r\n    this.shown = false\r\n    this.listen()\r\n  }\r\n\r\n  Typeahead.prototype = {\r\n\r\n    constructor: Typeahead\r\n\r\n  , select: function () {\r\n    // CHANGE (rashidkpc) If nothing is selected, use existing value\r\n      var val = this.$menu.find('.active').attr('data-value') || this.$element.val();\r\n      this.$element\r\n        .val(this.updater(val))\r\n        .change()\r\n      return this.hide()\r\n    }\r\n\r\n  , updater: function (item) {\r\n      return item\r\n    }\r\n\r\n  , show: function () {\r\n      var pos = $.extend({}, this.$element.position(), {\r\n        height: this.$element[0].offsetHeight\r\n      })\r\n\r\n      this.$menu\r\n        .insertAfter(this.$element)\r\n        .css({\r\n          top: pos.top + pos.height\r\n        , left: pos.left\r\n        })\r\n        .show()\r\n\r\n      this.shown = true\r\n      return this\r\n    }\r\n\r\n  , hide: function () {\r\n      this.$menu.hide()\r\n      this.shown = false\r\n      return this\r\n    }\r\n\r\n  , lookup: function (event) {\r\n      var items\r\n\r\n      this.query = this.$element.val()\r\n\r\n      if (!this.query || this.query.length < this.options.minLength) {\r\n        return this.shown ? this.hide() : this\r\n      }\r\n\r\n      items = $.isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source\r\n\r\n      return items ? this.process(items) : this\r\n    }\r\n\r\n    , process: function (items) {\r\n      var that = this\r\n\r\n      items = $.grep(items, function (item) {\r\n        return that.matcher(item)\r\n      })\r\n\r\n      items = this.sorter(items)\r\n\r\n      if (!items.length) {\r\n        return this.shown ? this.hide() : this\r\n      }\r\n\r\n      return this.render(items.slice(0, this.options.items)).show()\r\n    }\r\n\r\n  , matcher: function (item) {\r\n      return ~item.toLowerCase().indexOf(this.query.toLowerCase())\r\n    }\r\n\r\n  , sorter: function (items) {\r\n      var beginswith = []\r\n        , caseSensitive = []\r\n        , caseInsensitive = []\r\n        , item\r\n\r\n      while (item = items.shift()) {\r\n        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(item)\r\n        else if (~item.indexOf(this.query)) caseSensitive.push(item)\r\n        else caseInsensitive.push(item)\r\n      }\r\n\r\n      return beginswith.concat(caseSensitive, caseInsensitive)\r\n    }\r\n\r\n  , highlighter: function (item) {\r\n      var query = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&')\r\n      if (!query) {\r\n        return item;\r\n      }\r\n      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {\r\n        return '<strong>' + match + '</strong>'\r\n      });\r\n    }\r\n\r\n  , render: function (items) {\r\n      var that = this\r\n\r\n      items = $(items).map(function (i, item) {\r\n        i = $(that.options.item).attr('data-value', item)\r\n        i.find('a').html(that.highlighter(item))\r\n        return i[0]\r\n      })\r\n\r\n      // CHANGE (rashidpc) Do not select first element by default\r\n      // items.first().addClass('active')\r\n      this.$menu.html(items)\r\n      return this\r\n    }\r\n\r\n  , next: function (event) {\r\n      var active = this.$menu.find('.active').removeClass('active')\r\n        , next = active.next()\r\n\r\n      if (!next.length) {\r\n        next = $(this.$menu.find('li')[0])\r\n      }\r\n\r\n      next.addClass('active')\r\n    }\r\n\r\n  , prev: function (event) {\r\n      var active = this.$menu.find('.active').removeClass('active')\r\n        , prev = active.prev()\r\n\r\n      if (!prev.length) {\r\n        prev = this.$menu.find('li').last()\r\n      }\r\n\r\n      prev.addClass('active')\r\n    }\r\n\r\n  , listen: function () {\r\n      this.$element\r\n        .on('focus',    $.proxy(this.focus, this))\r\n        .on('blur',     $.proxy(this.blur, this))\r\n        .on('keypress', $.proxy(this.keypress, this))\r\n        .on('keyup',    $.proxy(this.keyup, this))\r\n\r\n      if (this.eventSupported('keydown')) {\r\n        this.$element.on('keydown', $.proxy(this.keydown, this))\r\n      }\r\n\r\n      this.$menu\r\n        .on('click', $.proxy(this.click, this))\r\n        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))\r\n        .on('mouseleave', 'li', $.proxy(this.mouseleave, this))\r\n    },\r\n\r\n    destroy: function () {\r\n      this.$element.off().removeData('typeahead');\r\n      this.$menu.off();\r\n    }\r\n\r\n  , eventSupported: function(eventName) {\r\n      var isSupported = eventName in this.$element\r\n      if (!isSupported) {\r\n        this.$element.setAttribute(eventName, 'return;')\r\n        isSupported = typeof this.$element[eventName] === 'function'\r\n      }\r\n      return isSupported\r\n    }\r\n\r\n  , move: function (e) {\r\n      if (!this.shown) return\r\n\r\n      // grafana change, shift+left parenthesis\r\n      if (e.shiftKey && e.keyCode === 40) {\r\n        return;\r\n      }\r\n\r\n      switch(e.keyCode) {\r\n        case 9: // tab\r\n        case 13: // enter\r\n        case 27: // escape\r\n          e.preventDefault()\r\n          break\r\n\r\n        case 38: // up arrow\r\n          e.preventDefault()\r\n          this.prev()\r\n          break\r\n\r\n        case 40: // down arrow\r\n          e.preventDefault()\r\n          this.next()\r\n          break\r\n      }\r\n\r\n      e.stopPropagation()\r\n    }\r\n\r\n  , keydown: function (e) {\r\n      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40,38,9,13,27,57])\r\n      this.move(e)\r\n    }\r\n\r\n  , keypress: function (e) {\r\n      if (this.suppressKeyPressRepeat) return\r\n      this.move(e)\r\n    }\r\n\r\n  , keyup: function (e) {\r\n      switch(e.keyCode) {\r\n        case 40: // down arrow\r\n        case 38: // up arrow\r\n        case 16: // shift\r\n        case 17: // ctrl\r\n        case 18: // alt\r\n          break\r\n\r\n        case 9: // tab\r\n        case 13: // enter\r\n          if (!this.shown) return\r\n          this.select()\r\n          break\r\n\r\n        case 27: // escape\r\n          if (!this.shown) return\r\n          this.hide()\r\n          break\r\n\r\n        default:\r\n          this.lookup();\r\n      }\r\n\r\n      if(e.keyCode === 13 && typeof this.$menu.find('.active').attr('data-value') === 'undefined') {\r\n        // CHANGE (rashidkpc). Enter was hit, nothing was selected from typeahead, submit form\r\n        this.$element.submit();\r\n      } else {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n      }\r\n\r\n  }\r\n\r\n  , focus: function (e) {\r\n      this.focused = true\r\n    }\r\n\r\n  , blur: function (e) {\r\n      this.focused = false\r\n      if (!this.mousedover && this.shown) this.hide()\r\n    }\r\n\r\n  , click: function (e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      this.select()\r\n      this.$element.focus()\r\n    }\r\n\r\n  , mouseenter: function (e) {\r\n      this.mousedover = true\r\n      this.$menu.find('.active').removeClass('active')\r\n      $(e.currentTarget).addClass('active')\r\n    }\r\n\r\n  , mouseleave: function (e) {\r\n      this.mousedover = false\r\n      if (!this.focused && this.shown) this.hide()\r\n    }\r\n\r\n  }\r\n\r\n\r\n  /* TYPEAHEAD PLUGIN DEFINITION\r\n   * =========================== */\r\n\r\n  var old = $.fn.typeahead\r\n\r\n  $.fn.typeahead = function (option) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n        , data = $this.data('typeahead')\r\n        , options = typeof option == 'object' && option\r\n      if (!data) $this.data('typeahead', (data = new Typeahead(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  $.fn.typeahead.defaults = {\r\n    source: []\r\n  , items: 8\r\n  , menu: '<ul class=\"typeahead dropdown-menu\"></ul>'\r\n  , item: '<li><a href=\"#\"></a></li>'\r\n  , minLength: 1\r\n  }\r\n\r\n  $.fn.typeahead.Constructor = Typeahead\r\n\r\n\r\n /* TYPEAHEAD NO CONFLICT\r\n  * =================== */\r\n\r\n  $.fn.typeahead.noConflict = function () {\r\n    $.fn.typeahead = old\r\n    return this\r\n  }\r\n\r\n\r\n /* TYPEAHEAD DATA-API\r\n  * ================== */\r\n\r\n  $(document).on('focus.typeahead.data-api', '[data-provide=\"typeahead\"]', function (e) {\r\n    var $this = $(this)\r\n    if ($this.data('typeahead')) return\r\n    $this.typeahead($this.data())\r\n  })\r\n\r\n}(window.jQuery);\r\n/* ==========================================================\r\n * bootstrap-affix.js v2.3.2\r\n * http://getbootstrap.com/2.3.2/javascript.html#affix\r\n * ==========================================================\r\n * Copyright 2013 Twitter, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================== */\r\n\r\n\r\n!function ($) {\r\n\r\n  \"use strict\"; // jshint ;_;\r\n\r\n\r\n /* AFFIX CLASS DEFINITION\r\n  * ====================== */\r\n\r\n  var Affix = function (element, options) {\r\n    this.options = $.extend({}, $.fn.affix.defaults, options)\r\n    this.$window = $(window)\r\n      .on('scroll.affix.data-api', $.proxy(this.checkPosition, this))\r\n      .on('click.affix.data-api',  $.proxy(function () { setTimeout($.proxy(this.checkPosition, this), 1) }, this))\r\n    this.$element = $(element)\r\n    this.checkPosition()\r\n  }\r\n\r\n  Affix.prototype.checkPosition = function () {\r\n    if (!this.$element.is(':visible')) return\r\n\r\n    var scrollHeight = $(document).height()\r\n      , scrollTop = this.$window.scrollTop()\r\n      , position = this.$element.offset()\r\n      , offset = this.options.offset\r\n      , offsetBottom = offset.bottom\r\n      , offsetTop = offset.top\r\n      , reset = 'affix affix-top affix-bottom'\r\n      , affix\r\n\r\n    if (typeof offset != 'object') offsetBottom = offsetTop = offset\r\n    if (typeof offsetTop == 'function') offsetTop = offset.top()\r\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom()\r\n\r\n    affix = this.unpin != null && (scrollTop + this.unpin <= position.top) ?\r\n      false    : offsetBottom != null && (position.top + this.$element.height() >= scrollHeight - offsetBottom) ?\r\n      'bottom' : offsetTop != null && scrollTop <= offsetTop ?\r\n      'top'    : false\r\n\r\n    if (this.affixed === affix) return\r\n\r\n    this.affixed = affix\r\n    this.unpin = affix == 'bottom' ? position.top - scrollTop : null\r\n\r\n    this.$element.removeClass(reset).addClass('affix' + (affix ? '-' + affix : ''))\r\n  }\r\n\r\n\r\n /* AFFIX PLUGIN DEFINITION\r\n  * ======================= */\r\n\r\n  var old = $.fn.affix\r\n\r\n  $.fn.affix = function (option) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n        , data = $this.data('affix')\r\n        , options = typeof option == 'object' && option\r\n      if (!data) $this.data('affix', (data = new Affix(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  $.fn.affix.Constructor = Affix\r\n\r\n  $.fn.affix.defaults = {\r\n    offset: 0\r\n  }\r\n\r\n\r\n /* AFFIX NO CONFLICT\r\n  * ================= */\r\n\r\n  $.fn.affix.noConflict = function () {\r\n    $.fn.affix = old\r\n    return this\r\n  }\r\n\r\n\r\n /* AFFIX DATA-API\r\n  * ============== */\r\n\r\n  $(window).on('load', function () {\r\n    $('[data-spy=\"affix\"]').each(function () {\r\n      var $spy = $(this)\r\n        , data = $spy.data()\r\n\r\n      data.offset = data.offset || {}\r\n\r\n      data.offsetBottom && (data.offset.bottom = data.offsetBottom)\r\n      data.offsetTop && (data.offset.top = data.offsetTop)\r\n\r\n      $spy.affix(data)\r\n    })\r\n  })\r\n\r\n\r\n}(window.jQuery);\r\n","/*\r\n * angular-ui-bootstrap\r\n * http://angular-ui.github.io/bootstrap/\r\n\r\n * Version: 0.13.4 - 2015-09-03\r\n * License: MIT\r\n */\r\nangular.module(\"ui.bootstrap\", [\"ui.bootstrap.tpls\",\"ui.bootstrap.position\",\"ui.bootstrap.dateparser\",\"ui.bootstrap.datepicker\"]);\r\nangular.module(\"ui.bootstrap.tpls\", [\"template/datepicker/datepicker.html\",\"template/datepicker/day.html\",\"template/datepicker/month.html\",\"template/datepicker/popup.html\",\"template/datepicker/year.html\"]);\r\nangular.module('ui.bootstrap.position', [])\r\n\r\n/**\r\n * A set of utility methods that can be use to retrieve position of DOM elements.\r\n * It is meant to be used where we need to absolute-position DOM elements in\r\n * relation to other, existing elements (this is the case for tooltips, popovers,\r\n * typeahead suggestions etc.).\r\n */\r\n  .factory('$position', ['$document', '$window', function($document, $window) {\r\n    function getStyle(el, cssprop) {\r\n      if (el.currentStyle) { //IE\r\n        return el.currentStyle[cssprop];\r\n      } else if ($window.getComputedStyle) {\r\n        return $window.getComputedStyle(el)[cssprop];\r\n      }\r\n      // finally try and get inline style\r\n      return el.style[cssprop];\r\n    }\r\n\r\n    /**\r\n     * Checks if a given element is statically positioned\r\n     * @param element - raw DOM element\r\n     */\r\n    function isStaticPositioned(element) {\r\n      return (getStyle(element, 'position') || 'static' ) === 'static';\r\n    }\r\n\r\n    /**\r\n     * returns the closest, non-statically positioned parentOffset of a given element\r\n     * @param element\r\n     */\r\n    var parentOffsetEl = function(element) {\r\n      var docDomEl = $document[0];\r\n      var offsetParent = element.offsetParent || docDomEl;\r\n      while (offsetParent && offsetParent !== docDomEl && isStaticPositioned(offsetParent) ) {\r\n        offsetParent = offsetParent.offsetParent;\r\n      }\r\n      return offsetParent || docDomEl;\r\n    };\r\n\r\n    return {\r\n      /**\r\n       * Provides read-only equivalent of jQuery's position function:\r\n       * http://api.jquery.com/position/\r\n       */\r\n      position: function(element) {\r\n        var elBCR = this.offset(element);\r\n        var offsetParentBCR = { top: 0, left: 0 };\r\n        var offsetParentEl = parentOffsetEl(element[0]);\r\n        if (offsetParentEl != $document[0]) {\r\n          offsetParentBCR = this.offset(angular.element(offsetParentEl));\r\n          offsetParentBCR.top += offsetParentEl.clientTop - offsetParentEl.scrollTop;\r\n          offsetParentBCR.left += offsetParentEl.clientLeft - offsetParentEl.scrollLeft;\r\n        }\r\n\r\n        var boundingClientRect = element[0].getBoundingClientRect();\r\n        return {\r\n          width: boundingClientRect.width || element.prop('offsetWidth'),\r\n          height: boundingClientRect.height || element.prop('offsetHeight'),\r\n          top: elBCR.top - offsetParentBCR.top,\r\n          left: elBCR.left - offsetParentBCR.left\r\n        };\r\n      },\r\n\r\n      /**\r\n       * Provides read-only equivalent of jQuery's offset function:\r\n       * http://api.jquery.com/offset/\r\n       */\r\n      offset: function(element) {\r\n        var boundingClientRect = element[0].getBoundingClientRect();\r\n        return {\r\n          width: boundingClientRect.width || element.prop('offsetWidth'),\r\n          height: boundingClientRect.height || element.prop('offsetHeight'),\r\n          top: boundingClientRect.top + ($window.pageYOffset || $document[0].documentElement.scrollTop),\r\n          left: boundingClientRect.left + ($window.pageXOffset || $document[0].documentElement.scrollLeft)\r\n        };\r\n      },\r\n\r\n      /**\r\n       * Provides coordinates for the targetEl in relation to hostEl\r\n       */\r\n      positionElements: function(hostEl, targetEl, positionStr, appendToBody) {\r\n        var positionStrParts = positionStr.split('-');\r\n        var pos0 = positionStrParts[0], pos1 = positionStrParts[1] || 'center';\r\n\r\n        var hostElPos,\r\n          targetElWidth,\r\n          targetElHeight,\r\n          targetElPos;\r\n\r\n        hostElPos = appendToBody ? this.offset(hostEl) : this.position(hostEl);\r\n\r\n        targetElWidth = targetEl.prop('offsetWidth');\r\n        targetElHeight = targetEl.prop('offsetHeight');\r\n\r\n        var shiftWidth = {\r\n          center: function() {\r\n            return hostElPos.left + hostElPos.width / 2 - targetElWidth / 2;\r\n          },\r\n          left: function() {\r\n            return hostElPos.left;\r\n          },\r\n          right: function() {\r\n            return hostElPos.left + hostElPos.width;\r\n          }\r\n        };\r\n\r\n        var shiftHeight = {\r\n          center: function() {\r\n            return hostElPos.top + hostElPos.height / 2 - targetElHeight / 2;\r\n          },\r\n          top: function() {\r\n            return hostElPos.top;\r\n          },\r\n          bottom: function() {\r\n            return hostElPos.top + hostElPos.height;\r\n          }\r\n        };\r\n\r\n        switch (pos0) {\r\n          case 'right':\r\n            targetElPos = {\r\n              top: shiftHeight[pos1](),\r\n              left: shiftWidth[pos0]()\r\n            };\r\n            break;\r\n          case 'left':\r\n            targetElPos = {\r\n              top: shiftHeight[pos1](),\r\n              left: hostElPos.left - targetElWidth\r\n            };\r\n            break;\r\n          case 'bottom':\r\n            targetElPos = {\r\n              top: shiftHeight[pos0](),\r\n              left: shiftWidth[pos1]()\r\n            };\r\n            break;\r\n          default:\r\n            targetElPos = {\r\n              top: hostElPos.top - targetElHeight,\r\n              left: shiftWidth[pos1]()\r\n            };\r\n            break;\r\n        }\r\n\r\n        return targetElPos;\r\n      }\r\n    };\r\n  }]);\r\n\r\nangular.module('ui.bootstrap.dateparser', [])\r\n\r\n.service('dateParser', ['$log', '$locale', 'orderByFilter', function($log, $locale, orderByFilter) {\r\n  // Pulled from https://github.com/mbostock/d3/blob/master/src/format/requote.js\r\n  var SPECIAL_CHARACTERS_REGEXP = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\r\n\r\n  this.parsers = {};\r\n\r\n  var formatCodeToRegex = {\r\n    'yyyy': {\r\n      regex: '\\\\d{4}',\r\n      apply: function(value) { this.year = +value; }\r\n    },\r\n    'yy': {\r\n      regex: '\\\\d{2}',\r\n      apply: function(value) { this.year = +value + 2000; }\r\n    },\r\n    'y': {\r\n      regex: '\\\\d{1,4}',\r\n      apply: function(value) { this.year = +value; }\r\n    },\r\n    'MMMM': {\r\n      regex: $locale.DATETIME_FORMATS.MONTH.join('|'),\r\n      apply: function(value) { this.month = $locale.DATETIME_FORMATS.MONTH.indexOf(value); }\r\n    },\r\n    'MMM': {\r\n      regex: $locale.DATETIME_FORMATS.SHORTMONTH.join('|'),\r\n      apply: function(value) { this.month = $locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value); }\r\n    },\r\n    'MM': {\r\n      regex: '0[1-9]|1[0-2]',\r\n      apply: function(value) { this.month = value - 1; }\r\n    },\r\n    'M': {\r\n      regex: '[1-9]|1[0-2]',\r\n      apply: function(value) { this.month = value - 1; }\r\n    },\r\n    'dd': {\r\n      regex: '[0-2][0-9]{1}|3[0-1]{1}',\r\n      apply: function(value) { this.date = +value; }\r\n    },\r\n    'd': {\r\n      regex: '[1-2]?[0-9]{1}|3[0-1]{1}',\r\n      apply: function(value) { this.date = +value; }\r\n    },\r\n    'EEEE': {\r\n      regex: $locale.DATETIME_FORMATS.DAY.join('|')\r\n    },\r\n    'EEE': {\r\n      regex: $locale.DATETIME_FORMATS.SHORTDAY.join('|')\r\n    },\r\n    'HH': {\r\n      regex: '(?:0|1)[0-9]|2[0-3]',\r\n      apply: function(value) { this.hours = +value; }\r\n    },\r\n    'hh': {\r\n      regex: '0[0-9]|1[0-2]',\r\n      apply: function(value) { this.hours = +value; }\r\n    },\r\n    'H': {\r\n      regex: '1?[0-9]|2[0-3]',\r\n      apply: function(value) { this.hours = +value; }\r\n    },\r\n    'h': {\r\n      regex: '[0-9]|1[0-2]',\r\n      apply: function(value) { this.hours = +value; }\r\n    },\r\n    'mm': {\r\n      regex: '[0-5][0-9]',\r\n      apply: function(value) { this.minutes = +value; }\r\n    },\r\n    'm': {\r\n      regex: '[0-9]|[1-5][0-9]',\r\n      apply: function(value) { this.minutes = +value; }\r\n    },\r\n    'sss': {\r\n      regex: '[0-9][0-9][0-9]',\r\n      apply: function(value) { this.milliseconds = +value; }\r\n    },\r\n    'ss': {\r\n      regex: '[0-5][0-9]',\r\n      apply: function(value) { this.seconds = +value; }\r\n    },\r\n    's': {\r\n      regex: '[0-9]|[1-5][0-9]',\r\n      apply: function(value) { this.seconds = +value; }\r\n    },\r\n    'a': {\r\n      regex: $locale.DATETIME_FORMATS.AMPMS.join('|'),\r\n      apply: function(value) {\r\n        if (this.hours === 12) {\r\n          this.hours = 0;\r\n        }\r\n\r\n        if (value === 'PM') {\r\n          this.hours += 12;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  function createParser(format) {\r\n    var map = [], regex = format.split('');\r\n\r\n    angular.forEach(formatCodeToRegex, function(data, code) {\r\n      var index = format.indexOf(code);\r\n\r\n      if (index > -1) {\r\n        format = format.split('');\r\n\r\n        regex[index] = '(' + data.regex + ')';\r\n        format[index] = '$'; // Custom symbol to define consumed part of format\r\n        for (var i = index + 1, n = index + code.length; i < n; i++) {\r\n          regex[i] = '';\r\n          format[i] = '$';\r\n        }\r\n        format = format.join('');\r\n\r\n        map.push({ index: index, apply: data.apply });\r\n      }\r\n    });\r\n\r\n    return {\r\n      regex: new RegExp('^' + regex.join('') + '$'),\r\n      map: orderByFilter(map, 'index')\r\n    };\r\n  }\r\n\r\n  this.parse = function(input, format, baseDate) {\r\n    if (!angular.isString(input) || !format) {\r\n      return input;\r\n    }\r\n\r\n    format = $locale.DATETIME_FORMATS[format] || format;\r\n    format = format.replace(SPECIAL_CHARACTERS_REGEXP, '\\\\$&');\r\n\r\n    if (!this.parsers[format]) {\r\n      this.parsers[format] = createParser(format);\r\n    }\r\n\r\n    var parser = this.parsers[format],\r\n        regex = parser.regex,\r\n        map = parser.map,\r\n        results = input.match(regex);\r\n\r\n    if (results && results.length) {\r\n      var fields, dt;\r\n      if (angular.isDate(baseDate) && !isNaN(baseDate.getTime())) {\r\n        fields = {\r\n          year: baseDate.getFullYear(),\r\n          month: baseDate.getMonth(),\r\n          date: baseDate.getDate(),\r\n          hours: baseDate.getHours(),\r\n          minutes: baseDate.getMinutes(),\r\n          seconds: baseDate.getSeconds(),\r\n          milliseconds: baseDate.getMilliseconds()\r\n        };\r\n      } else {\r\n        if (baseDate) {\r\n          $log.warn('dateparser:', 'baseDate is not a valid date');\r\n        }\r\n        fields = { year: 1900, month: 0, date: 1, hours: 0, minutes: 0, seconds: 0, milliseconds: 0 };\r\n      }\r\n\r\n      for (var i = 1, n = results.length; i < n; i++) {\r\n        var mapper = map[i-1];\r\n        if (mapper.apply) {\r\n          mapper.apply.call(fields, results[i]);\r\n        }\r\n      }\r\n\r\n      if (isValid(fields.year, fields.month, fields.date)) {\r\n        dt = new Date(fields.year, fields.month, fields.date,\r\n          fields.hours, fields.minutes, fields.seconds,\r\n          fields.milliseconds || 0);\r\n      }\r\n\r\n      return dt;\r\n    }\r\n  };\r\n\r\n  // Check if date is valid for specific month (and year for February).\r\n  // Month: 0 = Jan, 1 = Feb, etc\r\n  function isValid(year, month, date) {\r\n    if (date < 1) {\r\n      return false;\r\n    }\r\n\r\n    if (month === 1 && date > 28) {\r\n      return date === 29 && ((year % 4 === 0 && year % 100 !== 0) || year % 400 === 0);\r\n    }\r\n\r\n    if (month === 3 || month === 5 || month === 8 || month === 10) {\r\n      return date < 31;\r\n    }\r\n\r\n    return true;\r\n  }\r\n}]);\r\n\r\nangular.module('ui.bootstrap.datepicker', ['ui.bootstrap.dateparser', 'ui.bootstrap.position'])\r\n\r\n.value('$datepickerSuppressError', false)\r\n\r\n.constant('datepickerConfig', {\r\n  formatDay: 'dd',\r\n  formatMonth: 'MMMM',\r\n  formatYear: 'yyyy',\r\n  formatDayHeader: 'EEE',\r\n  formatDayTitle: 'MMMM yyyy',\r\n  formatMonthTitle: 'yyyy',\r\n  datepickerMode: 'day',\r\n  minMode: 'day',\r\n  maxMode: 'year',\r\n  showWeeks: true,\r\n  startingDay: 0,\r\n  yearRange: 20,\r\n  minDate: null,\r\n  maxDate: null,\r\n  shortcutPropagation: false\r\n})\r\n\r\n.controller('DatepickerController', ['$scope', '$attrs', '$parse', '$interpolate', '$log', 'dateFilter', 'datepickerConfig', '$datepickerSuppressError', function($scope, $attrs, $parse, $interpolate, $log, dateFilter, datepickerConfig, $datepickerSuppressError) {\r\n  var self = this,\r\n      ngModelCtrl = { $setViewValue: angular.noop }; // nullModelCtrl;\r\n\r\n  // Modes chain\r\n  this.modes = ['day', 'month', 'year'];\r\n\r\n  // Configuration attributes\r\n  angular.forEach(['formatDay', 'formatMonth', 'formatYear', 'formatDayHeader', 'formatDayTitle', 'formatMonthTitle',\r\n                   'showWeeks', 'startingDay', 'yearRange', 'shortcutPropagation'], function(key, index) {\r\n    self[key] = angular.isDefined($attrs[key]) ? (index < 6 ? $interpolate($attrs[key])($scope.$parent) : $scope.$parent.$eval($attrs[key])) : datepickerConfig[key];\r\n  });\r\n\r\n  // Watchable date attributes\r\n  angular.forEach(['minDate', 'maxDate'], function(key) {\r\n    if ($attrs[key]) {\r\n      $scope.$parent.$watch($parse($attrs[key]), function(value) {\r\n        self[key] = value ? new Date(value) : null;\r\n        self.refreshView();\r\n      });\r\n    } else {\r\n      self[key] = datepickerConfig[key] ? new Date(datepickerConfig[key]) : null;\r\n    }\r\n  });\r\n\r\n  angular.forEach(['minMode', 'maxMode'], function(key) {\r\n    if ($attrs[key]) {\r\n      $scope.$parent.$watch($parse($attrs[key]), function(value) {\r\n        self[key] = angular.isDefined(value) ? value : $attrs[key];\r\n        $scope[key] = self[key];\r\n        if ((key == 'minMode' && self.modes.indexOf($scope.datepickerMode) < self.modes.indexOf(self[key])) || (key == 'maxMode' && self.modes.indexOf($scope.datepickerMode) > self.modes.indexOf(self[key]))) {\r\n          $scope.datepickerMode = self[key];\r\n        }\r\n      });\r\n    } else {\r\n      self[key] = datepickerConfig[key] || null;\r\n      $scope[key] = self[key];\r\n    }\r\n  });\r\n\r\n  $scope.datepickerMode = $scope.datepickerMode || datepickerConfig.datepickerMode;\r\n  $scope.uniqueId = 'datepicker-' + $scope.$id + '-' + Math.floor(Math.random() * 10000);\r\n\r\n  if (angular.isDefined($attrs.initDate)) {\r\n    this.activeDate = $scope.$parent.$eval($attrs.initDate) || new Date();\r\n    $scope.$parent.$watch($attrs.initDate, function(initDate) {\r\n      if (initDate && (ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue) || ngModelCtrl.$invalid)) {\r\n        self.activeDate = initDate;\r\n        self.refreshView();\r\n      }\r\n    });\r\n  } else {\r\n    this.activeDate = new Date();\r\n  }\r\n\r\n  $scope.isActive = function(dateObject) {\r\n    if (self.compare(dateObject.date, self.activeDate) === 0) {\r\n      $scope.activeDateId = dateObject.uid;\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  this.init = function(ngModelCtrl_) {\r\n    ngModelCtrl = ngModelCtrl_;\r\n\r\n    ngModelCtrl.$render = function() {\r\n      self.render();\r\n    };\r\n  };\r\n\r\n  this.render = function() {\r\n    if (ngModelCtrl.$viewValue) {\r\n      var date = new Date(ngModelCtrl.$viewValue),\r\n          isValid = !isNaN(date);\r\n\r\n      if (isValid) {\r\n        this.activeDate = date;\r\n      } else if (!$datepickerSuppressError) {\r\n        $log.error('Datepicker directive: \"ng-model\" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');\r\n      }\r\n    }\r\n    this.refreshView();\r\n  };\r\n\r\n  this.refreshView = function() {\r\n    if (this.element) {\r\n      this._refreshView();\r\n\r\n      var date = ngModelCtrl.$viewValue ? new Date(ngModelCtrl.$viewValue) : null;\r\n      ngModelCtrl.$setValidity('dateDisabled', !date || (this.element && !this.isDisabled(date)));\r\n    }\r\n  };\r\n\r\n  this.createDateObject = function(date, format) {\r\n    var model = ngModelCtrl.$viewValue ? new Date(ngModelCtrl.$viewValue) : null;\r\n    return {\r\n      date: date,\r\n      label: dateFilter(date, format),\r\n      selected: model && this.compare(date, model) === 0,\r\n      disabled: this.isDisabled(date),\r\n      current: this.compare(date, new Date()) === 0,\r\n      customClass: this.customClass(date)\r\n    };\r\n  };\r\n\r\n  this.isDisabled = function(date) {\r\n    return ((this.minDate && this.compare(date, this.minDate) < 0) || (this.maxDate && this.compare(date, this.maxDate) > 0) || ($attrs.dateDisabled && $scope.dateDisabled({date: date, mode: $scope.datepickerMode})));\r\n  };\r\n\r\n  this.customClass = function(date) {\r\n    return $scope.customClass({date: date, mode: $scope.datepickerMode});\r\n  };\r\n\r\n  // Split array into smaller arrays\r\n  this.split = function(arr, size) {\r\n    var arrays = [];\r\n    while (arr.length > 0) {\r\n      arrays.push(arr.splice(0, size));\r\n    }\r\n    return arrays;\r\n  };\r\n\r\n  // Fix a hard-reprodusible bug with timezones\r\n  // The bug depends on OS, browser, current timezone and current date\r\n  // i.e.\r\n  // var date = new Date(2014, 0, 1);\r\n  // console.log(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours());\r\n  // can result in \"2013 11 31 23\" because of the bug.\r\n  this.fixTimeZone = function(date) {\r\n    var hours = date.getHours();\r\n    date.setHours(hours === 23 ? hours + 2 : 0);\r\n  };\r\n\r\n  $scope.select = function(date) {\r\n    if ($scope.datepickerMode === self.minMode) {\r\n      var dt = ngModelCtrl.$viewValue ? new Date(ngModelCtrl.$viewValue) : new Date(0, 0, 0, 0, 0, 0, 0);\r\n      dt.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n      ngModelCtrl.$setViewValue(dt);\r\n      ngModelCtrl.$render();\r\n    } else {\r\n      self.activeDate = date;\r\n      $scope.datepickerMode = self.modes[self.modes.indexOf($scope.datepickerMode) - 1];\r\n    }\r\n  };\r\n\r\n  $scope.move = function(direction) {\r\n    var year = self.activeDate.getFullYear() + direction * (self.step.years || 0),\r\n        month = self.activeDate.getMonth() + direction * (self.step.months || 0);\r\n    self.activeDate.setFullYear(year, month, 1);\r\n    self.refreshView();\r\n  };\r\n\r\n  $scope.toggleMode = function(direction) {\r\n    direction = direction || 1;\r\n\r\n    if (($scope.datepickerMode === self.maxMode && direction === 1) || ($scope.datepickerMode === self.minMode && direction === -1)) {\r\n      return;\r\n    }\r\n\r\n    $scope.datepickerMode = self.modes[self.modes.indexOf($scope.datepickerMode) + direction];\r\n  };\r\n\r\n  // Key event mapper\r\n  $scope.keys = { 13: 'enter', 32: 'space', 33: 'pageup', 34: 'pagedown', 35: 'end', 36: 'home', 37: 'left', 38: 'up', 39: 'right', 40: 'down' };\r\n\r\n  var focusElement = function() {\r\n    self.element[0].focus();\r\n  };\r\n\r\n  // Listen for focus requests from popup directive\r\n  $scope.$on('datepicker.focus', focusElement);\r\n\r\n  $scope.keydown = function(evt) {\r\n    var key = $scope.keys[evt.which];\r\n\r\n    if (!key || evt.shiftKey || evt.altKey) {\r\n      return;\r\n    }\r\n\r\n    evt.preventDefault();\r\n    if (!self.shortcutPropagation) {\r\n      evt.stopPropagation();\r\n    }\r\n\r\n    if (key === 'enter' || key === 'space') {\r\n      if (self.isDisabled(self.activeDate)) {\r\n        return; // do nothing\r\n      }\r\n      $scope.select(self.activeDate);\r\n      focusElement();\r\n    } else if (evt.ctrlKey && (key === 'up' || key === 'down')) {\r\n      $scope.toggleMode(key === 'up' ? 1 : -1);\r\n      focusElement();\r\n    } else {\r\n      self.handleKeyDown(key, evt);\r\n      self.refreshView();\r\n    }\r\n  };\r\n}])\r\n\r\n.directive('datepicker', function() {\r\n  return {\r\n    restrict: 'EA',\r\n    replace: true,\r\n    templateUrl: function(element, attrs) {\r\n      return attrs.templateUrl || 'template/datepicker/datepicker.html';\r\n    },\r\n    scope: {\r\n      datepickerMode: '=?',\r\n      dateDisabled: '&',\r\n      customClass: '&',\r\n      shortcutPropagation: '&?'\r\n    },\r\n    require: ['datepicker', '^ngModel'],\r\n    controller: 'DatepickerController',\r\n    controllerAs: 'datepicker',\r\n    link: function(scope, element, attrs, ctrls) {\r\n      var datepickerCtrl = ctrls[0], ngModelCtrl = ctrls[1];\r\n\r\n      datepickerCtrl.init(ngModelCtrl);\r\n    }\r\n  };\r\n})\r\n\r\n.directive('daypicker', ['dateFilter', function(dateFilter) {\r\n  return {\r\n    restrict: 'EA',\r\n    replace: true,\r\n    templateUrl: 'template/datepicker/day.html',\r\n    require: '^datepicker',\r\n    link: function(scope, element, attrs, ctrl) {\r\n      scope.showWeeks = ctrl.showWeeks;\r\n\r\n      ctrl.step = { months: 1 };\r\n      ctrl.element = element;\r\n\r\n      var DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n      function getDaysInMonth(year, month) {\r\n        return ((month === 1) && (year % 4 === 0) && ((year % 100 !== 0) || (year % 400 === 0))) ? 29 : DAYS_IN_MONTH[month];\r\n      }\r\n\r\n      function getDates(startDate, n) {\r\n        var dates = new Array(n), current = new Date(startDate), i = 0, date;\r\n        while (i < n) {\r\n          date = new Date(current);\r\n          ctrl.fixTimeZone(date);\r\n          dates[i++] = date;\r\n          current.setDate(current.getDate() + 1);\r\n        }\r\n        return dates;\r\n      }\r\n\r\n      ctrl._refreshView = function() {\r\n        var year = ctrl.activeDate.getFullYear(),\r\n          month = ctrl.activeDate.getMonth(),\r\n          firstDayOfMonth = new Date(year, month, 1),\r\n          difference = ctrl.startingDay - firstDayOfMonth.getDay(),\r\n          numDisplayedFromPreviousMonth = (difference > 0) ? 7 - difference : - difference,\r\n          firstDate = new Date(firstDayOfMonth);\r\n\r\n        if (numDisplayedFromPreviousMonth > 0) {\r\n          firstDate.setDate(-numDisplayedFromPreviousMonth + 1);\r\n        }\r\n\r\n        // 42 is the number of days on a six-month calendar\r\n        var days = getDates(firstDate, 42);\r\n        for (var i = 0; i < 42; i ++) {\r\n          days[i] = angular.extend(ctrl.createDateObject(days[i], ctrl.formatDay), {\r\n            secondary: days[i].getMonth() !== month,\r\n            uid: scope.uniqueId + '-' + i\r\n          });\r\n        }\r\n\r\n        scope.labels = new Array(7);\r\n        for (var j = 0; j < 7; j++) {\r\n          scope.labels[j] = {\r\n            abbr: dateFilter(days[j].date, ctrl.formatDayHeader),\r\n            full: dateFilter(days[j].date, 'EEEE')\r\n          };\r\n        }\r\n\r\n        scope.title = dateFilter(ctrl.activeDate, ctrl.formatDayTitle);\r\n        scope.rows = ctrl.split(days, 7);\r\n\r\n        if (scope.showWeeks) {\r\n          scope.weekNumbers = [];\r\n          var thursdayIndex = (4 + 7 - ctrl.startingDay) % 7,\r\n              numWeeks = scope.rows.length;\r\n          for (var curWeek = 0; curWeek < numWeeks; curWeek++) {\r\n            scope.weekNumbers.push(\r\n              getISO8601WeekNumber(scope.rows[curWeek][thursdayIndex].date));\r\n          }\r\n        }\r\n      };\r\n\r\n      ctrl.compare = function(date1, date2) {\r\n        return (new Date(date1.getFullYear(), date1.getMonth(), date1.getDate()) - new Date(date2.getFullYear(), date2.getMonth(), date2.getDate()));\r\n      };\r\n\r\n      function getISO8601WeekNumber(date) {\r\n        var checkDate = new Date(date);\r\n        checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7)); // Thursday\r\n        var time = checkDate.getTime();\r\n        checkDate.setMonth(0); // Compare with Jan 1\r\n        checkDate.setDate(1);\r\n        return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;\r\n      }\r\n\r\n      ctrl.handleKeyDown = function(key, evt) {\r\n        var date = ctrl.activeDate.getDate();\r\n\r\n        if (key === 'left') {\r\n          date = date - 1;   // up\r\n        } else if (key === 'up') {\r\n          date = date - 7;   // down\r\n        } else if (key === 'right') {\r\n          date = date + 1;   // down\r\n        } else if (key === 'down') {\r\n          date = date + 7;\r\n        } else if (key === 'pageup' || key === 'pagedown') {\r\n          var month = ctrl.activeDate.getMonth() + (key === 'pageup' ? - 1 : 1);\r\n          ctrl.activeDate.setMonth(month, 1);\r\n          date = Math.min(getDaysInMonth(ctrl.activeDate.getFullYear(), ctrl.activeDate.getMonth()), date);\r\n        } else if (key === 'home') {\r\n          date = 1;\r\n        } else if (key === 'end') {\r\n          date = getDaysInMonth(ctrl.activeDate.getFullYear(), ctrl.activeDate.getMonth());\r\n        }\r\n        ctrl.activeDate.setDate(date);\r\n      };\r\n\r\n      ctrl.refreshView();\r\n    }\r\n  };\r\n}])\r\n\r\n.directive('monthpicker', ['dateFilter', function(dateFilter) {\r\n  return {\r\n    restrict: 'EA',\r\n    replace: true,\r\n    templateUrl: 'template/datepicker/month.html',\r\n    require: '^datepicker',\r\n    link: function(scope, element, attrs, ctrl) {\r\n      ctrl.step = { years: 1 };\r\n      ctrl.element = element;\r\n\r\n      ctrl._refreshView = function() {\r\n        var months = new Array(12),\r\n            year = ctrl.activeDate.getFullYear(),\r\n            date;\r\n\r\n        for (var i = 0; i < 12; i++) {\r\n          date = new Date(year, i, 1);\r\n          ctrl.fixTimeZone(date);\r\n          months[i] = angular.extend(ctrl.createDateObject(date, ctrl.formatMonth), {\r\n            uid: scope.uniqueId + '-' + i\r\n          });\r\n        }\r\n\r\n        scope.title = dateFilter(ctrl.activeDate, ctrl.formatMonthTitle);\r\n        scope.rows = ctrl.split(months, 3);\r\n      };\r\n\r\n      ctrl.compare = function(date1, date2) {\r\n        return new Date(date1.getFullYear(), date1.getMonth()) - new Date(date2.getFullYear(), date2.getMonth());\r\n      };\r\n\r\n      ctrl.handleKeyDown = function(key, evt) {\r\n        var date = ctrl.activeDate.getMonth();\r\n\r\n        if (key === 'left') {\r\n          date = date - 1;   // up\r\n        } else if (key === 'up') {\r\n          date = date - 3;   // down\r\n        } else if (key === 'right') {\r\n          date = date + 1;   // down\r\n        } else if (key === 'down') {\r\n          date = date + 3;\r\n        } else if (key === 'pageup' || key === 'pagedown') {\r\n          var year = ctrl.activeDate.getFullYear() + (key === 'pageup' ? - 1 : 1);\r\n          ctrl.activeDate.setFullYear(year);\r\n        } else if (key === 'home') {\r\n          date = 0;\r\n        } else if (key === 'end') {\r\n          date = 11;\r\n        }\r\n        ctrl.activeDate.setMonth(date);\r\n      };\r\n\r\n      ctrl.refreshView();\r\n    }\r\n  };\r\n}])\r\n\r\n.directive('yearpicker', ['dateFilter', function(dateFilter) {\r\n  return {\r\n    restrict: 'EA',\r\n    replace: true,\r\n    templateUrl: 'template/datepicker/year.html',\r\n    require: '^datepicker',\r\n    link: function(scope, element, attrs, ctrl) {\r\n      var range = ctrl.yearRange;\r\n\r\n      ctrl.step = { years: range };\r\n      ctrl.element = element;\r\n\r\n      function getStartingYear( year ) {\r\n        return parseInt((year - 1) / range, 10) * range + 1;\r\n      }\r\n\r\n      ctrl._refreshView = function() {\r\n        var years = new Array(range), date;\r\n\r\n        for (var i = 0, start = getStartingYear(ctrl.activeDate.getFullYear()); i < range; i++) {\r\n          date = new Date(start + i, 0, 1);\r\n          ctrl.fixTimeZone(date);\r\n          years[i] = angular.extend(ctrl.createDateObject(date, ctrl.formatYear), {\r\n            uid: scope.uniqueId + '-' + i\r\n          });\r\n        }\r\n\r\n        scope.title = [years[0].label, years[range - 1].label].join(' - ');\r\n        scope.rows = ctrl.split(years, 5);\r\n      };\r\n\r\n      ctrl.compare = function(date1, date2) {\r\n        return date1.getFullYear() - date2.getFullYear();\r\n      };\r\n\r\n      ctrl.handleKeyDown = function(key, evt) {\r\n        var date = ctrl.activeDate.getFullYear();\r\n\r\n        if (key === 'left') {\r\n          date = date - 1;   // up\r\n        } else if (key === 'up') {\r\n          date = date - 5;   // down\r\n        } else if (key === 'right') {\r\n          date = date + 1;   // down\r\n        } else if (key === 'down') {\r\n          date = date + 5;\r\n        } else if (key === 'pageup' || key === 'pagedown') {\r\n          date += (key === 'pageup' ? - 1 : 1) * ctrl.step.years;\r\n        } else if (key === 'home') {\r\n          date = getStartingYear(ctrl.activeDate.getFullYear());\r\n        } else if (key === 'end') {\r\n          date = getStartingYear(ctrl.activeDate.getFullYear()) + range - 1;\r\n        }\r\n        ctrl.activeDate.setFullYear(date);\r\n      };\r\n\r\n      ctrl.refreshView();\r\n    }\r\n  };\r\n}])\r\n\r\n.constant('datepickerPopupConfig', {\r\n  datepickerPopup: 'yyyy-MM-dd',\r\n  datepickerPopupTemplateUrl: 'template/datepicker/popup.html',\r\n  datepickerTemplateUrl: 'template/datepicker/datepicker.html',\r\n  html5Types: {\r\n    date: 'yyyy-MM-dd',\r\n    'datetime-local': 'yyyy-MM-ddTHH:mm:ss.sss',\r\n    'month': 'yyyy-MM'\r\n  },\r\n  currentText: 'Today',\r\n  clearText: 'Clear',\r\n  closeText: 'Done',\r\n  closeOnDateSelection: true,\r\n  appendToBody: false,\r\n  showButtonBar: true,\r\n  onOpenFocus: true\r\n})\r\n\r\n.directive('datepickerPopup', ['$compile', '$parse', '$document', '$rootScope', '$position', 'dateFilter', 'dateParser', 'datepickerPopupConfig', '$timeout',\r\nfunction($compile, $parse, $document, $rootScope, $position, dateFilter, dateParser, datepickerPopupConfig, $timeout) {\r\n  return {\r\n    restrict: 'EA',\r\n    require: 'ngModel',\r\n    scope: {\r\n      isOpen: '=?',\r\n      currentText: '@',\r\n      clearText: '@',\r\n      closeText: '@',\r\n      dateDisabled: '&',\r\n      customClass: '&'\r\n    },\r\n    link: function(scope, element, attrs, ngModel) {\r\n      var dateFormat,\r\n          closeOnDateSelection = angular.isDefined(attrs.closeOnDateSelection) ? scope.$parent.$eval(attrs.closeOnDateSelection) : datepickerPopupConfig.closeOnDateSelection,\r\n          appendToBody = angular.isDefined(attrs.datepickerAppendToBody) ? scope.$parent.$eval(attrs.datepickerAppendToBody) : datepickerPopupConfig.appendToBody,\r\n          onOpenFocus = angular.isDefined(attrs.onOpenFocus) ? scope.$parent.$eval(attrs.onOpenFocus) : datepickerPopupConfig.onOpenFocus,\r\n          datepickerPopupTemplateUrl = angular.isDefined(attrs.datepickerPopupTemplateUrl) ? attrs.datepickerPopupTemplateUrl : datepickerPopupConfig.datepickerPopupTemplateUrl,\r\n          datepickerTemplateUrl = angular.isDefined(attrs.datepickerTemplateUrl) ? attrs.datepickerTemplateUrl : datepickerPopupConfig.datepickerTemplateUrl,\r\n          cache = {};\r\n\r\n      scope.showButtonBar = angular.isDefined(attrs.showButtonBar) ? scope.$parent.$eval(attrs.showButtonBar) : datepickerPopupConfig.showButtonBar;\r\n\r\n      scope.getText = function(key) {\r\n        return scope[key + 'Text'] || datepickerPopupConfig[key + 'Text'];\r\n      };\r\n\r\n      scope.isDisabled = function(date) {\r\n        if (date === 'today') {\r\n          date = new Date();\r\n        }\r\n\r\n        return ((scope.watchData.minDate && scope.compare(date, cache.minDate) < 0) ||\r\n          (scope.watchData.maxDate && scope.compare(date, cache.maxDate) > 0));\r\n      };\r\n\r\n      scope.compare = function(date1, date2) {\r\n        return (new Date(date1.getFullYear(), date1.getMonth(), date1.getDate()) - new Date(date2.getFullYear(), date2.getMonth(), date2.getDate()));\r\n      };\r\n\r\n      var isHtml5DateInput = false;\r\n      if (datepickerPopupConfig.html5Types[attrs.type]) {\r\n        dateFormat = datepickerPopupConfig.html5Types[attrs.type];\r\n        isHtml5DateInput = true;\r\n      } else {\r\n        dateFormat = attrs.datepickerPopup || datepickerPopupConfig.datepickerPopup;\r\n        attrs.$observe('datepickerPopup', function(value, oldValue) {\r\n            var newDateFormat = value || datepickerPopupConfig.datepickerPopup;\r\n            // Invalidate the $modelValue to ensure that formatters re-run\r\n            // FIXME: Refactor when PR is merged: https://github.com/angular/angular.js/pull/10764\r\n            if (newDateFormat !== dateFormat) {\r\n              dateFormat = newDateFormat;\r\n              ngModel.$modelValue = null;\r\n\r\n              if (!dateFormat) {\r\n                throw new Error('datepickerPopup must have a date format specified.');\r\n              }\r\n            }\r\n        });\r\n      }\r\n\r\n      if (!dateFormat) {\r\n        throw new Error('datepickerPopup must have a date format specified.');\r\n      }\r\n\r\n      if (isHtml5DateInput && attrs.datepickerPopup) {\r\n        throw new Error('HTML5 date input types do not support custom formats.');\r\n      }\r\n\r\n      // popup element used to display calendar\r\n      var popupEl = angular.element('<div datepicker-popup-wrap><div datepicker></div></div>');\r\n      popupEl.attr({\r\n        'ng-model': 'date',\r\n        'ng-change': 'dateSelection(date)',\r\n        'template-url': datepickerPopupTemplateUrl\r\n      });\r\n\r\n      function cameltoDash(string) {\r\n        return string.replace(/([A-Z])/g, function($1) { return '-' + $1.toLowerCase(); });\r\n      }\r\n\r\n      // datepicker element\r\n      var datepickerEl = angular.element(popupEl.children()[0]);\r\n      datepickerEl.attr('template-url', datepickerTemplateUrl);\r\n\r\n      if (isHtml5DateInput) {\r\n        if (attrs.type === 'month') {\r\n          datepickerEl.attr('datepicker-mode', '\"month\"');\r\n          datepickerEl.attr('min-mode', 'month');\r\n        }\r\n      }\r\n\r\n      if (attrs.datepickerOptions) {\r\n        var options = scope.$parent.$eval(attrs.datepickerOptions);\r\n        if (options && options.initDate) {\r\n          scope.initDate = options.initDate;\r\n          datepickerEl.attr('init-date', 'initDate');\r\n          delete options.initDate;\r\n        }\r\n        angular.forEach(options, function(value, option) {\r\n          datepickerEl.attr( cameltoDash(option), value );\r\n        });\r\n      }\r\n\r\n      scope.watchData = {};\r\n      angular.forEach(['minMode', 'maxMode', 'minDate', 'maxDate', 'datepickerMode', 'initDate', 'shortcutPropagation'], function(key) {\r\n        if (attrs[key]) {\r\n          var getAttribute = $parse(attrs[key]);\r\n          scope.$parent.$watch(getAttribute, function(value) {\r\n            scope.watchData[key] = value;\r\n            if (key === 'minDate' || key === 'maxDate') {\r\n              cache[key] = new Date(value);\r\n            }\r\n          });\r\n          datepickerEl.attr(cameltoDash(key), 'watchData.' + key);\r\n\r\n          // Propagate changes from datepicker to outside\r\n          if (key === 'datepickerMode') {\r\n            var setAttribute = getAttribute.assign;\r\n            scope.$watch('watchData.' + key, function(value, oldvalue) {\r\n              if (angular.isFunction(setAttribute) && value !== oldvalue) {\r\n                setAttribute(scope.$parent, value);\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n      if (attrs.dateDisabled) {\r\n        datepickerEl.attr('date-disabled', 'dateDisabled({ date: date, mode: mode })');\r\n      }\r\n\r\n      if (attrs.showWeeks) {\r\n        datepickerEl.attr('show-weeks', attrs.showWeeks);\r\n      }\r\n\r\n      if (attrs.customClass) {\r\n        datepickerEl.attr('custom-class', 'customClass({ date: date, mode: mode })');\r\n      }\r\n\r\n      function parseDate(viewValue) {\r\n        if (angular.isNumber(viewValue)) {\r\n          // presumably timestamp to date object\r\n          viewValue = new Date(viewValue);\r\n        }\r\n\r\n        if (!viewValue) {\r\n          return null;\r\n        } else if (angular.isDate(viewValue) && !isNaN(viewValue)) {\r\n          return viewValue;\r\n        } else if (angular.isString(viewValue)) {\r\n          var date = dateParser.parse(viewValue, dateFormat, scope.date);\r\n          if (isNaN(date)) {\r\n            return undefined;\r\n          } else {\r\n            return date;\r\n          }\r\n        } else {\r\n          return undefined;\r\n        }\r\n      }\r\n\r\n      function validator(modelValue, viewValue) {\r\n        var value = modelValue || viewValue;\r\n\r\n        if (!attrs.ngRequired && !value) {\r\n          return true;\r\n        }\r\n\r\n        if (angular.isNumber(value)) {\r\n          value = new Date(value);\r\n        }\r\n        if (!value) {\r\n          return true;\r\n        } else if (angular.isDate(value) && !isNaN(value)) {\r\n          return true;\r\n        } else if (angular.isString(value)) {\r\n          var date = dateParser.parse(value, dateFormat);\r\n          return !isNaN(date);\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      if (!isHtml5DateInput) {\r\n        // Internal API to maintain the correct ng-invalid-[key] class\r\n        ngModel.$$parserName = 'date';\r\n        ngModel.$validators.date = validator;\r\n        ngModel.$parsers.unshift(parseDate);\r\n        ngModel.$formatters.push(function(value) {\r\n          scope.date = value;\r\n          return ngModel.$isEmpty(value) ? value : dateFilter(value, dateFormat);\r\n        });\r\n      } else {\r\n        ngModel.$formatters.push(function(value) {\r\n          scope.date = value;\r\n          return value;\r\n        });\r\n      }\r\n\r\n      // Inner change\r\n      scope.dateSelection = function(dt) {\r\n        if (angular.isDefined(dt)) {\r\n          scope.date = dt;\r\n        }\r\n        var date = scope.date ? dateFilter(scope.date, dateFormat) : null; // Setting to NULL is necessary for form validators to function\r\n        element.val(date);\r\n        ngModel.$setViewValue(date);\r\n\r\n        if (closeOnDateSelection) {\r\n          scope.isOpen = false;\r\n          element[0].focus();\r\n        }\r\n      };\r\n\r\n      // Detect changes in the view from the text box\r\n      ngModel.$viewChangeListeners.push(function() {\r\n        scope.date = dateParser.parse(ngModel.$viewValue, dateFormat, scope.date);\r\n      });\r\n\r\n      var documentClickBind = function(event) {\r\n        if (scope.isOpen && !(element[0].contains(event.target) || popupEl[0].contains(event.target))) {\r\n          scope.$apply(function() {\r\n            scope.isOpen = false;\r\n          });\r\n        }\r\n      };\r\n\r\n      var inputKeydownBind = function(evt) {\r\n        if (evt.which === 27 && scope.isOpen) {\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          scope.$apply(function() {\r\n            scope.isOpen = false;\r\n          });\r\n          element[0].focus();\r\n        } else if (evt.which === 40 && !scope.isOpen) {\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          scope.$apply(function() {\r\n            scope.isOpen = true;\r\n          });\r\n        }\r\n      };\r\n      element.bind('keydown', inputKeydownBind);\r\n\r\n      scope.keydown = function(evt) {\r\n        if (evt.which === 27) {\r\n          scope.isOpen = false;\r\n          element[0].focus();\r\n        }\r\n      };\r\n\r\n      scope.$watch('isOpen', function(value) {\r\n        if (value) {\r\n          scope.position = appendToBody ? $position.offset(element) : $position.position(element);\r\n          scope.position.top = scope.position.top + element.prop('offsetHeight');\r\n\r\n          $timeout(function() {\r\n            if (onOpenFocus) {\r\n              scope.$broadcast('datepicker.focus');\r\n            }\r\n            $document.bind('click', documentClickBind);\r\n          }, 0, false);\r\n        } else {\r\n          $document.unbind('click', documentClickBind);\r\n        }\r\n      });\r\n\r\n      scope.select = function(date) {\r\n        if (date === 'today') {\r\n          var today = new Date();\r\n          if (angular.isDate(scope.date)) {\r\n            date = new Date(scope.date);\r\n            date.setFullYear(today.getFullYear(), today.getMonth(), today.getDate());\r\n          } else {\r\n            date = new Date(today.setHours(0, 0, 0, 0));\r\n          }\r\n        }\r\n        scope.dateSelection(date);\r\n      };\r\n\r\n      scope.close = function() {\r\n        scope.isOpen = false;\r\n        element[0].focus();\r\n      };\r\n\r\n      var $popup = $compile(popupEl)(scope);\r\n      // Prevent jQuery cache memory leak (template is now redundant after linking)\r\n      popupEl.remove();\r\n\r\n      if (appendToBody) {\r\n        $document.find('body').append($popup);\r\n      } else {\r\n        element.after($popup);\r\n      }\r\n\r\n      scope.$on('$destroy', function() {\r\n        if (scope.isOpen === true) {\r\n          if (!$rootScope.$$phase) {\r\n            scope.$apply(function() {\r\n              scope.isOpen = false;\r\n            });\r\n          }\r\n        }\r\n\r\n        $popup.remove();\r\n        element.unbind('keydown', inputKeydownBind);\r\n        $document.unbind('click', documentClickBind);\r\n      });\r\n    }\r\n  };\r\n}])\r\n\r\n.directive('datepickerPopupWrap', function() {\r\n  return {\r\n    restrict:'EA',\r\n    replace: true,\r\n    transclude: true,\r\n    templateUrl: function(element, attrs) {\r\n      return attrs.templateUrl || 'template/datepicker/popup.html';\r\n    }\r\n  };\r\n});\r\n\r\n\r\nangular.module(\"template/datepicker/datepicker.html\", []).run([\"$templateCache\", function($templateCache) {\r\n  $templateCache.put(\"template/datepicker/datepicker.html\",\r\n    \"<div ng-switch=\\\"datepickerMode\\\" role=\\\"application\\\" ng-keydown=\\\"keydown($event)\\\">\\n\" +\r\n    \"  <daypicker ng-switch-when=\\\"day\\\" tabindex=\\\"0\\\"></daypicker>\\n\" +\r\n    \"  <monthpicker ng-switch-when=\\\"month\\\" tabindex=\\\"0\\\"></monthpicker>\\n\" +\r\n    \"  <yearpicker ng-switch-when=\\\"year\\\" tabindex=\\\"0\\\"></yearpicker>\\n\" +\r\n    \"</div>\");\r\n}]);\r\n\r\nangular.module(\"template/datepicker/day.html\", []).run([\"$templateCache\", function($templateCache) {\r\n  $templateCache.put(\"template/datepicker/day.html\",\r\n    \"<table role=\\\"grid\\\" aria-labelledby=\\\"{{::uniqueId}}-title\\\" aria-activedescendant=\\\"{{activeDateId}}\\\">\\n\" +\r\n    \"  <thead>\\n\" +\r\n    \"    <tr>\\n\" +\r\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-left\\\" ng-click=\\\"move(-1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-left\\\"></i></button></th>\\n\" +\r\n    \"      <th colspan=\\\"{{::5 + showWeeks}}\\\"><button id=\\\"{{::uniqueId}}-title\\\" role=\\\"heading\\\" aria-live=\\\"assertive\\\" aria-atomic=\\\"true\\\" type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"toggleMode()\\\" ng-disabled=\\\"datepickerMode === maxMode\\\" tabindex=\\\"-1\\\" style=\\\"width:100%;\\\"><strong>{{title}}</strong></button></th>\\n\" +\r\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-right\\\" ng-click=\\\"move(1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-right\\\"></i></button></th>\\n\" +\r\n    \"    </tr>\\n\" +\r\n    \"    <tr>\\n\" +\r\n    \"      <th ng-if=\\\"showWeeks\\\" class=\\\"text-center\\\"></th>\\n\" +\r\n    \"      <th ng-repeat=\\\"label in ::labels track by $index\\\" class=\\\"text-center\\\"><small aria-label=\\\"{{::label.full}}\\\">{{::label.abbr}}</small></th>\\n\" +\r\n    \"    </tr>\\n\" +\r\n    \"  </thead>\\n\" +\r\n    \"  <tbody>\\n\" +\r\n    \"    <tr ng-repeat=\\\"row in rows track by $index\\\">\\n\" +\r\n    \"      <td ng-if=\\\"showWeeks\\\" class=\\\"text-center h6\\\"><em>{{ weekNumbers[$index] }}</em></td>\\n\" +\r\n    \"      <td ng-repeat=\\\"dt in row track by dt.date\\\" class=\\\"text-center\\\" role=\\\"gridcell\\\" id=\\\"{{::dt.uid}}\\\" ng-class=\\\"::dt.customClass\\\">\\n\" +\r\n    \"        <button type=\\\"button\\\" style=\\\"min-width:100%;\\\" class=\\\"btn btn-default btn-sm\\\" ng-class=\\\"{'btn-info': dt.selected, active: isActive(dt)}\\\" ng-click=\\\"select(dt.date)\\\" ng-disabled=\\\"dt.disabled\\\" tabindex=\\\"-1\\\"><span ng-class=\\\"::{'text-muted': dt.secondary, 'text-info': dt.current}\\\">{{::dt.label}}</span></button>\\n\" +\r\n    \"      </td>\\n\" +\r\n    \"    </tr>\\n\" +\r\n    \"  </tbody>\\n\" +\r\n    \"</table>\\n\" +\r\n    \"\");\r\n}]);\r\n\r\nangular.module(\"template/datepicker/month.html\", []).run([\"$templateCache\", function($templateCache) {\r\n  $templateCache.put(\"template/datepicker/month.html\",\r\n    \"<table role=\\\"grid\\\" aria-labelledby=\\\"{{::uniqueId}}-title\\\" aria-activedescendant=\\\"{{activeDateId}}\\\">\\n\" +\r\n    \"  <thead>\\n\" +\r\n    \"    <tr>\\n\" +\r\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-left\\\" ng-click=\\\"move(-1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-left\\\"></i></button></th>\\n\" +\r\n    \"      <th><button id=\\\"{{::uniqueId}}-title\\\" role=\\\"heading\\\" aria-live=\\\"assertive\\\" aria-atomic=\\\"true\\\" type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"toggleMode()\\\" ng-disabled=\\\"datepickerMode === maxMode\\\" tabindex=\\\"-1\\\" style=\\\"width:100%;\\\"><strong>{{title}}</strong></button></th>\\n\" +\r\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-right\\\" ng-click=\\\"move(1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-right\\\"></i></button></th>\\n\" +\r\n    \"    </tr>\\n\" +\r\n    \"  </thead>\\n\" +\r\n    \"  <tbody>\\n\" +\r\n    \"    <tr ng-repeat=\\\"row in rows track by $index\\\">\\n\" +\r\n    \"      <td ng-repeat=\\\"dt in row track by dt.date\\\" class=\\\"text-center\\\" role=\\\"gridcell\\\" id=\\\"{{::dt.uid}}\\\" ng-class=\\\"::dt.customClass\\\">\\n\" +\r\n    \"        <button type=\\\"button\\\" style=\\\"min-width:100%;\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{'btn-info': dt.selected, active: isActive(dt)}\\\" ng-click=\\\"select(dt.date)\\\" ng-disabled=\\\"dt.disabled\\\" tabindex=\\\"-1\\\"><span ng-class=\\\"::{'text-info': dt.current}\\\">{{::dt.label}}</span></button>\\n\" +\r\n    \"      </td>\\n\" +\r\n    \"    </tr>\\n\" +\r\n    \"  </tbody>\\n\" +\r\n    \"</table>\\n\" +\r\n    \"\");\r\n}]);\r\n\r\nangular.module(\"template/datepicker/popup.html\", []).run([\"$templateCache\", function($templateCache) {\r\n  $templateCache.put(\"template/datepicker/popup.html\",\r\n    \"<ul class=\\\"dropdown-menu\\\" ng-if=\\\"isOpen\\\" style=\\\"display: block\\\" ng-style=\\\"{top: position.top+'px', left: position.left+'px'}\\\" ng-keydown=\\\"keydown($event)\\\" ng-click=\\\"$event.stopPropagation()\\\">\\n\" +\r\n    \"\t<li ng-transclude></li>\\n\" +\r\n    \"\t<li ng-if=\\\"showButtonBar\\\" style=\\\"padding:10px 9px 2px\\\">\\n\" +\r\n    \"\t\t<span class=\\\"btn-group pull-left\\\">\\n\" +\r\n    \"\t\t\t<button type=\\\"button\\\" class=\\\"btn btn-sm btn-info\\\" ng-click=\\\"select('today')\\\" ng-disabled=\\\"isDisabled('today')\\\">{{ getText('current') }}</button>\\n\" +\r\n    \"\t\t\t<button type=\\\"button\\\" class=\\\"btn btn-sm btn-danger\\\" ng-click=\\\"select(null)\\\">{{ getText('clear') }}</button>\\n\" +\r\n    \"\t\t</span>\\n\" +\r\n    \"\t\t<button type=\\\"button\\\" class=\\\"btn btn-sm btn-success pull-right\\\" ng-click=\\\"close()\\\">{{ getText('close') }}</button>\\n\" +\r\n    \"\t</li>\\n\" +\r\n    \"</ul>\\n\" +\r\n    \"\");\r\n}]);\r\n\r\nangular.module(\"template/datepicker/year.html\", []).run([\"$templateCache\", function($templateCache) {\r\n  $templateCache.put(\"template/datepicker/year.html\",\r\n    \"<table role=\\\"grid\\\" aria-labelledby=\\\"{{::uniqueId}}-title\\\" aria-activedescendant=\\\"{{activeDateId}}\\\">\\n\" +\r\n    \"  <thead>\\n\" +\r\n    \"    <tr>\\n\" +\r\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-left\\\" ng-click=\\\"move(-1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-left\\\"></i></button></th>\\n\" +\r\n    \"      <th colspan=\\\"3\\\"><button id=\\\"{{::uniqueId}}-title\\\" role=\\\"heading\\\" aria-live=\\\"assertive\\\" aria-atomic=\\\"true\\\" type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"toggleMode()\\\" ng-disabled=\\\"datepickerMode === maxMode\\\" tabindex=\\\"-1\\\" style=\\\"width:100%;\\\"><strong>{{title}}</strong></button></th>\\n\" +\r\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-right\\\" ng-click=\\\"move(1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-right\\\"></i></button></th>\\n\" +\r\n    \"    </tr>\\n\" +\r\n    \"  </thead>\\n\" +\r\n    \"  <tbody>\\n\" +\r\n    \"    <tr ng-repeat=\\\"row in rows track by $index\\\">\\n\" +\r\n    \"      <td ng-repeat=\\\"dt in row track by dt.date\\\" class=\\\"text-center\\\" role=\\\"gridcell\\\" id=\\\"{{::dt.uid}}\\\">\\n\" +\r\n    \"        <button type=\\\"button\\\" style=\\\"min-width:100%;\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{'btn-info': dt.selected, active: isActive(dt)}\\\" ng-click=\\\"select(dt.date)\\\" ng-disabled=\\\"dt.disabled\\\" tabindex=\\\"-1\\\"><span ng-class=\\\"::{'text-info': dt.current}\\\">{{::dt.label}}</span></button>\\n\" +\r\n    \"      </td>\\n\" +\r\n    \"    </tr>\\n\" +\r\n    \"  </tbody>\\n\" +\r\n    \"</table>\\n\" +\r\n    \"\");\r\n}]);\r\n\r\n","/**\r\n * AngularStrap - Twitter Bootstrap directives for AngularJS\r\n * @version v0.7.5 - 2013-07-21\r\n * @link http://mgcrea.github.com/angular-strap\r\n * @author Olivier Louvignes <olivier@mg-crea.com>\r\n * @license MIT License, http://www.opensource.org/licenses/MIT\r\n */\r\nangular.module('$strap.config', []).value('$strapConfig', {});\r\nangular.module('$strap.filters', ['$strap.config']);\r\nangular.module('$strap.directives', ['$strap.config']);\r\nangular.module('$strap', [\r\n  '$strap.filters',\r\n  '$strap.directives',\r\n  '$strap.config'\r\n]);\r\n'use strict';\r\nangular.module('$strap.directives').factory('$modal', [\r\n  '$rootScope',\r\n  '$compile',\r\n  '$http',\r\n  '$timeout',\r\n  '$q',\r\n  '$templateCache',\r\n  '$strapConfig',\r\n  function ($rootScope, $compile, $http, $timeout, $q, $templateCache, $strapConfig) {\r\n    var ModalFactory = function ModalFactory(config) {\r\n      function Modal(config) {\r\n        var options = angular.extend({ show: true }, $strapConfig.modal, config);\r\n        var scope = options.scope ? options.scope : $rootScope.$new()\r\n        var templateUrl = options.template;\r\n        return $q.when(options.templateHtml || $templateCache.get(templateUrl) || $http.get(templateUrl, { cache: true }).then(function (res) {\r\n          return res.data;\r\n        })).then(function onSuccess(template) {\r\n          var id = scope.$id;\r\n          if (templateUrl) {\r\n            id += templateUrl.replace('.html', '').replace(/[\\/|\\.|:]/g, '-');\r\n          }\r\n          // grafana change, removed fade\r\n          var $modal = $('<div class=\"modal hide\" tabindex=\"-1\"></div>').attr('id', id).html(template);\r\n          if (options.modalClass)\r\n            $modal.addClass(options.modalClass);\r\n          $('body').append($modal);\r\n          $timeout(function () {\r\n            $compile($modal)(scope);\r\n          });\r\n          scope.$modal = function (name) {\r\n            $modal.modal(name);\r\n          };\r\n          angular.forEach([\r\n            'show',\r\n            'hide'\r\n          ], function (name) {\r\n            scope[name] = function () {\r\n              $modal.modal(name);\r\n            };\r\n          });\r\n          scope.dismiss = scope.hide;\r\n          angular.forEach([\r\n            'show',\r\n            'shown',\r\n            'hide',\r\n            'hidden'\r\n          ], function (name) {\r\n            $modal.on(name, function (ev) {\r\n              scope.$emit('modal-' + name, ev);\r\n            });\r\n          });\r\n          $modal.on('shown', function (ev) {\r\n            $('input[autofocus], textarea[autofocus]', $modal).first().trigger('focus');\r\n          });\r\n          $modal.on('hidden', function (ev) {\r\n            if (!options.persist)\r\n              scope.$destroy();\r\n          });\r\n          scope.$on('$destroy', function () {\r\n            $modal.remove();\r\n          });\r\n          $modal.modal(options);\r\n          return $modal;\r\n        });\r\n      }\r\n      return new Modal(config);\r\n    };\r\n    return ModalFactory;\r\n  }\r\n])\r\n\r\n'use strict';\r\nangular.module('$strap.directives').directive('bsTooltip', [\r\n  '$parse',\r\n  '$compile',\r\n  function ($parse, $compile) {\r\n    return {\r\n      restrict: 'A',\r\n      scope: true,\r\n      link: function postLink(scope, element, attrs, ctrl) {\r\n        var getter = $parse(attrs.bsTooltip), setter = getter.assign, value = getter(scope);\r\n        scope.$watch(attrs.bsTooltip, function (newValue, oldValue) {\r\n          if (newValue !== oldValue) {\r\n            value = newValue;\r\n          }\r\n        });\r\n        // Grafana change, always hide other tooltips\r\n        if (true) {\r\n          element.on('show', function (ev) {\r\n            $('.tooltip.in').each(function () {\r\n              var $this = $(this), tooltip = $this.data('tooltip');\r\n              if (tooltip && !tooltip.$element.is(element)) {\r\n                $this.tooltip('hide');\r\n              }\r\n            });\r\n          });\r\n        }\r\n        element.tooltip({\r\n          title: function () {\r\n            return angular.isFunction(value) ? value.apply(null, arguments) : value;\r\n          },\r\n          html: true,\r\n          container: 'body', // Grafana change\r\n        });\r\n        var tooltip = element.data('tooltip');\r\n        tooltip.show = function () {\r\n          var r = $.fn.tooltip.Constructor.prototype.show.apply(this, arguments);\r\n          this.tip().data('tooltip', this);\r\n          return r;\r\n        };\r\n        scope._tooltip = function (event) {\r\n          element.tooltip(event);\r\n        };\r\n        scope.hide = function () {\r\n          element.tooltip('hide');\r\n        };\r\n        scope.show = function () {\r\n          element.tooltip('show');\r\n        };\r\n        scope.dismiss = scope.hide;\r\n      }\r\n    };\r\n  }\r\n]);\r\n\r\n'use strict';\r\nangular.module('$strap.directives').directive('bsTypeahead', [\r\n  '$parse',\r\n  function ($parse) {\r\n    return {\r\n      restrict: 'A',\r\n      require: '?ngModel',\r\n      link: function postLink(scope, element, attrs, controller) {\r\n        var getter = $parse(attrs.bsTypeahead), setter = getter.assign, value = getter(scope);\r\n        scope.$watch(attrs.bsTypeahead, function (newValue, oldValue) {\r\n          if (newValue !== oldValue) {\r\n            value = newValue;\r\n          }\r\n        });\r\n        element.attr('data-provide', 'typeahead');\r\n        element.typeahead({\r\n          source: function (query) {\r\n            return angular.isFunction(value) ? value.apply(null, arguments) : value;\r\n          },\r\n          minLength: attrs.minLength || 1,\r\n          items: attrs.items,\r\n          updater: function (value) {\r\n            if (controller) {\r\n              scope.$apply(function () {\r\n                controller.$setViewValue(value);\r\n              });\r\n            }\r\n            scope.$emit('typeahead-updated', value);\r\n            return value;\r\n          }\r\n        });\r\n        var typeahead = element.data('typeahead');\r\n        typeahead.lookup = function (ev) {\r\n          var items;\r\n          this.query = this.$element.val() || '';\r\n          if (this.query.length < this.options.minLength) {\r\n            return this.shown ? this.hide() : this;\r\n          }\r\n          items = $.isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source;\r\n          return items ? this.process(items) : this;\r\n        };\r\n        if (!!attrs.matchAll) {\r\n          typeahead.matcher = function (item) {\r\n            return true;\r\n          };\r\n        }\r\n        if (attrs.minLength === '0') {\r\n          setTimeout(function () {\r\n            element.on('focus', function () {\r\n              element.val().length === 0 && setTimeout(element.typeahead.bind(element, 'lookup'), 200);\r\n            });\r\n          });\r\n        }\r\n      }\r\n    };\r\n  }\r\n]);\r\n","var map = {\n\t\"./af\": 357,\n\t\"./af.js\": 357,\n\t\"./ar\": 358,\n\t\"./ar-dz\": 359,\n\t\"./ar-dz.js\": 359,\n\t\"./ar-kw\": 360,\n\t\"./ar-kw.js\": 360,\n\t\"./ar-ly\": 361,\n\t\"./ar-ly.js\": 361,\n\t\"./ar-ma\": 362,\n\t\"./ar-ma.js\": 362,\n\t\"./ar-sa\": 363,\n\t\"./ar-sa.js\": 363,\n\t\"./ar-tn\": 364,\n\t\"./ar-tn.js\": 364,\n\t\"./ar.js\": 358,\n\t\"./az\": 365,\n\t\"./az.js\": 365,\n\t\"./be\": 366,\n\t\"./be.js\": 366,\n\t\"./bg\": 367,\n\t\"./bg.js\": 367,\n\t\"./bm\": 368,\n\t\"./bm.js\": 368,\n\t\"./bn\": 369,\n\t\"./bn.js\": 369,\n\t\"./bo\": 370,\n\t\"./bo.js\": 370,\n\t\"./br\": 371,\n\t\"./br.js\": 371,\n\t\"./bs\": 372,\n\t\"./bs.js\": 372,\n\t\"./ca\": 373,\n\t\"./ca.js\": 373,\n\t\"./cs\": 374,\n\t\"./cs.js\": 374,\n\t\"./cv\": 375,\n\t\"./cv.js\": 375,\n\t\"./cy\": 376,\n\t\"./cy.js\": 376,\n\t\"./da\": 377,\n\t\"./da.js\": 377,\n\t\"./de\": 378,\n\t\"./de-at\": 379,\n\t\"./de-at.js\": 379,\n\t\"./de-ch\": 380,\n\t\"./de-ch.js\": 380,\n\t\"./de.js\": 378,\n\t\"./dv\": 381,\n\t\"./dv.js\": 381,\n\t\"./el\": 382,\n\t\"./el.js\": 382,\n\t\"./en-au\": 383,\n\t\"./en-au.js\": 383,\n\t\"./en-ca\": 384,\n\t\"./en-ca.js\": 384,\n\t\"./en-gb\": 385,\n\t\"./en-gb.js\": 385,\n\t\"./en-ie\": 386,\n\t\"./en-ie.js\": 386,\n\t\"./en-il\": 387,\n\t\"./en-il.js\": 387,\n\t\"./en-nz\": 388,\n\t\"./en-nz.js\": 388,\n\t\"./eo\": 389,\n\t\"./eo.js\": 389,\n\t\"./es\": 390,\n\t\"./es-do\": 391,\n\t\"./es-do.js\": 391,\n\t\"./es-us\": 392,\n\t\"./es-us.js\": 392,\n\t\"./es.js\": 390,\n\t\"./et\": 393,\n\t\"./et.js\": 393,\n\t\"./eu\": 394,\n\t\"./eu.js\": 394,\n\t\"./fa\": 395,\n\t\"./fa.js\": 395,\n\t\"./fi\": 396,\n\t\"./fi.js\": 396,\n\t\"./fo\": 397,\n\t\"./fo.js\": 397,\n\t\"./fr\": 398,\n\t\"./fr-ca\": 399,\n\t\"./fr-ca.js\": 399,\n\t\"./fr-ch\": 400,\n\t\"./fr-ch.js\": 400,\n\t\"./fr.js\": 398,\n\t\"./fy\": 401,\n\t\"./fy.js\": 401,\n\t\"./gd\": 402,\n\t\"./gd.js\": 402,\n\t\"./gl\": 403,\n\t\"./gl.js\": 403,\n\t\"./gom-latn\": 404,\n\t\"./gom-latn.js\": 404,\n\t\"./gu\": 405,\n\t\"./gu.js\": 405,\n\t\"./he\": 406,\n\t\"./he.js\": 406,\n\t\"./hi\": 407,\n\t\"./hi.js\": 407,\n\t\"./hr\": 408,\n\t\"./hr.js\": 408,\n\t\"./hu\": 409,\n\t\"./hu.js\": 409,\n\t\"./hy-am\": 410,\n\t\"./hy-am.js\": 410,\n\t\"./id\": 411,\n\t\"./id.js\": 411,\n\t\"./is\": 412,\n\t\"./is.js\": 412,\n\t\"./it\": 413,\n\t\"./it.js\": 413,\n\t\"./ja\": 414,\n\t\"./ja.js\": 414,\n\t\"./jv\": 415,\n\t\"./jv.js\": 415,\n\t\"./ka\": 416,\n\t\"./ka.js\": 416,\n\t\"./kk\": 417,\n\t\"./kk.js\": 417,\n\t\"./km\": 418,\n\t\"./km.js\": 418,\n\t\"./kn\": 419,\n\t\"./kn.js\": 419,\n\t\"./ko\": 420,\n\t\"./ko.js\": 420,\n\t\"./ky\": 421,\n\t\"./ky.js\": 421,\n\t\"./lb\": 422,\n\t\"./lb.js\": 422,\n\t\"./lo\": 423,\n\t\"./lo.js\": 423,\n\t\"./lt\": 424,\n\t\"./lt.js\": 424,\n\t\"./lv\": 425,\n\t\"./lv.js\": 425,\n\t\"./me\": 426,\n\t\"./me.js\": 426,\n\t\"./mi\": 427,\n\t\"./mi.js\": 427,\n\t\"./mk\": 428,\n\t\"./mk.js\": 428,\n\t\"./ml\": 429,\n\t\"./ml.js\": 429,\n\t\"./mn\": 430,\n\t\"./mn.js\": 430,\n\t\"./mr\": 431,\n\t\"./mr.js\": 431,\n\t\"./ms\": 432,\n\t\"./ms-my\": 433,\n\t\"./ms-my.js\": 433,\n\t\"./ms.js\": 432,\n\t\"./mt\": 434,\n\t\"./mt.js\": 434,\n\t\"./my\": 435,\n\t\"./my.js\": 435,\n\t\"./nb\": 436,\n\t\"./nb.js\": 436,\n\t\"./ne\": 437,\n\t\"./ne.js\": 437,\n\t\"./nl\": 438,\n\t\"./nl-be\": 439,\n\t\"./nl-be.js\": 439,\n\t\"./nl.js\": 438,\n\t\"./nn\": 440,\n\t\"./nn.js\": 440,\n\t\"./pa-in\": 441,\n\t\"./pa-in.js\": 441,\n\t\"./pl\": 442,\n\t\"./pl.js\": 442,\n\t\"./pt\": 443,\n\t\"./pt-br\": 444,\n\t\"./pt-br.js\": 444,\n\t\"./pt.js\": 443,\n\t\"./ro\": 445,\n\t\"./ro.js\": 445,\n\t\"./ru\": 446,\n\t\"./ru.js\": 446,\n\t\"./sd\": 447,\n\t\"./sd.js\": 447,\n\t\"./se\": 448,\n\t\"./se.js\": 448,\n\t\"./si\": 449,\n\t\"./si.js\": 449,\n\t\"./sk\": 450,\n\t\"./sk.js\": 450,\n\t\"./sl\": 451,\n\t\"./sl.js\": 451,\n\t\"./sq\": 452,\n\t\"./sq.js\": 452,\n\t\"./sr\": 453,\n\t\"./sr-cyrl\": 454,\n\t\"./sr-cyrl.js\": 454,\n\t\"./sr.js\": 453,\n\t\"./ss\": 455,\n\t\"./ss.js\": 455,\n\t\"./sv\": 456,\n\t\"./sv.js\": 456,\n\t\"./sw\": 457,\n\t\"./sw.js\": 457,\n\t\"./ta\": 458,\n\t\"./ta.js\": 458,\n\t\"./te\": 459,\n\t\"./te.js\": 459,\n\t\"./tet\": 460,\n\t\"./tet.js\": 460,\n\t\"./tg\": 461,\n\t\"./tg.js\": 461,\n\t\"./th\": 462,\n\t\"./th.js\": 462,\n\t\"./tl-ph\": 463,\n\t\"./tl-ph.js\": 463,\n\t\"./tlh\": 464,\n\t\"./tlh.js\": 464,\n\t\"./tr\": 465,\n\t\"./tr.js\": 465,\n\t\"./tzl\": 466,\n\t\"./tzl.js\": 466,\n\t\"./tzm\": 467,\n\t\"./tzm-latn\": 468,\n\t\"./tzm-latn.js\": 468,\n\t\"./tzm.js\": 467,\n\t\"./ug-cn\": 469,\n\t\"./ug-cn.js\": 469,\n\t\"./uk\": 470,\n\t\"./uk.js\": 470,\n\t\"./ur\": 471,\n\t\"./ur.js\": 471,\n\t\"./uz\": 472,\n\t\"./uz-latn\": 473,\n\t\"./uz-latn.js\": 473,\n\t\"./uz.js\": 472,\n\t\"./vi\": 474,\n\t\"./vi.js\": 474,\n\t\"./x-pseudo\": 475,\n\t\"./x-pseudo.js\": 475,\n\t\"./yo\": 476,\n\t\"./yo.js\": 476,\n\t\"./zh-cn\": 477,\n\t\"./zh-cn.js\": 477,\n\t\"./zh-hk\": 478,\n\t\"./zh-hk.js\": 478,\n\t\"./zh-tw\": 479,\n\t\"./zh-tw.js\": 479\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 826;","(function ($) {\r\n  \"use strict\";\r\n\r\n  var defaultOptions = {\r\n    tagClass: function(item) {\r\n      return 'label label-info';\r\n    },\r\n    itemValue: function(item) {\r\n      return item ? item.toString() : item;\r\n    },\r\n    itemText: function(item) {\r\n      return this.itemValue(item);\r\n    },\r\n    freeInput: true,\r\n    maxTags: undefined,\r\n    confirmKeys: [13],\r\n    onTagExists: function(item, $tag) {\r\n      $tag.hide().fadeIn();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Constructor function\r\n   */\r\n  function TagsInput(element, options) {\r\n    this.itemsArray = [];\r\n\r\n    this.$element = $(element);\r\n    this.$element.hide();\r\n\r\n    this.widthClass = options.widthClass || 'width-9';\r\n    this.isSelect = (element.tagName === 'SELECT');\r\n    this.multiple = (this.isSelect && element.hasAttribute('multiple'));\r\n    this.objectItems = options && options.itemValue;\r\n    this.placeholderText = element.hasAttribute('placeholder') ? this.$element.attr('placeholder') : '';\r\n\r\n    this.$container = $('<div class=\"bootstrap-tagsinput\"></div>');\r\n    this.$input = $('<input class=\"gf-form-input ' + this.widthClass + '\" type=\"text\" placeholder=\"' + this.placeholderText + '\"/>').appendTo(this.$container);\r\n\r\n    this.$element.after(this.$container);\r\n\r\n    this.build(options);\r\n  }\r\n\r\n  TagsInput.prototype = {\r\n    constructor: TagsInput,\r\n\r\n    /**\r\n     * Adds the given item as a new tag. Pass true to dontPushVal to prevent\r\n     * updating the elements val()\r\n     */\r\n    add: function(item, dontPushVal) {\r\n      var self = this;\r\n\r\n      if (self.options.maxTags && self.itemsArray.length >= self.options.maxTags)\r\n        return;\r\n\r\n      // Ignore falsey values, except false\r\n      if (item !== false && !item)\r\n        return;\r\n\r\n      // Throw an error when trying to add an object while the itemValue option was not set\r\n      if (typeof item === \"object\" && !self.objectItems)\r\n        throw(\"Can't add objects when itemValue option is not set\");\r\n\r\n      // Ignore strings only containg whitespace\r\n      if (item.toString().match(/^\\s*$/))\r\n        return;\r\n\r\n      // If SELECT but not multiple, remove current tag\r\n      if (self.isSelect && !self.multiple && self.itemsArray.length > 0)\r\n        self.remove(self.itemsArray[0]);\r\n\r\n      if (typeof item === \"string\" && this.$element[0].tagName === 'INPUT') {\r\n        var items = item.split(',');\r\n        if (items.length > 1) {\r\n          for (var i = 0; i < items.length; i++) {\r\n            this.add(items[i], true);\r\n          }\r\n\r\n          if (!dontPushVal)\r\n            self.pushVal();\r\n          return;\r\n        }\r\n      }\r\n\r\n      var itemValue = self.options.itemValue(item),\r\n          itemText = self.options.itemText(item),\r\n          tagClass = self.options.tagClass(item);\r\n\r\n      // Ignore items allready added\r\n      var existing = $.grep(self.itemsArray, function(item) { return self.options.itemValue(item) === itemValue; } )[0];\r\n      if (existing) {\r\n        // Invoke onTagExists\r\n        if (self.options.onTagExists) {\r\n          var $existingTag = $(\".tag\", self.$container).filter(function() { return $(this).data(\"item\") === existing; });\r\n          self.options.onTagExists(item, $existingTag);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // register item in internal array and map\r\n      self.itemsArray.push(item);\r\n\r\n      // add a tag element\r\n      var $tag = $('<span class=\"tag ' + htmlEncode(tagClass) + '\">' + htmlEncode(itemText) + '<span data-role=\"remove\"></span></span>');\r\n      $tag.data('item', item);\r\n      self.findInputWrapper().before($tag);\r\n      $tag.after(' ');\r\n\r\n      // add <option /> if item represents a value not present in one of the <select />'s options\r\n      if (self.isSelect && !$('option[value=\"' + escape(itemValue) + '\"]',self.$element)[0]) {\r\n        var $option = $('<option selected>' + htmlEncode(itemText) + '</option>');\r\n        $option.data('item', item);\r\n        $option.attr('value', itemValue);\r\n        self.$element.append($option);\r\n      }\r\n\r\n      if (!dontPushVal)\r\n        self.pushVal();\r\n\r\n      // Add class when reached maxTags\r\n      if (self.options.maxTags === self.itemsArray.length)\r\n        self.$container.addClass('bootstrap-tagsinput-max');\r\n\r\n      self.$element.trigger($.Event('itemAdded', { item: item }));\r\n    },\r\n\r\n    /**\r\n     * Removes the given item. Pass true to dontPushVal to prevent updating the\r\n     * elements val()\r\n     */\r\n    remove: function(item, dontPushVal) {\r\n      var self = this;\r\n\r\n      if (self.objectItems) {\r\n        if (typeof item === \"object\")\r\n          item = $.grep(self.itemsArray, function(other) { return self.options.itemValue(other) ==  self.options.itemValue(item); } )[0];\r\n        else\r\n          item = $.grep(self.itemsArray, function(other) { return self.options.itemValue(other) ==  item; } )[0];\r\n      }\r\n\r\n      if (item) {\r\n        $('.tag', self.$container).filter(function() { return $(this).data('item') === item; }).remove();\r\n        $('option', self.$element).filter(function() { return $(this).data('item') === item; }).remove();\r\n        self.itemsArray.splice($.inArray(item, self.itemsArray), 1);\r\n      }\r\n\r\n      if (!dontPushVal)\r\n        self.pushVal();\r\n\r\n      // Remove class when reached maxTags\r\n      if (self.options.maxTags > self.itemsArray.length)\r\n        self.$container.removeClass('bootstrap-tagsinput-max');\r\n\r\n      self.$element.trigger($.Event('itemRemoved',  { item: item }));\r\n    },\r\n\r\n    /**\r\n     * Removes all items\r\n     */\r\n    removeAll: function() {\r\n      var self = this;\r\n\r\n      $('.tag', self.$container).remove();\r\n      $('option', self.$element).remove();\r\n\r\n      while(self.itemsArray.length > 0)\r\n        self.itemsArray.pop();\r\n\r\n      self.pushVal();\r\n\r\n      if (self.options.maxTags && !this.isEnabled())\r\n        this.enable();\r\n    },\r\n\r\n    /**\r\n     * Refreshes the tags so they match the text/value of their corresponding\r\n     * item.\r\n     */\r\n    refresh: function() {\r\n      var self = this;\r\n      $('.tag', self.$container).each(function() {\r\n        var $tag = $(this),\r\n            item = $tag.data('item'),\r\n            itemValue = self.options.itemValue(item),\r\n            itemText = self.options.itemText(item),\r\n            tagClass = self.options.tagClass(item);\r\n\r\n          // Update tag's class and inner text\r\n          $tag.attr('class', null);\r\n          $tag.addClass('tag ' + htmlEncode(tagClass));\r\n          $tag.contents().filter(function() {\r\n            return this.nodeType == 3;\r\n          })[0].nodeValue = htmlEncode(itemText);\r\n\r\n          if (self.isSelect) {\r\n            var option = $('option', self.$element).filter(function() { return $(this).data('item') === item; });\r\n            option.attr('value', itemValue);\r\n          }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * Returns the items added as tags\r\n     */\r\n    items: function() {\r\n      return this.itemsArray;\r\n    },\r\n\r\n    /**\r\n     * Assembly value by retrieving the value of each item, and set it on the\r\n     * element.\r\n     */\r\n    pushVal: function() {\r\n      var self = this,\r\n          val = $.map(self.items(), function(item) {\r\n            return self.options.itemValue(item).toString();\r\n          });\r\n\r\n      self.$element.val(val, true).trigger('change');\r\n    },\r\n\r\n    /**\r\n     * Initializes the tags input behaviour on the element\r\n     */\r\n    build: function(options) {\r\n      var self = this;\r\n\r\n      self.options = $.extend({}, defaultOptions, options);\r\n      var typeahead = self.options.typeahead || {};\r\n\r\n      // When itemValue is set, freeInput should always be false\r\n      if (self.objectItems)\r\n        self.options.freeInput = false;\r\n\r\n      makeOptionItemFunction(self.options, 'itemValue');\r\n      makeOptionItemFunction(self.options, 'itemText');\r\n      makeOptionItemFunction(self.options, 'tagClass');\r\n\r\n      // for backwards compatibility, self.options.source is deprecated\r\n      if (self.options.source)\r\n        typeahead.source = self.options.source;\r\n\r\n      if (typeahead.source && $.fn.typeahead) {\r\n        makeOptionFunction(typeahead, 'source');\r\n\r\n        self.$input.typeahead({\r\n          source: function (query, process) {\r\n            function processItems(items) {\r\n              var texts = [];\r\n\r\n              for (var i = 0; i < items.length; i++) {\r\n                var text = self.options.itemText(items[i]);\r\n                map[text] = items[i];\r\n                texts.push(text);\r\n              }\r\n              process(texts);\r\n            }\r\n\r\n            this.map = {};\r\n            var map = this.map,\r\n                data = typeahead.source(query);\r\n\r\n            if ($.isFunction(data.success)) {\r\n              // support for Angular promises\r\n              data.success(processItems);\r\n            } else {\r\n              // support for functions and jquery promises\r\n              $.when(data)\r\n               .then(processItems);\r\n            }\r\n          },\r\n          updater: function (text) {\r\n            self.add(this.map[text]);\r\n          },\r\n          matcher: function (text) {\r\n            return (text.toLowerCase().indexOf(this.query.trim().toLowerCase()) !== -1);\r\n          },\r\n          sorter: function (texts) {\r\n            return texts.sort();\r\n          },\r\n          highlighter: function (text) {\r\n            var regex = new RegExp( '(' + this.query + ')', 'gi' );\r\n            return text.replace( regex, \"<strong>$1</strong>\" );\r\n          }\r\n        });\r\n      }\r\n\r\n      self.$container.on('click', $.proxy(function(event) {\r\n        self.$input.focus();\r\n      }, self));\r\n\r\n      self.$container.on('blur', 'input', $.proxy(function(event) {\r\n        var $input = $(event.target);\r\n        self.add($input.val());\r\n        $input.val('');\r\n        event.preventDefault();\r\n      }, self));\r\n\r\n      self.$container.on('keydown', 'input', $.proxy(function(event) {\r\n        var $input = $(event.target),\r\n            $inputWrapper = self.findInputWrapper();\r\n\r\n        switch (event.which) {\r\n          // BACKSPACE\r\n          case 8:\r\n            if (doGetCaretPosition($input[0]) === 0) {\r\n              var prev = $inputWrapper.prev();\r\n              if (prev) {\r\n                self.remove(prev.data('item'));\r\n              }\r\n            }\r\n            break;\r\n\r\n          // DELETE\r\n          case 46:\r\n            if (doGetCaretPosition($input[0]) === 0) {\r\n              var next = $inputWrapper.next();\r\n              if (next) {\r\n                self.remove(next.data('item'));\r\n              }\r\n            }\r\n            break;\r\n\r\n          // LEFT ARROW\r\n          case 37:\r\n            // Try to move the input before the previous tag\r\n            var $prevTag = $inputWrapper.prev();\r\n            if ($input.val().length === 0 && $prevTag[0]) {\r\n              $prevTag.before($inputWrapper);\r\n              $input.focus();\r\n            }\r\n            break;\r\n          // RIGHT ARROW\r\n          case 39:\r\n            // Try to move the input after the next tag\r\n            var $nextTag = $inputWrapper.next();\r\n            if ($input.val().length === 0 && $nextTag[0]) {\r\n              $nextTag.after($inputWrapper);\r\n              $input.focus();\r\n            }\r\n            break;\r\n         default:\r\n            // When key corresponds one of the confirmKeys, add current input\r\n            // as a new tag\r\n            if (self.options.freeInput && $.inArray(event.which, self.options.confirmKeys) >= 0) {\r\n              self.add($input.val());\r\n              $input.val('');\r\n              event.preventDefault();\r\n            }\r\n        }\r\n\r\n        // Reset internal input's size\r\n        $input.attr('size', Math.max(this.inputSize, $input.val().length));\r\n      }, self));\r\n\r\n      // Remove icon clicked\r\n      self.$container.on('click', '[data-role=remove]', $.proxy(function(event) {\r\n        self.remove($(event.target).closest('.tag').data('item'));\r\n        // Grafana mod, if tags input used in popover the click event will bubble up and hide popover\r\n        event.stopPropagation();\r\n      }, self));\r\n\r\n      // Only add existing value as tags when using strings as tags\r\n      if (self.options.itemValue === defaultOptions.itemValue) {\r\n        if (self.$element[0].tagName === 'INPUT') {\r\n            self.add(self.$element.val());\r\n        } else {\r\n          $('option', self.$element).each(function() {\r\n            self.add($(this).attr('value'), true);\r\n          });\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Removes all tagsinput behaviour and unregsiter all event handlers\r\n     */\r\n    destroy: function() {\r\n      var self = this;\r\n\r\n      // Unbind events\r\n      self.$container.off('keypress', 'input');\r\n      self.$container.off('click', '[role=remove]');\r\n\r\n      self.$container.remove();\r\n      self.$element.removeData('tagsinput');\r\n      self.$element.show();\r\n    },\r\n\r\n    /**\r\n     * Sets focus on the tagsinput\r\n     */\r\n    focus: function() {\r\n      this.$input.focus();\r\n    },\r\n\r\n    /**\r\n     * Returns the internal input element\r\n     */\r\n    input: function() {\r\n      return this.$input;\r\n    },\r\n\r\n    /**\r\n     * Returns the element which is wrapped around the internal input. This\r\n     * is normally the $container, but typeahead.js moves the $input element.\r\n     */\r\n    findInputWrapper: function() {\r\n      var elt = this.$input[0],\r\n          container = this.$container[0];\r\n      while(elt && elt.parentNode !== container)\r\n        elt = elt.parentNode;\r\n\r\n      return $(elt);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Register JQuery plugin\r\n   */\r\n  $.fn.tagsinput = function(arg1, arg2) {\r\n    var results = [];\r\n\r\n    this.each(function() {\r\n      var tagsinput = $(this).data('tagsinput');\r\n\r\n      // Initialize a new tags input\r\n      if (!tagsinput) {\r\n        tagsinput = new TagsInput(this, arg1);\r\n        $(this).data('tagsinput', tagsinput);\r\n        results.push(tagsinput);\r\n\r\n        if (this.tagName === 'SELECT') {\r\n          $('option', $(this)).attr('selected', 'selected');\r\n        }\r\n\r\n        // Init tags from $(this).val()\r\n        $(this).val($(this).val());\r\n      } else {\r\n        // Invoke function on existing tags input\r\n        var retVal = tagsinput[arg1](arg2);\r\n        if (retVal !== undefined)\r\n          results.push(retVal);\r\n      }\r\n    });\r\n\r\n    if ( typeof arg1 == 'string') {\r\n      // Return the results from the invoked function calls\r\n      return results.length > 1 ? results : results[0];\r\n    } else {\r\n      return results;\r\n    }\r\n  };\r\n\r\n  $.fn.tagsinput.Constructor = TagsInput;\r\n\r\n  /**\r\n   * Most options support both a string or number as well as a function as\r\n   * option value. This function makes sure that the option with the given\r\n   * key in the given options is wrapped in a function\r\n   */\r\n  function makeOptionItemFunction(options, key) {\r\n    if (typeof options[key] !== 'function') {\r\n      var propertyName = options[key];\r\n      options[key] = function(item) { return item[propertyName]; };\r\n    }\r\n  }\r\n  function makeOptionFunction(options, key) {\r\n    if (typeof options[key] !== 'function') {\r\n      var value = options[key];\r\n      options[key] = function() { return value; };\r\n    }\r\n  }\r\n  /**\r\n   * HtmlEncodes the given value\r\n   */\r\n  var htmlEncodeContainer = $('<div />');\r\n  function htmlEncode(value) {\r\n    if (value) {\r\n      return htmlEncodeContainer.text(value).html();\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the position of the caret in the given input field\r\n   * http://flightschool.acylt.com/devnotes/caret-position-woes/\r\n   */\r\n  function doGetCaretPosition(oField) {\r\n    var iCaretPos = 0;\r\n    if (document.selection) {\r\n      oField.focus ();\r\n      var oSel = document.selection.createRange();\r\n      oSel.moveStart ('character', -oField.value.length);\r\n      iCaretPos = oSel.text.length;\r\n    } else if (oField.selectionStart || oField.selectionStart == '0') {\r\n      iCaretPos = oField.selectionStart;\r\n    }\r\n    return (iCaretPos);\r\n  }\r\n\r\n  /**\r\n   * Initialize tagsinput behaviour on inputs and selects which have\r\n   * data-role=tagsinput\r\n   */\r\n  $(function() {\r\n    $(\"input[data-role=tagsinput], select[multiple][data-role=tagsinput]\").tagsinput();\r\n  });\r\n})(window.jQuery);\r\n","var map = {\n\t\"./core/components/help/help.html\": 837,\n\t\"./core/components/manage_dashboards/manage_dashboards.html\": 838,\n\t\"./core/components/navbar/navbar.html\": 839,\n\t\"./core/components/search/search.html\": 840,\n\t\"./core/components/search/search_results.html\": 841,\n\t\"./features/admin/partials/admin_home.html\": 842,\n\t\"./features/admin/partials/edit_org.html\": 843,\n\t\"./features/admin/partials/edit_user.html\": 844,\n\t\"./features/admin/partials/new_user.html\": 845,\n\t\"./features/admin/partials/orgs.html\": 846,\n\t\"./features/admin/partials/settings.html\": 847,\n\t\"./features/admin/partials/stats.html\": 848,\n\t\"./features/admin/partials/styleguide.html\": 849,\n\t\"./features/admin/partials/users.html\": 850,\n\t\"./features/alerting/partials/alert_howto.html\": 851,\n\t\"./features/alerting/partials/alert_tab.html\": 852,\n\t\"./features/alerting/partials/notification_edit.html\": 853,\n\t\"./features/alerting/partials/notifications_list.html\": 854,\n\t\"./features/annotations/partials/editor.html\": 855,\n\t\"./features/annotations/partials/event_editor.html\": 856,\n\t\"./features/dashboard/dashlinks/editor.html\": 857,\n\t\"./features/dashboard/dashnav/dashnav.html\": 858,\n\t\"./features/dashboard/export/export_modal.html\": 859,\n\t\"./features/dashboard/export_data/export_data_modal.html\": 860,\n\t\"./features/dashboard/folder_picker/folder_picker.html\": 861,\n\t\"./features/dashboard/history/history.html\": 862,\n\t\"./features/dashboard/move_to_folder_modal/move_to_folder.html\": 863,\n\t\"./features/dashboard/panellinks/module.html\": 864,\n\t\"./features/dashboard/partials/create_folder.html\": 865,\n\t\"./features/dashboard/partials/dashboard_import.html\": 866,\n\t\"./features/dashboard/partials/folder_dashboards.html\": 867,\n\t\"./features/dashboard/partials/folder_permissions.html\": 868,\n\t\"./features/dashboard/partials/folder_settings.html\": 869,\n\t\"./features/dashboard/partials/inspector.html\": 870,\n\t\"./features/dashboard/partials/row_options.html\": 871,\n\t\"./features/dashboard/partials/shareModal.html\": 872,\n\t\"./features/dashboard/settings/settings.html\": 873,\n\t\"./features/dashboard/submenu/submenu.html\": 874,\n\t\"./features/dashboard/timepicker/settings.html\": 875,\n\t\"./features/dashboard/timepicker/timepicker.html\": 876,\n\t\"./features/manage-dashboards/partials/dashboard_list.html\": 877,\n\t\"./features/manage-dashboards/partials/snapshot_list.html\": 878,\n\t\"./features/org/partials/change_password.html\": 879,\n\t\"./features/org/partials/create_team.html\": 880,\n\t\"./features/org/partials/invite.html\": 881,\n\t\"./features/org/partials/newOrg.html\": 882,\n\t\"./features/org/partials/orgDetails.html\": 883,\n\t\"./features/org/partials/profile.html\": 884,\n\t\"./features/org/partials/select_org.html\": 885,\n\t\"./features/panel/partials/metrics_tab.html\": 886,\n\t\"./features/panel/partials/panelTime.html\": 887,\n\t\"./features/panel/partials/query_editor_row.html\": 888,\n\t\"./features/panel/partials/soloPanel.html\": 889,\n\t\"./features/playlist/partials/playlist.html\": 890,\n\t\"./features/playlist/partials/playlist_search.html\": 891,\n\t\"./features/playlist/partials/playlists.html\": 892,\n\t\"./features/plugins/import_list/import_list.html\": 893,\n\t\"./features/plugins/partials/ds_edit.html\": 894,\n\t\"./features/plugins/partials/ds_http_settings.html\": 895,\n\t\"./features/plugins/partials/plugin_edit.html\": 896,\n\t\"./features/plugins/partials/plugin_page.html\": 897,\n\t\"./features/plugins/partials/update_instructions.html\": 898,\n\t\"./features/templating/partials/editor.html\": 899,\n\t\"./partials/confirm_modal.html\": 900,\n\t\"./partials/dashboard.html\": 901,\n\t\"./partials/edit_json.html\": 902,\n\t\"./partials/error.html\": 903,\n\t\"./partials/login.html\": 904,\n\t\"./partials/modal.html\": 905,\n\t\"./partials/panelgeneral.html\": 906,\n\t\"./partials/reset_password.html\": 907,\n\t\"./partials/signup_invited.html\": 908,\n\t\"./partials/signup_step2.html\": 909,\n\t\"./partials/valueSelectDropdown.html\": 910,\n\t\"./plugins/datasource/cloudwatch/partials/annotations.editor.html\": 911,\n\t\"./plugins/datasource/cloudwatch/partials/config.html\": 912,\n\t\"./plugins/datasource/cloudwatch/partials/query.editor.html\": 913,\n\t\"./plugins/datasource/cloudwatch/partials/query.parameter.html\": 914,\n\t\"./plugins/datasource/elasticsearch/partials/annotations.editor.html\": 915,\n\t\"./plugins/datasource/elasticsearch/partials/bucket_agg.html\": 916,\n\t\"./plugins/datasource/elasticsearch/partials/config.html\": 917,\n\t\"./plugins/datasource/elasticsearch/partials/metric_agg.html\": 918,\n\t\"./plugins/datasource/elasticsearch/partials/query.editor.html\": 919,\n\t\"./plugins/datasource/grafana-live/partials/query.editor.html\": 920,\n\t\"./plugins/datasource/grafana/partials/annotations.editor.html\": 921,\n\t\"./plugins/datasource/grafana/partials/query.editor.html\": 922,\n\t\"./plugins/datasource/graphite/partials/annotations.editor.html\": 923,\n\t\"./plugins/datasource/graphite/partials/config.html\": 924,\n\t\"./plugins/datasource/graphite/partials/query.editor.html\": 925,\n\t\"./plugins/datasource/influxdb/partials/annotations.editor.html\": 926,\n\t\"./plugins/datasource/influxdb/partials/config.html\": 927,\n\t\"./plugins/datasource/influxdb/partials/query.editor.html\": 928,\n\t\"./plugins/datasource/logging/partials/config.html\": 929,\n\t\"./plugins/datasource/mssql/partials/annotations.editor.html\": 930,\n\t\"./plugins/datasource/mssql/partials/config.html\": 931,\n\t\"./plugins/datasource/mssql/partials/query.editor.html\": 932,\n\t\"./plugins/datasource/mysql/partials/annotations.editor.html\": 933,\n\t\"./plugins/datasource/mysql/partials/config.html\": 934,\n\t\"./plugins/datasource/mysql/partials/query.editor.html\": 935,\n\t\"./plugins/datasource/opentsdb/partials/annotations.editor.html\": 936,\n\t\"./plugins/datasource/opentsdb/partials/config.html\": 937,\n\t\"./plugins/datasource/opentsdb/partials/query.editor.html\": 938,\n\t\"./plugins/datasource/postgres/partials/annotations.editor.html\": 939,\n\t\"./plugins/datasource/postgres/partials/config.html\": 940,\n\t\"./plugins/datasource/postgres/partials/query.editor.html\": 941,\n\t\"./plugins/datasource/prometheus/partials/annotations.editor.html\": 942,\n\t\"./plugins/datasource/prometheus/partials/config.html\": 943,\n\t\"./plugins/datasource/prometheus/partials/query.editor.html\": 944,\n\t\"./plugins/datasource/stackdriver/partials/annotations.editor.html\": 945,\n\t\"./plugins/datasource/stackdriver/partials/config.html\": 946,\n\t\"./plugins/datasource/stackdriver/partials/query.aggregation.html\": 947,\n\t\"./plugins/datasource/stackdriver/partials/query.editor.html\": 948,\n\t\"./plugins/datasource/stackdriver/partials/query.filter.html\": 949,\n\t\"./plugins/datasource/testdata/partials/query.editor.html\": 950,\n\t\"./plugins/panel/alertlist/editor.html\": 951,\n\t\"./plugins/panel/alertlist/module.html\": 952,\n\t\"./plugins/panel/dashlist/editor.html\": 953,\n\t\"./plugins/panel/dashlist/module.html\": 954,\n\t\"./plugins/panel/gettingstarted/editor.html\": 955,\n\t\"./plugins/panel/gettingstarted/module.html\": 956,\n\t\"./plugins/panel/graph/axes_editor.html\": 957,\n\t\"./plugins/panel/graph/tab_display.html\": 958,\n\t\"./plugins/panel/graph/tab_legend.html\": 959,\n\t\"./plugins/panel/heatmap/module.html\": 960,\n\t\"./plugins/panel/heatmap/partials/axes_editor.html\": 961,\n\t\"./plugins/panel/heatmap/partials/display_editor.html\": 962,\n\t\"./plugins/panel/pluginlist/editor.html\": 963,\n\t\"./plugins/panel/pluginlist/module.html\": 964,\n\t\"./plugins/panel/singlestat/editor.html\": 965,\n\t\"./plugins/panel/singlestat/mappings.html\": 966,\n\t\"./plugins/panel/singlestat/module.html\": 967,\n\t\"./plugins/panel/table/column_options.html\": 968,\n\t\"./plugins/panel/table/editor.html\": 969,\n\t\"./plugins/panel/table/module.html\": 970,\n\t\"./plugins/panel/text/editor.html\": 971,\n\t\"./plugins/panel/text/module.html\": 972,\n\t\"./plugins/panel/unknown/module.html\": 973\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 836;","let templates = (require as any).context('../', true, /\\.html$/);\r\ntemplates.keys().forEach(key => {\r\n  templates(key);\r\n});\r\n","var path = 'public/app/core/components/help/help.html';\nvar html = \"<div class=modal-body>\\r\\n\\t<div class=modal-header>\\r\\n\\t\\t<h2 class=modal-header-title>\\r\\n\\t\\t\\t<i class=\\\"fa fa-keyboard-o\\\"></i>\\r\\n\\t\\t\\t<span class=p-l-1>Shortcuts</span>\\r\\n\\t\\t</h2>\\r\\n\\t\\t<a class=modal-header-close ng-click=ctrl.dismiss();>\\r\\n\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t</a>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"modal-content help-modal\\\">\\r\\n\\r\\n\\t\\t<p class=small style=position:absolute;top:13px;right:44px>\\r\\n\\t\\t\\t<span class=shortcut-table-key>mod</span> =\\r\\n\\t\\t\\t<span class=muted>CTRL on windows or linux and CMD key on Mac</span>\\r\\n\\t\\t</p>\\r\\n\\r\\n\\t\\t<div ng-repeat=\\\"(category, shortcuts) in ctrl.shortcuts\\\" class=shortcut-category>\\r\\n\\t\\t\\t<table class=shortcut-table>\\r\\n\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t<th class=shortcut-table-category-header colspan=2>{{category}}</th>\\r\\n\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t<tr ng-repeat=\\\"shortcut in shortcuts\\\">\\r\\n\\t\\t\\t\\t\\t\\t<td class=shortcut-table-keys>\\r\\n              <span class=shortcut-table-key ng-repeat=\\\"key in shortcut.keys track by $index\\\" ng-bind-html=key>\\r\\n              </span>\\r\\n            </td>\\r\\n\\t\\t\\t\\t\\t\\t<td class=shortcut-table-description>{{shortcut.description}}</td>\\r\\n\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t</tbody></tbody></table>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=clearfix></div>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/core/components/search/search_results.html';\nvar html = \"<div ng-repeat=\\\"section in ctrl.results\\\" class=search-section>\\r\\n  <div class=\\\"search-section__header pointer\\\" ng-hide=section.hideHeader ng-class=\\\"{'selected': section.selected}\\\" ng-click=ctrl.toggleFolderExpand(section)>\\r\\n    <div ng-click=\\\"ctrl.toggleSelection(section, $event)\\\">\\r\\n      <gf-form-switch ng-show=ctrl.editable on-change=ctrl.selectionChanged($event) checked=section.checked switch-class=\\\"gf-form-switch--transparent gf-form-switch--search-result__section\\\">\\r\\n      </gf-form-switch>\\r\\n    </div>\\r\\n    <i class=search-section__header__icon ng-class=section.icon></i>\\r\\n    <span class=search-section__header__text>{{::section.title}}</span>\\r\\n    <a ng-show=section.url href={{section.url}} class=search-section__header__link>\\r\\n      <i class=\\\"fa fa-cog\\\"></i>\\r\\n    </a>\\r\\n    <i class=\\\"fa fa-angle-down search-section__header__toggle\\\" ng-show=section.expanded></i>\\r\\n    <i class=\\\"fa fa-angle-right search-section__header__toggle\\\" ng-hide=section.expanded></i>\\r\\n  </div>\\r\\n\\r\\n  <div class=search-section__header ng-show=section.hideHeader></div>\\r\\n\\r\\n  <div ng-if=section.expanded>\\r\\n    <a ng-repeat=\\\"item in section.items\\\" class=\\\"search-item search-item--indent\\\" ng-class=\\\"{'selected': item.selected}\\\" ng-href={{::item.url}}>\\r\\n      <div ng-click=\\\"ctrl.toggleSelection(item, $event)\\\">\\r\\n        <gf-form-switch ng-show=ctrl.editable on-change=ctrl.selectionChanged() checked=item.checked switch-class=\\\"gf-form-switch--transparent gf-form-switch--search-result__item\\\">\\r\\n        </gf-form-switch>\\r\\n      </div>\\r\\n      <span class=search-item__icon>\\r\\n        <i class=\\\"gicon mini gicon-dashboard-list\\\"></i>\\r\\n      </span>\\r\\n      <span class=search-item__body ng-click=ctrl.onItemClick(item)>\\r\\n        <div class=search-item__body-title>{{::item.title}}</div>\\r\\n        <span class=search-item__body-folder-title>{{::item.folderTitle}}</span>\\r\\n      </span>\\r\\n      <span class=search-item__tags>\\r\\n        <span ng-click=\\\"ctrl.selectTag(tag, $event)\\\" ng-repeat=\\\"tag in item.tags\\\" tag-color-from-name=tag class=\\\"label label-tag\\\">\\r\\n          {{tag}}\\r\\n        </span>\\r\\n      </span>\\r\\n    </a>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/admin/partials/admin_home.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\r\\n  <div class=\\\"grafana-info-box span8\\\">\\r\\n    Grafana is a multi-tenant system where most can be configured per organization. These\\r\\n    admin pages are for server admins where you can manage orgs, & all users across all orgs.\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/admin/partials/edit_org.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\t<h2 class=page-sub-heading>Edit Organization</h2>\\r\\n\\r\\n\\t<form name=orgDetailsForm class=gf-form-group>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Name</span>\\r\\n\\t\\t\\t<input type=text required ng-model=org.name class=\\\"gf-form-input max-width-14\\\">\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=update() ng-show=!createMode>Update</button>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n\\r\\n\\t<h3 class=page-heading>Organization Users</h3>\\r\\n\\r\\n\\t<table class=filter-table>\\r\\n\\t\\t<tr>\\r\\n\\t\\t\\t<th>Username</th>\\r\\n\\t\\t\\t<th>Email</th>\\r\\n\\t\\t\\t<th>Role</th>\\r\\n\\t\\t\\t<th></th>\\r\\n\\t\\t</tr>\\r\\n\\t\\t<tr ng-repeat=\\\"orgUser in orgUsers\\\">\\r\\n\\t\\t\\t<td>{{orgUser.login}}</td>\\r\\n\\t\\t\\t<td>{{orgUser.email}}</td>\\r\\n\\t\\t\\t<td>\\r\\n        <div class=gf-form>\\r\\n          <span class=gf-form-select-wrapper>\\r\\n              <select type=text ng-model=orgUser.role class=\\\"gf-form-input max-width-8\\\" ng-options=\\\"f for f in ['Viewer', 'Editor', 'Admin']\\\" ng-change=updateOrgUser(orgUser)>\\r\\n              </select>\\r\\n          </span>\\r\\n        </div>\\r\\n\\t\\t\\t</td>\\r\\n\\t\\t\\t<td style=width:1%>\\r\\n\\t\\t\\t\\t<a ng-click=removeOrgUser(orgUser) class=\\\"btn btn-danger btn-mini\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</td>\\r\\n\\t\\t</tr>\\r\\n\\t</table>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/admin/partials/edit_user.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\r\\n\\t<div class=page-sub-heading>\\r\\n\\t\\t<h2>Edit User</h2>\\r\\n\\t</div>\\r\\n\\r\\n\\t<form name=userForm class=gf-form-group>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Name</span>\\r\\n\\t\\t\\t\\t<input type=text required ng-model=user.name class=\\\"gf-form-input max-width-25\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Email</span>\\r\\n\\t\\t\\t\\t<input type=email ng-model=user.email class=\\\"gf-form-input max-width-25\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Username</span>\\r\\n\\t\\t\\t\\t<input type=text ng-model=user.login class=\\\"gf-form-input max-width-25\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=update() ng-show=!createMode>Update</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t</form>\\r\\n\\r\\n\\t<h3 class=page-heading>Change password</h3>\\r\\n\\r\\n\\t<form name=passwordForm class=gf-form-group>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">New password</span>\\r\\n\\t\\t\\t\\t<input type=password required ng-minlength=4 ng-model=password class=\\\"gf-form-input max-width-25\\\">\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=setPassword()>Update</button>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n\\r\\n\\t<h3 class=page-heading>Permissions</h3>\\r\\n\\r\\n\\t<form name=passwordForm class=gf-form-group>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=\\\"Grafana Admin\\\" checked=permissions.isGrafanaAdmin switch-class=max-width-6></gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=updatePermissions()>Update</button>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n\\r\\n\\t<h3 class=page-heading>Organizations</h3>\\r\\n\\r\\n\\t<form name=addOrgForm class=gf-form-group>\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=gf-form-label>Add</span>\\r\\n\\t\\t\\t\\t<input type=text ng-model=newOrg.name bs-typeahead=searchOrgs required class=\\\"gf-form-input max-width-20\\\" placeholder=\\\"organization name\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n        \\t<span class=gf-form-label>Role</span>\\r\\n        \\t<span class=gf-form-select-wrapper>\\r\\n            \\t<select type=text ng-model=newOrg.role class=\\\"gf-form-input width-10\\\" ng-options=\\\"f for f in ['Viewer', 'Editor', 'Admin']\\\"></select>\\r\\n        \\t</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<button class=\\\"btn btn-success gf-form-btn\\\" ng-click=addOrgUser()>Add</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n\\r\\n\\t<table class=filter-table>\\r\\n\\t\\t<thead>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<th>Name</th>\\r\\n\\t\\t\\t\\t<th>Role</th>\\r\\n\\t\\t\\t\\t<th></th>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t</thead>\\r\\n\\t\\t<tr ng-repeat=\\\"org in orgs\\\">\\r\\n\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t{{org.name}} <span class=\\\"label label-info\\\" ng-show=\\\"org.orgId === user.orgId\\\">Current</span>\\r\\n\\t\\t\\t</td>\\r\\n\\t\\t\\t<td>\\r\\n        <div class=gf-form>\\r\\n            <span class=gf-form-select-wrapper>\\r\\n                <select type=text ng-model=org.role class=\\\"gf-form-input max-width-12\\\" ng-options=\\\"f for f in ['Viewer', 'Editor', 'Admin']\\\" ng-change=updateOrgUser(org)>\\r\\n                </select>\\r\\n            </span>\\r\\n        </div>\\r\\n\\t\\t\\t</td>\\r\\n\\t\\t\\t<td style=width:1%>\\r\\n\\t\\t\\t\\t<a ng-click=removeOrgUser(org) class=\\\"btn btn-danger btn-mini\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</td>\\r\\n\\t\\t</tr>\\r\\n\\t</table>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/admin/partials/new_user.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\t<div class=page-sub-heading>\\r\\n\\t\\t<h1>Add new user</h1>\\r\\n\\t</div>\\r\\n\\r\\n\\t<form name=userForm class=gf-form-group>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Name</span>\\r\\n\\t\\t\\t<input type=text required ng-model=user.name class=\\\"gf-form-input max-width-20\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Email</span>\\r\\n\\t\\t\\t<input type=email ng-model=user.email class=\\\"gf-form-input max-width-20\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Username</span>\\r\\n\\t\\t\\t<input type=text ng-model=user.login class=\\\"gf-form-input max-width-20\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Password</span>\\r\\n\\t\\t\\t<input type=password required ng-model=user.password class=\\\"gf-form-input max-width-20\\\">\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=create()>Create</button>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/admin/partials/orgs.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n  <div class=page-action-bar>\\r\\n    <div class=page-action-bar__spacer></div>\\r\\n    <a class=\\\"page-header__cta btn btn-success\\\" href=org/new>\\r\\n      <i class=\\\"fa fa-plus\\\"></i>\\r\\n      New Org\\r\\n    </a>\\r\\n  </div>\\r\\n\\r\\n  <table class=\\\"filter-table form-inline filter-table--hover\\\">\\r\\n    <thead>\\r\\n      <tr>\\r\\n        <th>Id</th>\\r\\n        <th>Name</th>\\r\\n        <th style=width:1%></th>\\r\\n      </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n      <tr ng-repeat=\\\"org in orgs\\\">\\r\\n        <td class=link-td>\\r\\n          <a href=admin/orgs/edit/{{org.id}}>\\r\\n            {{org.id}}\\r\\n          </a>\\r\\n        </td>\\r\\n        <td class=link-td>\\r\\n          <a href=admin/orgs/edit/{{org.id}}>\\r\\n            {{org.name}}\\r\\n          </a>\\r\\n        </td>\\r\\n        <td class=text-right>\\r\\n          <a ng-click=deleteOrg(org) class=\\\"btn btn-danger btn-small\\\">\\r\\n            <i class=\\\"fa fa-remove\\\"></i>\\r\\n          </a>\\r\\n        </td>\\r\\n      </tr>\\r\\n    </tbody>\\r\\n  </table>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/admin/partials/settings.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\r\\n\\t<div class=\\\"grafana-info-box span8\\\" style=\\\"margin:20px 0 25px 0\\\">\\r\\n\\t\\tThese system settings are defined in grafana.ini or custom.ini (or overridden in ENV variables).\\r\\n\\t\\tTo change these you currently need to restart grafana.\\r\\n\\t</div>\\r\\n\\r\\n\\t<table class=filter-table>\\r\\n\\t\\t<tr ng-repeat-start=\\\"(secName, secValue) in settings\\\">\\r\\n\\t\\t\\t<td class=admin-settings-section>{{secName}}</td>\\r\\n\\t\\t\\t<td></td>\\r\\n\\t\\t</tr>\\r\\n\\t\\t<tr ng-repeat=\\\"(keyName, keyValue) in secValue\\\" ng-repeat-end>\\r\\n\\t\\t\\t<td style=padding-left:25px>{{keyName}}</td>\\r\\n\\t\\t\\t<td>{{keyValue}}</td>\\r\\n\\t\\t</tr>\\r\\n\\t</table>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/admin/partials/stats.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\t<table class=\\\"filter-table form-inline\\\">\\r\\n\\t\\t<thead>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<th>Name</th>\\r\\n\\t\\t\\t\\t<th>Value</th>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t</thead>\\r\\n\\t\\t<tbody>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>Total dashboards</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.dashboards}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>Total users</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.users}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>Active users (seen last 14 days)</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.activeUsers}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>Total organizations</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.orgs}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>Total datasources</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.datasources}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>Total playlists</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.playlists}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>Total snapshots</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.snapshots}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>Total dashboard tags</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.tags}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>Total starred dashboards</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.stars}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n      <tr>\\r\\n\\t\\t\\t\\t<td>Total alerts</td>\\r\\n\\t\\t\\t\\t<td>{{ctrl.stats.alerts}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t</tbody>\\r\\n\\t</table>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/admin/partials/styleguide.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\r\\n\\t<h3 class=page-heading>Buttons</h3>\\r\\n\\r\\n\\t<div class=tab-pane>\\r\\n\\t\\t<div ng-repeat=\\\"variant in ctrl.buttonVariants\\\" class=row>\\r\\n\\t\\t\\t<div ng-repeat=\\\"btnSize in ctrl.buttonSizes\\\" class=\\\"style-guide-button-list p-a-2 col-md-4\\\">\\r\\n\\t\\t\\t\\t<button ng-repeat=\\\"buttonName in ctrl.buttonNames\\\" class=\\\"btn btn{{variant}}{{buttonName}} {{btnSize}}\\\">\\r\\n\\t\\t\\t\\t\\tbtn{{variant}}{{buttonName}}\\r\\n\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<h3 class=page-heading>Forms</h3>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=gf-form-label>Label</label>\\r\\n\\t\\t\\t<input type=text class=gf-form-input />\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/admin/partials/users.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\t<div class=page-action-bar>\\r\\n    <label class=\\\"gf-form gf-form--grow gf-form--has-input-icon\\\">\\r\\n      <input type=text class=\\\"gf-form-input max-width-30\\\" placeholder=\\\"Find user by name/login/email\\\" tabindex=1 give-focus=true ng-model=ctrl.query ng-model-options=\\\"{ debounce: 500 }\\\" spellcheck=false ng-change=ctrl.getUsers() />\\r\\n      <i class=\\\"gf-form-input-icon fa fa-search\\\"></i>\\r\\n    </label>\\r\\n    <div class=page-action-bar__spacer></div>\\r\\n    <a class=\\\"btn btn-success\\\" href=admin/users/create>\\r\\n      <i class=\\\"fa fa-plus\\\"></i>\\r\\n      Add new user\\r\\n    </a>\\r\\n  </div>\\r\\n\\r\\n  <div class=admin-list-table>\\r\\n    <table class=\\\"filter-table form-inline filter-table--hover\\\">\\r\\n      <thead>\\r\\n        <tr>\\r\\n          <th></th>\\r\\n          <th>Login</th>\\r\\n          <th>Email</th>\\r\\n          <th>\\r\\n            Seen\\r\\n            <tip>Time since user was seen using Grafana</tip>\\r\\n          </th>\\r\\n          <th></th>\\r\\n          <th style=width:1%></th>\\r\\n        </tr>\\r\\n      </thead>\\r\\n      <tbody>\\r\\n        <tr ng-repeat=\\\"user in ctrl.users\\\">\\r\\n          <td class=\\\"width-4 text-center link-td\\\">\\r\\n            <a href=admin/users/edit/{{user.id}}>\\r\\n              <img class=filter-table__avatar ng-src={{user.avatarUrl}}>\\r\\n            </a>\\r\\n          </td>\\r\\n          <td class=link-td>\\r\\n            <a href=admin/users/edit/{{user.id}}>\\r\\n              {{user.login}}\\r\\n            </a>\\r\\n          </td>\\r\\n          <td class=link-td>\\r\\n            <a href=admin/users/edit/{{user.id}}>\\r\\n              {{user.email}}\\r\\n            </a>\\r\\n          </td>\\r\\n          <td class=link-td>\\r\\n            <a href=admin/users/edit/{{user.id}}>\\r\\n              {{user.lastSeenAtAge}}\\r\\n            </a>\\r\\n          </td>\\r\\n          <td class=link-td>\\r\\n            <a href=admin/users/edit/{{user.id}}>\\r\\n              <i class=\\\"fa fa-shield\\\" ng-show=user.isAdmin bs-tooltip=\\\"'Grafana Admin'\\\"></i>\\r\\n            </a>\\r\\n          </td>\\r\\n          <td class=text-right>\\r\\n            <a ng-click=ctrl.deleteUser(user) class=\\\"btn btn-danger btn-small\\\">\\r\\n              <i class=\\\"fa fa-remove\\\"></i>\\r\\n            </a>\\r\\n          </td>\\r\\n        </tr>\\r\\n      </tbody>\\r\\n\\r\\n    </table>\\r\\n  </div>\\r\\n\\r\\n  <div class=admin-list-paging ng-if=ctrl.showPaging>\\r\\n    <ol>\\r\\n      <li ng-repeat=\\\"page in ctrl.pages\\\">\\r\\n        <button class=\\\"btn btn-small\\\" ng-class=\\\"{'btn-secondary': page.current, 'btn-inverse': !page.current}\\\" ng-click=ctrl.navigateToPage(page)>{{page.page}}</button>\\r\\n      </li>\\r\\n    </ol>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/alerting/partials/alert_howto.html';\nvar html = \"<div class=modal-body>\\r\\n\\t<div class=modal-header>\\r\\n\\t\\t<h2 class=modal-header-title>\\r\\n\\t\\t\\t<i class=\\\"fa fa-info-circle\\\"></i>\\r\\n\\t\\t\\t<span class=p-l-1>Adding an Alert</span>\\r\\n\\t\\t</h2>\\r\\n\\r\\n\\t\\t<a class=modal-header-close ng-click=dismiss();>\\r\\n\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t</a>\\r\\n\\t</div>\\r\\n\\r\\n\\r\\n\\t<div class=modal-content>\\r\\n\\t\\t<div class=text-center>\\r\\n\\t\\t\\t<img src=public/img/alert_howto_new.png>\\r\\n\\t\\t</div>\\r\\n\\t\\t<p class=\\\"p-a-2 text-center offset-lg-1 col-lg-10\\\">\\r\\n\\t\\t\\tAlerts are added and configured in the <strong>Alert Tab</strong> of any dashboard\\r\\n\\t\\t\\tgraph panel, letting you build and visualize an alert using existing queries.\\r\\n\\t\\t\\t<br> <br>\\r\\n\\t\\t\\tTo persist your alert rule changes remember to save the dashboard.\\r\\n\\t\\t\\t<br>\\r\\n\\t\\t\\t<br>\\r\\n\\t\\t</p>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/alerting/partials/alert_tab.html';\nvar html = \"<div class=edit-tab-with-sidemenu ng-if=ctrl.alert>\\r\\n\\t<aside class=edit-sidemenu-aside>\\r\\n\\t\\t<ul class=edit-sidemenu>\\r\\n\\t\\t\\t<li ng-class=\\\"{active: ctrl.subTabIndex === 0}\\\">\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.changeTabIndex(0)>Alert Config</a>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t\\t<li ng-class=\\\"{active: ctrl.subTabIndex === 1}\\\">\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.changeTabIndex(1)>\\r\\n\\t\\t\\t\\t\\tNotifications <span class=muted>({{ctrl.alertNotifications.length}})</span>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t\\t<li ng-class=\\\"{active: ctrl.subTabIndex === 2}\\\">\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.changeTabIndex(2)>State history</a>\\r\\n\\t\\t\\t</li>\\r\\n      <li>\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.delete()>Delete</a>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t</ul>\\r\\n\\t</aside>\\r\\n\\r\\n\\t<div class=edit-tab-content>\\r\\n\\t\\t<div ng-if=\\\"ctrl.subTabIndex === 0\\\">\\r\\n\\t\\t\\t<div class=\\\"alert alert-error m-b-2\\\" ng-show=ctrl.error>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-warning\\\"></i> {{ctrl.error}}\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t\\t<h5 class=section-heading>Alert Config</h5>\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-6\\\">Name</span>\\r\\n\\t\\t\\t\\t\\t<input type=text class=\\\"gf-form-input width-20\\\" ng-model=ctrl.alert.name>\\r\\n\\t\\t\\t\\t\\t<span class=gf-form-label>Evaluate every</span>\\r\\n\\t\\t\\t\\t\\t<input class=\\\"gf-form-input max-width-5\\\" type=text ng-model=ctrl.alert.frequency>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t\\t<h5 class=section-heading>Conditions</h5>\\r\\n\\t\\t\\t\\t<div class=gf-form-inline ng-repeat=\\\"conditionModel in ctrl.conditionModels\\\">\\r\\n\\t\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t\\t<metric-segment-model css-class=\\\"query-keyword width-5\\\" ng-if=$index property=conditionModel.operator.type options=ctrl.evalOperators custom=false></metric-segment-model>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"gf-form-label query-keyword width-5\\\" ng-if=\\\"$index===0\\\">WHEN</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n          \\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t\\t<query-part-editor class=\\\"gf-form-label query-part width-9\\\" part=conditionModel.reducerPart handle-event=\\\"ctrl.handleReducerPartEvent(conditionModel, $event)\\\">\\r\\n\\t\\t\\t\\t\\t\\t</query-part-editor>\\r\\n            \\t\\t\\t<span class=\\\"gf-form-label query-keyword\\\">OF</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t\\t<query-part-editor class=\\\"gf-form-label query-part\\\" part=conditionModel.queryPart handle-event=\\\"ctrl.handleQueryPartEvent(conditionModel, $event)\\\">\\r\\n\\t\\t\\t\\t\\t\\t</query-part-editor>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t\\t<metric-segment-model property=conditionModel.evaluator.type options=ctrl.evalFunctions custom=false css-class=query-keyword on-change=ctrl.evaluatorTypeChanged(conditionModel.evaluator)></metric-segment-model>\\r\\n\\t\\t\\t\\t\\t\\t<input class=\\\"gf-form-input max-width-9\\\" type=number step=any ng-hide=\\\"conditionModel.evaluator.params.length === 0\\\" ng-model=conditionModel.evaluator.params[0] ng-change=ctrl.evaluatorParamsChanged()>\\r\\n            \\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\" ng-show=\\\"conditionModel.evaluator.params.length === 2\\\">TO</label>\\r\\n            \\t\\t\\t<input class=\\\"gf-form-input max-width-9\\\" type=number step=any ng-if=\\\"conditionModel.evaluator.params.length === 2\\\" ng-model=conditionModel.evaluator.params[1] ng-change=ctrl.evaluatorParamsChanged()>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<a class=pointer tabindex=1 ng-click=ctrl.removeCondition($index)>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-trash\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<label class=\\\"gf-form-label dropdown\\\">\\r\\n\\t\\t\\t\\t\\t\\t<a class=\\\"pointer dropdown-toggle\\\" data-toggle=dropdown>\\r\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-plus\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t\\t\\t<ul class=dropdown-menu role=menu>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li ng-repeat=\\\"ct in ctrl.conditionTypes\\\" role=menuitem>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a ng-click=ctrl.addCondition(ct.value);>{{ct.text}}</a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n          \\t\\t\\t<span class=\\\"gf-form-label width-18\\\">If no data or all values are null</span>\\r\\n          \\t\\t\\t<span class=\\\"gf-form-label query-keyword\\\">SET STATE TO</span>\\r\\n\\t\\t\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.alert.noDataState ng-options=\\\"f.value as f.text for f in ctrl.noDataModes\\\">\\r\\n\\t\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n          \\t\\t\\t<span class=\\\"gf-form-label width-18\\\">If execution error or timeout</span>\\r\\n          \\t\\t\\t<span class=\\\"gf-form-label query-keyword\\\">SET STATE TO</span>\\r\\n\\t\\t\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.alert.executionErrorState ng-options=\\\"f.value as f.text for f in ctrl.executionErrorModes\\\">\\r\\n\\t\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t\\t\\t<button class=\\\"btn btn-inverse\\\" ng-click=ctrl.test()>\\r\\n\\t\\t\\t\\t\\t\\tTest Rule\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-group ng-if=ctrl.testing>\\r\\n\\t\\t\\t\\tEvaluating rule <i class=\\\"fa fa-spinner fa-spin\\\"></i>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-group ng-if=ctrl.testResult>\\r\\n\\t\\t\\t\\t<json-tree root-name=result object=ctrl.testResult start-expanded=true></json-tree>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-group ng-if=\\\"ctrl.subTabIndex === 1\\\">\\r\\n\\t\\t\\t<h5 class=section-heading>Notifications</h5>\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-8\\\">Send to</span>\\r\\n\\t\\t\\t\\t\\t<span class=gf-form-label ng-repeat=\\\"nc in ctrl.alertNotifications\\\" ng-style=\\\"{'background-color': nc.bgColor }\\\">\\r\\n\\t\\t\\t\\t\\t\\t<i class={{nc.iconClass}}></i>&nbsp;{{nc.name}}&nbsp;\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove pointer muted\\\" ng-click=ctrl.removeNotification($index) ng-if=\\\"nc.isDefault === false\\\"></i>\\r\\n\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t<metric-segment segment=ctrl.addNotificationSegment get-options=ctrl.getNotifications() on-change=ctrl.notificationAdded()></metric-segment>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--v-stretch\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-8\\\">Message</span>\\r\\n\\t\\t\\t\\t<textarea class=gf-form-input rows=10 ng-model=ctrl.alert.message placeholder=\\\"Notification message details...\\\"></textarea>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-group style=max-width:720px ng-if=\\\"ctrl.subTabIndex === 2\\\">\\r\\n\\t\\t\\t<button class=\\\"btn btn-mini btn-danger pull-right\\\" ng-click=ctrl.clearHistory()><i class=\\\"fa fa-trash\\\"></i>&nbsp;Clear history</button>\\r\\n      \\t\\t<h5 class=section-heading style=whitespace:nowrap>\\r\\n\\t\\t\\t\\tState history <span class=\\\"muted small\\\">(last 50 state changes)</span>\\r\\n\\t\\t\\t</h5>\\r\\n\\r\\n\\t\\t\\t<div ng-show=\\\"ctrl.alertHistory.length === 0\\\">\\r\\n\\t\\t\\t\\t<br>\\r\\n\\t\\t\\t\\t<i>No state changes recorded</i>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n      <ol class=alert-rule-list>\\r\\n        <li class=alert-rule-item ng-repeat=\\\"al in ctrl.alertHistory\\\">\\r\\n          <div class=\\\"alert-rule-item__icon {{al.stateModel.stateClass}}\\\">\\r\\n            <i class={{al.stateModel.iconClass}}></i>\\r\\n          </div>\\r\\n          <div class=alert-rule-item__body>\\r\\n            <div class=alert-rule-item__header>\\r\\n              <div class=alert-rule-item__text>\\r\\n                <span class={{al.stateModel.stateClass}}>{{al.stateModel.text}}</span>\\r\\n              </div>\\r\\n            </div>\\r\\n            <span class=alert-list-info>{{al.info}}</span>\\r\\n          </div>\\r\\n          <div class=alert-rule-item__time>\\r\\n            <span>{{al.time}}</span>\\r\\n          </div>\\r\\n        </li>\\r\\n      </ol>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group ng-if=!ctrl.alert>\\r\\n  <div class=gf-form-button-row>\\r\\n    <button class=\\\"btn btn-inverse\\\" ng-click=ctrl.enable()>\\r\\n      <i class=\\\"icon-gf icon-gf-alert\\\"></i>\\r\\n      Create Alert\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/alerting/partials/notification_edit.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\r\\n  <h3 class=page-sub-heading ng-hide=ctrl.isNew>Edit Notification Channel</h3>\\r\\n  <h3 class=page-sub-heading ng-show=ctrl.isNew>New Notification Channel</h3>\\r\\n\\r\\n  <form name=ctrl.theForm ng-if=ctrl.notifiers>\\r\\n    <div class=gf-form-group>\\r\\n      <div class=gf-form>\\r\\n        <span class=\\\"gf-form-label width-12\\\">Name</span>\\r\\n        <input type=text required class=\\\"gf-form-input max-width-15\\\" ng-model=ctrl.model.name required>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <span class=\\\"gf-form-label width-12\\\">Type</span>\\r\\n        <div class=\\\"gf-form-select-wrapper width-15\\\">\\r\\n          <select class=gf-form-input ng-model=ctrl.model.type ng-options=\\\"t.type as t.name for t in ctrl.notifiers\\\" ng-change=\\\"ctrl.typeChanged(notification, $index)\\\">\\r\\n          </select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <gf-form-switch class=gf-form label=\\\"Send on all alerts\\\" label-class=width-14 checked=ctrl.model.isDefault tooltip=\\\"Use this notification for all alerts\\\">\\r\\n      </gf-form-switch>\\r\\n      <gf-form-switch class=gf-form label=\\\"Include image\\\" label-class=width-14 checked=ctrl.model.settings.uploadImage tooltip=\\\"Captures an image and include it in the notification\\\">\\r\\n      </gf-form-switch>\\r\\n      <gf-form-switch class=gf-form label=\\\"Disable Resolve Message\\\" label-class=width-14 checked=ctrl.model.disableResolveMessage tooltip=\\\"Disable the resolve message [OK] that is sent when alerting state returns to false\\\">\\r\\n      </gf-form-switch>\\r\\n      <gf-form-switch class=gf-form label=\\\"Send reminders\\\" label-class=width-14 checked=ctrl.model.sendReminder tooltip=\\\"Send additional notifications for triggered alerts\\\">\\r\\n      </gf-form-switch>\\r\\n      <div class=gf-form-inline>\\r\\n        <div class=gf-form ng-if=ctrl.model.sendReminder>\\r\\n          <span class=\\\"gf-form-label width-12\\\">Send reminder every\\r\\n            <info-popover mode=right-normal position=\\\"top center\\\">\\r\\n              Specify how often reminders should be sent, e.g. every 30s, 1m, 10m, 30m or 1h etc.\\r\\n            </info-popover>\\r\\n          </span>\\r\\n          <input type=text placeholder=\\\"Select or specify custom\\\" class=\\\"gf-form-input width-15\\\" ng-model=ctrl.model.frequency bs-typeahead=ctrl.getFrequencySuggestion data-min-length=0 ng-required=ctrl.model.sendReminder>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n          <span class=\\\"alert alert-info width-30\\\" ng-if=ctrl.model.sendReminder>\\r\\n            Alert reminders are sent after rules are evaluated. Therefore a reminder can never be sent more frequently than a configured alert rule evaluation interval.\\r\\n          </span>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-group ng-include src=ctrl.notifierTemplateId>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"gf-form-group gf-form-button-row\\\">\\r\\n\\t\\t\\t<button type=submit ng-click=ctrl.save() class=\\\"btn btn-success width-7\\\">Save</button>\\r\\n\\t\\t\\t<button type=submit ng-click=ctrl.testNotification() class=\\\"btn btn-secondary width-7\\\">Send Test</button>\\r\\n\\t\\t\\t<a href=alerting/notifications class=\\\"btn btn-inverse\\\">Back</a>\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/alerting/partials/notifications_list.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\r\\n  <div ng-if=ctrl.notifications.length>\\r\\n    <div class=page-action-bar>\\r\\n      <div class=page-action-bar__spacer>\\r\\n      </div>\\r\\n\\r\\n      <a href=alerting/notification/new class=\\\"btn btn-success\\\">\\r\\n        <i class=\\\"fa fa-plus\\\"></i>\\r\\n        New Channel\\r\\n      </a>\\r\\n    </div>\\r\\n\\r\\n    <table class=\\\"filter-table filter-table--hover\\\">\\r\\n      <thead>\\r\\n        <th style=min-width:200px>\\r\\n          <strong>Name</strong>\\r\\n        </th>\\r\\n        <th style=min-width:100px>Type</th>\\r\\n        <th style=width:1%></th>\\r\\n      </thead>\\r\\n      <tbody>\\r\\n        <tr ng-repeat=\\\"notification in ctrl.notifications\\\">\\r\\n          <td class=link-td>\\r\\n            <a href=alerting/notification/{{notification.id}}/edit>\\r\\n              {{notification.name}}\\r\\n            </a>\\r\\n          </td>\\r\\n          <td class=link-td>\\r\\n            <a href=alerting/notification/{{notification.id}}/edit>\\r\\n              {{notification.type}}\\r\\n            </a>\\r\\n          </td>\\r\\n          <td class=text-right>\\r\\n            <span class=\\\"btn btn-secondary btn-small\\\" ng-show=\\\"notification.isDefault == true\\\">\\r\\n              default\\r\\n            </span>\\r\\n            <a ng-click=ctrl.deleteNotification(notification.id) class=\\\"btn btn-danger btn-small\\\">\\r\\n              <i class=\\\"fa fa-remove\\\"></i>\\r\\n            </a>\\r\\n          </td>\\r\\n        </tr>\\r\\n      </tbody>\\r\\n    </table>\\r\\n  </div>\\r\\n  <div ng-if=\\\"ctrl.notifications.length === 0\\\">\\r\\n    <empty-list-cta model=\\\"{\\r\\n      title: 'There are no notification channels defined yet',\\r\\n      buttonIcon: 'gicon gicon-add-alert-notification-channel',\\r\\n      buttonLink: 'alerting/notification/new',\\r\\n      buttonTitle: 'Add channel',\\r\\n      proTip: 'You can include images in your alert notifications.',\\r\\n      proTipLink: 'http://docs.grafana.org/alerting/notifications/',\\r\\n      proTipLinkTitle: 'Learn more',\\r\\n      proTipTarget: '_blank'\\r\\n    }\\\"/>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/annotations/partials/editor.html';\nvar html = \"\\r\\n<div ng-controller=AnnotationsEditorCtrl>\\r\\n\\t<h3 class=dashboard-settings__header>\\r\\n\\t\\t<a ng-click=ctrl.backToList()>Annotations</a>\\r\\n\\t\\t<span ng-show=\\\"ctrl.mode === 'new'\\\">&gt; New</span>\\r\\n\\t\\t<span ng-show=\\\"ctrl.mode === 'edit'\\\">&gt; Edit</span>\\r\\n\\t</h3>\\r\\n\\r\\n\\t<div ng-if=\\\"ctrl.mode === 'list'\\\">\\r\\n\\t\\t<div class=page-action-bar ng-if=\\\"ctrl.annotations.length > 1\\\">\\r\\n\\t\\t\\t<div class=page-action-bar__spacer></div>\\r\\n\\t\\t\\t<a type=button class=\\\"btn btn-success\\\" ng-click=ctrl.setupNew();><i class=\\\"fa fa-plus\\\"></i> New</a>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<table class=\\\"filter-table filter-table--hover\\\">\\r\\n\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t<th>Query name</th>\\r\\n\\t\\t\\t\\t\\t<th>Data source</th>\\r\\n\\t\\t\\t\\t\\t<th colspan=3></th>\\r\\n\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t<tr ng-repeat=\\\"annotation in ctrl.annotations track by annotation.name\\\">\\r\\n\\t\\t\\t\\t\\t<td style=width:90% ng-hide=annotation.builtIn class=pointer ng-click=ctrl.edit(annotation)>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-comment\\\" style=color:{};></i> &nbsp;\\r\\n\\t\\t\\t\\t\\t\\t{{annotation.name}}\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t<td style=width:90% ng-show=annotation.builtIn class=pointer ng-click=ctrl.edit(annotation)>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"gicon gicon-annotation\\\"></i> &nbsp;\\r\\n\\t\\t\\t\\t\\t\\t<em class=muted>{{annotation.name}} (Built-in)</em>\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t<td class=pointer ng-click=ctrl.edit(annotation)>\\r\\n\\t\\t\\t\\t\\t\\t{{annotation.datasource || 'Default'}}\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t<td style=width:1%><i ng-click=ctrl.move($index,-1) ng-hide=$first class=\\\"pointer fa fa-arrow-up\\\"></i></td>\\r\\n\\t\\t\\t\\t\\t<td style=width:1%><i ng-click=ctrl.move($index,1) ng-hide=$last class=\\\"pointer fa fa-arrow-down\\\"></i></td>\\r\\n\\t\\t\\t\\t\\t<td style=width:1%>\\r\\n\\t\\t\\t\\t\\t\\t<a ng-click=ctrl.removeAnnotation(annotation) class=\\\"btn btn-danger btn-mini\\\" ng-hide=annotation.builtIn>\\r\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t</tbody>\\r\\n\\t\\t</table>\\r\\n\\r\\n\\t\\t<!-- empty list cta, there is always one built in query -->\\r\\n\\t\\t<div ng-if=\\\"ctrl.annotations.length === 1\\\" class=p-t-2>\\r\\n\\t\\t\\t<div class=empty-list-cta>\\r\\n\\t\\t\\t\\t<div class=empty-list-cta__title>There are no custom annotation queries added yet</div>\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.setupNew() class=\\\"empty-list-cta__button btn btn-xlarge btn-success\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"gicon gicon-add-annotation\\\"></i>\\r\\n\\t\\t\\t\\t\\tAdd Annotation Query\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t<div class=grafana-info-box>\\r\\n\\t\\t\\t\\t\\t<h5>What are Annotations?</h5>\\r\\n\\t\\t\\t\\t\\t<p>\\r\\n\\t\\t\\t\\t\\tAnnotations provide a way to integrate event data into your graphs. They are visualized as vertical lines and icons\\r\\n\\t\\t\\t\\t\\ton all graph panels. When you hover over an annotation icon you can get event text &amp; tags for the event. You can add annotation events\\r\\n\\t\\t\\t\\t\\tdirectly from grafana by holding CTRL or CMD + click on graph (or drag region). These will be stored in Grafana's annotation database.\\r\\n\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t\\tCheckout the <a class=external-link target=_blank href=http://docs.grafana.org/reference/annotations/ >Annotations documentation</a> for more information.\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=annotations-basic-settings ng-if=\\\"ctrl.mode === 'edit' || ctrl.mode === 'new'\\\">\\r\\n\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t<h5 class=section-heading>General</h5>\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Name</span>\\r\\n\\t\\t\\t\\t\\t<input type=text class=\\\"gf-form-input width-20\\\" ng-model=ctrl.currentAnnotation.name placeholder=name>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Data source</span>\\r\\n\\t\\t\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.currentAnnotation.datasource ng-options=\\\"f.name as f.name for f in ctrl.datasources\\\" ng-change=ctrl.datasourceChanged()></select>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<gf-form-switch class=gf-form label=Enabled checked=ctrl.currentAnnotation.enable label-class=width-7>\\r\\n\\t\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t\\t\\t<gf-form-switch class=gf-form label=Hidden tooltip=\\\"Hides the annotation query toggle from showing at the top of the dashboard\\\" checked=ctrl.currentAnnotation.hide label-class=width-7>\\r\\n\\t\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<label class=\\\"gf-form-label width-9\\\">Color</label>\\r\\n\\t\\t\\t\\t\\t<span class=gf-form-label>\\r\\n\\t\\t\\t\\t\\t\\t<color-picker color=ctrl.currentAnnotation.iconColor onchange=ctrl.onColorChange></color-picker>\\r\\n\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<h5 class=section-heading>Query</h5>\\r\\n\\t\\t<rebuild-on-change property=ctrl.currentDatasource>\\r\\n\\t\\t\\t<plugin-component type=annotations-query-ctrl>\\r\\n\\t\\t\\t</plugin-component>\\r\\n\\t\\t</rebuild-on-change>\\r\\n\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<div class=\\\"gf-form-button-row p-y-0\\\">\\r\\n\\t\\t\\t\\t<button ng-show=\\\"ctrl.mode === 'new'\\\" type=button class=\\\"btn gf-form-button btn-success\\\" ng-click=ctrl.add()>Add</button>\\r\\n\\t\\t\\t\\t<button ng-show=\\\"ctrl.mode === 'edit'\\\" type=button class=\\\"btn btn-success pull-left\\\" ng-click=ctrl.update()>Update</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/annotations/partials/event_editor.html';\nvar html = \"\\r\\n<div class=graph-annotation>\\r\\n\\t<div class=graph-annotation__header>\\r\\n\\t\\t<div class=graph-annotation__user bs-tooltip=\\\"'Created by {{ctrl.login}}'\\\">\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=graph-annotation__title>\\r\\n\\t\\t\\t<span ng-if=!ctrl.event.id>Add Annotation</span>\\r\\n\\t\\t\\t<span ng-if=ctrl.event.id>Edit Annotation</span>\\r\\n\\t\\t</div>\\r\\n\\r\\n    <div class=graph-annotation__time>{{ctrl.timeFormated}}</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<form name=ctrl.form class=\\\"graph-annotation__body text-center\\\">\\r\\n\\t\\t<div style=display:inline-block>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--v-stretch\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Description</span>\\r\\n\\t\\t\\t\\t<textarea class=\\\"gf-form-input width-20\\\" rows=2 ng-model=ctrl.event.text placeholder=Description></textarea>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Tags</span>\\r\\n\\t\\t\\t\\t<bootstrap-tagsinput ng-model=ctrl.event.tags tagclass=\\\"label label-tag\\\" placeholder=\\\"add tags\\\">\\r\\n\\t\\t\\t\\t</bootstrap-tagsinput>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=ctrl.save()>Save</button>\\r\\n\\t\\t\\t\\t<button ng-if=ctrl.event.id type=submit class=\\\"btn btn-danger\\\" ng-click=ctrl.delete()>Delete</button>\\r\\n\\t\\t\\t\\t<a class=btn-text ng-click=ctrl.close();>Cancel</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/dashlinks/editor.html';\nvar html = \"<h3 class=dashboard-settings__header>\\r\\n  <a ng-click=ctrl.backToList()>Dashboard Links</a>\\r\\n  <span ng-show=\\\"ctrl.mode === 'new'\\\">&gt; New</span>\\r\\n  <span ng-show=\\\"ctrl.mode === 'edit'\\\">&gt; Edit</span>\\r\\n</h3>\\r\\n\\r\\n<div ng-if=\\\"ctrl.mode == 'list'\\\">\\r\\n  <div ng-if=\\\"ctrl.dashboard.links.length === 0\\\">\\r\\n    <div class=empty-list-cta>\\r\\n      <div class=empty-list-cta__title>\\r\\n        There are no dashboard links added yet\\r\\n      </div>\\r\\n      <a ng-click=ctrl.setupNew() class=\\\"empty-list-cta__button btn btn-xlarge btn-success\\\">\\r\\n        <i class=\\\"gicon gicon-add-link\\\"></i>\\r\\n        Add Dashboard Link\\r\\n      </a>\\r\\n      <div class=grafana-info-box>\\r\\n        <h5>What are Dashboard Links?</h5>\\r\\n        <p>\\r\\n\\t\\t\\t\\t\\tDashboard Links allow you to place links to other dashboards and web sites directly in below the dashboard header.\\r\\n        </p>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div ng-if=\\\"ctrl.dashboard.links.length > 0\\\">\\r\\n    <div class=page-action-bar>\\r\\n      <div class=page-action-bar__spacer></div>\\r\\n      <a type=button class=\\\"btn btn-success\\\" ng-click=ctrl.setupNew()>\\r\\n        <i class=\\\"fa fa-plus\\\"></i> New</a>\\r\\n    </div>\\r\\n    <table class=\\\"filter-table filter-table--hover\\\">\\r\\n      <thead>\\r\\n        <tr>\\r\\n          <th>Type</th>\\r\\n          <th>Info</th>\\r\\n          <th colspan=3></th>\\r\\n        </tr>\\r\\n      </thead>\\r\\n      <tbody>\\r\\n        <tr ng-repeat=\\\"link in ctrl.dashboard.links\\\">\\r\\n          <td class=pointer ng-click=ctrl.editLink(link)>\\r\\n            <i class=\\\"fa fa-fw fa-external-link\\\"></i>\\r\\n            {{link.type}}\\r\\n          </td>\\r\\n          <td>\\r\\n            <div ng-if=link.title>\\r\\n              {{link.title}}\\r\\n            </div>\\r\\n            <div ng-if=\\\"!link.title && link.url\\\">\\r\\n              {{link.url}}\\r\\n            </div>\\r\\n            <span ng-if=\\\"!link.title && link.tags\\\" ng-repeat=\\\"tag in link.tags\\\" tag-color-from-name=tag class=\\\"label label-tag\\\" style=margin-right:6px>\\r\\n              {{tag}}\\r\\n            </span>\\r\\n          </td>\\r\\n          <td style=width:1%>\\r\\n            <i ng-click=\\\"ctrl.moveLink($index, -1)\\\" ng-hide=$first class=\\\"pointer fa fa-arrow-up\\\"></i>\\r\\n          </td>\\r\\n          <td style=width:1%>\\r\\n            <i ng-click=\\\"ctrl.moveLink($index, 1)\\\" ng-hide=$last class=\\\"pointer fa fa-arrow-down\\\"></i>\\r\\n          </td>\\r\\n          <td style=width:1%>\\r\\n            <a ng-click=ctrl.deleteLink($index) class=\\\"btn btn-danger btn-mini\\\" ng-hide=annotation.builtIn>\\r\\n              <i class=\\\"fa fa-remove\\\"></i>\\r\\n            </a>\\r\\n          </td>\\r\\n        </tr>\\r\\n      </tbody>\\r\\n    </table>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div ng-if=\\\"ctrl.mode == 'edit' || ctrl.mode == 'new'\\\">\\r\\n  <div class=gf-form-group>\\r\\n    <div class=gf-form-group>\\r\\n      <div class=gf-form>\\r\\n        <span class=\\\"gf-form-label width-8\\\">Type</span>\\r\\n        <div class=\\\"gf-form-select-wrapper width-10\\\">\\r\\n          <select class=gf-form-input ng-model=ctrl.link.type ng-options=\\\"f for f in ['dashboards','link']\\\"></select>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form ng-show=\\\"ctrl.link.type === 'dashboards'\\\">\\r\\n        <span class=\\\"gf-form-label width-8\\\">With tags</span>\\r\\n        <bootstrap-tagsinput ng-model=ctrl.link.tags tagclass=\\\"label label-tag\\\" placeholder=\\\"add tags\\\" style=margin-right:.25rem></bootstrap-tagsinput>\\r\\n      </div>\\r\\n\\r\\n      <gf-form-switch ng-show=\\\"ctrl.link.type === 'dashboards'\\\" class=gf-form label=\\\"As dropdown\\\" checked=ctrl.link.asDropdown switch-class=max-width-4 label-class=width-8></gf-form-switch>\\r\\n      <div class=gf-form ng-show=\\\"ctrl.link.type === 'dashboards' && ctrl.link.asDropdown\\\">\\r\\n        <span class=\\\"gf-form-label width-8\\\">Title</span>\\r\\n        <input type=text ng-model=ctrl.link.title class=\\\"gf-form-input max-width-10\\\" ng-model-onblur>\\r\\n      </div>\\r\\n      <div ng-show=\\\"ctrl.link.type === 'link'\\\">\\r\\n        <div class=gf-form>\\r\\n          <li class=\\\"gf-form-label width-8\\\">Url</li>\\r\\n          <input type=text ng-model=ctrl.link.url class=\\\"gf-form-input width-20\\\" ng-model-onblur>\\r\\n        </div>\\r\\n\\r\\n        <div class=gf-form>\\r\\n          <span class=\\\"gf-form-label width-8\\\">Title</span>\\r\\n          <input type=text ng-model=ctrl.link.title class=\\\"gf-form-input width-20\\\" ng-model-onblur>\\r\\n        </div>\\r\\n\\r\\n        <div class=gf-form>\\r\\n          <span class=\\\"gf-form-label width-8\\\">Tooltip</span>\\r\\n          <input type=text ng-model=ctrl.link.tooltip class=\\\"gf-form-input width-20\\\" placeholder=\\\"Open dashboard\\\" ng-model-onblur>\\r\\n        </div>\\r\\n\\r\\n        <div class=gf-form>\\r\\n          <span class=\\\"gf-form-label width-8\\\">Icon</span>\\r\\n          <div class=\\\"gf-form-select-wrapper width-20\\\">\\r\\n            <select class=gf-form-input ng-model=ctrl.link.icon ng-options=\\\"k as k for (k, v) in ctrl.iconMap\\\"></select>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-group>\\r\\n      <h5 class=section-heading>Include</h5>\\r\\n      <div>\\r\\n        <gf-form-switch class=gf-form label=\\\"Time range\\\" checked=ctrl.link.keepTime switch-class=max-width-6 label-class=width-9></gf-form-switch>\\r\\n        <gf-form-switch class=gf-form label=\\\"Variable values\\\" checked=ctrl.link.includeVars switch-class=max-width-6 label-class=width-9></gf-form-switch>\\r\\n        <gf-form-switch class=gf-form label=\\\"Open in new tab\\\" checked=ctrl.link.targetBlank switch-class=max-width-6 label-class=width-9></gf-form-switch>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <button class=\\\"btn btn-success\\\" ng-if=\\\"ctrl.mode == 'new'\\\" ng-click=ctrl.addLink()>\\r\\n    Add\\r\\n  </button>\\r\\n  <button class=\\\"btn btn-success\\\" ng-if=\\\"ctrl.mode == 'edit'\\\" ng-click=ctrl.saveLink()>\\r\\n    Update\\r\\n  </button>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/dashnav/dashnav.html';\nvar html = \"<div class=navbar>\\r\\n\\r\\n\\t<div>\\r\\n\\t\\t<a class=navbar-page-btn ng-click=ctrl.showSearch()>\\r\\n\\t\\t\\t<i class=\\\"gicon gicon-dashboard\\\"></i>\\r\\n\\t\\t\\t<span ng-if=\\\"ctrl.dashboard.meta.folderId > 0\\\" class=navbar-page-btn--folder>{{ctrl.dashboard.meta.folderTitle}} / </span>{{ctrl.dashboard.title}}\\r\\n\\t\\t\\t<i class=\\\"fa fa-caret-down\\\"></i>\\r\\n\\t\\t</a>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=navbar__spacer></div>\\r\\n\\r\\n\\t<div class=\\\"navbar-buttons navbar-buttons--playlist\\\" ng-if=ctrl.playlistSrv.isPlaying>\\r\\n\\t\\t<a class=\\\"navbar-button navbar-button--tight\\\" ng-click=ctrl.playlistSrv.prev()><i class=\\\"fa fa-step-backward\\\"></i></a>\\r\\n\\t\\t<a class=\\\"navbar-button navbar-button--tight\\\" ng-click=ctrl.playlistSrv.stop()><i class=\\\"fa fa-stop\\\"></i></a>\\r\\n\\t\\t<a class=\\\"navbar-button navbar-button--tight\\\" ng-click=ctrl.playlistSrv.next()><i class=\\\"fa fa-step-forward\\\"></i></a>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"navbar-buttons navbar-buttons--actions\\\">\\r\\n\\t\\t<button class=\\\"btn navbar-button navbar-button--add-panel\\\" ng-show=::ctrl.dashboard.meta.canSave bs-tooltip=\\\"'Add panel'\\\" data-placement=bottom ng-click=ctrl.addPanel()>\\r\\n\\t\\t\\t<i class=\\\"gicon gicon-add-panel\\\"></i>\\r\\n\\t\\t</button>\\r\\n\\r\\n\\t\\t<button class=\\\"btn navbar-button navbar-button--star\\\" ng-show=::ctrl.dashboard.meta.canStar ng-click=ctrl.starDashboard() bs-tooltip=\\\"'Mark as favorite'\\\" data-placement=bottom>\\r\\n\\t\\t\\t<i class=fa ng-class=\\\"{'fa-star-o': !ctrl.dashboard.meta.isStarred, 'fa-star': ctrl.dashboard.meta.isStarred}\\\"></i>\\r\\n\\t\\t</button>\\r\\n\\r\\n    <button class=\\\"btn navbar-button navbar-button--share\\\" ng-show=::ctrl.dashboard.meta.canShare ng-click=ctrl.shareDashboard(0) bs-tooltip=\\\"'Share dashboard'\\\" data-placement=bottom>\\r\\n\\t\\t\\t<i class=\\\"fa fa-share-square-o\\\"></i>\\r\\n\\t\\t</button>\\r\\n\\r\\n    <button class=\\\"btn navbar-button navbar-button--save\\\" ng-show=ctrl.dashboard.meta.canSave ng-click=ctrl.saveDashboard() bs-tooltip=\\\"'Save dashboard <br> CTRL+S'\\\" data-placement=bottom>\\r\\n\\t\\t\\t<i class=\\\"fa fa-save\\\"></i>\\r\\n\\t\\t</button>\\r\\n\\r\\n\\t\\t<a class=\\\"btn navbar-button navbar-button--snapshot-origin\\\" ng-if=::ctrl.dashboard.snapshot.originalUrl href={{ctrl.dashboard.snapshot.originalUrl}} bs-tooltip=\\\"'Open original dashboard'\\\" data-placement=bottom>\\r\\n\\t\\t\\t<i class=\\\"fa fa-link\\\"></i>\\r\\n\\t\\t</a>\\r\\n\\r\\n\\t\\t<button class=\\\"btn navbar-button navbar-button--settings\\\" ng-click=ctrl.toggleSettings() bs-tooltip=\\\"'Settings'\\\" data-placement=bottom ng-show=ctrl.dashboard.meta.showSettings>\\r\\n\\t\\t\\t<i class=\\\"fa fa-cog\\\"></i>\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"navbar-buttons navbar-buttons--tv\\\">\\r\\n    <button class=\\\"btn navbar-button navbar-button--tv\\\" ng-click=ctrl.toggleViewMode() bs-tooltip=\\\"'Cycle view mode'\\\" data-placement=bottom>\\r\\n      <i class=\\\"fa fa-desktop\\\"></i>\\r\\n    </button>\\r\\n  </div>\\r\\n\\r\\n\\t<gf-time-picker class=gf-timepicker-nav dashboard=ctrl.dashboard ng-if=!ctrl.dashboard.timepicker.hidden></gf-time-picker>\\r\\n\\r\\n\\t<div class=\\\"navbar-buttons navbar-buttons--close\\\">\\r\\n\\t\\t<button class=\\\"btn navbar-button navbar-button--primary\\\" ng-click=ctrl.close() bs-tooltip=\\\"'Back to dashboard'\\\" data-placement=bottom>\\r\\n\\t\\t\\t<i class=\\\"fa fa-reply\\\"></i>\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n\\r\\n<dashboard-search></dashboard-search>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/export/export_modal.html';\nvar html = \"\\r\\n<!-- <p> -->\\r\\n<!-- \\tExporting will export a cleaned sharable dashboard that can be imported -->\\r\\n<!-- \\tinto another Grafana instance. -->\\r\\n<!-- </p> -->\\r\\n\\r\\n<div class=share-modal-header>\\r\\n\\t<div class=share-modal-big-icon>\\r\\n\\t\\t<i class=\\\"fa fa-cloud-upload\\\"></i>\\r\\n\\t</div>\\r\\n\\t<div>\\r\\n\\t\\t<p class=share-modal-info-text>\\r\\n\\t\\t\\tExport the dashboard to a JSON file. The exporter will templatize the\\r\\n\\t\\t\\tdashboard's data sources to make it easy for others to import and reuse.\\r\\n\\t\\t\\tYou can share dashboards on <a class=external-link href=https://grafana.com>Grafana.com</a>\\r\\n\\t\\t</p>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=button class=\\\"btn gf-form-btn width-10 btn-success\\\" ng-click=ctrl.save()>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-save\\\"></i> Save to file\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t\\t<button type=button class=\\\"btn gf-form-btn width-10 btn-secondary\\\" ng-click=ctrl.saveJson()>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-file-text-o\\\"></i> View JSON\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t\\t<a class=\\\"btn btn-link\\\" ng-click=ctrl.dismiss()>Cancel</a>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/export_data/export_data_modal.html';\nvar html = \"<div class=modal-body>\\r\\n  <div class=modal-header>\\r\\n    <h2 class=modal-header-title>\\r\\n      Export CSV\\r\\n    </h2>\\r\\n\\r\\n    <a class=modal-header-close ng-click=ctrl.dismiss();>\\r\\n      <i class=\\\"fa fa-remove\\\"></i>\\r\\n    </a>\\r\\n  </div>\\r\\n\\r\\n  <div class=modal-content>\\r\\n    <div class=p-t-2>\\r\\n      <div class=gf-form ng-hide=\\\"ctrl.panel === 'table'\\\">\\r\\n        <label class=\\\"gf-form-label width-10\\\">Mode</label>\\r\\n        <div class=gf-form-select-wrapper>\\r\\n          <select class=gf-form-input ng-model=ctrl.asRows ng-options=\\\"f.value as f.text for f in [{text: 'Series as rows', value: true}, {text: 'Series as columns', value: false}]\\\">\\r\\n          </select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=gf-form ng-hide=\\\"ctrl.panel === 'table'\\\">\\r\\n        <label class=\\\"gf-form-label width-10\\\">Date Time Format</label>\\r\\n        <input type=text class=gf-form-input ng-model=ctrl.dateTimeFormat>\\r\\n      </div>\\r\\n      <gf-form-switch class=gf-form label=\\\"Excel CSV Dialect\\\" label-class=width-10 switch-class=max-width-6 checked=ctrl.excel>\\r\\n      </gf-form-switch>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"gf-form-button-row text-center\\\">\\r\\n      <a class=\\\"btn btn-success\\\" ng-click=ctrl.export();>Export</a>\\r\\n      <a class=btn-text ng-click=ctrl.dismiss();>Cancel</a>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/folder_picker/folder_picker.html';\nvar html = \"<div class=gf-form-inline>\\r\\n  <div class=gf-form>\\r\\n    <label class=\\\"gf-form-label {{ctrl.labelClass}}\\\">Folder</label>\\r\\n    <div class=dropdown ng-hide=ctrl.createNewFolder>\\r\\n      <gf-form-dropdown model=ctrl.folder get-options=ctrl.getOptions($query) on-change=ctrl.onFolderChange($option)>\\r\\n      </gf-form-dropdown>\\r\\n    </div>\\r\\n    <input type=text class=\\\"gf-form-input max-width-10\\\" ng-if=ctrl.createNewFolder give-focus=ctrl.createNewFolder ng-model=ctrl.newFolderName ng-model-options=\\\"{ debounce: 400 }\\\" ng-change=ctrl.newFolderNameChanged() />\\r\\n  </div>\\r\\n  <div class=gf-form ng-if=ctrl.createNewFolder>\\r\\n    <button class=\\\"btn btn-inverse\\\" ng-click=ctrl.createFolder($event) ng-disabled=\\\"!ctrl.newFolderNameTouched || ctrl.hasValidationError\\\">\\r\\n      <i class=\\\"fa fa-fw fa-save\\\"></i>&nbsp;Create\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=gf-form ng-if=ctrl.createNewFolder>\\r\\n    <button class=\\\"btn btn-inverse\\\" ng-click=ctrl.cancelCreateFolder($event)>\\r\\n      Cancel\\r\\n  </button>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=gf-form-inline ng-if=\\\"ctrl.newFolderNameTouched && ctrl.hasValidationError\\\">\\r\\n  <div class=\\\"gf-form gf-form--grow\\\">\\r\\n    <label class=\\\"gf-form-label text-warning gf-form-label--grow\\\">\\r\\n      <i class=\\\"fa fa-warning\\\"></i>\\r\\n      {{ctrl.validationError}}\\r\\n    </label>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/history/history.html';\nvar html = \"<h3 class=dashboard-settings__header>\\r\\n  <a ng-click=\\\"ctrl.switchMode('list')\\\">Versions</a>\\r\\n  <span ng-show=\\\"ctrl.mode === 'compare'\\\">\\r\\n    &gt; Comparing {{ctrl.baseInfo.version}}\\r\\n    <i class=\\\"fa fa-arrows-h\\\"></i>\\r\\n    {{ctrl.newInfo.version}}\\r\\n    <cite class=muted ng-if=ctrl.isNewLatest>(Latest)</cite>\\r\\n  </span>\\r\\n</h3>\\r\\n\\r\\n<div ng-if=\\\"ctrl.mode === 'list'\\\">\\r\\n  <div ng-if=ctrl.loading>\\r\\n    <i class=\\\"fa fa-spinner fa-spin\\\"></i>\\r\\n    <em>Fetching history list&hellip;</em>\\r\\n  </div>\\r\\n\\r\\n  <div ng-if=!ctrl.loading>\\r\\n    <div class=gf-form-group>\\r\\n      <table class=filter-table>\\r\\n        <thead>\\r\\n          <tr>\\r\\n            <th class=width-4></th>\\r\\n            <th class=width-4>Version</th>\\r\\n            <th class=width-14>Date</th>\\r\\n            <th class=width-10>Updated By</th>\\r\\n            <th>Notes</th>\\r\\n            <th></th>\\r\\n          </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n          <tr ng-repeat=\\\"revision in ctrl.revisions\\\">\\r\\n            <td class=filter-table__switch-cell bs-tooltip=\\\"!revision.checked && ctrl.canCompare ? 'You can only compare 2 versions at a time' : ''\\\" data-placement=right>\\r\\n              <gf-form-switch switch-class=gf-form-switch--table-cell checked=revision.checked on-change=ctrl.revisionSelectionChanged() ng-disabled=\\\"!revision.checked && ctrl.canCompare\\\">\\r\\n              </gf-form-switch>\\r\\n            </td>\\r\\n            <td class=text-center>{{revision.version}}</td>\\r\\n            <td>{{revision.createdDateString}}</td>\\r\\n            <td>{{revision.createdBy}}</td>\\r\\n            <td>{{revision.message}}</td>\\r\\n            <td class=text-right>\\r\\n              <a class=\\\"btn btn-inverse btn-small\\\" ng-show=\\\"revision.version !== ctrl.dashboard.version\\\" ng-click=ctrl.restore(revision.version)>\\r\\n                <i class=\\\"fa fa-history\\\"></i>&nbsp;&nbsp;Restore\\r\\n              </a>\\r\\n              <a class=\\\"btn btn-outline-disabled btn-small\\\" ng-show=\\\"revision.version === ctrl.dashboard.version\\\">\\r\\n                <i class=\\\"fa fa-check\\\"></i>&nbsp;&nbsp;Latest\\r\\n              </a>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </tbody>\\r\\n      </table>\\r\\n\\r\\n      <div ng-if=ctrl.appending>\\r\\n        <i class=\\\"fa fa-spinner fa-spin\\\"></i>\\r\\n        <em>Fetching more entries&hellip;</em>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form-group>\\r\\n        <div class=gf-form-button-row>\\r\\n          <button type=button class=\\\"btn gf-form-button btn-inverse\\\" ng-if=\\\"ctrl.revisions.length >= ctrl.limit\\\" ng-click=ctrl.addToLog() ng-disabled=ctrl.isLastPage()>\\r\\n            Show more versions\\r\\n          </button>\\r\\n          <button type=button class=\\\"btn btn-success\\\" ng-if=\\\"ctrl.revisions.length > 1\\\" ng-disabled=!ctrl.canCompare ng-click=ctrl.getDiff(ctrl.diff) bs-tooltip=\\\"ctrl.canCompare ? '' : 'Select 2 versions to start comparing'\\\" data-placement=bottom>\\r\\n            <i class=\\\"fa fa-code-fork\\\"></i>&nbsp;&nbsp;Compare versions\\r\\n          </button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div ng-if=\\\"ctrl.mode === 'compare'\\\">\\r\\n  <div ng-if=ctrl.loading>\\r\\n    <i class=\\\"fa fa-spinner fa-spin\\\"></i>\\r\\n    <em>Fetching changes&hellip;</em>\\r\\n  </div>\\r\\n\\r\\n  <div ng-if=!ctrl.loading>\\r\\n    <button type=button class=\\\"btn btn-danger pull-right\\\" ng-click=ctrl.restore(ctrl.baseInfo.version) ng-if=ctrl.isNewLatest>\\r\\n      <i class=\\\"fa fa-history\\\"></i>&nbsp;&nbsp;Restore to version {{ctrl.baseInfo.version}}\\r\\n    </button>\\r\\n    <section>\\r\\n      <p class=\\\"small muted\\\">\\r\\n      <strong>Version {{ctrl.newInfo.version}}</strong> updated by\\r\\n      <span>{{ctrl.newInfo.createdBy}} </span>\\r\\n      <span>{{ctrl.newInfo.ageString}}</span>\\r\\n      <span> - {{ctrl.newInfo.message}}</span>\\r\\n      </p>\\r\\n      <p class=\\\"small muted\\\">\\r\\n      <strong>Version {{ctrl.baseInfo.version}}</strong> updated by\\r\\n      <span>{{ctrl.baseInfo.createdBy}} </span>\\r\\n      <span>{{ctrl.baseInfo.ageString}}</span>\\r\\n      <span> - {{ctrl.baseInfo.message}}</span>\\r\\n      </p>\\r\\n    </section>\\r\\n\\r\\n    <div id=delta diff-delta>\\r\\n      <div class=delta-basic compile=ctrl.delta.basic></div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-button-row>\\r\\n      <button class=\\\"btn btn-secondary\\\" ng-click=\\\"ctrl.getDiff('json')\\\">View JSON Diff</button>\\r\\n    </div>\\r\\n\\r\\n    <div class=delta-html ng-show=\\\"ctrl.diff === 'json'\\\" compile=ctrl.delta.json></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/move_to_folder_modal/move_to_folder.html';\nvar html = \"<div class=modal-body>\\r\\n  <div class=modal-header>\\r\\n    <h2 class=modal-header-title>\\r\\n\\t\\t\\t<i class=\\\"gicon gicon-folder-new\\\"></i>\\r\\n      <span class=p-l-1>Choose Dashboard Folder</span>\\r\\n    </h2>\\r\\n\\r\\n    <a class=modal-header-close ng-click=ctrl.dismiss();>\\r\\n      <i class=\\\"fa fa-remove\\\"></i>\\r\\n    </a>\\r\\n  </div>\\r\\n\\r\\n  <form name=ctrl.saveForm ng-submit=ctrl.save() class=\\\"modal-content folder-modal\\\" novalidate>\\r\\n    <p>Move the {{ctrl.dashboards.length}} selected dashboards to the following folder:</p>\\r\\n\\r\\n    <div class=p-t-2>\\r\\n      <div class=gf-form>\\r\\n          <folder-picker on-load=ctrl.onFolderChange($folder) on-change=ctrl.onFolderChange($folder) enter-folder-creation=ctrl.onEnterFolderCreation() exit-folder-creation=ctrl.onExitFolderCreation() enable-create-new=true label-class=width-7>\\r\\n          </folder-picker>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"gf-form-button-row text-center\\\">\\r\\n      <button type=submit class=\\\"btn btn-success\\\" ng-disabled=\\\"ctrl.saveForm.$invalid || !ctrl.isValidFolderSelection\\\">Move</button>\\r\\n      <a class=btn-text ng-click=ctrl.dismiss();>Cancel</a>\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/panellinks/module.html';\nvar html = \"<div class=editor-row>\\r\\n\\t<h5 class=section-heading>\\r\\n\\t\\tDrilldown / detail link<tip>These links appear in the dropdown menu in the panel menu. </tip></h5>\\r\\n\\t\\r\\n\\r\\n\\t<div class=gf-form-group ng-repeat=\\\"link in panel.links\\\">\\r\\n\\t\\t<div class=section>\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-25\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Type</span>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper gf-form--grow\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=link.type ng-options=\\\"f for f in ['dashboard','absolute']\\\"></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-25\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\" ng-show=\\\"link.type === 'dashboard'\\\">Dashboard</span>\\r\\n\\t\\t\\t\\t<input ng-show=\\\"link.type === 'dashboard'\\\" type=text ng-model=link.dashboard bs-typeahead=searchDashboards class=gf-form-input ng-blur=dashboardChanged(link)>\\r\\n\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\" ng-show=\\\"link.type === 'absolute'\\\">Url</span>\\r\\n\\t\\t\\t\\t<input ng-show=\\\"link.type === 'absolute'\\\" type=text ng-model=link.url class=\\\"gf-form-input max-width-14\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-25\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-label width-7\\\">Title</div>\\r\\n\\t\\t\\t\\t<input type=text ng-model=link.title class=gf-form-input>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=section>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Url params</span>\\r\\n\\t\\t\\t\\t<input type=text ng-model=link.params class=\\\"gf-form-input width-10\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label-class=width-10 label=\\\"Include time range\\\" checked=link.keepTime></gf-form-switch>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label-class=width-10 label=\\\"Include variables\\\" checked=link.includeVars></gf-form-switch>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label-class=width-10 label=\\\"Open in new tab \\\" checked=link.targetBlank></gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=section>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<button class=\\\"btn btn-inverse gf-form-btn\\\" ng-click=deleteLink(link)><i class=\\\"fa fa-trash\\\"></i> Remove Link</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=editor-row>\\r\\n\\t<button class=\\\"btn btn-inverse\\\" ng-click=addLink()><i class=\\\"fa fa-plus\\\"></i> Add link</button>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/partials/create_folder.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\" ng-cloak>\\r\\n\\r\\n\\t<h3 class=page-sub-heading>New Dashboard Folder</h3>\\r\\n\\r\\n  <form name=ctrl.saveForm ng-submit=ctrl.create() novalidate>\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Name</label>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.title give-focus=true ng-change=ctrl.titleChanged() ng-model-options=\\\"{ debounce: 400 }\\\" ng-class=\\\"{'validation-error': ctrl.nameExists || !ctrl.dash.title}\\\">\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label text-success\\\" ng-if=\\\"ctrl.titleTouched && !ctrl.hasValidationError\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-check\\\"></i>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline ng-if=ctrl.hasValidationError>\\r\\n\\t\\t\\t<div class=\\\"gf-form offset-width-10 gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label text-warning gf-form-label--grow\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-warning\\\"></i>\\r\\n\\t\\t\\t\\t\\t{{ctrl.validationError}}\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success width-12\\\" ng-disabled=\\\"!ctrl.titleTouched || ctrl.hasValidationError\\\">\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-save\\\"></i> Create\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/partials/dashboard_import.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\" ng-cloak>\\r\\n  <div ng-if=\\\"ctrl.step === 1\\\">\\r\\n\\r\\n    <form class=page-action-bar>\\r\\n      <div class=page-action-bar__spacer></div>\\r\\n      <dash-upload on-upload=ctrl.onUpload(dash)></dash-upload>\\r\\n    </form>\\r\\n\\r\\n    <h5 class=section-heading>Grafana.com Dashboard</h5>\\r\\n\\r\\n    <div class=gf-form-group>\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <input type=text class=\\\"gf-form-input max-width-30\\\" ng-model=ctrl.gnetUrl placeholder=\\\"Paste Grafana.com dashboard url or id\\\" ng-blur=ctrl.checkGnetDashboard()>\\r\\n      </div>\\r\\n      <div class=gf-form ng-if=ctrl.gnetError>\\r\\n        <label class=\\\"gf-form-label text-warning\\\">\\r\\n          <i class=\\\"fa fa-warning\\\"></i>\\r\\n          {{ctrl.gnetError}}\\r\\n        </label>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <h5 class=section-heading>Or paste JSON</h5>\\r\\n\\r\\n    <div class=gf-form-group>\\r\\n      <div class=gf-form>\\r\\n        <textarea rows=10 data-share-panel-url=\\\"\\\" class=gf-form-input ng-model=ctrl.jsonText></textarea>\\r\\n      </div>\\r\\n      <button type=button class=\\\"btn btn-secondary\\\" ng-click=ctrl.loadJsonText()>\\r\\n        <i class=\\\"fa fa-paste\\\"></i>\\r\\n        Load\\r\\n      </button>\\r\\n      <span ng-if=ctrl.parseError class=\\\"text-error p-l-1\\\">\\r\\n        <i class=\\\"fa fa-warning\\\"></i>\\r\\n        {{ctrl.parseError}}\\r\\n      </span>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div ng-if=\\\"ctrl.step === 2\\\">\\r\\n    <div class=gf-form-group ng-if=ctrl.dash.gnetId>\\r\\n      <h3 class=section-heading>\\r\\n        Importing Dashboard from\\r\\n        <a href=https://grafana.com/dashboards/{{ctrl.dash.gnetId}} class=external-link target=_blank>Grafana.com</a>\\r\\n      </h3>\\r\\n\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-15\\\">Published by</label>\\r\\n        <label class=\\\"gf-form-label width-15\\\">{{ctrl.gnetInfo.orgName}}</label>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-15\\\">Updated on</label>\\r\\n        <label class=\\\"gf-form-label width-15\\\">{{ctrl.gnetInfo.updatedAt | date : 'yyyy-MM-dd HH:mm:ss'}}</label>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <h3 class=section-heading>\\r\\n      Options\\r\\n    </h3>\\r\\n\\r\\n    <div class=gf-form-group>\\r\\n      <div class=gf-form-inline>\\r\\n        <div class=\\\"gf-form gf-form--grow\\\">\\r\\n          <label class=\\\"gf-form-label width-15\\\">Name</label>\\r\\n          <input type=text class=gf-form-input ng-model=ctrl.dash.title give-focus=true ng-change=ctrl.titleChanged() ng-class=\\\"{'validation-error': ctrl.nameExists || !ctrl.dash.title}\\\">\\r\\n          <label class=\\\"gf-form-label text-success\\\" ng-if=\\\"ctrl.titleTouched && !ctrl.hasNameValidationError\\\">\\r\\n            <i class=\\\"fa fa-check\\\"></i>\\r\\n          </label>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form-inline ng-if=ctrl.hasNameValidationError>\\r\\n        <div class=\\\"gf-form offset-width-15 gf-form--grow\\\">\\r\\n          <label class=\\\"gf-form-label text-warning gf-form-label--grow\\\">\\r\\n            <i class=\\\"fa fa-warning\\\"></i>\\r\\n            {{ctrl.nameValidationError}}\\r\\n          </label>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form-inline>\\r\\n        <div class=\\\"gf-form gf-form--grow\\\">\\r\\n          <folder-picker label-class=width-15 initial-folder-id=ctrl.folderId initial-title=ctrl.initialFolderTitle on-change=ctrl.onFolderChange($folder) on-load=ctrl.onFolderChange($folder) enter-folder-creation=ctrl.onEnterFolderCreation() exit-folder-creation=ctrl.onExitFolderCreation() enable-create-new=true>\\r\\n          </folder-picker>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form-inline>\\r\\n        <div class=\\\"gf-form gf-form--grow\\\">\\r\\n          <span class=\\\"gf-form-label width-15\\\">\\r\\n            Unique identifier (uid)\\r\\n            <info-popover mode=right-normal>\\r\\n                The unique identifier (uid) of a dashboard can be used for uniquely identify a dashboard between multiple Grafana installs.\\r\\n                The uid allows having consistent URL’s for accessing dashboards so changing the title of a dashboard will not break any\\r\\n                bookmarked links to that dashboard.\\r\\n            </info-popover>\\r\\n          </span>\\r\\n          <input type=text class=gf-form-input disabled=disabled ng-model=ctrl.autoGenerateUidValue ng-if=ctrl.autoGenerateUid>\\r\\n          <a class=\\\"btn btn-secondary gf-form-btn\\\" href=# ng-click=\\\"ctrl.autoGenerateUid = false\\\" ng-if=ctrl.autoGenerateUid>change</a>\\r\\n          <input type=text class=gf-form-input maxlength=40 placeholder=\\\"optional, will be auto-generated if empty\\\" ng-model=ctrl.dash.uid ng-change=ctrl.uidChanged() ng-if=!ctrl.autoGenerateUid>\\r\\n          <label class=\\\"gf-form-label text-success\\\" ng-if=\\\"!ctrl.autoGenerateUid && !ctrl.hasUidValidationError\\\">\\r\\n            <i class=\\\"fa fa-check\\\"></i>\\r\\n          </label>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form-inline ng-if=ctrl.hasUidValidationError>\\r\\n        <div class=\\\"gf-form offset-width-15 gf-form--grow\\\">\\r\\n          <label class=\\\"gf-form-label text-warning gf-form-label--grow\\\">\\r\\n            <i class=\\\"fa fa-warning\\\"></i>\\r\\n            {{ctrl.uidValidationError}}\\r\\n          </label>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div ng-repeat=\\\"input in ctrl.inputs\\\">\\r\\n        <div class=gf-form>\\r\\n          <label class=\\\"gf-form-label width-15\\\">\\r\\n            {{input.label}}\\r\\n            <info-popover mode=right-normal>\\r\\n              {{input.info}}\\r\\n            </info-popover>\\r\\n          </label>\\r\\n          <!-- Data source input -->\\r\\n          <div class=gf-form-select-wrapper style=width:100% ng-if=\\\"input.type === 'datasource'\\\">\\r\\n            <select class=gf-form-input ng-model=input.value ng-options=\\\"v.value as v.text for v in input.options\\\" ng-change=ctrl.inputValueChanged()>\\r\\n              <option value=\\\"\\\" ng-hide=input.value>{{input.info}}</option>\\r\\n            </select>\\r\\n          </div>\\r\\n          <!-- Constant input -->\\r\\n          <input ng-if=\\\"input.type === 'constant'\\\" type=text class=gf-form-input ng-model=input.value placeholder={{input.default}} ng-change=ctrl.inputValueChanged()>\\r\\n          <label class=\\\"gf-form-label text-success\\\" ng-show=input.value>\\r\\n            <i class=\\\"fa fa-check\\\"></i>\\r\\n          </label>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-button-row>\\r\\n      <button type=button class=\\\"btn btn-success width-12\\\" ng-click=ctrl.saveDashboard() ng-hide=\\\"ctrl.nameExists || ctrl.uidExists\\\" ng-disabled=!ctrl.isValid()>\\r\\n        <i class=\\\"fa fa-save\\\"></i> Import\\r\\n      </button>\\r\\n      <button type=button class=\\\"btn btn-danger width-12\\\" ng-click=ctrl.saveDashboard() ng-show=\\\"ctrl.nameExists || ctrl.uidExists\\\" ng-disabled=!ctrl.isValid()>\\r\\n        <i class=\\\"fa fa-save\\\"></i> Import (Overwrite)\\r\\n      </button>\\r\\n      <a class=\\\"btn btn-link\\\" ng-click=ctrl.back()>Cancel</a>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/partials/folder_dashboards.html';\nvar html = \"<page-header ng-if=ctrl.navModel model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n    <manage-dashboards ng-if=\\\"ctrl.folderId && ctrl.uid\\\" folder-id=ctrl.folderId folder-uid=ctrl.uid />\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/partials/folder_permissions.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n  <dashboard-permissions ng-if=\\\"ctrl.dashboard && ctrl.meta\\\" dashboardid=ctrl.dashboard.id />\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/partials/folder_settings.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\t<h2 class=page-sub-heading>Folder Settings</h2>\\r\\n\\r\\n\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t<form name=folderSettingsForm ng-submit=ctrl.save()>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-7\\\">Name</label>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input width-30\\\" ng-model=ctrl.title ng-change=ctrl.titleChanged()>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-disabled=\\\"!ctrl.canSave || !ctrl.hasChanged\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-save\\\"></i>Save\\r\\n\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t<button class=\\\"btn btn-danger\\\" ng-click=ctrl.delete($event) ng-disabled=!ctrl.canSave>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-trash\\\"></i>\\r\\n\\t\\t\\t\\t\\tDelete\\r\\n\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</form>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/partials/inspector.html';\nvar html = \"<div class=modal-body ng-controller=InspectCtrl ng-init=init()>\\r\\n\\t<div class=modal-header>\\r\\n\\t\\t<h2 class=modal-header-title>\\r\\n\\t\\t\\t<i class=\\\"fa fa-info-circle\\\"></i>\\r\\n\\t\\t\\t<span class=p-l-1>Inspector</span>\\r\\n\\t\\t</h2>\\r\\n\\r\\n\\t\\t<ul class=gf-tabs>\\r\\n\\t\\t\\t<li class=gf-tabs-item ng-repeat=\\\"tab in ['Panel Description', 'Request', 'Response', 'JS Error']\\\">\\r\\n\\t\\t\\t\\t<a class=gf-tabs-link ng-click=\\\"editor.index = $index\\\" ng-class=\\\"{active: editor.index === $index}\\\">\\r\\n\\t\\t\\t\\t\\t{{::tab}}\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t</ul>\\r\\n\\r\\n\\t\\t<a class=modal-header-close ng-click=dismiss();>\\r\\n\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t</a>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=modal-content>\\r\\n\\t\\t<div ng-if=\\\"editor.index == 0\\\" ng-bind-html=panelInfoHtml>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"editor.index == 1\\\">\\r\\n\\t\\t\\t<h5 class=section-heading>Request details</h5>\\r\\n\\t\\t\\t<table class=\\\"filter-table gf-form-group\\\">\\r\\n\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t<td>Url</td>\\r\\n\\t\\t\\t\\t\\t<td>{{inspector.error.config.url}}</td>\\r\\n\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t<td>Method</td>\\r\\n\\t\\t\\t\\t\\t<td>{{inspector.error.config.method}}</td>\\r\\n\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t<tr ng-repeat=\\\"(key, value) in inspector.error.config.headers\\\">\\r\\n\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t{{key}}\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t{{value}}\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t</table>\\r\\n\\r\\n\\t\\t\\t<h5 class=section-heading>Request parameters</h5>\\r\\n\\t\\t\\t<table class=filter-table>\\r\\n\\t\\t\\t\\t<tr ng-repeat=\\\"param in request_parameters\\\">\\r\\n\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t{{param.key}}\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t{{param.value}}\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t</table>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"editor.index == 2\\\">\\r\\n\\t\\t\\t<h5 ng-show=message>{{message}}</h5>\\r\\n \\t\\t\\t<pre class=small>\\r\\n{{response}}\\r\\n\\t\\t\\t</pre>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"editor.index == 3\\\">\\r\\n\\r\\n\\t\\t\\t<label>Message:</label>\\r\\n<pre>\\r\\n{{message}}\\r\\n</pre>\\r\\n\\r\\n\\t\\t\\t<label>Stack trace:</label>\\r\\n<pre>\\r\\n{{stack_trace}}\\r\\n</pre>\\r\\n\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/partials/row_options.html';\nvar html = \"<div class=modal-body>\\r\\n\\t<div class=modal-header>\\r\\n\\t\\t<h2 class=modal-header-title>\\r\\n\\t\\t\\t<i class=\\\"fa fa-copy\\\"></i>\\r\\n\\t\\t\\t<span class=p-l-1>Row Options</span>\\r\\n\\t\\t</h2>\\r\\n\\r\\n\\t\\t<a class=modal-header-close ng-click=ctrl.dismiss();>\\r\\n\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t</a>\\r\\n\\t</div>\\r\\n\\r\\n\\t<form name=ctrl.saveForm ng-submit=ctrl.save() class=\\\"modal-content text-center\\\" novalidate>\\r\\n\\t\\t<div class=section>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Title</span>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-13\\\" ng-model=ctrl.row.title>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Repeat for</span>\\r\\n\\t\\t\\t\\t<dash-repeat-option panel=ctrl.row></dash-repeat-option>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=ctrl.update()>Update</button>\\r\\n\\t\\t\\t\\t<button type=button class=\\\"btn btn-inverse\\\" ng-click=ctrl.dismiss()>Cancel</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/partials/shareModal.html';\nvar html = \"<div class=modal-body ng-controller=ShareModalCtrl ng-init=init()>\\r\\n\\r\\n\\t<div class=modal-header>\\r\\n\\t\\t<h2 class=modal-header-title>\\r\\n\\t\\t\\t<i class=\\\"fa fa-share-square-o\\\"></i>\\r\\n\\t\\t\\t<span class=p-l-1>{{modalTitle}}</span>\\r\\n\\t\\t</h2>\\r\\n\\r\\n\\t\\t<ul class=gf-tabs>\\r\\n\\t\\t\\t<li class=gf-tabs-item ng-repeat=\\\"tab in tabs\\\">\\r\\n\\t\\t\\t\\t<a class=gf-tabs-link ng-click=\\\"editor.index = $index\\\" ng-class=\\\"{active: editor.index === $index}\\\">\\r\\n\\t\\t\\t\\t\\t{{::tab.title}}\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t</ul>\\r\\n\\r\\n\\t\\t<a class=modal-header-close ng-click=dismiss();>\\r\\n\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t</a>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=modal-content ng-repeat=\\\"tab in tabs\\\" ng-if=\\\"editor.index == $index\\\">\\r\\n\\t\\t<div ng-include src=tab.src class=share-modal-body></div>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n\\r\\n<script type=text/ng-template id=shareEmbed.html>\\r\\n\\t<div class=\\\"share-modal-header\\\">\\r\\n\\t\\t<div class=\\\"share-modal-big-icon\\\">\\r\\n\\t\\t\\t<i class=\\\"fa fa-code\\\"></i>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"share-modal-content\\\">\\r\\n\\t\\t\\t<p class=\\\"share-modal-info-text\\\">\\r\\n\\t\\t\\t\\tThe html code below can be pasted and included in another web page. Unless anonymous access\\r\\n\\t\\t\\t\\tis enabled the user viewing that page need to be signed into grafana for the graph to load.\\r\\n\\t\\t\\t</p>\\r\\n\\r\\n\\t\\t\\t<div ng-include src=\\\"'shareLinkOptions.html'\\\"></div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"gf-form-group gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form\\\">\\r\\n\\t\\t\\t\\t\\t<textarea rows=\\\"5\\\" data-share-panel-url class=\\\"gf-form-input\\\" ng-model='iframeHtml'></textarea>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</script>\\r\\n\\r\\n<script type=text/ng-template id=shareExport.html>\\r\\n\\t<dash-export-modal dismiss=\\\"dismiss()\\\"></dash-export-modal>\\r\\n</script>\\r\\n\\r\\n<script type=text/ng-template id=shareLinkOptions.html>\\r\\n\\t<div class=\\\"gf-form-group\\\">\\r\\n\\t\\t<gf-form-switch class=\\\"gf-form\\\"\\r\\n\\t\\t\\tlabel=\\\"Current time range\\\" label-class=\\\"width-12\\\" switch-class=\\\"max-width-6\\\"\\r\\n\\t\\t\\tchecked=\\\"options.forCurrent\\\" on-change=\\\"buildUrl()\\\">\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t\\t<gf-form-switch class=\\\"gf-form\\\"\\r\\n\\t\\t\\tlabel=\\\"Template variables\\\" label-class=\\\"width-12\\\" switch-class=\\\"max-width-6\\\"\\r\\n\\t\\t\\tchecked=\\\"options.includeTemplateVars\\\" on-change=\\\"buildUrl()\\\">\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t\\t<div class=\\\"gf-form\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-12\\\">Theme</span>\\r\\n\\t\\t\\t<div class=\\\"gf-form-select-wrapper width-10\\\">\\r\\n\\t\\t\\t\\t<select class=\\\"gf-form-input\\\" ng-model=\\\"options.theme\\\" ng-options=\\\"f as f for f in ['current', 'dark', 'light']\\\" ng-change=\\\"buildUrl()\\\"></select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</script>\\r\\n\\r\\n<script type=text/ng-template id=shareLink.html>\\r\\n\\t<div class=\\\"share-modal-header\\\">\\r\\n\\t\\t<div class=\\\"share-modal-big-icon\\\">\\r\\n\\t\\t\\t<i class=\\\"fa fa-link\\\"></i>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"share-modal-content\\\">\\r\\n\\t\\t\\t<p class=\\\"share-modal-info-text\\\">\\r\\n\\t\\t\\t\\tCreate a direct link to this dashboard or panel, customized with the options below.\\r\\n\\t\\t\\t</p>\\r\\n\\t\\t\\t<div ng-include src=\\\"'shareLinkOptions.html'\\\"></div>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-group\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" data-share-panel-url class=\\\"gf-form-input\\\" ng-model=\\\"shareUrl\\\"></input>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"gf-form\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-inverse\\\" clipboard-button=\\\"getShareUrl()\\\"><i class=\\\"fa fa-clipboard\\\"></i> Copy</button>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form\\\" ng-show=\\\"modeSharePanel\\\">\\r\\n\\t\\t\\t\\t<a href=\\\"{{imageUrl}}\\\" target=\\\"_blank\\\"><i class=\\\"fa fa-camera\\\"></i> Direct link rendered image</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n</script>\\r\\n\\r\\n<script type=text/ng-template id=shareSnapshot.html>\\r\\n\\t<div class=\\\"ng-cloak\\\" ng-cloak ng-controller=\\\"ShareSnapshotCtrl\\\" ng-init=\\\"init()\\\">\\r\\n\\t\\t<div class=\\\"share-modal-header\\\">\\r\\n\\t\\t\\t<div class=\\\"share-modal-big-icon\\\">\\r\\n\\t\\t\\t\\t<i ng-if=\\\"loading\\\" class=\\\"fa fa-spinner fa-spin\\\"></i>\\r\\n\\t\\t\\t\\t<i ng-if=\\\"!loading\\\" class=\\\"icon-gf icon-gf-snapshot\\\"></i>\\r\\n\\t\\t\\t</div>\\r\\n      <div class=\\\"share-modal-content\\\">\\r\\n        <div ng-if=\\\"step === 1\\\">\\r\\n          <p class=\\\"share-modal-info-text\\\">\\r\\n            A snapshot is an instant way to share an interactive dashboard publicly.\\r\\n            When created, we <strong>strip sensitive data</strong> like queries (metric, template and annotation) and panel links,\\r\\n            leaving only the visible metric data and series names embedded into your dashboard.\\r\\n          </p>\\r\\n          <p class=\\\"share-modal-info-text\\\">\\r\\n            Keep in mind, your <strong>snapshot can be viewed by anyone</strong> that has the link and can reach the URL.\\r\\n            Share wisely.\\r\\n          </p>\\r\\n        </div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"share-modal-header\\\" ng-if=\\\"step === 3\\\">\\r\\n\\t\\t\\t\\t\\t<p class=\\\"share-modal-info-text\\\">\\r\\n\\t\\t\\t\\t\\t\\tThe snapshot has now been deleted. If it you have already accessed it once, It might take up to an hour before it is removed from\\r\\n\\t\\t\\t\\t\\t\\tbrowser caches or CDN caches.\\r\\n\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-group share-modal-options\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form\\\" ng-if=\\\"step === 1\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-12\\\">Snapshot name</span>\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" ng-model=\\\"snapshot.name\\\" class=\\\"gf-form-input max-width-15\\\" >\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form\\\" ng-if=\\\"step === 1\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-12\\\">Expire</span>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-15\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<select class=\\\"gf-form-input\\\" ng-model=\\\"snapshot.expires\\\" ng-options=\\\"f.value as f.text for f in expireOptions\\\"></select>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form\\\" ng-if=\\\"step === 2\\\" style=\\\"margin-top: 40px\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"gf-form-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<a href=\\\"{{snapshotUrl}}\\\" class=\\\"large share-modal-link\\\" target=\\\"_blank\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-external-link-square\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{{snapshotUrl}}\\r\\n\\t\\t\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t\\t\\t\\t<br>\\r\\n\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-inverse\\\" clipboard-button=\\\"getSnapshotUrl()\\\"><i class=\\\"fa fa-clipboard\\\"></i> Copy Link</button>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div ng-if=\\\"step === 1\\\">\\r\\n\\t\\t\\t\\t\\t<p class=\\\"share-modal-info-text\\\">\\r\\n\\t\\t\\t\\t\\t\\tYou may need to configure the timeout value if it takes a long time to collect your dashboard's metrics.\\r\\n\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-group share-modal-options\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form\\\" ng-if=\\\"step === 1\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-12\\\">Timeout (seconds)</span>\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\\"number\\\" ng-model=\\\"snapshot.timeoutSeconds\\\" class=\\\"gf-form-input max-width-15\\\" >\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div ng-if=\\\"step === 1\\\" class=\\\"gf-form-button-row\\\">\\r\\n\\t\\t\\t\\t\\t<button class=\\\"btn gf-form-btn width-10 btn-success\\\" ng-click=\\\"createSnapshot()\\\" ng-disabled=\\\"loading\\\">\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-save\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\tLocal Snapshot\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t<button class=\\\"btn gf-form-btn width-16 btn-secondary\\\" ng-if=\\\"externalEnabled\\\" ng-click=\\\"createSnapshot(true)\\\" ng-disabled=\\\"loading\\\">\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-cloud-upload\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t{{sharingButtonText}}\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t<a class=\\\"btn btn-link\\\" ng-click=\\\"dismiss()\\\">Cancel</a>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"pull-right\\\" ng-if=\\\"step === 2\\\" style=\\\"padding: 5px\\\">\\r\\n\\t\\t\\t\\t\\tDid you make a mistake? <a class=\\\"pointer\\\" ng-click=\\\"deleteSnapshot()\\\" target=\\\"_blank\\\">delete snapshot.</a>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n</script>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/settings/settings.html';\nvar html = \"<aside class=dashboard-settings__aside>\\r\\n\\t<h2 class=dashboard-settings__aside-header>\\r\\n\\t\\t<i class=\\\"fa fa-cog\\\"></i>\\r\\n\\t\\tSettings\\r\\n\\t</h2>\\r\\n\\r\\n\\t<a href={{::section.url}} class=dashboard-settings__nav-item ng-class=\\\"{active: ctrl.viewId === section.id}\\\" ng-repeat=\\\"section in ctrl.sections\\\">\\r\\n    <i class={{::section.icon}}></i>\\r\\n\\t\\t{{::section.title}}\\r\\n\\t</a>\\r\\n\\r\\n\\t<div class=dashboard-settings__aside-actions>\\r\\n    <button class=\\\"btn btn-success\\\" ng-click=ctrl.saveDashboard() ng-show=ctrl.canSave>\\r\\n\\t\\t\\t<i class=\\\"fa fa-save\\\"></i> Save\\r\\n\\t\\t</button>\\r\\n\\t\\t<button class=\\\"btn btn-inverse\\\" ng-click=ctrl.openSaveAsModal() ng-show=ctrl.canSaveAs>\\r\\n\\t\\t\\t<i class=\\\"fa fa-copy\\\"></i>\\r\\n\\t\\t\\tSave As...\\r\\n\\t\\t</button>\\r\\n\\t\\t<button class=\\\"btn btn-danger\\\" ng-click=ctrl.deleteDashboard() ng-show=ctrl.canDelete>\\r\\n\\t\\t\\t<i class=\\\"fa fa-trash\\\"></i>\\r\\n\\t\\t\\tDelete\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n</aside>\\r\\n\\r\\n<div class=dashboard-settings__content ng-if=\\\"ctrl.viewId === 'settings'\\\">\\r\\n\\t<h3 class=dashboard-settings__header>\\r\\n\\t\\tGeneral\\r\\n\\t</h3>\\r\\n\\r\\n\\t<div class=gf-form-group>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-7\\\">Name</label>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input width-30\\\" ng-model=ctrl.dashboard.title>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-7\\\">Description</label>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input width-30\\\" ng-model=ctrl.dashboard.description>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-7\\\">\\r\\n\\t\\t\\t\\tTags\\r\\n\\t\\t\\t\\t<info-popover mode=right-normal>Press enter to add a tag</info-popover>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t\\t<bootstrap-tagsinput ng-model=ctrl.dashboard.tags tagclass=\\\"label label-tag\\\" placeholder=\\\"add tags\\\">\\r\\n\\t\\t\\t</bootstrap-tagsinput>\\r\\n\\t\\t</div>\\r\\n\\t\\t<folder-picker initial-title=ctrl.dashboard.meta.folderTitle initial-folder-id=ctrl.dashboard.meta.folderId on-change=ctrl.onFolderChange($folder) enable-create-new=true is-valid-selection=true label-class=width-7>\\r\\n\\t\\t</folder-picker>\\r\\n\\t\\t<gf-form-switch class=gf-form label=Editable tooltip=\\\"Uncheck, then save and reload to disable all dashboard editing\\\" checked=ctrl.dashboard.editable label-class=width-7>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t</div>\\r\\n\\r\\n\\t<gf-time-picker-settings dashboard=ctrl.dashboard></gf-time-picker-settings>\\r\\n\\r\\n\\t<h5 class=section-heading>Panel Options</h5>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label width-11\\\">\\r\\n\\t\\t\\tGraph Tooltip\\r\\n\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\tCycle between options using Shortcut: CTRL+O or CMD+O\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</label>\\r\\n\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t<select ng-model=ctrl.dashboard.graphTooltip class=gf-form-input ng-options=\\\"f.value as f.text for f in [{value: 0, text: 'Default'}, {value: 1, text: 'Shared crosshair'},{value: 2, text: 'Shared Tooltip'}]\\\"></select>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=dashboard-settings__content ng-if=\\\"ctrl.viewId === 'annotations'\\\" ng-include=\\\"'public/app/features/annotations/partials/editor.html'\\\">\\r\\n</div>\\r\\n\\r\\n<div class=dashboard-settings__content ng-if=\\\"ctrl.viewId === 'templating'\\\" ng-include=\\\"'public/app/features/templating/partials/editor.html'\\\">\\r\\n</div>\\r\\n\\r\\n<div class=dashboard-settings__content ng-if=\\\"ctrl.viewId === 'links'\\\">\\r\\n\\t<dash-links-editor dashboard=ctrl.dashboard></dash-links-editor>\\r\\n</div>\\r\\n\\r\\n<div class=dashboard-settings__content ng-if=\\\"ctrl.viewId === 'versions'\\\">\\r\\n\\t<gf-dashboard-history dashboard=dashboard></gf-dashboard-history>\\r\\n</div>\\r\\n\\r\\n<div class=dashboard-settings__content ng-if=\\\"ctrl.viewId === 'dashboard_json'\\\">\\r\\n\\t<h3 class=dashboard-settings__header>JSON Model</h3>\\r\\n  <div class=dashboard-settings__subheader>\\r\\n    The JSON Model below is data structure that defines the dashboard. Including settings, panel settings & layout,\\r\\n    queries etc.\\r\\n  </div>\\r\\n\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<code-editor content=ctrl.json data-mode=json data-max-lines=30></code-editor>\\r\\n\\t</div>\\r\\n\\r\\n  <div class=gf-form-button-row>\\r\\n    <button class=\\\"btn btn-success\\\" ng-click=ctrl.saveDashboardJson() ng-show=ctrl.canSave>\\r\\n      <i class=\\\"fa fa-save\\\"></i> Save Changes\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=dashboard-settings__content ng-if=\\\"ctrl.viewId === 'permissions'\\\">\\r\\n  <dashboard-permissions ng-if=\\\"ctrl.dashboard && !ctrl.hasUnsavedFolderChange\\\" dashboardid=ctrl.dashboard.id backendsrv=ctrl.backendSrv folder=ctrl.getFolder() />\\r\\n  <div ng-if=ctrl.hasUnsavedFolderChange>\\r\\n    <h5>You have changed folder, please save to view permissions.</h5>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=dashboard-settings__content ng-if=\\\"ctrl.viewId === '404'\\\">\\r\\n  <h3 class=dashboard-settings__header>Settings view not found</h3>\\r\\n\\r\\n  <div>\\r\\n    <h5>The settings page could not be found or you do not have permission to access it</h5>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=dashboard-settings__content ng-if=\\\"ctrl.viewId === 'make_editable'\\\">\\r\\n  <h3 class=dashboard-settings__header>Make Editable</h3>\\r\\n\\r\\n  <button class=\\\"btn btn-success\\\" ng-click=ctrl.makeEditable()>\\r\\n    Make Editable\\r\\n  </button>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/submenu/submenu.html';\nvar html = \"<div class=submenu-controls>\\r\\n  <div ng-repeat=\\\"variable in ctrl.variables\\\" ng-hide=\\\"variable.hide === 2\\\" class=\\\"submenu-item gf-form-inline\\\">\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label template-variable\\\" ng-hide=\\\"variable.hide === 1\\\">\\r\\n        {{variable.label || variable.name}}\\r\\n      </label>\\r\\n      <value-select-dropdown ng-if=\\\"variable.type !== 'adhoc' && variable.type !== 'textbox'\\\" variable=variable on-updated=ctrl.variableUpdated(variable)></value-select-dropdown>\\r\\n      <input type=text ng-if=\\\"variable.type === 'textbox'\\\" ng-model=variable.query class=\\\"gf-form-input width-12\\\" ng-blur=\\\"variable.current.value != variable.query && variable.updateOptions() && ctrl.variableUpdated(variable);\\\" ng-keydown=\\\"$event.keyCode === 13 && variable.current.value != variable.query && variable.updateOptions() && ctrl.variableUpdated(variable);\\\">\\r\\n    </div>\\r\\n    <ad-hoc-filters ng-if=\\\"variable.type === 'adhoc'\\\" variable=variable></ad-hoc-filters>\\r\\n  </div>\\r\\n\\r\\n  <div ng-if=\\\"ctrl.dashboard.annotations.list.length > 0\\\">\\r\\n    <div ng-repeat=\\\"annotation in ctrl.dashboard.annotations.list\\\" ng-hide=annotation.hide class=submenu-item ng-class=\\\"{'annotation-disabled': !annotation.enable}\\\">\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label={{annotation.name}} checked=annotation.enable on-change=ctrl.annotationStateChanged()></gf-form-switch>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"gf-form gf-form--grow\\\">\\r\\n  </div>\\r\\n\\r\\n  <div ng-if=\\\"ctrl.dashboard.links.length > 0\\\">\\r\\n    <dash-links-container links=ctrl.dashboard.links class=gf-form-inline></dash-links-container>\\r\\n  </div>\\r\\n\\r\\n  <div class=clearfix></div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/timepicker/settings.html';\nvar html = \"<div class=editor-row>\\r\\n\\t<h5 class=section-heading>Time Options</h5>\\r\\n\\r\\n  <div class=gf-form-group>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Timezone</label>\\r\\n\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t<select ng-model=ctrl.dashboard.timezone class=gf-form-input ng-options=\\\"f.value as f.text for f in [{value: '', text: 'Default'}, {value: 'browser', text: 'Local browser time'},{value: 'utc', text: 'UTC'}]\\\"></select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Auto-refresh</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-25\\\" ng-model=ctrl.panel.refresh_intervals array-join>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Now delay now-</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-25\\\" ng-model=ctrl.panel.nowDelay placeholder=0m valid-time-span bs-tooltip=\\\"'Enter 1m to ignore the last minute (because it can contain incomplete metrics)'\\\" data-placement=right>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<gf-form-switch class=gf-form label=\\\"Hide time picker\\\" checked=ctrl.panel.hidden label-class=width-10></gf-form-switch>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/dashboard/timepicker/timepicker.html';\nvar html = \"<div class=navbar-buttons>\\r\\n  <button class=\\\"btn navbar-button navbar-button--tight\\\" ng-click=ctrl.move(-1) ng-if=ctrl.isAbsolute>\\r\\n\\t\\t<i class=\\\"fa fa-chevron-left\\\"></i>\\r\\n\\t</button>\\r\\n\\r\\n\\t<button bs-tooltip=ctrl.tooltip data-placement=bottom ng-click=ctrl.openDropdown() class=\\\"btn navbar-button gf-timepicker-nav-btn\\\">\\r\\n\\t\\t<i class=\\\"fa fa-clock-o\\\"></i>\\r\\n\\t\\t<span ng-bind=ctrl.rangeString></span>\\r\\n\\t\\t<span ng-show=ctrl.isUtc class=gf-timepicker-utc>UTC</span>\\r\\n\\t\\t<span ng-show=ctrl.dashboard.refresh class=text-warning>&nbsp; Refresh every {{ctrl.dashboard.refresh}}</span>\\r\\n\\t</button>\\r\\n\\r\\n  <button class=\\\"btn navbar-button navbar-button--tight\\\" ng-click=ctrl.move(1) ng-if=ctrl.isAbsolute>\\r\\n\\t\\t<i class=\\\"fa fa-chevron-right\\\"></i>\\r\\n\\t</button>\\r\\n\\r\\n  <button class=\\\"btn navbar-button navbar-button--zoom\\\" bs-tooltip=\\\"'Time range zoom out <br> CTRL+Z'\\\" data-placement=bottom ng-click=ctrl.zoom(2)>\\r\\n\\t\\t<i class=\\\"fa fa-search-minus\\\"></i>\\r\\n\\t</button>\\r\\n\\r\\n  <button class=\\\"btn navbar-button navbar-button--refresh\\\" ng-click=ctrl.timeSrv.refreshDashboard()>\\r\\n\\t\\t<i class=\\\"fa fa-refresh\\\"></i>\\r\\n\\t</button>\\r\\n</div>\\r\\n\\r\\n<div ng-if=ctrl.isOpen class=gf-timepicker-dropdown>\\r\\n  <form name=timeForm class=gf-timepicker-absolute-section>\\r\\n    <h3 class=section-heading>Custom range</h3>\\r\\n\\r\\n    <label class=small>From:</label>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=\\\"gf-form max-width-28\\\">\\r\\n        <input type=text class=\\\"gf-form-input input-large\\\" ng-model=ctrl.editTimeRaw.from input-datetime>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <button class=\\\"btn gf-form-btn btn-primary\\\" type=button ng-click=\\\"openFromPicker=!openFromPicker\\\">\\r\\n          <i class=\\\"fa fa-calendar\\\"></i>\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div ng-if=openFromPicker>\\r\\n      <datepicker ng-model=ctrl.absolute.fromJs class=gf-timepicker-component show-weeks=false starting-day=ctrl.firstDayOfWeek ng-change=ctrl.absoluteFromChanged()></datepicker>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <label class=small>To:</label>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=\\\"gf-form max-width-28\\\">\\r\\n        <input type=text class=\\\"gf-form-input input-large\\\" ng-model=ctrl.editTimeRaw.to input-datetime>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <button class=\\\"btn gf-form-btn btn-primary\\\" type=button ng-click=\\\"openToPicker=!openToPicker\\\">\\r\\n          <i class=\\\"fa fa-calendar\\\"></i>\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div ng-if=openToPicker>\\r\\n      <datepicker ng-model=ctrl.absolute.toJs class=gf-timepicker-component show-weeks=false starting-day=ctrl.firstDayOfWeek ng-change=ctrl.absoluteToChanged()></datepicker>\\r\\n    </div>\\r\\n\\r\\n    <label class=small>Refreshing every:</label>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=\\\"gf-form max-width-28\\\">\\r\\n        <select ng-model=ctrl.refresh.value class=\\\"gf-form-input input-medium\\\" ng-options=\\\"f.value as f.text for f in ctrl.refresh.options\\\"></select>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <button type=submit class=\\\"btn gf-form-btn btn-secondary\\\" ng-click=ctrl.applyCustom(); ng-disabled=!timeForm.$valid>Apply</button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </form>\\r\\n\\r\\n  <div class=gf-timepicker-relative-section>\\r\\n    <h3 class=section-heading>Quick ranges</h3>\\r\\n    <ul ng-repeat=\\\"group in ctrl.timeOptions\\\">\\r\\n      <li bindonce ng-repeat=\\\"option in group\\\" ng-class=\\\"{active: option.active}\\\">\\r\\n        <a ng-click=ctrl.setRelativeFilter(option) bo-text=option.display></a>\\r\\n      </li>\\r\\n    </ul>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/manage-dashboards/partials/dashboard_list.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n  <manage-dashboards/>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/manage-dashboards/partials/snapshot_list.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n   <table class=filter-table>\\r\\n    <thead>\\r\\n      <th><strong>Name</strong></th>\\r\\n      <th><strong>Snapshot url</strong></th>\\r\\n      <th style=width:70px></th>\\r\\n      <th style=width:25px></th>\\r\\n\\t\\t</thead>\\r\\n\\t\\t<tr ng-repeat=\\\"snapshot in ctrl.snapshots\\\">\\r\\n      <td>\\r\\n\\t\\t\\t\\t<a href=dashboard/snapshot/{{snapshot.key}}>{{snapshot.name}}</a>\\r\\n      </td>\\r\\n      <td>\\r\\n        <a href=dashboard/snapshot/{{snapshot.key}}>dashboard/snapshot/{{snapshot.key}}</a>\\r\\n      </td>\\r\\n      <td class=text-center>\\r\\n        <a href=dashboard/snapshot/{{snapshot.key}} class=\\\"btn btn-inverse btn-mini\\\">\\r\\n          <i class=\\\"fa fa-eye\\\"></i>\\r\\n          View\\r\\n        </a>\\r\\n      </td>\\r\\n      <td class=text-right>\\r\\n        <a ng-click=ctrl.removeSnapshot(snapshot) class=\\\"btn btn-danger btn-mini\\\">\\r\\n          <i class=\\\"fa fa-remove\\\"></i>\\r\\n        </a>\\r\\n      </td>\\r\\n    </tr>\\r\\n  </table>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/org/partials/change_password.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\t<h2 class=page-sub-heading>\\r\\n\\t\\tChange your password\\r\\n\\t</h2>\\r\\n\\r\\n\\t<div ng-if=\\\"ldapEnabled || authProxyEnabled\\\">\\r\\n\\t\\tYou cannot change password when ldap or auth proxy authentication is enabled.\\r\\n\\t</div>\\r\\n\\r\\n\\t<form name=userForm class=gf-form-group ng-hide=\\\"ldapEnabled || authProxyEnabled\\\">\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Old Password</span>\\r\\n\\t\\t\\t<input class=\\\"gf-form-input max-width-21\\\" type=password required ng-model=command.oldPassword>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">New Password</span>\\r\\n\\t\\t\\t<input class=\\\"gf-form-input max-width-21\\\" type=password required ng-minlength=4 ng-model=command.newPassword>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Confirm Password</span>\\r\\n\\t\\t\\t<input class=\\\"gf-form-input max-width-21\\\" type=password required ng-minlength=4 ng-model=command.confirmNew>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=changePassword()>Change Password</button>\\r\\n\\t\\t\\t<a class=btn-text href=profile>Cancel</a>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/org/partials/create_team.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\" ng-cloak>\\r\\n\\t<h3 class=page-sub-heading>New Team</h3>\\r\\n\\r\\n\\t<form name=ctrl.saveForm class=gf-form-group ng-submit=ctrl.create()>\\r\\n\\t\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Name</span>\\r\\n\\t\\t\\t<input type=text required ng-model=ctrl.name class=\\\"gf-form-input max-width-22\\\" give-focus=true>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">\\r\\n\\t\\t\\t\\tEmail\\r\\n\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\tThis is optional and is primarily used for allowing custom team avatars.\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</span>\\r\\n\\t\\t\\t<input class=\\\"gf-form-input max-width-22\\\" type=email ng-model=ctrl.email placeholder=email@test.com>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success width-12\\\">\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-save\\\"></i> Create\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/org/partials/invite.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\" ng-cloak>\\r\\n\\r\\n\\t<h2 class=page-sub-heading>Invite User</h2>\\r\\n\\r\\n\\t<div class=p-b-2>\\r\\n\\t\\tSend invite or add existing Grafana user to the organization\\r\\n\\t\\t<span class=highlight-word>{{contextSrv.user.orgName}}</span>\\r\\n\\t</div>\\r\\n\\r\\n\\t<form name=ctrl.inviteForm>\\r\\n\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Email or Username</span>\\r\\n\\t\\t\\t\\t<input type=text ng-model=ctrl.invite.loginOrEmail required class=gf-form-input placeholder=email@test.com>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Name</span>\\r\\n\\t\\t\\t\\t<input type=text ng-model=ctrl.invite.name class=gf-form-input placeholder=\\\"name (optional)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n        <span class=\\\"gf-form-label width-10\\\">Role</span>\\r\\n\\t\\t\\t\\t<select ng-model=ctrl.invite.role class=gf-form-input ng-options=\\\"f for f in ['Viewer', 'Editor', 'Admin']\\\">\\r\\n\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=\\\"Send invite email\\\" checked=ctrl.invite.sendEmail label-class=width-10></gf-form-switch>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=ctrl.sendInvite();>Invite</button>\\r\\n\\t\\t\\t\\t<a class=\\\"btn btn-inverse\\\" href=org/users>Back</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t</div></form>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/org/partials/newOrg.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\" ng-form=playlistEditForm>\\r\\n\\t<h2 class=page-sub-heading>\\r\\n\\t\\tNew Organization\\r\\n\\t</h2>\\r\\n\\r\\n\\t<p class=playlist-description>Each organization contains their own dashboards, data sources and configuration, and cannot be shared between orgs. While users may belong to more than one, multiple organization are most frequently used in multi-tenant deployments. </p>\\r\\n\\r\\n\\t<form>\\r\\n\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Org. name</span>\\r\\n\\t\\t\\t\\t<input type=text ng-model=newOrg.name required class=\\\"gf-form-input max-width-21\\\" placeholder=\\\"organization name\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<br>\\r\\n\\t\\t\\t<div class=gf-form-buttons-row>\\r\\n\\t\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=createOrg()>Create</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/org/partials/orgDetails.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n  <h3 class=page-sub-heading>Organization profile</h3>\\r\\n\\r\\n  <form name=orgForm class=gf-form-group>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=\\\"gf-form max-width-28\\\">\\r\\n        <span class=gf-form-label>Organization name</span>\\r\\n        <input class=gf-form-input type=text required ng-model=org.name>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-button-row>\\r\\n      <button type=submit class=\\\"btn btn-success\\\" ng-click=update()>Save</button>\\r\\n    </div>\\r\\n  </form>\\r\\n  <prefs-control mode=org></prefs-control>\\r\\n</div>\\r\\n\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/org/partials/profile.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n  <h3 class=page-sub-heading>User Profile</h3>\\r\\n\\r\\n  <form name=ctrl.userForm class=gf-form-group>\\r\\n\\r\\n    <div class=\\\"gf-form max-width-30\\\">\\r\\n      <span class=\\\"gf-form-label width-8\\\">Name</span>\\r\\n      <input class=\\\"gf-form-input max-width-22\\\" type=text required ng-model=ctrl.user.name>\\r\\n    </div>\\r\\n    <div class=\\\"gf-form max-width-30\\\">\\r\\n      <span class=\\\"gf-form-label width-8\\\">Email</span>\\r\\n      <input class=\\\"gf-form-input max-width-22\\\" type=email ng-readonly=ctrl.readonlyLoginFields required ng-model=ctrl.user.email>\\r\\n      <i ng-if=ctrl.readonlyLoginFields class=\\\"fa fa-lock gf-form-icon--right-absolute\\\" bs-tooltip=\\\"'Login Details Locked - managed in another system.'\\\"></i>\\r\\n    </div>\\r\\n    <div class=\\\"gf-form max-width-30\\\">\\r\\n      <span class=\\\"gf-form-label width-8\\\">Username</span>\\r\\n      <input class=\\\"gf-form-input max-width-22\\\" type=text ng-readonly=ctrl.readonlyLoginFields required ng-model=ctrl.user.login>\\r\\n      <i ng-if=ctrl.readonlyLoginFields class=\\\"fa fa-lock gf-form-icon--right-absolute\\\" bs-tooltip=\\\"'Login Details Locked - managed in another system.'\\\"></i>\\r\\n    </div>\\r\\n    <div class=gf-form-button-row>\\r\\n      <button type=submit class=\\\"btn btn-success\\\" ng-click=ctrl.update()>Save</button>\\r\\n    </div>\\r\\n  </form>\\r\\n\\r\\n  <prefs-control mode=user></prefs-control>\\r\\n\\r\\n  <h3 class=page-heading ng-show=ctrl.showTeamsList>Teams</h3>\\r\\n  <div class=gf-form-group ng-show=ctrl.showTeamsList>\\r\\n    <table class=\\\"filter-table form-inline\\\">\\r\\n      <thead>\\r\\n        <tr>\\r\\n          <th></th>\\r\\n          <th>Name</th>\\r\\n          <th>Email</th>\\r\\n          <th>Members</th>\\r\\n        </tr>\\r\\n      </thead>\\r\\n      <tbody>\\r\\n        <tr ng-repeat=\\\"team in ctrl.teams\\\">\\r\\n          <td class=\\\"width-4 text-center\\\"><img class=filter-table__avatar src={{team.avatarUrl}}></td>\\r\\n          <td>{{team.name}}</td>\\r\\n          <td>{{team.email}}</td>\\r\\n          <td>{{team.memberCount}}</td>\\r\\n        </tr>\\r\\n      </tbody>\\r\\n    </table>\\r\\n  </div>\\r\\n\\r\\n  <h3 class=page-heading ng-show=ctrl.showOrgsList>Organizations</h3>\\r\\n  <div class=gf-form-group ng-show=ctrl.showOrgsList>\\r\\n    <table class=\\\"filter-table form-inline\\\">\\r\\n      <thead>\\r\\n        <tr>\\r\\n          <th>Name</th>\\r\\n          <th>Role</th>\\r\\n          <th></th>\\r\\n        </tr>\\r\\n      </thead>\\r\\n      <tbody>\\r\\n        <tr ng-repeat=\\\"org in ctrl.orgs\\\">\\r\\n          <td>{{org.name}}</td>\\r\\n          <td>{{org.role}}</td>\\r\\n          <td class=text-right>\\r\\n            <span class=\\\"btn btn-primary btn-mini\\\" ng-show=\\\"org.orgId === contextSrv.user.orgId\\\">\\r\\n              Current\\r\\n            </span>\\r\\n            <a ng-click=ctrl.setUsingOrg(org) class=\\\"btn btn-inverse btn-mini\\\" ng-show=\\\"org.orgId !== contextSrv.user.orgId\\\">\\r\\n              Select\\r\\n            </a>\\r\\n          </td>\\r\\n        </tr>\\r\\n      </tbody>\\r\\n    </table>\\r\\n  </div>\\r\\n</div>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/org/partials/select_org.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\r\\n\\t<div class=signup>\\r\\n\\t\\t<div class=login-form>\\r\\n\\r\\n\\t\\t\\t<div class=modal-tagline>\\r\\n\\t\\t\\t\\tYou have been added to another Organization due to an open invitation!\\r\\n\\r\\n\\t\\t\\t\\tPlease select which organization you want to <br>\\r\\n\\t\\t\\t\\tuse right now (you can change this later at any time).\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div style=\\\"display:inline-block;width:400px;margin:30px 0\\\">\\r\\n\\t\\t\\t\\t<div ng-repeat=\\\"org in orgs\\\">\\r\\n\\t\\t\\t\\t\\t<a ng-click=setUsingOrg(org) class=\\\"btn btn-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t{{org.name}} ({{org.role}})\\r\\n\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/panel/partials/metrics_tab.html';\nvar html = \"<div class=gf-form-group>\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n      <label class=gf-form-label>Data Source</label>\\r\\n      <gf-form-dropdown model=ctrl.panelDsValue css-class=gf-size-auto lookup-text=true get-options=ctrl.getOptions(true) on-change=ctrl.datasourceChanged($option)>\\r\\n      </gf-form-dropdown>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label gf-form-label--grow\\\"></label>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-if=ctrl.queryOptions>\\r\\n\\t\\t\\t<a class=gf-form-label ng-click=ctrl.toggleOptions()>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-fw fa-caret-right\\\" ng-hide=ctrl.optionsOpen></i><i class=\\\"fa fa-fw fa-caret-down\\\" ng-show=ctrl.optionsOpen></i>Options\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-if=ctrl.hasQueryHelp>\\r\\n\\t\\t\\t<button class=gf-form-label ng-click=ctrl.toggleHelp()>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-fw fa-caret-right\\\" ng-hide=ctrl.helpOpen></i><i class=\\\"fa fa-fw fa-caret-down\\\" ng-show=ctrl.helpOpen></i>Help\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<button class=gf-form-label ng-click=ctrl.toggleQueryTroubleshooter() bs-tooltip=\\\"'Display query request & response'\\\">\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-fw fa-caret-right\\\" ng-hide=ctrl.queryTroubleshooterOpen></i><i class=\\\"fa fa-fw fa-caret-down\\\" ng-show=ctrl.queryTroubleshooterOpen></i>Query Inspector\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div>\\r\\n\\t\\t<div ng-if=ctrl.optionsOpen>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--flex-end\\\" ng-if=ctrl.queryOptions.minInterval>\\r\\n\\t\\t\\t\\t<label class=gf-form-label>Min time interval</label>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input width-6\\\" placeholder={{ctrl.panelCtrl.interval}} ng-model=ctrl.panel.interval spellcheck=false ng-model-onblur ng-change=ctrl.panelCtrl.refresh() />\\r\\n\\t\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\t\\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\\r\\n\\t\\t\\t\\t\\tfor example <code>1m</code> if your data is written every minute. Access auto interval via variable <code>$__interval</code> for time range\\r\\n\\t\\t\\t\\t\\tstring and <code>$__interval_ms</code> for numeric variable that can be used in math expressions.\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--flex-end\\\" ng-if=ctrl.queryOptions.cacheTimeout>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-9\\\">Cache timeout</label>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input width-6\\\" placeholder=60 ng-model=ctrl.panel.cacheTimeout ng-model-onblur ng-change=ctrl.panelCtrl.refresh() spellcheck=false />\\r\\n\\t\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\t\\tIf your time series store has a query cache this option can override the default\\r\\n\\t\\t\\t\\t\\tcache timeout. Specify a numeric value in seconds.\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--flex-end\\\" ng-if=ctrl.queryOptions.maxDataPoints>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-9\\\">Max data points</label>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input width-6\\\" placeholder=auto ng-model-onblur ng-change=ctrl.panelCtrl.refresh() ng-model=ctrl.panel.maxDataPoints spellcheck=false />\\r\\n\\t\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\t\\tThe maximum data points the query should return. For graphs this\\r\\n\\t\\t\\t\\t\\tis automatically set to one data point per pixel.\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=grafana-info-box ng-if=ctrl.helpOpen>\\r\\n\\t\\t\\t<div class=markdown-html ng-bind-html=ctrl.helpHtml></div>\\r\\n\\t\\t\\t<a class=grafana-info-box__close ng-click=ctrl.toggleHelp()>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-chevron-up\\\"></i>\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<query-troubleshooter panel-ctrl=ctrl.panelCtrl is-open=ctrl.queryTroubleshooterOpen></query-troubleshooter>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"query-editor-rows gf-form-group\\\" ng-if=ctrl.datasourceInstance>\\r\\n\\t<div ng-repeat=\\\"target in ctrl.panel.targets\\\" ng-class=\\\"{'gf-form-disabled': target.hide}\\\">\\r\\n\\t\\t<rebuild-on-change property=\\\"ctrl.panel.datasource || target.datasource\\\" show-null=true>\\r\\n\\t\\t\\t<plugin-component type=query-ctrl>\\r\\n\\t\\t\\t</plugin-component>\\r\\n\\t\\t</rebuild-on-change>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-query>\\r\\n\\t\\t<div class=\\\"gf-form gf-form-query-letter-cell\\\">\\r\\n\\t\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t\\t<span class=gf-form-query-letter-cell-carret>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\"></i>\\r\\n\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t<span class=gf-form-query-letter-cell-letter>{{ctrl.panelCtrl.nextRefId}}</span>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t\\t<button class=\\\"btn btn-secondary gf-form-btn\\\" ng-click=ctrl.addQuery() ng-hide=ctrl.datasourceInstance.meta.mixed>\\r\\n\\t\\t\\t\\tAdd Query\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t\\t<div class=dropdown ng-if=ctrl.datasourceInstance.meta.mixed>\\r\\n\\t\\t\\t\\t<gf-form-dropdown model=ctrl.addQueryDropdown get-options=ctrl.getOptions(false) on-change=ctrl.addMixedQuery($option)>\\r\\n\\t\\t\\t\\t</gf-form-dropdown>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/panel/partials/panelTime.html';\nvar html = \"<div class=gf-form-group>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<span class=gf-form-label>\\r\\n\\t\\t\\t<i class=\\\"fa fa-clock-o\\\"></i>\\r\\n\\t\\t</span>\\r\\n\\r\\n\\t\\t<span class=\\\"gf-form-label width-12\\\">Override relative time</span>\\r\\n\\t\\t<span class=\\\"gf-form-label width-6\\\">Last</span>\\r\\n\\r\\n\\t\\t<input type=text class=\\\"gf-form-input max-width-8\\\" placeholder=1h empty-to-null ng-model=ctrl.panel.timeFrom valid-time-span ng-change=ctrl.refresh() ng-model-onblur>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<span class=gf-form-label>\\r\\n\\t\\t\\t<i class=\\\"fa fa-clock-o\\\"></i>\\r\\n\\t\\t</span>\\r\\n\\t\\t<span class=\\\"gf-form-label width-12\\\">Add time shift</span>\\r\\n\\t\\t<span class=\\\"gf-form-label width-6\\\">Amount</span>\\r\\n\\t\\t<input type=text class=\\\"gf-form-input max-width-8\\\" placeholder=1h empty-to-null ng-model=ctrl.panel.timeShift valid-time-span ng-change=ctrl.refresh() ng-model-onblur>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=gf-form-label>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-clock-o\\\"></i>\\r\\n\\t\\t\\t</span>\\r\\n\\t\\t</div>\\r\\n\\t\\t<gf-form-switch class=\\\"gf-form max-width-30\\\" label=\\\"Hide time override info\\\" label-class=width-12 checked=ctrl.panel.hideTimeOverride switch-class=max-width-6 on-change=ctrl.refresh()>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/panel/partials/query_editor_row.html';\nvar html = \"\\r\\n<div class=gf-form-query>\\r\\n\\t<div class=\\\"gf-form gf-form-query-letter-cell\\\">\\r\\n    <label class=gf-form-label>\\r\\n      <a class=pointer tabindex=1 ng-click=ctrl.toggleCollapse()>\\r\\n        <span ng-class=\\\"{muted: !ctrl.canCollapse}\\\" class=gf-form-query-letter-cell-carret>\\r\\n          <i class=\\\"fa fa-caret-down\\\" ng-hide=ctrl.collapsed></i>\\r\\n          <i class=\\\"fa fa-caret-right\\\" ng-show=ctrl.collapsed></i>\\r\\n        </span>\\r\\n        <span class=gf-form-query-letter-cell-letter>{{ctrl.target.refId}}</span>\\r\\n        <em class=gf-form-query-letter-cell-ds ng-show=ctrl.target.datasource>({{ctrl.target.datasource}})</em>\\r\\n      </a>\\r\\n\\t\\t</label>\\r\\n  </div>\\r\\n\\r\\n\\t<div class=\\\"gf-form-query-content gf-form-query-content--collapsed\\\" ng-if=ctrl.collapsed>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label pointer gf-form-label--grow\\\" ng-click=ctrl.toggleCollapse()>\\r\\n\\t\\t\\t\\t{{ctrl.collapsedText}}\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div ng-transclude class=gf-form-query-content ng-if=!ctrl.collapsed>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label dropdown\\\">\\r\\n\\t\\t\\t<a class=\\\"pointer dropdown-toggle\\\" data-toggle=dropdown tabindex=1>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-bars\\\"></i>\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t\\t<ul class=\\\"dropdown-menu pull-right\\\" role=menu>\\r\\n\\t\\t\\t\\t<li role=menuitem ng-if=ctrl.hasTextEditMode>\\r\\n\\t\\t\\t\\t\\t<a tabindex=1 ng-click=ctrl.toggleEditorMode()>Toggle Edit Mode</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t<li role=menuitem>\\r\\n\\t\\t\\t\\t\\t<a tabindex=1 ng-click=ctrl.duplicateQuery()>Duplicate</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t<li role=menuitem>\\r\\n\\t\\t\\t\\t\\t<a tabindex=1 ng-click=ctrl.moveQuery(-1)>Move up</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t<li role=menuitem>\\r\\n\\t\\t\\t\\t\\t<a tabindex=1 ng-click=ctrl.moveQuery(1)>Move down</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t</label>\\r\\n    <label class=gf-form-label>\\r\\n\\t\\t\\t<a ng-click=ctrl.toggleHideQuery() role=menuitem>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-eye\\\"></i>\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t</label>\\r\\n\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t<a class=pointer tabindex=1 ng-click=ctrl.removeQuery(ctrl.target)>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-trash\\\"></i>\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t</label>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/panel/partials/soloPanel.html';\nvar html = \"<div class=\\\"panel panel--solo\\\" ng-if=panel style=width:100%>\\r\\n\\t<plugin-component type=panel>\\r\\n\\t</plugin-component>\\r\\n</div>\\r\\n<div class=clearfix></div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","import React from 'react';\r\nimport Transition from 'react-transition-group/Transition';\r\n\r\nconst defaultMaxHeight = '200px'; // When animating using max-height we need to use a static value.\r\n// If this is not enough, pass in <SlideDown maxHeight=\"....\r\nconst defaultDuration = 200;\r\nconst defaultStyle = {\r\n  transition: `max-height ${defaultDuration}ms ease-in-out`,\r\n  overflow: 'hidden',\r\n};\r\n\r\nexport default ({ children, in: inProp, maxHeight = defaultMaxHeight }) => {\r\n  // There are 4 main states a Transition can be in:\r\n  // ENTERING, ENTERED, EXITING, EXITED\r\n  // https://reactcommunity.org/react-transition-group/\r\n  const transitionStyles = {\r\n    exited: { maxHeight: 0 },\r\n    entering: { maxHeight: maxHeight },\r\n    entered: { maxHeight: maxHeight, overflow: 'visible' },\r\n    exiting: { maxHeight: 0 },\r\n  };\r\n\r\n  return (\r\n    <Transition in={inProp} timeout={defaultDuration}>\r\n      {state => (\r\n        <div\r\n          style={{\r\n            ...defaultStyle,\r\n            ...transitionStyles[state],\r\n          }}\r\n        >\r\n          {children}\r\n        </div>\r\n      )}\r\n    </Transition>\r\n  );\r\n};\r\n","var path = 'public/app/features/playlist/partials/playlist.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\" ng-form=ctrl.playlistEditForm>\\r\\n\\r\\n\\t<h3 class=page-sub-heading ng-hide=ctrl.isNew>Edit Playlist</h3>\\r\\n\\t<h3 class=page-sub-heading ng-show=ctrl.isNew>New Playlist</h3>\\r\\n\\r\\n\\t<p class=playlist-description>A playlist rotates through a pre-selected list of Dashboards. A Playlist can be a great way to build situational awareness, or just show off your metrics to your team or visitors.</p>\\r\\n\\r\\n\\t<div class=gf-form-group>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Name</span>\\r\\n\\t\\t\\t<input type=text required ng-model=ctrl.playlist.name class=\\\"gf-form-input max-width-21\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Interval</span>\\r\\n\\t\\t\\t<input type=text required ng-model=ctrl.playlist.interval placeholder=5m class=\\\"gf-form-input max-width-21\\\">\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-group>\\r\\n\\t\\t<h3 class=page-headering>Dashboards</h3>\\r\\n\\r\\n\\t\\t<table class=\\\"filter-table playlist-available-list\\\">\\r\\n\\t\\t\\t<tr ng-repeat=\\\"playlistItem in ctrl.playlistItems\\\">\\r\\n\\t\\t\\t\\t<td ng-if=\\\"playlistItem.type === 'dashboard_by_id'\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"icon-gf icon-gf-dashboard\\\"></i>&nbsp;&nbsp;{{playlistItem.title}}\\r\\n\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t<td ng-if=\\\"playlistItem.type === 'dashboard_by_tag'\\\">\\r\\n\\t\\t\\t\\t\\t<a class=\\\"search-result-tag label label-tag\\\" tag-color-from-name=playlistItem.title>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-tag\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t<span>{{playlistItem.title}}</span>\\r\\n\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t</td>\\r\\n\\r\\n\\t\\t\\t\\t<td class=selected-playlistitem-settings>\\r\\n\\t\\t\\t\\t\\t<button class=\\\"btn btn-inverse btn-mini\\\" ng-hide=$first ng-click=ctrl.movePlaylistItemUp(playlistItem)>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-arrow-up\\\"></i>\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t<button class=\\\"btn btn-inverse btn-mini\\\" ng-hide=$last ng-click=ctrl.movePlaylistItemDown(playlistItem)>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-arrow-down\\\"></i>\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t<button class=\\\"btn btn-inverse btn-mini\\\" ng-click=ctrl.removePlaylistItem(playlistItem)>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t<tr ng-if=\\\"ctrl.playlistItems.length === 0\\\">\\r\\n\\t\\t\\t\\t<td><em>Playlist is empty, add dashboards below.</em></td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t</table>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-group>\\r\\n\\t\\t<h3 class=page-headering>Add dashboards</h3>\\r\\n\\t\\t<playlist-search class=playlist-search-container search-started=ctrl.searchStarted(promise)></playlist-search>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"ctrl.filteredDashboards.length > 0\\\">\\r\\n\\t\\t\\t<table class=\\\"filter-table playlist-available-list\\\">\\r\\n\\t\\t\\t\\t<tr ng-repeat=\\\"playlistItem in ctrl.filteredDashboards\\\">\\r\\n\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"icon-gf icon-gf-dashboard\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t&nbsp;&nbsp;{{playlistItem.title}}\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-star\\\" ng-show=playlistItem.isStarred></i>\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t<td class=add-dashboard>\\r\\n\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-inverse btn-mini pull-right\\\" ng-click=ctrl.addPlaylistItem(playlistItem)>\\r\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-plus\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\tAdd to playlist\\r\\n\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t</table>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=playlist-search-results-container ng-if=\\\"ctrl.filteredTags.length > 0;\\\">\\r\\n\\t\\t\\t<table class=\\\"filter-table playlist-available-list\\\">\\r\\n\\t\\t\\t\\t<tr ng-repeat=\\\"tag in ctrl.filteredTags\\\">\\r\\n\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t<a class=\\\"search-result-tag label label-tag\\\" tag-color-from-name=tag.term>\\r\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-tag\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{tag.term}} &nbsp;({{tag.count}})</span>\\r\\n\\t\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t<td class=add-dashboard>\\r\\n\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-inverse btn-mini pull-right\\\" ng-click=ctrl.addTagPlaylistItem(tag)>\\r\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-plus\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\tAdd to playlist\\r\\n\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t</table>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=clearfix></div>\\r\\n\\r\\n\\t<div class=gf-form-button-row>\\r\\n\\t\\t<a class=\\\"btn btn-success\\\" ng-show=ctrl.isNew ng-disabled=\\\"ctrl.playlistEditForm.$invalid || ctrl.isPlaylistEmpty()\\\" ng-click=\\\"ctrl.savePlaylist(ctrl.playlist, ctrl.playlistItems)\\\">Create</a>\\r\\n\\t\\t<a class=\\\"btn btn-success\\\" ng-show=!ctrl.isNew ng-disabled=\\\"ctrl.playlistEditForm.$invalid || ctrl.isPlaylistEmpty()\\\" ng-click=\\\"ctrl.savePlaylist(ctrl.playlist, ctrl.playlistItems)\\\">Save</a>\\r\\n\\t\\t<a class=btn-text ng-click=ctrl.backToList()>Cancel</a>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/playlist/partials/playlist_search.html';\nvar html = \"<div class=playlist-search-field-wrapper>\\r\\n  <span style=position:relative>\\r\\n    <input type=text placeholder=\\\"Find dashboards by name\\\" tabindex=1 ng-keydown=ctrl.keyDown($event) ng-model=ctrl.query.query ng-model-options=\\\"{ debounce: 500 }\\\" spellcheck=false ng-change=ctrl.searchDashboards() />\\r\\n\\t\\t<div class=playlist-search-switches>\\r\\n\\t\\t\\t<i class=\\\"fa fa-filter\\\"></i>\\r\\n\\t\\t\\t<a class=pointer href=\\\"javascript:void 0;\\\" ng-click=ctrl.showStarred() tabindex=2>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\" ng-show=ctrl.query.starred></i>\\r\\n\\t\\t\\t\\tstarred\\r\\n\\t\\t\\t</a> |\\r\\n\\t\\t\\t<a class=pointer href=\\\"javascript:void 0;\\\" ng-click=ctrl.getTags() tabindex=3>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\" ng-show=ctrl.tagsMode></i>\\r\\n\\t\\t\\t\\ttags\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t\\t<span ng-if=ctrl.query.tag.length>\\r\\n\\t\\t\\t\\t|\\r\\n\\t\\t\\t\\t<span ng-repeat=\\\"tagName in ctrl.query.tag\\\">\\r\\n\\t\\t\\t\\t\\t<a ng-click=\\\"ctrl.removeTag(tagName, $event)\\\" tag-color-from-name=ctrl.tagName class=\\\"label label-tag\\\">\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t{{tagName}}\\r\\n\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t</span>\\r\\n\\t\\t</div>\\r\\n\\t</span>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/playlist/partials/playlists.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n  <div ng-if=\\\"ctrl.playlists.length > 0\\\">\\r\\n    <div class=page-action-bar>\\r\\n      <div class=page-action-bar__spacer></div>\\r\\n      <a class=\\\"btn btn-success pull-right\\\" href=playlists/create>\\r\\n        <i class=\\\"fa fa-plus\\\"></i>\\r\\n        New Playlist\\r\\n      </a>\\r\\n    </div>\\r\\n\\r\\n    <table class=\\\"filter-table filter-table--hover\\\">\\r\\n      <thead>\\r\\n        <th><strong>Name</strong></th>\\r\\n        <th style=width:100px></th>\\r\\n        <th style=width:78px></th>\\r\\n      </thead>\\r\\n      <tr ng-repeat=\\\"playlist in ctrl.playlists\\\">\\r\\n        <td class=link-td>\\r\\n          <a href=playlists/edit/{{playlist.id}}>{{playlist.name}}</a>\\r\\n        </td>\\r\\n        <td class=dropdown>\\r\\n          <button class=\\\"btn btn-inverse btn-small\\\" data-toggle=dropdown>\\r\\n            Start playlist\\r\\n            <i class=\\\"fa fa-caret-down\\\"></i>\\r\\n          </button>\\r\\n          <ul class=dropdown-menu role=menu>\\r\\n            <li>\\r\\n              <a href={{playlist.startUrl}}>\\r\\n                <i class=\\\"fa fa-play\\\"></i> In Normal mode\\r\\n              </a>\\r\\n              <a href=\\\"{{playlist.startUrl}}?kiosk=tv\\\">\\r\\n                <i class=\\\"fa fa-play\\\"></i> In TV mode\\r\\n              </a>\\r\\n              <a href=\\\"{{playlist.startUrl}}?kiosk=tv&autofitpanels\\\">\\r\\n                <i class=\\\"fa fa-play\\\"></i> In TV mode <span class=muted>(with auto fit panels)</span>\\r\\n              </a>\\r\\n              <a href={{playlist.startUrl}}?kiosk>\\r\\n                <i class=\\\"fa fa-play\\\"></i> In Kiosk mode\\r\\n              </a>\\r\\n              <a ng-href={{playlist.startUrl}}?kiosk&autofitpanels>\\r\\n                <i class=\\\"fa fa-play\\\"></i> In Kiosk mode <span class=muted>(with auto fit panels)</span>\\r\\n              </a>\\r\\n            </li>\\r\\n          </ul>\\r\\n        </td>\\r\\n        <td class=text-right>\\r\\n          <a ng-click=ctrl.removePlaylist(playlist) class=\\\"btn btn-danger btn-small\\\">\\r\\n            <i class=\\\"fa fa-remove\\\"></i>\\r\\n          </a>\\r\\n        </td>\\r\\n      </tr>\\r\\n    </table>\\r\\n  </div>\\r\\n  <div ng-if=\\\"ctrl.playlists.length === 0\\\">\\r\\n    <empty-list-cta model=\\\"{\\r\\n      title: 'There are no playlists created yet',\\r\\n      buttonIcon: 'fa fa-plus',\\r\\n      buttonLink: 'playlists/create',\\r\\n      buttonTitle: ' Create Playlist',\\r\\n      proTip: 'You can use playlists to remove control TVs',\\r\\n      proTipLink: 'http://docs.grafana.org/reference/playlist/',\\r\\n      proTipLinkTitle: 'Learn more',\\r\\n      proTipTarget: '_blank'\\r\\n    }\\\"/>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/plugins/import_list/import_list.html';\nvar html = \"<div class=gf-form-group ng-if=ctrl.dashboards.length>\\r\\n\\t<table class=filter-table>\\r\\n\\t\\t<tbody>\\r\\n\\t\\t\\t<tr ng-repeat=\\\"dash in ctrl.dashboards\\\">\\r\\n\\t\\t\\t\\t<td class=width-1>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"icon-gf icon-gf-dashboard\\\"></i>\\r\\n\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t<a href={{dash.importedUrl}} ng-show=dash.imported>\\r\\n\\t\\t\\t\\t\\t\\t{{dash.title}}\\r\\n\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t\\t<span ng-show=!dash.imported>{{dash.title}}</span>\\r\\n\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t<td style=text-align:right>\\r\\n\\t\\t\\t\\t\\t<button class=\\\"btn btn-secondary btn-small\\\" ng-click=\\\"ctrl.import(dash, false)\\\" ng-show=!dash.imported>\\r\\n\\t\\t\\t\\t\\t\\tImport\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t<button class=\\\"btn btn-secondary btn-small\\\" ng-click=\\\"ctrl.import(dash, true)\\\" ng-show=dash.imported>\\r\\n            <span ng-if=\\\"dash.revision !== dash.importedRevision\\\">Update</span>\\r\\n            <span ng-if=\\\"dash.revision === dash.importedRevision\\\">Re-import</span>\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t<button class=\\\"btn btn-danger btn-small\\\" ng-click=ctrl.remove(dash) ng-show=dash.imported>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-trash\\\"></i>\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t</tbody>\\r\\n\\t</table>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/plugins/partials/ds_edit.html';\nvar html = \"<page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n  <h3 class=page-sub-heading>Settings</h3>\\r\\n\\r\\n  <form name=ctrl.editForm ng-if=ctrl.current>\\r\\n    <div class=gf-form-group>\\r\\n      <div class=gf-form-inline>\\r\\n        <div class=\\\"gf-form max-width-30\\\">\\r\\n          <span class=\\\"gf-form-label width-10\\\">Name</span>\\r\\n          <input class=\\\"gf-form-input max-width-23\\\" type=text ng-model=ctrl.current.name placeholder=name required>\\r\\n          <info-popover offset=\\\"0px -135px\\\" mode=right-absolute>\\r\\n            The name is used when you select the data source in panels.\\r\\n            The <em>Default</em> data source is preselected in new\\r\\n            panels.\\r\\n          </info-popover>\\r\\n        </div>\\r\\n        <gf-form-switch class=gf-form label=Default checked=ctrl.current.isDefault switch-class=max-width-6></gf-form-switch>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=grafana-info-box ng-if=\\\"ctrl.datasourceMeta.state === 'alpha'\\\">\\r\\n      This plugin is marked as being in alpha state, which means it is in early development phase and\\r\\n      updates will include breaking changes.\\r\\n    </div>\\r\\n\\r\\n\\t\\t<div class=grafana-info-box ng-if=\\\"ctrl.datasourceMeta.state === 'beta'\\\">\\r\\n      This plugin is marked as being in a beta development state. This means it is in currently in active development and could be\\r\\n      missing important features.\\r\\n    </div>\\r\\n\\r\\n    <rebuild-on-change property=ctrl.datasourceMeta.id>\\r\\n      <plugin-component type=datasource-config-ctrl>\\r\\n      </plugin-component>\\r\\n    </rebuild-on-change>\\r\\n\\r\\n    <div ng-if=ctrl.hasDashboards>\\r\\n      <h3 class=section-heading>Bundled Plugin Dashboards</h3>\\r\\n      <div class=section>\\r\\n        <dashboard-import-list plugin=ctrl.datasourceMeta datasource=ctrl.current></dashboard-import-list>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div ng-if=ctrl.testing class=\\\"gf-form-group section\\\">\\r\\n      <h5 ng-show=!ctrl.testing.done>Testing.... <i class=\\\"fa fa-spiner fa-spin\\\"></i></h5>\\r\\n      <div class=\\\"alert-{{ctrl.testing.status}} alert\\\" ng-show=ctrl.testing.done>\\r\\n        <div class=alert-icon>\\r\\n          <i class=\\\"fa fa-exclamation-triangle\\\" ng-show=\\\"ctrl.testing.status === 'error'\\\"></i>\\r\\n          <i class=\\\"fa fa-check\\\" ng-show=\\\"ctrl.testing.status !== 'error'\\\"></i>\\r\\n        </div>\\r\\n        <div class=alert-body>\\r\\n          <div class=alert-title>{{ctrl.testing.message}}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n\\t\\t<div class=\\\"grafana-info-box span8\\\" ng-if=ctrl.current.readOnly>\\r\\n\\t\\t\\tThis datasource was added by config and cannot be modified using the UI. Please contact your server admin to update this datasource.\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-disabled=ctrl.current.readOnly ng-click=ctrl.saveChanges()>Save &amp; Test</button>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-danger\\\" ng-disabled=ctrl.current.readOnly ng-show=!ctrl.isNew ng-click=ctrl.delete()>Delete</button>\\r\\n\\t\\t\\t<a class=\\\"btn btn-inverse\\\" href=datasources>Back</a>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<br/>\\r\\n\\t\\t<br/>\\r\\n\\t\\t<br/>\\r\\n\\r\\n\\t</form>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/plugins/partials/ds_http_settings.html';\nvar html = \"<div class=gf-form-group>\\r\\n\\t<h3 class=page-heading>HTTP</h3>\\r\\n  <div class=gf-form-group>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=\\\"gf-form max-width-30\\\">\\r\\n        <span class=\\\"gf-form-label width-10\\\">URL</span>\\r\\n        <input class=gf-form-input type=text ng-model=current.url placeholder={{suggestUrl}} bs-typeahead=getSuggestUrls min-length=0 ng-pattern=\\\"/^(ftp|http|https):\\\\/\\\\/(\\\\w+:{0,1}\\\\w*@)?(\\\\S+)(:[0-9]+)?(\\\\/|\\\\/([\\\\w#!:.?+=&%@!\\\\-\\\\/]))?$/\\\" required>\\r\\n        <info-popover mode=right-absolute>\\r\\n          <p>Specify a complete HTTP URL (for example http://your_server:8080)</p>\\r\\n          <span ng-show=\\\"current.access === 'direct'\\\">\\r\\n            Your access method is <em>Browser</em>, this means the URL\\r\\n            needs to be accessible from the browser.\\r\\n          </span>\\r\\n          <span ng-show=\\\"current.access === 'proxy'\\\">\\r\\n            Your access method is <em>Server</em>, this means the URL\\r\\n            needs to be accessible from the grafana backend/server.\\r\\n          </span>\\r\\n        </info-popover>\\r\\n      </div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline ng-if=showAccessOption>\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Access</span>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-24\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=current.access ng-options=\\\"f.key as f.value for f in [{key: 'proxy', value: 'Server (Default)'}, { key: 'direct', value: 'Browser'}]\\\"></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label query-keyword pointer\\\" ng-click=toggleAccessHelp()>\\r\\n\\t\\t\\t\\t\\tHelp&nbsp;\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" ng-show=showAccessHelp></i>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-right\\\" ng-hide=showAccessHelp>&nbsp;</i>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"grafana-info-box m-t-2\\\" ng-show=showAccessHelp>\\r\\n\\t\\t\\t<p>\\r\\n\\t\\t\\tAccess mode controls how requests to the data source will be handled.\\r\\n\\t\\t\\t<strong><i>Server</i></strong> should be the preferred way if nothing else stated.\\r\\n\\t\\t\\t</p>\\r\\n\\t\\t\\t<div class=alert-title>Server access mode (Default):</div>\\r\\n\\t\\t\\t<p>\\r\\n\\t\\t\\tAll requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source\\r\\n\\t\\t\\tand by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements.\\r\\n\\t\\t\\tThe URL needs to be accessible from the grafana backend/server if you select this access mode.\\r\\n\\t\\t\\t</p>\\r\\n\\t\\t\\t<div class=alert-title>Browser access mode:</div>\\r\\n\\t\\t\\t<p>\\r\\n\\t\\t\\tAll requests will be made from the browser directly to the data source and may be subject to\\r\\n\\t\\t\\tCross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this\\r\\n\\t\\t\\taccess mode.\\r\\n\\t\\t</p></div>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline ng-if=\\\"current.access=='proxy'\\\">\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Whitelisted Cookies</span>\\r\\n\\t\\t\\t\\t<bootstrap-tagsinput ng-model=current.jsonData.keepCookies width-class=width-20 tagclass=\\\"label label-tag\\\" placeholder=\\\"Add Name\\\">\\r\\n\\t\\t\\t\\t</bootstrap-tagsinput>\\r\\n\\t\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\t\\tGrafana Proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<h3 class=page-heading>Auth</h3>\\r\\n\\t<div class=gf-form-group>\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=\\\"Basic Auth\\\" checked=current.basicAuth label-class=width-10 switch-class=max-width-6></gf-form-switch>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=\\\"With Credentials\\\" tooltip=\\\"Whether credentials such as cookies or auth headers should be sent with cross-site requests.\\\" checked=current.withCredentials label-class=width-11 switch-class=max-width-6></gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form ng-if=\\\"current.access=='proxy'\\\" label=\\\"TLS Client Auth\\\" label-class=width-10 checked=current.jsonData.tlsAuth switch-class=max-width-6></gf-form-switch>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form ng-if=\\\"current.access=='proxy'\\\" label=\\\"With CA Cert\\\" tooltip=\\\"Needed for verifing self-signed TLS Certs\\\" checked=current.jsonData.tlsAuthWithCACert label-class=width-11 switch-class=max-width-6></gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form ng-if=\\\"current.access=='proxy'\\\" label=\\\"Skip TLS Verify\\\" label-class=width-10 checked=current.jsonData.tlsSkipVerify switch-class=max-width-6></gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-group ng-if=current.basicAuth>\\r\\n\\t\\t<h6>Basic Auth Details</h6>\\r\\n\\t\\t<div class=gf-form ng-if=current.basicAuth>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">User</span>\\r\\n\\t\\t\\t<input class=\\\"gf-form-input max-width-21\\\" type=text ng-model=current.basicAuthUser placeholder=user required>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Password</span>\\r\\n\\t\\t\\t<input class=\\\"gf-form-input max-width-21\\\" type=password ng-model=current.basicAuthPassword placeholder=password required>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-group ng-if=\\\"(current.jsonData.tlsAuth || current.jsonData.tlsAuthWithCACert) && current.access=='proxy'\\\">\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<h6>TLS Auth Details</h6>\\r\\n\\t\\t\\t<info-popover mode=header>TLS Certs are encrypted and stored in the Grafana database.</info-popover>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div ng-if=current.jsonData.tlsAuthWithCACert>\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form gf-form--v-stretch\\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\\"gf-form-label width-7\\\">CA Cert</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\" ng-if=!current.secureJsonFields.tlsCACert>\\r\\n\\t\\t\\t\\t\\t<textarea rows=7 class=\\\"gf-form-input gf-form-textarea\\\" ng-model=current.secureJsonData.tlsCACert placeholder=\\\"Begins with -----BEGIN CERTIFICATE-----\\\"></textarea>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=gf-form ng-if=current.secureJsonFields.tlsCACert>\\r\\n\\t\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-12\\\" disabled=disabled value=configured>\\r\\n\\t\\t\\t\\t\\t<a class=\\\"btn btn-secondary gf-form-btn\\\" href=# ng-click=\\\"current.secureJsonFields.tlsCACert = false\\\">reset</a>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=current.jsonData.tlsAuth>\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--v-stretch\\\">\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-7\\\">Client Cert</label>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\" ng-if=!current.secureJsonFields.tlsClientCert>\\r\\n\\t\\t\\t\\t<textarea rows=7 class=\\\"gf-form-input gf-form-textarea\\\" ng-model=current.secureJsonData.tlsClientCert placeholder=\\\"Begins with -----BEGIN CERTIFICATE-----\\\" required></textarea>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form ng-if=current.secureJsonFields.tlsClientCert>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-12\\\" disabled=disabled value=configured>\\r\\n\\t\\t\\t\\t<a class=\\\"btn btn-secondary gf-form-btn\\\" href=# ng-click=\\\"current.secureJsonFields.tlsClientCert = false\\\">reset</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--v-stretch\\\">\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-7\\\">Client Key</label>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\" ng-if=!current.secureJsonFields.tlsClientKey>\\r\\n\\t\\t\\t\\t<textarea rows=7 class=\\\"gf-form-input gf-form-textarea\\\" ng-model=current.secureJsonData.tlsClientKey placeholder=\\\"Begins with -----BEGIN RSA PRIVATE KEY-----\\\" required></textarea>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form ng-if=current.secureJsonFields.tlsClientKey>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-12\\\" disabled=disabled value=configured>\\r\\n\\t\\t\\t\\t<a class=\\\"btn btn-secondary gf-form-btn\\\" href=# ng-click=\\\"current.secureJsonFields.tlsClientKey = false\\\">reset</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n</div>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/plugins/partials/plugin_edit.html';\nvar html = \"<div ng-if=ctrl.navModel>\\r\\n  <page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n  <div class=\\\"page-container page-body\\\">\\r\\n    <div class=sidebar-container>\\r\\n      <div class=\\\"tab-content sidebar-content\\\" ng-if=\\\"ctrl.tab === 'readme'\\\">\\r\\n        <div ng-bind-html=ctrl.readmeHtml class=markdown-html>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"tab-content sidebar-content\\\" ng-if=\\\"ctrl.tab === 'config'\\\">\\r\\n        <div ng-if=ctrl.model.id>\\r\\n          <plugin-component type=app-config-ctrl></plugin-component>\\r\\n\\r\\n          <div class=gf-form-button-row>\\r\\n            <button type=submit class=\\\"btn btn-success\\\" ng-click=ctrl.enable() ng-show=!ctrl.model.enabled>Enable</button>\\r\\n            <button type=submit class=\\\"btn btn-success\\\" ng-click=ctrl.update() ng-show=ctrl.model.enabled>Update</button>\\r\\n            <button type=submit class=\\\"btn btn-danger\\\" ng-click=ctrl.disable() ng-show=ctrl.model.enabled>Disable</button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"tab-content sidebar-content\\\" ng-if=\\\"ctrl.tab === 'dashboards'\\\">\\r\\n        <dashboard-import-list plugin=ctrl.model></dashboard-import-list>\\r\\n      </div>\\r\\n\\r\\n      <aside class=page-sidebar>\\r\\n        <section class=page-sidebar-section>\\r\\n          <h4>Version</h4>\\r\\n          <span>{{ctrl.model.info.version}}</span>\\r\\n          <div ng-show=ctrl.model.hasUpdate>\\r\\n            <a ng-click=ctrl.updateAvailable() bs-tooltip=ctrl.model.latestVersion>Update Available!</a>\\r\\n          </div>\\r\\n        </section>\\r\\n        <section class=page-sidebar-section ng-show=\\\"ctrl.model.type === 'app'\\\">\\r\\n          <h5>Includes\\r\\n          <ul class=\\\"ui-list plugin-info-list\\\">\\r\\n            <li ng-repeat=\\\"plug in ctrl.includes\\\" class=plugin-info-list-item>\\r\\n              <i class={{plug.icon}}></i>\\r\\n              {{plug.name}}\\r\\n            </li>\\r\\n          </ul>\\r\\n        </h5></section>\\r\\n        <section class=page-sidebar-section>\\r\\n          <h5>Dependencies\\r\\n          <ul class=\\\"ui-list plugin-info-list\\\">\\r\\n            <li class=plugin-info-list-item>\\r\\n              <img src=public/img/grafana_icon.svg>\\r\\n              Grafana {{ctrl.model.dependencies.grafanaVersion}}\\r\\n            </li>\\r\\n            <li ng-repeat=\\\"plugDep in ctrl.model.dependencies.plugins\\\" class=plugin-info-list-item>\\r\\n              <i class={{plugDep.icon}}></i>\\r\\n              {{plugDep.name}} {{plugDep.version}}\\r\\n            </li>\\r\\n          </ul>\\r\\n        </h5></section>\\r\\n        <section class=page-sidebar-section>\\r\\n          <h5>Links\\r\\n          <ul class=ui-list>\\r\\n            <li ng-repeat=\\\"link in ctrl.model.info.links\\\">\\r\\n              <a href={{link.url}} class=external-link target=_blank>{{link.name}}</a>\\r\\n            </li>\\r\\n          </ul>\\r\\n        </h5></section>\\r\\n      </aside>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/plugins/partials/plugin_page.html';\nvar html = \"<div ng-if=ctrl.navModel>\\r\\n  <page-header model=ctrl.navModel></page-header>\\r\\n\\r\\n  <div class=page-container>\\r\\n    <div ng-if=ctrl.page>\\r\\n      <plugin-component type=app-page>\\r\\n      </plugin-component>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/plugins/partials/update_instructions.html';\nvar html = \"<div class=modal-body>\\r\\n\\t<div class=modal-header>\\r\\n\\t\\t<h2 class=modal-header-title>\\r\\n\\t\\t\\t<i class=\\\"fa fa-cloud-download\\\"></i>\\r\\n\\t\\t\\t<span class=p-l-1>Update Plugin</span>\\r\\n\\t\\t</h2>\\r\\n\\r\\n\\t\\t<a class=modal-header-close ng-click=dismiss();>\\r\\n\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t</a>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=modal-content>\\r\\n\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t<p>Type the following on the command line to update {{plugin.name}}.</p>\\r\\n\\t\\t\\t<pre><code>grafana-cli plugins update {{plugin.id}}</code></pre>\\r\\n\\t\\t\\t<span class=small>Check out {{plugin.name}} on <a href=https://grafana.com/plugins/{{plugin.id}}>Grafana.com</a> for README and changelog. If you do not have access to the command line, ask your Grafana administator.</span>\\r\\n\\t\\t</div>\\r\\n\\t\\t<p class=pluginlist-none-installed><img class=pluginlist-inline-logo src=public/img/grafana_icon.svg><strong>Pro tip</strong>: To update all plugins at once, type <code class=code--small>grafana-cli plugins update-all</code> on the command line.</p></div>\\r\\n\\t</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/features/templating/partials/editor.html';\nvar html = \"<div ng-controller=VariableEditorCtrl ng-init=init()>\\r\\n\\r\\n\\t<h3 class=dashboard-settings__header>\\r\\n\\t\\t<a ng-click=\\\"setMode('list')\\\">Variables</a>\\r\\n\\t\\t<span ng-show=\\\"mode === 'new'\\\">&gt; New</span>\\r\\n\\t\\t<span ng-show=\\\"mode === 'edit'\\\">&gt; Edit</span>\\r\\n\\t</h3>\\r\\n\\r\\n\\t<div ng-if=\\\"mode === 'list'\\\">\\r\\n\\r\\n\\t\\t<div ng-if=\\\"variables.length === 0\\\">\\r\\n\\t\\t\\t<div class=empty-list-cta>\\r\\n\\t\\t\\t\\t<div class=empty-list-cta__title>There are no variables added yet</div>\\r\\n\\t\\t\\t\\t<a ng-click=\\\"setMode('new')\\\" class=\\\"empty-list-cta__button btn btn-xlarge btn-success\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"gicon gicon-add-variable\\\"></i>\\r\\n\\t\\t\\t\\t\\tAdd variable\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t<div class=grafana-info-box>\\r\\n\\t\\t\\t\\t\\t<h5>What do variables do?</h5>\\r\\n\\t\\t\\t\\t\\t<p>Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server or sensor names\\r\\n\\t\\t\\t\\t\\tin your metric queries you can use variables in their place. Variables are shown as dropdown select boxes at the top of\\r\\n\\t\\t\\t\\t\\tthe dashboard. These dropdowns make it easy to change the data being displayed in your dashboard.\\r\\n\\r\\n\\t\\t\\t\\t\\tCheck out the\\r\\n\\t\\t\\t\\t\\t<a class=external-link href=http://docs.grafana.org/reference/templating/ target=_blank>\\r\\n\\t\\t\\t\\t\\t\\tTemplating documentation\\r\\n\\t\\t\\t\\t\\t</a> for more information.\\r\\n\\t\\t\\t\\t</p></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=variables.length>\\r\\n\\t\\t\\t<div class=page-action-bar>\\r\\n\\t\\t\\t\\t<div class=page-action-bar__spacer></div>\\r\\n\\t\\t\\t\\t<a type=button class=\\\"btn btn-success\\\" ng-click=\\\"setMode('new');\\\"><i class=\\\"fa fa-plus\\\"></i> New</a>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<table class=\\\"filter-table filter-table--hover\\\">\\r\\n\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t<th>Variable</th>\\r\\n\\t\\t\\t\\t\\t\\t<th>Definition</th>\\r\\n\\t\\t\\t\\t\\t\\t<th colspan=5></th>\\r\\n\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t<tr ng-repeat=\\\"variable in variables\\\">\\r\\n\\t\\t\\t\\t\\t\\t<td style=width:1%>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-click=edit(variable) class=\\\"pointer template-variable\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t${{variable.name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t<td style=max-width:200px ng-click=edit(variable) class=\\\"pointer max-width\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t{{variable.query}}\\r\\n\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t<td style=width:1%><i ng-click=_.move(variables,$index,$index-1) ng-hide=$first class=\\\"pointer fa fa-arrow-up\\\"></i></td>\\r\\n\\t\\t\\t\\t\\t\\t<td style=width:1%><i ng-click=_.move(variables,$index,$index+1) ng-hide=$last class=\\\"pointer fa fa-arrow-down\\\"></i></td>\\r\\n\\t\\t\\t\\t\\t\\t<td style=width:1%>\\r\\n\\t\\t\\t\\t\\t\\t\\t<a ng-click=duplicate(variable) class=\\\"btn btn-inverse btn-mini\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tDuplicate\\r\\n\\t\\t\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t<td style=width:1%>\\r\\n\\t\\t\\t\\t\\t\\t\\t<a ng-click=removeVariable(variable) class=\\\"btn btn-danger btn-mini\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t</table>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<form ng-if=\\\"mode === 'edit' || mode === 'new'\\\" name=ctrl.form>\\r\\n\\t\\t<h5 class=section-heading>General</h5>\\r\\n\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form max-width-19\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-6\\\">Name</span>\\r\\n\\t\\t\\t\\t\\t<input type=text class=gf-form-input name=name placeholder=name ng-model=current.name required ng-pattern=namePattern>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form max-width-19\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-6\\\">\\r\\n\\t\\t\\t\\t\\t\\tType\\r\\n\\t\\t\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\t\\t\\t{{variableTypes[current.type].description}}\\r\\n\\t\\t\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-17\\\">\\r\\n\\t\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=current.type ng-options=\\\"k as v.name for (k, v) in variableTypes\\\" ng-change=typeChanged()></select>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form ng-show=ctrl.form.name.$error.pattern>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label gf-form-label--error\\\">Template names cannot begin with '__', that's reserved for Grafana's global variables</span>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form max-width-19\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-6\\\">Label</span>\\r\\n\\t\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=current.label placeholder=\\\"optional display name\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form max-width-19\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-6\\\">Hide</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-15\\\">\\r\\n\\t\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=current.hide ng-options=\\\"f.value as f.text for f in hideOptions\\\"></select>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"current.type === 'interval'\\\" class=gf-form-group>\\r\\n\\t\\t\\t<h5 class=section-heading>Interval Options</h5>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">Values</span>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input placeholder=name ng-model=current.query placeholder=1m,10m,1h,6h,1d,7d ng-model-onblur ng-change=runQuery() required>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<gf-form-switch class=gf-form label=\\\"Auto Option\\\" label-class=width-9 checked=current.auto on-change=runQuery()>\\r\\n\\t\\t\\t\\t</gf-form-switch>\\r\\n\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-9\\\" ng-show=current.auto>\\r\\n\\t\\t\\t\\t\\t\\tStep count <tip>How many times should the current time range be divided to calculate the value</tip>\\r\\n\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-10\\\" ng-show=current.auto>\\r\\n\\t\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=current.auto_count ng-options=\\\"f for f in [1,2,3,4,5,10,20,30,40,50,100,200,300,400,500]\\\" ng-change=runQuery()></select>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<span class=gf-form-label ng-show=current.auto>\\r\\n\\t\\t\\t\\t\\t\\tMin interval <tip>The calculated value will not go below this threshold</tip>\\r\\n\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-10\\\" ng-show=current.auto ng-model=current.auto_min ng-change=runQuery() placeholder=10s>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"current.type === 'custom'\\\" class=gf-form-group>\\r\\n\\t\\t\\t<h5 class=section-heading>Custom Options</h5>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-14\\\">Values separated by comma</span>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=current.query ng-blur=runQuery() placeholder=\\\"1, 10, 20, myvalue\\\" required>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"current.type === 'constant'\\\" class=gf-form-group>\\r\\n\\t\\t\\t<h5 class=section-heading>Constant options</h5>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=gf-form-label>Value</span>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=current.query ng-blur=runQuery() placeholder=\\\"your metric prefix\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"current.type === 'textbox'\\\" class=gf-form-group>\\r\\n\\t\\t\\t<h5 class=section-heading>Text options</h5>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=gf-form-label>Default value</span>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=current.query ng-blur=runQuery() placeholder=\\\"default value, if any\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"current.type === 'query'\\\" class=gf-form-group>\\r\\n\\t\\t\\t<h5 class=section-heading>Query Options</h5>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form max-width-21\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Data source</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-14\\\">\\r\\n\\t\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=current.datasource ng-options=\\\"f.value as f.name for f in datasources\\\" required>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\\\" ng-if=false></option>\\r\\n\\t\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form max-width-22\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">\\r\\n\\t\\t\\t\\t\\t\\tRefresh\\r\\n\\t\\t\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\t\\t\\tWhen to update the values of this variable.\\r\\n\\t\\t\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper width-15\\\">\\r\\n\\t\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=current.refresh ng-options=\\\"f.value as f.text for f in refreshOptions\\\"></select>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Query</span>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=current.query placeholder=\\\"metric name or tags query\\\" ng-model-onblur ng-change=runQuery() required>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">\\r\\n\\t\\t\\t\\t\\tRegex\\r\\n\\t\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\t\\tOptional, if you want to extract part of a series name or metric node segment.\\r\\n\\t\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=current.regex placeholder=/.*-(.*)-.*/ ng-model-onblur ng-change=runQuery()>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-21\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">\\r\\n\\t\\t\\t\\t\\tSort\\r\\n\\t\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\t\\tHow to sort the values of this variable.\\r\\n\\t\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-14\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=current.sort ng-options=\\\"f.value as f.text for f in sortOptions\\\" ng-change=runQuery()></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-show=\\\"current.type === 'datasource'\\\" class=gf-form-group>\\r\\n\\t\\t\\t<h5 class=section-heading>Data source options</h5>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-12\\\">Type</label>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-18\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=current.query ng-options=\\\"f.value as f.text for f in datasourceTypes\\\" ng-change=runQuery()></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-12\\\">\\r\\n\\t\\t\\t\\t\\tInstance name filter\\r\\n\\t\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\t\\tRegex filter for which data source instances to choose from in\\r\\n\\t\\t\\t\\t\\t\\tthe variable value dropdown. Leave empty for all.\\r\\n\\t\\t\\t\\t\\t\\t<br><br>\\r\\n\\t\\t\\t\\t\\t\\tExample: <code>/^prod/</code>\\r\\n\\r\\n\\t\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-18\\\" ng-model=current.regex placeholder=/.*-(.*)-.*/ ng-model-onblur ng-change=runQuery()>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=\\\"current.type === 'adhoc'\\\" class=gf-form-group>\\r\\n\\t\\t\\t<h5 class=section-heading>Options</h5>\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-21\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-8\\\">Data source</span>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-14\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=current.datasource ng-options=\\\"f.value as f.name for f in datasources\\\" required ng-change=validate()>\\r\\n\\t\\t\\t\\t\\t\\t<option value=\\\"\\\" ng-if=false></option>\\r\\n\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"section gf-form-group\\\" ng-show=variableTypes[current.type].supportsMulti>\\r\\n\\t\\t\\t<h5 class=section-heading>Selection Options</h5>\\r\\n\\t\\t\\t<div class=section>\\r\\n\\t\\t\\t\\t<gf-form-switch class=gf-form label=Multi-value label-class=width-10 tooltip=\\\"Enables multiple values to be selected at the same time\\\" checked=current.multi on-change=runQuery()>\\r\\n\\t\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t\\t\\t<gf-form-switch class=gf-form label=\\\"Include All option\\\" label-class=width-10 checked=current.includeAll on-change=runQuery()>\\r\\n\\t\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form ng-if=current.includeAll>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Custom all value</span>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-15\\\" ng-model=current.allValue placeholder=\\\"blank = auto\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-group ng-if=\\\"current.type === 'query'\\\">\\r\\n\\t\\t\\t<h5>Value groups/tags (Experimental feature)</h5>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Enabled label-class=width-10 checked=current.useTags on-change=runQuery()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t\\t<div class=\\\"gf-form last\\\" ng-if=current.useTags>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Tags query</span>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=current.tagsQuery placeholder=\\\"metric name or tags query\\\" ng-model-onblur>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form ng-if=current.useTags>\\r\\n\\t\\t\\t\\t<li class=\\\"gf-form-label width-10\\\">Tag values query</li>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=current.tagValuesQuery placeholder=apps.$tag.* ng-model-onblur>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-group ng-show=current.options.length>\\r\\n\\t\\t\\t<h5>Preview of values</h5>\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<div class=gf-form ng-repeat=\\\"option in current.options | limitTo: optionsLimit\\\">\\r\\n          <span class=gf-form-label>{{option.text}}</span>\\r\\n        </div>\\r\\n        <div class=gf-form ng-if=\\\"current.options.length > optionsLimit\\\">\\r\\n          <a class=\\\"gf-form-label btn-secondary\\\" ng-click=showMoreOptions()>Show more</a>\\r\\n        </div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"alert alert-info gf-form-group\\\" ng-if=infoText>\\r\\n\\t\\t\\t{{infoText}}\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form-button-row p-y-0\\\">\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-show=\\\"mode === 'edit'\\\" ng-click=update();>Update</button>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-show=\\\"mode === 'new'\\\" ng-click=add();>Add</button>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t</form>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","import React, { SFC } from 'react';\r\n\r\ninterface Props {\r\n  pageName: string;\r\n}\r\n\r\nconst PageLoader: SFC<Props> = ({ pageName }) => {\r\n  const loadingText = `Loading ${pageName}...`;\r\n  return (\r\n    <div className=\"page-loader-wrapper\">\r\n      <i className=\"page-loader-wrapper__spinner fa fa-spinner fa-spin\" />\r\n      <div className=\"page-loader-wrapper__text\">{loadingText}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageLoader;\r\n","var path = 'public/app/partials/confirm_modal.html';\nvar html = \"<div class=modal-body ng-cloak>\\r\\n\\t<div class=modal-header>\\r\\n\\t\\t<h2 class=modal-header-title>\\r\\n\\t\\t\\t<i class=\\\"fa {{icon}}\\\"></i>\\r\\n\\t\\t\\t<span class=p-l-1>\\r\\n\\t\\t\\t\\t{{title}}\\r\\n\\t\\t\\t</span>\\r\\n\\t\\t</h2>\\r\\n\\r\\n\\t\\t<a class=modal-header-close ng-click=dismiss();>\\r\\n\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t</a>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"modal-content text-center\\\">\\r\\n\\r\\n\\t\\t<div class=confirm-modal-text>\\r\\n\\t\\t\\t{{text}}\\r\\n\\t\\t\\t<div class=confirm-modal-text2 ng-show=text2>\\r\\n\\t\\t\\t\\t{{text2}}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=modal-content-confirm-text ng-if=confirmText>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input width-16\\\" style=display:inline-block placeholder=\\\"Type {{confirmText}} to confirm\\\" ng-model=confirmInput ng-change=updateConfirmText(confirmInput)>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=confirm-modal-buttons>\\r\\n\\t\\t\\t<button ng-show=onAltAction type=button class=\\\"btn btn-success\\\" ng-click=dismiss();onAltAction();>{{altActionText}}</button>\\r\\n\\t\\t\\t<button type=button class=\\\"btn btn-danger\\\" ng-click=onConfirm();dismiss(); ng-disabled=!confirmTextValid give-focus=true>{{yesText}}</button>\\r\\n\\t\\t\\t<button type=button class=\\\"btn btn-inverse\\\" ng-click=dismiss()>{{noText}}</button>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/dashboard.html';\nvar html = \"<div dash-class ng-if=ctrl.dashboard>\\r\\n\\t<dashnav dashboard=ctrl.dashboard></dashnav>\\r\\n\\r\\n\\t<div class=\\\"scroll-canvas scroll-canvas--dashboard\\\" page-scrollbar>\\r\\n    <dashboard-settings dashboard=ctrl.dashboard ng-if=ctrl.dashboardViewState.state.editview class=dashboard-settings>\\r\\n    </dashboard-settings>\\r\\n\\r\\n\\t\\t<div class=dashboard-container ng-class=\\\"{'dashboard-container--has-submenu': ctrl.dashboard.meta.submenuEnabled}\\\">\\r\\n      <dashboard-submenu ng-if=ctrl.dashboard.meta.submenuEnabled dashboard=ctrl.dashboard>\\r\\n      </dashboard-submenu>\\r\\n\\r\\n      <dashboard-grid dashboard=ctrl.dashboard></dashboard-grid>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/edit_json.html';\nvar html = \"<div ng-controller=JsonEditorCtrl>\\r\\n\\t<div class=tabbed-view-header>\\r\\n\\t\\t<h2 class=tabbed-view-title>\\r\\n\\t\\t\\tJSON\\r\\n\\t\\t</h2>\\r\\n\\r\\n\\t\\t<button class=tabbed-view-close-btn ng-click=dismiss()>\\r\\n\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=tabbed-view-body>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<code-editor content=json data-mode=json data-max-lines=20></code-editor>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=button class=\\\"btn btn-success\\\" ng-show=canUpdate ng-click=\\\"update(); dismiss();\\\">Update</button>\\r\\n\\t\\t\\t<button class=\\\"btn btn-secondary\\\" ng-if=canCopy clipboard-button=getContentForClipboard()>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-clipboard\\\"></i>&nbsp;Copy to Clipboard\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/error.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n  <div class=\\\"panel-container error-container\\\">\\r\\n    <div class=\\\"error-column graph-box\\\">\\r\\n      <div class=error-row>\\r\\n        <div class=\\\"error-column error-space-between graph-percentage\\\">\\r\\n          <p>100%</p>\\r\\n          <p>80%</p>\\r\\n          <p>60%</p>\\r\\n          <p>40%</p>\\r\\n          <p>20%</p>\\r\\n          <p>0%</p>\\r\\n        </div>\\r\\n        <div class=\\\"error-column image-box\\\">\\r\\n          <img src=public/img/graph404.svg width=100%>\\r\\n          <div class=\\\"error-row error-space-between\\\">\\r\\n            <p class=graph-text>Then</p>\\r\\n            <p class=graph-text>Now</p>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"error-column info-box\\\">\\r\\n      <div class=\\\"error-row current-box\\\">\\r\\n        <p class=current-text>current</p>\\r\\n      </div>\\r\\n      <div class=error-row style=flex:1>\\r\\n        <i class=\\\"fa fa-minus error-minus\\\"></i>\\r\\n        <div class=\\\"error-column error-space-between error-full-width\\\">\\r\\n          <div class=\\\"error-row error-space-between\\\">\\r\\n            <p>Chances you are on the page you are looking for.</p>\\r\\n            <p class=left-margin>0%</p>\\r\\n          </div>\\r\\n          <div>\\r\\n            <h3>Sorry for the inconvenience</h3>\\r\\n            <p>Please go back to your\\r\\n            <a href={{appSubUrl}}/ class=error-link>home dashboard</a> and try again.</p>\\r\\n            <p>If the error persists, seek help on the\\r\\n            <a href=https://community.grafana.com target=_blank class=error-link>community site</a>.</p>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <span class=react-resizable-handle style=cursor:default></span>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/login.html';\nvar html = \"<div class=\\\"login container\\\">\\r\\n  <div class=login-content>\\r\\n    <div class=login-branding>\\r\\n      <img class=logo-icon src=public/img/grafana_icon.svg alt=Grafana />\\r\\n      <i class=\\\"icon-gf icon-gf-grafana_wordmark\\\"></i>\\r\\n    </div>\\r\\n    <div class=login-outer-box>\\r\\n      <div class=login-inner-box id=login-view>\\r\\n        <form name=loginForm class=\\\"login-form-group gf-form-group\\\" ng-hide=disableLoginForm>\\r\\n          <div class=login-form>\\r\\n            <input type=text name=username class=\\\"gf-form-input login-form-input\\\" required ng-model=formModel.user placeholder={{loginHint}} autofocus>\\r\\n          </div>\\r\\n          <div class=login-form>\\r\\n            <input type=password name=password class=\\\"gf-form-input login-form-input\\\" required ng-model=formModel.password id=inputPassword placeholder=password>\\r\\n          </div>\\r\\n          <div class=login-button-group>\\r\\n            <button type=submit class=\\\"btn btn-large p-x-2\\\" ng-if=!loggingIn ng-click=submit(); ng-class=\\\"{'btn-inverse': !loginForm.$valid, 'btn-primary': loginForm.$valid}\\\">\\r\\n              Log In\\r\\n            </button>\\r\\n            <button type=submit class=\\\"btn btn-large p-x-2 btn-inverse btn-loading\\\" ng-if=loggingIn>\\r\\n              Logging In<span>.</span><span>.</span><span>.</span>\\r\\n            </button>\\r\\n            <div class=\\\"small login-button-forgot-password\\\">\\r\\n              <a href=user/password/send-reset-email>\\r\\n                Forgot your password?\\r\\n              </a>\\r\\n            </div>\\r\\n          </div>\\r\\n        </form>\\r\\n        <div class=\\\"text-center login-divider\\\" ng-show=oauthEnabled>\\r\\n          <div>\\r\\n            <div class=login-divider-line>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <span class=login-divider-text>\\r\\n              <span ng-hide=disableLoginForm>or</span>\\r\\n            </span>\\r\\n          </div>\\r\\n          <div>\\r\\n            <div class=login-divider-line>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=clearfix></div>\\r\\n        <div class=\\\"login-oauth text-center\\\" ng-show=oauthEnabled>\\r\\n          <a class=\\\"btn btn-medium btn-service btn-service--google login-btn\\\" href=login/google target=_self ng-if=oauth.google>\\r\\n            <i class=\\\"btn-service-icon fa fa-google\\\"></i>\\r\\n            Sign in with Google\\r\\n          </a>\\r\\n          <a class=\\\"btn btn-medium btn-service btn-service--github login-btn\\\" href=login/github target=_self ng-if=oauth.github>\\r\\n            <i class=\\\"btn-service-icon fa fa-github\\\"></i>\\r\\n            Sign in with GitHub\\r\\n          </a>\\r\\n          <a class=\\\"btn btn-medium btn-service btn-service--gitlab login-btn\\\" href=login/gitlab target=_self ng-if=oauth.gitlab>\\r\\n            <i class=\\\"btn-service-icon fa fa-gitlab\\\"></i>\\r\\n            Sign in with GitLab\\r\\n          </a>\\r\\n          <a class=\\\"btn btn-medium btn-service btn-service--grafanacom login-btn\\\" href=login/grafana_com target=_self ng-if=oauth.grafana_com>\\r\\n            <i class=btn-service-icon></i>\\r\\n            Sign in with Grafana.com\\r\\n          </a>\\r\\n          <a class=\\\"btn btn-medium btn-service btn-service--oauth login-btn\\\" href=login/generic_oauth target=_self ng-if=oauth.generic_oauth>\\r\\n            <i class=\\\"btn-service-icon fa fa-sign-in\\\"></i>\\r\\n            Sign in with {{oauth.generic_oauth.name}}\\r\\n          </a>\\r\\n        </div>\\r\\n        <div class=login-signup-box ng-show=!disableUserSignUp>\\r\\n          <div class=\\\"login-signup-title p-r-1\\\">\\r\\n            New to Grafana?\\r\\n          </div>\\r\\n          <a href=signup class=\\\"btn btn-medium btn-signup btn-p-x-2\\\">\\r\\n            Sign Up\\r\\n          </a>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"login-inner-box remove hidden\\\" id=change-password-view>\\r\\n        <div class=\\\"text-left login-change-password-info\\\">\\r\\n          <h5>Change Password</h5>\\r\\n          Before you can get started with awesome dashboards we need you to make your account more secure by changing your password.\\r\\n          <br/>You can change your password again later.\\r\\n        </div>\\r\\n        <form class=\\\"login-form-group gf-form-group\\\">\\r\\n          <div class=login-form>\\r\\n            <input type=password id=newPassword name=newPassword class=\\\"gf-form-input login-form-input\\\" required ng-model=command.newPassword placeholder=\\\"New password\\\">\\r\\n          </div>\\r\\n          <div class=login-form>\\r\\n            <input type=password name=confirmNew class=\\\"gf-form-input login-form-input\\\" required ng-model=command.confirmNew placeholder=\\\"Confirm new password\\\">\\r\\n          </div>\\r\\n          <div class=\\\"login-button-group login-button-group--right text-right\\\">\\r\\n            <a class=\\\"btn btn-link\\\" ng-click=skip();>\\r\\n              Skip\\r\\n              <info-popover mode=no-padding>\\r\\n                If you skip you will be prompted to change password next time you login.\\r\\n              </info-popover>\\r\\n            </a>\\r\\n            <button type=submit class=\\\"btn btn-large p-x-2\\\" ng-click=changePassword(); ng-class=\\\"{'btn-inverse': !loginForm.$valid, 'btn-success': loginForm.$valid}\\\">\\r\\n              Save\\r\\n            </button>\\r\\n          </div>\\r\\n        </form>\\r\\n      </div>\\r\\n      <div class=clearfix></div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/modal.html';\nvar html = \"<div class=modal-header>\\r\\n  <button type=button class=close data-dismiss=modal aria-hidden=true>×</button>\\r\\n  <h3>{{modal.title}}</h3>\\r\\n</div>\\r\\n<div class=modal-body>\\r\\n\\r\\n  <div ng-bind-html=modal.body></div>\\r\\n\\r\\n</div>\\r\\n<div class=modal-footer>\\r\\n  <button type=button class=\\\"btn btn-danger\\\" ng-click=dismiss()>Close</button>\\r\\n</div>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/panelgeneral.html';\nvar html = \"<div class=editor-row>\\r\\n\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t<h5 class=section-heading>Info</h5>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Title</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input width-25\\\" ng-model=ctrl.panel.title>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--v-stretch\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Description</span>\\r\\n\\t\\t\\t<textarea class=\\\"gf-form-input width-25\\\" rows=3 ng-model=ctrl.panel.description placeholder=\\\"Panel description, supports markdown & links\\\"></textarea>\\r\\n\\t\\t</div>\\r\\n    <gf-form-switch class=gf-form label-class=width-7 switch-class=max-width-6 label=Transparent checked=ctrl.panel.transparent on-change=ctrl.render()></gf-form-switch>\\r\\n\\t</div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Repeat</h5>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">For each value of</span>\\r\\n\\t\\t\\t<dash-repeat-option panel=ctrl.panel></dash-repeat-option>\\r\\n\\t\\t</div>\\r\\n    <div class=gf-form ng-show=ctrl.panel.repeat>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">Direction</span>\\r\\n\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.repeatDirection ng-options=\\\"f.value as f.text for f in [{value: 'v', text: 'Vertical'}, {value: 'h', text: 'Horizontal'}]\\\">\\r\\n\\t\\t\\t\\t<option value=\\\"\\\"></option>\\r\\n\\t\\t\\t</select>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-show=\\\"ctrl.panel.repeat && ctrl.panel.repeatDirection == 'h'\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">Min width</span>\\r\\n\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.minSpan ng-options=\\\"f for f in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]\\\">\\r\\n\\t\\t\\t\\t<option value=\\\"\\\"></option>\\r\\n\\t\\t\\t</select>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<panel-links-editor panel=ctrl.panel></panel-links-editor>\\r\\n\\r\\n\\r\\n</div>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/reset_password.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\t<div class=signup>\\r\\n\\t\\t<h3 class=p-b-1>Reset password</h3>\\r\\n\\t\\t<form name=sendResetForm class=\\\"login-form gf-form-group\\\" ng-show=\\\"mode === 'send'\\\">\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">User</span>\\r\\n\\t\\t\\t\\t\\t<input type=text name=username class=\\\"gf-form-input max-width-14\\\" required ng-model=formModel.userOrEmail placeholder=\\\"email or username\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=sendResetEmail(); ng-disabled=!sendResetForm.$valid>\\r\\n\\t\\t\\t\\t\\tReset Password\\r\\n\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t<a href=login class=\\\"btn btn-inverse\\\">\\r\\n\\t\\t\\t\\t\\tBack\\r\\n\\t\\t\\t\\t</a>\\r\\n\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</form>\\r\\n\\t\\t<div ng-show=\\\"mode === 'email-sent'\\\">\\r\\n\\t\\t\\tAn email with a reset link as been sent to the email address. <br>\\r\\n\\t\\t\\tYou should receive it shortly.\\r\\n\\t\\t\\t<div class=p-t-1>\\r\\n\\t\\t\\t\\t<a href=login class=\\\"btn btn-success p-t-1\\\">\\r\\n\\t\\t\\t\\t\\tLogin\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<form name=resetForm class=\\\"login-form gf-form-group\\\" ng-show=\\\"mode === 'reset'\\\">\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">New Password</span>\\r\\n\\t\\t\\t\\t<input type=password name=NewPassword class=\\\"gf-form-input max-width-14\\\" required ng-minlength=4 ng-model=formModel.newPassword placeholder=password watch-change=\\\"formModel.newPassword = inputValue;\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">Confirm Password</span>\\r\\n\\t\\t\\t\\t<input type=password name=ConfirmPassword class=\\\"gf-form-input max-width-14\\\" required ng-minlength=4 ng-model=formModel.confirmPassword placeholder=\\\"confirm password\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=signup__password-strength>\\r\\n\\t\\t\\t\\t<password-strength password=formModel.newPassword></password-strength>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=submitReset(); ng-disabled=!resetForm.$valid>\\r\\n\\t\\t\\t\\t\\tReset Password\\r\\n\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</form>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/signup_invited.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n\\t<h3 class=page-sub-heading>Hello {{greeting}}.</h3>\\r\\n\\r\\n\\t<div class=\\\"modal-tagline p-b-2\\\">\\r\\n\\t\\t<em>{{invitedBy}}</em> has invited you to join Grafana and the organization <span class=highlight-word>{{contextSrv.user.orgName}}</span><br>Please complete the following to accept your invitation and continue:\\r\\n\\t</div>\\r\\n\\r\\n\\t<form name=inviteForm class=\\\"login-form gf-form-group\\\">\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Email</span>\\r\\n\\t\\t\\t<input type=email name=email class=\\\"gf-form-input max-width-21\\\" required ng-model=formModel.email placeholder=Email>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Name</span>\\r\\n\\t\\t\\t<input type=text name=name class=\\\"gf-form-input max-width-21\\\" ng-model=formModel.name placeholder=\\\"Name (optional)\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Username</span>\\r\\n\\t\\t\\t<input type=text name=username class=\\\"gf-form-input max-width-21\\\" required ng-model=formModel.username placeholder=Username>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Password</span>\\r\\n\\t\\t\\t<input type=password name=password class=\\\"gf-form-input max-width-21\\\" required ng-model=formModel.password id=inputPassword placeholder=password>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div style=margin-left:7.5rem;width:254px>\\r\\n\\t\\t\\t<password-strength password=formModel.password></password-strength>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-button-row>\\r\\n\\t\\t\\t<button type=submit class=\\\"btn btn-success\\\" ng-click=submit(); ng-disable=!inviteForm.$valid>\\r\\n\\t\\t\\t\\tSign Up\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n</div>\\r\\n\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/signup_step2.html';\nvar html = \"<page-header model=navModel></page-header>\\r\\n\\r\\n<div class=\\\"page-container page-body\\\">\\r\\n  <div class=signup>\\r\\n    <h3 class=p-b-1>You're almost there.</h3>\\r\\n    <div class=p-b-1>\\r\\n      We just need a couple of more bits of<br> information to finish creating your account.\\r\\n    </div>\\r\\n    <form name=signUpForm class=\\\"login-form gf-form-group\\\">\\r\\n      <div class=gf-form ng-if=verifyEmailEnabled>\\r\\n        <span class=\\\"gf-form-label width-9\\\">\\r\\n          Email code<tip>Email verification code (sent to your email)</tip>\\r\\n        </span>\\r\\n        <input type=text class=\\\"gf-form-input max-width-14\\\" ng-model=formModel.code required>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form ng-if=!autoAssignOrg>\\r\\n        <span class=\\\"gf-form-label width-9\\\">Org. name</span>\\r\\n        <input type=text name=orgName class=\\\"gf-form-input max-width-14\\\" ng-model=formModel.orgName placeholder=\\\"Name your organization\\\">\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form>\\r\\n        <span class=\\\"gf-form-label width-9\\\">Your name</span>\\r\\n        <input type=text name=name class=\\\"gf-form-input max-width-14\\\" ng-model=formModel.name placeholder=(optional)>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <span class=\\\"gf-form-label width-9\\\">Email</span>\\r\\n        <input type=text class=\\\"gf-form-input max-width-14\\\" required ng-model=formModel.username placeholder=Email autocomplete=off>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <span class=\\\"gf-form-label width-9\\\">Password</span>\\r\\n        <input type=password class=\\\"gf-form-input max-width-14\\\" required ng-model=formModel.password id=inputPassword placeholder=password autocomplete=off>\\r\\n      </div>\\r\\n\\r\\n      <div class=signup__password-strength>\\r\\n        <password-strength password=formModel.password></password-strength>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"gf-form-button-row p-t-3\\\">\\r\\n        <button type=submit class=\\\"btn btn-success\\\" ng-click=ctrl.submit(); ng-disabled=!signUpForm.$valid>\\r\\n          Sign Up\\r\\n        </button>\\r\\n        <a href=login class=\\\"btn btn-inverse\\\">\\r\\n            Back\\r\\n        </a>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/partials/valueSelectDropdown.html';\nvar html = \"<div class=variable-link-wrapper>\\r\\n\\t<a ng-click=vm.show() class=variable-value-link>\\r\\n\\t\\t{{vm.linkText}}\\r\\n\\t\\t<span ng-repeat=\\\"tag in vm.selectedTags\\\" bs-tooltip=tag.valuesText data-placement=bottom>\\r\\n\\t\\t\\t<span class=label-tag tag-color-from-name=tag.text>\\r\\n\\t\\t\\t\\t&nbsp;&nbsp;<i class=\\\"fa fa-tag\\\"></i>&nbsp;\\r\\n\\t\\t\\t\\t{{tag.text}}\\r\\n\\t\\t\\t</span>\\r\\n\\t\\t</span>\\r\\n\\t\\t<i class=\\\"fa fa-caret-down\\\" style=font-size:12px></i>\\r\\n\\t</a>\\r\\n\\r\\n\\t<input type=text class=gf-form-input style=display:none ng-keydown=vm.keyDown($event) ng-model=vm.search.query ng-change=vm.queryChanged()>\\r\\n\\r\\n\\t<div class=variable-value-dropdown ng-if=vm.dropdownVisible ng-class=\\\"{'multi': vm.variable.multi, 'single': !vm.variable.multi}\\\">\\r\\n\\t\\t<div class=variable-options-wrapper>\\r\\n\\t\\t\\t<div class=variable-options-column>\\r\\n\\t\\t\\t\\t<a class=variable-options-column-header ng-if=vm.variable.multi ng-class=\\\"{'many-selected': vm.selectedValues.length > 1}\\\" bs-tooltip=\\\"'Clear selections'\\\" data-placement=top ng-click=vm.clearSelections()>\\r\\n\\t\\t\\t\\t\\t<span class=variable-option-icon></span>\\r\\n\\t\\t\\t\\t\\tSelected ({{vm.selectedValues.length}})\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t<a class=\\\"variable-option pointer\\\" ng-repeat=\\\"option in vm.search.options\\\" ng-class=\\\"{'selected': option.selected, 'highlighted': $index === vm.highlightIndex}\\\" ng-click=\\\"vm.selectValue(option, $event)\\\">\\r\\n\\t\\t\\t\\t\\t<span class=variable-option-icon></span>\\r\\n\\t\\t\\t\\t\\t<span>{{option.text}}</span>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=variable-options-column ng-if=vm.tags.length>\\r\\n\\t\\t\\t\\t<div class=\\\"variable-options-column-header text-center\\\">\\r\\n\\t\\t\\t\\t\\tTags\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<a class=\\\"variable-option-tag pointer\\\" ng-repeat=\\\"tag in vm.tags\\\" ng-click=\\\"vm.selectTag(tag, $event)\\\" ng-class=\\\"{'selected': tag.selected}\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"fa fa-fw variable-option-icon\\\"></span>\\r\\n\\t\\t\\t\\t\\t<span class=label-tag tag-color-from-name=tag.text>{{tag.text}}&nbsp;&nbsp;<i class=\\\"fa fa-tag\\\"></i>&nbsp;</span>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/cloudwatch/partials/annotations.editor.html';\nvar html = \"<cloudwatch-query-parameter target=ctrl.annotation datasource=ctrl.datasource></cloudwatch-query-parameter>\\r\\n\\r\\n<div class=editor-row style=\\\"padding:2rem 0\\\">\\r\\n\\t<div class=section>\\r\\n\\t\\t<h5>Prefix matching</h5>\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Enable checked=ctrl.annotation.prefixMatching switch-class=max-width-6></gf-form-switch>\\r\\n\\t\\t\\t<div class=gf-form ng-if=ctrl.annotation.prefixMatching>\\r\\n\\t\\t\\t\\t<span class=gf-form-label>Action</span>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.annotation.actionPrefix>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form ng-if=ctrl.annotation.prefixMatching>\\r\\n\\t\\t\\t\\t<span class=gf-form-label>Alarm Name</span>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.annotation.alarmNamePrefix>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/cloudwatch/partials/config.html';\nvar html = \"<h3 class=page-heading>CloudWatch details</h3>\\r\\n\\r\\n<div class=\\\"gf-form-group max-width-30\\\">\\r\\n  <div class=\\\"gf-form gf-form-select-wrapper\\\">\\r\\n    <label class=\\\"gf-form-label width-13\\\">Auth Provider</label>\\r\\n    <select class=\\\"gf-form-input gf-max-width-13\\\" ng-model=ctrl.current.jsonData.authType ng-options=\\\"f.value as f.name for f in ctrl.authTypes\\\"></select>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show='ctrl.current.jsonData.authType == \\\"credentials\\\"'>\\r\\n    <label class=\\\"gf-form-label width-13\\\">Credentials profile name</label>\\r\\n    <input type=text class=\\\"gf-form-input max-width-18\\\" ng-model=ctrl.current.database placeholder=default>\\r\\n    <info-popover mode=right-absolute>\\r\\n      Credentials profile name, as specified in ~/.aws/credentials, leave blank for default\\r\\n    </info-popover>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show='ctrl.current.jsonData.authType == \\\"keys\\\"'>\\r\\n    <label class=\\\"gf-form-label width-13\\\">Access key ID </label>\\r\\n    <label class=\\\"gf-form-label width-13\\\" ng-show=ctrl.accessKeyExist>Configured</label>\\r\\n    <a class=\\\"btn btn-secondary gf-form-btn\\\" type=submit ng-click=ctrl.resetAccessKey() ng-show=ctrl.accessKeyExist>Reset</a>\\r\\n    <input type=text class=\\\"gf-form-input max-width-18\\\" ng-hide=ctrl.accessKeyExist ng-model=ctrl.current.secureJsonData.accessKey>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show='ctrl.current.jsonData.authType == \\\"keys\\\"'>\\r\\n    <label class=\\\"gf-form-label width-13\\\">Secret access key</label>\\r\\n    <label class=\\\"gf-form-label width-13\\\" ng-show=ctrl.secretKeyExist>Configured</label>\\r\\n    <a class=\\\"btn btn-secondary gf-form-btn\\\" type=submit ng-click=ctrl.resetSecretKey() ng-show=ctrl.secretKeyExist>Reset</a>\\r\\n    <input type=text class=\\\"gf-form-input max-width-18\\\" ng-hide=ctrl.secretKeyExist ng-model=ctrl.current.secureJsonData.secretKey>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show='ctrl.current.jsonData.authType == \\\"arn\\\"'>\\r\\n    <label class=\\\"gf-form-label width-13\\\">Assume Role ARN</label>\\r\\n    <input type=text class=\\\"gf-form-input max-width-18\\\" ng-model=ctrl.current.jsonData.assumeRoleArn placeholder=arn:aws:iam:*>\\r\\n    <info-popover mode=right-absolute>\\r\\n      ARN of Assume Role\\r\\n    </info-popover>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form>\\r\\n    <label class=\\\"gf-form-label width-13\\\">Default Region</label>\\r\\n    <div class=\\\"gf-form-select-wrapper max-width-18 gf-form-select-wrapper--has-help-icon\\\">\\r\\n      <select class=gf-form-input ng-model=ctrl.current.jsonData.defaultRegion ng-options=\\\"region for region in ctrl.regions\\\"></select>\\r\\n      <info-popover mode=right-absolute>\\r\\n        Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region.\\r\\n      </info-popover>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=gf-form>\\r\\n    <label class=\\\"gf-form-label width-13\\\">Custom Metrics</label>\\r\\n    <input type=text class=\\\"gf-form-input max-width-18\\\" ng-model=ctrl.current.jsonData.customMetricsNamespaces placeholder=Namespace1,Namespace2>\\r\\n    <info-popover mode=right-absolute>\\r\\n      Namespaces of Custom Metrics\\r\\n    </info-popover>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/cloudwatch/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl can-collapse=false>\\r\\n\\t<cloudwatch-query-parameter target=ctrl.target datasource=ctrl.datasource on-change=ctrl.refresh()></cloudwatch-query-parameter>\\r\\n</query-editor-row>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/cloudwatch/partials/query.parameter.html';\nvar html = \"<div class=gf-form-inline ng-if=\\\"target.expression.length === 0\\\">\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label query-keyword width-8\\\">Metric</label>\\r\\n\\r\\n\\t\\t<metric-segment segment=regionSegment get-options=getRegions() on-change=regionChanged()></metric-segment>\\r\\n\\t\\t<metric-segment segment=namespaceSegment get-options=getNamespaces() on-change=namespaceChanged()></metric-segment>\\r\\n\\t\\t<metric-segment segment=metricSegment get-options=getMetrics() on-change=metricChanged()></metric-segment>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Stats</label>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form ng-repeat=\\\"segment in statSegments\\\">\\r\\n\\t\\t<metric-segment segment=segment get-options=\\\"getStatSegments(segment, $index)\\\" on-change=\\\"statSegmentChanged(segment, $index)\\\"></metric-segment>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-inline ng-if=\\\"target.expression.length === 0\\\">\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label query-keyword width-8\\\">Dimensions</label>\\r\\n\\t\\t<metric-segment ng-repeat=\\\"segment in dimSegments\\\" segment=segment get-options=\\\"getDimSegments(segment, $index)\\\" on-change=\\\"dimSegmentChanged(segment, $index)\\\"></metric-segment>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-inline ng-if=\\\"target.statistics.length === 1\\\">\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label query-keyword width-8\\\">\\r\\n\\t\\t\\tId\\r\\n\\t\\t\\t<info-popover mode=\\\"right-normal \\\">Id can include numbers, letters, and underscore, and must start with a lowercase letter.</info-popover>\\r\\n\\t\\t</label>\\r\\n\\t\\t<input type=\\\"text \\\" class=gf-form-input ng-model=\\\"target.id \\\" spellcheck=false ng-pattern=/^[a-z][a-zA-Z0-9_]*$/ ng-model-onblur ng-change=\\\"onChange() \\\">\\r\\n\\t</div>\\r\\n\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">Expression</label>\\r\\n\\t\\t<input type=\\\"text \\\" class=gf-form-input ng-model=\\\"target.expression\\r\\n\\t \\\" spellcheck=false ng-model-onblur ng-change=\\\"onChange() \\\">\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-inline>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label query-keyword width-8\\\">\\r\\n\\t\\t\\tMin period\\r\\n\\t\\t\\t<info-popover mode=\\\"right-normal \\\">Minimum interval between points in seconds</info-popover>\\r\\n\\t\\t</label>\\r\\n\\t\\t<input type=\\\"text \\\" class=gf-form-input ng-model=\\\"target.period \\\" spellcheck=false placeholder=\\\"auto\\r\\n\\t \\\" ng-model-onblur ng-change=\\\"onChange() \\\"/>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">Alias</label>\\r\\n\\t\\t<input type=\\\"text \\\" class=gf-form-input ng-model=\\\"target.alias \\\" spellcheck=false ng-model-onblur ng-change=\\\"onChange() \\\">\\r\\n\\t\\t<info-popover mode=\\\"right-absolute \\\">\\r\\n\\t\\t\\tAlias replacement variables:\\r\\n\\t\\t\\t<ul ng-non-bindable>\\r\\n\\t\\t\\t\\t<li>{{metric}}</li>\\r\\n\\t\\t\\t\\t<li>{{stat}}</li>\\r\\n\\t\\t\\t\\t<li>{{namespace}}</li>\\r\\n\\t\\t\\t\\t<li>{{region}}</li>\\r\\n\\t\\t\\t\\t<li>{{period}}</li>\\r\\n\\t\\t\\t\\t<li>{{YOUR_DIMENSION_NAME}}</li>\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<gf-form-switch class=gf-form label=\\\"HighRes \\\" label-class=\\\"width-5 \\\" checked=\\\"target.highResolution \\\" on-change=\\\"onChange() \\\">\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/elasticsearch/partials/annotations.editor.html';\nvar html = \"<div class=gf-form-group>\\r\\n\\t<div class=gf-form ng-if=ctrl.annotation.index>\\r\\n\\t\\t<span class=\\\"gf-form-label width-14\\\">Index name</span>\\r\\n\\t\\t<input type=text class=\\\"gf-form-input max-width-20\\\" ng-model=ctrl.annotation.index placeholder=events-*>\\r\\n\\t</div>\\r\\n\\t<div class=gf-form-group>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.annotation.query placeholder=\\\"Elasticsearch lucene query\\\">\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<h6>Field mappings</h6>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=gf-form-label>Time</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-14\\\" ng-model=ctrl.annotation.timeField placeholder=@timestamp>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=gf-form-label>Text</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-14\\\" ng-model=ctrl.annotation.textField placeholder=\\\"\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=gf-form-label>Tags</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-10\\\" ng-model=ctrl.annotation.tagsField placeholder=tags>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-show=ctrl.annotation.titleField>\\r\\n\\t\\t\\t<span class=gf-form-label>Title <em class=muted>(deprecated)</em></span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-16\\\" ng-model=ctrl.annotation.titleField placeholder=desc>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/elasticsearch/partials/bucket_agg.html';\nvar html = \"<div class=gf-form-inline>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">\\r\\n\\t\\t\\t<span ng-show=isFirst>Group by</span>\\r\\n\\t\\t\\t<span ng-hide=isFirst>Then by</span>\\r\\n\\t\\t</label>\\r\\n\\r\\n\\t\\t<gf-form-dropdown model=agg.type lookup-text=true get-options=getBucketAggTypes() on-change=onTypeChanged() allow-custom=false label-mode=true css-class=width-10>\\r\\n\\t\\t</gf-form-dropdown>\\r\\n\\t\\t<gf-form-dropdown ng-if=agg.field model=agg.field get-options=getFieldsInternal() on-change=onChange() allow-custom=false label-mode=true css-class=width-12>\\r\\n\\t\\t</gf-form-dropdown>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t<label class=\\\"gf-form-label gf-form-label--grow\\\">\\r\\n\\t\\t\\t<a ng-click=toggleOptions()>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" ng-show=showOptions></i>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-caret-right\\\" ng-hide=showOptions></i>\\r\\n\\t\\t\\t\\t{{settingsLinkText}}\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t</label>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=gf-form-label ng-if=isFirst>\\r\\n\\t\\t\\t<a class=pointer ng-click=addBucketAgg()><i class=\\\"fa fa-plus\\\"></i></a>\\r\\n\\t\\t</label>\\r\\n\\t\\t<label class=gf-form-label ng-if=\\\"bucketAggCount > 1\\\">\\r\\n\\t\\t\\t<a class=pointer ng-click=removeBucketAgg()><i class=\\\"fa fa-minus\\\"></i></a>\\r\\n\\t\\t</label>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group ng-if=showOptions>\\r\\n\\t<div ng-if=\\\"agg.type === 'date_histogram'\\\">\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Interval</label>\\r\\n\\t\\t\\t<gf-form-dropdown model=agg.settings.interval get-options=getIntervalOptions() on-change=onChangeInternal() allow-custom=true label-mode=true css-class=width-12>\\r\\n\\t\\t\\t</gf-form-dropdown>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Min Doc Count</label>\\r\\n\\t\\t\\t<input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.min_doc_count ng-blur=onChangeInternal()>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">\\r\\n\\t\\t\\t\\tTrim edges\\r\\n\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\tTrim the edges on the timeseries datapoints\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t\\t<input class=\\\"gf-form-input max-width-12\\\" type=number ng-model=agg.settings.trimEdges ng-change=onChangeInternal()>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div ng-if=\\\"agg.type === 'histogram'\\\">\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Interval</label>\\r\\n\\t\\t\\t<input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.interval ng-blur=onChangeInternal()>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Min Doc Count</label>\\r\\n\\t\\t\\t<input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.min_doc_count ng-blur=onChangeInternal()>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div ng-if=\\\"agg.type === 'terms'\\\">\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Order</label>\\r\\n\\t\\t\\t<gf-form-dropdown model=agg.settings.order lookup-text=true get-options=getOrderOptions() on-change=onChangeInternal() label-mode=true css-class=width-12>\\r\\n\\t\\t\\t</gf-form-dropdown>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Size</label>\\r\\n\\t\\t\\t<gf-form-dropdown model=agg.settings.size lookup-text=true get-options=getSizeOptions() on-change=onChangeInternal() label-mode=true allow-custom=true css-class=width-12>\\r\\n\\t\\t\\t</gf-form-dropdown>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Min Doc Count</label>\\r\\n\\t\\t\\t<input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.min_doc_count ng-blur=onChangeInternal()>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Order By</label>\\r\\n\\t\\t\\t<gf-form-dropdown model=agg.settings.orderBy lookup-text=true get-options=getOrderByOptions() on-change=onChangeInternal() label-mode=true css-class=width-12>\\r\\n\\t\\t\\t</gf-form-dropdown>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">\\r\\n\\t\\t\\t\\tMissing\\r\\n\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\tThe missing parameter defines how documents that are missing a value should be treated. By default they will be ignored but it is also possible to treat them as if they had a value\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-12\\\" empty-to-null ng-model=agg.settings.missing ng-blur=onChangeInternal() spellcheck=false>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div ng-if=\\\"agg.type === 'filters'\\\">\\r\\n\\t\\t<div class=\\\"gf-form-inline offset-width-7\\\" ng-repeat=\\\"filter in agg.settings.filters\\\">\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Query {{$index + 1}}</label>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-12\\\" ng-model=filter.query spellcheck=false placeholder=\\\"Lucene query\\\" ng-blur=onChangeInternal()>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Label {{$index + 1}}</label>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-12\\\" ng-model=filter.label spellcheck=false placeholder=Label ng-blur=onChangeInternal()>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=gf-form-label ng-if=$first>\\r\\n\\t\\t\\t\\t\\t<a class=pointer ng-click=addFiltersQuery()><i class=\\\"fa fa-plus\\\"></i></a>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t<label class=gf-form-label ng-if=!$first>\\r\\n\\t\\t\\t\\t\\t<a class=pointer ng-click=removeFiltersQuery(filter)><i class=\\\"fa fa-minus\\\"></i></a>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div ng-if=\\\"agg.type === 'geohash_grid'\\\">\\r\\n\\t\\t<div class=\\\"gf-form offset-width-7\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-10\\\">Precision</label>\\r\\n\\t\\t\\t<input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.precision spellcheck=false placeholder=3 ng-blur=onChangeInternal()>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/elasticsearch/partials/config.html';\nvar html = \"<datasource-http-settings current=ctrl.current suggest-url=http://localhost:9200>\\r\\n</datasource-http-settings>\\r\\n\\r\\n<h3 class=page-heading>Elasticsearch details</h3>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form max-width-25\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">Index name</span>\\r\\n\\t\\t\\t<input class=gf-form-input type=text ng-model=ctrl.current.database placeholder=\\\"\\\" required>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form width-14\\\">\\r\\n      <span class=\\\"gf-form-label width-9\\\">Pattern</span>\\r\\n      <span class=gf-form-select-wrapper>\\r\\n          <select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.current.jsonData.interval ng-options=\\\"f.value as f.name for f in ctrl.indexPatternTypes\\\" ng-change=ctrl.indexPatternTypeChanged()></select>\\r\\n      </span>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"gf-form max-width-25\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-9\\\">Time field name</span>\\r\\n\\t\\t<input class=gf-form-input type=text ng-model=ctrl.current.jsonData.timeField placeholder=\\\"\\\" required ng-init=\\\"\\\">\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form>\\r\\n    <span class=\\\"gf-form-label width-9\\\">Version</span>\\r\\n    <span class=gf-form-select-wrapper>\\r\\n        <select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.current.jsonData.esVersion ng-options=\\\"f.value as f.name for f in ctrl.esVersions\\\"></select>\\r\\n    </span>\\r\\n\\t</div>\\r\\n    <div class=\\\"gf-form max-width-30\\\" ng-if=\\\"ctrl.current.jsonData.esVersion>=56\\\">\\r\\n        <span class=\\\"gf-form-label width-15\\\">Max concurrent Shard Requests</span>\\r\\n        <input class=gf-form-input type=text ng-model=ctrl.current.jsonData.maxConcurrentShardRequests placeholder=\\\"\\\" required>\\r\\n    </div>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">Min time interval</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input width-6\\\" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=10s>\\r\\n\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\\r\\n\\t\\t\\t\\tfor example <code>1m</code> if your data is written every minute.\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/elasticsearch/partials/metric_agg.html';\nvar html = \"<div class=gf-form-inline ng-class=\\\"{'gf-form-disabled': agg.hide}\\\">\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">\\r\\n\\t\\t\\tMetric\\r\\n\\t\\t\\t&nbsp;\\r\\n\\t\\t\\t<a ng-click=toggleShowMetric() bs-tooltip=\\\"'Click to toggle show / hide metric'\\\">\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-eye\\\" ng-hide=agg.hide></i>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-eye-slash\\\" ng-show=agg.hide></i>\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t</label>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<metric-segment-model property=agg.type options=metricAggTypes on-change=onTypeChange() custom=false css-class=width-10></metric-segment-model>\\r\\n\\t\\t<metric-segment-model ng-if=aggDef.requiresField property=agg.field get-options=getFieldsInternal() on-change=onChange() css-class=width-12></metric-segment-model>\\r\\n\\t\\t<metric-segment-model ng-if=aggDef.isPipelineAgg property=agg.pipelineAgg options=pipelineAggOptions on-change=onChangeInternal() custom=false css-class=width-12></metric-segment-model>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t<label class=\\\"gf-form-label gf-form-label--grow\\\">\\r\\n\\t\\t\\t<a ng-click=toggleOptions() ng-if=settingsLinkText>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" ng-show=showOptions></i>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-caret-right\\\" ng-hide=showOptions></i>\\r\\n\\t\\t\\t\\t\\t{{settingsLinkText}}\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t</label>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=gf-form-label ng-if=isFirst>\\r\\n\\t\\t\\t<a class=pointer ng-click=addMetricAgg()><i class=\\\"fa fa-plus\\\"></i></a>\\r\\n\\t\\t</label>\\r\\n\\t\\t<label class=gf-form-label ng-if=!isSingle>\\r\\n\\t\\t\\t<a class=pointer ng-click=removeMetricAgg()><i class=\\\"fa fa-minus\\\"></i></a>\\r\\n\\t\\t</label>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group ng-if=showOptions>\\r\\n\\t<div class=\\\"gf-form offset-width-7\\\" ng-if=\\\"agg.type === 'derivative'\\\">\\r\\n\\t\\t<label class=\\\"gf-form-label width-10\\\">Unit</label>\\r\\n\\t\\t<input type=text class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.unit ng-blur=onChangeInternal() spellcheck=false>\\r\\n\\t</div>\\r\\n\\r\\n  <div ng-if=\\\"agg.type === 'moving_avg'\\\">\\r\\n    <div class=\\\"gf-form offset-width-7\\\">\\r\\n      <label class=\\\"gf-form-label width-10\\\">Model</label>\\r\\n      <metric-segment-model property=agg.settings.model options=movingAvgModelTypes on-change=onChangeClearInternal() custom=false css-class=width-12></metric-segment-model>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"gf-form offset-width-7\\\">\\r\\n      <label class=\\\"gf-form-label width-10\\\">Window</label>\\r\\n      <input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.window ng-blur=onChangeInternal() spellcheck=false>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"gf-form offset-width-7\\\">\\r\\n      <label class=\\\"gf-form-label width-10\\\">Predict</label>\\r\\n      <input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.predict ng-blur=onChangeInternal() spellcheck=false>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <div class=\\\"gf-form offset-width-7\\\" ng-repeat=\\\"setting in modelSettings\\\">\\r\\n      <label class=\\\"gf-form-label width-10\\\">{{setting.text}}</label>\\r\\n      <input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.settings[setting.value] ng-blur=onChangeInternal() spellcheck=false>\\r\\n    </div>\\r\\n\\r\\n    <gf-form-switch ng-if=\\\"agg.settings.model == 'holt_winters'\\\" class=\\\"gf-form offset-width-7\\\" label=Pad label-class=width-10 checked=agg.settings.settings.pad on-change=onChangeInternal()></gf-form-switch>\\r\\n    <gf-form-switch ng-if=\\\"agg.settings.model.match('ewma|holt_winters|holt') !== null\\\" class=\\\"gf-form offset-width-7\\\" label=Minimize label-class=width-10 checked=agg.settings.minimize on-change=onChangeInternal()></gf-form-switch>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"gf-form offset-width-7\\\" ng-if=\\\"agg.type === 'percentiles'\\\">\\r\\n    <label class=\\\"gf-form-label width-10\\\">Percentiles</label>\\r\\n    <input type=text class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.percents array-join ng-blur=onChange()>\\r\\n  </div>\\r\\n  <div class=\\\"gf-form offset-width-7\\\" ng-if=\\\"agg.type === 'raw_document'\\\">\\r\\n    <label class=\\\"gf-form-label width-10\\\">Size</label>\\r\\n    <input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.size ng-blur=onChange()>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div class=\\\"gf-form offset-width-7\\\" ng-if=\\\"agg.type === 'cardinality'\\\">\\r\\n    <label class=\\\"gf-form-label width-10\\\">Precision threshold</label>\\r\\n    <input type=number class=\\\"gf-form-input max-width-12\\\" ng-model=agg.settings.precision_threshold ng-blur=onChange()>\\r\\n  </div>\\r\\n\\r\\n  <div ng-if=\\\"agg.type === 'extended_stats'\\\">\\r\\n    <gf-form-switch ng-repeat=\\\"stat in extendedStats\\\" class=\\\"gf-form offset-width-7\\\" label={{stat.text}} label-class=width-10 checked=agg.meta[stat.value] on-change=onChangeInternal()></gf-form-switch>\\r\\n\\r\\n    <div class=\\\"gf-form offset-width-7\\\">\\r\\n      <label class=\\\"gf-form-label width-10\\\">Sigma</label>\\r\\n      <input type=number class=\\\"gf-form-input max-width-12\\\" placeholder=3 ng-model=agg.settings.sigma ng-blur=onChange()>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"gf-form offset-width-7\\\" ng-if=aggDef.supportsInlineScript>\\r\\n    <label class=\\\"gf-form-label width-10\\\">Script</label>\\r\\n    <input type=text class=\\\"gf-form-input max-width-12\\\" empty-to-null ng-model=agg.inlineScript ng-blur=onChangeInternal() spellcheck=false placeholder=\\\"_value * 1\\\">\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"gf-form offset-width-7\\\" ng-if=aggDef.supportsMissing>\\r\\n\\t\\t<label class=\\\"gf-form-label width-10\\\">\\r\\n\\t\\t\\tMissing\\r\\n\\t\\t\\t<tip>The missing parameter defines how documents that are missing a value should be treated. By default they will be ignored but it is also possible to treat them as if they had a value</tip>\\r\\n\\t\\t</label>\\r\\n\\t\\t<input type=number class=\\\"gf-form-input max-width-12\\\" empty-to-null ng-model=agg.settings.missing ng-blur=onChangeInternal() spellcheck=false>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/elasticsearch/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl can-collapse=true>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">Query</label>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.target.query spellcheck=false placeholder=\\\"Lucene query\\\" ng-blur=ctrl.refresh()>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Alias</label>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.target.alias spellcheck=false placeholder=\\\"alias patterns\\\" ng-blur=ctrl.refresh()>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div ng-repeat=\\\"agg in ctrl.target.metrics\\\">\\r\\n\\t\\t<elastic-metric-agg target=ctrl.target index=$index get-fields=ctrl.getFields($fieldType) on-change=ctrl.queryUpdated() es-version=ctrl.esVersion>\\r\\n\\t\\t</elastic-metric-agg>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div ng-repeat=\\\"agg in ctrl.target.bucketAggs\\\">\\r\\n\\t\\t<elastic-bucket-agg target=ctrl.target index=$index get-fields=ctrl.getFields($fieldType) on-change=ctrl.queryUpdated()>\\r\\n\\t\\t</elastic-bucket-agg>\\r\\n\\t</div>\\r\\n\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/grafana-live/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl can-collapse=false>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-8\\\">Stream</label>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.target.stream spellcheck=false placeholder=metric>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/grafana/partials/annotations.editor.html';\nvar html = \"\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">\\r\\n\\t\\t\\t\\tFilter by\\r\\n\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\t<ul>\\r\\n\\t\\t\\t\\t\\t\\t<li>Dashboard: This will fetch annotation and alert state changes for whole dashboard and show them only on the event's originating panel.</li>\\r\\n\\t\\t\\t\\t\\t\\t<li>All: This will fetch any annotation events that match the tags filter.</li>\\r\\n\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</span>\\r\\n\\t\\t\\t<div class=\\\"gf-form-select-wrapper width-8\\\">\\r\\n\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.annotation.type ng-options=\\\"f.value as f.text for f in ctrl.types\\\">\\r\\n\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=gf-form-label>Max limit</span>\\r\\n\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.annotation.limit ng-options=\\\"f for f in [10,50,100,200,300,500,1000,2000]\\\">\\r\\n\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form ng-if=\\\"ctrl.annotation.type === 'tags'\\\">\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=\\\"Match any\\\" label-class=width-9 checked=ctrl.annotation.matchAny on-change=ctrl.refresh() tooltip=\\\"By default Grafana will only show annotation that matches all tags in the query. Enabling this will make Grafana return any annotation with the tags you specify.\\\"></gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-if=\\\"ctrl.annotation.type === 'tags'\\\">\\r\\n\\t\\t\\t<span class=gf-form-label>Tags</span>\\r\\n\\t\\t\\t<bootstrap-tagsinput ng-model=ctrl.annotation.tags tagclass=\\\"label label-tag\\\" placeholder=\\\"add tags\\\">\\r\\n\\t\\t\\t</bootstrap-tagsinput>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/grafana/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl can-collapse=false>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=gf-form-label>Test data: random walk</label>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/graphite/partials/annotations.editor.html';\nvar html = \"<div class=gf-form-group>\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label width-12\\\">Graphite query</span>\\r\\n    <input type=text class=gf-form-input ng-model=ctrl.annotation.target placeholder=\\\"Example: statsd.application.counters.*.count\\\">\\r\\n  </div>\\r\\n\\r\\n\\t<h5 class=section-heading>Or</h5>\\r\\n\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label width-12\\\">Graphite events tags</span>\\r\\n    <input type=text class=gf-form-input ng-model=ctrl.annotation.tags placeholder=\\\"Example: event_tag_name\\\">\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/graphite/partials/config.html';\nvar html = \"<datasource-http-settings current=ctrl.current suggest-url=http://localhost:8080>\\r\\n</datasource-http-settings>\\r\\n\\r\\n<h3 class=page-heading>Graphite details</h3>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<span class=\\\"gf-form-label width-8\\\">\\r\\n      Version\\r\\n      <info-popover mode=right-normal position=\\\"top center\\\">\\r\\n        This option controls what functions are available in the Graphite query editor.\\r\\n      </info-popover>\\r\\n    </span>\\r\\n    <span class=gf-form-select-wrapper>\\r\\n        <select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.current.jsonData.graphiteVersion ng-options=\\\"f.value as f.name for f in ctrl.graphiteVersions\\\"></select>\\r\\n    </span>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/graphite/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl has-text-edit-mode=true>\\r\\n\\r\\n  <div class=gf-form ng-show=ctrl.target.textEditor>\\r\\n    <input type=text class=gf-form-input ng-model=ctrl.target.target spellcheck=false ng-blur=ctrl.targetTextChanged()>\\r\\n  </div>\\r\\n\\r\\n  <div ng-hide=ctrl.target.textEditor>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-6 query-keyword\\\">Series</label>\\r\\n      </div>\\r\\n\\r\\n      <div ng-if=ctrl.queryModel.seriesByTagUsed ng-repeat=\\\"tag in ctrl.queryModel.tags\\\" class=gf-form>\\r\\n        <gf-form-dropdown model=tag.key allow-custom=true label-mode=true debounce=true placeholder=\\\"Tag key\\\" css-class=query-segment-key get-options=\\\"ctrl.getTags($index, $query)\\\" on-change=\\\"ctrl.tagChanged(tag, $index)\\\"/>\\r\\n        <gf-form-dropdown model=tag.operator label-mode=true css-class=query-segment-operator get-options=ctrl.getTagOperators() on-change=\\\"ctrl.tagChanged(tag, $index)\\\" min-input-width=30 />\\r\\n        <gf-form-dropdown model=tag.value allow-custom=true label-mode=true debounce=true css-class=query-segment-value placeholder=\\\"Tag value\\\" get-options=\\\"ctrl.getTagValues(tag, $index, $query)\\\" on-change=\\\"ctrl.tagChanged(tag, $index)\\\"/>\\r\\n        <label class=\\\"gf-form-label query-keyword\\\" ng-if=ctrl.showDelimiter($index)>AND</label>\\r\\n      </div>\\r\\n\\r\\n      <div ng-if=ctrl.queryModel.seriesByTagUsed ng-repeat=\\\"segment in ctrl.addTagSegments\\\" role=menuitem class=gf-form>\\r\\n        <metric-segment segment=segment get-options=ctrl.getTagsAsSegments($query) on-change=ctrl.addNewTag(segment) debounce=true />\\r\\n      </div>\\r\\n\\r\\n      <div ng-if=!ctrl.queryModel.seriesByTagUsed ng-repeat=\\\"segment in ctrl.segments\\\" role=menuitem class=gf-form>\\r\\n        <metric-segment segment=segment get-options=\\\"ctrl.getAltSegments($index, $query)\\\" on-change=\\\"ctrl.segmentValueChanged(segment, $index)\\\"/>\\r\\n      </div>\\r\\n\\r\\n      <div ng-if=ctrl.paused class=gf-form>\\r\\n        <a ng-click=ctrl.unpause() class=\\\"gf-form-label query-part\\\"><i class=\\\"fa fa-play\\\"></i></a>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-6 query-keyword\\\">Functions</label>\\r\\n      </div>\\r\\n\\r\\n      <div ng-repeat=\\\"func in ctrl.queryModel.functions\\\" class=gf-form>\\r\\n        <span graphite-func-editor class=\\\"gf-form-label query-part\\\" ng-hide=func.hidden></span>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"gf-form dropdown\\\">\\r\\n        <span graphite-add-func></span>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/influxdb/partials/annotations.editor.html';\nvar html = \"\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<input type=text class=gf-form-input ng-model=ctrl.annotation.query placeholder=\\\"select text from events where $timeFilter limit 1000\\\">\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<h5 class=section-heading>Field mappings <tip>If your influxdb query returns more than one field you need to specify the column names below. An annotation event is composed of a title, tags, and an additional text field.</tip></h5>\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-4\\\">Text</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-10\\\" ng-model=ctrl.annotation.textColumn placeholder=\\\"\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-4\\\">Tags</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-10\\\" ng-model=ctrl.annotation.tagsColumn placeholder=\\\"\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-show=ctrl.annotation.titleColumn>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-4\\\">Title <em class=muted>(deprecated)</em></span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-10\\\" ng-model=ctrl.annotation.titleColumn placeholder=\\\"\\\">\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/influxdb/partials/config.html';\nvar html = \"<datasource-http-settings current=ctrl.current suggest-url=http://localhost:8086>\\r\\n</datasource-http-settings>\\r\\n\\r\\n<h3 class=page-heading>InfluxDB Details</h3>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Database</span>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.database placeholder=\\\"\\\" required>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">User</span>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.user placeholder=\\\"\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Password</span>\\r\\n\\t\\t\\t<input type=password class=gf-form-input ng-model=ctrl.current.password placeholder=\\\"\\\">\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=grafana-info-box>\\r\\n\\t\\t<h5>Database Access</h5>\\r\\n\\t\\t<p>\\r\\n\\t\\t\\tSetting the database for this datasource does not deny access to other databases.  The InfluxDB query syntax allows\\r\\n\\t\\t\\tswitching the database in the query.  For example:\\r\\n\\t\\t\\t<code>SHOW MEASUREMENTS ON _internal</code> or <code>SELECT * FROM \\\"_internal\\\"..\\\"database\\\" LIMIT 10</code>\\r\\n\\t\\t\\t<br/><br/>\\r\\n\\t\\t\\tTo support data isolation and security, make sure appropriate permissions are configured in InfluxDB.\\r\\n\\t\\t</p>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=gf-form-label>Min time interval</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input width-6\\\" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=10s>\\r\\n\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\\r\\n\\t\\t\\t\\tfor example <code>1m</code> if your data is written every minute.\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/influxdb/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl can-collapse=true has-text-edit-mode=true>\\r\\n\\r\\n\\t<div ng-if=ctrl.target.rawQuery>\\r\\n    <div class=gf-form>\\r\\n      <textarea rows=3 class=gf-form-input ng-model=ctrl.target.query spellcheck=false placeholder=\\\"InfluxDB Query\\\" ng-model-onblur ng-change=ctrl.refresh()></textarea>\\r\\n    </div>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label query-keyword\\\">FORMAT AS</label>\\r\\n        <div class=gf-form-select-wrapper>\\r\\n          <select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.target.resultFormat ng-options=\\\"f.value as f.text for f in ctrl.resultFormats\\\" ng-change=ctrl.refresh()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"gf-form max-width-25\\\" ng-hide=\\\"ctrl.target.resultFormat === 'table'\\\">\\r\\n        <label class=\\\"gf-form-label query-keyword\\\">ALIAS BY</label>\\r\\n        <input type=text class=gf-form-input ng-model=ctrl.target.alias spellcheck=false placeholder=\\\"Naming pattern\\\" ng-blur=ctrl.refresh()>\\r\\n      </div>\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n\\t<div ng-if=!ctrl.target.rawQuery>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">FROM</label>\\r\\n\\r\\n\\t\\t\\t\\t<metric-segment segment=ctrl.policySegment get-options=ctrl.getPolicySegments() on-change=ctrl.policyChanged()></metric-segment>\\r\\n\\t\\t\\t\\t<metric-segment segment=ctrl.measurementSegment get-options=ctrl.getMeasurements($query) on-change=ctrl.measurementChanged()></metric-segment>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">WHERE</label>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form ng-repeat=\\\"segment in ctrl.tagSegments\\\">\\r\\n\\t\\t\\t\\t<metric-segment segment=segment get-options=\\\"ctrl.getTagsOrValues(segment, $index)\\\" on-change=\\\"ctrl.tagSegmentUpdated(segment, $index)\\\"></metric-segment>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline ng-repeat=\\\"selectParts in ctrl.queryModel.selectModels\\\">\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">\\r\\n\\t\\t\\t\\t\\t<span ng-show=\\\"$index === 0\\\">SELECT</span>&nbsp;\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form ng-repeat=\\\"part in selectParts\\\">\\r\\n\\t\\t\\t\\t<query-part-editor class=\\\"gf-form-label query-part\\\" part=part handle-event=\\\"ctrl.handleSelectPartEvent(selectParts, part, $event)\\\">\\r\\n\\t\\t\\t\\t</query-part-editor>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=dropdown dropdown-typeahead=ctrl.selectMenu dropdown-typeahead-on-select=\\\"ctrl.addSelectPart(selectParts, $item, $subItem)\\\">\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">\\r\\n\\t\\t\\t\\t\\t<span>GROUP BY</span>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\r\\n\\t\\t\\t\\t<query-part-editor ng-repeat=\\\"part in ctrl.queryModel.groupByParts\\\" part=part class=\\\"gf-form-label query-part\\\" handle-event=\\\"ctrl.handleGroupByPartEvent(part, $index, $event)\\\">\\r\\n\\t\\t\\t\\t</query-part-editor>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<metric-segment segment=ctrl.groupBySegment get-options=ctrl.getGroupByOptions() on-change=\\\"ctrl.groupByAction(part, $index)\\\"></metric-segment>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n    <div class=gf-form-inline ng-if=\\\"ctrl.target.orderByTime === 'DESC'\\\">\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label query-keyword width-7\\\">ORDER BY</label>\\r\\n        <label class=\\\"gf-form-label pointer\\\" ng-click=ctrl.removeOrderByTime()>time <span class=query-keyword>DESC</span> <i class=\\\"fa fa-remove\\\"></i></label>\\r\\n      </div>\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-inline ng-if=ctrl.target.limit>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label query-keyword width-7\\\">LIMIT</label>\\r\\n        <input type=text class=\\\"gf-form-input width-9\\\" ng-model=ctrl.target.limit spellcheck=false placeholder=\\\"No Limit\\\" ng-blur=ctrl.refresh()>\\r\\n      </div>\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-inline ng-if=ctrl.target.slimit>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label query-keyword width-7\\\">SLIMIT</label>\\r\\n        <input type=text class=\\\"gf-form-input width-9\\\" ng-model=ctrl.target.slimit spellcheck=false placeholder=\\\"No Limit\\\" ng-blur=ctrl.refresh()>\\r\\n      </div>\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label query-keyword width-7\\\">FORMAT AS</label>\\r\\n        <div class=gf-form-select-wrapper>\\r\\n          <select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.target.resultFormat ng-options=\\\"f.value as f.text for f in ctrl.resultFormats\\\" ng-change=ctrl.refresh()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-inline ng-hide=\\\"ctrl.target.resultFormat === 'table'\\\">\\r\\n      <div class=\\\"gf-form max-width-30\\\">\\r\\n        <label class=\\\"gf-form-label query-keyword width-7\\\">ALIAS BY</label>\\r\\n        <input type=text class=gf-form-input ng-model=ctrl.target.alias spellcheck=false placeholder=\\\"Naming pattern\\\" ng-blur=ctrl.refresh()>\\r\\n      </div>\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/logging/partials/config.html';\nvar html = \"<datasource-http-settings current=ctrl.current no-direct-access=true>\\r\\n</datasource-http-settings>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","import { StoreState } from 'app/types';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { getBackendSrv } from 'app/core/services/backend_srv';\r\nimport appEvents from 'app/core/app_events';\r\nimport { loadPluginDashboards } from '../../plugins/state/actions';\r\nimport {\r\n  DashboardAcl,\r\n  DashboardAclDTO,\r\n  PermissionLevel,\r\n  DashboardAclUpdateDTO,\r\n  NewDashboardAclItem,\r\n} from 'app/types/acl';\r\n\r\nexport enum ActionTypes {\r\n  LoadDashboardPermissions = 'LOAD_DASHBOARD_PERMISSIONS',\r\n}\r\n\r\nexport interface LoadDashboardPermissionsAction {\r\n  type: ActionTypes.LoadDashboardPermissions;\r\n  payload: DashboardAcl[];\r\n}\r\n\r\nexport type Action = LoadDashboardPermissionsAction;\r\n\r\ntype ThunkResult<R> = ThunkAction<R, StoreState, undefined, any>;\r\n\r\nexport const loadDashboardPermissions = (items: DashboardAclDTO[]): LoadDashboardPermissionsAction => ({\r\n  type: ActionTypes.LoadDashboardPermissions,\r\n  payload: items,\r\n});\r\n\r\nexport function getDashboardPermissions(id: number): ThunkResult<void> {\r\n  return async dispatch => {\r\n    const permissions = await getBackendSrv().get(`/api/dashboards/id/${id}/permissions`);\r\n    dispatch(loadDashboardPermissions(permissions));\r\n  };\r\n}\r\n\r\nfunction toUpdateItem(item: DashboardAcl): DashboardAclUpdateDTO {\r\n  return {\r\n    userId: item.userId,\r\n    teamId: item.teamId,\r\n    role: item.role,\r\n    permission: item.permission,\r\n  };\r\n}\r\n\r\nexport function updateDashboardPermission(\r\n  dashboardId: number,\r\n  itemToUpdate: DashboardAcl,\r\n  level: PermissionLevel\r\n): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const { dashboard } = getStore();\r\n    const itemsToUpdate = [];\r\n\r\n    for (const item of dashboard.permissions) {\r\n      if (item.inherited) {\r\n        continue;\r\n      }\r\n\r\n      const updated = toUpdateItem(item);\r\n\r\n      // if this is the item we want to update, update it's permisssion\r\n      if (itemToUpdate === item) {\r\n        updated.permission = level;\r\n      }\r\n\r\n      itemsToUpdate.push(updated);\r\n    }\r\n\r\n    await getBackendSrv().post(`/api/dashboards/id/${dashboardId}/permissions`, { items: itemsToUpdate });\r\n    await dispatch(getDashboardPermissions(dashboardId));\r\n  };\r\n}\r\n\r\nexport function removeDashboardPermission(dashboardId: number, itemToDelete: DashboardAcl): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const dashboard = getStore().dashboard;\r\n    const itemsToUpdate = [];\r\n\r\n    for (const item of dashboard.permissions) {\r\n      if (item.inherited || item === itemToDelete) {\r\n        continue;\r\n      }\r\n      itemsToUpdate.push(toUpdateItem(item));\r\n    }\r\n\r\n    await getBackendSrv().post(`/api/dashboards/id/${dashboardId}/permissions`, { items: itemsToUpdate });\r\n    await dispatch(getDashboardPermissions(dashboardId));\r\n  };\r\n}\r\n\r\nexport function addDashboardPermission(dashboardId: number, newItem: NewDashboardAclItem): ThunkResult<void> {\r\n  return async (dispatch, getStore) => {\r\n    const { dashboard } = getStore();\r\n    const itemsToUpdate = [];\r\n\r\n    for (const item of dashboard.permissions) {\r\n      if (item.inherited) {\r\n        continue;\r\n      }\r\n      itemsToUpdate.push(toUpdateItem(item));\r\n    }\r\n\r\n    itemsToUpdate.push({\r\n      userId: newItem.userId,\r\n      teamId: newItem.teamId,\r\n      role: newItem.role,\r\n      permission: newItem.permission,\r\n    });\r\n\r\n    await getBackendSrv().post(`/api/dashboards/id/${dashboardId}/permissions`, { items: itemsToUpdate });\r\n    await dispatch(getDashboardPermissions(dashboardId));\r\n  };\r\n}\r\n\r\nexport function importDashboard(data, dashboardTitle: string): ThunkResult<void> {\r\n  return async dispatch => {\r\n    await getBackendSrv().post('/api/dashboards/import', data);\r\n    appEvents.emit('alert-success', ['Dashboard Imported', dashboardTitle]);\r\n    dispatch(loadPluginDashboards());\r\n  };\r\n}\r\n\r\nexport function removeDashboard(uri: string): ThunkResult<void> {\r\n  return async dispatch => {\r\n    await getBackendSrv().delete(`/api/dashboards/${uri}`);\r\n    dispatch(loadPluginDashboards());\r\n  };\r\n}\r\n","var path = 'public/app/plugins/datasource/mssql/partials/annotations.editor.html';\nvar html = \"\\r\\n<div class=gf-form-group>\\r\\n  <div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<textarea rows=10 class=gf-form-input ng-model=ctrl.annotation.rawQuery spellcheck=false placeholder=\\\"query expression\\\" data-min-length=0 data-items=100 ng-model-onblur ng-change=ctrl.panelCtrl.refresh()></textarea>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\" ng-click=\\\"ctrl.showHelp = !ctrl.showHelp\\\">\\r\\n        Show Help\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showHelp></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showHelp></i>\\r\\n      </label>\\r\\n\\t\\t</div>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show=ctrl.showHelp>\\r\\n\\t\\t<pre class=\\\"gf-form-pre alert alert-info\\\"><h6>Annotation Query Format</h6>\\r\\nAn annotation is an event that is overlaid on top of graphs. The query can have up to three columns per row, the <b>time</b> column is mandatory. Annotation rendering is expensive so it is important to limit the number of rows returned.\\r\\n\\r\\n- column with alias: <b>time</b> for the annotation event time. Use epoch time or any native date data type.\\r\\n- column with alias: <b>text</b> for the annotation text.\\r\\n- column with alias: <b>tags</b> for annotation tags. This is a comma separated string of tags e.g. 'tag1,tag2'.\\r\\n\\r\\n\\r\\nMacros:\\r\\n- $__time(column) -&gt; column AS time\\r\\n- $__timeEpoch(column) -&gt; DATEDIFF(second, '1970-01-01', column) AS time\\r\\n- $__timeFilter(column) -&gt; column BETWEEN '2017-04-21T05:01:17Z' AND '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFilter(column) -&gt; column &gt;= 1492750877 AND column &lt;= 1492750877\\r\\n\\r\\nOr build your own conditionals using these macros which just return the values:\\r\\n- $__timeFrom() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__timeTo() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFrom() -&gt; 1492750877\\r\\n- $__unixEpochTo() -&gt; 1492750877\\r\\n\\t\\t</pre>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/mssql/partials/config.html';\nvar html = \"\\r\\n<h3 class=page-heading>MSSQL Connection</h3>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Host</span>\\r\\n\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.url placeholder=localhost:1433 bs-typeahead=\\\"{{['localhost', 'localhost:1433']}}\\\" required>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Database</span>\\r\\n\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.database placeholder=\\\"database name\\\" required>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">User</span>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.user placeholder=user>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form max-width-15\\\" ng-if=!ctrl.current.secureJsonFields.password>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Password</span>\\r\\n\\t\\t\\t<input type=password class=gf-form-input ng-model=ctrl.current.secureJsonData.password placeholder=password>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form max-width-19\\\" ng-if=ctrl.current.secureJsonFields.password>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Password</span>\\r\\n\\t\\t\\t<input type=text class=gf-form-input disabled=disabled value=configured>\\r\\n\\t\\t\\t<a class=\\\"btn btn-secondary gf-form-btn\\\" href=# ng-click=\\\"ctrl.current.secureJsonFields.password = false\\\">reset</a>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label width-7\\\">Encrypt</label>\\r\\n\\t\\t<div class=\\\"gf-form-select-wrapper max-width-15 gf-form-select-wrapper--has-help-icon\\\">\\r\\n\\t\\t\\t<select class=gf-form-input ng-model=ctrl.current.jsonData.encrypt ng-options=\\\"mode for mode in ['disable', 'false', 'true']\\\" ng-init=ctrl.current.jsonData.encrypt></select>\\r\\n\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\tDetermines whether or to which extent a secure SSL TCP/IP connection will be negotiated with the server.\\r\\n\\t\\t\\t\\t<ul>\\r\\n\\t\\t\\t\\t\\t<li><i>disable</i> - Data sent between client and server is not encrypted.</li>\\r\\n\\t\\t\\t\\t\\t<li><i>false</i> - Data sent between client and server is not encrypted beyond the login packet. (default)</li>\\r\\n\\t\\t\\t\\t\\t<li><i>true</i> - Data sent between client and server is encrypted.</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\tIf you're using an older version of Microsoft SQL Server like 2008 and 2008R2 you may need to disable encryption to be able to connect.\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<b>Connection limits</b>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Max open</span>\\r\\n\\t\\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxOpenConns placeholder=unlimited>\\r\\n\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\tThe maximum number of open connections to the database. If <i>Max idle connections</i> is greater than 0 and the\\r\\n\\t\\t\\t<i>Max open connections</i> is less than <i>Max idle connections</i>, then <i>Max idle connections</i> will be\\r\\n\\t\\t\\treduced to match the <i>Max open connections</i> limit. If set to 0, there is no limit on the number of open\\r\\n\\t\\t\\tconnections.\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Max idle</span>\\r\\n\\t\\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxIdleConns placeholder=2>\\r\\n\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\tThe maximum number of connections in the idle connection pool. If <i>Max open connections</i> is greater than 0 but\\r\\n\\t\\t\\tless than the <i>Max idle connections</i>, then the <i>Max idle connections</i> will be reduced to match the\\r\\n\\t\\t\\t<i>Max open connections</i> limit. If set to 0, no idle connections are retained.\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Max lifetime</span>\\r\\n\\t\\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.connMaxLifetime placeholder=14400>\\r\\n\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\tThe maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<h3 class=page-heading>MSSQL details</h3>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">Min time interval</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input width-6\\\" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=1m>\\r\\n\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\\r\\n\\t\\t\\t\\tfor example <code>1m</code> if your data is written every minute.\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=grafana-info-box>\\r\\n\\t\\t<h5>User Permission</h5>\\r\\n\\t\\t<p>\\r\\n\\t\\t\\tThe database user should only be granted SELECT permissions on the specified database &amp; tables you want to query.\\r\\n\\t\\t\\tGrafana does not validate that queries are safe so queries can contain any SQL statement. For example, statements\\r\\n\\t\\t\\tlike <code>USE otherdb;</code> and <code>DROP TABLE user;</code> would be executed. To protect against this we\\r\\n\\t\\t\\t<strong>Highly</strong> recommmend you create a specific MSSQL user with restricted permissions.\\r\\n\\t\\t</p>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/mssql/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl can-collapse=false>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<code-editor content=ctrl.target.rawSql datasource=ctrl.datasource on-change=ctrl.panelCtrl.refresh() data-mode=sqlserver>\\r\\n\\t\\t\\t</code-editor>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Format as</label>\\r\\n\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t<select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.target.format ng-options=\\\"f.value as f.text for f in ctrl.formats\\\" ng-change=ctrl.refresh()></select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\" ng-click=\\\"ctrl.showHelp = !ctrl.showHelp\\\">\\r\\n        Show Help\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showHelp></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showHelp></i>\\r\\n      </label>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-show=ctrl.lastQueryMeta>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\" ng-click=\\\"ctrl.showLastQuerySQL = !ctrl.showLastQuerySQL\\\">\\r\\n        Generated SQL\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showLastQuerySQL></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showLastQuerySQL></i>\\r\\n      </label>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form ng-show=ctrl.showLastQuerySQL>\\r\\n\\t\\t<pre class=gf-form-pre>{{ctrl.lastQueryMeta.sql}}</pre>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form ng-show=ctrl.showHelp>\\r\\n\\t\\t<pre class=\\\"gf-form-pre alert alert-info\\\">Time series:\\r\\n- return column named time (in UTC), as a unix time stamp or any sql native date data type. You can use the macros below.\\r\\n- any other columns returned will be the time point values.\\r\\nOptional:\\r\\n  - return column named <i>metric</i> to represent the series name.\\r\\n  - If multiple value columns are returned the metric column is used as prefix.\\r\\n  - If no column named metric is found the column name of the value column is used as series name\\r\\n\\r\\nResultsets of time series queries need to be sorted by time.\\r\\n\\r\\nTable:\\r\\n- return any set of columns\\r\\n\\r\\nMacros:\\r\\n- $__time(column) -&gt; column AS time\\r\\n- $__timeEpoch(column) -&gt; DATEDIFF(second, '1970-01-01', column) AS time\\r\\n- $__timeFilter(column) -&gt; column BETWEEN '2017-04-21T05:01:17Z' AND '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFilter(column) -&gt; column &gt;= 1492750877 AND column &lt;= 1492750877\\r\\n- $__timeGroup(column, '5m'[, fillvalue]) -&gt; CAST(ROUND(DATEDIFF(second, '1970-01-01', column)/300.0, 0) as bigint)*300.\\r\\n     by setting fillvalue grafana will fill in missing values according to the interval\\r\\n     fillvalue can be either a literal value, NULL or previous; previous will fill in the previous seen value or NULL if none has been seen yet\\r\\n- $__timeGroupAlias(column, '5m'[, fillvalue]) -&gt; CAST(ROUND(DATEDIFF(second, '1970-01-01', column)/300.0, 0) as bigint)*300 AS [time]\\r\\n- $__unixEpochGroup(column,'5m') -&gt; FLOOR(column/300)*300\\r\\n- $__unixEpochGroupAlias(column,'5m') -&gt; FLOOR(column/300)*300 AS [time]\\r\\n\\r\\nExample of group by and order by with $__timeGroup:\\r\\nSELECT\\r\\n  $__timeGroup(date_time_col, '1h') AS time,\\r\\n  sum(value) as value\\r\\nFROM yourtable\\r\\nGROUP BY $__timeGroup(date_time_col, '1h')\\r\\nORDER BY 1\\r\\n\\r\\nOr build your own conditionals using these macros which just return the values:\\r\\n- $__timeFrom() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__timeTo() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFrom() -&gt; 1492750877\\r\\n- $__unixEpochTo() -&gt; 1492750877\\r\\n\\t\\t</pre>\\r\\n\\t</div>\\r\\n\\r\\n\\t\\r\\n\\r\\n\\t<div class=gf-form ng-show=ctrl.lastQueryError>\\r\\n\\t\\t<pre class=\\\"gf-form-pre alert alert-error\\\">{{ctrl.lastQueryError}}</pre>\\r\\n\\t</div>\\r\\n\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/mysql/partials/annotations.editor.html';\nvar html = \"\\r\\n<div class=gf-form-group>\\r\\n  <div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<textarea rows=10 class=gf-form-input ng-model=ctrl.annotation.rawQuery spellcheck=false placeholder=\\\"query expression\\\" data-min-length=0 data-items=100 ng-model-onblur ng-change=ctrl.panelCtrl.refresh()></textarea>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\" ng-click=\\\"ctrl.showHelp = !ctrl.showHelp\\\">\\r\\n        Show Help\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showHelp></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showHelp></i>\\r\\n      </label>\\r\\n\\t\\t</div>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show=ctrl.showHelp>\\r\\n\\t\\t<pre class=\\\"gf-form-pre alert alert-info\\\"><h6>Annotation Query Format</h6>\\r\\nAn annotation is an event that is overlaid on top of graphs. The query can have up to three columns per row, the <i>time</i> or <i>time_sec</i> column is mandatory. Annotation rendering is expensive so it is important to limit the number of rows returned.\\r\\n\\r\\n- column with alias: <b>time</b> or <i>time_sec</i> for the annotation event time. Use epoch time or any native date data type.\\r\\n- column with alias: <b>text</b> for the annotation text\\r\\n- column with alias: <b>tags</b> for annotation tags. This is a comma separated string of tags e.g. 'tag1,tag2'\\r\\n\\r\\n\\r\\nMacros:\\r\\n- $__time(column) -&gt; UNIX_TIMESTAMP(column) as time (or as time_sec)\\r\\n- $__timeEpoch(column) -&gt; UNIX_TIMESTAMP(column) as time (or as time_sec)\\r\\n- $__timeFilter(column) -&gt; column BETWEEN '2017-04-21T05:01:17Z' AND '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFilter(column) -&gt;  time_unix_epoch &gt; 1492750877 AND time_unix_epoch &lt; 1492750877\\r\\n\\r\\nOr build your own conditionals using these macros which just return the values:\\r\\n- $__timeFrom() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__timeTo() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFrom() -&gt;  1492750877\\r\\n- $__unixEpochTo() -&gt;  1492750877\\r\\n\\t\\t</pre>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/mysql/partials/config.html';\nvar html = \"\\r\\n<h3 class=page-heading>MySQL Connection</h3>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Host</span>\\r\\n\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.url placeholder=localhost:3306 bs-typeahead=\\\"{{['localhost:3306', 'localhost:3307']}}\\\" required>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Database</span>\\r\\n\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.database placeholder=\\\"database name\\\" required>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">User</span>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.user placeholder=user>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Password</span>\\r\\n\\t\\t\\t<input type=password class=gf-form-input ng-model=ctrl.current.password placeholder=password>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<b>Connection limits</b>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Max open</span>\\r\\n\\t\\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxOpenConns placeholder=unlimited>\\r\\n\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\tThe maximum number of open connections to the database. If <i>Max idle connections</i> is greater than 0 and the\\r\\n\\t\\t\\t<i>Max open connections</i> is less than <i>Max idle connections</i>, then <i>Max idle connections</i> will be\\r\\n\\t\\t\\treduced to match the <i>Max open connections</i> limit. If set to 0, there is no limit on the number of open\\r\\n\\t\\t\\tconnections.\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Max idle</span>\\r\\n\\t\\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxIdleConns placeholder=2>\\r\\n\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\tThe maximum number of connections in the idle connection pool. If <i>Max open connections</i> is greater than 0 but\\r\\n\\t\\t\\tless than the <i>Max idle connections</i>, then the <i>Max idle connections</i> will be reduced to match the\\r\\n\\t\\t\\t<i>Max open connections</i> limit. If set to 0, no idle connections are retained.\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Max lifetime</span>\\r\\n\\t\\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.connMaxLifetime placeholder=14400>\\r\\n\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\tThe maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.<br/><br/>\\r\\n\\t\\t\\tThis should always be lower than configured <a href=https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_wait_timeout target=_blank>wait_timeout</a> in MySQL.\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<h3 class=page-heading>MySQL details</h3>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">Min time interval</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input width-6\\\" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=1m>\\r\\n\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\\r\\n\\t\\t\\t\\tfor example <code>1m</code> if your data is written every minute.\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=grafana-info-box>\\r\\n\\t\\t<h5>User Permission</h5>\\r\\n\\t\\t<p>\\r\\n\\t\\t\\tThe database user should only be granted SELECT permissions on the specified database &amp; tables you want to query.\\r\\n\\t\\t\\tGrafana does not validate that queries are safe so queries can contain any SQL statement. For example, statements\\r\\n\\t\\t\\tlike <code>USE otherdb;</code> and <code>DROP TABLE user;</code> would be executed. To protect against this we\\r\\n\\t\\t\\t<strong>Highly</strong> recommmend you create a specific MySQL user with restricted permissions.\\r\\n\\r\\n\\t\\t\\tCheckout the <a class=external-link target=_blank href=http://docs.grafana.org/features/datasources/mysql/ >MySQL Data Source Docs</a> for more information.\\r\\n\\t\\t</p>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/mysql/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl can-collapse=false>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<code-editor content=ctrl.target.rawSql datasource=ctrl.datasource on-change=ctrl.panelCtrl.refresh() data-mode=sql>\\r\\n\\t\\t\\t</code-editor>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Format as</label>\\r\\n\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t<select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.target.format ng-options=\\\"f.value as f.text for f in ctrl.formats\\\" ng-change=ctrl.refresh()></select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\" ng-click=\\\"ctrl.showHelp = !ctrl.showHelp\\\">\\r\\n        Show Help\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showHelp></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showHelp></i>\\r\\n      </label>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-show=ctrl.lastQueryMeta>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\" ng-click=\\\"ctrl.showLastQuerySQL = !ctrl.showLastQuerySQL\\\">\\r\\n        Generated SQL\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showLastQuerySQL></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showLastQuerySQL></i>\\r\\n      </label>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form ng-show=ctrl.showLastQuerySQL>\\r\\n\\t\\t<pre class=gf-form-pre>{{ctrl.lastQueryMeta.sql}}</pre>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form ng-show=ctrl.showHelp>\\r\\n\\t\\t<pre class=\\\"gf-form-pre alert alert-info\\\">Time series:\\r\\n- return column named time or time_sec (in UTC), as a unix time stamp or any sql native date data type. You can use the macros below.\\r\\n- return column(s) with numeric datatype as values\\r\\nOptional:\\r\\n  - return column named <i>metric</i> to represent the series name.\\r\\n  - If multiple value columns are returned the metric column is used as prefix.\\r\\n  - If no column named metric is found the column name of the value column is used as series name\\r\\n\\r\\nResultsets of time series queries need to be sorted by time.\\r\\n\\r\\nTable:\\r\\n- return any set of columns\\r\\n\\r\\nMacros:\\r\\n- $__time(column) -&gt; UNIX_TIMESTAMP(column) as time_sec\\r\\n- $__timeEpoch(column) -&gt; UNIX_TIMESTAMP(column) as time_sec\\r\\n- $__timeFilter(column) -&gt; column BETWEEN '2017-04-21T05:01:17Z' AND '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFilter(column) -&gt;  time_unix_epoch &gt; 1492750877 AND time_unix_epoch &lt; 1492750877\\r\\n- $__timeGroup(column,'5m'[, fillvalue]) -&gt; cast(cast(UNIX_TIMESTAMP(column)/(300) as signed)*300 as signed)\\r\\n     by setting fillvalue grafana will fill in missing values according to the interval\\r\\n     fillvalue can be either a literal value, NULL or previous; previous will fill in the previous seen value or NULL if none has been seen yet\\r\\n- $__timeGroupAlias(column,'5m') -&gt; cast(cast(UNIX_TIMESTAMP(column)/(300) as signed)*300 as signed) AS \\\"time\\\"\\r\\n- $__unixEpochGroup(column,'5m') -&gt; column DIV 300 * 300\\r\\n- $__unixEpochGroupAlias(column,'5m') -&gt; column DIV 300 * 300 AS \\\"time\\\"\\r\\n\\r\\nExample of group by and order by with $__timeGroup:\\r\\nSELECT\\r\\n  $__timeGroup(timestamp_col, '1h') AS time,\\r\\n  sum(value_double) as value\\r\\nFROM yourtable\\r\\nGROUP BY 1\\r\\nORDER BY 1\\r\\n\\r\\nOr build your own conditionals using these macros which just return the values:\\r\\n- $__timeFrom() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__timeTo() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFrom() -&gt;  1492750877\\r\\n- $__unixEpochTo() -&gt;  1492750877\\r\\n\\t\\t</pre>\\r\\n\\t</div>\\r\\n\\r\\n\\t\\r\\n\\r\\n\\t<div class=gf-form ng-show=ctrl.lastQueryError>\\r\\n\\t\\t<pre class=\\\"gf-form-pre alert alert-error\\\">{{ctrl.lastQueryError}}</pre>\\r\\n\\t</div>\\r\\n\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/opentsdb/partials/annotations.editor.html';\nvar html = \"<div class=gf-form-group>\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label width-13\\\">OpenTSDB metrics query</span>\\r\\n    <input type=text class=gf-form-input ng-model=ctrl.annotation.target placeholder=events.eventname>\\r\\n  </div>\\r\\n  <gf-form-switch class=gf-form label=\\\"Show Global Annotations?\\\" checked=ctrl.annotation.isGlobal switch-class=max-width-6 label-class=width-13></gf-form-switch>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/opentsdb/partials/config.html';\nvar html = \"<datasource-http-settings current=ctrl.current suggest-url=http://localhost:4242></datasource-http-settings>\\r\\n\\r\\n<h5>OpenTSDB settings</h5>\\r\\n<div class=gf-form>\\r\\n  <span class=\\\"gf-form-label width-7\\\">\\r\\n    Version\\r\\n  </span>\\r\\n  <span class=gf-form-select-wrapper>\\r\\n    <select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.current.jsonData.tsdbVersion ng-options=\\\"v.value as v.name for v in ctrl.tsdbVersions\\\"></select>\\r\\n  </span>\\r\\n</div>\\r\\n<div class=gf-form>\\r\\n  <span class=\\\"gf-form-label width-7\\\">\\r\\n    Resolution\\r\\n  </span>\\r\\n  <span class=gf-form-select-wrapper>\\r\\n    <select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.current.jsonData.tsdbResolution ng-options=\\\"v.value as v.name for v in ctrl.tsdbResolutions\\\"></select>\\r\\n  </span>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/opentsdb/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl can-collapse=false>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form max-width-25\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-8\\\">\\r\\n\\t\\t\\t\\tMetric\\r\\n\\t\\t\\t\\t<label class=gf-form-label bs-tooltip=ctrl.errors.metric style=color:#e5bd1c ng-show=ctrl.errors.metric>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-warning\\\"></i>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.target.metric spellcheck=false bs-typeahead=ctrl.suggestMetrics placeholder=\\\"metric name\\\" data-min-length=0 data-items=100 ng-blur=ctrl.targetBlur()>\\r\\n\\t\\t\\t\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">\\r\\n\\t\\t\\t\\tAggregator\\r\\n\\t\\t\\t\\t<a bs-tooltip=ctrl.errors.aggregator style=color:#e5bd1c ng-show=ctrl.errors.aggregator>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-warning\\\"></i>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-15\\\">\\r\\n\\t\\t\\t\\t<select ng-model=ctrl.target.aggregator class=gf-form-input ng-options=\\\"agg for agg in ctrl.aggregators\\\" ng-change=ctrl.targetBlur()>\\r\\n\\t\\t \\t </select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"gf-form max-width-20\\\">\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-6\\\">\\r\\n\\t\\t\\t\\t\\tAlias:\\r\\n\\t\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\t\\tUse patterns like $tag_tagname to replace part of the alias for a tag value\\r\\n\\t\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.target.alias spellcheck=false placeholder=\\\"series alias\\\" data-min-length=0 data-items=100 ng-blur=ctrl.targetBlur()>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form max-width-25\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-8\\\">Down sample</label>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.target.downsampleInterval ng-model-onblur ng-change=ctrl.targetBlur() placeholder=interval>\\r\\n\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\tblank for auto, or for example <code>1m</code>\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Aggregator</label>\\r\\n\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t<select ng-model=ctrl.target.downsampleAggregator class=gf-form-input ng-options=\\\"agg for agg in ctrl.aggregators\\\" ng-change=ctrl.targetBlur()>\\r\\n\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form ng-if=\\\"ctrl.tsdbVersion >= 2\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-6\\\">Fill</label>\\r\\n\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t<select ng-model=ctrl.target.downsampleFillPolicy class=gf-form-input ng-options=\\\"agg for agg in ctrl.fillPolicies\\\" ng-change=ctrl.targetBlur()>\\r\\n\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<gf-form-switch class=gf-form label=\\\"Disable downsampling\\\" label-class=query-keyword checked=ctrl.target.disableDownsampling on-change=ctrl.targetBlur()>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline ng-if=\\\"ctrl.tsdbVersion >= 2\\\">\\r\\n\\t\\t<div class=gf-form>\\r\\n\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-8\\\">\\r\\n\\t\\t\\t\\tFilters\\r\\n\\t\\t\\t\\t<info-popover mode=right-normal>\\r\\n\\t\\t\\t\\t\\tFilters does not work with tags, either of the two will work but not both.\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</label>\\r\\n\\r\\n\\t\\t\\t<div ng-repeat=\\\"fil in ctrl.target.filters track by $index\\\" class=gf-form-label>\\r\\n\\t\\t\\t\\t{{fil.tagk}}&nbsp;=&nbsp;{{fil.type}}&#40;{{fil.filter}}&#41;&nbsp;&#44&nbsp;groupBy&nbsp;=&nbsp;{{fil.groupBy}}\\r\\n\\t\\t\\t\\t<a ng-click=\\\"ctrl.editFilter(fil, $index)\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-pencil\\\"></i>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.removeFilter($index)>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\" ng-hide=ctrl.addFilterMode>\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.addFilter()>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-plus\\\"></i>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</label>\\r\\n \\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline ng-show=ctrl.addFilterMode>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input spellcheck=false bs-typeahead=ctrl.suggestTagKeys data-min-length=0 data-items=100 ng-model=ctrl.target.currentFilterKey placeholder=key>\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Type</label>\\r\\n\\t\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t\\t<select ng-model=ctrl.target.currentFilterType class=gf-form-input ng-options=\\\"filType for filType in ctrl.filterTypes\\\">\\r\\n\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<input type=text class=gf-form-input spellcheck=false bs-typeahead=ctrl.suggestTagValues data-min-length=0 data-items=100 ng-model=ctrl.target.currentFilterValue placeholder=filter>\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n      <gf-form-switch class=gf-form label=\\\"Group by\\\" label-class=query-keyword checked=ctrl.target.currentFilterGroupBy on-change=ctrl.targetBlur()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form ng-show=ctrl.addFilterMode>\\r\\n\\t\\t\\t\\t<label class=gf-form-label ng-show=ctrl.errors.filters>\\r\\n\\t\\t\\t\\t\\t<a bs-tooltip=ctrl.errors.filters style=color:#e5bd1c>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-warning\\\"></i>\\r\\n\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t\\t\\t<a ng-click=ctrl.addFilter() ng-hide=ctrl.errors.filters>add filter</a>\\r\\n\\t\\t\\t\\t\\t<a ng-click=ctrl.closeAddFilterMode()>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-8\\\">\\r\\n\\t\\t\\t\\tTags\\r\\n\\t\\t\\t\\t<info-popover mode=right-normal ng-if=\\\"ctrl.tsdbVersion >= 2\\\">\\r\\n\\t\\t\\t\\t\\tPlease use filters, tags are deprecated in opentsdb 2.2\\r\\n\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form ng-repeat=\\\"(key, value) in ctrl.target.tags track by $index\\\" class=gf-form>\\r\\n\\t\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t\\t{{key}}&nbsp;=&nbsp;{{value}}\\r\\n\\t\\t\\t\\t<a ng-click=\\\"ctrl.editTag(key, value)\\\">\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-pencil\\\"></i>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.removeTag(key)>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form ng-hide=ctrl.addTagMode>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.addTag()><i class=\\\"fa fa-plus\\\"></i></a>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form ng-show=ctrl.addTagMode>\\r\\n\\t\\t\\t<input type=text class=gf-form-input spellcheck=false bs-typeahead=ctrl.suggestTagKeys data-min-length=0 data-items=100 ng-model=ctrl.target.currentTagKey placeholder=key>\\r\\n\\t\\t\\t\\r\\n\\r\\n\\t\\t\\t<input type=text class=gf-form-input spellcheck=false bs-typeahead=ctrl.suggestTagValues data-min-length=0 data-items=100 ng-model=ctrl.target.currentTagValue placeholder=value>\\r\\n\\t\\t\\t\\r\\n\\r\\n\\t\\t\\t<label class=gf-form-label ng-show=ctrl.errors.tags>\\r\\n\\t\\t\\t\\t<a bs-tooltip=ctrl.errors.tags style=color:#e5bd1c>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"fa fa-warning\\\"></i>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.addTag() ng-hide=ctrl.errors.tags>add tag</a>\\r\\n\\t\\t\\t\\t<a ng-click=ctrl.closeAddTagMode()><i class=\\\"fa fa-remove\\\"></i></a>\\r\\n\\t\\t\\t</label>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<gf-form-switch class=gf-form label=Rate label-class=\\\"width-8 query-keyword\\\" checked=ctrl.target.shouldComputeRate on-change=ctrl.targetBlur()>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\r\\n\\t\\t<gf-form-switch ng-hide=!ctrl.target.shouldComputeRate class=gf-form label=Counter label-class=query-keyword checked=ctrl.target.isCounter on-change=ctrl.targetBlur()>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\r\\n\\r\\n\\t\\t<div class=gf-form ng-hide=\\\"!ctrl.target.isCounter || !ctrl.target.shouldComputeRate\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Counter Max</label>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-disabled=!ctrl.target.shouldComputeRate ng-model=ctrl.target.counterMax spellcheck=false placeholder=\\\"max value\\\" ng-model-onblur ng-blur=ctrl.targetBlur()>\\r\\n\\t\\t\\t\\r\\n\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Reset Value</label>\\r\\n\\t\\t\\t<input type=text class=\\\"tight-form-input input-small\\\" ng-disabled=!ctrl.target.shouldComputeRate ng-model=ctrl.target.counterResetValue spellcheck=false placeholder=\\\"reset value\\\" ng-model-onblur ng-blur=ctrl.targetBlur()>\\r\\n\\t\\t\\t\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form ng-if=\\\"ctrl.tsdbVersion > 2\\\">\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=\\\"Explicit tags\\\" label-class=\\\"width-8 query-keyword\\\" checked=ctrl.target.explicitTags on-change=ctrl.targetBlur()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</query-editor-row>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/postgres/partials/annotations.editor.html';\nvar html = \"\\r\\n<div class=gf-form-group>\\r\\n  <div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<textarea rows=10 class=gf-form-input ng-model=ctrl.annotation.rawQuery spellcheck=false placeholder=\\\"query expression\\\" data-min-length=0 data-items=100 ng-model-onblur ng-change=ctrl.panelCtrl.refresh()></textarea>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\" ng-click=\\\"ctrl.showHelp = !ctrl.showHelp\\\">\\r\\n        Show Help\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showHelp></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showHelp></i>\\r\\n      </label>\\r\\n\\t\\t</div>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show=ctrl.showHelp>\\r\\n\\t\\t<pre class=\\\"gf-form-pre alert alert-info\\\"><h6>Annotation Query Format</h6>\\r\\nAn annotation is an event that is overlaid on top of graphs. The query can have up to three columns per row, the time column is mandatory. Annotation rendering is expensive so it is important to limit the number of rows returned.\\r\\n\\r\\n- column with alias: <b>time</b> for the annotation event time. Use epoch time or any native date data type.\\r\\n- column with alias: <b>text</b> for the annotation text\\r\\n- column with alias: <b>tags</b> for annotation tags. This is a comma separated string of tags e.g. 'tag1,tag2'\\r\\n\\r\\n\\r\\nMacros:\\r\\n- $__time(column) -&gt; column as \\\"time\\\"\\r\\n- $__timeEpoch -&gt; extract(epoch from column) as \\\"time\\\"\\r\\n- $__timeFilter(column) -&gt; column BETWEEN '2017-04-21T05:01:17Z' AND '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFilter(column) -&gt;  column &gt;= 1492750877 AND column &lt;= 1492750877\\r\\n\\r\\nOr build your own conditionals using these macros which just return the values:\\r\\n- $__timeFrom() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__timeTo() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFrom() -&gt;  1492750877\\r\\n- $__unixEpochTo() -&gt;  1492750877\\r\\n\\t\\t</pre>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/postgres/partials/config.html';\nvar html = \"\\r\\n<h3 class=page-heading>PostgreSQL Connection</h3>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Host</span>\\r\\n\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.url placeholder=localhost:5432 bs-typeahead=\\\"{{['localhost:5432', 'localhost:5433']}}\\\" required>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"gf-form max-width-30\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Database</span>\\r\\n\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.database placeholder=\\\"database name\\\" required>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">User</span>\\r\\n\\t\\t\\t<input type=text class=gf-form-input ng-model=ctrl.current.user placeholder=user>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form max-width-15\\\" ng-if=!ctrl.current.secureJsonFields.password>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-7\\\">Password</span>\\r\\n\\t\\t\\t<input type=password class=gf-form-input ng-model=ctrl.current.secureJsonData.password placeholder=password>\\r\\n    </div>\\r\\n    <div class=\\\"gf-form max-width-19\\\" ng-if=ctrl.current.secureJsonFields.password>\\r\\n      <span class=\\\"gf-form-label width-7\\\">Password</span>\\r\\n      <input type=text class=gf-form-input disabled=disabled value=configured>\\r\\n      <a class=\\\"btn btn-secondary gf-form-btn\\\" href=# ng-click=\\\"ctrl.current.secureJsonFields.password = false\\\">reset</a>\\r\\n    </div>\\r\\n\\t</div>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<label class=\\\"gf-form-label width-7\\\">SSL Mode</label>\\r\\n\\t\\t<div class=\\\"gf-form-select-wrapper max-width-15 gf-form-select-wrapper--has-help-icon\\\">\\r\\n\\t\\t\\t<select class=gf-form-input ng-model=ctrl.current.jsonData.sslmode ng-options=\\\"mode for mode in ['disable', 'require', 'verify-ca', 'verify-full']\\\" ng-init=ctrl.current.jsonData.sslmode></select>\\r\\n\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\tThis option determines whether or with what priority a secure SSL TCP/IP connection will be negotiated with the server.\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<b>Connection limits</b>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Max open</span>\\r\\n\\t\\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxOpenConns placeholder=unlimited>\\r\\n\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\tThe maximum number of open connections to the database. If <i>Max idle connections</i> is greater than 0 and the\\r\\n\\t\\t\\t<i>Max open connections</i> is less than <i>Max idle connections</i>, then <i>Max idle connections</i> will be\\r\\n\\t\\t\\treduced to match the <i>Max open connections</i> limit. If set to 0, there is no limit on the number of open\\r\\n\\t\\t\\tconnections.\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Max idle</span>\\r\\n\\t\\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxIdleConns placeholder=2>\\r\\n\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\tThe maximum number of connections in the idle connection pool. If <i>Max open connections</i> is greater than 0 but\\r\\n\\t\\t\\tless than the <i>Max idle connections</i>, then the <i>Max idle connections</i> will be reduced to match the\\r\\n\\t\\t\\t<i>Max open connections</i> limit. If set to 0, no idle connections are retained.\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"gf-form max-width-15\\\">\\r\\n\\t\\t<span class=\\\"gf-form-label width-7\\\">Max lifetime</span>\\r\\n\\t\\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.connMaxLifetime placeholder=14400>\\r\\n\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\tThe maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.\\r\\n\\t\\t</info-popover>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<h3 class=page-heading>PostgreSQL details</h3>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<span class=\\\"gf-form-label width-9\\\">\\r\\n\\t\\t\\tVersion\\r\\n\\t\\t\\t<info-popover mode=right-normal position=\\\"top center\\\">\\r\\n\\t\\t\\t\\tThis option controls what functions are available in the PostgreSQL query builder.\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</span>\\r\\n\\t\\t<span class=gf-form-select-wrapper>\\r\\n\\t\\t\\t<select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.current.jsonData.postgresVersion ng-options=\\\"f.value as f.name for f in ctrl.postgresVersions\\\"></select>\\r\\n\\t\\t</span>\\r\\n\\t</div>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<gf-form-switch class=gf-form label=TimescaleDB label-class=width-9 checked=ctrl.current.jsonData.timescaledb switch-class=max-width-6></gf-form-switch>\\r\\n    <label class=\\\"gf-form-label query-keyword pointer\\\" ng-click=ctrl.toggleTimescaleDBHelp()>\\r\\n      Help&nbsp;\\r\\n      <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showTimescaleDBHelp></i>\\r\\n      <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showTimescaleDBHelp>&nbsp;</i>\\r\\n    </label>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-9\\\">Min time interval</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input width-6\\\" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=1m>\\r\\n\\t\\t\\t<info-popover mode=right-absolute>\\r\\n\\t\\t\\t\\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\\r\\n\\t\\t\\t\\tfor example <code>1m</code> if your data is written every minute.\\r\\n\\t\\t\\t</info-popover>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n<div class=\\\"grafana-info-box alert alert-info\\\" ng-show=ctrl.showTimescaleDBHelp>\\r\\n  <div class=alert-body>\\r\\n    <p>\\r\\n\\t\\t\\t<a href=https://github.com/timescale/timescaledb class=pointer target=_blank>TimescaleDB</a> is a time-series database built as a PostgreSQL extension. If enabled, Grafana will use <code>time_bucket</code> in the <code>$__timeGroup</code> macro and display TimescaleDB specific aggregate functions in the query builder.\\r\\n    </p>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n</div>\\r\\n\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<div class=grafana-info-box>\\r\\n\\t\\t<h5>User Permission</h5>\\r\\n\\t\\t<p>\\r\\n\\t\\t\\tThe database user should only be granted SELECT permissions on the specified database &amp; tables you want to query.\\r\\n\\t\\t\\tGrafana does not validate that queries are safe so queries can contain any SQL statement. For example, statements\\r\\n\\t\\t\\tlike <code>DELETE FROM user;</code> and <code>DROP TABLE user;</code> would be executed. To protect against this we\\r\\n\\t\\t\\t<strong>Highly</strong> recommmend you create a specific PostgreSQL user with restricted permissions.\\r\\n\\t\\t</p>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/postgres/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl has-text-edit-mode=true>\\r\\n\\r\\n  <div ng-if=ctrl.target.rawQuery>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <code-editor content=ctrl.target.rawSql datasource=ctrl.datasource on-change=ctrl.panelCtrl.refresh() data-mode=sql>\\r\\n        </code-editor>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div ng-if=!ctrl.target.rawQuery>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label query-keyword width-6\\\">FROM</label>\\r\\n        <metric-segment segment=ctrl.tableSegment get-options=ctrl.getTableSegments() on-change=ctrl.tableChanged()></metric-segment>\\r\\n\\r\\n        <label class=\\\"gf-form-label query-keyword width-7\\\">Time column</label>\\r\\n        <metric-segment segment=ctrl.timeColumnSegment get-options=ctrl.getTimeColumnSegments() on-change=ctrl.timeColumnChanged()></metric-segment>\\r\\n\\r\\n        <label class=\\\"gf-form-label query-keyword width-9\\\">\\r\\n          Metric column\\r\\n          <info-popover mode=right-normal>Column to be used as metric name for the value column.</info-popover>\\r\\n        </label>\\r\\n        <metric-segment segment=ctrl.metricColumnSegment get-options=ctrl.getMetricColumnSegments() on-change=ctrl.metricColumnChanged()></metric-segment>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-inline ng-repeat=\\\"selectParts in ctrl.selectParts\\\">\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label query-keyword width-6\\\">\\r\\n          <span ng-show=\\\"$index === 0\\\">SELECT</span>&nbsp;\\r\\n        </label>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form ng-repeat=\\\"part in selectParts\\\">\\r\\n        <sql-part-editor class=\\\"gf-form-label sql-part\\\" part=part handle-event=\\\"ctrl.handleSelectPartEvent(selectParts, part, $event)\\\">\\r\\n        </sql-part-editor>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form>\\r\\n        <label class=dropdown dropdown-typeahead=ctrl.selectMenu dropdown-typeahead-on-select=\\\"ctrl.addSelectPart(selectParts, $item, $subItem)\\\">\\r\\n        </label>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label query-keyword width-6\\\">WHERE</label>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form ng-repeat=\\\"part in ctrl.whereParts\\\">\\r\\n        <sql-part-editor class=\\\"gf-form-label sql-part\\\" part=part handle-event=\\\"ctrl.handleWherePartEvent(ctrl.whereParts, part, $event, $index)\\\">\\r\\n        </sql-part-editor>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form>\\r\\n        <metric-segment segment=ctrl.whereAdd get-options=ctrl.getWhereOptions() on-change=\\\"ctrl.addWhereAction(part, $index)\\\"></metric-segment>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label query-keyword width-6\\\">\\r\\n          <span>GROUP BY</span>\\r\\n        </label>\\r\\n\\r\\n        <sql-part-editor ng-repeat=\\\"part in ctrl.groupParts\\\" part=part class=\\\"gf-form-label sql-part\\\" handle-event=\\\"ctrl.handleGroupPartEvent(part, $index, $event)\\\">\\r\\n        </sql-part-editor>\\r\\n      </div>\\r\\n\\r\\n      <div class=gf-form>\\r\\n        <metric-segment segment=ctrl.groupAdd get-options=ctrl.getGroupOptions() on-change=\\\"ctrl.addGroupAction(part, $index)\\\"></metric-segment>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"gf-form gf-form--grow\\\">\\r\\n        <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\">Format as</label>\\r\\n      <div class=gf-form-select-wrapper>\\r\\n        <select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.target.format ng-options=\\\"f.value as f.text for f in ctrl.formats\\\" ng-change=ctrl.refresh()></select>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label query-keyword pointer\\\" ng-click=ctrl.toggleEditorMode() ng-show=\\\"ctrl.panelCtrl.panel.type !== 'table'\\\">\\r\\n        <span ng-show=ctrl.target.rawQuery>Query Builder</span>\\r\\n        <span ng-hide=ctrl.target.rawQuery>Edit SQL</span>\\r\\n      </label>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label query-keyword pointer\\\" ng-click=\\\"ctrl.showHelp = !ctrl.showHelp\\\">\\r\\n        Show Help\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showHelp></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showHelp></i>\\r\\n      </label>\\r\\n    </div>\\r\\n    <div class=gf-form ng-show=ctrl.lastQueryMeta>\\r\\n      <label class=\\\"gf-form-label query-keyword pointer\\\" ng-click=\\\"ctrl.showLastQuerySQL = !ctrl.showLastQuerySQL\\\">\\r\\n        Generated SQL\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showLastQuerySQL></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showLastQuerySQL></i>\\r\\n      </label>\\r\\n    </div>\\r\\n    <div class=\\\"gf-form gf-form--grow\\\">\\r\\n      <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show=ctrl.showLastQuerySQL>\\r\\n    <pre class=gf-form-pre>{{ctrl.lastQueryMeta.sql}}</pre>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show=ctrl.showHelp>\\r\\n    <pre class=\\\"gf-form-pre alert alert-info\\\">Time series:\\r\\n- return column named <i>time</i> (UTC in seconds or timestamp)\\r\\n- return column(s) with numeric datatype as values\\r\\nOptional: \\r\\n  - return column named <i>metric</i> to represent the series name. \\r\\n  - If multiple value columns are returned the metric column is used as prefix. \\r\\n  - If no column named metric is found the column name of the value column is used as series name\\r\\n\\r\\nResultsets of time series queries need to be sorted by time.\\r\\n\\r\\nTable:\\r\\n- return any set of columns\\r\\n\\r\\nMacros:\\r\\n- $__time(column) -&gt; column as \\\"time\\\"\\r\\n- $__timeEpoch -&gt; extract(epoch from column) as \\\"time\\\"\\r\\n- $__timeFilter(column) -&gt; column BETWEEN '2017-04-21T05:01:17Z' AND '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFilter(column) -&gt;  column &gt;= 1492750877 AND column &lt;= 1492750877\\r\\n- $__timeGroup(column,'5m'[, fillvalue]) -&gt; (extract(epoch from column)/300)::bigint*300\\r\\n     by setting fillvalue grafana will fill in missing values according to the interval\\r\\n     fillvalue can be either a literal value, NULL or previous; previous will fill in the previous seen value or NULL if none has been seen yet\\r\\n- $__timeGroupAlias(column,'5m') -&gt; (extract(epoch from column)/300)::bigint*300 AS \\\"time\\\"\\r\\n- $__unixEpochGroup(column,'5m') -&gt; floor(column/300)*300\\r\\n- $__unixEpochGroupAlias(column,'5m') -&gt; floor(column/300)*300 AS \\\"time\\\"\\r\\n\\r\\nExample of group by and order by with $__timeGroup:\\r\\nSELECT\\r\\n  $__timeGroup(date_time_col, '1h'),\\r\\n  sum(value) as value\\r\\nFROM yourtable\\r\\nGROUP BY time\\r\\nORDER BY time\\r\\n\\r\\nOr build your own conditionals using these macros which just return the values:\\r\\n- $__timeFrom() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__timeTo() -&gt;  '2017-04-21T05:01:17Z'\\r\\n- $__unixEpochFrom() -&gt;  1492750877\\r\\n- $__unixEpochTo() -&gt;  1492750877\\r\\n    </pre>\\r\\n  </div>\\r\\n\\r\\n  \\r\\n\\r\\n  <div class=gf-form ng-show=ctrl.lastQueryError>\\r\\n    <pre class=\\\"gf-form-pre alert alert-error\\\">{{ctrl.lastQueryError}}</pre>\\r\\n  </div>\\r\\n\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/prometheus/partials/annotations.editor.html';\nvar html = \"<div class=gf-form-group>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<span class=\\\"gf-form-label width-10\\\">Search expression</span>\\r\\n\\t\\t<input type=text class=gf-form-input ng-model=ctrl.annotation.expr placeholder=ALERTS>\\r\\n\\t</div>\\r\\n\\t<div class=gf-form>\\r\\n\\t\\t<span class=\\\"gf-form-label width-10\\\">step</span>\\r\\n\\t\\t<input type=text class=\\\"gf-form-input max-width-6\\\" ng-model=ctrl.annotation.step placeholder=60s>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n\\t<h5 class=section-heading>Field formats</h5>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-5\\\">Title</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-9\\\" ng-model=ctrl.annotation.titleFormat placeholder=alertname>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-5\\\">Tags</span>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-9\\\" ng-model=ctrl.annotation.tagKeys placeholder=label1,label2>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<span class=\\\"gf-form-label width-5\\\">Text</span>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-9\\\" ng-model=ctrl.annotation.textFormat placeholder=instance>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<h5 class=section-heading>Other options</h5>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=\\\"Series value as timestamp\\\" label-class=width-14 checked=ctrl.annotation.useValueForTime tooltip=\\\"The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000.\\\">\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/prometheus/partials/config.html';\nvar html = \"<datasource-http-settings current=ctrl.current suggest-url=http://localhost:9090>\\r\\n</datasource-http-settings>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-8\\\">Scrape interval</span>\\r\\n      <input type=text class=\\\"gf-form-input width-8\\\" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=15s>\\r\\n      <info-popover mode=right-absolute>\\r\\n        Set this to your global scrape interval defined in your Prometheus config file. This will be used as a lower limit for the\\r\\n        Prometheus step query parameter.\\r\\n      </info-popover>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-8\\\">Query timeout</span>\\r\\n      <input type=text class=\\\"gf-form-input width-8\\\" ng-model=ctrl.current.jsonData.queryTimeout spellcheck=false placeholder=60s>\\r\\n      <info-popover mode=right-absolute>\\r\\n        Set the Prometheus query timeout.\\r\\n      </info-popover>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form>\\r\\n    <label class=\\\"gf-form-label width-8\\\">HTTP Method</label>\\r\\n    <div class=\\\"gf-form-select-wrapper width-8 gf-form-select-wrapper--has-help-icon\\\">\\r\\n      <select class=gf-form-input ng-model=ctrl.current.jsonData.httpMethod ng-options=\\\"method for method in ['GET', 'POST']\\\"></select>\\r\\n      <info-popover mode=right-absolute>\\r\\n        Specify the HTTP Method to query Prometheus. (POST is only available in Prometheus >= v2.1.0)\\r\\n      </info-popover>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/prometheus/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl can-collapse=true has-text-edit-mode=false>\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=\\\"gf-form gf-form--grow\\\">\\r\\n      <code-editor content=ctrl.target.expr datasource=ctrl.datasource on-change=ctrl.refreshMetricData() get-completer=ctrl.getCompleter() data-mode=prometheus code-editor-focus=ctrl.isLastQuery>\\r\\n      </code-editor>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=\\\"gf-form max-width-26\\\">\\r\\n      <label class=\\\"gf-form-label width-8\\\">Legend format</label>\\r\\n      <input type=text class=gf-form-input ng-model=ctrl.target.legendFormat spellcheck=false placeholder=\\\"legend format\\\" data-min-length=0 data-items=1000 ng-model-onblur ng-change=ctrl.refreshMetricData()>\\r\\n      \\r\\n      <info-popover mode=right-absolute>\\r\\n        Controls the name of the time series, using name or pattern. For example\\r\\n        <span ng-non-bindable>{{hostname}}</span> will be replaced with label value for the label hostname.\\r\\n      </info-popover>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-6\\\">Min step</label>\\r\\n      <input type=text class=\\\"gf-form-input width-8\\\" ng-model=ctrl.target.interval data-placement=right spellcheck=false placeholder={{ctrl.panelCtrl.interval}} data-min-length=0 data-items=100 ng-model-onblur ng-change=ctrl.refreshMetricData() />\\r\\n      <info-popover mode=right-absolute>\\r\\n        Leave blank for auto handling based on time range and panel width. Note that the actual dates used in the query will be adjusted\\r\\n        to a multiple of the interval step.\\r\\n      </info-popover>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form>\\r\\n      <label class=gf-form-label>Resolution</label>\\r\\n      <div class=\\\"gf-form-select-wrapper max-width-15\\\">\\r\\n        <select ng-model=ctrl.target.intervalFactor class=gf-form-input ng-options=\\\"r.factor as r.label for r in ctrl.resolutions\\\" ng-change=ctrl.refreshMetricData()>\\r\\n        </select>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-6\\\">Format as</label>\\r\\n      <div class=\\\"gf-form-select-wrapper width-8\\\">\\r\\n        <select class=\\\"gf-form-input gf-size-auto\\\" ng-model=ctrl.target.format ng-options=\\\"f.value as f.text for f in ctrl.formats\\\" ng-change=ctrl.refresh()></select>\\r\\n      </div>\\r\\n      <gf-form-switch class=gf-form label=Instant label-class=width-5 checked=ctrl.target.instant on-change=ctrl.refresh()>\\r\\n      </gf-form-switch>\\r\\n      <label class=gf-form-label>\\r\\n        <a href={{ctrl.linkToPrometheus}} target=_blank bs-tooltip=\\\"'Link to Graph in Prometheus'\\\">\\r\\n          <i class=\\\"fa fa-share-square-o\\\"></i>\\r\\n        </a>\\r\\n      </label>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"gf-form gf-form--grow\\\">\\r\\n      <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n</query-editor-row>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/stackdriver/partials/annotations.editor.html';\nvar html = \"<stackdriver-filter target=ctrl.annotation.target refresh=ctrl.refresh() datasource=ctrl.datasource default-dropdown-value=ctrl.defaultDropdownValue default-service-value=ctrl.defaultServiceValue hide-group-bys=true></stackdriver-filter>\\r\\n\\r\\n<div class=\\\"gf-form gf-form-inline\\\">\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label query-keyword width-9\\\">Title</span>\\r\\n    <input type=text class=\\\"gf-form-input width-20\\\" ng-model=ctrl.annotation.target.title />\\r\\n  </div>\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label query-keyword width-9\\\">Text</span>\\r\\n    <input type=text class=\\\"gf-form-input width-20\\\" ng-model=ctrl.annotation.target.text />\\r\\n  </div>\\r\\n  <div class=\\\"gf-form gf-form--grow\\\">\\r\\n    <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"gf-form grafana-info-box\\\" style=padding:0>\\r\\n  <pre class=\\\"gf-form-pre alert alert-info\\\" style=margin-right:0><h5>Annotation Query Format</h5>\\r\\nAn annotation is an event that is overlaid on top of graphs. Annotation rendering is expensive so it is important to limit the number of rows returned.\\r\\n\\r\\nThe Title and Text fields support templating and can use data returned from the query. For example, the Title field could have the following text:\\r\\n\\r\\n<code ng-non-bindable>{{metric.type}} has value: {{metric.value}}</code>\\r\\n\\r\\nExample Result: <code ng-non-bindable>monitoring.googleapis.com/uptime_check/http_status has this value: 502</code>\\r\\n\\r\\n<label>Patterns:</label>\\r\\n<code ng-non-bindable>{{metric.value}}</code> = value of the metric/point\\r\\n<code ng-non-bindable>{{metric.type}}</code> = metric type e.g. compute.googleapis.com/instance/cpu/usage_time\\r\\n<code ng-non-bindable>{{metric.name}}</code> = name part of metric e.g. instance/cpu/usage_time\\r\\n<code ng-non-bindable>{{metric.service}}</code> = service part of metric e.g. compute\\r\\n\\r\\n<code ng-non-bindable>{{metric.label.label_name}}</code> = Metric label metadata e.g. metric.label.instance_name\\r\\n<code ng-non-bindable>{{resource.label.label_name}}</code> = Resource label metadata e.g. resource.label.zone\\r\\n</pre>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/stackdriver/partials/config.html';\nvar html = \"<div class=gf-form-group>\\r\\n  <div class=grafana-info-box>\\r\\n    <h5>GCP Service Account</h5>\\r\\n    <p>\\r\\n      To authenticate with the Stackdriver API, you need to create a Google Cloud Platform (GCP) Service Account for\\r\\n      the Project you want to show data for. A Grafana datasource integrates with one GCP Project. If you want to\\r\\n      visualize data from multiple GCP Projects then you need to create one datasource per GCP Project.\\r\\n    </p>\\r\\n    <p>\\r\\n      The <strong>Monitoring Viewer</strong> role provides all the permissions that Grafana needs.\\r\\n    </p>\\r\\n    <p>\\r\\n      The following APIs need to be enabled on GCP for the datasource to work:\\r\\n      </p><ul>\\r\\n        <li><a class=external-link target=_blank href=https://console.cloud.google.com/apis/library/monitoring.googleapis.com>Monitoring\\r\\n            API</a></li>\\r\\n        <li><a class=external-link target=_blank href=https://console.cloud.google.com/apis/library/cloudresourcemanager.googleapis.com>Resource\\r\\n            Manager API</a></li>\\r\\n      </ul>\\r\\n    <p></p>\\r\\n    <p>Detailed instructions on how to create a Service Account can be found <a class=external-link target=_blank href=http://docs.grafana.org/datasources/stackdriver/ >in\\r\\n        the documentation.</a></p>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group>\\r\\n  <div class=gf-form>\\r\\n    <h3>Service Account Authentication</h3>\\r\\n    <info-popover mode=header>Upload your Service Account key file or paste in the contents of the file. The file\\r\\n      contents will be encrypted and saved in the Grafana database.</info-popover>\\r\\n  </div>\\r\\n\\r\\n  <div ng-if=\\\"!ctrl.current.jsonData.clientEmail && !ctrl.inputDataValid\\\">\\r\\n    <div class=gf-form-group ng-if=!ctrl.inputDataValid>\\r\\n      <div class=gf-form>\\r\\n        <form>\\r\\n          <dash-upload on-upload=ctrl.onUpload(dash) btn-text=\\\"Upload Service Account key file\\\"></dash-upload>\\r\\n        </form>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=gf-form-group>\\r\\n      <h5 class=section-heading ng-if=!ctrl.inputDataValid>Or paste Service Account key JSON</h5>\\r\\n      <div class=gf-form ng-if=!ctrl.inputDataValid>\\r\\n        <textarea rows=10 data-share-panel-url=\\\"\\\" class=gf-form-input ng-model=ctrl.jsonText ng-paste=ctrl.onPasteJwt($event)></textarea>\\r\\n      </div>\\r\\n      <div ng-repeat=\\\"valError in ctrl.validationErrors\\\" class=\\\"text-error p-l-1\\\">\\r\\n        <i class=\\\"fa fa-warning\\\"></i>\\r\\n        {{valError}}\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=gf-form-group ng-if=\\\"ctrl.inputDataValid || ctrl.current.jsonData.clientEmail\\\">\\r\\n  <h6>Uploaded Key Details</h6>\\r\\n\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label width-9\\\">Project</span>\\r\\n    <input class=\\\"gf-form-input width-40\\\" disabled=disabled type=text ng-model=ctrl.current.jsonData.defaultProject />\\r\\n  </div>\\r\\n  <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-9\\\">Client Email</span>\\r\\n      <input class=\\\"gf-form-input width-40\\\" disabled=disabled type=text ng-model=ctrl.current.jsonData.clientEmail />\\r\\n    </div>\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label width-9\\\">Token URI</span>\\r\\n    <input class=\\\"gf-form-input width-40\\\" disabled=disabled type=text ng-model=ctrl.current.jsonData.tokenUri />\\r\\n  </div>\\r\\n  <div class=gf-form ng-if=ctrl.current.secureJsonFields.privateKey>\\r\\n    <span class=\\\"gf-form-label width-9\\\">Private Key</span>\\r\\n    <input type=text class=\\\"gf-form-input max-width-12\\\" disabled=disabled value=configured>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"gf-form width-18\\\">\\r\\n    <a class=\\\"btn btn-secondary gf-form-btn\\\" href=# ng-click=ctrl.resetValidationMessages()>Reset Service\\r\\n      Account Key </a>\\r\\n    <info-popover mode=right-normal>\\r\\n      Reset to clear the uploaded key and upload a new file.\\r\\n    </info-popover>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=grafana-info-box ng-hide=ctrl.current.secureJsonFields.privateKey>\\r\\n\\tDo not forget to save your changes after uploading a file.\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/stackdriver/partials/query.aggregation.html';\nvar html = \"<div class=gf-form-inline>\\r\\n  <div class=gf-form>\\r\\n    <label class=\\\"gf-form-label query-keyword width-9\\\">Aggregation</label>\\r\\n    <div class=\\\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\\\">\\r\\n      <select class=\\\"gf-form-input width-12\\\" ng-model=ctrl.target.aggregation.crossSeriesReducer ng-options=\\\"f.value as f.text for f in ctrl.aggOptions\\\" ng-change=refresh()></select>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"gf-form gf-form--grow\\\">\\r\\n    <label class=\\\"gf-form-label gf-form-label--grow\\\">\\r\\n      <a ng-click=\\\"ctrl.target.showAggregationOptions = !ctrl.target.showAggregationOptions\\\">\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.target.showAggregationOptions></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.target.showAggregationOptions></i>\\r\\n        Advanced Options\\r\\n      </a>\\r\\n    </label>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=gf-form-group ng-if=ctrl.target.showAggregationOptions>\\r\\n  <div class=\\\"gf-form offset-width-9\\\">\\r\\n    <label class=\\\"gf-form-label query-keyword width-12\\\">Aligner</label>\\r\\n    <div class=\\\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\\\">\\r\\n      <select class=\\\"gf-form-input width-14\\\" ng-model=ctrl.target.aggregation.perSeriesAligner ng-options=\\\"f.value as f.text for f in ctrl.alignOptions\\\" ng-change=refresh()></select>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"gf-form gf-form--grow\\\">\\r\\n      <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=gf-form-inline>\\r\\n  <div class=gf-form>\\r\\n    <label class=\\\"gf-form-label query-keyword width-9\\\">Alignment Period</label>\\r\\n    <div class=\\\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\\\">\\r\\n      <select class=\\\"gf-form-input width-12\\\" ng-model=ctrl.target.aggregation.alignmentPeriod ng-options=\\\"f.value as f.text for f in ctrl.alignmentPeriods\\\" ng-change=refresh()></select>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"gf-form gf-form--grow\\\">\\r\\n    <label ng-if=alignmentPeriod class=\\\"gf-form-label gf-form-label--grow\\\">\\r\\n      {{ctrl.formatAlignmentText()}}\\r\\n    </label>\\r\\n  </div>\\r\\n</div>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/stackdriver/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl has-text-edit-mode=false>\\r\\n  <stackdriver-filter target=ctrl.target refresh=ctrl.refresh() datasource=ctrl.datasource default-dropdown-value=ctrl.defaultDropdownValue default-service-value=ctrl.defaultServiceValue></stackdriver-filter>\\r\\n  <stackdriver-aggregation target=ctrl.target alignment-period=ctrl.lastQueryMeta.alignmentPeriod refresh=ctrl.refresh()></stackdriver-aggregation>\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label query-keyword width-9\\\">Alias By</span>\\r\\n      <input type=text class=\\\"gf-form-input width-30\\\" ng-model=ctrl.target.aliasBy ng-change=ctrl.refresh() ng-model-options=\\\"{ debounce: 500 }\\\"/>\\r\\n    </div>\\r\\n    <div class=\\\"gf-form gf-form--grow\\\">\\r\\n      <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=gf-form-inline>\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-9\\\">Project</span>\\r\\n      <input class=gf-form-input disabled=disabled type=text ng-model=ctrl.target.project.name get-options=ctrl.getProjects() css-class=min-width-12 />\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\" ng-click=\\\"ctrl.showHelp = !ctrl.showHelp\\\">\\r\\n        Show Help\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showHelp></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showHelp></i>\\r\\n      </label>\\r\\n    </div>\\r\\n    <div class=gf-form ng-show=ctrl.lastQueryMeta>\\r\\n      <label class=\\\"gf-form-label query-keyword\\\" ng-click=\\\"ctrl.showLastQuery = !ctrl.showLastQuery\\\">\\r\\n        Raw Query\\r\\n        <i class=\\\"fa fa-caret-down\\\" ng-show=ctrl.showLastQuery></i>\\r\\n        <i class=\\\"fa fa-caret-right\\\" ng-hide=ctrl.showLastQuery></i>\\r\\n      </label>\\r\\n    </div>\\r\\n    <div class=\\\"gf-form gf-form--grow\\\">\\r\\n      <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=gf-form ng-show=ctrl.showLastQuery>\\r\\n    <pre class=gf-form-pre>{{ctrl.lastQueryMeta.rawQueryString}}</pre>\\r\\n  </div>\\r\\n  <div class=\\\"grafana-info-box m-t-2 markdown-html\\\" ng-show=ctrl.showHelp>\\r\\n    <h5>Alias Patterns</h5>\\r\\n\\r\\n    Format the legend keys any way you want by using alias patterns.<br/> <br/>\\r\\n\\r\\n    Example: <code ng-non-bindable>{{metric.name}} - {{metric.label.instance_name}}</code><br/>\\r\\n    Result: &nbsp;&nbsp;<code ng-non-bindable>cpu/usage_time - server1-europe-west-1</code><br/><br/>\\r\\n\\r\\n    <strong>Patterns</strong><br/>\\r\\n    <ul>\\r\\n      <li>\\r\\n        <code ng-non-bindable>{{metric.type}}</code> = metric type e.g. compute.googleapis.com/instance/cpu/usage_time\\r\\n      </li>\\r\\n      <li>\\r\\n        <code ng-non-bindable>{{metric.name}}</code> = name part of metric e.g. instance/cpu/usage_time\\r\\n      </li>\\r\\n      <li>\\r\\n        <code ng-non-bindable>{{metric.service}}</code> = service part of metric e.g. compute\\r\\n      </li>\\r\\n      <li>\\r\\n        <code ng-non-bindable>{{metric.label.label_name}}</code> = Metric label metadata e.g.\\r\\n        metric.label.instance_name\\r\\n      </li>\\r\\n      <li>\\r\\n        <code ng-non-bindable>{{resource.label.label_name}}</code> = Resource label metadata e.g. resource.label.zone\\r\\n      </li>\\r\\n    </ul>\\r\\n  </div>\\r\\n  <div class=gf-form ng-show=ctrl.lastQueryError>\\r\\n    <pre class=\\\"gf-form-pre alert alert-error\\\">{{ctrl.lastQueryError}}</pre>\\r\\n  </div>\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/stackdriver/partials/query.filter.html';\nvar html = \"<div class=gf-form-inline>\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label width-9\\\">Service</span>\\r\\n    <gf-form-dropdown model=ctrl.service get-options=ctrl.services class=min-width-20 disabled=disabled type=text allow-custom=true lookup-text=true css-class=min-width-12 on-change=ctrl.onServiceChange(ctrl.service)></gf-form-dropdown>\\r\\n  </div>\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label width-9\\\">Metric</span>\\r\\n    <gf-form-dropdown model=ctrl.metricType get-options=ctrl.metrics class=min-width-20 disabled=disabled type=text allow-custom=true lookup-text=true css-class=min-width-12 on-change=ctrl.onMetricTypeChange()></gf-form-dropdown>\\r\\n  </div>\\r\\n  <div class=\\\"gf-form gf-form--grow\\\">\\r\\n    <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=gf-form-inline>\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label query-keyword width-9\\\">Filter</span>\\r\\n    <div class=gf-form ng-repeat=\\\"segment in ctrl.filterSegments.filterSegments\\\">\\r\\n      <metric-segment segment=segment get-options=\\\"ctrl.getFilters(segment, $index)\\\" on-change=\\\"ctrl.filterSegmentUpdated(segment, $index)\\\"></metric-segment>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"gf-form gf-form--grow\\\">\\r\\n    <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=gf-form-inline ng-hide=ctrl.$scope.hideGroupBys>\\r\\n  <div class=gf-form>\\r\\n    <span class=\\\"gf-form-label query-keyword width-9\\\">Group By</span>\\r\\n    <div class=gf-form ng-repeat=\\\"segment in ctrl.groupBySegments\\\">\\r\\n      <metric-segment segment=segment get-options=\\\"ctrl.getGroupBys(segment, $index)\\\" on-change=\\\"ctrl.groupByChanged(segment, $index)\\\"></metric-segment>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"gf-form gf-form--grow\\\">\\r\\n    <div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/datasource/testdata/partials/query.editor.html';\nvar html = \"<query-editor-row query-ctrl=ctrl has-text-edit-mode=false>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">Scenario</label>\\r\\n\\t\\t\\t<div class=\\\"gf-form-select-wrapper width-15\\\">\\r\\n\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.target.scenarioId ng-options=\\\"v.id as v.name for v in ctrl.scenarioList\\\" ng-change=ctrl.scenarioChanged()></select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form gf-form gf-form--grow\\\" ng-if=ctrl.scenario.stringInput>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">String Input</label>\\r\\n      <input type=text class=gf-form-input placeholder={{ctrl.scenario.stringInput}} ng-model=ctrl.target.stringInput ng-change=ctrl.refresh() ng-model-onblur>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Alias</label>\\r\\n\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-7\\\" placeholder=optional ng-model=ctrl.target.alias ng-change=ctrl.refresh() ng-model-onblur>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=gf-form-inline ng-if=\\\"ctrl.scenario.id === 'manual_entry'\\\">\\r\\n\\t\\t<div class=\\\"gf-form gf-form\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword width-7\\\">New value</label>\\r\\n      <input type=number class=\\\"gf-form-input width-15\\\" placeholder=value ng-model=ctrl.newPointValue>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">Time</label>\\r\\n      <input type=string class=\\\"gf-form-input width-12\\\" placeholder=time ng-model=ctrl.newPointTime input-datetime>\\r\\n\\t\\t\\t<button class=\\\"btn btn-secondary gf-form-btn\\\" ng-click=ctrl.addPoint()>Add</button>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label query-keyword\\\">All values</label>\\r\\n\\t\\t\\t<gf-form-dropdown css-class=width-12 model=ctrl.selectedPoint get-options=ctrl.getPoints() on-change=ctrl.pointSelected($option)>\\r\\n\\t\\t\\t</gf-form-dropdown>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form gf-form\\\" ng-if=\\\"ctrl.selectedPoint.value !== null\\\">\\r\\n\\t\\t\\t<button class=\\\"btn btn-danger gf-form-btn\\\" ng-click=ctrl.deletePoint()>Delete</button>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</query-editor-row>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/alertlist/editor.html';\nvar html = \"<div>\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Options</h5>\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-8\\\">Show</span>\\r\\n      <div class=\\\"gf-form-select-wrapper max-width-15\\\">\\r\\n        <select class=gf-form-input ng-model=ctrl.panel.show ng-options=\\\"f.value as f.text for f in ctrl.showOptions\\\" ng-change=ctrl.onRefresh()></select>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-8\\\">Max items</span>\\r\\n      <input type=text class=\\\"gf-form-input max-width-15\\\" ng-model=ctrl.panel.limit ng-change=ctrl.onRefresh() />\\r\\n    </div>\\r\\n    <div class=gf-form ng-show=\\\"ctrl.panel.show === 'current'\\\">\\r\\n      <span class=\\\"gf-form-label width-8\\\">Sort order</span>\\r\\n      <div class=\\\"gf-form-select-wrapper max-width-15\\\">\\r\\n        <select class=gf-form-input ng-model=ctrl.panel.sortOrder ng-options=\\\"f.value as f.text for f in ctrl.sortOrderOptions\\\" ng-change=ctrl.onRefresh()></select>\\r\\n      </div>\\r\\n    </div>\\r\\n    <gf-form-switch class=gf-form label=\\\"Alerts from this dashboard\\\" label-class=width-18 checked=ctrl.panel.onlyAlertsOnDashboard on-change=ctrl.updateStateFilter()></gf-form-switch>\\r\\n  </div>\\r\\n  <div class=\\\"section gf-form-group\\\" ng-show=\\\"ctrl.panel.show === 'current'\\\">\\r\\n    <h5 class=section-heading>Filter</h5>\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-8\\\">Alert name</span>\\r\\n      <input type=text class=\\\"gf-form-input max-width-15\\\" ng-model=ctrl.panel.nameFilter placeholder=\\\"Alert name query\\\" ng-change=ctrl.onRefresh() />\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-8\\\">Dashboard title</span>\\r\\n      <input type=text class=gf-form-input placeholder=\\\"Dashboard title query\\\" ng-model=ctrl.panel.dashboardFilter ng-change=ctrl.onRefresh() ng-model-onblur>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <folder-picker initial-folder-id=ctrl.panel.folderId on-change=ctrl.onFolderChange($folder) label-class=width-8 initial-title=\\\"'All'\\\" enable-reset=true>\\r\\n      </folder-picker>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n        <span class=\\\"gf-form-label width-8\\\">Dashboard tags</span>\\r\\n        <bootstrap-tagsinput ng-model=ctrl.panel.dashboardTags tagclass=\\\"label label-tag\\\" placeholder=\\\"add tags\\\" on-tags-updated=ctrl.refresh()>\\r\\n        </bootstrap-tagsinput>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"section gf-form-group\\\" ng-show=\\\"ctrl.panel.show === 'current'\\\">\\r\\n    <h5 class=section-heading>State filter</h5>\\r\\n    <gf-form-switch class=gf-form label=Ok label-class=width-10 checked=\\\"ctrl.stateFilter['ok']\\\" on-change=ctrl.updateStateFilter()></gf-form-switch>\\r\\n    <gf-form-switch class=gf-form label=Paused label-class=width-10 checked=\\\"ctrl.stateFilter['paused']\\\" on-change=ctrl.updateStateFilter()></gf-form-switch>\\r\\n    <gf-form-switch class=gf-form label=\\\"No data\\\" label-class=width-10 checked=\\\"ctrl.stateFilter['no_data']\\\" on-change=ctrl.updateStateFilter()></gf-form-switch>\\r\\n    <gf-form-switch class=gf-form label=\\\"Execution error\\\" label-class=width-10 checked=\\\"ctrl.stateFilter['execution_error']\\\" on-change=ctrl.updateStateFilter()></gf-form-switch>\\r\\n    <gf-form-switch class=gf-form label=Alerting label-class=width-10 checked=\\\"ctrl.stateFilter['alerting']\\\" on-change=ctrl.updateStateFilter()></gf-form-switch>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/alertlist/module.html';\nvar html = \"<div class=panel-alert-list>\\r\\n  <div class=panel-alert-list__no-alerts ng-show=ctrl.noAlertsMessage>\\r\\n    {{ctrl.noAlertsMessage}}\\r\\n  </div>\\r\\n\\r\\n  <section ng-if=\\\"ctrl.panel.show === 'current'\\\">\\r\\n    <ol class=alert-rule-list>\\r\\n      <li class=alert-rule-item ng-repeat=\\\"alert in ctrl.currentAlerts\\\">\\r\\n        <div class=\\\"alert-rule-item__icon {{alert.stateModel.stateClass}}\\\">\\r\\n          <i class={{alert.stateModel.iconClass}}></i>\\r\\n        </div>\\r\\n        <div class=alert-rule-item__body>\\r\\n          <div class=alert-rule-item__header>\\r\\n            <p class=alert-rule-item__name>\\r\\n              <a href=\\\"{{alert.url}}?panelId={{alert.panelId}}&fullscreen&edit&tab=alert\\\">\\r\\n                {{alert.name}}\\r\\n              </a>\\r\\n            </p>\\r\\n            <div class=alert-rule-item__text>\\r\\n              <span class={{alert.stateModel.stateClass}}>{{alert.stateModel.text}}</span>\\r\\n              <span class=alert-rule-item__time>for {{alert.newStateDateAgo}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </li>\\r\\n    </ol>\\r\\n  </section>\\r\\n\\r\\n  <section ng-if=\\\"ctrl.panel.show === 'changes'\\\">\\r\\n    <ol class=alert-rule-list>\\r\\n      <li class=alert-rule-item ng-repeat=\\\"al in ctrl.alertHistory\\\">\\r\\n        <div class=\\\"alert-rule-item__icon {{al.stateModel.stateClass}}\\\">\\r\\n          <i class={{al.stateModel.iconClass}}></i>\\r\\n        </div>\\r\\n        <div class=alert-rule-item__body>\\r\\n          <div class=alert-rule-item__header>\\r\\n            <p class=alert-rule-item__name>{{al.alertName}}</p>\\r\\n            <div class=alert-rule-item__text>\\r\\n              <span class={{al.stateModel.stateClass}}>{{al.stateModel.text}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          <span class=alert-rule-item__info>{{al.info}}</span>\\r\\n        </div>\\r\\n        <div class=alert-rule-item__time>\\r\\n          <span>{{al.time}}</span>\\r\\n        </div>\\r\\n      </li>\\r\\n    </ol>\\r\\n  </section>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/dashlist/editor.html';\nvar html = \"<div>\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Options</h5>\\r\\n\\r\\n    <gf-form-switch class=gf-form label=Starred label-class=width-9 checked=ctrl.panel.starred on-change=ctrl.refresh()></gf-form-switch>\\r\\n    <gf-form-switch class=gf-form label=\\\"Recently viewed\\\" label-class=width-9 checked=ctrl.panel.recent on-change=ctrl.refresh()></gf-form-switch>\\r\\n    <gf-form-switch class=gf-form label=Search label-class=width-9 checked=ctrl.panel.search on-change=ctrl.refresh()></gf-form-switch>\\r\\n\\r\\n    <gf-form-switch class=gf-form label=\\\"Show headings\\\" label-class=width-9 checked=ctrl.panel.headings on-change=ctrl.refresh()></gf-form-switch>\\r\\n\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-9\\\">Max items</span>\\r\\n      <input class=\\\"gf-form-input max-width-5\\\" type=number ng-model=ctrl.panel.limit ng-model-onblur ng-change=ctrl.refresh()>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Search</h5>\\r\\n\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-6\\\">Query</span>\\r\\n      <input type=text class=gf-form-input placeholder=\\\"title query\\\" ng-model=ctrl.panel.query ng-change=ctrl.refresh() ng-model-onblur>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form>\\r\\n      <folder-picker initial-folder-id=ctrl.panel.folderId on-change=ctrl.onFolderChange($folder) label-class=width-6 initial-title=\\\"'All'\\\" enable-reset=true>\\r\\n\\t\\t\\t</folder-picker>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form>\\r\\n      <span class=\\\"gf-form-label width-6\\\">Tags</span>\\r\\n      <bootstrap-tagsinput ng-model=ctrl.panel.tags tagclass=\\\"label label-tag\\\" placeholder=\\\"add tags\\\" on-tags-updated=ctrl.refresh()>\\r\\n      </bootstrap-tagsinput>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/dashlist/module.html';\nvar html = \"<div>\\r\\n  <div class=dashlist ng-repeat=\\\"group in ctrl.groups\\\">\\r\\n    <div class=dashlist-section ng-if=group.show>\\r\\n      <h6 class=dashlist-section-header ng-show=ctrl.panel.headings>\\r\\n        {{group.header}}\\r\\n      </h6>\\r\\n      <div class=dashlist-item ng-repeat=\\\"dash in group.list\\\">\\r\\n        <a class=\\\"dashlist-link dashlist-link-{{dash.type}}\\\" href={{dash.url}}>\\r\\n          <span class=dashlist-title>\\r\\n            {{dash.title}}\\r\\n          </span>\\r\\n          <span class=dashlist-star ng-click=\\\"ctrl.starDashboard(dash, $event)\\\">\\r\\n            <i class=fa ng-class=\\\"{'fa-star': dash.isStarred, 'fa-star-o': dash.isStarred === false}\\\"></i>\\r\\n          </span>\\r\\n        </a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/gettingstarted/editor.html';\nvar html = \"<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Mode</span>\\r\\n\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-10\\\">\\r\\n\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.mode ng-options=\\\"f for f in ctrl.modes\\\" ng-change=ctrl.refresh()></select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-show=\\\"ctrl.panel.mode === 'recently viewed'\\\">\\r\\n\\t\\t\\t<span class=gf-form-label>\\r\\n\\t\\t\\t\\t<i class=\\\"grafana-tip fa fa-question-circle ng-scope\\\" bs-tooltip=\\\"'WARNING: This list will be cleared when clearing browser cache'\\\" data-original-title=\\\"\\\" title=\\\"\\\"></i>\\r\\n\\t\\t\\t</span>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline ng-if=\\\"ctrl.panel.mode === 'search'\\\">\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Search options</span>\\r\\n\\t\\t\\t<span class=gf-form-label>Query</span>\\r\\n\\r\\n\\t\\t\\t<input type=text class=gf-form-input placeholder=\\\"title query\\\" ng-model=ctrl.panel.query ng-change=ctrl.refresh() ng-model-onblur>\\r\\n\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=gf-form-label>Tags</span>\\r\\n\\r\\n\\t\\t\\t<bootstrap-tagsinput ng-model=ctrl.panel.tags tagclass=\\\"label label-tag\\\" placeholder=\\\"add tags\\\" on-tags-updated=ctrl.refresh()>\\r\\n\\t\\t\\t</bootstrap-tagsinput>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Limit number to</span>\\r\\n\\t\\t\\t<input class=gf-form-input type=number ng-model=ctrl.panel.limit ng-model-onblur ng-change=ctrl.refresh()>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/gettingstarted/module.html';\nvar html = \"<div class=dashlist ng-if=ctrl.checksDone>\\r\\n  <div class=dashlist-section>\\r\\n\\t\\t<button class=dashlist-cta-close-btn ng-click=ctrl.dismiss()>\\r\\n\\t\\t\\t<i class=\\\"fa fa-remove\\\"></i>\\r\\n\\t\\t</button>\\r\\n\\t\\t<ul class=progress-tracker>\\r\\n\\t\\t\\t<li class=progress-step ng-repeat=\\\"step in ctrl.steps\\\" ng-class=step.cssClass>\\r\\n\\t\\t\\t\\t<a class=progress-link ng-href={{step.href}} target={{step.target}} title={{step.note}}>\\r\\n\\t\\t\\t\\t\\t<span class=progress-marker ng-class=step.cssClass><i class={{step.icon}}></i></span>\\r\\n\\t\\t\\t\\t\\t<span class=progress-text ng-href={{step.href}} target={{step.target}}>{{step.title}}</span>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t<a class=\\\"btn progress-step-cta\\\" ng-href={{step.href}} target={{step.target}}>{{step.cta}}</a>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t</ul>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/graph/axes_editor.html';\nvar html = \"<div class=editor-row>\\r\\n\\t<div class=\\\"section gf-form-group\\\" ng-repeat=\\\"yaxis in ctrl.panel.yaxes\\\">\\r\\n\\r\\n\\t\\t<h5 class=section-heading ng-show=\\\"$index === 0\\\">Left Y</h5>\\r\\n\\t\\t<h5 class=section-heading ng-show=\\\"$index === 1\\\">Right Y</h5>\\r\\n\\r\\n\\t\\t<gf-form-switch class=gf-form label=Show label-class=width-6 checked=yaxis.show on-change=ctrl.render()></gf-form-switch>\\r\\n\\r\\n\\t\\t<div ng-if=yaxis.show>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Unit</label>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-dropdown-typeahead max-width-20\\\" ng-model=yaxis.format dropdown-typeahead2=ctrl.unitFormats dropdown-typeahead-on-select=\\\"ctrl.setUnitFormat(yaxis, $subItem)\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Scale</label>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-20\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=yaxis.logBase ng-options=\\\"v as k for (k, v) in ctrl.logScales\\\" ng-change=ctrl.render()></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Y-Min</label>\\r\\n\\t\\t\\t\\t\\t<input type=text class=\\\"gf-form-input width-5\\\" placeholder=auto empty-to-null ng-model=yaxis.min ng-change=ctrl.render() ng-model-onblur>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Y-Max</label>\\r\\n\\t\\t\\t\\t\\t<input type=text class=\\\"gf-form-input width-5\\\" placeholder=auto empty-to-null ng-model=yaxis.max ng-change=ctrl.render() ng-model-onblur>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t<div ng-if=yaxis.show>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Decimals</label>\\r\\n\\t\\t\\t\\t<input type=number class=\\\"gf-form-input max-width-20\\\" placeholder=auto empty-to-null bs-tooltip=\\\"'Override automatic decimal precision for y-axis'\\\" data-placement=right ng-model=yaxis.decimals ng-change=ctrl.render() ng-model-onblur>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Label</label>\\r\\n\\t\\t\\t\\t<input type=text class=\\\"gf-form-input max-width-20\\\" ng-model=yaxis.label ng-change=ctrl.render() ng-model-onblur>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t<h5 class=section-heading>X-Axis</h5>\\r\\n\\t\\t<gf-form-switch class=gf-form label=Show label-class=width-6 checked=ctrl.panel.xaxis.show on-change=ctrl.render()></gf-form-switch>\\r\\n\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Mode</label>\\r\\n\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-15\\\">\\r\\n\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.xaxis.mode ng-options=\\\"v as k for (k, v) in ctrl.xAxisModes\\\" ng-change=ctrl.xAxisModeChanged()> </select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<!-- Series mode -->\\r\\n\\t\\t<div class=gf-form ng-if=\\\"ctrl.panel.xaxis.mode === 'series'\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Value</label>\\r\\n      <metric-segment-model property=ctrl.panel.xaxis.values[0] options=ctrl.xAxisStatOptions on-change=ctrl.xAxisValueChanged() custom=false css-class=width-10 select-mode=true></metric-segment-model>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<!-- Histogram mode -->\\r\\n\\t\\t<div class=gf-form ng-if=\\\"ctrl.panel.xaxis.mode === 'histogram'\\\">\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Buckets</label>\\r\\n\\t\\t\\t<input type=number class=\\\"gf-form-input max-width-8\\\" ng-model=ctrl.panel.xaxis.buckets placeholder=auto ng-change=ctrl.render() ng-model-onblur bs-tooltip=\\\"'Number of buckets'\\\" data-placement=right>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div>\\r\\n\\t\\t\\t<br/>\\r\\n\\t\\t\\t<h5 class=section-heading>Y-Axes</h5>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Align tooltip=\\\"Align left and right Y-axes\\\" label-class=width-6 switch-class=width-5 checked=ctrl.panel.yaxis.align on-change=ctrl.render()></gf-form-switch>\\r\\n\\t\\t\\t<div class=gf-form ng-show=ctrl.panel.yaxis.align>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">\\r\\n\\t\\t\\t\\t\\tLevel\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t<input type=number class=\\\"gf-form-input width-5\\\" placeholder=0 ng-model=ctrl.panel.yaxis.alignLevel ng-change=ctrl.render() ng-model-onblur bs-tooltip=\\\"'Alignment of Y-axes are based on this value, starting from Y=0'\\\" data-placement=right>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/graph/tab_display.html';\nvar html = \"<div class=edit-tab-with-sidemenu>\\r\\n\\t<aside class=edit-sidemenu-aside>\\r\\n\\t\\t<ul class=edit-sidemenu>\\r\\n\\t\\t\\t<li ng-class=\\\"{active: ctrl.subTabIndex === 0}\\\">\\r\\n\\t\\t\\t\\t<a ng-click=\\\"ctrl.subTabIndex = 0\\\">Draw options</a>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t\\t<li ng-class=\\\"{active: ctrl.subTabIndex === 1}\\\">\\r\\n\\t\\t\\t\\t<a ng-click=\\\"ctrl.subTabIndex = 1\\\">\\r\\n\\t\\t\\t\\t\\tSeries overrides <span class=muted>({{ctrl.panel.seriesOverrides.length}})</span>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t\\t<li ng-class=\\\"{active: ctrl.subTabIndex === 2}\\\">\\r\\n\\t\\t\\t\\t<a ng-click=\\\"ctrl.subTabIndex = 2\\\">\\r\\n\\t\\t\\t\\t\\tThresholds <span class=muted>({{ctrl.panel.thresholds.length}})</span>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t</ul>\\r\\n\\t</aside>\\r\\n\\r\\n\\t<div class=edit-tab-content ng-if=\\\"ctrl.subTabIndex === 0\\\">\\r\\n\\t\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t\\t<h5 class=section-heading>Draw Modes</h5>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Bars label-class=width-5 checked=ctrl.panel.bars on-change=ctrl.render()></gf-form-switch>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Lines label-class=width-5 checked=ctrl.panel.lines on-change=ctrl.render()></gf-form-switch>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Points label-class=width-5 checked=ctrl.panel.points on-change=ctrl.render()></gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t\\t<h5 class=section-heading>Mode Options</h5>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-8\\\">Fill</label>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-5\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.fill ng-options=\\\"f for f in [0,1,2,3,4,5,6,7,8,9,10]\\\" ng-change=ctrl.render() ng-disabled=!ctrl.panel.lines></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-8\\\">Line Width</label>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-5\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.linewidth ng-options=\\\"f for f in [0,1,2,3,4,5,6,7,8,9,10]\\\" ng-change=ctrl.render() ng-disabled=!ctrl.panel.lines></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<gf-form-switch ng-disabled=!ctrl.panel.lines class=gf-form label=Staircase label-class=width-8 checked=ctrl.panel.steppedLine on-change=ctrl.render()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-8\\\">Point Radius</label>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-5\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.pointradius ng-options=\\\"f for f in [0.5,1,2,3,4,5,6,7,8,9,10]\\\" ng-change=ctrl.render() ng-disabled=!ctrl.panel.points></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t\\t<h5 class=section-heading>Hover tooltip</h5>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-9\\\">Mode</label>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-8\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.tooltip.shared ng-options=\\\"f.value as f.text for f in [{text: 'All series', value: true}, {text: 'Single', value: false}]\\\" ng-change=ctrl.render()></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-9\\\">Sort order</label>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-8\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.tooltip.sort ng-options=\\\"f.value as f.text for f in [{text: 'None', value: 0}, {text: 'Increasing', value: 1}, {text: 'Decreasing', value: 2}]\\\" ng-change=ctrl.render()></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form ng-show=ctrl.panel.stack>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-9\\\">Stacked value</label>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-8\\\">\\r\\n\\t\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.tooltip.value_type ng-options=\\\"f for f in ['cumulative','individual']\\\" ng-change=ctrl.render()></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t\\t<h5 class=section-heading>Stacking & Null value</h5>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Stack label-class=width-7 checked=ctrl.panel.stack on-change=ctrl.refresh()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form ng-show=ctrl.panel.stack label=Percent label-class=width-7 checked=ctrl.panel.percentage on-change=ctrl.render()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-7\\\">Null value</label>\\r\\n\\t\\t\\t\\t<div class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t\\t<select class=\\\"gf-form-input max-width-9\\\" ng-model=ctrl.panel.nullPointMode ng-options=\\\"f for f in ['connected', 'null', 'null as zero']\\\" ng-change=ctrl.render()></select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=edit-tab-content ng-if=\\\"ctrl.subTabIndex === 1\\\">\\r\\n\\t\\t<div class=gf-form-group>\\r\\n\\t\\t\\t<h5>Series specific overrides <tip>Regex match example: /server[0-3]/i </tip></h5>\\r\\n\\t\\t\\t<div class=gf-form-inline ng-repeat=\\\"override in ctrl.panel.seriesOverrides\\\" ng-controller=SeriesOverridesCtrl>\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<label class=gf-form-label>alias or regex</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form width-15\\\">\\r\\n\\t\\t\\t\\t\\t<input type=text ng-model=override.alias bs-typeahead=getSeriesNames ng-blur=ctrl.render() data-min-length=0 data-items=100 class=\\\"gf-form-input width-15\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=gf-form ng-repeat=\\\"option in currentOverrides\\\">\\r\\n\\t\\t\\t\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"pointer fa fa-remove\\\" ng-click=removeOverride(option)></i>\\r\\n\\t\\t\\t\\t\\t\\t<span ng-show=\\\"option.propertyName === 'color'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\tColor: <i class=\\\"fa fa-circle\\\" ng-style={color:option.value}></i>\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t<span ng-show=\\\"option.propertyName !== 'color'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t{{option.name}}: {{option.value}}\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<span class=dropdown dropdown-typeahead=overrideMenu dropdown-typeahead-on-select=\\\"setOverride($item, $subItem)\\\">\\r\\n\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"gf-form-label gf-form-label--grow\\\"></div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-trash pointer\\\" ng-click=ctrl.removeSeriesOverride(override)></i>\\r\\n\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<button class=\\\"btn btn-inverse\\\" ng-click=ctrl.addSeriesOverride()>\\r\\n\\t\\t\\t<i class=\\\"fa fa-plus\\\"></i>&nbsp;Add override\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=edit-tab-content ng-if=\\\"ctrl.subTabIndex === 2\\\">\\r\\n\\t\\t<graph-threshold-form panel-ctrl=ctrl></graph-threshold-form>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/graph/tab_legend.html';\nvar html = \"<div class=editor-row>\\r\\n\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t<h5 class=section-heading>Options</h5>\\r\\n\\t\\t<gf-form-switch class=gf-form label=Show label-class=width-7 checked=ctrl.panel.legend.show on-change=ctrl.refresh()>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t\\t<gf-form-switch class=gf-form label=\\\"As Table\\\" label-class=width-7 checked=ctrl.panel.legend.alignAsTable on-change=ctrl.render()>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t\\t<gf-form-switch class=gf-form label=\\\"To the right\\\" label-class=width-7 checked=ctrl.panel.legend.rightSide on-change=ctrl.render()>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t\\t<div ng-if=ctrl.panel.legend.rightSide class=gf-form>\\r\\n\\t\\t\\t<label class=\\\"gf-form-label width-7\\\">Width</label>\\r\\n\\t\\t\\t<input type=number class=\\\"gf-form-input max-width-5\\\" placeholder=250 bs-tooltip=\\\"'Set a min-width for the legend side table/block'\\\" data-placement=right ng-model=ctrl.panel.legend.sideWidth ng-change=ctrl.render() ng-model-onblur>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t<h5 class=section-heading>Values</h5>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Min label-class=width-4 checked=ctrl.panel.legend.min on-change=ctrl.legendValuesOptionChanged()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\r\\n\\t\\t\\t<gf-form-switch class=\\\"gf-form max-width-12\\\" label=Max label-class=width-6 switch-class=max-width-5 checked=ctrl.panel.legend.max on-change=ctrl.legendValuesOptionChanged()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Avg label-class=width-4 checked=ctrl.panel.legend.avg on-change=ctrl.legendValuesOptionChanged()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\r\\n\\t\\t\\t<gf-form-switch class=\\\"gf-form max-width-12\\\" label=Current label-class=width-6 switch-class=max-width-5 checked=ctrl.panel.legend.current on-change=ctrl.legendValuesOptionChanged()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form-inline>\\r\\n\\t\\t\\t<gf-form-switch class=gf-form label=Total label-class=width-4 checked=ctrl.panel.legend.total on-change=ctrl.legendValuesOptionChanged()>\\r\\n\\t\\t\\t</gf-form-switch>\\r\\n\\r\\n\\t\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t\\t<label class=\\\"gf-form-label width-6\\\">Decimals</label>\\r\\n\\t\\t\\t\\t<input type=number class=\\\"gf-form-input width-5\\\" placeholder=auto bs-tooltip=\\\"'Override automatic decimal precision for legend and tooltips'\\\" data-placement=right ng-model=ctrl.panel.decimals ng-change=ctrl.render() ng-model-onblur>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t<h5 class=section-heading>Hide series</h5>\\r\\n\\t\\t<gf-form-switch class=gf-form label=\\\"With only nulls\\\" label-class=width-10 checked=ctrl.panel.legend.hideEmpty on-change=ctrl.render()>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t\\t<gf-form-switch class=gf-form label=\\\"With only zeros\\\" label-class=width-10 checked=ctrl.panel.legend.hideZero on-change=ctrl.render()>\\r\\n\\t\\t</gf-form-switch>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/heatmap/module.html';\nvar html = \"<div class=heatmap-wrapper>\\r\\n\\t<div class=heatmap-canvas-wrapper>\\r\\n\\r\\n\\t\\t<div class=datapoints-warning ng-if=ctrl.dataWarning>\\r\\n\\t\\t\\t<span class=small bs-tooltip=ctrl.dataWarning.tip>{{ctrl.dataWarning.title}}</span>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=heatmap-panel ng-dblclick=ctrl.zoomOut()></div>\\r\\n\\t</div>\\r\\n\\t<div class=heatmap-legend-wrapper ng-if=ctrl.panel.legend.show>\\r\\n\\t\\t<heatmap-legend></heatmap-legend>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div class=clearfix></div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/heatmap/partials/axes_editor.html';\nvar html = \"<div class=editor-row>\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Y Axis</h5>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-8\\\">Unit</label>\\r\\n      <div class=\\\"gf-form-dropdown-typeahead width-12\\\" ng-model=ctrl.panel.yAxis.format dropdown-typeahead2=editor.unitFormats dropdown-typeahead-on-select=editor.setUnitFormat($subItem)>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div ng-if=\\\"ctrl.panel.dataFormat == 'timeseries'\\\">\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-8\\\">Scale</label>\\r\\n        <div class=\\\"gf-form-select-wrapper width-12\\\">\\r\\n          <select class=gf-form-input ng-model=ctrl.panel.yAxis.logBase ng-options=\\\"v as k for (k, v) in editor.logScales\\\" ng-change=ctrl.refresh()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-8\\\">Y-Min</label>\\r\\n        <input type=text class=\\\"gf-form-input width-12\\\" placeholder=auto empty-to-null ng-model=ctrl.panel.yAxis.min ng-change=ctrl.render() ng-model-onblur>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-8\\\">Y-Max</label>\\r\\n        <input type=text class=\\\"gf-form-input width-12\\\" placeholder=auto empty-to-null ng-model=ctrl.panel.yAxis.max ng-change=ctrl.render() ng-model-onblur>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-8\\\">Decimals</label>\\r\\n      <input type=number class=\\\"gf-form-input width-12\\\" placeholder=auto data-placement=right bs-tooltip=\\\"'Override automatic decimal precision for axis.'\\\" ng-model=ctrl.panel.yAxis.decimals ng-change=ctrl.render() ng-model-onblur>\\r\\n    </div>\\r\\n    <div class=gf-form ng-if=\\\"ctrl.panel.dataFormat == 'tsbuckets'\\\">\\r\\n      <label class=\\\"gf-form-label width-8\\\">Bucket bound</label>\\r\\n      <div class=\\\"gf-form-select-wrapper max-width-12\\\">\\r\\n        <select class=gf-form-input ng-model=ctrl.panel.yBucketBound ng-options=\\\"v as k for (k, v) in editor.yBucketBoundModes\\\" ng-change=ctrl.render() data-placement=right bs-tooltip=\\\"'Use series label as an upper or lower bucket bound.'\\\">\\r\\n        </select>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\" ng-if=\\\"ctrl.panel.dataFormat == 'timeseries'\\\">\\r\\n    <h5 class=section-heading>Buckets</h5>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-5\\\">Y Axis</label>\\r\\n      </div>\\r\\n      <div class=gf-form ng-show=\\\"ctrl.panel.yAxis.logBase === 1\\\">\\r\\n        <label class=\\\"gf-form-label width-5\\\">Buckets</label>\\r\\n        <input type=number class=\\\"gf-form-input width-5\\\" placeholder=auto data-placement=right bs-tooltip=\\\"'Number of buckets for Y axis.'\\\" ng-model=ctrl.panel.yBucketNumber ng-change=ctrl.refresh() ng-model-onblur>\\r\\n      </div>\\r\\n      <div class=gf-form ng-show=\\\"ctrl.panel.yAxis.logBase === 1\\\">\\r\\n        <label class=\\\"gf-form-label width-4\\\">Size</label>\\r\\n        <input type=number class=\\\"gf-form-input width-5\\\" placeholder=auto data-placement=right bs-tooltip=\\\"'Size of bucket. Has priority over Buckets option.'\\\" ng-model=ctrl.panel.yBucketSize ng-change=ctrl.refresh() ng-model-onblur>\\r\\n      </div>\\r\\n      <div class=gf-form ng-show=\\\"ctrl.panel.yAxis.logBase !== 1\\\">\\r\\n        <label class=\\\"gf-form-label width-10\\\">Split Factor</label>\\r\\n        <input type=number class=\\\"gf-form-input width-9\\\" placeholder=1 data-placement=right bs-tooltip=\\\"'For log scales only. By default Y values is splitted by integer powers of log base (1, 2, 4, 8, 16, ... for log2). This option allows to split each default bucket into specified number of buckets.'\\\" ng-model=ctrl.panel.yAxis.splitFactor ng-change=ctrl.refresh() ng-model-onblur>\\r\\n        \\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-5\\\">X Axis</label>\\r\\n        <label class=\\\"gf-form-label width-5\\\">Buckets</label>\\r\\n        <input type=number class=\\\"gf-form-input width-5\\\" placeholder=auto data-placement=right bs-tooltip=\\\"'Number of buckets for X axis.'\\\" ng-model=ctrl.panel.xBucketNumber ng-change=ctrl.refresh() ng-model-onblur>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-4\\\">Size</label>\\r\\n        <input type=text class=\\\"gf-form-input width-5\\\" placeholder=auto data-placement=right bs-tooltip=\\\"'Size of bucket. Number or interval (10s, 5m, 1h, etc). Supported intervals: ms, s, m, h, d, w, M, y. Has priority over Buckets option.'\\\" ng-model=ctrl.panel.xBucketSize ng-change=ctrl.refresh() ng-model-onblur>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Data format</h5>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-5\\\">Format</label>\\r\\n      <div class=\\\"gf-form-select-wrapper max-width-15\\\">\\r\\n        <select class=gf-form-input ng-model=ctrl.panel.dataFormat ng-options=\\\"v as k for (k, v) in editor.dataFormats\\\" ng-change=ctrl.render() data-placement=right bs-tooltip=\\\"'Time series: create heatmap from regular time series. <br>Time series buckets: use histogram data returned from data source. Each series represents bucket which upper/lower bound is a series label.'\\\">\\r\\n        </select>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/heatmap/partials/display_editor.html';\nvar html = \"<div class=editor-row>\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Colors</h5>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-9\\\">Mode</label>\\r\\n      <div class=\\\"gf-form-select-wrapper width-8\\\">\\r\\n        <select class=\\\"input-small gf-form-input\\\" ng-model=ctrl.panel.color.mode ng-options=\\\"s for s in ctrl.colorModes\\\" ng-change=ctrl.render()></select>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div ng-show=\\\"ctrl.panel.color.mode === 'opacity'\\\">\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-9\\\">Color</label>\\r\\n        <span class=gf-form-label>\\r\\n          <color-picker color=ctrl.panel.color.cardColor onchange=ctrl.onCardColorChange></color-picker>\\r\\n        </span>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-9\\\">Scale</label>\\r\\n        <div class=\\\"gf-form-select-wrapper width-8\\\">\\r\\n          <select class=\\\"input-small gf-form-input\\\" ng-model=ctrl.panel.color.colorScale ng-options=\\\"s for s in ctrl.opacityScales\\\" ng-change=ctrl.render()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=gf-form ng-if=\\\"ctrl.panel.color.colorScale === 'sqrt'\\\">\\r\\n        <label class=\\\"gf-form-label width-9\\\">Exponent</label>\\r\\n        <input type=number class=\\\"gf-form-input width-8\\\" placeholder=auto data-placement=right bs-tooltip=\\\"''\\\" ng-model=ctrl.panel.color.exponent ng-change=ctrl.refresh() ng-model-onblur>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div ng-show=\\\"ctrl.panel.color.mode === 'spectrum'\\\">\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-9\\\">Scheme</label>\\r\\n        <div class=\\\"gf-form-select-wrapper width-8\\\">\\r\\n          <select class=\\\"input-small gf-form-input\\\" ng-model=ctrl.panel.color.colorScheme ng-options=\\\"s.value as s.name for s in ctrl.colorSchemes\\\" ng-change=ctrl.render()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form>\\r\\n      <color-legend></color-legend>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Color scale</h5>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-8\\\">Min</label>\\r\\n      <input type=number ng-model=ctrl.panel.color.min class=\\\"gf-form-input width-5\\\" placeholder=auto data-placement=right bs-tooltip=\\\"''\\\" ng-change=ctrl.refresh() ng-model-onblur>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-8\\\">Max</label>\\r\\n      <input type=number ng-model=ctrl.panel.color.max class=\\\"gf-form-input width-5\\\" placeholder=auto data-placement=right bs-tooltip=\\\"''\\\" ng-change=ctrl.refresh() ng-model-onblur>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Legend</h5>\\r\\n    <gf-form-switch class=gf-form label-class=width-8 label=\\\"Show legend\\\" checked=ctrl.panel.legend.show on-change=ctrl.render()>\\r\\n    </gf-form-switch>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Buckets</h5>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-8\\\">Space</label>\\r\\n      <input type=number class=\\\"gf-form-input width-5\\\" placeholder=auto data-placement=right bs-tooltip=\\\"''\\\" ng-model=ctrl.panel.cards.cardPadding ng-change=ctrl.refresh() ng-model-onblur>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-8\\\">Round</label>\\r\\n      <input type=number class=\\\"gf-form-input width-5\\\" placeholder=auto data-placement=right bs-tooltip=\\\"''\\\" ng-model=ctrl.panel.cards.cardRound ng-change=ctrl.refresh() ng-model-onblur>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Tooltip</h5>\\r\\n    <gf-form-switch class=gf-form label-class=width-8 label=\\\"Show tooltip\\\" checked=ctrl.panel.tooltip.show on-change=ctrl.render()>\\r\\n    </gf-form-switch>\\r\\n    <div ng-if=ctrl.panel.tooltip.show>\\r\\n      <gf-form-switch class=gf-form label-class=width-8 label=Histogram checked=ctrl.panel.tooltip.showHistogram on-change=ctrl.render()>\\r\\n      </gf-form-switch>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-8\\\">Decimals</label>\\r\\n        <input type=number class=\\\"gf-form-input width-5\\\" placeholder=auto data-placement=right bs-tooltip=\\\"'Max decimal precision for tooltip.'\\\" ng-model=ctrl.panel.tooltipDecimals ng-change=ctrl.render() ng-model-onblur>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/pluginlist/editor.html';\nvar html = \"<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Mode</span>\\r\\n\\t\\t\\t<div class=\\\"gf-form-select-wrapper max-width-10\\\">\\r\\n\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.mode ng-options=\\\"f for f in ctrl.modes\\\" ng-change=ctrl.refresh()></select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=gf-form ng-show=\\\"ctrl.panel.mode === 'recently viewed'\\\">\\r\\n\\t\\t\\t<span class=gf-form-label>\\r\\n\\t\\t\\t\\t<i class=\\\"grafana-tip fa fa-question-circle ng-scope\\\" bs-tooltip=\\\"'WARNING: This list will be cleared when clearing browser cache'\\\" data-original-title=\\\"\\\" title=\\\"\\\"></i>\\r\\n\\t\\t\\t</span>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline ng-if=\\\"ctrl.panel.mode === 'search'\\\">\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Search options</span>\\r\\n\\t\\t\\t<span class=gf-form-label>Query</span>\\r\\n\\r\\n\\t\\t\\t<input type=text class=gf-form-input placeholder=\\\"title query\\\" ng-model=ctrl.panel.query ng-change=ctrl.refresh() ng-model-onblur>\\r\\n\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=gf-form-label>Tags</span>\\r\\n\\r\\n\\t\\t\\t<bootstrap-tagsinput ng-model=ctrl.panel.tags tagclass=\\\"label label-tag\\\" placeholder=\\\"add tags\\\" on-tags-updated=ctrl.refresh()>\\r\\n\\t\\t\\t</bootstrap-tagsinput>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=\\\"gf-form-label width-10\\\">Limit number to</span>\\r\\n\\t\\t\\t<input class=gf-form-input type=number ng-model=ctrl.panel.limit ng-model-onblur ng-change=ctrl.refresh()>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/pluginlist/module.html';\nvar html = \"<div class=pluginlist>\\r\\n  <div class=pluginlist-section ng-repeat=\\\"category in ctrl.viewModel\\\">\\r\\n    <h6 class=pluginlist-section-header>\\r\\n      {{category.header}}\\r\\n    </h6>\\r\\n    <div class=pluginlist-item ng-repeat=\\\"plugin in category.list\\\">\\r\\n      <a class=\\\"pluginlist-link pluginlist-link-{{plugin.state}} pointer\\\" href={{plugin.defaultNavUrl}}>\\r\\n        <span>\\r\\n          <img ng-src={{plugin.info.logos.small}} class=pluginlist-image>\\r\\n          <span class=pluginlist-title>{{plugin.name}}</span>\\r\\n          <span class=pluginlist-version>v{{plugin.info.version}}</span>\\r\\n        </span>\\r\\n        <span class=\\\"pluginlist-message pluginlist-message--update\\\" ng-show=plugin.hasUpdate ng-click=\\\"ctrl.updateAvailable(plugin, $event)\\\" bs-tooltip=\\\"'New version: ' + plugin.latestVersion\\\">\\r\\n          Update available!\\r\\n        </span>\\r\\n        <span class=\\\"pluginlist-message pluginlist-message--enable\\\" ng-show=\\\"!plugin.enabled && !plugin.hasUpdate\\\">\\r\\n          Enable now\\r\\n        </span>\\r\\n        <span class=\\\"pluginlist-message pluginlist-message--no-update\\\" ng-show=\\\"plugin.enabled && !plugin.hasUpdate\\\">\\r\\n          Up to date\\r\\n        </span>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=pluginlist-item ng-show=\\\"category.list.length === 0\\\">\\r\\n      <a class=\\\"pluginlist-link pluginlist-link-{{plugin.state}}\\\" href=https://grafana.com/plugins>\\r\\n        <span class=pluginlist-none-installed>None installed. <span class=pluginlist-emphasis>Browse Grafana.com</span></span>\\r\\n      </a>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/singlestat/editor.html';\nvar html = \"<div class=editor-row>\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Value</h5>\\r\\n\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form ng-show=\\\"ctrl.dataType === 'timeseries'\\\">\\r\\n        <label class=\\\"gf-form-label width-6\\\">Stat</label>\\r\\n        <div class=\\\"gf-form-select-wrapper width-12\\\">\\r\\n          <select class=gf-form-input ng-model=ctrl.panel.valueName ng-options=\\\"f.value as f.text for f in ctrl.valueNameOptions\\\" ng-change=ctrl.refresh()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=gf-form ng-show=\\\"ctrl.dataType === 'table'\\\">\\r\\n        <label class=\\\"gf-form-label width-6\\\">Column</label>\\r\\n        <div class=\\\"gf-form-select-wrapper width-12\\\">\\r\\n          <select class=gf-form-input ng-model=ctrl.panel.tableColumn ng-options=\\\"f for f in ctrl.tableColumnOptions\\\" ng-change=ctrl.refresh()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-6\\\">Font size</label>\\r\\n        <div class=gf-form-select-wrapper>\\r\\n          <select class=gf-form-input ng-model=ctrl.panel.valueFontSize ng-options=\\\"f for f in ctrl.fontSizes\\\" ng-change=ctrl.render()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-6\\\">Prefix</label>\\r\\n        <input type=text class=\\\"gf-form-input width-12\\\" ng-model=ctrl.panel.prefix ng-change=ctrl.render() ng-model-onblur>\\r\\n        <label class=\\\"gf-form-label width-6\\\">Font size</label>\\r\\n        <div class=gf-form-select-wrapper>\\r\\n          <select class=gf-form-input ng-model=ctrl.panel.prefixFontSize ng-options=\\\"f for f in ctrl.fontSizes\\\" ng-change=ctrl.render() ng-disabled=!ctrl.canModifyText()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-6\\\">Postfix</label>\\r\\n      <input type=text class=\\\"gf-form-input width-12\\\" ng-model=ctrl.panel.postfix ng-change=ctrl.render() ng-model-onblur>\\r\\n      <label class=\\\"gf-form-label width-6\\\">Font size</label>\\r\\n      <div class=gf-form-select-wrapper>\\r\\n        <select class=\\\"input-small gf-form-input\\\" ng-model=ctrl.panel.postfixFontSize ng-options=\\\"f for f in ctrl.fontSizes\\\" ng-change=ctrl.render() ng-disabled=!ctrl.canModifyText()></select>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-6\\\">Unit</label>\\r\\n      <div class=\\\"gf-form-dropdown-typeahead width-18\\\" ng-model=ctrl.panel.format dropdown-typeahead2=ctrl.unitFormats dropdown-typeahead-on-select=ctrl.setUnitFormat($subItem)></div>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-6\\\">Decimals</label>\\r\\n      <input type=number class=\\\"gf-form-input width-18\\\" placeholder=auto data-placement=right bs-tooltip=\\\"'Override automatic decimal precision for legend and tooltips'\\\" ng-model=ctrl.panel.decimals ng-change=ctrl.refresh() ng-model-onblur>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Coloring</h5>\\r\\n    <div class=gf-form-inline>\\r\\n      <gf-form-switch class=gf-form label-class=width-8 label=Background checked=ctrl.panel.colorBackground on-change=ctrl.render()></gf-form-switch>\\r\\n      <gf-form-switch class=gf-form label-class=width-6 label=Value checked=ctrl.panel.colorValue on-change=ctrl.render()></gf-form-switch>\\r\\n    </div>\\r\\n    <div class=gf-form-inline>\\r\\n      <gf-form-switch class=gf-form label-class=width-8 label=Prefix checked=ctrl.panel.colorPrefix on-change=ctrl.render() ng-disabled=!ctrl.canModifyText()></gf-form-switch>\\r\\n      <gf-form-switch class=gf-form label-class=width-6 label=Postfix checked=ctrl.panel.colorPostfix on-change=ctrl.render() ng-disabled=!ctrl.canModifyText()></gf-form-switch>\\r\\n    </div>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=\\\"gf-form max-width-21\\\">\\r\\n        <label class=\\\"gf-form-label width-8\\\">Thresholds\\r\\n          <tip>Define two threshold values&lt;br /&gt; 50,80 will produce: value &lt; 50 = Green, 50 &lt;= value &lt; 80 = Yellow, value &gt;= 80 = Red</tip>\\r\\n        </label>\\r\\n        <input type=text class=gf-form-input ng-model=ctrl.panel.thresholds ng-blur=ctrl.render() placeholder=50,80>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-8\\\">Colors</label>\\r\\n      <span class=gf-form-label ng-repeat=\\\"color in ctrl.panel.colors track by $index\\\">\\r\\n        <color-picker color=color onchange=ctrl.onColorChange($index)></color-picker>\\r\\n      </span>\\r\\n      <span class=gf-form-label>\\r\\n        <a ng-click=ctrl.invertColorOrder()>\\r\\n          Invert\\r\\n        </a>\\r\\n      </span>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Spark lines</h5>\\r\\n    <gf-form-switch class=gf-form label-class=width-9 label=Show checked=ctrl.panel.sparkline.show on-change=ctrl.render()></gf-form-switch>\\r\\n    <div ng-if=ctrl.panel.sparkline.show>\\r\\n      <gf-form-switch class=gf-form label-class=width-9 label=\\\"Full height\\\" checked=ctrl.panel.sparkline.full on-change=ctrl.render()></gf-form-switch>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-9\\\">Line Color</label>\\r\\n        <span class=gf-form-label>\\r\\n          <color-picker color=ctrl.panel.sparkline.lineColor onchange=ctrl.onSparklineColorChange></color-picker>\\r\\n        </span>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-9\\\">Fill Color</label>\\r\\n        <span class=gf-form-label>\\r\\n          <color-picker color=ctrl.panel.sparkline.fillColor onchange=ctrl.onSparklineFillChange></color-picker>\\r\\n        </span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"section gf-form-group\\\">\\r\\n    <h5 class=section-heading>Gauge</h5>\\r\\n    <gf-form-switch class=gf-form label-class=width-10 switch-class=max-width-6 label=Show checked=ctrl.panel.gauge.show on-change=ctrl.render()></gf-form-switch>\\r\\n    <div ng-if=ctrl.panel.gauge.show>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-10\\\">Min</label>\\r\\n        <input type=number class=\\\"gf-form-input width-6\\\" placeholder=0 data-placement=right ng-model=ctrl.panel.gauge.minValue ng-change=ctrl.refresh() ng-model-onblur>\\r\\n        <label class=\\\"gf-form-label alert-state-critical\\\" ng-show=ctrl.invalidGaugeRange>\\r\\n          &nbsp; <i class=\\\"fa fa-warning\\\"></i>\\r\\n          Min value is bigger than max.\\r\\n        </label>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-10\\\">Max</label>\\r\\n        <input type=number class=\\\"gf-form-input width-6\\\" placeholder=0 data-placement=right ng-model=ctrl.panel.gauge.maxValue ng-change=ctrl.refresh() ng-model-onblur>\\r\\n      </div>\\r\\n      <gf-form-switch class=gf-form label-class=width-10 switch-class=max-width-6 label=\\\"Threshold labels\\\" checked=ctrl.panel.gauge.thresholdLabels on-change=ctrl.render()></gf-form-switch>\\r\\n      <gf-form-switch class=gf-form label-class=width-10 switch-class=max-width-6 label=\\\"Threshold markers\\\" checked=ctrl.panel.gauge.thresholdMarkers on-change=ctrl.render()></gf-form-switch>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/singlestat/mappings.html';\nvar html = \"<div class=editor-row>\\r\\n  <div class=gf-form-group>\\r\\n    <div class=gf-form>\\r\\n        <span class=gf-form-label>\\r\\n          Type\\r\\n        </span>\\r\\n        <div class=gf-form-select-wrapper>\\r\\n          <select class=gf-form-input ng-model=ctrl.panel.mappingType ng-options=\\\"f.value as f.name for f in ctrl.panel.mappingTypes\\\" ng-change=ctrl.render()></select>\\r\\n        </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=editor-row ng-if=\\\"ctrl.panel.mappingType==1\\\">\\r\\n  <h5 class=page-heading>Set value mappings</h5>\\r\\n  <div class=gf-form-group>\\r\\n    <div class=gf-form ng-repeat=\\\"map in ctrl.panel.valueMaps\\\">\\r\\n      <span class=gf-form-label>\\r\\n        <i class=\\\"fa fa-remove pointer\\\" ng-click=ctrl.removeValueMap(map)></i>\\r\\n      </span>\\r\\n      <input type=text ng-model=map.value placeholder=value class=\\\"gf-form-input max-width-6\\\" ng-blur=ctrl.render()>\\r\\n      <span class=gf-form-label>\\r\\n        <i class=\\\"fa fa-arrow-right\\\"></i>\\r\\n      </span>\\r\\n      <input type=text placeholder=text ng-model=map.text class=\\\"gf-form-input max-width-8\\\" ng-blur=ctrl.render()>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-button-row>\\r\\n      <button class=\\\"btn btn-inverse\\\" ng-click=ctrl.addValueMap();>\\r\\n        <i class=\\\"fa fa-plus\\\"></i>\\r\\n        Add a value mapping\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=editor-row ng-if=\\\"ctrl.panel.mappingType==2\\\">\\r\\n  <h5 class=page-heading>Set range mappings</h5>\\r\\n  <div class=gf-form-group>\\r\\n    <div class=gf-form ng-repeat=\\\"rangeMap in ctrl.panel.rangeMaps\\\">\\r\\n        <span class=gf-form-label>\\r\\n          <i class=\\\"fa fa-remove pointer\\\" ng-click=ctrl.removeRangeMap(rangeMap)></i>\\r\\n        </span>\\r\\n        <span class=gf-form-label>From</span>\\r\\n        <input type=text ng-model=rangeMap.from class=\\\"gf-form-input max-width-6\\\" ng-blur=ctrl.render()>\\r\\n        <span class=gf-form-label>To</span>\\r\\n        <input type=text ng-model=rangeMap.to class=\\\"gf-form-input max-width-6\\\" ng-blur=ctrl.render()>\\r\\n        <span class=gf-form-label>Text</span>\\r\\n        <input type=text ng-model=rangeMap.text class=\\\"gf-form-input max-width-8\\\" ng-blur=ctrl.render()>\\r\\n    </div>\\r\\n\\r\\n    <div class=gf-form-button-row>\\r\\n      <button class=\\\"btn btn-inverse\\\" ng-click=ctrl.addRangeMap()>\\r\\n        <i class=\\\"fa fa-plus\\\"></i>\\r\\n        Add a range mapping\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/singlestat/module.html';\nvar html = \"<div class=singlestat-panel>\\r\\n\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/table/column_options.html';\nvar html = \"<div class=edit-tab-with-sidemenu>\\r\\n  <aside class=edit-sidemenu-aside>\\r\\n    <ul class=edit-sidemenu>\\r\\n      <li ng-repeat=\\\"style in editor.panel.styles\\\" ng-class=\\\"{active: editor.activeStyleIndex === $index}\\\">\\r\\n        <a ng-click=\\\"editor.activeStyleIndex = $index\\\">{{style.pattern || 'New rule'}}</a>\\r\\n      </li>\\r\\n      <li>\\r\\n        <a class=pointer ng-click=editor.addColumnStyle()>\\r\\n          <i class=\\\"fa fa-plus\\\"></i>&nbsp;Add\\r\\n        </a>\\r\\n      </li>\\r\\n    </ul>\\r\\n  </aside>\\r\\n\\r\\n  <div class=edit-tab-content ng-repeat=\\\"style in editor.panel.styles\\\" ng-if=\\\"editor.activeStyleIndex === $index\\\">\\r\\n\\r\\n    <div class=\\\"section gf-form-group\\\">\\r\\n      <h5 class=section-heading>Options</h5>\\r\\n      <div class=gf-form-inline>\\r\\n        <div class=gf-form>\\r\\n          <label class=\\\"gf-form-label width-13\\\">Apply to columns named</label>\\r\\n          <input type=text placeholder=\\\"Name or regex\\\" class=\\\"gf-form-input width-13\\\" ng-model=style.pattern bs-tooltip=\\\"'Specify regex using /my.*regex/ syntax'\\\" bs-typeahead=editor.getColumnNames ng-blur=editor.render() data-min-length=0 data-items=100 ng-model-onblur data-placement=right>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=gf-form ng-if=\\\"style.type !== 'hidden'\\\">\\r\\n        <label class=\\\"gf-form-label width-13\\\">Column Header</label>\\r\\n        <input type=text class=\\\"gf-form-input width-13\\\" ng-model=style.alias ng-change=editor.render() ng-model-onblur placeholder=\\\"Override header label\\\">\\r\\n      </div>\\r\\n      <gf-form-switch class=gf-form label-class=width-13 label=\\\"Render value as link\\\" checked=style.link change=editor.render()></gf-form-switch>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"section gf-form-group\\\">\\r\\n      <h5 class=section-heading>Type</h5>\\r\\n\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-11\\\">Type</label>\\r\\n        <div class=\\\"gf-form-select-wrapper width-16\\\">\\r\\n          <select class=gf-form-input ng-model=style.type ng-options=\\\"c.value as c.text for c in editor.columnTypes\\\" ng-change=editor.render()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=gf-form ng-if=\\\"style.type === 'date'\\\">\\r\\n        <label class=\\\"gf-form-label width-11\\\">Date Format</label>\\r\\n        <gf-form-dropdown model=style.dateFormat css-class=\\\"gf-form-input width-16\\\" lookup-text=true get-options=editor.dateFormats on-change=editor.render() allow-custom=true>\\r\\n        </gf-form-dropdown>\\r\\n      </div>\\r\\n\\r\\n      <div ng-if=\\\"style.type === 'string'\\\">\\r\\n        <gf-form-switch class=gf-form label-class=width-11 ng-if=\\\"style.type === 'string'\\\" label=\\\"Sanitize HTML\\\" checked=style.sanitize change=editor.render()></gf-form-switch>\\r\\n      </div>\\r\\n      <div ng-if=\\\"style.type === 'string'\\\">\\r\\n        <gf-form-switch class=gf-form label-class=width-11 ng-if=\\\"style.type === 'string'\\\" label=\\\"Preserve Formatting\\\" checked=style.preserveFormat change=editor.render()></gf-form-switch>\\r\\n      </div>\\r\\n\\r\\n      <div ng-if=\\\"style.type === 'number'\\\">\\r\\n        <div class=gf-form>\\r\\n          <label class=\\\"gf-form-label width-11\\\">Unit</label>\\r\\n          <div class=\\\"gf-form-dropdown-typeahead width-16\\\" ng-model=style.unit dropdown-typeahead2=editor.unitFormats dropdown-typeahead-on-select=\\\"editor.setUnitFormat(style, $subItem)\\\"></div>\\r\\n        </div>\\r\\n        <div class=gf-form>\\r\\n          <label class=\\\"gf-form-label width-11\\\">Decimals</label>\\r\\n          <input type=number class=\\\"gf-form-input width-4\\\" data-placement=right ng-model=style.decimals ng-change=editor.render() ng-model-onblur>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"section gf-form-group\\\" ng-if=\\\"style.type === 'string'\\\">\\r\\n      <h5 class=section-heading>Value Mappings</h5>\\r\\n      <div class=editor-row>\\r\\n        <div class=gf-form-group>\\r\\n          <div class=gf-form>\\r\\n            <span class=gf-form-label>\\r\\n              Type\\r\\n            </span>\\r\\n            <div class=gf-form-select-wrapper>\\r\\n              <select class=gf-form-input ng-model=style.mappingType ng-options=\\\"c.value as c.text for c in editor.mappingTypes\\\" ng-change=editor.render()></select>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=gf-form-group ng-if=\\\"style.mappingType==1\\\">\\r\\n            <div class=gf-form ng-repeat=\\\"map in style.valueMaps\\\">\\r\\n              <span class=gf-form-label>\\r\\n                <i class=\\\"fa fa-remove pointer\\\" ng-click=\\\"editor.removeValueMap(style, $index)\\\"></i>\\r\\n              </span>\\r\\n              <input type=text class=\\\"gf-form-input max-width-6\\\" ng-model=map.value placeholder=Value ng-blur=editor.render()>\\r\\n              <label class=gf-form-label>\\r\\n                <i class=\\\"fa fa-arrow-right\\\"></i>\\r\\n              </label>\\r\\n              <input type=text class=\\\"gf-form-input max-width-8\\\" ng-model=map.text placeholder=Text ng-blur=editor.render()>\\r\\n            </div>\\r\\n            <div class=gf-form>\\r\\n              <label class=gf-form-label>\\r\\n                <a class=pointer ng-click=editor.addValueMap(style)><i class=\\\"fa fa-plus\\\"></i></a>\\r\\n              </label>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=gf-form-group ng-if=\\\"style.mappingType==2\\\">\\r\\n            <div class=gf-form ng-repeat=\\\"rangeMap in style.rangeMaps\\\">\\r\\n              <span class=gf-form-label>\\r\\n                <i class=\\\"fa fa-remove pointer\\\" ng-click=\\\"editor.removeRangeMap(style, $index)\\\"></i>\\r\\n              </span>\\r\\n              <span class=gf-form-label>From</span>\\r\\n              <input type=text ng-model=rangeMap.from class=\\\"gf-form-input max-width-6\\\" ng-blur=editor.render()>\\r\\n              <span class=gf-form-label>To</span>\\r\\n              <input type=text ng-model=rangeMap.to class=\\\"gf-form-input max-width-6\\\" ng-blur=editor.render()>\\r\\n              <span class=gf-form-label>Text</span>\\r\\n              <input type=text ng-model=rangeMap.text class=\\\"gf-form-input max-width-8\\\" ng-blur=editor.render()>\\r\\n            </div>\\r\\n            <div class=gf-form>\\r\\n              <label class=gf-form-label>\\r\\n                <a class=pointer ng-click=editor.addRangeMap(style)><i class=\\\"fa fa-plus\\\"></i></a>\\r\\n              </label>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"section gf-form-group\\\" ng-if=\\\"['number', 'string'].indexOf(style.type) !== -1\\\">\\r\\n      <h5 class=section-heading>Thresholds</h5>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-8\\\">Thresholds\\r\\n          <tip>Comma separated values</tip>\\r\\n        </label>\\r\\n        <input type=text class=\\\"gf-form-input width-10\\\" ng-model=style.thresholds placeholder=50,80 ng-blur=editor.render() array-join>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-8\\\">Color Mode</label>\\r\\n        <div class=\\\"gf-form-select-wrapper width-10\\\">\\r\\n          <select class=gf-form-input ng-model=style.colorMode ng-options=\\\"c.value as c.text for c in editor.colorModes\\\" ng-change=editor.render()></select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-8\\\">Colors</label>\\r\\n        <span class=gf-form-label>\\r\\n          <color-picker color=style.colors[0] onchange=editor.onColorChange($index,0)></color-picker>\\r\\n        </span>\\r\\n        <span class=gf-form-label>\\r\\n          <color-picker color=style.colors[1] onchange=editor.onColorChange($index,1)></color-picker>\\r\\n        </span>\\r\\n        <span class=gf-form-label>\\r\\n          <color-picker color=style.colors[2] onchange=editor.onColorChange($index,2)></color-picker>\\r\\n        </span>\\r\\n        <div class=gf-form-label>\\r\\n          <a class=pointer ng-click=editor.invertColorOrder($index)>Invert</a>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"section gf-form-group\\\" ng-if=style.link>\\r\\n      <h5 class=section-heading>Link</h5>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-9\\\">\\r\\n          Url\\r\\n          <info-popover mode=right-normal>\\r\\n            <p>Specify an URL (relative or absolute)</p>\\r\\n            <span>\\r\\n              Use special variables to specify cell values:\\r\\n              <br>\\r\\n              <em>${__cell}</em> refers to current cell value\\r\\n              <br>\\r\\n              <em>${__cell_n}</em> refers to Nth column value in current row. Column indexes are started from 0. For instance,\\r\\n              <em>${__cell_1}</em> refers to second column's value.\\r\\n              <br>\\r\\n              <em>${__cell:raw}</em> syntax. By default values are URI encoded. If the value is a complete URL you can disable all encoding using\\r\\n            </span>\\r\\n          </info-popover>\\r\\n        </label>\\r\\n        <input type=text class=\\\"gf-form-input width-29\\\" ng-model=style.linkUrl ng-blur=editor.render() ng-model-onblur data-placement=right>\\r\\n      </div>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-9\\\">\\r\\n          Tooltip\\r\\n          <info-popover mode=right-normal>\\r\\n            <p>Specify text for link tooltip.</p>\\r\\n            <span>\\r\\n              This title appears when user hovers pointer over the cell with link. Use the same variables as for URL.\\r\\n            </span>\\r\\n          </info-popover></label>\\r\\n        <input type=text class=\\\"gf-form-input width-29\\\" ng-model=style.linkTooltip ng-blur=editor.render() ng-model-onblur data-placement=right>\\r\\n      </div>\\r\\n      <gf-form-switch class=gf-form label-class=width-9 label=\\\"Open in new tab\\\" checked=style.linkTargetBlank></gf-form-switch>\\r\\n    </div>\\r\\n\\r\\n    <div class=clearfix></div>\\r\\n\\r\\n    <button class=\\\"btn btn-danger btn-small\\\" ng-click=editor.removeColumnStyle(style)>\\r\\n      <i class=\\\"fa fa-trash\\\"></i> Remove Rule\\r\\n    </button>\\r\\n    <br/>\\r\\n    <br/>\\r\\n\\r\\n  </div>\\r\\n</div>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/table/editor.html';\nvar html = \"<div class=editor-row>\\r\\n\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t<h5 class=section-heading>Data</h5>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-10\\\">Table Transform</label>\\r\\n      <div class=\\\"gf-form-select-wrapper max-width-15\\\">\\r\\n        <select class=gf-form-input ng-model=editor.panel.transform ng-options=\\\"k as v.description for (k, v) in editor.transformers\\\" ng-change=editor.transformChanged()></select>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=gf-form-inline>\\r\\n      <div class=gf-form>\\r\\n        <label class=\\\"gf-form-label width-10\\\">Columns</label>\\r\\n      </div>\\r\\n\\t\\t\\t<div class=gf-form ng-repeat=\\\"column in editor.panel.columns\\\">\\r\\n\\t\\t\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"pointer fa fa-remove\\\" ng-click=editor.removeColumn(column)></i>\\r\\n\\t\\t\\t\\t\\t<span>{{column.text}}</span>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form ng-show=editor.canSetColumns>\\r\\n\\t\\t\\t\\t<metric-segment segment=editor.addColumnSegment get-options=editor.getColumnOptions() on-change=editor.addColumn()></metric-segment>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=gf-form ng-hide=editor.canSetColumns>\\r\\n\\t\\t\\t\\t<label class=gf-form-label>\\r\\n\\t\\t\\t\\t\\tAuto\\r\\n\\t\\t\\t\\t\\t<info-popover mode=right-normal ng-if=editor.columnsHelpMessage>\\r\\n\\t\\t\\t\\t\\t\\t{{editor.columnsHelpMessage}}\\r\\n\\t\\t\\t\\t\\t</info-popover>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div class=\\\"section gf-form-group\\\">\\r\\n\\t\\t<h5 class=section-heading>Paging</h5>\\r\\n    <div class=gf-form>\\r\\n      <label class=\\\"gf-form-label width-8\\\">Rows per page</label>\\r\\n      <input type=number class=\\\"gf-form-input width-7\\\" placeholder=100 data-placement=right ng-model=editor.panel.pageSize ng-change=editor.render() ng-model-onblur>\\r\\n    </div>\\r\\n    <gf-form-switch class=gf-form label-class=width-8 switch-class=max-width-7 label=Scroll checked=editor.panel.scroll on-change=editor.render()></gf-form-switch>\\r\\n    <div class=\\\"gf-form max-width-17\\\">\\r\\n      <label class=\\\"gf-form-label width-8\\\">Font size</label>\\r\\n      <div class=\\\"gf-form-select-wrapper width-7\\\">\\r\\n        <select class=gf-form-input ng-model=editor.panel.fontSize ng-options=\\\"f for f in editor.fontSizes\\\" ng-change=editor.render()></select>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/table/module.html';\nvar html = \"\\r\\n<div class=table-panel-container>\\r\\n\\t<div class=table-panel-header-bg ng-show=ctrl.table.rows.length></div>\\r\\n\\t<div class=table-panel-scroll ng-show=ctrl.table.rows.length>\\r\\n\\t\\t<table class=table-panel-table>\\r\\n\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t<th ng-repeat=\\\"col in ctrl.table.columns\\\" ng-if=!col.hidden>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-panel-table-header-inner pointer\\\" ng-click=\\\"ctrl.toggleColumnSort(col, $index)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t{{col.title}}\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=table-panel-table-header-controls ng-if=col.sort>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" ng-show=col.desc></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-up\\\" ng-hide=col.desc></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n\\t\\t\\t</tbody>\\r\\n\\t\\t</table>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div class=datapoints-warning ng-show=\\\"ctrl.table.rows.length===0\\\">\\r\\n\\t<span class=small>\\r\\n\\t\\tNo data to show <tip>Nothing returned by data query</tip>\\r\\n\\t</span>\\r\\n</div>\\r\\n<div class=table-panel-footer>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/text/editor.html';\nvar html = \"<div class=gf-form-group>\\r\\n\\t<div class=gf-form-inline>\\r\\n\\t\\t<div class=gf-form>\\r\\n\\t\\t\\t<span class=gf-form-label>Mode</span>\\r\\n\\t\\t\\t<span class=gf-form-select-wrapper>\\r\\n\\t\\t\\t\\t<select class=gf-form-input ng-model=ctrl.panel.mode ng-options=\\\"f for f in ['html','markdown']\\\"></select>\\r\\n\\t\\t\\t</span>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<h3 class=page-heading>Content</h3>\\r\\n\\r\\n<span ng-show=\\\"ctrl.panel.mode == 'markdown'\\\">\\r\\n\\t(This area uses <a target=_blank href=http://en.wikipedia.org/wiki/Markdown>Markdown</a>. HTML is not supported)\\r\\n</span>\\r\\n\\r\\n<div class=gf-form-inline>\\r\\n\\t<div class=\\\"gf-form gf-form--grow\\\">\\r\\n\\t\\t<code-editor content=ctrl.panel.content on-change=ctrl.render() data-mode=markdown data-max-lines=20 code-editor-focus=true>\\r\\n\\t\\t</code-editor>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/text/module.html';\nvar html = \"<p class=\\\"markdown-html panel-text-content\\\" ng-bind-html=ctrl.content ng-show=ctrl.content>\\r\\n</p>\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = 'public/app/plugins/panel/unknown/module.html';\nvar html = \"<div class=text-center style=padding-top:2rem>\\r\\n\\tUnknown panel type: <strong>{{ctrl.panel.type}}</strong>\\r\\n</div>\\r\\n\\r\\n\\r\\n\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","/* jshint ignore:start */\r\n\r\nace.define(\"ace/theme/grafana-dark\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(acequire, exports, module) {\r\n  \"use strict\";\r\n\r\n  exports.isDark = true;\r\n  exports.cssClass = \"gf-code-dark\";\r\n  exports.cssText = \".gf-code-dark .ace_gutter {\\\r\n  background: #2f3129;\\\r\n  color: #8f908a\\\r\n  }\\\r\n  .gf-code-dark .ace_print-margin {\\\r\n  width: 1px;\\\r\n  background: #555651\\\r\n  }\\\r\n  .gf-code-dark {\\\r\n  background-color: #111;\\\r\n  color: #e0e0e0\\\r\n  }\\\r\n  .gf-code-dark .ace_cursor {\\\r\n  color: #f8f8f0\\\r\n  }\\\r\n  .gf-code-dark .ace_marker-layer .ace_selection {\\\r\n  background: #49483e\\\r\n  }\\\r\n  .gf-code-dark.ace_multiselect .ace_selection.ace_start {\\\r\n  box-shadow: 0 0 3px 0px #272822;\\\r\n  }\\\r\n  .gf-code-dark .ace_marker-layer .ace_step {\\\r\n  background: rgb(102, 82, 0)\\\r\n  }\\\r\n  .gf-code-dark .ace_marker-layer .ace_bracket {\\\r\n  margin: -1px 0 0 -1px;\\\r\n  border: 1px solid #49483e\\\r\n  }\\\r\n  .gf-code-dark .ace_marker-layer .ace_active-line {\\\r\n  background: #202020\\\r\n  }\\\r\n  .gf-code-dark .ace_gutter-active-line {\\\r\n  background-color: #272727\\\r\n  }\\\r\n  .gf-code-dark .ace_marker-layer .ace_selected-word {\\\r\n  border: 1px solid #49483e\\\r\n  }\\\r\n  .gf-code-dark .ace_invisible {\\\r\n  color: #52524d\\\r\n  }\\\r\n  .gf-code-dark .ace_entity.ace_name.ace_tag,\\\r\n  .gf-code-dark .ace_keyword,\\\r\n  .gf-code-dark .ace_meta.ace_tag,\\\r\n  .gf-code-dark .ace_storage {\\\r\n  color: #66d9ef\\\r\n  }\\\r\n  .gf-code-dark .ace_punctuation,\\\r\n  .gf-code-dark .ace_punctuation.ace_tag {\\\r\n  color: #fff\\\r\n  }\\\r\n  .gf-code-dark .ace_constant.ace_character,\\\r\n  .gf-code-dark .ace_constant.ace_language,\\\r\n  .gf-code-dark .ace_constant.ace_numeric,\\\r\n  .gf-code-dark .ace_constant.ace_other {\\\r\n  color: #fe85fc\\\r\n  }\\\r\n  .gf-code-dark .ace_invalid {\\\r\n  color: #f8f8f0;\\\r\n  background-color: #f92672\\\r\n  }\\\r\n  .gf-code-dark .ace_invalid.ace_deprecated {\\\r\n  color: #f8f8f0;\\\r\n  background-color: #ae81ff\\\r\n  }\\\r\n  .gf-code-dark .ace_support.ace_constant,\\\r\n  .gf-code-dark .ace_support.ace_function {\\\r\n  color: #59e6e3\\\r\n  }\\\r\n  .gf-code-dark .ace_fold {\\\r\n  background-color: #a6e22e;\\\r\n  border-color: #f8f8f2\\\r\n  }\\\r\n  .gf-code-dark .ace_storage.ace_type,\\\r\n  .gf-code-dark .ace_support.ace_class,\\\r\n  .gf-code-dark .ace_support.ace_type {\\\r\n  font-style: italic;\\\r\n  color: #66d9ef\\\r\n  }\\\r\n  .gf-code-dark .ace_entity.ace_name.ace_function,\\\r\n  .gf-code-dark .ace_entity.ace_other,\\\r\n  .gf-code-dark .ace_entity.ace_other.ace_attribute-name,\\\r\n  .gf-code-dark .ace_variable {\\\r\n  color: #a6e22e\\\r\n  }\\\r\n  .gf-code-dark .ace_variable.ace_parameter {\\\r\n  font-style: italic;\\\r\n  color: #fd971f\\\r\n  }\\\r\n  .gf-code-dark .ace_string {\\\r\n  color: #74e680\\\r\n  }\\\r\n  .gf-code-dark .ace_paren {\\\r\n    color: #f0a842\\\r\n  }\\\r\n  .gf-code-dark .ace_operator {\\\r\n    color: #FFF\\\r\n  }\\\r\n  .gf-code-dark .ace_comment {\\\r\n  color: #75715e\\\r\n  }\\\r\n  .gf-code-dark .ace_indent-guide {\\\r\n  background: url(data:image/png;base64,ivborw0kggoaaaansuheugaaaaeaaaaccayaaaczgbynaaaaekleqvqimwpq0fd0zxbzd/wpaajvaoxesgneaaaaaelftksuqmcc) right repeat-y\\\r\n  }\";\r\n\r\n  var dom = acequire(\"../lib/dom\");\r\n  dom.importCssString(exports.cssText, exports.cssClass);\r\n});\r\n\r\n/* jshint ignore:end */\r\n","import { DataSource } from '../../../types';\r\n\r\nexport const getDataSources = state => {\r\n  const regex = new RegExp(state.searchQuery, 'i');\r\n\r\n  return state.dataSources.filter(dataSource => {\r\n    return regex.test(dataSource.name) || regex.test(dataSource.database);\r\n  });\r\n};\r\n\r\nexport const getDataSourceTypes = state => {\r\n  const regex = new RegExp(state.dataSourceTypeSearchQuery, 'i');\r\n\r\n  return state.dataSourceTypes.filter(type => {\r\n    return regex.test(type.name);\r\n  });\r\n};\r\n\r\nexport const getDataSource = (state, dataSourceId): DataSource | null => {\r\n  if (state.dataSource.id === parseInt(dataSourceId, 10)) {\r\n    return state.dataSource;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getDataSourcesSearchQuery = state => state.searchQuery;\r\nexport const getDataSourcesLayoutMode = state => state.layoutMode;\r\nexport const getDataSourcesCount = state => state.dataSourcesCount;\r\n","// based on http://www.paciellogroup.com/blog/2012/04/how-to-remove-css-outlines-in-an-accessible-manner/\r\nfunction outlineFixer() {\r\n  const d: any = document;\r\n\r\n  const styleElement = d.createElement('STYLE');\r\n  const domEvents = 'addEventListener' in d;\r\n\r\n  const addEventListener = (type, callback) => {\r\n    // Basic cross-browser event handling\r\n    if (domEvents) {\r\n      d.addEventListener(type, callback);\r\n    } else {\r\n      d.attachEvent('on' + type, callback);\r\n    }\r\n  };\r\n\r\n  const setCss = cssText => {\r\n    // Handle setting of <style> element contents in IE8\r\n    !!styleElement.styleSheet ? (styleElement.styleSheet.cssText = cssText) : (styleElement.innerHTML = cssText);\r\n  };\r\n\r\n  d.getElementsByTagName('HEAD')[0].appendChild(styleElement);\r\n\r\n  // Using mousedown instead of mouseover, so that previously focused elements don't lose focus ring on mouse move\r\n  addEventListener('mousedown', () => {\r\n    setCss(':focus{outline:0 !important}::-moz-focus-inner{border:0;}');\r\n  });\r\n\r\n  addEventListener('keydown', () => {\r\n    setCss('');\r\n  });\r\n}\r\n\r\noutlineFixer();\r\n","// Spectrum Colorpicker v1.7.0\r\n// https://github.com/bgrins/spectrum\r\n// Author: Brian Grinstead\r\n// License: MIT\r\n\r\n(function (factory) {\r\n    \"use strict\";\r\n\r\n    if (typeof define === 'function' && define.amd) { // AMD\r\n        define(['jquery'], factory);\r\n    }\r\n    else if (typeof exports == \"object\" && typeof module == \"object\") { // CommonJS\r\n        module.exports = factory;\r\n    }\r\n    else { // Browser\r\n        factory(jQuery);\r\n    }\r\n})(function($, undefined) {\r\n    \"use strict\";\r\n\r\n    var defaultOpts = {\r\n\r\n        // Callbacks\r\n        beforeShow: noop,\r\n        move: noop,\r\n        change: noop,\r\n        show: noop,\r\n        hide: noop,\r\n\r\n        // Options\r\n        color: false,\r\n        flat: false,\r\n        showInput: false,\r\n        allowEmpty: false,\r\n        showButtons: true,\r\n        clickoutFiresChange: true,\r\n        showInitial: false,\r\n        showPalette: false,\r\n        showPaletteOnly: false,\r\n        hideAfterPaletteSelect: false,\r\n        togglePaletteOnly: false,\r\n        showSelectionPalette: true,\r\n        localStorageKey: false,\r\n        appendTo: \"body\",\r\n        maxSelectionSize: 7,\r\n        cancelText: \"cancel\",\r\n        chooseText: \"choose\",\r\n        togglePaletteMoreText: \"more\",\r\n        togglePaletteLessText: \"less\",\r\n        clearText: \"Clear Color Selection\",\r\n        noColorSelectedText: \"No Color Selected\",\r\n        preferredFormat: false,\r\n        className: \"\", // Deprecated - use containerClassName and replacerClassName instead.\r\n        containerClassName: \"\",\r\n        replacerClassName: \"\",\r\n        showAlpha: false,\r\n        theme: \"sp-light\",\r\n        palette: [[\"#ffffff\", \"#000000\", \"#ff0000\", \"#ff8000\", \"#ffff00\", \"#008000\", \"#0000ff\", \"#4b0082\", \"#9400d3\"]],\r\n        selectionPalette: [],\r\n        disabled: false,\r\n        offset: null\r\n    },\r\n    spectrums = [],\r\n    IE = !!/msie/i.exec( window.navigator.userAgent ),\r\n    rgbaSupport = (function() {\r\n        function contains( str, substr ) {\r\n            return !!~('' + str).indexOf(substr);\r\n        }\r\n\r\n        var elem = document.createElement('div');\r\n        var style = elem.style;\r\n        style.cssText = 'background-color:rgba(0,0,0,.5)';\r\n        return contains(style.backgroundColor, 'rgba') || contains(style.backgroundColor, 'hsla');\r\n    })(),\r\n    replaceInput = [\r\n        \"<div class='sp-replacer'>\",\r\n            \"<div class='sp-preview'><div class='sp-preview-inner'></div></div>\",\r\n            \"<div class='sp-dd'>&#9660;</div>\",\r\n        \"</div>\"\r\n    ].join(''),\r\n    markup = (function () {\r\n\r\n        // IE does not support gradients with multiple stops, so we need to simulate\r\n        //  that for the rainbow slider with 8 divs that each have a single gradient\r\n        var gradientFix = \"\";\r\n        if (IE) {\r\n            for (var i = 1; i <= 6; i++) {\r\n                gradientFix += \"<div class='sp-\" + i + \"'></div>\";\r\n            }\r\n        }\r\n\r\n        return [\r\n            \"<div class='sp-container sp-hidden'>\",\r\n                \"<div class='sp-palette-container'>\",\r\n                    \"<div class='sp-palette sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-palette-button-container sp-cf'>\",\r\n                        \"<button type='button' class='sp-palette-toggle'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n                \"<div class='sp-picker-container'>\",\r\n                    \"<div class='sp-top sp-cf'>\",\r\n                        \"<div class='sp-fill'></div>\",\r\n                        \"<div class='sp-top-inner'>\",\r\n                            \"<div class='sp-color'>\",\r\n                                \"<div class='sp-sat'>\",\r\n                                    \"<div class='sp-val'>\",\r\n                                        \"<div class='sp-dragger'></div>\",\r\n                                    \"</div>\",\r\n                                \"</div>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-clear sp-clear-display'>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-hue'>\",\r\n                                \"<div class='sp-slider'></div>\",\r\n                                gradientFix,\r\n                            \"</div>\",\r\n                        \"</div>\",\r\n                        \"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-input-container sp-cf'>\",\r\n                        \"<input class='sp-input' type='text' spellcheck='false'  />\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-initial sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-button-container sp-cf'>\",\r\n                        \"<a class='sp-cancel' href='#'></a>\",\r\n                        \"<button type='button' class='sp-choose'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n            \"</div>\"\r\n        ].join(\"\");\r\n    })();\r\n\r\n    function paletteTemplate (p, color, className, opts) {\r\n        var html = [];\r\n        for (var i = 0; i < p.length; i++) {\r\n            var current = p[i];\r\n            if(current) {\r\n                var tiny = tinycolor(current);\r\n                var c = tiny.toHsl().l < 0.5 ? \"sp-thumb-el sp-thumb-dark\" : \"sp-thumb-el sp-thumb-light\";\r\n                c += (tinycolor.equals(color, current)) ? \" sp-thumb-active\" : \"\";\r\n                var formattedString = tiny.toString(opts.preferredFormat || \"rgb\");\r\n                var swatchStyle = rgbaSupport ? (\"background-color:\" + tiny.toRgbString()) : \"filter:\" + tiny.toFilter();\r\n                html.push('<span title=\"' + formattedString + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\" /></span>');\r\n            } else {\r\n                var cls = 'sp-clear-display';\r\n                html.push($('<div />')\r\n                    .append($('<span data-color=\"\" style=\"background-color:transparent;\" class=\"' + cls + '\"></span>')\r\n                        .attr('title', opts.noColorSelectedText)\r\n                    )\r\n                    .html()\r\n                );\r\n            }\r\n        }\r\n        return \"<div class='sp-cf \" + className + \"'>\" + html.join('') + \"</div>\";\r\n    }\r\n\r\n    function hideAll() {\r\n        for (var i = 0; i < spectrums.length; i++) {\r\n            if (spectrums[i]) {\r\n                spectrums[i].hide();\r\n            }\r\n        }\r\n    }\r\n\r\n    function instanceOptions(o, callbackContext) {\r\n        var opts = $.extend({}, defaultOpts, o);\r\n        opts.callbacks = {\r\n            'move': bind(opts.move, callbackContext),\r\n            'change': bind(opts.change, callbackContext),\r\n            'show': bind(opts.show, callbackContext),\r\n            'hide': bind(opts.hide, callbackContext),\r\n            'beforeShow': bind(opts.beforeShow, callbackContext)\r\n        };\r\n\r\n        return opts;\r\n    }\r\n\r\n    function spectrum(element, o) {\r\n\r\n        var opts = instanceOptions(o, element),\r\n            flat = opts.flat,\r\n            showSelectionPalette = opts.showSelectionPalette,\r\n            localStorageKey = opts.localStorageKey,\r\n            theme = opts.theme,\r\n            callbacks = opts.callbacks,\r\n            resize = throttle(reflow, 10),\r\n            visible = false,\r\n            isDragging = false,\r\n            dragWidth = 0,\r\n            dragHeight = 0,\r\n            dragHelperHeight = 0,\r\n            slideHeight = 0,\r\n            slideWidth = 0,\r\n            alphaWidth = 0,\r\n            alphaSlideHelperWidth = 0,\r\n            slideHelperHeight = 0,\r\n            currentHue = 0,\r\n            currentSaturation = 0,\r\n            currentValue = 0,\r\n            currentAlpha = 1,\r\n            palette = [],\r\n            paletteArray = [],\r\n            paletteLookup = {},\r\n            selectionPalette = opts.selectionPalette.slice(0),\r\n            maxSelectionSize = opts.maxSelectionSize,\r\n            draggingClass = \"sp-dragging\",\r\n            shiftMovementDirection = null;\r\n\r\n        var doc = element.ownerDocument,\r\n            body = doc.body,\r\n            boundElement = $(element),\r\n            disabled = false,\r\n            container = $(markup, doc).addClass(theme),\r\n            pickerContainer = container.find(\".sp-picker-container\"),\r\n            dragger = container.find(\".sp-color\"),\r\n            dragHelper = container.find(\".sp-dragger\"),\r\n            slider = container.find(\".sp-hue\"),\r\n            slideHelper = container.find(\".sp-slider\"),\r\n            alphaSliderInner = container.find(\".sp-alpha-inner\"),\r\n            alphaSlider = container.find(\".sp-alpha\"),\r\n            alphaSlideHelper = container.find(\".sp-alpha-handle\"),\r\n            textInput = container.find(\".sp-input\"),\r\n            paletteContainer = container.find(\".sp-palette\"),\r\n            initialColorContainer = container.find(\".sp-initial\"),\r\n            cancelButton = container.find(\".sp-cancel\"),\r\n            clearButton = container.find(\".sp-clear\"),\r\n            chooseButton = container.find(\".sp-choose\"),\r\n            toggleButton = container.find(\".sp-palette-toggle\"),\r\n            isInput = boundElement.is(\"input\"),\r\n            isInputTypeColor = isInput && boundElement.attr(\"type\") === \"color\" && inputTypeColorSupport(),\r\n            shouldReplace = isInput && !flat,\r\n            replacer = (shouldReplace) ? $(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName) : $([]),\r\n            offsetElement = (shouldReplace) ? replacer : boundElement,\r\n            previewElement = replacer.find(\".sp-preview-inner\"),\r\n            initialColor = opts.color || (isInput && boundElement.val()),\r\n            colorOnShow = false,\r\n            preferredFormat = opts.preferredFormat,\r\n            currentPreferredFormat = preferredFormat,\r\n            clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\r\n            isEmpty = !initialColor,\r\n            allowEmpty = opts.allowEmpty && !isInputTypeColor;\r\n\r\n        function applyOptions() {\r\n\r\n            if (opts.showPaletteOnly) {\r\n                opts.showPalette = true;\r\n            }\r\n\r\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\r\n\r\n            if (opts.palette) {\r\n                palette = opts.palette.slice(0);\r\n                paletteArray = $.isArray(palette[0]) ? palette : [palette];\r\n                paletteLookup = {};\r\n                for (var i = 0; i < paletteArray.length; i++) {\r\n                    for (var j = 0; j < paletteArray[i].length; j++) {\r\n                        var rgb = tinycolor(paletteArray[i][j]).toRgbString();\r\n                        paletteLookup[rgb] = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            container.toggleClass(\"sp-flat\", flat);\r\n            container.toggleClass(\"sp-input-disabled\", !opts.showInput);\r\n            container.toggleClass(\"sp-alpha-enabled\", opts.showAlpha);\r\n            container.toggleClass(\"sp-clear-enabled\", allowEmpty);\r\n            container.toggleClass(\"sp-buttons-disabled\", !opts.showButtons);\r\n            container.toggleClass(\"sp-palette-buttons-disabled\", !opts.togglePaletteOnly);\r\n            container.toggleClass(\"sp-palette-disabled\", !opts.showPalette);\r\n            container.toggleClass(\"sp-palette-only\", opts.showPaletteOnly);\r\n            container.toggleClass(\"sp-initial-disabled\", !opts.showInitial);\r\n            container.addClass(opts.className).addClass(opts.containerClassName);\r\n\r\n            reflow();\r\n        }\r\n\r\n        function initialize() {\r\n\r\n            if (IE) {\r\n                container.find(\"*:not(input)\").attr(\"unselectable\", \"on\");\r\n            }\r\n\r\n            applyOptions();\r\n\r\n            if (shouldReplace) {\r\n                boundElement.after(replacer).hide();\r\n            }\r\n\r\n            if (!allowEmpty) {\r\n                clearButton.hide();\r\n            }\r\n\r\n            if (flat) {\r\n                boundElement.after(container).hide();\r\n            }\r\n            else {\r\n\r\n                var appendTo = opts.appendTo === \"parent\" ? boundElement.parent() : $(opts.appendTo);\r\n                if (appendTo.length !== 1) {\r\n                    appendTo = $(\"body\");\r\n                }\r\n\r\n                appendTo.append(container);\r\n            }\r\n\r\n            updateSelectionPaletteFromStorage();\r\n\r\n            offsetElement.bind(\"click.spectrum touchstart.spectrum\", function (e) {\r\n                if (!disabled) {\r\n                    toggle();\r\n                }\r\n\r\n                e.stopPropagation();\r\n\r\n                if (!$(e.target).is(\"input\")) {\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n\r\n            if(boundElement.is(\":disabled\") || (opts.disabled === true)) {\r\n                disable();\r\n            }\r\n\r\n            // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\r\n            container.click(stopPropagation);\r\n\r\n            // Handle user typed input\r\n            textInput.change(setFromTextInput);\r\n            textInput.bind(\"paste\", function () {\r\n                setTimeout(setFromTextInput, 1);\r\n            });\r\n            textInput.keydown(function (e) { if (e.keyCode == 13) { setFromTextInput(); } });\r\n\r\n            cancelButton.text(opts.cancelText);\r\n            cancelButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                revert();\r\n                hide();\r\n            });\r\n\r\n            clearButton.attr(\"title\", opts.clearText);\r\n            clearButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                isEmpty = true;\r\n                move();\r\n\r\n                if(flat) {\r\n                    //for the flat style, this is a change event\r\n                    updateOriginalInput(true);\r\n                }\r\n            });\r\n\r\n            chooseButton.text(opts.chooseText);\r\n            chooseButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                if (IE && textInput.is(\":focus\")) {\r\n                    textInput.trigger('change');\r\n                }\r\n\r\n                if (isValid()) {\r\n                    updateOriginalInput(true);\r\n                    hide();\r\n                }\r\n            });\r\n\r\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\r\n            toggleButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                opts.showPaletteOnly = !opts.showPaletteOnly;\r\n\r\n                // To make sure the Picker area is drawn on the right, next to the\r\n                // Palette area (and not below the palette), first move the Palette\r\n                // to the left to make space for the picker, plus 5px extra.\r\n                // The 'applyOptions' function puts the whole container back into place\r\n                // and takes care of the button-text and the sp-palette-only CSS class.\r\n                if (!opts.showPaletteOnly && !flat) {\r\n                    container.css('left', '-=' + (pickerContainer.outerWidth(true) + 5));\r\n                }\r\n                applyOptions();\r\n            });\r\n\r\n            draggable(alphaSlider, function (dragX, dragY, e) {\r\n                currentAlpha = (dragX / alphaWidth);\r\n                isEmpty = false;\r\n                if (e.shiftKey) {\r\n                    currentAlpha = Math.round(currentAlpha * 10) / 10;\r\n                }\r\n\r\n                move();\r\n            }, dragStart, dragStop);\r\n\r\n            draggable(slider, function (dragX, dragY) {\r\n                currentHue = parseFloat(dragY / slideHeight);\r\n                isEmpty = false;\r\n                if (!opts.showAlpha) {\r\n                    currentAlpha = 1;\r\n                }\r\n                move();\r\n            }, dragStart, dragStop);\r\n\r\n            draggable(dragger, function (dragX, dragY, e) {\r\n\r\n                // shift+drag should snap the movement to either the x or y axis.\r\n                if (!e.shiftKey) {\r\n                    shiftMovementDirection = null;\r\n                }\r\n                else if (!shiftMovementDirection) {\r\n                    var oldDragX = currentSaturation * dragWidth;\r\n                    var oldDragY = dragHeight - (currentValue * dragHeight);\r\n                    var furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\r\n\r\n                    shiftMovementDirection = furtherFromX ? \"x\" : \"y\";\r\n                }\r\n\r\n                var setSaturation = !shiftMovementDirection || shiftMovementDirection === \"x\";\r\n                var setValue = !shiftMovementDirection || shiftMovementDirection === \"y\";\r\n\r\n                if (setSaturation) {\r\n                    currentSaturation = parseFloat(dragX / dragWidth);\r\n                }\r\n                if (setValue) {\r\n                    currentValue = parseFloat((dragHeight - dragY) / dragHeight);\r\n                }\r\n\r\n                isEmpty = false;\r\n                if (!opts.showAlpha) {\r\n                    currentAlpha = 1;\r\n                }\r\n\r\n                move();\r\n\r\n            }, dragStart, dragStop);\r\n\r\n            if (!!initialColor) {\r\n                set(initialColor);\r\n\r\n                // In case color was black - update the preview UI and set the format\r\n                // since the set function will not run (default color is black).\r\n                updateUI();\r\n                currentPreferredFormat = preferredFormat || tinycolor(initialColor).format;\r\n\r\n                addColorToSelectionPalette(initialColor);\r\n            }\r\n            else {\r\n                updateUI();\r\n            }\r\n\r\n            if (flat) {\r\n                show();\r\n            }\r\n\r\n            function paletteElementClick(e) {\r\n                if (e.data && e.data.ignore) {\r\n                    set($(e.target).closest(\".sp-thumb-el\").data(\"color\"));\r\n                    move();\r\n                }\r\n                else {\r\n                    set($(e.target).closest(\".sp-thumb-el\").data(\"color\"));\r\n                    move();\r\n                    updateOriginalInput(true);\r\n                    if (opts.hideAfterPaletteSelect) {\r\n                      hide();\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            var paletteEvent = IE ? \"mousedown.spectrum\" : \"click.spectrum touchstart.spectrum\";\r\n            paletteContainer.delegate(\".sp-thumb-el\", paletteEvent, paletteElementClick);\r\n            initialColorContainer.delegate(\".sp-thumb-el:nth-child(1)\", paletteEvent, { ignore: true }, paletteElementClick);\r\n        }\r\n\r\n        function updateSelectionPaletteFromStorage() {\r\n\r\n            if (localStorageKey && window.localStorage) {\r\n\r\n                // Migrate old palettes over to new format.  May want to remove this eventually.\r\n                try {\r\n                    var oldPalette = window.localStorage[localStorageKey].split(\",#\");\r\n                    if (oldPalette.length > 1) {\r\n                        delete window.localStorage[localStorageKey];\r\n                        $.each(oldPalette, function(i, c) {\r\n                             addColorToSelectionPalette(c);\r\n                        });\r\n                    }\r\n                }\r\n                catch(e) { }\r\n\r\n                try {\r\n                    selectionPalette = window.localStorage[localStorageKey].split(\";\");\r\n                }\r\n                catch (e) { }\r\n            }\r\n        }\r\n\r\n        function addColorToSelectionPalette(color) {\r\n            if (showSelectionPalette) {\r\n                var rgb = tinycolor(color).toRgbString();\r\n                if (!paletteLookup[rgb] && $.inArray(rgb, selectionPalette) === -1) {\r\n                    selectionPalette.push(rgb);\r\n                    while(selectionPalette.length > maxSelectionSize) {\r\n                        selectionPalette.shift();\r\n                    }\r\n                }\r\n\r\n                if (localStorageKey && window.localStorage) {\r\n                    try {\r\n                        window.localStorage[localStorageKey] = selectionPalette.join(\";\");\r\n                    }\r\n                    catch(e) { }\r\n                }\r\n            }\r\n        }\r\n\r\n        function getUniqueSelectionPalette() {\r\n            var unique = [];\r\n            if (opts.showPalette) {\r\n                for (var i = 0; i < selectionPalette.length; i++) {\r\n                    var rgb = tinycolor(selectionPalette[i]).toRgbString();\r\n\r\n                    if (!paletteLookup[rgb]) {\r\n                        unique.push(selectionPalette[i]);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return unique.reverse().slice(0, opts.maxSelectionSize);\r\n        }\r\n\r\n        function drawPalette() {\r\n\r\n            var currentColor = get();\r\n\r\n            var html = $.map(paletteArray, function (palette, i) {\r\n                return paletteTemplate(palette, currentColor, \"sp-palette-row sp-palette-row-\" + i, opts);\r\n            });\r\n\r\n            updateSelectionPaletteFromStorage();\r\n\r\n            if (selectionPalette) {\r\n                html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, \"sp-palette-row sp-palette-row-selection\", opts));\r\n            }\r\n\r\n            paletteContainer.html(html.join(\"\"));\r\n        }\r\n\r\n        function drawInitial() {\r\n            if (opts.showInitial) {\r\n                var initial = colorOnShow;\r\n                var current = get();\r\n                initialColorContainer.html(paletteTemplate([initial, current], current, \"sp-palette-row-initial\", opts));\r\n            }\r\n        }\r\n\r\n        function dragStart() {\r\n            if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\r\n                reflow();\r\n            }\r\n            isDragging = true;\r\n            container.addClass(draggingClass);\r\n            shiftMovementDirection = null;\r\n            boundElement.trigger('dragstart.spectrum', [ get() ]);\r\n        }\r\n\r\n        function dragStop() {\r\n            isDragging = false;\r\n            container.removeClass(draggingClass);\r\n            boundElement.trigger('dragstop.spectrum', [ get() ]);\r\n        }\r\n\r\n        function setFromTextInput() {\r\n\r\n            var value = textInput.val();\r\n\r\n            if ((value === null || value === \"\") && allowEmpty) {\r\n                set(null);\r\n                updateOriginalInput(true);\r\n            }\r\n            else {\r\n                var tiny = tinycolor(value);\r\n                if (tiny.isValid()) {\r\n                    set(tiny);\r\n                    updateOriginalInput(true);\r\n                }\r\n                else {\r\n                    textInput.addClass(\"sp-validation-error\");\r\n                }\r\n            }\r\n        }\r\n\r\n        function toggle() {\r\n            if (visible) {\r\n                hide();\r\n            }\r\n            else {\r\n                show();\r\n            }\r\n        }\r\n\r\n        function show() {\r\n            var event = $.Event('beforeShow.spectrum');\r\n\r\n            if (visible) {\r\n                reflow();\r\n                return;\r\n            }\r\n\r\n            boundElement.trigger(event, [ get() ]);\r\n\r\n            if (callbacks.beforeShow(get()) === false || event.isDefaultPrevented()) {\r\n                return;\r\n            }\r\n\r\n            hideAll();\r\n            visible = true;\r\n\r\n            $(doc).bind(\"keydown.spectrum\", onkeydown);\r\n            $(doc).bind(\"click.spectrum\", clickout);\r\n            $(window).bind(\"resize.spectrum\", resize);\r\n            replacer.addClass(\"sp-active\");\r\n            container.removeClass(\"sp-hidden\");\r\n\r\n            reflow();\r\n            updateUI();\r\n\r\n            colorOnShow = get();\r\n\r\n            drawInitial();\r\n            callbacks.show(colorOnShow);\r\n            boundElement.trigger('show.spectrum', [ colorOnShow ]);\r\n        }\r\n\r\n        function onkeydown(e) {\r\n            // Close on ESC\r\n            if (e.keyCode === 27) {\r\n                hide();\r\n            }\r\n        }\r\n\r\n        function clickout(e) {\r\n            // Return on right click.\r\n            if (e.button == 2) { return; }\r\n\r\n            // If a drag event was happening during the mouseup, don't hide\r\n            // on click.\r\n            if (isDragging) { return; }\r\n\r\n            if (clickoutFiresChange) {\r\n                updateOriginalInput(true);\r\n            }\r\n            else {\r\n                revert();\r\n            }\r\n            hide();\r\n        }\r\n\r\n        function hide() {\r\n            // Return if hiding is unnecessary\r\n            if (!visible || flat) { return; }\r\n            visible = false;\r\n\r\n            $(doc).unbind(\"keydown.spectrum\", onkeydown);\r\n            $(doc).unbind(\"click.spectrum\", clickout);\r\n            $(window).unbind(\"resize.spectrum\", resize);\r\n\r\n            replacer.removeClass(\"sp-active\");\r\n            container.addClass(\"sp-hidden\");\r\n\r\n            callbacks.hide(get());\r\n            boundElement.trigger('hide.spectrum', [ get() ]);\r\n        }\r\n\r\n        function revert() {\r\n            set(colorOnShow, true);\r\n        }\r\n\r\n        function set(color, ignoreFormatChange) {\r\n            if (tinycolor.equals(color, get())) {\r\n                // Update UI just in case a validation error needs\r\n                // to be cleared.\r\n                updateUI();\r\n                return;\r\n            }\r\n\r\n            var newColor, newHsv;\r\n            if (!color && allowEmpty) {\r\n                isEmpty = true;\r\n            } else {\r\n                isEmpty = false;\r\n                newColor = tinycolor(color);\r\n                newHsv = newColor.toHsv();\r\n\r\n                currentHue = (newHsv.h % 360) / 360;\r\n                currentSaturation = newHsv.s;\r\n                currentValue = newHsv.v;\r\n                currentAlpha = newHsv.a;\r\n            }\r\n            updateUI();\r\n\r\n            if (newColor && newColor.isValid() && !ignoreFormatChange) {\r\n                currentPreferredFormat = preferredFormat || newColor.getFormat();\r\n            }\r\n        }\r\n\r\n        function get(opts) {\r\n            opts = opts || { };\r\n\r\n            if (allowEmpty && isEmpty) {\r\n                return null;\r\n            }\r\n\r\n            return tinycolor.fromRatio({\r\n                h: currentHue,\r\n                s: currentSaturation,\r\n                v: currentValue,\r\n                a: Math.round(currentAlpha * 100) / 100\r\n            }, { format: opts.format || currentPreferredFormat });\r\n        }\r\n\r\n        function isValid() {\r\n            return !textInput.hasClass(\"sp-validation-error\");\r\n        }\r\n\r\n        function move() {\r\n            updateUI();\r\n\r\n            callbacks.move(get());\r\n            boundElement.trigger('move.spectrum', [ get() ]);\r\n        }\r\n\r\n        function updateUI() {\r\n\r\n            textInput.removeClass(\"sp-validation-error\");\r\n\r\n            updateHelperLocations();\r\n\r\n            // Update dragger background color (gradients take care of saturation and value).\r\n            var flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\r\n            dragger.css(\"background-color\", flatColor.toHexString());\r\n\r\n            // Get a format that alpha will be included in (hex and names ignore alpha)\r\n            var format = currentPreferredFormat;\r\n            if (currentAlpha < 1 && !(currentAlpha === 0 && format === \"name\")) {\r\n                if (format === \"hex\" || format === \"hex3\" || format === \"hex6\" || format === \"name\") {\r\n                    format = \"rgb\";\r\n                }\r\n            }\r\n\r\n            var realColor = get({ format: format }),\r\n                displayColor = '';\r\n\r\n             //reset background info for preview element\r\n            previewElement.removeClass(\"sp-clear-display\");\r\n            previewElement.css('background-color', 'transparent');\r\n\r\n            if (!realColor && allowEmpty) {\r\n                // Update the replaced elements background with icon indicating no color selection\r\n                previewElement.addClass(\"sp-clear-display\");\r\n            }\r\n            else {\r\n                var realHex = realColor.toHexString(),\r\n                    realRgb = realColor.toRgbString();\r\n\r\n                // Update the replaced elements background color (with actual selected color)\r\n                if (rgbaSupport || realColor.alpha === 1) {\r\n                    previewElement.css(\"background-color\", realRgb);\r\n                }\r\n                else {\r\n                    previewElement.css(\"background-color\", \"transparent\");\r\n                    previewElement.css(\"filter\", realColor.toFilter());\r\n                }\r\n\r\n                if (opts.showAlpha) {\r\n                    var rgb = realColor.toRgb();\r\n                    rgb.a = 0;\r\n                    var realAlpha = tinycolor(rgb).toRgbString();\r\n                    var gradient = \"linear-gradient(left, \" + realAlpha + \", \" + realHex + \")\";\r\n\r\n                    if (IE) {\r\n                        alphaSliderInner.css(\"filter\", tinycolor(realAlpha).toFilter({ gradientType: 1 }, realHex));\r\n                    }\r\n                    else {\r\n                        alphaSliderInner.css(\"background\", \"-webkit-\" + gradient);\r\n                        alphaSliderInner.css(\"background\", \"-moz-\" + gradient);\r\n                        alphaSliderInner.css(\"background\", \"-ms-\" + gradient);\r\n                        // Use current syntax gradient on unprefixed property.\r\n                        alphaSliderInner.css(\"background\",\r\n                            \"linear-gradient(to right, \" + realAlpha + \", \" + realHex + \")\");\r\n                    }\r\n                }\r\n\r\n                displayColor = realColor.toString(format);\r\n            }\r\n\r\n            // Update the text entry input as it changes happen\r\n            if (opts.showInput) {\r\n                textInput.val(displayColor);\r\n            }\r\n\r\n            if (opts.showPalette) {\r\n                drawPalette();\r\n            }\r\n\r\n            drawInitial();\r\n        }\r\n\r\n        function updateHelperLocations() {\r\n            var s = currentSaturation;\r\n            var v = currentValue;\r\n\r\n            if(allowEmpty && isEmpty) {\r\n                //if selected color is empty, hide the helpers\r\n                alphaSlideHelper.hide();\r\n                slideHelper.hide();\r\n                dragHelper.hide();\r\n            }\r\n            else {\r\n                //make sure helpers are visible\r\n                alphaSlideHelper.show();\r\n                slideHelper.show();\r\n                dragHelper.show();\r\n\r\n                // Where to show the little circle in that displays your current selected color\r\n                var dragX = s * dragWidth;\r\n                var dragY = dragHeight - (v * dragHeight);\r\n                dragX = Math.max(\r\n                    -dragHelperHeight,\r\n                    Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight)\r\n                );\r\n                dragY = Math.max(\r\n                    -dragHelperHeight,\r\n                    Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight)\r\n                );\r\n                dragHelper.css({\r\n                    \"top\": dragY + \"px\",\r\n                    \"left\": dragX + \"px\"\r\n                });\r\n\r\n                var alphaX = currentAlpha * alphaWidth;\r\n                alphaSlideHelper.css({\r\n                    \"left\": (alphaX - (alphaSlideHelperWidth / 2)) + \"px\"\r\n                });\r\n\r\n                // Where to show the bar that displays your current selected hue\r\n                var slideY = (currentHue) * slideHeight;\r\n                slideHelper.css({\r\n                    \"top\": (slideY - slideHelperHeight) + \"px\"\r\n                });\r\n            }\r\n        }\r\n\r\n        function updateOriginalInput(fireCallback) {\r\n            var color = get(),\r\n                displayColor = '',\r\n                hasChanged = !tinycolor.equals(color, colorOnShow);\r\n\r\n            if (color) {\r\n                displayColor = color.toString(currentPreferredFormat);\r\n                // Update the selection palette with the current color\r\n                addColorToSelectionPalette(color);\r\n            }\r\n\r\n            if (isInput) {\r\n                boundElement.val(displayColor);\r\n            }\r\n\r\n            if (fireCallback && hasChanged) {\r\n                callbacks.change(color);\r\n                boundElement.trigger('change', [ color ]);\r\n            }\r\n        }\r\n\r\n        function reflow() {\r\n            dragWidth = dragger.width();\r\n            dragHeight = dragger.height();\r\n            dragHelperHeight = dragHelper.height();\r\n            slideWidth = slider.width();\r\n            slideHeight = slider.height();\r\n            slideHelperHeight = slideHelper.height();\r\n            alphaWidth = alphaSlider.width();\r\n            alphaSlideHelperWidth = alphaSlideHelper.width();\r\n\r\n            if (!flat) {\r\n                container.css(\"position\", \"absolute\");\r\n                if (opts.offset) {\r\n                    container.offset(opts.offset);\r\n                } else {\r\n                    container.offset(getOffset(container, offsetElement));\r\n                }\r\n            }\r\n\r\n            updateHelperLocations();\r\n\r\n            if (opts.showPalette) {\r\n                drawPalette();\r\n            }\r\n\r\n            boundElement.trigger('reflow.spectrum');\r\n        }\r\n\r\n        function destroy() {\r\n            boundElement.show();\r\n            offsetElement.unbind(\"click.spectrum touchstart.spectrum\");\r\n            container.remove();\r\n            replacer.remove();\r\n            spectrums[spect.id] = null;\r\n        }\r\n\r\n        function option(optionName, optionValue) {\r\n            if (optionName === undefined) {\r\n                return $.extend({}, opts);\r\n            }\r\n            if (optionValue === undefined) {\r\n                return opts[optionName];\r\n            }\r\n\r\n            opts[optionName] = optionValue;\r\n            applyOptions();\r\n        }\r\n\r\n        function enable() {\r\n            disabled = false;\r\n            boundElement.attr(\"disabled\", false);\r\n            offsetElement.removeClass(\"sp-disabled\");\r\n        }\r\n\r\n        function disable() {\r\n            hide();\r\n            disabled = true;\r\n            boundElement.attr(\"disabled\", true);\r\n            offsetElement.addClass(\"sp-disabled\");\r\n        }\r\n\r\n        function setOffset(coord) {\r\n            opts.offset = coord;\r\n            reflow();\r\n        }\r\n\r\n        initialize();\r\n\r\n        var spect = {\r\n            show: show,\r\n            hide: hide,\r\n            toggle: toggle,\r\n            reflow: reflow,\r\n            option: option,\r\n            enable: enable,\r\n            disable: disable,\r\n            offset: setOffset,\r\n            set: function (c) {\r\n                set(c);\r\n                updateOriginalInput();\r\n            },\r\n            get: get,\r\n            destroy: destroy,\r\n            container: container\r\n        };\r\n\r\n        spect.id = spectrums.push(spect) - 1;\r\n\r\n        return spect;\r\n    }\r\n\r\n    /**\r\n    * checkOffset - get the offset below/above and left/right element depending on screen position\r\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n    */\r\n    function getOffset(picker, input) {\r\n        var extraY = 0;\r\n        var dpWidth = picker.outerWidth();\r\n        var dpHeight = picker.outerHeight();\r\n        var inputHeight = input.outerHeight();\r\n        var doc = picker[0].ownerDocument;\r\n        var docElem = doc.documentElement;\r\n        var viewWidth = docElem.clientWidth + $(doc).scrollLeft();\r\n        var viewHeight = docElem.clientHeight + $(doc).scrollTop();\r\n        var offset = input.offset();\r\n        offset.top += inputHeight;\r\n\r\n        offset.left -=\r\n            Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n            Math.abs(offset.left + dpWidth - viewWidth) : 0);\r\n\r\n        offset.top -=\r\n            Math.min(offset.top, ((offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n            Math.abs(dpHeight + inputHeight - extraY) : extraY));\r\n\r\n        return offset;\r\n    }\r\n\r\n    /**\r\n    * noop - do nothing\r\n    */\r\n    function noop() {\r\n\r\n    }\r\n\r\n    /**\r\n    * stopPropagation - makes the code only doing this a little easier to read in line\r\n    */\r\n    function stopPropagation(e) {\r\n        e.stopPropagation();\r\n    }\r\n\r\n    /**\r\n    * Create a function bound to a given object\r\n    * Thanks to underscore.js\r\n    */\r\n    function bind(func, obj) {\r\n        var slice = Array.prototype.slice;\r\n        var args = slice.call(arguments, 2);\r\n        return function () {\r\n            return func.apply(obj, args.concat(slice.call(arguments)));\r\n        };\r\n    }\r\n\r\n    /**\r\n    * Lightweight drag helper.  Handles containment within the element, so that\r\n    * when dragging, the x is within [0,element.width] and y is within [0,element.height]\r\n    */\r\n    function draggable(element, onmove, onstart, onstop) {\r\n        onmove = onmove || function () { };\r\n        onstart = onstart || function () { };\r\n        onstop = onstop || function () { };\r\n        var doc = document;\r\n        var dragging = false;\r\n        var offset = {};\r\n        var maxHeight = 0;\r\n        var maxWidth = 0;\r\n        var hasTouch = ('ontouchstart' in window);\r\n\r\n        var duringDragEvents = {};\r\n        duringDragEvents[\"selectstart\"] = prevent;\r\n        duringDragEvents[\"dragstart\"] = prevent;\r\n        duringDragEvents[\"touchmove mousemove\"] = move;\r\n        duringDragEvents[\"touchend mouseup\"] = stop;\r\n\r\n        function prevent(e) {\r\n            if (e.stopPropagation) {\r\n                e.stopPropagation();\r\n            }\r\n            if (e.preventDefault) {\r\n                e.preventDefault();\r\n            }\r\n            e.returnValue = false;\r\n        }\r\n\r\n        function move(e) {\r\n            if (dragging) {\r\n                // Mouseup happened outside of window\r\n                if (IE && doc.documentMode < 9 && !e.button) {\r\n                    return stop();\r\n                }\r\n\r\n                var t0 = e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0];\r\n                var pageX = t0 && t0.pageX || e.pageX;\r\n                var pageY = t0 && t0.pageY || e.pageY;\r\n\r\n                var dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\r\n                var dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\r\n\r\n                if (hasTouch) {\r\n                    // Stop scrolling in iOS\r\n                    prevent(e);\r\n                }\r\n\r\n                onmove.apply(element, [dragX, dragY, e]);\r\n            }\r\n        }\r\n\r\n        function start(e) {\r\n            var rightclick = (e.which) ? (e.which == 3) : (e.button == 2);\r\n\r\n            if (!rightclick && !dragging) {\r\n                if (onstart.apply(element, arguments) !== false) {\r\n                    dragging = true;\r\n                    maxHeight = $(element).height();\r\n                    maxWidth = $(element).width();\r\n                    offset = $(element).offset();\r\n\r\n                    $(doc).bind(duringDragEvents);\r\n                    $(doc.body).addClass(\"sp-dragging\");\r\n\r\n                    move(e);\r\n\r\n                    prevent(e);\r\n                }\r\n            }\r\n        }\r\n\r\n        function stop() {\r\n            if (dragging) {\r\n                $(doc).unbind(duringDragEvents);\r\n                $(doc.body).removeClass(\"sp-dragging\");\r\n\r\n                // Wait a tick before notifying observers to allow the click event\r\n                // to fire in Chrome.\r\n                setTimeout(function() {\r\n                    onstop.apply(element, arguments);\r\n                }, 0);\r\n            }\r\n            dragging = false;\r\n        }\r\n\r\n        $(element).bind(\"touchstart mousedown\", start);\r\n    }\r\n\r\n    function throttle(func, wait, debounce) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var throttler = function () {\r\n                timeout = null;\r\n                func.apply(context, args);\r\n            };\r\n            if (debounce) clearTimeout(timeout);\r\n            if (debounce || !timeout) timeout = setTimeout(throttler, wait);\r\n        };\r\n    }\r\n\r\n    function inputTypeColorSupport() {\r\n        return $.fn.spectrum.inputTypeColorSupport();\r\n    }\r\n\r\n    /**\r\n    * Define a jQuery plugin\r\n    */\r\n    var dataID = \"spectrum.id\";\r\n    $.fn.spectrum = function (opts, extra) {\r\n\r\n        if (typeof opts == \"string\") {\r\n\r\n            var returnValue = this;\r\n            var args = Array.prototype.slice.call( arguments, 1 );\r\n\r\n            this.each(function () {\r\n                var spect = spectrums[$(this).data(dataID)];\r\n                if (spect) {\r\n                    var method = spect[opts];\r\n                    if (!method) {\r\n                        throw new Error( \"Spectrum: no such method: '\" + opts + \"'\" );\r\n                    }\r\n\r\n                    if (opts == \"get\") {\r\n                        returnValue = spect.get();\r\n                    }\r\n                    else if (opts == \"container\") {\r\n                        returnValue = spect.container;\r\n                    }\r\n                    else if (opts == \"option\") {\r\n                        returnValue = spect.option.apply(spect, args);\r\n                    }\r\n                    else if (opts == \"destroy\") {\r\n                        spect.destroy();\r\n                        $(this).removeData(dataID);\r\n                    }\r\n                    else {\r\n                        method.apply(spect, args);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return returnValue;\r\n        }\r\n\r\n        // Initializing a new instance of spectrum\r\n        return this.spectrum(\"destroy\").each(function () {\r\n            var options = $.extend({}, opts, $(this).data());\r\n            var spect = spectrum(this, options);\r\n            $(this).data(dataID, spect.id);\r\n        });\r\n    };\r\n\r\n    $.fn.spectrum.load = true;\r\n    $.fn.spectrum.loadOpts = {};\r\n    $.fn.spectrum.draggable = draggable;\r\n    $.fn.spectrum.defaults = defaultOpts;\r\n    $.fn.spectrum.inputTypeColorSupport = function inputTypeColorSupport() {\r\n        if (typeof inputTypeColorSupport._cachedResult === \"undefined\") {\r\n            var colorInput = $(\"<input type='color' value='!' />\")[0];\r\n            inputTypeColorSupport._cachedResult = colorInput.type === \"color\" && colorInput.value !== \"!\";\r\n        }\r\n        return inputTypeColorSupport._cachedResult;\r\n    };\r\n\r\n    $.spectrum = { };\r\n    $.spectrum.localization = { };\r\n    $.spectrum.palettes = { };\r\n\r\n    $.fn.spectrum.processNativeColorInputs = function () {\r\n        var colorInputs = $(\"input[type=color]\");\r\n        if (colorInputs.length && !inputTypeColorSupport()) {\r\n            colorInputs.spectrum({\r\n                preferredFormat: \"hex6\"\r\n            });\r\n        }\r\n    };\r\n\r\n    // TinyColor v1.1.2\r\n    // https://github.com/bgrins/TinyColor\r\n    // Brian Grinstead, MIT License\r\n\r\n    (function() {\r\n\r\n    var trimLeft = /^[\\s,#]+/,\r\n        trimRight = /\\s+$/,\r\n        tinyCounter = 0,\r\n        math = Math,\r\n        mathRound = math.round,\r\n        mathMin = math.min,\r\n        mathMax = math.max,\r\n        mathRandom = math.random;\r\n\r\n    var tinycolor = function(color, opts) {\r\n\r\n        color = (color) ? color : '';\r\n        opts = opts || { };\r\n\r\n        // If input is already a tinycolor, return itself\r\n        if (color instanceof tinycolor) {\r\n           return color;\r\n        }\r\n        // If we are called as a function, call using new instead\r\n        if (!(this instanceof tinycolor)) {\r\n            return new tinycolor(color, opts);\r\n        }\r\n\r\n        var rgb = inputToRGB(color);\r\n        this._originalInput = color,\r\n        this._r = rgb.r,\r\n        this._g = rgb.g,\r\n        this._b = rgb.b,\r\n        this._a = rgb.a,\r\n        this._roundA = mathRound(100*this._a) / 100,\r\n        this._format = opts.format || rgb.format;\r\n        this._gradientType = opts.gradientType;\r\n\r\n        // Don't let the range of [0,255] come back in [0,1].\r\n        // Potentially lose a little bit of precision here, but will fix issues where\r\n        // .5 gets interpreted as half of the total, instead of half of 1\r\n        // If it was supposed to be 128, this was already taken care of by `inputToRgb`\r\n        if (this._r < 1) { this._r = mathRound(this._r); }\r\n        if (this._g < 1) { this._g = mathRound(this._g); }\r\n        if (this._b < 1) { this._b = mathRound(this._b); }\r\n\r\n        this._ok = rgb.ok;\r\n        this._tc_id = tinyCounter++;\r\n    };\r\n\r\n    tinycolor.prototype = {\r\n        isDark: function() {\r\n            return this.getBrightness() < 128;\r\n        },\r\n        isLight: function() {\r\n            return !this.isDark();\r\n        },\r\n        isValid: function() {\r\n            return this._ok;\r\n        },\r\n        getOriginalInput: function() {\r\n          return this._originalInput;\r\n        },\r\n        getFormat: function() {\r\n            return this._format;\r\n        },\r\n        getAlpha: function() {\r\n            return this._a;\r\n        },\r\n        getBrightness: function() {\r\n            var rgb = this.toRgb();\r\n            return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\r\n        },\r\n        setAlpha: function(value) {\r\n            this._a = boundAlpha(value);\r\n            this._roundA = mathRound(100*this._a) / 100;\r\n            return this;\r\n        },\r\n        toHsv: function() {\r\n            var hsv = rgbToHsv(this._r, this._g, this._b);\r\n            return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\r\n        },\r\n        toHsvString: function() {\r\n            var hsv = rgbToHsv(this._r, this._g, this._b);\r\n            var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\r\n            return (this._a == 1) ?\r\n              \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\r\n              \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\r\n        },\r\n        toHsl: function() {\r\n            var hsl = rgbToHsl(this._r, this._g, this._b);\r\n            return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\r\n        },\r\n        toHslString: function() {\r\n            var hsl = rgbToHsl(this._r, this._g, this._b);\r\n            var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\r\n            return (this._a == 1) ?\r\n              \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\r\n              \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\r\n        },\r\n        toHex: function(allow3Char) {\r\n            return rgbToHex(this._r, this._g, this._b, allow3Char);\r\n        },\r\n        toHexString: function(allow3Char) {\r\n            return '#' + this.toHex(allow3Char);\r\n        },\r\n        toHex8: function() {\r\n            return rgbaToHex(this._r, this._g, this._b, this._a);\r\n        },\r\n        toHex8String: function() {\r\n            return '#' + this.toHex8();\r\n        },\r\n        toRgb: function() {\r\n            return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\r\n        },\r\n        toRgbString: function() {\r\n            return (this._a == 1) ?\r\n              \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\r\n              \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\r\n        },\r\n        toPercentageRgb: function() {\r\n            return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\r\n        },\r\n        toPercentageRgbString: function() {\r\n            return (this._a == 1) ?\r\n              \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\r\n              \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\r\n        },\r\n        toName: function() {\r\n            if (this._a === 0) {\r\n                return \"transparent\";\r\n            }\r\n\r\n            if (this._a < 1) {\r\n                return false;\r\n            }\r\n\r\n            return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\r\n        },\r\n        toFilter: function(secondColor) {\r\n            var hex8String = '#' + rgbaToHex(this._r, this._g, this._b, this._a);\r\n            var secondHex8String = hex8String;\r\n            var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\r\n\r\n            if (secondColor) {\r\n                var s = tinycolor(secondColor);\r\n                secondHex8String = s.toHex8String();\r\n            }\r\n\r\n            return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\r\n        },\r\n        toString: function(format) {\r\n            var formatSet = !!format;\r\n            format = format || this._format;\r\n\r\n            var formattedString = false;\r\n            var hasAlpha = this._a < 1 && this._a >= 0;\r\n            var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"name\");\r\n\r\n            if (needsAlphaFormat) {\r\n                // Special case for \"transparent\", all other non-alpha formats\r\n                // will return rgba when there is transparency.\r\n                if (format === \"name\" && this._a === 0) {\r\n                    return this.toName();\r\n                }\r\n                return this.toRgbString();\r\n            }\r\n            if (format === \"rgb\") {\r\n                formattedString = this.toRgbString();\r\n            }\r\n            if (format === \"prgb\") {\r\n                formattedString = this.toPercentageRgbString();\r\n            }\r\n            if (format === \"hex\" || format === \"hex6\") {\r\n                formattedString = this.toHexString();\r\n            }\r\n            if (format === \"hex3\") {\r\n                formattedString = this.toHexString(true);\r\n            }\r\n            if (format === \"hex8\") {\r\n                formattedString = this.toHex8String();\r\n            }\r\n            if (format === \"name\") {\r\n                formattedString = this.toName();\r\n            }\r\n            if (format === \"hsl\") {\r\n                formattedString = this.toHslString();\r\n            }\r\n            if (format === \"hsv\") {\r\n                formattedString = this.toHsvString();\r\n            }\r\n\r\n            return formattedString || this.toHexString();\r\n        },\r\n\r\n        _applyModification: function(fn, args) {\r\n            var color = fn.apply(null, [this].concat([].slice.call(args)));\r\n            this._r = color._r;\r\n            this._g = color._g;\r\n            this._b = color._b;\r\n            this.setAlpha(color._a);\r\n            return this;\r\n        },\r\n        lighten: function() {\r\n            return this._applyModification(lighten, arguments);\r\n        },\r\n        brighten: function() {\r\n            return this._applyModification(brighten, arguments);\r\n        },\r\n        darken: function() {\r\n            return this._applyModification(darken, arguments);\r\n        },\r\n        desaturate: function() {\r\n            return this._applyModification(desaturate, arguments);\r\n        },\r\n        saturate: function() {\r\n            return this._applyModification(saturate, arguments);\r\n        },\r\n        greyscale: function() {\r\n            return this._applyModification(greyscale, arguments);\r\n        },\r\n        spin: function() {\r\n            return this._applyModification(spin, arguments);\r\n        },\r\n\r\n        _applyCombination: function(fn, args) {\r\n            return fn.apply(null, [this].concat([].slice.call(args)));\r\n        },\r\n        analogous: function() {\r\n            return this._applyCombination(analogous, arguments);\r\n        },\r\n        complement: function() {\r\n            return this._applyCombination(complement, arguments);\r\n        },\r\n        monochromatic: function() {\r\n            return this._applyCombination(monochromatic, arguments);\r\n        },\r\n        splitcomplement: function() {\r\n            return this._applyCombination(splitcomplement, arguments);\r\n        },\r\n        triad: function() {\r\n            return this._applyCombination(triad, arguments);\r\n        },\r\n        tetrad: function() {\r\n            return this._applyCombination(tetrad, arguments);\r\n        }\r\n    };\r\n\r\n    // If input is an object, force 1 into \"1.0\" to handle ratios properly\r\n    // String input requires \"1.0\" as input, so 1 will be treated as 1\r\n    tinycolor.fromRatio = function(color, opts) {\r\n        if (typeof color == \"object\") {\r\n            var newColor = {};\r\n            for (var i in color) {\r\n                if (color.hasOwnProperty(i)) {\r\n                    if (i === \"a\") {\r\n                        newColor[i] = color[i];\r\n                    }\r\n                    else {\r\n                        newColor[i] = convertToPercentage(color[i]);\r\n                    }\r\n                }\r\n            }\r\n            color = newColor;\r\n        }\r\n\r\n        return tinycolor(color, opts);\r\n    };\r\n\r\n    // Given a string or object, convert that input to RGB\r\n    // Possible string inputs:\r\n    //\r\n    //     \"red\"\r\n    //     \"#f00\" or \"f00\"\r\n    //     \"#ff0000\" or \"ff0000\"\r\n    //     \"#ff000000\" or \"ff000000\"\r\n    //     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\r\n    //     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\r\n    //     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\r\n    //     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\r\n    //     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\r\n    //     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\r\n    //     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\r\n    //\r\n    function inputToRGB(color) {\r\n\r\n        var rgb = { r: 0, g: 0, b: 0 };\r\n        var a = 1;\r\n        var ok = false;\r\n        var format = false;\r\n\r\n        if (typeof color == \"string\") {\r\n            color = stringInputToObject(color);\r\n        }\r\n\r\n        if (typeof color == \"object\") {\r\n            if (color.hasOwnProperty(\"r\") && color.hasOwnProperty(\"g\") && color.hasOwnProperty(\"b\")) {\r\n                rgb = rgbToRgb(color.r, color.g, color.b);\r\n                ok = true;\r\n                format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\r\n            }\r\n            else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"v\")) {\r\n                color.s = convertToPercentage(color.s);\r\n                color.v = convertToPercentage(color.v);\r\n                rgb = hsvToRgb(color.h, color.s, color.v);\r\n                ok = true;\r\n                format = \"hsv\";\r\n            }\r\n            else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"l\")) {\r\n                color.s = convertToPercentage(color.s);\r\n                color.l = convertToPercentage(color.l);\r\n                rgb = hslToRgb(color.h, color.s, color.l);\r\n                ok = true;\r\n                format = \"hsl\";\r\n            }\r\n\r\n            if (color.hasOwnProperty(\"a\")) {\r\n                a = color.a;\r\n            }\r\n        }\r\n\r\n        a = boundAlpha(a);\r\n\r\n        return {\r\n            ok: ok,\r\n            format: color.format || format,\r\n            r: mathMin(255, mathMax(rgb.r, 0)),\r\n            g: mathMin(255, mathMax(rgb.g, 0)),\r\n            b: mathMin(255, mathMax(rgb.b, 0)),\r\n            a: a\r\n        };\r\n    }\r\n\r\n\r\n    // Conversion Functions\r\n    // --------------------\r\n\r\n    // `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\r\n    // <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\r\n\r\n    // `rgbToRgb`\r\n    // Handle bounds / percentage checking to conform to CSS color spec\r\n    // <http://www.w3.org/TR/css3-color/>\r\n    // *Assumes:* r, g, b in [0, 255] or [0, 1]\r\n    // *Returns:* { r, g, b } in [0, 255]\r\n    function rgbToRgb(r, g, b){\r\n        return {\r\n            r: bound01(r, 255) * 255,\r\n            g: bound01(g, 255) * 255,\r\n            b: bound01(b, 255) * 255\r\n        };\r\n    }\r\n\r\n    // `rgbToHsl`\r\n    // Converts an RGB color value to HSL.\r\n    // *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\r\n    // *Returns:* { h, s, l } in [0,1]\r\n    function rgbToHsl(r, g, b) {\r\n\r\n        r = bound01(r, 255);\r\n        g = bound01(g, 255);\r\n        b = bound01(b, 255);\r\n\r\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n\r\n        if(max == min) {\r\n            h = s = 0; // achromatic\r\n        }\r\n        else {\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch(max) {\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n\r\n            h /= 6;\r\n        }\r\n\r\n        return { h: h, s: s, l: l };\r\n    }\r\n\r\n    // `hslToRgb`\r\n    // Converts an HSL color value to RGB.\r\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\r\n    // *Returns:* { r, g, b } in the set [0, 255]\r\n    function hslToRgb(h, s, l) {\r\n        var r, g, b;\r\n\r\n        h = bound01(h, 360);\r\n        s = bound01(s, 100);\r\n        l = bound01(l, 100);\r\n\r\n        function hue2rgb(p, q, t) {\r\n            if(t < 0) t += 1;\r\n            if(t > 1) t -= 1;\r\n            if(t < 1/6) return p + (q - p) * 6 * t;\r\n            if(t < 1/2) return q;\r\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n            return p;\r\n        }\r\n\r\n        if(s === 0) {\r\n            r = g = b = l; // achromatic\r\n        }\r\n        else {\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1/3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1/3);\r\n        }\r\n\r\n        return { r: r * 255, g: g * 255, b: b * 255 };\r\n    }\r\n\r\n    // `rgbToHsv`\r\n    // Converts an RGB color value to HSV\r\n    // *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\r\n    // *Returns:* { h, s, v } in [0,1]\r\n    function rgbToHsv(r, g, b) {\r\n\r\n        r = bound01(r, 255);\r\n        g = bound01(g, 255);\r\n        b = bound01(b, 255);\r\n\r\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\r\n        var h, s, v = max;\r\n\r\n        var d = max - min;\r\n        s = max === 0 ? 0 : d / max;\r\n\r\n        if(max == min) {\r\n            h = 0; // achromatic\r\n        }\r\n        else {\r\n            switch(max) {\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return { h: h, s: s, v: v };\r\n    }\r\n\r\n    // `hsvToRgb`\r\n    // Converts an HSV color value to RGB.\r\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\r\n    // *Returns:* { r, g, b } in the set [0, 255]\r\n     function hsvToRgb(h, s, v) {\r\n\r\n        h = bound01(h, 360) * 6;\r\n        s = bound01(s, 100);\r\n        v = bound01(v, 100);\r\n\r\n        var i = math.floor(h),\r\n            f = h - i,\r\n            p = v * (1 - s),\r\n            q = v * (1 - f * s),\r\n            t = v * (1 - (1 - f) * s),\r\n            mod = i % 6,\r\n            r = [v, q, p, p, t, v][mod],\r\n            g = [t, v, v, q, p, p][mod],\r\n            b = [p, p, t, v, v, q][mod];\r\n\r\n        return { r: r * 255, g: g * 255, b: b * 255 };\r\n    }\r\n\r\n    // `rgbToHex`\r\n    // Converts an RGB color to hex\r\n    // Assumes r, g, and b are contained in the set [0, 255]\r\n    // Returns a 3 or 6 character hex\r\n    function rgbToHex(r, g, b, allow3Char) {\r\n\r\n        var hex = [\r\n            pad2(mathRound(r).toString(16)),\r\n            pad2(mathRound(g).toString(16)),\r\n            pad2(mathRound(b).toString(16))\r\n        ];\r\n\r\n        // Return a 3 character hex if possible\r\n        if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\r\n            return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\r\n        }\r\n\r\n        return hex.join(\"\");\r\n    }\r\n        // `rgbaToHex`\r\n        // Converts an RGBA color plus alpha transparency to hex\r\n        // Assumes r, g, b and a are contained in the set [0, 255]\r\n        // Returns an 8 character hex\r\n        function rgbaToHex(r, g, b, a) {\r\n\r\n            var hex = [\r\n                pad2(convertDecimalToHex(a)),\r\n                pad2(mathRound(r).toString(16)),\r\n                pad2(mathRound(g).toString(16)),\r\n                pad2(mathRound(b).toString(16))\r\n            ];\r\n\r\n            return hex.join(\"\");\r\n        }\r\n\r\n    // `equals`\r\n    // Can be called with any tinycolor input\r\n    tinycolor.equals = function (color1, color2) {\r\n        if (!color1 || !color2) { return false; }\r\n        return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\r\n    };\r\n    tinycolor.random = function() {\r\n        return tinycolor.fromRatio({\r\n            r: mathRandom(),\r\n            g: mathRandom(),\r\n            b: mathRandom()\r\n        });\r\n    };\r\n\r\n\r\n    // Modification Functions\r\n    // ----------------------\r\n    // Thanks to less.js for some of the basics here\r\n    // <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\r\n\r\n    function desaturate(color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.s -= amount / 100;\r\n        hsl.s = clamp01(hsl.s);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function saturate(color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.s += amount / 100;\r\n        hsl.s = clamp01(hsl.s);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function greyscale(color) {\r\n        return tinycolor(color).desaturate(100);\r\n    }\r\n\r\n    function lighten (color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.l += amount / 100;\r\n        hsl.l = clamp01(hsl.l);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function brighten(color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var rgb = tinycolor(color).toRgb();\r\n        rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\r\n        rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\r\n        rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\r\n        return tinycolor(rgb);\r\n    }\r\n\r\n    function darken (color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.l -= amount / 100;\r\n        hsl.l = clamp01(hsl.l);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    // Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\r\n    // Values outside of this range will be wrapped into this range.\r\n    function spin(color, amount) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var hue = (mathRound(hsl.h) + amount) % 360;\r\n        hsl.h = hue < 0 ? 360 + hue : hue;\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    // Combination Functions\r\n    // ---------------------\r\n    // Thanks to jQuery xColor for some of the ideas behind these\r\n    // <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\r\n\r\n    function complement(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.h = (hsl.h + 180) % 360;\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function triad(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var h = hsl.h;\r\n        return [\r\n            tinycolor(color),\r\n            tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\r\n            tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\r\n        ];\r\n    }\r\n\r\n    function tetrad(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var h = hsl.h;\r\n        return [\r\n            tinycolor(color),\r\n            tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\r\n            tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\r\n            tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\r\n        ];\r\n    }\r\n\r\n    function splitcomplement(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var h = hsl.h;\r\n        return [\r\n            tinycolor(color),\r\n            tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\r\n            tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\r\n        ];\r\n    }\r\n\r\n    function analogous(color, results, slices) {\r\n        results = results || 6;\r\n        slices = slices || 30;\r\n\r\n        var hsl = tinycolor(color).toHsl();\r\n        var part = 360 / slices;\r\n        var ret = [tinycolor(color)];\r\n\r\n        for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\r\n            hsl.h = (hsl.h + part) % 360;\r\n            ret.push(tinycolor(hsl));\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    function monochromatic(color, results) {\r\n        results = results || 6;\r\n        var hsv = tinycolor(color).toHsv();\r\n        var h = hsv.h, s = hsv.s, v = hsv.v;\r\n        var ret = [];\r\n        var modification = 1 / results;\r\n\r\n        while (results--) {\r\n            ret.push(tinycolor({ h: h, s: s, v: v}));\r\n            v = (v + modification) % 1;\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    // Utility Functions\r\n    // ---------------------\r\n\r\n    tinycolor.mix = function(color1, color2, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 50);\r\n\r\n        var rgb1 = tinycolor(color1).toRgb();\r\n        var rgb2 = tinycolor(color2).toRgb();\r\n\r\n        var p = amount / 100;\r\n        var w = p * 2 - 1;\r\n        var a = rgb2.a - rgb1.a;\r\n\r\n        var w1;\r\n\r\n        if (w * a == -1) {\r\n            w1 = w;\r\n        } else {\r\n            w1 = (w + a) / (1 + w * a);\r\n        }\r\n\r\n        w1 = (w1 + 1) / 2;\r\n\r\n        var w2 = 1 - w1;\r\n\r\n        var rgba = {\r\n            r: rgb2.r * w1 + rgb1.r * w2,\r\n            g: rgb2.g * w1 + rgb1.g * w2,\r\n            b: rgb2.b * w1 + rgb1.b * w2,\r\n            a: rgb2.a * p  + rgb1.a * (1 - p)\r\n        };\r\n\r\n        return tinycolor(rgba);\r\n    };\r\n\r\n\r\n    // Readability Functions\r\n    // ---------------------\r\n    // <http://www.w3.org/TR/AERT#color-contrast>\r\n\r\n    // `readability`\r\n    // Analyze the 2 colors and returns an object with the following properties:\r\n    //    `brightness`: difference in brightness between the two colors\r\n    //    `color`: difference in color/hue between the two colors\r\n    tinycolor.readability = function(color1, color2) {\r\n        var c1 = tinycolor(color1);\r\n        var c2 = tinycolor(color2);\r\n        var rgb1 = c1.toRgb();\r\n        var rgb2 = c2.toRgb();\r\n        var brightnessA = c1.getBrightness();\r\n        var brightnessB = c2.getBrightness();\r\n        var colorDiff = (\r\n            Math.max(rgb1.r, rgb2.r) - Math.min(rgb1.r, rgb2.r) +\r\n            Math.max(rgb1.g, rgb2.g) - Math.min(rgb1.g, rgb2.g) +\r\n            Math.max(rgb1.b, rgb2.b) - Math.min(rgb1.b, rgb2.b)\r\n        );\r\n\r\n        return {\r\n            brightness: Math.abs(brightnessA - brightnessB),\r\n            color: colorDiff\r\n        };\r\n    };\r\n\r\n    // `readable`\r\n    // http://www.w3.org/TR/AERT#color-contrast\r\n    // Ensure that foreground and background color combinations provide sufficient contrast.\r\n    // *Example*\r\n    //    tinycolor.isReadable(\"#000\", \"#111\") => false\r\n    tinycolor.isReadable = function(color1, color2) {\r\n        var readability = tinycolor.readability(color1, color2);\r\n        return readability.brightness > 125 && readability.color > 500;\r\n    };\r\n\r\n    // `mostReadable`\r\n    // Given a base color and a list of possible foreground or background\r\n    // colors for that base, returns the most readable color.\r\n    // *Example*\r\n    //    tinycolor.mostReadable(\"#123\", [\"#fff\", \"#000\"]) => \"#000\"\r\n    tinycolor.mostReadable = function(baseColor, colorList) {\r\n        var bestColor = null;\r\n        var bestScore = 0;\r\n        var bestIsReadable = false;\r\n        for (var i=0; i < colorList.length; i++) {\r\n\r\n            // We normalize both around the \"acceptable\" breaking point,\r\n            // but rank brightness constrast higher than hue.\r\n\r\n            var readability = tinycolor.readability(baseColor, colorList[i]);\r\n            var readable = readability.brightness > 125 && readability.color > 500;\r\n            var score = 3 * (readability.brightness / 125) + (readability.color / 500);\r\n\r\n            if ((readable && ! bestIsReadable) ||\r\n                (readable && bestIsReadable && score > bestScore) ||\r\n                ((! readable) && (! bestIsReadable) && score > bestScore)) {\r\n                bestIsReadable = readable;\r\n                bestScore = score;\r\n                bestColor = tinycolor(colorList[i]);\r\n            }\r\n        }\r\n        return bestColor;\r\n    };\r\n\r\n\r\n    // Big List of Colors\r\n    // ------------------\r\n    // <http://www.w3.org/TR/css3-color/#svg-color>\r\n    var names = tinycolor.names = {\r\n        aliceblue: \"f0f8ff\",\r\n        antiquewhite: \"faebd7\",\r\n        aqua: \"0ff\",\r\n        aquamarine: \"7fffd4\",\r\n        azure: \"f0ffff\",\r\n        beige: \"f5f5dc\",\r\n        bisque: \"ffe4c4\",\r\n        black: \"000\",\r\n        blanchedalmond: \"ffebcd\",\r\n        blue: \"00f\",\r\n        blueviolet: \"8a2be2\",\r\n        brown: \"a52a2a\",\r\n        burlywood: \"deb887\",\r\n        burntsienna: \"ea7e5d\",\r\n        cadetblue: \"5f9ea0\",\r\n        chartreuse: \"7fff00\",\r\n        chocolate: \"d2691e\",\r\n        coral: \"ff7f50\",\r\n        cornflowerblue: \"6495ed\",\r\n        cornsilk: \"fff8dc\",\r\n        crimson: \"dc143c\",\r\n        cyan: \"0ff\",\r\n        darkblue: \"00008b\",\r\n        darkcyan: \"008b8b\",\r\n        darkgoldenrod: \"b8860b\",\r\n        darkgray: \"a9a9a9\",\r\n        darkgreen: \"006400\",\r\n        darkgrey: \"a9a9a9\",\r\n        darkkhaki: \"bdb76b\",\r\n        darkmagenta: \"8b008b\",\r\n        darkolivegreen: \"556b2f\",\r\n        darkorange: \"ff8c00\",\r\n        darkorchid: \"9932cc\",\r\n        darkred: \"8b0000\",\r\n        darksalmon: \"e9967a\",\r\n        darkseagreen: \"8fbc8f\",\r\n        darkslateblue: \"483d8b\",\r\n        darkslategray: \"2f4f4f\",\r\n        darkslategrey: \"2f4f4f\",\r\n        darkturquoise: \"00ced1\",\r\n        darkviolet: \"9400d3\",\r\n        deeppink: \"ff1493\",\r\n        deepskyblue: \"00bfff\",\r\n        dimgray: \"696969\",\r\n        dimgrey: \"696969\",\r\n        dodgerblue: \"1e90ff\",\r\n        firebrick: \"b22222\",\r\n        floralwhite: \"fffaf0\",\r\n        forestgreen: \"228b22\",\r\n        fuchsia: \"f0f\",\r\n        gainsboro: \"dcdcdc\",\r\n        ghostwhite: \"f8f8ff\",\r\n        gold: \"ffd700\",\r\n        goldenrod: \"daa520\",\r\n        gray: \"808080\",\r\n        green: \"008000\",\r\n        greenyellow: \"adff2f\",\r\n        grey: \"808080\",\r\n        honeydew: \"f0fff0\",\r\n        hotpink: \"ff69b4\",\r\n        indianred: \"cd5c5c\",\r\n        indigo: \"4b0082\",\r\n        ivory: \"fffff0\",\r\n        khaki: \"f0e68c\",\r\n        lavender: \"e6e6fa\",\r\n        lavenderblush: \"fff0f5\",\r\n        lawngreen: \"7cfc00\",\r\n        lemonchiffon: \"fffacd\",\r\n        lightblue: \"add8e6\",\r\n        lightcoral: \"f08080\",\r\n        lightcyan: \"e0ffff\",\r\n        lightgoldenrodyellow: \"fafad2\",\r\n        lightgray: \"d3d3d3\",\r\n        lightgreen: \"90ee90\",\r\n        lightgrey: \"d3d3d3\",\r\n        lightpink: \"ffb6c1\",\r\n        lightsalmon: \"ffa07a\",\r\n        lightseagreen: \"20b2aa\",\r\n        lightskyblue: \"87cefa\",\r\n        lightslategray: \"789\",\r\n        lightslategrey: \"789\",\r\n        lightsteelblue: \"b0c4de\",\r\n        lightyellow: \"ffffe0\",\r\n        lime: \"0f0\",\r\n        limegreen: \"32cd32\",\r\n        linen: \"faf0e6\",\r\n        magenta: \"f0f\",\r\n        maroon: \"800000\",\r\n        mediumaquamarine: \"66cdaa\",\r\n        mediumblue: \"0000cd\",\r\n        mediumorchid: \"ba55d3\",\r\n        mediumpurple: \"9370db\",\r\n        mediumseagreen: \"3cb371\",\r\n        mediumslateblue: \"7b68ee\",\r\n        mediumspringgreen: \"00fa9a\",\r\n        mediumturquoise: \"48d1cc\",\r\n        mediumvioletred: \"c71585\",\r\n        midnightblue: \"191970\",\r\n        mintcream: \"f5fffa\",\r\n        mistyrose: \"ffe4e1\",\r\n        moccasin: \"ffe4b5\",\r\n        navajowhite: \"ffdead\",\r\n        navy: \"000080\",\r\n        oldlace: \"fdf5e6\",\r\n        olive: \"808000\",\r\n        olivedrab: \"6b8e23\",\r\n        orange: \"ffa500\",\r\n        orangered: \"ff4500\",\r\n        orchid: \"da70d6\",\r\n        palegoldenrod: \"eee8aa\",\r\n        palegreen: \"98fb98\",\r\n        paleturquoise: \"afeeee\",\r\n        palevioletred: \"db7093\",\r\n        papayawhip: \"ffefd5\",\r\n        peachpuff: \"ffdab9\",\r\n        peru: \"cd853f\",\r\n        pink: \"ffc0cb\",\r\n        plum: \"dda0dd\",\r\n        powderblue: \"b0e0e6\",\r\n        purple: \"800080\",\r\n        rebeccapurple: \"663399\",\r\n        red: \"f00\",\r\n        rosybrown: \"bc8f8f\",\r\n        royalblue: \"4169e1\",\r\n        saddlebrown: \"8b4513\",\r\n        salmon: \"fa8072\",\r\n        sandybrown: \"f4a460\",\r\n        seagreen: \"2e8b57\",\r\n        seashell: \"fff5ee\",\r\n        sienna: \"a0522d\",\r\n        silver: \"c0c0c0\",\r\n        skyblue: \"87ceeb\",\r\n        slateblue: \"6a5acd\",\r\n        slategray: \"708090\",\r\n        slategrey: \"708090\",\r\n        snow: \"fffafa\",\r\n        springgreen: \"00ff7f\",\r\n        steelblue: \"4682b4\",\r\n        tan: \"d2b48c\",\r\n        teal: \"008080\",\r\n        thistle: \"d8bfd8\",\r\n        tomato: \"ff6347\",\r\n        turquoise: \"40e0d0\",\r\n        violet: \"ee82ee\",\r\n        wheat: \"f5deb3\",\r\n        white: \"fff\",\r\n        whitesmoke: \"f5f5f5\",\r\n        yellow: \"ff0\",\r\n        yellowgreen: \"9acd32\"\r\n    };\r\n\r\n    // Make it easy to access colors via `hexNames[hex]`\r\n    var hexNames = tinycolor.hexNames = flip(names);\r\n\r\n\r\n    // Utilities\r\n    // ---------\r\n\r\n    // `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\r\n    function flip(o) {\r\n        var flipped = { };\r\n        for (var i in o) {\r\n            if (o.hasOwnProperty(i)) {\r\n                flipped[o[i]] = i;\r\n            }\r\n        }\r\n        return flipped;\r\n    }\r\n\r\n    // Return a valid alpha value [0,1] with all invalid values being set to 1\r\n    function boundAlpha(a) {\r\n        a = parseFloat(a);\r\n\r\n        if (isNaN(a) || a < 0 || a > 1) {\r\n            a = 1;\r\n        }\r\n\r\n        return a;\r\n    }\r\n\r\n    // Take input from [0, n] and return it as [0, 1]\r\n    function bound01(n, max) {\r\n        if (isOnePointZero(n)) { n = \"100%\"; }\r\n\r\n        var processPercent = isPercentage(n);\r\n        n = mathMin(max, mathMax(0, parseFloat(n)));\r\n\r\n        // Automatically convert percentage into number\r\n        if (processPercent) {\r\n            n = parseInt(n * max, 10) / 100;\r\n        }\r\n\r\n        // Handle floating point rounding errors\r\n        if ((math.abs(n - max) < 0.000001)) {\r\n            return 1;\r\n        }\r\n\r\n        // Convert into [0, 1] range if it isn't already\r\n        return (n % max) / parseFloat(max);\r\n    }\r\n\r\n    // Force a number between 0 and 1\r\n    function clamp01(val) {\r\n        return mathMin(1, mathMax(0, val));\r\n    }\r\n\r\n    // Parse a base-16 hex value into a base-10 integer\r\n    function parseIntFromHex(val) {\r\n        return parseInt(val, 16);\r\n    }\r\n\r\n    // Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\r\n    // <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\r\n    function isOnePointZero(n) {\r\n        return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\r\n    }\r\n\r\n    // Check to see if string passed in is a percentage\r\n    function isPercentage(n) {\r\n        return typeof n === \"string\" && n.indexOf('%') != -1;\r\n    }\r\n\r\n    // Force a hex value to have 2 characters\r\n    function pad2(c) {\r\n        return c.length == 1 ? '0' + c : '' + c;\r\n    }\r\n\r\n    // Replace a decimal with it's percentage value\r\n    function convertToPercentage(n) {\r\n        if (n <= 1) {\r\n            n = (n * 100) + \"%\";\r\n        }\r\n\r\n        return n;\r\n    }\r\n\r\n    // Converts a decimal to a hex value\r\n    function convertDecimalToHex(d) {\r\n        return Math.round(parseFloat(d) * 255).toString(16);\r\n    }\r\n    // Converts a hex value to a decimal\r\n    function convertHexToDecimal(h) {\r\n        return (parseIntFromHex(h) / 255);\r\n    }\r\n\r\n    var matchers = (function() {\r\n\r\n        // <http://www.w3.org/TR/css3-values/#integers>\r\n        var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\r\n\r\n        // <http://www.w3.org/TR/css3-values/#number-value>\r\n        var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\r\n\r\n        // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\r\n        var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\r\n\r\n        // Actual matching.\r\n        // Parentheses and commas are optional, but not required.\r\n        // Whitespace can take the place of commas or opening paren\r\n        var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\r\n        var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\r\n\r\n        return {\r\n            rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\r\n            rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\r\n            hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\r\n            hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\r\n            hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\r\n            hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\r\n            hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\r\n            hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\r\n            hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\r\n        };\r\n    })();\r\n\r\n    // `stringInputToObject`\r\n    // Permissive string parsing.  Take in a number of formats, and output an object\r\n    // based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\r\n    function stringInputToObject(color) {\r\n\r\n        color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\r\n        var named = false;\r\n        if (names[color]) {\r\n            color = names[color];\r\n            named = true;\r\n        }\r\n        else if (color == 'transparent') {\r\n            return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\r\n        }\r\n\r\n        // Try to match string input using regular expressions.\r\n        // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\r\n        // Just return an object and let the conversion functions handle that.\r\n        // This way the result will be the same whether the tinycolor is initialized with string or object.\r\n        var match;\r\n        if ((match = matchers.rgb.exec(color))) {\r\n            return { r: match[1], g: match[2], b: match[3] };\r\n        }\r\n        if ((match = matchers.rgba.exec(color))) {\r\n            return { r: match[1], g: match[2], b: match[3], a: match[4] };\r\n        }\r\n        if ((match = matchers.hsl.exec(color))) {\r\n            return { h: match[1], s: match[2], l: match[3] };\r\n        }\r\n        if ((match = matchers.hsla.exec(color))) {\r\n            return { h: match[1], s: match[2], l: match[3], a: match[4] };\r\n        }\r\n        if ((match = matchers.hsv.exec(color))) {\r\n            return { h: match[1], s: match[2], v: match[3] };\r\n        }\r\n        if ((match = matchers.hsva.exec(color))) {\r\n            return { h: match[1], s: match[2], v: match[3], a: match[4] };\r\n        }\r\n        if ((match = matchers.hex8.exec(color))) {\r\n            return {\r\n                a: convertHexToDecimal(match[1]),\r\n                r: parseIntFromHex(match[2]),\r\n                g: parseIntFromHex(match[3]),\r\n                b: parseIntFromHex(match[4]),\r\n                format: named ? \"name\" : \"hex8\"\r\n            };\r\n        }\r\n        if ((match = matchers.hex6.exec(color))) {\r\n            return {\r\n                r: parseIntFromHex(match[1]),\r\n                g: parseIntFromHex(match[2]),\r\n                b: parseIntFromHex(match[3]),\r\n                format: named ? \"name\" : \"hex\"\r\n            };\r\n        }\r\n        if ((match = matchers.hex3.exec(color))) {\r\n            return {\r\n                r: parseIntFromHex(match[1] + '' + match[1]),\r\n                g: parseIntFromHex(match[2] + '' + match[2]),\r\n                b: parseIntFromHex(match[3] + '' + match[3]),\r\n                format: named ? \"name\" : \"hex\"\r\n            };\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    window.tinycolor = tinycolor;\r\n    })();\r\n\r\n    $(function () {\r\n        if ($.fn.spectrum.load) {\r\n            $.fn.spectrum.processNativeColorInputs();\r\n        }\r\n    });\r\n\r\n});\r\n"],"sourceRoot":""}